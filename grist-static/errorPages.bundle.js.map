{"version":3,"file":"errorPages.bundle.js","mappings":"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CACVigD,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,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","sources":["./app/client/DefaultHooks.ts?","./app/client/components/BehavioralPromptsManager.ts?","./app/client/components/UnsavedChanges.ts?","./app/client/components/commandList.ts?","./app/client/components/commands.ts?","./app/client/components/modals.ts?","./app/client/lib/FocusLayer.ts?","./app/client/lib/TokenField.ts?","./app/client/lib/UrlState.ts?","./app/client/lib/autocomplete.ts?","./app/client/lib/browserInfo.ts?","./app/client/lib/helpScout.ts?","./app/client/lib/localStorageObs.ts?","./app/client/lib/localization.ts?","./app/client/lib/log.ts?","./app/client/lib/pausableObs.ts?","./app/client/lib/storage.ts?","./app/client/lib/telemetry.ts?","./app/client/lib/textUtils.ts?","./app/client/models/AppModel.ts?","./app/client/models/ConnectState.ts?","./app/client/models/NotifyModel.ts?","./app/client/models/TelemetryModel.ts?","./app/client/models/UserPrefs.ts?","./app/client/models/errors.ts?","./app/client/models/features.ts?","./app/client/models/gristUrlState.ts?","./app/client/ui/AccountWidget.ts?","./app/client/ui/AppHeader.ts?","./app/client/ui/CustomThemes.ts?","./app/client/ui/GristTooltips.ts?","./app/client/ui/LanguageMenu.ts?","./app/client/ui/LeftPanelCommon.ts?","./app/client/ui/MakeCopyMenu.ts?","./app/client/ui/NotifyUI.ts?","./app/client/ui/OpenUserManager.ts?","./app/client/ui/resizeHandle.ts?","./app/client/ui/PagePanels.ts?","./app/client/ui/ProductUpgradesStub.ts?","./app/client/ui/ShortcutKey.ts?","./app/client/ui/SiteSwitcher.ts?","./app/client/ui/SupportGristNudge.ts?","./app/client/ui/sendToDrive.ts?","./app/client/ui/ShareMenu.ts?","./app/client/ui/TopBar.ts?","./app/client/ui/TopBarCss.ts?","./app/client/ui/UserImage.ts?","./app/client/ui/cssInput.ts?","./app/client/ui/googleAuth.ts?","./app/client/ui/mouseDrag.ts?","./app/client/ui/tooltips.ts?","./app/client/ui/transitions.ts?","./app/client/ui/viewport.ts?","./app/client/ui2018/breadcrumbs.ts?","./app/client/ui2018/buttons.ts?","./app/client/ui2018/checkbox.ts?","./app/client/ui2018/cssVars.ts?","./app/client/ui2018/editableLabel.ts?","./app/client/ui2018/icons.ts?","./app/client/ui2018/links.ts?","./app/client/ui2018/loaders.ts?","./app/client/ui2018/menus.ts?","./app/client/ui2018/modals.ts?","./app/client/ui2018/select.ts?","./app/common/ApiError.ts?","./app/common/BaseAPI.ts?","./app/common/BillingAPI.ts?","./app/common/DocListAPI.ts?","./app/common/Features.ts?","./app/common/InactivityTimer.ts?","./app/common/InstallAPI.ts?","./app/common/LocaleCodes.ts?","./app/common/Locales.ts?","./app/common/Prefs.ts?","./app/common/RefCountMap.ts?","./app/common/StringUnion.ts?","./app/common/Telemetry.ts?","./app/common/ThemePrefs-ti.ts?","./app/common/ThemePrefs.ts?","./app/common/Themes.ts?","./app/common/UserAPI.ts?","./app/common/csvFormat.ts?","./app/common/delay.ts?","./app/common/gristUrls.ts?","./app/common/gutil.ts?","./app/common/roles.ts?","./app/common/tagManager.ts?","./app/common/tbind.ts?","./app/common/themes/GristDark.ts?","./app/common/themes/GristLight.ts?","./app/common/timeFormat.ts?","./app/common/urlUtils.ts?","./app/plugin/gutil.ts?","./app/client/lib/Mousetrap.js?","./app/client/lib/browserGlobals.js?","./app/client/lib/dom.js?","./app/client/lib/imports.js?","./stubs/app/common/version.ts?","../ext/app/client/HookStub.ts?","../ext/app/pipe/GristOverrides.ts?","./node_modules/@popperjs/core/lib/dom-utils/contains.js?","./node_modules/@popperjs/core/lib/dom-utils/getBorders.js?","./node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js?","./node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js?","./node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js?","./node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js?","./node_modules/@popperjs/core/lib/dom-utils/getDecorations.js?","./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js?","./node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js?","./node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js?","./node_modules/@popperjs/core/lib/dom-utils/getNodeName.js?","./node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js?","./node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js?","./node_modules/@popperjs/core/lib/dom-utils/getParentNode.js?","./node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js?","./node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js?","./node_modules/@popperjs/core/lib/dom-utils/getWindow.js?","./node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js?","./node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js?","./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js?","./node_modules/@popperjs/core/lib/dom-utils/isTableElement.js?","./node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js?","./node_modules/@popperjs/core/lib/enums.js?","./node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js?","./node_modules/@popperjs/core/lib/utils/orderModifiers.js?","./node_modules/@popperjs/core/lib/index.js?","./node_modules/@popperjs/core/lib/utils/debounce.js?","./node_modules/@popperjs/core/lib/utils/mergeByName.js?","./node_modules/@popperjs/core/lib/modifiers/eventListeners.js?","./node_modules/@popperjs/core/lib/modifiers/popperOffsets.js?","./node_modules/@popperjs/core/lib/modifiers/computeStyles.js?","./node_modules/@popperjs/core/lib/modifiers/applyStyles.js?","./node_modules/@popperjs/core/lib/modifiers/offset.js?","./node_modules/@popperjs/core/lib/utils/getOppositePlacement.js?","./node_modules/@popperjs/core/lib/utils/getOppositeVariationPlacement.js?","./node_modules/@popperjs/core/lib/modifiers/flip.js?","./node_modules/@popperjs/core/lib/utils/computeAutoPlacement.js?","./node_modules/@popperjs/core/lib/utils/within.js?","./node_modules/@popperjs/core/lib/modifiers/preventOverflow.js?","./node_modules/@popperjs/core/lib/utils/getAltAxis.js?","./node_modules/@popperjs/core/lib/modifiers/hide.js?","./node_modules/@popperjs/core/lib/popper.js?","./node_modules/@popperjs/core/lib/modifiers/arrow.js?","./node_modules/@popperjs/core/lib/utils/computeOffsets.js?","./node_modules/@popperjs/core/lib/utils/detectOverflow.js?","./node_modules/@popperjs/core/lib/utils/expandToHashMap.js?","./node_modules/@popperjs/core/lib/utils/getBasePlacement.js?","./node_modules/@popperjs/core/lib/utils/getFreshSideObject.js?","./node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js?","./node_modules/@popperjs/core/lib/utils/getVariation.js?","./node_modules/@popperjs/core/lib/utils/mergePaddingObject.js?","./node_modules/@popperjs/core/lib/utils/rectToClientRect.js?","./node_modules/axios/index.js?","./node_modules/axios/lib/adapters/xhr.js?","./node_modules/axios/lib/axios.js?","./node_modules/axios/lib/cancel/Cancel.js?","./node_modules/axios/lib/cancel/CancelToken.js?","./node_modules/axios/lib/cancel/isCancel.js?","./node_modules/axios/lib/core/Axios.js?","./node_modules/axios/lib/core/InterceptorManager.js?","./node_modules/axios/lib/core/buildFullPath.js?","./node_modules/axios/lib/core/createError.js?","./node_modules/axios/lib/core/dispatchRequest.js?","./node_modules/axios/lib/core/enhanceError.js?","./node_modules/axios/lib/core/mergeConfig.js?","./node_modules/axios/lib/core/settle.js?","./node_modules/axios/lib/core/transformData.js?","./node_modules/axios/lib/defaults.js?","./node_modules/axios/lib/helpers/bind.js?","./node_modules/axios/lib/helpers/buildURL.js?","./node_modules/axios/lib/helpers/combineURLs.js?","./node_modules/axios/lib/helpers/cookies.js?","./node_modules/axios/lib/helpers/isAbsoluteURL.js?","./node_modules/axios/lib/helpers/isAxiosError.js?","./node_modules/axios/lib/helpers/isURLSameOrigin.js?","./node_modules/axios/lib/helpers/normalizeHeaderName.js?","./node_modules/axios/lib/helpers/parseHeaders.js?","./node_modules/axios/lib/helpers/spread.js?","./node_modules/axios/lib/helpers/validator.js?","./node_modules/axios/lib/utils.js?","./node_modules/base64-js/index.js?","./node_modules/bowser/es5.js?","./node_modules/buffer/index.js?","./node_modules/grainjs/lib/browserGlobals.ts?","./node_modules/grainjs/lib/dispose.ts?","./node_modules/grainjs/lib/_computed_queue.ts?","./node_modules/grainjs/lib/PriorityQueue.ts?","./node_modules/grainjs/lib/observable.ts?","./node_modules/grainjs/lib/domDispose.ts?","./node_modules/grainjs/lib/kowrap.ts?","./node_modules/grainjs/lib/subscribe.ts?","./node_modules/grainjs/lib/computed.ts?","./node_modules/grainjs/lib/binding.ts?","./node_modules/grainjs/lib/domMethods.ts?","./node_modules/grainjs/lib/domImpl.ts?","./node_modules/grainjs/lib/domComputed.ts?","./node_modules/grainjs/lib/domComponent.ts?","./node_modules/grainjs/lib/obsArray.ts?","./node_modules/grainjs/lib/domForEach.ts?","./node_modules/grainjs/lib/domevent.ts?","./node_modules/grainjs/lib/dom.ts?","./node_modules/grainjs/lib/pureComputed.ts?","./node_modules/grainjs/lib/styled.ts?","./node_modules/grainjs/lib/widgets/input.ts?","./node_modules/grainjs/lib/widgets/select.ts?","./node_modules/grainjs/lib/emit.ts?","./node_modules/grainjs/lib/util.ts?","./node_modules/ieee754/index.js?","./node_modules/knockout/build/output/knockout-latest.js?","./node_modules/locale-currency/index.js?","./node_modules/locale-currency/map.js?","./node_modules/lodash/_DataView.js?","./node_modules/lodash/_Hash.js?","./node_modules/lodash/_ListCache.js?","./node_modules/lodash/_Map.js?","./node_modules/lodash/_MapCache.js?","./node_modules/lodash/_Promise.js?","./node_modules/lodash/_Set.js?","./node_modules/lodash/_SetCache.js?","./node_modules/lodash/_Stack.js?","./node_modules/lodash/_Symbol.js?","./node_modules/lodash/_Uint8Array.js?","./node_modules/lodash/_WeakMap.js?","./node_modules/lodash/_apply.js?","./node_modules/lodash/_arrayEach.js?","./node_modules/lodash/_arrayFilter.js?","./node_modules/lodash/_arrayLikeKeys.js?","./node_modules/lodash/_arrayMap.js?","./node_modules/lodash/_arrayPush.js?","./node_modules/lodash/_arraySome.js?","./node_modules/lodash/_assignMergeValue.js?","./node_modules/lodash/_assignValue.js?","./node_modules/lodash/_assocIndexOf.js?","./node_modules/lodash/_baseAssign.js?","./node_modules/lodash/_baseAssignIn.js?","./node_modules/lodash/_baseAssignValue.js?","./node_modules/lodash/_baseClamp.js?","./node_modules/lodash/_baseClone.js?","./node_modules/lodash/_baseCreate.js?","./node_modules/lodash/_baseEach.js?","./node_modules/lodash/_baseFlatten.js?","./node_modules/lodash/_baseFor.js?","./node_modules/lodash/_baseForOwn.js?","./node_modules/lodash/_baseGet.js?","./node_modules/lodash/_baseGetAllKeys.js?","./node_modules/lodash/_baseGetTag.js?","./node_modules/lodash/_baseHasIn.js?","./node_modules/lodash/_baseIsArguments.js?","./node_modules/lodash/_baseIsEqual.js?","./node_modules/lodash/_baseIsEqualDeep.js?","./node_modules/lodash/_baseIsMap.js?","./node_modules/lodash/_baseIsMatch.js?","./node_modules/lodash/_baseIsNative.js?","./node_modules/lodash/_baseIsSet.js?","./node_modules/lodash/_baseIsTypedArray.js?","./node_modules/lodash/_baseIteratee.js?","./node_modules/lodash/_baseKeys.js?","./node_modules/lodash/_baseKeysIn.js?","./node_modules/lodash/_baseMap.js?","./node_modules/lodash/_baseMatches.js?","./node_modules/lodash/_baseMatchesProperty.js?","./node_modules/lodash/_baseMerge.js?","./node_modules/lodash/_baseMergeDeep.js?","./node_modules/lodash/_baseOrderBy.js?","./node_modules/lodash/_basePick.js?","./node_modules/lodash/_basePickBy.js?","./node_modules/lodash/_baseProperty.js?","./node_modules/lodash/_basePropertyDeep.js?","./node_modules/lodash/_baseRest.js?","./node_modules/lodash/_baseSet.js?","./node_modules/lodash/_baseSetToString.js?","./node_modules/lodash/_baseSortBy.js?","./node_modules/lodash/_baseTimes.js?","./node_modules/lodash/_baseToString.js?","./node_modules/lodash/_baseTrim.js?","./node_modules/lodash/_baseUnary.js?","./node_modules/lodash/_baseValues.js?","./node_modules/lodash/_cacheHas.js?","./node_modules/lodash/_castFunction.js?","./node_modules/lodash/_castPath.js?","./node_modules/lodash/_cloneArrayBuffer.js?","./node_modules/lodash/_cloneBuffer.js?","./node_modules/lodash/_cloneDataView.js?","./node_modules/lodash/_cloneRegExp.js?","./node_modules/lodash/_cloneSymbol.js?","./node_modules/lodash/_cloneTypedArray.js?","./node_modules/lodash/_compareAscending.js?","./node_modules/lodash/_compareMultiple.js?","./node_modules/lodash/_copyArray.js?","./node_modules/lodash/_copyObject.js?","./node_modules/lodash/_copySymbols.js?","./node_modules/lodash/_copySymbolsIn.js?","./node_modules/lodash/_coreJsData.js?","./node_modules/lodash/_createAssigner.js?","./node_modules/lodash/_createBaseEach.js?","./node_modules/lodash/_createBaseFor.js?","./node_modules/lodash/_customDefaultsMerge.js?","./node_modules/lodash/_defineProperty.js?","./node_modules/lodash/_equalArrays.js?","./node_modules/lodash/_equalByTag.js?","./node_modules/lodash/_equalObjects.js?","./node_modules/lodash/_flatRest.js?","./node_modules/lodash/_freeGlobal.js?","./node_modules/lodash/_getAllKeys.js?","./node_modules/lodash/_getAllKeysIn.js?","./node_modules/lodash/_getMapData.js?","./node_modules/lodash/_getMatchData.js?","./node_modules/lodash/_getNative.js?","./node_modules/lodash/_getPrototype.js?","./node_modules/lodash/_getRawTag.js?","./node_modules/lodash/_getSymbols.js?","./node_modules/lodash/_getSymbolsIn.js?","./node_modules/lodash/_getTag.js?","./node_modules/lodash/_getValue.js?","./node_modules/lodash/_hasPath.js?","./node_modules/lodash/_hashClear.js?","./node_modules/lodash/_hashDelete.js?","./node_modules/lodash/_hashGet.js?","./node_modules/lodash/_hashHas.js?","./node_modules/lodash/_hashSet.js?","./node_modules/lodash/_initCloneArray.js?","./node_modules/lodash/_initCloneByTag.js?","./node_modules/lodash/_initCloneObject.js?","./node_modules/lodash/_isFlattenable.js?","./node_modules/lodash/_isIndex.js?","./node_modules/lodash/_isIterateeCall.js?","./node_modules/lodash/_isKey.js?","./node_modules/lodash/_isKeyable.js?","./node_modules/lodash/_isMasked.js?","./node_modules/lodash/_isPrototype.js?","./node_modules/lodash/_isStrictComparable.js?","./node_modules/lodash/_listCacheClear.js?","./node_modules/lodash/_listCacheDelete.js?","./node_modules/lodash/_listCacheGet.js?","./node_modules/lodash/_listCacheHas.js?","./node_modules/lodash/_listCacheSet.js?","./node_modules/lodash/_mapCacheClear.js?","./node_modules/lodash/_mapCacheDelete.js?","./node_modules/lodash/_mapCacheGet.js?","./node_modules/lodash/_mapCacheHas.js?","./node_modules/lodash/_mapCacheSet.js?","./node_modules/lodash/_mapToArray.js?","./node_modules/lodash/_matchesStrictComparable.js?","./node_modules/lodash/_memoizeCapped.js?","./node_modules/lodash/_nativeCreate.js?","./node_modules/lodash/_nativeKeys.js?","./node_modules/lodash/_nativeKeysIn.js?","./node_modules/lodash/_nodeUtil.js?","./node_modules/lodash/_objectToString.js?","./node_modules/lodash/_overArg.js?","./node_modules/lodash/_overRest.js?","./node_modules/lodash/_root.js?","./node_modules/lodash/_safeGet.js?","./node_modules/lodash/_setCacheAdd.js?","./node_modules/lodash/_setCacheHas.js?","./node_modules/lodash/_setToArray.js?","./node_modules/lodash/_setToString.js?","./node_modules/lodash/_shortOut.js?","./node_modules/lodash/_stackClear.js?","./node_modules/lodash/_stackDelete.js?","./node_modules/lodash/_stackGet.js?","./node_modules/lodash/_stackHas.js?","./node_modules/lodash/_stackSet.js?","./node_modules/lodash/_stringToPath.js?","./node_modules/lodash/_toKey.js?","./node_modules/lodash/_toSource.js?","./node_modules/lodash/_trimmedEndIndex.js?","./node_modules/lodash/before.js?","./node_modules/lodash/clamp.js?","./node_modules/lodash/clone.js?","./node_modules/lodash/constant.js?","./node_modules/lodash/debounce.js?","./node_modules/lodash/defaultTo.js?","./node_modules/lodash/defaults.js?","./node_modules/lodash/defaultsDeep.js?","./node_modules/lodash/eq.js?","./node_modules/lodash/flatten.js?","./node_modules/lodash/get.js?","./node_modules/lodash/hasIn.js?","./node_modules/lodash/identity.js?","./node_modules/lodash/isArguments.js?","./node_modules/lodash/isArray.js?","./node_modules/lodash/isArrayLike.js?","./node_modules/lodash/isArrayLikeObject.js?","./node_modules/lodash/isBuffer.js?","./node_modules/lodash/isEmpty.js?","./node_modules/lodash/isEqual.js?","./node_modules/lodash/isError.js?","./node_modules/lodash/isFunction.js?","./node_modules/lodash/isLength.js?","./node_modules/lodash/isMap.js?","./node_modules/lodash/isObject.js?","./node_modules/lodash/isObjectLike.js?","./node_modules/lodash/isPlainObject.js?","./node_modules/lodash/isSet.js?","./node_modules/lodash/isSymbol.js?","./node_modules/lodash/isTypedArray.js?","./node_modules/lodash/keys.js?","./node_modules/lodash/keysIn.js?","./node_modules/lodash/memoize.js?","./node_modules/lodash/merge.js?","./node_modules/lodash/mergeWith.js?","./node_modules/lodash/negate.js?","./node_modules/lodash/noop.js?","./node_modules/lodash/now.js?","./node_modules/lodash/omitBy.js?","./node_modules/lodash/once.js?","./node_modules/lodash/pick.js?","./node_modules/lodash/pickBy.js?","./node_modules/lodash/property.js?","./node_modules/lodash/sortBy.js?","./node_modules/lodash/stubArray.js?","./node_modules/lodash/stubFalse.js?","./node_modules/lodash/times.js?","./node_modules/lodash/toFinite.js?","./node_modules/lodash/toInteger.js?","./node_modules/lodash/toNumber.js?","./node_modules/lodash/toPlainObject.js?","./node_modules/lodash/toString.js?","./node_modules/lodash/values.js?","./node_modules/mousetrap/mousetrap.js?","./node_modules/popper-max-size-modifier/dist/popper-max-size-modifier.esm.js?","../../src/utils/debounce.js?","../../src/utils/isBrowser.js?","../../src/utils/isFunction.js?","../../src/utils/getStyleComputedProperty.js?","../../src/utils/getParentNode.js?","../../src/utils/getScrollParent.js?","../../src/utils/isIE.js?","../../src/utils/getOffsetParent.js?","../../src/utils/getRoot.js?","../../src/utils/findCommonOffsetParent.js?","../../src/utils/isOffsetContainer.js?","../../src/utils/getScroll.js?","../../src/utils/includeScroll.js?","../../src/utils/getBordersSize.js?","../../src/utils/getWindowSizes.js?","../../src/utils/getClientRect.js?","../../src/utils/getBoundingClientRect.js?","../../src/utils/getOffsetRectRelativeToArbitraryNode.js?","../../src/utils/getViewportOffsetRectRelativeToArtbitraryNode.js?","../../src/utils/isFixed.js?","../../src/utils/getFixedPositionOffsetParent.js?","../../src/utils/getBoundaries.js?","../../src/utils/computeAutoPlacement.js?","../../src/utils/getReferenceOffsets.js?","../../src/utils/getOuterSizes.js?","../../src/utils/getOppositePlacement.js?","../../src/utils/getPopperOffsets.js?","../../src/utils/find.js?","../../src/utils/runModifiers.js?","../../src/utils/findIndex.js?","../../src/methods/update.js?","../../src/utils/isModifierEnabled.js?","../../src/utils/getSupportedPropertyName.js?","../../src/methods/destroy.js?","../../src/utils/getWindow.js?","../../src/utils/setupEventListeners.js?","../../src/methods/enableEventListeners.js?","../../src/methods/disableEventListeners.js?","../../src/utils/removeEventListeners.js?","../../src/utils/isNumeric.js?","../../src/utils/setStyles.js?","../../src/modifiers/computeStyle.js?","../../src/utils/isModifierRequired.js?","../../src/methods/placements.js?","../../src/utils/clockwise.js?","../../src/modifiers/index.js?","../../src/methods/defaults.js?","../../src/modifiers/shift.js?","../../src/modifiers/offset.js?","../../src/modifiers/preventOverflow.js?","../../src/modifiers/keepTogether.js?","../../src/modifiers/arrow.js?","../../src/modifiers/flip.js?","../../src/utils/getOppositeVariation.js?","../../src/modifiers/inner.js?","../../src/modifiers/hide.js?","../../src/utils/getRoundedOffsets.js?","../../src/modifiers/applyStyle.js?","../../src/utils/setAttributes.js?","../../src/index.js?","./node_modules/popweasel/index.ts?","./node_modules/popweasel/lib/autocomplete.ts?","./node_modules/popweasel/lib/menu.ts?","./node_modules/popweasel/lib/popup.ts?","./node_modules/popweasel/lib/select.ts?","./node_modules/popweasel/lib/tooltip.ts?","./node_modules/process/browser.js?","./node_modules/ts-interface-checker/dist/index.js?","./node_modules/ts-interface-checker/dist/types.js?","./node_modules/ts-interface-checker/dist/util.js?","./node_modules/underscore/modules/_baseCreate.js?","./node_modules/underscore/modules/_baseIteratee.js?","./node_modules/underscore/modules/_cb.js?","./node_modules/underscore/modules/_chainResult.js?","./node_modules/underscore/modules/_collectNonEnumProps.js?","./node_modules/underscore/modules/_createAssigner.js?","./node_modules/underscore/modules/_createEscaper.js?","./node_modules/underscore/modules/_createIndexFinder.js?","./node_modules/underscore/modules/_createPredicateIndexFinder.js?","./node_modules/underscore/modules/_createReduce.js?","./node_modules/underscore/modules/_createSizePropertyCheck.js?","./node_modules/underscore/modules/_deepGet.js?","./node_modules/underscore/modules/_escapeMap.js?","./node_modules/underscore/modules/_executeBound.js?","./node_modules/underscore/modules/_flatten.js?","./node_modules/underscore/modules/_getByteLength.js?","./node_modules/underscore/modules/_getLength.js?","./node_modules/underscore/modules/_group.js?","./node_modules/underscore/modules/_has.js?","./node_modules/underscore/modules/_hasObjectTag.js?","./node_modules/underscore/modules/_isArrayLike.js?","./node_modules/underscore/modules/_isBufferLike.js?","./node_modules/underscore/modules/_keyInObj.js?","./node_modules/underscore/modules/_methodFingerprint.js?","./node_modules/underscore/modules/_optimizeCb.js?","./node_modules/underscore/modules/_setup.js?","./node_modules/underscore/modules/_shallowProperty.js?","./node_modules/underscore/modules/_stringTagBug.js?","./node_modules/underscore/modules/_tagTester.js?","./node_modules/underscore/modules/_toBufferView.js?","./node_modules/underscore/modules/_toPath.js?","./node_modules/underscore/modules/_unescapeMap.js?","./node_modules/underscore/modules/after.js?","./node_modules/underscore/modules/allKeys.js?","./node_modules/underscore/modules/before.js?","./node_modules/underscore/modules/bind.js?","./node_modules/underscore/modules/bindAll.js?","./node_modules/underscore/modules/chain.js?","./node_modules/underscore/modules/chunk.js?","./node_modules/underscore/modules/clone.js?","./node_modules/underscore/modules/compact.js?","./node_modules/underscore/modules/compose.js?","./node_modules/underscore/modules/constant.js?","./node_modules/underscore/modules/contains.js?","./node_modules/underscore/modules/countBy.js?","./node_modules/underscore/modules/create.js?","./node_modules/underscore/modules/debounce.js?","./node_modules/underscore/modules/defaults.js?","./node_modules/underscore/modules/defer.js?","./node_modules/underscore/modules/delay.js?","./node_modules/underscore/modules/difference.js?","./node_modules/underscore/modules/each.js?","./node_modules/underscore/modules/escape.js?","./node_modules/underscore/modules/every.js?","./node_modules/underscore/modules/extend.js?","./node_modules/underscore/modules/extendOwn.js?","./node_modules/underscore/modules/filter.js?","./node_modules/underscore/modules/find.js?","./node_modules/underscore/modules/findIndex.js?","./node_modules/underscore/modules/findKey.js?","./node_modules/underscore/modules/findLastIndex.js?","./node_modules/underscore/modules/findWhere.js?","./node_modules/underscore/modules/first.js?","./node_modules/underscore/modules/flatten.js?","./node_modules/underscore/modules/functions.js?","./node_modules/underscore/modules/get.js?","./node_modules/underscore/modules/groupBy.js?","./node_modules/underscore/modules/has.js?","./node_modules/underscore/modules/identity.js?","./node_modules/underscore/modules/index-default.js?","./node_modules/underscore/modules/indexBy.js?","./node_modules/underscore/modules/indexOf.js?","./node_modules/underscore/modules/initial.js?","./node_modules/underscore/modules/intersection.js?","./node_modules/underscore/modules/invert.js?","./node_modules/underscore/modules/invoke.js?","./node_modules/underscore/modules/isArguments.js?","./node_modules/underscore/modules/isArray.js?","./node_modules/underscore/modules/isArrayBuffer.js?","./node_modules/underscore/modules/isBoolean.js?","./node_modules/underscore/modules/isDataView.js?","./node_modules/underscore/modules/isDate.js?","./node_modules/underscore/modules/isElement.js?","./node_modules/underscore/modules/isEmpty.js?","./node_modules/underscore/modules/isEqual.js?","./node_modules/underscore/modules/isError.js?","./node_modules/underscore/modules/isFinite.js?","./node_modules/underscore/modules/isFunction.js?","./node_modules/underscore/modules/isMap.js?","./node_modules/underscore/modules/isMatch.js?","./node_modules/underscore/modules/isNaN.js?","./node_modules/underscore/modules/isNull.js?","./node_modules/underscore/modules/isNumber.js?","./node_modules/underscore/modules/isObject.js?","./node_modules/underscore/modules/isRegExp.js?","./node_modules/underscore/modules/isSet.js?","./node_modules/underscore/modules/isString.js?","./node_modules/underscore/modules/isSymbol.js?","./node_modules/underscore/modules/isTypedArray.js?","./node_modules/underscore/modules/isUndefined.js?","./node_modules/underscore/modules/isWeakMap.js?","./node_modules/underscore/modules/isWeakSet.js?","./node_modules/underscore/modules/iteratee.js?","./node_modules/underscore/modules/keys.js?","./node_modules/underscore/modules/last.js?","./node_modules/underscore/modules/lastIndexOf.js?","./node_modules/underscore/modules/map.js?","./node_modules/underscore/modules/mapObject.js?","./node_modules/underscore/modules/matcher.js?","./node_modules/underscore/modules/max.js?","./node_modules/underscore/modules/memoize.js?","./node_modules/underscore/modules/min.js?","./node_modules/underscore/modules/mixin.js?","./node_modules/underscore/modules/negate.js?","./node_modules/underscore/modules/noop.js?","./node_modules/underscore/modules/now.js?","./node_modules/underscore/modules/object.js?","./node_modules/underscore/modules/omit.js?","./node_modules/underscore/modules/once.js?","./node_modules/underscore/modules/pairs.js?","./node_modules/underscore/modules/partial.js?","./node_modules/underscore/modules/partition.js?","./node_modules/underscore/modules/pick.js?","./node_modules/underscore/modules/pluck.js?","./node_modules/underscore/modules/property.js?","./node_modules/underscore/modules/propertyOf.js?","./node_modules/underscore/modules/random.js?","./node_modules/underscore/modules/range.js?","./node_modules/underscore/modules/reduce.js?","./node_modules/underscore/modules/reduceRight.js?","./node_modules/underscore/modules/reject.js?","./node_modules/underscore/modules/rest.js?","./node_modules/underscore/modules/restArguments.js?","./node_modules/underscore/modules/result.js?","./node_modules/underscore/modules/sample.js?","./node_modules/underscore/modules/shuffle.js?","./node_modules/underscore/modules/size.js?","./node_modules/underscore/modules/some.js?","./node_modules/underscore/modules/sortBy.js?","./node_modules/underscore/modules/sortedIndex.js?","./node_modules/underscore/modules/tap.js?","./node_modules/underscore/modules/template.js?","./node_modules/underscore/modules/templateSettings.js?","./node_modules/underscore/modules/throttle.js?","./node_modules/underscore/modules/times.js?","./node_modules/underscore/modules/toArray.js?","./node_modules/underscore/modules/toPath.js?","./node_modules/underscore/modules/underscore-array-methods.js?","./node_modules/underscore/modules/underscore.js?","./node_modules/underscore/modules/unescape.js?","./node_modules/underscore/modules/union.js?","./node_modules/underscore/modules/uniq.js?","./node_modules/underscore/modules/uniqueId.js?","./node_modules/underscore/modules/unzip.js?","./node_modules/underscore/modules/values.js?","./node_modules/underscore/modules/where.js?","./node_modules/underscore/modules/without.js?","./node_modules/underscore/modules/wrap.js?","./node_modules/underscore/modules/zip.js?","external window \"jQuery\"?","./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js?","./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js?","./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js?","./node_modules/@babel/runtime/helpers/esm/classCallCheck.js?","./node_modules/@babel/runtime/helpers/esm/createClass.js?","./node_modules/@babel/runtime/helpers/esm/defineProperty.js?","./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js?","./node_modules/@babel/runtime/helpers/esm/inherits.js?","./node_modules/@babel/runtime/helpers/esm/iterableToArray.js?","./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js?","./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js?","./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js?","./node_modules/@babel/runtime/helpers/esm/toArray.js?","./node_modules/@babel/runtime/helpers/esm/typeof.js?","./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js?","./node_modules/i18next/dist/esm/i18next.js?","webpack/bootstrap?","webpack/runtime/create fake namespace object?","webpack/runtime/load script?","webpack/runtime/amd define?","webpack/runtime/compat get default export?","webpack/runtime/define property getters?","webpack/runtime/ensure chunk?","webpack/runtime/get javascript chunk filename?","webpack/runtime/global?","webpack/runtime/hasOwnProperty shorthand?","webpack/runtime/make namespace object?","webpack/runtime/node module decorator?","webpack/runtime/runtimeId?","webpack/runtime/publicPath?","webpack/runtime/jsonp chunk loading?","./app/client/ui/errorPages.ts?","./app/client/ui/setupPage.ts?","./app/client/errorMain.ts?"],"sourcesContent":["import { UrlTweaks } from 'app/common/gristUrls';\n\nexport interface IHooks {\n  iframeAttributes?: Record<string, any>,\n  fetch?: typeof fetch,\n  baseURI?: string,\n  urlTweaks?: UrlTweaks,\n}\n\nexport const defaultHooks: IHooks = {\n};\n","import {showBehavioralPrompt} from 'app/client/components/modals';\nimport {AppModel} from 'app/client/models/AppModel';\nimport {getUserPrefObs} from 'app/client/models/UserPrefs';\nimport {GristBehavioralPrompts} from 'app/client/ui/GristTooltips';\nimport {isNarrowScreen} from 'app/client/ui2018/cssVars';\nimport {BehavioralPrompt, BehavioralPromptPrefs} from 'app/common/Prefs';\nimport {getGristConfig} from 'app/common/urlUtils';\nimport {Computed, Disposable, dom, Observable} from 'grainjs';\nimport {IPopupOptions} from 'popweasel';\n\nexport interface AttachOptions {\n  /** Defaults to false. */\n  forceShow?: boolean;\n  /** Defaults to false. */\n  hideArrow?: boolean;\n  /** Defaults to false. */\n  hideDontShowTips?: boolean;\n  /** Defaults to true. */\n  markAsSeen?: boolean;\n  /** Defaults to false. */\n  showOnMobile?: boolean;\n  popupOptions?: IPopupOptions;\n  onDispose?(): void;\n}\n\ninterface QueuedTip {\n  prompt: BehavioralPrompt;\n  refElement: Element;\n  options: AttachOptions;\n}\n\n/**\n * Manages tips that are shown the first time a user performs some action.\n *\n * Tips are shown in the order that they are attached.\n */\nexport class BehavioralPromptsManager extends Disposable {\n  private _isDisabled: boolean = false;\n\n  private readonly _prefs = getUserPrefObs(this._appModel.userPrefsObs, 'behavioralPrompts',\n    { defaultValue: { dontShowTips: false, dismissedTips: [] } }) as Observable<BehavioralPromptPrefs>;\n\n  private _dismissedTips: Computed<Set<BehavioralPrompt>> = Computed.create(this, use => {\n    const {dismissedTips} = use(this._prefs);\n    return new Set(dismissedTips.filter(BehavioralPrompt.guard));\n  });\n\n  private _queuedTips: QueuedTip[] = [];\n\n  constructor(private _appModel: AppModel) {\n    super();\n  }\n\n  public showTip(refElement: Element, prompt: BehavioralPrompt, options: AttachOptions = {}) {\n    this._queueTip(refElement, prompt, options);\n  }\n\n  public attachTip(prompt: BehavioralPrompt, options: AttachOptions = {}) {\n    return (element: Element) => {\n      this._queueTip(element, prompt, options);\n    };\n  }\n\n  public hasSeenTip(prompt: BehavioralPrompt) {\n    return this._dismissedTips.get().has(prompt);\n  }\n\n  public shouldShowTips() {\n    return !this._prefs.get().dontShowTips;\n  }\n\n  public enable() {\n    this._isDisabled = false;\n  }\n\n  public disable() {\n    this._isDisabled = true;\n  }\n\n  public reset() {\n    this._prefs.set({...this._prefs.get(), dismissedTips: [], dontShowTips: false});\n    this.enable();\n  }\n\n  private _queueTip(refElement: Element, prompt: BehavioralPrompt, options: AttachOptions) {\n    if (!this._shouldQueueTip(prompt, options)) { return; }\n\n    this._queuedTips.push({prompt, refElement, options});\n    if (this._queuedTips.length > 1) {\n      // If we're already showing a tip, wait for that one to be dismissed, which will\n      // cause the next one in the queue to be shown.\n      return;\n    }\n\n    this._showTip(refElement, prompt, options);\n  }\n\n  private _showTip(refElement: Element, prompt: BehavioralPrompt, options: AttachOptions) {\n    const close = () => {\n      if (!ctl.isDisposed()) {\n        ctl.close();\n      }\n    };\n\n    const {hideArrow, hideDontShowTips, markAsSeen = true, onDispose, popupOptions} = options;\n    const {title, content} = GristBehavioralPrompts[prompt];\n    const ctl = showBehavioralPrompt(refElement, title(), content(), {\n      onClose: (dontShowTips) => {\n        if (dontShowTips) { this._dontShowTips(); }\n        if (markAsSeen) { this._markAsSeen(prompt); }\n      },\n      hideArrow,\n      popupOptions,\n      hideDontShowTips,\n    });\n\n    ctl.onDispose(() => {\n      onDispose?.();\n      this._showNextQueuedTip();\n    });\n    dom.onElem(refElement, 'click', () => close());\n    dom.onDisposeElem(refElement, () => close());\n  }\n\n  private _showNextQueuedTip() {\n    this._queuedTips.shift();\n    if (this._queuedTips.length !== 0) {\n      const [nextTip] = this._queuedTips;\n      const {refElement, prompt, options} = nextTip;\n      this._showTip(refElement, prompt, options);\n    }\n  }\n\n  private _markAsSeen(prompt: BehavioralPrompt) {\n    const {dismissedTips} = this._prefs.get();\n    const newDismissedTips = new Set(dismissedTips);\n    newDismissedTips.add(prompt);\n    this._prefs.set({...this._prefs.get(), dismissedTips: [...newDismissedTips]});\n  }\n\n  private _dontShowTips() {\n    this._prefs.set({...this._prefs.get(), dontShowTips: true});\n    this._queuedTips = [];\n  }\n\n  private _shouldQueueTip(prompt: BehavioralPrompt, options: AttachOptions) {\n    if (\n      this._isDisabled ||\n      (isNarrowScreen() && !options.showOnMobile) ||\n      (this._prefs.get().dontShowTips && !options.forceShow) ||\n      this.hasSeenTip(prompt)\n    ) {\n      return false;\n    }\n\n    const {deploymentType} = getGristConfig();\n    const {deploymentTypes} = GristBehavioralPrompts[prompt];\n    if (\n      deploymentTypes !== '*' &&\n      (!deploymentType || !deploymentTypes.includes(deploymentType))\n    ) {\n      return false;\n    }\n\n    return true;\n  }\n}\n","/**\n * Module to help deal with unsaved changes when closing a page.\n */\nimport {Disposable} from 'grainjs';\n\n/**\n * Create an UnsavedChanges object to indicate there are UnsavedChanges. Dispose it when this is\n * no longer the case. The optional callback will be called to confirm there are indeed unsaved\n * changes. If omitted, it is assumed that there are.\n */\nexport class UnsavedChange extends Disposable {\n  constructor(\n    // If given, saveChanges() will call it to save changes.\n    private _saveCB?: () => Promise<void>,\n    // If given, it may return false to indicate that actually nothing has changed.\n    private _haveChanges?: () => boolean,\n  ) {\n    super();\n    unsavedChanges.add(this);\n    this.onDispose(() => unsavedChanges.delete(this));\n  }\n  public haveUnsavedChanges() { return !this._haveChanges || this._haveChanges(); }\n  public async save(): Promise<void> { return this._saveCB && this._saveCB(); }\n}\n\nexport class UnsavedChangeSet {\n  private _changes = new Set<UnsavedChange>();\n\n  /**\n   * Check if there are any unsaved changes out there.\n   */\n  public haveUnsavedChanges(): boolean {\n    return Array.from(this._changes).some((c) => c.haveUnsavedChanges());\n  }\n\n  /**\n   * Save any unsaved changes out there.\n   */\n  public async saveChanges(): Promise<void> {\n    await Promise.all(Array.from(this._changes).map((c) => c.save()));\n  }\n\n  public add(unsaved: UnsavedChange) { this._changes.add(unsaved); }\n  public delete(unsaved: UnsavedChange) { this._changes.delete(unsaved); }\n}\n\n// Global set of UnsavedChanges, checked on page unload.\nexport const unsavedChanges = new UnsavedChangeSet();\n","export type CommandName =\n  | 'shortcuts'\n  | 'help'\n  | 'undo'\n  | 'redo'\n  | 'accept'\n  | 'cancel'\n  | 'find'\n  | 'findNext'\n  | 'findPrev'\n  | 'historyBack'\n  | 'historyForward'\n  | 'reloadPlugins'\n  | 'closeActiveMenu'\n  | 'docTabOpen'\n  | 'viewTabOpen'\n  | 'viewTabFocus'\n  | 'fieldTabOpen'\n  | 'sortFilterTabOpen'\n  | 'sortFilterMenuOpen'\n  | 'dataSelectionTabOpen'\n  | 'printSection'\n  | 'showRawData'\n  | 'openWidgetConfiguration'\n  | 'maximizeActiveSection'\n  | 'leftPanelOpen'\n  | 'rightPanelOpen'\n  | 'videoTourToolsOpen'\n  | 'cursorDown'\n  | 'cursorUp'\n  | 'cursorRight'\n  | 'cursorLeft'\n  | 'nextField'\n  | 'prevField'\n  | 'pageDown'\n  | 'pageUp'\n  | 'moveToFirstRecord'\n  | 'moveToLastRecord'\n  | 'moveToFirstField'\n  | 'moveToLastField'\n  | 'skipDown'\n  | 'skipUp'\n  | 'setCursor'\n  | 'openDocumentList'\n  | 'nextPage'\n  | 'prevPage'\n  | 'nextSection'\n  | 'prevSection'\n  | 'shiftDown'\n  | 'shiftUp'\n  | 'shiftRight'\n  | 'shiftLeft'\n  | 'ctrlShiftDown'\n  | 'ctrlShiftUp'\n  | 'ctrlShiftRight'\n  | 'ctrlShiftLeft'\n  | 'selectAll'\n  | 'copyLink'\n  | 'editField'\n  | 'fieldEditSave'\n  | 'fieldEditSaveHere'\n  | 'fieldEditCancel'\n  | 'copy'\n  | 'cut'\n  | 'paste'\n  | 'contextMenuCopy'\n  | 'contextMenuCut'\n  | 'contextMenuPaste'\n  | 'fillSelectionDown'\n  | 'clearValues'\n  | 'input'\n  | 'editLabel'\n  | 'editLayout'\n  | 'toggleCheckbox'\n  | 'historyPrevious'\n  | 'historyNext'\n  | 'makeFormula'\n  | 'unmakeFormula'\n  | 'insertCurrentDate'\n  | 'insertCurrentDateTime'\n  | 'datepickerFocus'\n  | 'openDiscussion'\n  | 'insertRecordBefore'\n  | 'insertRecordAfter'\n  | 'deleteRecords'\n  | 'insertFieldBefore'\n  | 'insertFieldAfter'\n  | 'renameField'\n  | 'hideFields'\n  | 'hideCardFields'\n  | 'toggleFreeze'\n  | 'deleteFields'\n  | 'clearColumns'\n  | 'clearCardFields'\n  | 'convertFormulasToData'\n  | 'addSection'\n  | 'deleteSection'\n  | 'collapseSection'\n  | 'expandSection'\n  | 'deleteCollapsedSection'\n  | 'duplicateRows'\n  | 'sortAsc'\n  | 'sortDesc'\n  | 'addSortAsc'\n  | 'addSortDesc'\n  | 'filterByThisCellValue'\n  | 'enterLinkMode'\n  | 'exitLinkMode'\n  | 'saveLinks'\n  | 'revertLinks'\n  | 'clearLinks'\n  | 'clearSectionLinks'\n  | 'transformUpdate'\n  | 'clearCopySelection'\n  | 'detachEditor'\n  | 'activateAssistant'\n  ;\n\n\nexport interface CommandDef {\n  name: CommandName;\n  keys: string[];\n  desc: string | null;\n  bindKeys?: boolean;\n  deprecated?: boolean;\n}\n\nexport interface CommendGroupDef {\n  group: string;\n  commands: CommandDef[];\n}\n\n// The top-level groups, and the ordering within them are for user-facing documentation.\nexport const groups: CommendGroupDef[] = [{\n  group: 'General',\n  commands: [\n    {\n      name: 'shortcuts',\n      keys: ['F1', 'Mod+/'],\n      desc: 'Display shortcuts pane'\n    }, {\n      name: 'help',\n      keys: [],\n      desc: 'Display Grist documentation'\n    }, {\n      name: 'undo',\n      keys: ['Mod+z'],\n      desc: 'Undo last action'\n    }, {\n      name: 'redo',\n      keys: ['Mod+Shift+Z', 'Ctrl+y' ],\n      desc: 'Redo last action'\n    }, {\n      name: 'accept',\n      keys: ['Enter'],\n      desc: null, // Accept the action of the dialog box\n    }, {\n      name: 'cancel',\n      keys: ['Escape'],\n      desc: null, // Cancel the action of the dialog box\n    }, {\n      name: 'find',\n      keys: ['Mod+f'],\n      desc: 'Find',\n    }, {\n      name: 'findNext',\n      keys: ['Mod+g'],\n      desc: 'Find next occurrence',\n    }, {\n      name: 'findPrev',\n      keys: ['Mod+Shift+G'],\n      desc: 'Find previous occurrence',\n    }, {\n      // Without this, when focus in on Clipboard, this shortcut would only move the cursor.\n      name: 'historyBack',\n      keys: ['Mod+Left'],\n      desc: null, // Move back in history, same as clicking the Back button\n    }, {\n      // Without this, when focus in on Clipboard, this shortcut would only move the cursor.\n      name: 'historyForward',\n      keys: ['Mod+Right'],\n      desc: null, // Move forward in history, same as clicking the Forward button\n    }, {\n      name: 'reloadPlugins',\n      keys: ['Mod+Alt+P'],\n      desc: null, // reload plugins\n    }\n\n  ],\n}, {\n  group: 'Menu shortcuts',\n  commands: [\n    {\n      name: 'closeActiveMenu',\n      keys: ['Esc'],\n      desc: null, // Shortcut to close active menu\n    },\n    {\n      name: 'docTabOpen',\n      keys: [],\n      desc: 'Shortcut to open document tab'\n    },\n    {\n      name: 'viewTabOpen',\n      keys: [],\n      desc: 'Shortcut to open view tab'\n    },\n    {\n      name: 'viewTabFocus',\n      keys: [],\n      desc: 'Shortcut to focus view tab if creator panel is open'\n    },\n    {\n      name: 'fieldTabOpen',\n      keys: [],\n      desc: 'Shortcut to open field tab'\n    },\n    {\n      name: 'sortFilterTabOpen',\n      keys: [],\n      desc: 'Shortcut to sort & filter tab'\n    },\n    {\n      name: 'sortFilterMenuOpen',\n      keys: [],\n      desc: 'Shortcut to open sort & filter menu'\n    },\n    {\n      name: 'dataSelectionTabOpen',\n      keys: [],\n      desc: 'Shortcut to data selection tab'\n    },\n    {\n      name: 'printSection',\n      keys: [],\n      desc: 'Print currently selected page widget',\n    },\n    {\n      name: 'showRawData',\n      keys: [],\n      desc: 'Show raw data widget for table of currently selected page widget',\n    },\n    {\n      name: 'openWidgetConfiguration',\n      keys: [],\n      desc: 'Open Custom widget configuration screen',\n    },\n    {\n      name: 'maximizeActiveSection',\n      keys: [],\n      desc: 'Maximize the active section',\n    },\n    {\n      name: 'leftPanelOpen',\n      keys: [],\n      desc: 'Shortcut to open the left panel',\n    },\n    {\n      name: 'rightPanelOpen',\n      keys: [],\n      desc: 'Shortcut to open the right panel',\n    },\n    {\n      name: 'videoTourToolsOpen',\n      keys: [],\n      desc: 'Shortcut to open video tour from home left panel',\n    },\n    {\n      name: 'activateAssistant',\n      keys: [],\n      desc: 'Activate assistant',\n    },\n  ]\n}, {\n  group: 'Navigation',\n  commands: [\n    {\n      name: 'cursorDown',\n      keys: ['Down'],\n      desc: 'Move downward to next record or field'\n    }, {\n      name: 'cursorUp',\n      keys: ['Up'],\n      desc: 'Move upward to previous record or field'\n    }, {\n      name: 'cursorRight',\n      keys: ['Right'],\n      desc: 'Move right to the next field'\n    }, {\n      name: 'cursorLeft',\n      keys: ['Left'],\n      desc: 'Move left to the previous field'\n    }, {\n      name: 'nextField',\n      keys: ['Tab'],\n      desc: 'Move to the next field, saving changes if editing a value'\n    }, {\n      name: 'prevField',\n      keys: ['Shift+Tab'],\n      desc: 'Move to the previous field, saving changes if editing a value'\n    }, {\n      name: 'pageDown',\n      keys: ['PageDown'],\n      desc: 'Move down one page of records, or to next record in a card list'\n    }, {\n      name: 'pageUp',\n      keys: ['PageUp'],\n      desc: 'Move up one page of records, or to previous record in a card list'\n    }, {\n      name: 'moveToFirstRecord',\n      keys: ['Mod+Up'],\n      desc: 'Move up to the first record',\n    }, {\n      name: 'moveToLastRecord',\n      keys: ['Mod+Down'],\n      desc: 'Move down to the last record',\n    }, {\n      name: 'moveToFirstField',\n      keys: ['Home'],\n      desc: 'Move to the first field or the beginning of a row'\n    }, {\n      name: 'moveToLastField',\n      keys: ['End'],\n      desc: 'Move to the last field or the end of a row'\n    }, {\n      // no longer used\n      name: 'skipDown',\n      keys: [],\n      desc: 'Move downward five records'\n    }, {\n      // no longer used\n      name: 'skipUp',\n      keys: [],\n      desc: 'Move upward five records'\n    }, {\n      name: 'setCursor',\n      keys: [],\n      desc: 'Moves the cursor to the correct location'\n    }, {\n      name: 'openDocumentList',\n      keys: [],\n      desc: 'Opens document list'\n    }, {\n      name: 'nextPage',\n      keys: ['Alt+Down'],\n      desc: 'Open next page'\n    }, {\n      name: 'prevPage',\n      keys: ['Alt+Up'],\n      desc: 'Open previous page'\n    }, {\n      name: 'nextSection',\n      keys: ['Mod+o'],\n      desc: 'Activate next page widget',\n    }, {\n      name: 'prevSection',\n      keys: ['Mod+Shift+O'],\n      desc: 'Activate previous page widget',\n    }\n  ],\n}, {\n  group: 'Selection',\n  commands: [\n    {\n     name: 'shiftDown',\n     keys: ['Shift+Down'],\n     desc: 'Adds the element below the cursor to the selected range'\n    }, {\n     name: 'shiftUp',\n     keys: ['Shift+Up'],\n     desc: 'Adds the element above the cursor to the selected range'\n    }, {\n     name: 'shiftRight',\n     keys: ['Shift+Right'],\n     desc: 'Adds the element to the right of the cursor to the selected range'\n    }, {\n     name: 'shiftLeft',\n     keys: ['Shift+Left'],\n     desc: 'Adds the element to the left of the cursor to the selected range'\n    }, {\n      name: 'ctrlShiftDown',\n      keys: ['Mod+Shift+Down'],\n      desc: 'Adds all elements below the cursor to the selected range'\n    }, {\n      name: 'ctrlShiftUp',\n      keys: ['Mod+Shift+Up'],\n      desc: 'Adds all elements above the cursor to the selected range'\n    }, {\n      name: 'ctrlShiftRight',\n      keys: ['Mod+Shift+Right'],\n      desc: 'Adds all elements to the right of the cursor to the selected range'\n    }, {\n      name: 'ctrlShiftLeft',\n      keys: ['Mod+Shift+Left'],\n      desc: 'Adds all elements to the left of the cursor to the selected range'\n    }, {\n      name: 'selectAll',\n      keys: ['Mod+A'],\n      desc: 'Selects all currently displayed cells'\n    }, {\n      name: 'copyLink',\n      keys: ['Mod+Shift+A'],\n      desc: 'Copy anchor link'\n    }, {\n      name: 'clearCopySelection',\n      keys: [],\n      desc: 'Clears the current copy selection, if any'\n    }\n  ],\n}, {\n  group: 'Editing',\n  commands: [\n    {\n      name: 'editField',\n      keys: ['Enter', 'F2'],\n      desc: 'Start editing the currently-selected cell'\n    }, {\n      name: 'fieldEditSave',\n      keys: ['Enter'],\n      desc: 'Finish editing a cell, saving the value'\n    }, {\n      name: 'detachEditor',\n      keys: [''],\n      desc: 'Detach active editor'\n    }, {\n      name: 'fieldEditSaveHere',\n      keys: [],\n      desc: 'Finish editing a cell and save without moving to next record',\n    }, {\n      name: 'fieldEditCancel',\n      keys: ['Escape'],\n      desc: 'Discard changes to a cell value'\n    }, {\n      name: 'copy',\n      keys: [],\n      desc: 'Copy current selection to clipboard'\n    }, {\n      name: 'cut',\n      keys: [],\n      desc: 'Cut current selection to clipboard'\n    }, {\n      name: 'paste',\n      keys: [],\n      desc: 'Paste clipboard contents at cursor',\n    }, {\n      name: 'contextMenuCopy',\n      keys: ['Mod+C'],\n      desc: 'Copy current selection to clipboard',\n      bindKeys: false,\n    }, {\n      name: 'contextMenuCut',\n      keys: ['Mod+X'],\n      desc: 'Cut current selection to clipboard',\n      bindKeys: false,\n    }, {\n      name: 'contextMenuPaste',\n      keys: ['Mod+V'],\n      desc: 'Paste clipboard contents at cursor',\n      bindKeys: false,\n    }, {\n      name: 'fillSelectionDown',\n      keys: ['Mod+D'],\n      desc: 'Fills current selection with the contents of the top row in the selection'\n    }, {\n      name: 'clearValues',\n      keys: ['Backspace', 'Del'],\n      desc: 'Clears the currently selected cells'\n    }, {\n      name: 'input',\n      keys: [],\n      desc: 'Enter text into currently-selected cell and start editing'\n    }, {\n      name: 'editLabel',\n      keys: [],\n      desc: 'Edit label of the currently-selected field'\n    }, {\n      name: 'editLayout',\n      keys: [],\n      desc: 'Edit record layout'\n    }, {\n      name: 'toggleCheckbox',\n      keys: ['Enter', 'Space'],\n      desc: 'Toggles the value of checkbox cells'\n    }, {\n      name: 'historyPrevious',\n      keys: ['Up'],\n      desc: null, // Fetches the previous command from the history list, moving back in the list\n    }, {\n      name: 'historyNext',\n      keys: ['Down'],\n      desc: null, // Fetches the next command from the history list, moving forward in the list\n    }, {\n      name: 'makeFormula',\n      keys: [\"=\"],\n      desc: 'When typed at the start of a cell, make this a formula column',\n    }, {\n      name: 'unmakeFormula',\n      keys: ['Backspace'],\n      desc: null, // Undoes turning of column into a formula column, when pressed at start of a cell\n    }, {\n      name: 'insertCurrentDate',\n      keys: ['Mod+;'],\n      desc: 'Insert the current date',\n    }, {\n      name: 'insertCurrentDateTime',\n      keys: ['Mod+Shift+;'],\n      desc: 'Insert the current date and time',\n    }, {\n      name: 'datepickerFocus',\n      keys: ['Up', 'Down'],\n      desc: null, // While editing a date cell, switch keyboard focus to the datepicker\n    }, {\n      name: 'openDiscussion',\n      keys: ['Mod+Alt+M'],\n      desc: 'Comment',\n    }\n  ],\n}, {\n  group: 'Data manipulation',\n  commands: [\n    {\n      name: 'insertRecordBefore',\n      keys: ['Mod+Shift+Enter'],\n      desc: 'Insert a new record, before the currently selected one in an unsorted table'\n    }, {\n      name: 'insertRecordAfter',\n      keys: ['Mod+Enter'],\n      desc: 'Insert a new record, after the currently selected one in an unsorted table',\n    }, {\n      name: 'deleteRecords',\n      keys: ['Mod+Del', 'Mod+Backspace'],\n      desc: 'Delete the currently selected record'\n    }, {\n      name: 'insertFieldBefore',\n      keys: ['Alt+Shift+='],\n      desc: 'Insert a new column, before the currently selected one'\n    }, {\n      name: 'insertFieldAfter',\n      keys: ['Alt+='],\n      desc: 'Insert a new column, after the currently selected one'\n    }, {\n      name: 'renameField',\n      keys: ['Ctrl+m'],\n      desc: 'Rename the currently selected column'\n    }, {\n      name: 'hideFields',\n      keys: ['Alt+Shift+-'],\n      desc: 'Hide currently selected columns'\n    }, {\n      name: 'hideCardFields',\n      keys: [],\n      desc: 'Hide currently selected fields'\n    }, {\n      name: 'toggleFreeze',\n      keys: [],\n      desc: 'Freeze or unfreeze selected columns'\n    }, {\n      name: 'deleteFields',\n      keys: ['Alt+-'],\n      desc: 'Delete the currently selected columns'\n    }, {\n      name: 'clearColumns',\n      keys: [],\n      desc: 'Clear the selected columns'\n    }, {\n      name: 'clearCardFields',\n      keys: [],\n      desc: 'Clear the selected fields'\n    }, {\n      name: 'convertFormulasToData',\n      keys: [],\n      desc: 'Convert the selected columns from formula to data'\n    }, {\n      name: 'addSection',\n      keys: [],\n      desc: 'Add a new viewsection to the currently active view'\n    }, {\n      name: 'deleteSection',\n      keys: [],\n      desc: 'Delete the currently active viewsection'\n    }, {\n      name: 'collapseSection',\n      keys: [],\n      desc: 'Collapse the currently active viewsection'\n    }, {\n      name: 'expandSection',\n      keys: [],\n      desc: 'Expand collapsed viewsection'\n    }, {\n      name: 'deleteCollapsedSection',\n      keys: [],\n      desc: 'Delete collapsed viewsection'\n    }, {\n      name: 'duplicateRows',\n      keys: ['Mod+Shift+d'],\n      desc: 'Duplicate selected rows'\n    },\n  ],\n}, {\n  group: 'Sorting',\n  commands: [\n    {\n      name: 'sortAsc',\n      keys: [],\n      desc: 'Sort the view data by the currently selected field in ascending order'\n    }, {\n      name: 'sortDesc',\n      keys: [],\n      desc: 'Sort the view data by the currently selected field in descending order'\n    }, {\n      name: 'addSortAsc',\n      keys: [],\n      desc: 'Adds the currently selected column(ascending) to the current view\\'s sort spec'\n    }, {\n      name: 'addSortDesc',\n      keys: [],\n      desc: 'Adds the currently selected column(descending) to the current view\\'s sort spec'\n    },\n\n  ],\n}, {\n  group: 'Filtering',\n  commands: [\n    {\n      name: 'filterByThisCellValue',\n      keys: [],\n      desc: `Filter this column by just this cell's value`,\n    },\n  ]\n}, {\n  group: 'Linking',\n  commands: [\n    {\n      name: 'enterLinkMode',\n      keys: [],\n      desc: 'Enters section linking mode in the current view'\n    }, {\n      name: 'exitLinkMode',\n      keys: [],\n      desc: 'Exits section linking mode in the current view'\n    }, {\n      name: 'saveLinks',\n      keys: [],\n      desc: 'Saves the sections links in the current view'\n    }, {\n      name: 'revertLinks',\n      keys: [],\n      desc: 'Reverts the sections links to the saved links the current view'\n    }, {\n      name: 'clearLinks',\n      keys: [],\n      desc: 'Clears the section links in the current view'\n    }, {\n      name: 'clearSectionLinks',\n      keys: [],\n      desc: 'Clears the section links in the current viewsection'\n    }\n  ],\n}, {\n  group: 'Transforming',\n  commands: [\n    {\n      // TODO: Use AceEditor internal save command instead of custom transform save command\n      name: 'transformUpdate',\n      keys: ['Shift+Enter'],\n      desc: null // Updates the transform formula\n    }\n  ],\n}];\n","/**\n * Commands are invoked by the user via keyboard shortcuts or mouse clicks, for example, to move\n * the cursor or to delete the selected records.\n *\n * This module provides APIs for other components to implement groups of commands. Any given\n * command may be implemented by different components, but at most one implementation of any\n * command is active at any time.\n */\n\nimport * as Mousetrap from 'app/client/lib/Mousetrap';\nimport {arrayRemove, unwrap} from 'app/common/gutil';\nimport dom from 'app/client/lib/dom';\nimport {get as getBrowserGlobals} from 'app/client/lib/browserGlobals';\nimport {CommandDef, CommandName, CommendGroupDef, groups} from 'app/client/components/commandList';\n\nimport {Disposable, Observable} from 'grainjs';\nimport * as _ from 'underscore';\nimport * as ko from 'knockout';\n\nconst G = getBrowserGlobals('window');\ntype BoolLike = boolean|ko.Observable<boolean>|ko.Computed<boolean>|Observable<boolean>;\n\n/**\n * A helper method that can create a subscription to ko or grains observables.\n */\nfunction subscribe(value: Exclude<BoolLike, boolean>, fn: (value: boolean) => void) {\n  if (ko.isObservable(value)) {\n    return value.subscribe(fn);\n  } else if (value instanceof Observable) {\n    return value.addListener(fn);\n  } else {\n    throw new Error('Expected an observable');\n  }\n}\n\n// Same logic as used by mousetrap to map 'Mod' key to platform-specific key.\nexport const isMac = (typeof navigator !== 'undefined' && navigator &&\n               /Mac|iPod|iPhone|iPad/.test(navigator.platform));\n\n/**\n * Globally-exposed map of command names to Command objects. E.g. typing \"cmd.cursorDown.run()\" in\n * the browser console should move the cursor down as long as it makes sense in the currently\n * shown view. If the command is inactive, its run() function is a no-op.\n *\n * See also Command object below.\n */\nexport const allCommands: { [key in CommandName]: Command } = {} as any;\n\n/**\n * This is an internal variable, mapping key combinations to the stack of CommandGroups which\n * include them (see also CommandGroup.knownKeys). It's used for deciding which CommandGroup to\n * use when different Commands use the same key.\n */\nconst _allKeys: Record<string, CommandGroup[]> = {};\n\n/**\n * Populate allCommands from those provided, or listed in commandList.js. Also populates the\n * globally exposed `cmd` object whose properties invoke commands: e.g. typing `cmd.cursorDown` in\n * the browser console will run allCommands.cursorDown.run().\n */\nexport function init(optCommandGroups?: CommendGroupDef[]) {\n  const commandGroups = optCommandGroups || groups;\n\n  // Clear out the objects holding the global state.\n  Object.keys(allCommands).forEach(function(c) {\n    delete allCommands[c as CommandName];\n  });\n  Object.keys(_allKeys).forEach(function(k) {\n    delete _allKeys[k as CommandName];\n  });\n\n  commandGroups.forEach(function(commandGroup) {\n    commandGroup.commands.forEach(function(c) {\n      if (allCommands[c.name]) {\n        console.error(\"Ignoring duplicate command %s in commandList\", c.name);\n      } else {\n        allCommands[c.name] = new Command(c.name, c.desc, c.keys, {\n          bindKeys: c.bindKeys,\n          deprecated: c.deprecated,\n        });\n      }\n    });\n  });\n\n  // Define the browser console interface.\n  G.window.cmd = {};\n  _.each(allCommands, function(cmd, name) {\n    Object.defineProperty(G.window.cmd, name, {get: cmd.run});\n  });\n}\n\n//----------------------------------------------------------------------\n\nconst KEY_MAP_MAC = {\n  Mod: '⌘',\n  Alt: '⌥',\n  Shift: '⇧',\n  Ctrl: '⌃',\n  Left: '←',\n  Right: '→',\n  Up: '↑',\n  Down: '↓',\n};\n\nconst KEY_MAP_WIN = {\n  Mod: 'Ctrl',\n  Left: '←',\n  Right: '→',\n  Up: '↑',\n  Down: '↓',\n};\n\nexport function getHumanKey(key: string, mac: boolean): string {\n  const keyMap = mac ? KEY_MAP_MAC : KEY_MAP_WIN;\n  let keys = key.split('+').map(s => s.trim());\n  keys = keys.map(k => {\n    if (k in keyMap) { return (keyMap as any)[k]; }\n    if (k.length === 1) { return k.toUpperCase(); }\n    return k;\n  });\n  return keys.join( mac ? '' : ' + ');\n}\n\nexport interface CommandOptions {\n  bindKeys?: boolean;\n  deprecated?: boolean;\n}\n\n/**\n * Command represents a single command. It is exposed via the `allCommands` map.\n * @property {String} name: The name of the command, same as the key into the `allCommands` map.\n * @property {String} desc: The description of the command.\n * @property {Array}  keys: The array of keyboard shortcuts for the command.\n * @property {Function} run: A bound function that will run the currently active implementation.\n * @property {Observable} isActive: Knockout observable for whether this command is active.\n */\nexport class Command implements CommandDef {\n  public name: CommandName;\n  public desc: string|null;\n  public humanKeys: string[];\n  public keys: string[];\n  public bindKeys: boolean;\n  public isActive: ko.Observable<boolean>;\n  public deprecated: boolean;\n  public run: (...args: any[]) => any;\n  private _implGroupStack: CommandGroup[] = [];\n  private _activeFunc: (...args: any[]) => any = _.noop;\n\n  constructor(name: CommandName, desc: string|null, keys: string[], options: CommandOptions = {}) {\n    this.name = name;\n    this.desc = desc;\n    this.humanKeys = keys.map(key => getHumanKey(key, isMac));\n    this.keys = keys.map(function(k) { return k.trim().toLowerCase().replace(/ *\\+ */g, '+'); });\n    this.bindKeys = options.bindKeys ?? true;\n    this.isActive = ko.observable(false);\n    this._implGroupStack = [];\n    this._activeFunc = _.noop; // The function to run when this command is invoked.\n    this.deprecated = options.deprecated || false;\n    // Let .run bind the Command object, so that it can be used as a stand-alone callback.\n    this.run = this._run.bind(this);\n  }\n  /**\n   * Returns a comma-separated string of all keyboard shortcuts, or `null` if no\n   * shortcuts exist.\n   */\n  public getKeysDesc() {\n    if (this.humanKeys.length === 0) { return null; }\n\n    return `(${this.humanKeys.join(', ')})`;\n  }\n  /**\n   * Returns the text description for the command, including the keyboard shortcuts.\n   */\n  public getDesc() {\n    const parts = [this.desc];\n\n    const keysDesc = this.getKeysDesc();\n    if (keysDesc) { parts.push(keysDesc); }\n\n    return parts.join(' ');\n  }\n  /**\n   * Returns DOM for the keyboard shortcuts, wrapped in cute boxes that look like keyboard keys.\n   */\n  public getKeysDom(separator?: ko.Observable<string>) {\n    return dom('span.shortcut_keys',\n      separator ? this.humanKeys.map((key, i) => [i ? separator() : null, dom('span.shortcut_key_image', key)])\n        : this.humanKeys.map(key => dom('span.shortcut_key_image', key))\n    );\n  }\n  /**\n   * Adds a CommandGroup that implements this Command to the top of the stack of groups.\n   */\n  public addGroup(cmdGroup: CommandGroup) {\n    this._implGroupStack.push(cmdGroup);\n    this._updateActive();\n  }\n  /**\n   * Removes a CommandGroup from the stack of groups implementing this Command.\n   */\n  public removeGroup(cmdGroup: CommandGroup) {\n    arrayRemove(this._implGroupStack, cmdGroup);\n    this._updateActive();\n  }\n  /**\n   * Updates the command's state to reflect the currently active group, if any.\n   */\n  private _updateActive() {\n    if (this._implGroupStack.length > 0) {\n      this.isActive(true);\n      this._activeFunc = _.last(this._implGroupStack)!.commands[this.name];\n    } else {\n      this.isActive(false);\n      this._activeFunc = _.noop;\n    }\n\n    if (this.bindKeys) {\n      // Now bind or unbind the affected key combinations.\n      this.keys.forEach(function(key) {\n        const keyGroups = _allKeys[key];\n        if (keyGroups && keyGroups.length > 0) {\n          const commandGroup = _.last(keyGroups)!;\n          // Command name might be different from this.name in case we are deactivating a command, and\n          // the previous meaning of the key points to a different command.\n          const commandName = commandGroup.knownKeys[key];\n          Mousetrap.bind(key, wrapKeyCallback(commandGroup.commands[commandName]));\n        } else {\n          Mousetrap.unbind(key);\n        }\n      });\n    }\n  }\n\n  private _run(...args: any[]) {\n    return this._activeFunc(...args);\n  }\n}\n\n/**\n * Helper for mousetrap callbacks, which returns a version of the callback that by default stops\n * the propagation of the keyboard event (unless the callback returns a true value).\n */\nfunction wrapKeyCallback(callback: Func) {\n  return function() {\n    return callback(...arguments) || false;\n  };\n}\n\n//----------------------------------------------------------------------\n\ntype Func = (...args: any[]) => any;\ntype CommandMap = { [key in CommandName]?: Func };\n\n/**\n * CommandGroup is the way for other components to provide implementations for a group of\n * commands. Note that CommandGroups are stacked, with groups activated later having priority over\n * groups activated earlier.\n * @param {String->Function} commands: The map of command names to implementations.\n * @param {Object} context: \"this\" context with which to invoke implementation functions.\n * @param {Boolean|Observable<boolean>} activate: Whether to activate this group immediately, false if\n *      omitted. This may be an Observable.\n */\nexport class CommandGroup extends Disposable {\n  public commands: Record<string, Func>;\n  public isActive: boolean;\n  public knownKeys: Record<string, string>;\n  /**\n   * Attach this CommandGroup to a DOM element, to allow it to accept key events, limiting them to\n   * this group only. This is useful for inputs and textareas, where only a limited set of keyboard\n   * shortcuts should be applicable and where by default mousetrap ignores shortcuts completely.\n   *\n   * See also stopCallback in app/client/lib/Mousetrap.js.\n   */\n  public attach = dom.inlinable(function(this: any, elem: any) {\n    Mousetrap.setCustomStopCallback(elem, (combo: any) => !this.knownKeys.hasOwnProperty(combo));\n  });\n\n  constructor(commands: CommandMap, context: any, activate?: BoolLike) {\n    super();\n    // Keep only valid commands, so that we don't have to check for validity elsewhere, and bind\n    // each to the passed-in context object.\n    this.commands = {};\n    this.isActive = false;\n\n    for (const name in commands) {\n      if (allCommands[name as CommandName]) {\n        this.commands[name] = commands[name as CommandName]!.bind(context);\n      } else {\n        console.warn(\"Ignoring unknown command %s\", name);\n      }\n    }\n\n    // Map recognized key combinations to the corresponding command names.\n    this.knownKeys = {};\n    for (const name in this.commands) {\n      const keys = allCommands[name as CommandName]!.keys;\n      for (let i = 0; i < keys.length; i++) {\n        this.knownKeys[keys[i]] = name;\n      }\n    }\n\n    // On disposal, remove the CommandGroup from all the commands and keys.\n    this.onDispose(this._removeGroup.bind(this));\n\n    // Finally, set the activation status of the command group, subscribing if an observable.\n    if (typeof activate === 'boolean' || activate === undefined) {\n      this.activate(activate ?? false);\n    } else if (activate) {\n      this.autoDispose(subscribe(activate, (val) => this.activate(val)));\n      this.activate(unwrap(activate));\n    }\n  }\n\n  /**\n   * Activate or deactivate this implementation group.\n   */\n  public activate(yesNo: boolean) {\n    if (yesNo) {\n      this._addGroup();\n    } else {\n      this._removeGroup();\n    }\n  }\n\n  private _addGroup() {\n    if (!this.isActive) {\n      this.isActive = true;\n      // Add this CommandGroup to each key combination that it recognizes.\n      for (const key in this.knownKeys) {\n        (_allKeys[key] || (_allKeys[key] = [])).push(this);\n      }\n      // Add this CommandGroup to each command that it implements.\n      for (const name in this.commands) {\n        allCommands[name as CommandName]!.addGroup(this);\n      }\n    }\n  }\n  private _removeGroup() {\n    if (this.isActive) {\n      // On disposal, remove the CommandGroup from all the commands and keys.\n      for (const key in this.knownKeys) {\n        arrayRemove(_allKeys[key], this);\n      }\n      for (const name in this.commands) {\n        allCommands[name as CommandName]!.removeGroup(this);\n      }\n      this.isActive = false;\n    }\n  }\n}\n\n\ntype BoundedFunc<T> = (this: T, ...args: any[]) => any;\ntype BoundedMap<T> = { [key in CommandName]?: BoundedFunc<T> };\n\n/**\n * Just a shorthand for CommandGroup.create constructor.\n */\nexport function createGroup<T>(commands: BoundedMap<T>|null, context: T, activate?: BoolLike) {\n  return CommandGroup.create(null, commands ?? {}, context, activate);\n}\n\n//----------------------------------------------------------------------\n\n/**\n * Tie the button to an command listed in commandList.js, triggering the callback from the\n * currently active CommandLayer (if any), and showing a description and keyboard shortcuts in its\n * tooltip.\n *\n * You may use this inline while building dom, as in\n *      dom('button', commands.setButtonCommand(dom, 'command'))\n */\nexport const setButtonCommand = dom.inlinable(function(elem: Element, commandName: CommandName) {\n  const cmd = allCommands[commandName]!;\n  elem.setAttribute('title', cmd.getDesc());\n  dom.on(elem, 'click', cmd.run);\n});\n","import * as commands from 'app/client/components/commands';\nimport {GristDoc} from 'app/client/components/GristDoc';\nimport {FocusLayer} from 'app/client/lib/FocusLayer';\nimport {reportSuccess} from 'app/client/models/errors';\nimport {basicButton, bigPrimaryButton, primaryButton} from 'app/client/ui2018/buttons';\nimport {labeledSquareCheckbox} from 'app/client/ui2018/checkbox';\nimport {mediaXSmall, testId, theme, vars} from 'app/client/ui2018/cssVars';\nimport {icon} from 'app/client/ui2018/icons';\nimport {cssModalTooltip, modalTooltip} from 'app/client/ui2018/modals';\nimport {dom, DomContents, keyframes, observable, styled, svg} from 'grainjs';\nimport {IPopupOptions} from 'popweasel';\nimport merge = require('lodash/merge');\n\n/**\n * This is a file for all custom and pre-configured popups, modals, toasts and tooltips, used\n * in more then one component.\n */\n\n/**\n * Tooltip or popup to confirm row deletion.\n */\nexport function buildConfirmDelete(\n  refElement: Element,\n  onSave: (remember: boolean) => void,\n  single = true,\n) {\n  const remember = observable(false);\n  const tooltip = modalTooltip(refElement, (ctl) =>\n    cssContainer(\n      dom.autoDispose(remember),\n      testId('confirm-deleteRows'),\n      testId('confirm-popup'),\n      elem => { FocusLayer.create(ctl, {defaultFocusElem: elem, pauseMousetrap: true}); },\n      dom.onKeyDown({\n        Escape: () => ctl.close(),\n        Enter: () => { onSave(remember.get()); ctl.close(); },\n      }),\n      dom('div', `Are you sure you want to delete ${single ? 'this' : 'these'} record${single ? '' : 's'}?`,\n        dom.style('margin-bottom', '10px'),\n      ),\n      dom('div',\n        labeledSquareCheckbox(remember, \"Don't ask again.\", testId('confirm-remember')),\n        dom.style('margin-bottom', '10px'),\n      ),\n      cssButtons(\n        primaryButton('Delete', testId('confirm-save'), dom.on('click', () => {\n          onSave(remember.get());\n          ctl.close();\n        })),\n        basicButton('Cancel', testId('confirm-cancel'), dom.on('click', () => ctl.close()))\n      )\n    ), {}\n  );\n  // Attach this tooltip to a cell so that it is automatically closed when the cell is disposed.\n  // or scrolled out of view (and then disposed).\n  dom.onDisposeElem(refElement, () => {\n    if (!tooltip.isDisposed()) {\n      tooltip.close();\n    }\n  });\n  return tooltip;\n}\n\nexport function showDeprecatedWarning(\n  refElement: Element,\n  content: DomContents,\n  onClose: (checked: boolean) => void,\n) {\n  const remember = observable(false);\n  const tooltip = modalTooltip(refElement, (ctl) =>\n    cssWideContainer(\n      testId('popup-warning-deprecated'),\n      elem => { FocusLayer.create(ctl, {defaultFocusElem: elem, pauseMousetrap: true}); },\n      dom.onKeyDown({\n        Escape: () => { ctl.close(); onClose(remember.get()); },\n        Enter: () => { ctl.close(); onClose(remember.get()); },\n      }),\n      content,\n      cssButtons(\n        dom.style('margin-top', '12px'),\n        dom.style('justify-content', 'space-between'),\n        dom.style('align-items', 'center'),\n        dom('div',\n          labeledSquareCheckbox(remember, \"Don't show again.\", testId('confirm-remember')),\n        ),\n        basicButton('Dismiss', testId('confirm-save'),\n          dom.on('click', () => { ctl.close(); onClose(remember.get()); })\n        )\n      ),\n    )\n  );\n  // Attach this warning to a cell so that it is automatically closed when the cell is disposed.\n  // or scrolled out of view (and then disposed).\n  dom.onDisposeElem(refElement, () => {\n    if (!tooltip.isDisposed()) {\n      tooltip.close();\n    }\n  });\n  return tooltip;\n}\n\n/**\n * Shows notification with a single button 'Undo' delete.\n */\nexport function reportUndo(\n  doc: GristDoc,\n  messageLabel: string,\n  buttonLabel = 'Undo to restore'\n) {\n  // First create a notification with a button to undo the delete.\n  let notification = reportSuccess(messageLabel, {\n    key: 'undo',\n    actions: [{\n      label: buttonLabel,\n      action: () => {\n        // When user clicks on the button, undo the last action.\n        commands.allCommands.undo.run();\n        // And remove this notification.\n        close();\n      },\n    }]\n  });\n\n  // When we received some actions from the server, cancel this popup,\n  // as the undo might do something else.\n  doc.on('onDocUserAction', close);\n  notification?.onDispose(() => doc.off('onDocUserAction', close));\n\n  function close() {\n    if (notification && !notification?.isDisposed()) {\n      notification.dispose();\n      notification = undefined;\n    }\n  }\n}\n\nexport interface ShowBehavioralPromptOptions {\n  onClose: (dontShowTips: boolean) => void;\n  /** Defaults to false. */\n  hideArrow?: boolean;\n  /** Defaults to false. */\n  hideDontShowTips?: boolean;\n  popupOptions?: IPopupOptions;\n}\n\nexport function showBehavioralPrompt(\n  refElement: Element,\n  title: string,\n  content: DomContents,\n  options: ShowBehavioralPromptOptions\n) {\n  const {onClose, hideArrow = false, hideDontShowTips = false, popupOptions} = options;\n  const arrow = hideArrow ? null : buildArrow();\n  const dontShowTips = observable(false);\n  const tooltip = modalTooltip(refElement,\n    (ctl) => [\n      cssBehavioralPromptModal.cls(''),\n      arrow,\n      cssBehavioralPromptContainer(\n        dom.autoDispose(dontShowTips),\n        testId('behavioral-prompt'),\n        elem => { FocusLayer.create(ctl, {defaultFocusElem: elem, pauseMousetrap: true}); },\n        dom.onKeyDown({\n          Escape: () => ctl.close(),\n          Enter: () => { onClose(dontShowTips.get()); ctl.close(); },\n        }),\n        cssBehavioralPromptHeader(\n          cssHeaderIconAndText(\n            icon('Idea'),\n            cssHeaderText('TIP'),\n          ),\n        ),\n        cssBehavioralPromptBody(\n          cssBehavioralPromptTitle(title, testId('behavioral-prompt-title')),\n          content,\n          cssButtons(\n            dom.style('margin-top', '12px'),\n            dom.style('justify-content', 'space-between'),\n            dom.style('align-items', 'center'),\n            dom('div',\n              cssSkipTipsCheckbox(dontShowTips,\n                cssSkipTipsCheckboxLabel(\"Don't show tips\"),\n                testId('behavioral-prompt-dont-show-tips')\n              ),\n              dom.style('visibility', hideDontShowTips ? 'hidden' : ''),\n            ),\n            cssDismissPromptButton('Got it', testId('behavioral-prompt-dismiss'),\n              dom.on('click', () => { onClose(dontShowTips.get()); ctl.close(); })\n            ),\n          ),\n        ),\n      ),\n    ],\n    merge(popupOptions, {\n      modifiers: {\n        ...(arrow ? {arrow: {element: arrow}}: {}),\n        offset: {\n          offset: '0,12',\n        },\n        preventOverflow: {\n          boundariesElement: 'window',\n          padding: 32,\n        },\n      }\n    })\n  );\n  dom.onDisposeElem(refElement, () => {\n    if (!tooltip.isDisposed()) {\n      tooltip.close();\n    }\n  });\n  return tooltip;\n}\n\nfunction buildArrow() {\n  return cssArrowContainer(\n    svg('svg',\n      {style: 'width: 13px; height: 18px;'},\n      svg('path', {'d': 'M 0 0 h 13 v 18 Z'}),\n    ),\n  );\n}\n\nfunction sideSelectorChunk(side: 'top'|'bottom'|'left'|'right') {\n  return `.${cssModalTooltip.className}[x-placement^=${side}]`;\n}\n\nfunction fadeInFromSide(side: 'top'|'bottom'|'left'|'right') {\n  let startPosition: string;\n  switch(side) {\n    case 'top': {\n      startPosition = '0px -25px';\n      break;\n    }\n    case 'bottom': {\n      startPosition = '0px 25px';\n      break;\n    }\n    case'left': {\n      startPosition = '-25px 0px';\n      break;\n    }\n    case 'right': {\n      startPosition = '25px 0px';\n      break;\n    }\n  }\n  return keyframes(`\n  from {translate: ${startPosition}; opacity: 0;}\n  to {translate: 0px 0px; opacity: 1;}\n  `);\n}\n\nconst HEADER_HEIGHT_PX = 30;\n\nconst cssArrowContainer = styled('div', `\n  position: absolute;\n\n  & path {\n    stroke: ${theme.popupBg};\n    stroke-width: 2px;\n    fill: ${theme.popupBg};\n  }\n\n  ${sideSelectorChunk('bottom')} > & path {\n    stroke: ${theme.controlPrimaryBg};\n    fill: ${theme.controlPrimaryBg};\n  }\n\n  ${sideSelectorChunk('top')} > & {\n    bottom: -17px;\n  }\n\n  ${sideSelectorChunk('bottom')} > & {\n    top: -14px;\n  }\n\n  ${sideSelectorChunk('right')} > & {\n    left: -12px;\n    margin: ${HEADER_HEIGHT_PX}px 0px ${HEADER_HEIGHT_PX}px 0px;\n  }\n\n  ${sideSelectorChunk('left')} > & {\n    right: -12px;\n    margin: ${HEADER_HEIGHT_PX}px 0px ${HEADER_HEIGHT_PX}px 0px;\n  }\n\n  ${sideSelectorChunk('top')} svg {\n    transform: rotate(-90deg);\n  }\n\n  ${sideSelectorChunk('bottom')} svg {\n    transform: rotate(90deg);\n  }\n\n  ${sideSelectorChunk('left')} svg {\n    transform: scalex(-1);\n  }\n`);\n\nconst cssTheme = styled('div', `\n  color: ${theme.text};\n`);\n\nconst cssButtons = styled('div', `\n  display: flex;\n  gap: 6px;\n`);\n\nconst cssContainer = styled(cssTheme, `\n  max-width: 270px;\n`);\n\nconst cssWideContainer = styled(cssTheme, `\n  max-width: 340px;\n`);\n\nconst cssFadeInFromTop = fadeInFromSide('top');\n\nconst cssFadeInFromBottom = fadeInFromSide('bottom');\n\nconst cssFadeInFromLeft = fadeInFromSide('left');\n\nconst cssFadeInFromRight = fadeInFromSide('right');\n\nconst cssBehavioralPromptModal = styled('div', `\n  margin: 0px;\n  padding: 0px;\n  width: 400px;\n  border-radius: 4px;\n\n  animation-duration: 0.4s;\n  position: absolute;\n\n  &[x-placement^=top] {\n    animation-name: ${cssFadeInFromTop};\n  }\n\n  &[x-placement^=bottom] {\n    animation-name: ${cssFadeInFromBottom};\n  }\n\n  &[x-placement^=left] {\n    animation-name: ${cssFadeInFromLeft};\n  }\n\n  &[x-placement^=right] {\n    animation-name: ${cssFadeInFromRight};\n  }\n\n  @media ${mediaXSmall} {\n    & {\n      width: 320px;\n    }\n  }\n`);\n\nconst cssBehavioralPromptContainer = styled(cssTheme, `\n  line-height: 18px;\n`);\n\nconst cssBehavioralPromptHeader = styled('div', `\n  display: flex;\n  justify-content: center;\n  background-color: ${theme.controlPrimaryBg};\n  color: ${theme.controlPrimaryFg};\n  --icon-color: ${theme.controlPrimaryFg};\n  border-radius: 4px 4px 0px 0px;\n  line-height: ${HEADER_HEIGHT_PX}px;\n`);\n\nconst cssBehavioralPromptBody = styled('div', `\n  padding: 16px;\n`);\n\nconst cssHeaderIconAndText = styled('div', `\n  display: flex;\n  align-items: center;\n  column-gap: 8px;\n`);\n\nconst cssHeaderText = styled('div', `\n  font-weight: 600;\n`);\n\nconst cssDismissPromptButton = styled(bigPrimaryButton, `\n  margin-right: 8px;\n`);\n\nconst cssBehavioralPromptTitle = styled('div', `\n  font-size: ${vars.xxxlargeFontSize};\n  font-weight: ${vars.headerControlTextWeight};\n  color: ${theme.text};\n  margin: 0 0 16px 0;\n  line-height: 32px;\n`);\n\nconst cssSkipTipsCheckbox = styled(labeledSquareCheckbox, `\n  line-height: normal;\n`);\n\n\nconst cssSkipTipsCheckboxLabel = styled('span', `\n  color: ${theme.lightText};\n`);\n","/**\n * FocusLayer addresses the issue of where focus goes \"by default\". In most of Grist operation,\n * the focus is on the special Clipboard element to support typing into cells, and copy-pasting.\n * When a modal is open, the focus is on the modal.\n *\n * When the focus moves to some specific element such as a textbox or a dropdown menu, the\n * FocusLayerManager will watch for this element to lose focus or to get disposed, and will\n * restore focus to the default element.\n */\nimport * as Mousetrap from 'app/client/lib/Mousetrap';\nimport {arrayRemove} from 'app/common/gutil';\nimport {RefCountMap} from 'app/common/RefCountMap';\nimport {Disposable, dom, DomMethod} from 'grainjs';\n\n/**\n * The default focus is organized into layers. A layer determines when focus should move to the\n * default element, and what that element should be. Only the top (most recently created) layer is\n * active at any given time.\n */\nexport interface FocusLayerOptions {\n  // The default element that should have focus while this layer is active.\n  defaultFocusElem: HTMLElement;\n\n  // When true for an element, that element may hold focus even while this layer is active.\n  // Defaults to any element except document.body.\n  allowFocus?: (elem: Element) => boolean;\n\n  // If set, pause mousetrap keyboard shortcuts while this FocusLayer is active. Without it, arrow\n  // keys will navigate in a grid underneath this layer, and Enter may open a cell there.\n  pauseMousetrap?: boolean;\n\n  // Called when the defaultFocusElem gets focused.\n  onDefaultFocus?: () => void;\n\n  // Called when the defaultFocusElem gets blurred.\n  onDefaultBlur?: () => void;\n}\n\n// Use RefCountMap to have a reference-counted instance of the global FocusLayerManager. It will\n// be active as long as at least one FocusLayer is active (i.e. not disposed).\nconst _focusLayerManager = new RefCountMap<null, FocusLayerManager>({\n  create: (key) => FocusLayerManager.create(null),\n  dispose: (key, value) => value.dispose(),\n  gracePeriodMs: 10,\n});\n\n/**\n * The FocusLayerManager implements the functionality, using the top (most recently created) layer\n * to determine when and to what to move focus.\n */\nclass FocusLayerManager extends Disposable {\n  private _timeoutId: ReturnType<typeof setTimeout> | null = null;\n  private _focusLayers: FocusLayer[] = [];\n\n  constructor() {\n    super();\n\n    const grabFocus = this.grabFocus.bind(this);\n\n    this.autoDispose(dom.onElem(window, 'focus', grabFocus));\n    this.grabFocus();\n\n    // The following block of code deals with what happens when the window is in the background.\n    // When it is, focus and blur events are unreliable, and we'll watch explicitly for events which\n    // may cause a change in focus. These wouldn't happen normally for a background window, but do\n    // happen in Selenium Webdriver testing.\n    function setBackgroundCapture(onOff: boolean) {\n      const addRemove = onOff ? window.addEventListener : window.removeEventListener;\n      // Note the third argument useCapture=true, which lets us notice these events before other\n      // code that might call .stopPropagation on them.\n      addRemove.call(window, 'click', grabFocus, true);\n      addRemove.call(window, 'mousedown', grabFocus, true);\n      addRemove.call(window, 'keydown', grabFocus, true);\n    }\n    this.autoDispose(dom.onElem(window, 'blur', setBackgroundCapture.bind(null, true)));\n    this.autoDispose(dom.onElem(window, 'focus', setBackgroundCapture.bind(null, false)));\n    setBackgroundCapture(!document.hasFocus());\n  }\n\n  public addLayer(layer: FocusLayer) {\n    this.getCurrentLayer()?.onDefaultBlur();\n    this._focusLayers.push(layer);\n    // Move the focus to the new layer. Not just grabFocus, because if the focus is on the previous\n    // layer's defaultFocusElem, the new layer might consider it \"allowed\" and never get the focus.\n    setTimeout(() => layer.defaultFocusElem.focus({preventScroll: true}), 0);\n  }\n\n  public removeLayer(layer: FocusLayer) {\n    arrayRemove(this._focusLayers, layer);\n    // Give the remaining layers a chance to check focus.\n    this.grabFocus();\n  }\n\n  public getCurrentLayer(): FocusLayer|undefined {\n    return this._focusLayers[this._focusLayers.length - 1];\n  }\n\n  /**\n   * Select the default focus element, or wait until the current element loses focus.\n   */\n  public grabFocus() {\n    if (!this._timeoutId) {\n      this._timeoutId = setTimeout(() => this._doGrabFocus(), 0);\n    }\n  }\n\n  private _doGrabFocus() {\n    if (this.isDisposed()) { return; }\n    this._timeoutId = null;\n    const layer = this.getCurrentLayer();\n    if (!layer || document.activeElement === layer.defaultFocusElem) {\n      layer?.onDefaultFocus();\n      return;\n    }\n    // If the window doesn't have focus, don't rush to grab it, or we can interfere with focus\n    // outside the frame when embedded. We'll grab focus when setBackgroundCapture tells us to.\n    if (!document.hasFocus()) {\n      return;\n    }\n    if (document.activeElement && layer.allowFocus(document.activeElement)) {\n      watchElementForBlur(document.activeElement, () => this.grabFocus());\n      layer.onDefaultBlur();\n    } else {\n      layer.defaultFocusElem.focus({preventScroll: true});\n      layer.onDefaultFocus();\n    }\n  }\n}\n\n/**\n * An individual FocusLayer determines where focus should default to while this layer is active.\n */\nexport class FocusLayer extends Disposable implements FocusLayerOptions {\n  // FocusLayer.grabFocus() allows triggering the focus check manually.\n  public static grabFocus() {\n    _focusLayerManager.get(null)?.grabFocus();\n  }\n\n  /**\n   * Creates a new FocusLayer and attaches it to the given element. The layer will be disposed\n   * automatically when the element is removed from the DOM.\n   */\n  public static attach(options: Partial<FocusLayerOptions>): DomMethod<HTMLElement> {\n    return (element: HTMLElement) => {\n      const layer = FocusLayer.create(null, {defaultFocusElem: element, ...options});\n      dom.autoDisposeElem(element, layer);\n    };\n  }\n\n  public defaultFocusElem: HTMLElement;\n  public allowFocus: (elem: Element) => boolean;\n  public _onDefaultFocus?: () => void;\n  public _onDefaultBlur?: () => void;\n  private _isDefaultFocused: boolean|null = null;\n\n  constructor(options: FocusLayerOptions) {\n    super();\n    this.defaultFocusElem = options.defaultFocusElem;\n    this.allowFocus = options.allowFocus || (elem => elem !== document.body);\n    this._onDefaultFocus = options.onDefaultFocus;\n    this._onDefaultBlur = options.onDefaultBlur;\n\n    // Make sure the element has a tabIndex attribute, to make it focusable.\n    if (!this.defaultFocusElem.hasAttribute('tabindex')) {\n      this.defaultFocusElem.setAttribute('tabindex', '-1');\n    }\n\n    if (options.pauseMousetrap) {\n      Mousetrap.setPaused(true);\n      this.onDispose(() => Mousetrap.setPaused(false));\n    }\n\n    const managerRefCount = this.autoDispose(_focusLayerManager.use(null));\n    const manager = managerRefCount.get();\n    manager.addLayer(this);\n    this.onDispose(() => manager.removeLayer(this));\n    this.autoDispose(dom.onElem(this.defaultFocusElem, 'blur', () => manager.grabFocus()));\n  }\n\n  public onDefaultFocus() {\n    // Only trigger onDefaultFocus() callback when the focus status actually changed.\n    if (this._isDefaultFocused) { return; }\n    this._isDefaultFocused = true;\n    this._onDefaultFocus?.();\n  }\n\n  public onDefaultBlur() {\n    // Only trigger onDefaultBlur() callback when the focus status actually changed.\n    if (this._isDefaultFocused === false) { return; }\n    this._isDefaultFocused = false;\n    this._onDefaultBlur?.();\n  }\n}\n\n/**\n * Helper to watch a focused element to lose focus, at which point callback() will get called.\n * Because elements getting removed from the DOM don't always trigger 'blur' event, this also\n * uses MutationObserver to watch for the element to get removed from DOM.\n */\nexport function watchElementForBlur(elem: Element, callback: () => void) {\n  const maybeDone = () => {\n    if (document.activeElement !== elem) {\n      lis.dispose();\n      observer.disconnect();\n      callback();\n    }\n  };\n  const lis = dom.onElem(elem, 'blur', maybeDone);\n\n  // Watch for the removal of elem by observing the childList of all its ancestors.\n  // (Just guessing that it is more efficient than watching document.body with {subtree: true}).\n  const observer = new MutationObserver(maybeDone);\n  let parent = elem.parentNode;\n  while (parent) {\n    observer.observe(parent, {childList: true});\n    parent = parent.parentNode;\n  }\n}\n","/**\n * A full-featured implementation of tokenfield (aka \"pillbox\", \"tag list\", etc).\n *\n * Supported features:\n * - Each token includes an \"x\" button to delete it.\n * - Click on a token to select;\n *   Shift+click to extend selection;\n *   Ctrl+click for non-contigous selection.\n * - Arrow keys to move selection.\n *   Shift + arrow keys to extend selection.\n * - Cmd+A to select all options.\n * - Delete/Backspace delete selection. If no selection, Backspace deletes the last item.\n * - Copy-cut is supported for a selection. By default CSV-encodes token labels.\n * - Paste is supported into input textbox, or to replace a selection.\n * - Tokens or a selection of tokens may be dragged to move within the tokenfield.\n * - Supports undo/redo for token changes.\n */\nimport { ACItem } from 'app/client/lib/ACIndex';\nimport { modKeyProp } from 'app/client/lib/browserInfo';\nimport { Autocomplete, IAutocompleteOptions } from 'app/client/lib/autocomplete';\nimport { colors, testId, theme } from 'app/client/ui2018/cssVars';\nimport { icon } from 'app/client/ui2018/icons';\nimport { csvDecodeRow, csvEncodeRow } from 'app/common/csvFormat';\nimport { computedArray, IDisposableCtor, IObsArraySplice, ObsArray, obsArray, Observable } from 'grainjs';\nimport { Disposable, dom, DomElementArg, Holder, styled } from 'grainjs';\n\nexport interface IToken {\n  label: string;\n}\n\nexport interface ITokenFieldOptions<Token extends IToken> {\n  initialValue: Token[];\n  renderToken: (token: Token) => DomElementArg;\n  createToken: (inputText: string) => Token|undefined;\n  acOptions?: IAutocompleteOptions<Token & ACItem>;\n  openAutocompleteOnFocus?: boolean;\n  styles?: ITokenFieldStyles;\n  readonly?: boolean;\n  trimLabels?: boolean;\n  keyBindings?: ITokenFieldKeyBindings;\n\n  // Allows overriding how tokens are copied to the clipboard, or retrieved from it.\n  // By default, tokens are placed into clipboard as text/plain comma-separated token labels, with\n  // CSV escaping, and pasted from clipboard by applying createToken() to parsed CSV text.\n  tokensToClipboard?: (tokens: Token[], clipboard: DataTransfer) => void;\n  clipboardToTokens?: (clipboard: DataTransfer) => Token[];\n\n  // Defaults to horizontal.\n  variant?: ITokenFieldVariant;\n}\n\n/**\n * Overrides for default TokenField shortcut bindings.\n *\n * Values should be Key Values (https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values).\n */\nexport interface ITokenFieldKeyBindings {\n  previous?: string;\n  next?: string;\n}\n\nexport type ITokenFieldVariant = 'horizontal' | 'vertical';\n\nconst defaultKeyBindings: Required<ITokenFieldKeyBindings> = {\n  previous: 'ArrowLeft',\n  next: 'ArrowRight'\n};\n\n// TokenWrap serves to distinguish multiple instances of the same token in the list.\nclass TokenWrap<Token extends IToken> {\n  constructor(public token: Token) {}\n}\n\nclass UndoItem {\n  constructor(public redo: () => void, public undo: () => void) {}\n}\n\nexport class TokenField<Token extends IToken = IToken> extends Disposable {\n  public static ctor<T extends IToken>(): IDisposableCtor<TokenField<T>, [ITokenFieldOptions<T>]> {\n    return this;\n  }\n\n  public tokensObs: ObsArray<Token>;\n\n  private _acHolder = Holder.create<Autocomplete<Token & ACItem>>(this);\n  private _acOptions: IAutocompleteOptions<Token & ACItem>|undefined;\n  private _rootElem: HTMLElement;\n  private _textInput: HTMLInputElement;\n  private _styles: Required<ITokenFieldStyles>;\n\n  // ClipboardAPI events work as expected only when the focus is in an actual input.\n  // This is where we place focus when we have some tokens selected.\n  private _hiddenInput: HTMLInputElement;\n\n  // Keys to navigate tokens. In a vertical list, these would be changed to Up/Down.\n  private _keyBindings: Required<ITokenFieldKeyBindings>;\n\n  private _tokens = this.autoDispose(obsArray<TokenWrap<Token>>());\n  private _selection = Observable.create(this, new Set<TokenWrap<Token>>());\n  private _selectionAnchor: TokenWrap<Token>|null = null;\n  private _undoStack: UndoItem[] = [];\n  private _undoIndex = 0;   // The last action done; next to undo.\n  private _inUndoRedo = false;\n  private _variant: ITokenFieldVariant = this._options.variant ?? 'horizontal';\n\n  constructor(private _options: ITokenFieldOptions<Token>) {\n    super();\n    const addSelectedItem = this._addSelectedItem.bind(this);\n    const openAutocomplete = this._openAutocomplete.bind(this);\n    this._acOptions = _options.acOptions && {..._options.acOptions, onClick: addSelectedItem};\n\n    this.setTokens(_options.initialValue);\n    this.tokensObs = this.autoDispose(computedArray(this._tokens, t => t.token));\n    this._keyBindings = {...defaultKeyBindings, ..._options.keyBindings};\n\n    // We can capture undo info in a consistent way as long as we change _tokens using its\n    // obsArray interface, by listening to the splice events.\n    this.autoDispose(this._tokens.addListener(this._recordUndo.bind(this)));\n\n    // Use overridden styles if any were provided.\n    this._styles = {...tokenFieldStyles, ..._options.styles};\n    const {cssTokenField, cssToken, cssInputWrapper, cssTokenInput, cssDeleteButton, cssDeleteIcon} = this._styles;\n\n    function stop(ev: Event) {\n      ev.stopPropagation();\n      ev.preventDefault();\n    }\n\n    this._rootElem = cssTokenField(\n      {tabIndex: '-1'},\n      dom.forEach(this._tokens, (t) =>\n        cssToken(this._options.renderToken(t.token),\n          dom.cls('selected', (use) => use(this._selection).has(t)),\n          _options.readonly ? null : [\n            cssDeleteButton(\n              // Ignore mousedown events, so that tokens aren't draggable by the delete button.\n              dom.on('mousedown', (ev) => ev.stopPropagation()),\n              cssDeleteIcon('CrossSmall'),\n              testId('tokenfield-delete')\n            ),\n            dom.on('click', (ev) =>  this._onTokenClick(ev, t)),\n            dom.on('mousedown', (ev) => this._onMouseDown(ev, t))\n          ],\n          testId('tokenfield-token')\n        ),\n      ),\n      cssInputWrapper(\n        this._textInput = cssTokenInput(\n          dom.boolAttr(\"readonly\", this._options.readonly ?? false),\n          dom.on('focus', this._onInputFocus.bind(this)),\n          dom.on('blur', () => { this._acHolder.clear(); }),\n          (this._acOptions ?\n            // Toggle the autocomplete on clicking the input box.\n            dom.on('click', () => this._acHolder.isEmpty() ? openAutocomplete() : this._acHolder.clear()) :\n            null\n          ),\n          dom.onKeyDown({\n            Escape$: (ev) => { this._acHolder.clear(); },\n            Enter$: (ev) => addSelectedItem() && stop(ev),\n            ArrowDown$: openAutocomplete,\n            Tab$: (ev) => addSelectedItem() && stop(ev),\n          }),\n          dom.on('input', openAutocomplete),\n          testId('tokenfield-input'),\n        ),\n      ),\n      dom.onKeyDown({\n        a$: this._maybeSelectAllTokens.bind(this),\n        Backspace$: this._maybeBackspace.bind(this),\n        Delete$: this._maybeDelete.bind(this),\n        [this._keyBindings.previous + '$']: (ev) => this._maybeAdvance(ev, -1),\n        [this._keyBindings.next + '$']: (ev) => this._maybeAdvance(ev, +1),\n        // ['Mod+z'] triggers undo; ['Mod+Shift+Z', 'Ctrl+y' ] trigger redo\n        z$: (ev) => { if (ev[modKeyProp()]) { ev.shiftKey ? this._redo(ev) : this._undo(ev); } },\n        y$: (ev) => { if (ev.ctrlKey && !ev.shiftKey) { this._redo(ev); } },\n      }),\n      this._hiddenInput = cssHiddenInput({type: 'text', tabIndex: '-1'},\n        dom.on('blur', (ev) => {\n          if (ev.relatedTarget && ev.relatedTarget !== this._rootElem) {\n            this._selectionAnchor = null;\n            this._selection.set(new Set());\n          }\n        }),\n      ),\n      dom.on('focus', () => this._hiddenInput.focus({preventScroll: true})),\n      dom.on('copy', this._onCopyEvent.bind(this)),\n      dom.on('cut', this._onCutEvent.bind(this)),\n      dom.on('paste', this._onPasteEvent.bind(this)),\n      testId('tokenfield'),\n    );\n  }\n\n  public attach(elem: HTMLElement): void {\n    elem.appendChild(this._rootElem);\n  }\n\n  // Outer container for the tokens and new-entry input field.\n  public getRootElem(): HTMLElement {\n    return this._rootElem;\n  }\n\n  // The new-entry input field.\n  public getTextInput(): HTMLInputElement {\n    return this._textInput;\n  }\n\n  /**\n   * Returns the current value of the text input.\n   */\n  public getTextInputValue(): string {\n    return this._options.trimLabels ? this._textInput.value.trim() : this._textInput.value;\n  }\n\n  // The invisible input that has focus while we have some tokens selected.\n  public getHiddenInput(): HTMLInputElement {\n    return this._hiddenInput;\n  }\n\n  /**\n   * Returns the Autocomplete instance used by the TokenField.\n   */\n  public getAutocomplete(): Autocomplete<Token & ACItem> | null {\n    return this._acHolder.get();\n  }\n\n  /**\n   * Sets the `tokens` that the TokenField should be populated with.\n   *\n   * Can be called after the TokenField is created to override the\n   * stored tokens. This is useful for delayed token initialization,\n   * where `tokens` may need to be set shortly after the TokenField\n   * is opened (e.g. ReferenceListEditor).\n   */\n  public setTokens(tokens: Token[]): void {\n    const formattedTokens = this._maybeTrimTokens(tokens);\n    this._tokens.set(formattedTokens.map(t => new TokenWrap(t)));\n  }\n\n  // Replaces a token (if it exists).\n  public replaceToken(label: string, newToken: Token): void {\n    const tokenIdx = this._tokens.get().findIndex(t => t.token.label === label);\n    if (tokenIdx === -1) { return; }\n    this._tokens.splice(tokenIdx, 1, new TokenWrap(newToken));\n  }\n\n  // Open the autocomplete dropdown, if autocomplete was configured in the options.\n  private _openAutocomplete() {\n    // don't open dropdown in a readonly mode\n    if (this._options.readonly) { return; }\n    if (this._acOptions && this._acHolder.isEmpty()) {\n      Autocomplete.create(this._acHolder, this._textInput, this._acOptions);\n    }\n  }\n\n  // Adds the typed-in or selected item. If an item is selected in autocomplete dropdown, adds\n  // that; otherwise if options.createToken is present, creates a token from text input value.\n  private _addSelectedItem(): boolean {\n    let item: Token|undefined = this._acHolder.get()?.getSelectedItem();\n    const textInput = this.getTextInputValue();\n    if (!item && this._options.createToken && textInput) {\n      item = this._options.createToken(textInput);\n    }\n    if (item) {\n      this._tokens.push(new TokenWrap(item));\n      this._textInput.value = '';\n      this._acHolder.clear();\n      return true;\n    }\n    return false;\n  }\n\n  // Handler for when text input is focused: clears selection, optionally opens dropdown.\n  private _onInputFocus() {\n    this._selectionAnchor = null;\n    this._selection.set(new Set());\n    if (this._options.openAutocompleteOnFocus) {\n      this._openAutocomplete();\n    }\n  }\n\n  // Handle for a click on a token or the token's delete button. This handles selection, including\n  // Shift+Click and Ctrl+Click.\n  private _onTokenClick(ev: MouseEvent, t: TokenWrap<Token>) {\n    const idx = this._tokens.get().indexOf(t);\n    if (idx < 0) { return; }\n    if (ev.target && (ev.target as HTMLElement).matches('.' + this._styles.cssDeleteIcon.className)) {\n      // Delete token.\n      this._tokens.splice(idx, 1);\n    } else {\n      const fromIdx = this._selectionAnchor ? this._tokens.get().indexOf(this._selectionAnchor) : -1;\n      if (ev.shiftKey && fromIdx >= 0) {\n        // Shift+Click selects range from selectionAnchor to the clicked token.\n        const [first, last] = fromIdx <= idx ? [fromIdx, idx] : [idx, fromIdx];\n        this._selection.set(new Set(this._tokens.get().slice(first, last + 1)));\n      } else if (ev[modKeyProp()] && fromIdx >= 0) {\n        // Ctrl+Click (or Command+Click on mac) toggles the clicked token.\n        this._toggleTokenSelection(t);\n      } else {\n        // Plain click, or any click in the absence of an anchor element, sets the anchor and\n        // selects just this element.\n        this._resetTokenSelection(t);\n      }\n    }\n    this._setFocus();\n  }\n\n  private _maybeSelectAllTokens(ev: KeyboardEvent) {\n    if (ev[modKeyProp()] && this._textInput.value === '') {\n      ev.stopPropagation();\n      ev.preventDefault();\n      const tokens = this._tokens.get();\n      this._selection.set(new Set(tokens));\n      this._selectionAnchor = tokens ? tokens[0] : null;\n      this._setFocus();\n    }\n  }\n\n  // Set focus appropriately to the textInput or to the outer container.\n  private _setFocus() {\n    if (this._selection.get().size === 0) {\n      this._textInput.focus();\n    } else {\n      this._hiddenInput.focus();\n    }\n  }\n\n  private _maybeBackspace(ev: KeyboardEvent) {\n    if (this._textInput.value === '') {\n      ev.stopPropagation();\n      ev.preventDefault();\n      if (ev.repeat) { return; }\n      if (this._selection.get().size === 0) {\n        this._tokens.pop();\n      } else {\n        this._deleteTokens(this._selection.get(), -1);\n      }\n    }\n  }\n\n  private _maybeDelete(ev: KeyboardEvent) {\n    if (this._textInput.value === '' && this._selection.get().size > 0) {\n      ev.stopPropagation();\n      ev.preventDefault();\n      this._deleteTokens(this._selection.get(), 1);\n    }\n  }\n\n  // Handle arrow and shift+arrow keys, when the text input is empty.\n  private _maybeAdvance(ev: KeyboardEvent, advance: 1|-1): void {\n    if (this._textInput.value !== '') {\n      return;\n    }\n    const tokens = this._tokens.get();\n    const anchorIdx = this._selectionAnchor ? tokens.indexOf(this._selectionAnchor) : -1;\n\n    if (ev.shiftKey && this._selection.get().size > 0 && anchorIdx >= 0) {\n      // For shift+arrows, we either extend or reduce the selection, depending on whether we are\n      // walking away from the anchor or back towards it.\n      const [first, last] = this._getSelectedIndexRange(this._selection.get());\n      if (last < 0) { return; }\n      const toggleIdx = (advance > 0) ?\n        (last === anchorIdx && first < anchorIdx ? first : last + 1) :\n        (first === anchorIdx && last > anchorIdx ? last : first - 1);\n      const t = tokens[toggleIdx];\n      if (t) {\n        ev.stopPropagation();\n        ev.preventDefault();\n        this._toggleTokenSelection(t);\n        this._setFocus();\n      }\n    } else {\n      // For arrow keys, move to the next token after the selection.\n      let next: TokenWrap<Token>|null = null;\n      if (this._selection.get().size > 0) {\n        next = this._getNextToken(this._selection.get(), advance);\n      } else if (advance < 0 && tokens.length > 0) {\n        next = tokens[tokens.length - 1];\n      }\n      // If no next token and we are moving to the right, we should end up back in the text input.\n      if (next || advance > 0) {\n        ev.stopPropagation();\n        ev.preventDefault();\n        this._resetTokenSelection(next);\n        this._setFocus();\n      }\n    }\n  }\n\n  private _toggleTokenSelection(token: TokenWrap<Token>) {\n    const selection = this._selection.get();\n    if (selection.has(token)) {\n      selection.delete(token);\n    } else {\n      selection.add(token);\n    }\n    // We use .setAndTrigger() to set a value that's identical (by reference) to the previous one.\n    this._selection.setAndTrigger(selection);\n  }\n\n  private _resetTokenSelection(token: TokenWrap<Token>|null) {\n    this._selectionAnchor = token;\n    this._selection.set(token ? new Set([token]) : new Set());\n  }\n\n  // Delete the given set of tokens, and select either the following or the preceding one.\n  private _deleteTokens(toDelete: Set<TokenWrap<Token>>, advance: 1|-1|0) {\n    if (this._selection.get().size === 0) { return; }\n    const selectAfter = advance ? this._getNextToken(toDelete, advance) : null;\n    this._tokens.set(this._tokens.get().filter(t => !toDelete.has(t)));\n    this._resetTokenSelection(selectAfter);\n    this._setFocus();\n  }\n\n  private _getNextToken(selection: Set<TokenWrap<Token>>, advance: 1|-1): TokenWrap<Token>|null {\n    const [first, last] = this._getSelectedIndexRange(selection);\n    if (last < 0) { return null; }\n    return this._tokens.get()[advance > 0 ? last + 1 : first - 1] || null;\n  }\n\n  private _getSelectedIndexRange(selection: Set<TokenWrap<Token>>): [number, number] {\n    const tokens = this._tokens.get();\n    let first = -1, last = -1;\n    for (let i = 0; i < tokens.length; i++) {\n      if (selection.has(tokens[i])) {\n        if (first === -1) { first = i; }\n        last = i;\n      }\n    }\n    return [first, last];\n  }\n\n  private _onCopyEvent(ev: ClipboardEvent): boolean {\n    if (!ev.clipboardData || !this._selection.get().size) { return false; }\n    ev.preventDefault();  // Required for overriding: https://www.w3.org/TR/clipboard-apis/#override-copy\n\n    const selected = this._selection.get();\n    const tokens = this._tokens.get().filter(t => selected.has(t));\n    if (this._options.tokensToClipboard) {\n      this._options.tokensToClipboard(tokens.map(t => t.token), ev.clipboardData);\n    } else {\n      const values = tokens.map(t => t.token.label);\n      ev.clipboardData.setData('text/plain', csvEncodeRow(values, {prettier: true}));\n    }\n    return true;\n  }\n\n  private _onCutEvent(ev: ClipboardEvent) {\n    if (this._onCopyEvent(ev)) {\n      this._deleteTokens(this._selection.get(), 0);\n    }\n  }\n\n  private _onPasteEvent(ev: ClipboardEvent) {\n    if (!ev.clipboardData) { return; }\n    ev.preventDefault();\n    let tokens: Token[];\n    if (this._options.clipboardToTokens) {\n      tokens = this._options.clipboardToTokens(ev.clipboardData);\n    } else {\n      const text = ev.clipboardData.getData('text/plain');\n      const values = csvDecodeRow(text);\n      tokens = values.map(v => this._options.createToken(v)).filter((t): t is Token => Boolean(t));\n    }\n    if (!tokens.length) { return; }\n    tokens = this._maybeTrimTokens(tokens);\n    tokens = this._getNonEmptyTokens(tokens);\n    const wrappedTokens = tokens.map(t => new TokenWrap(t));\n    this._combineUndo(() => {\n      this._deleteTokens(this._selection.get(), 1);\n      const anchorIdx = this._selectionAnchor ? this._tokens.get().indexOf(this._selectionAnchor) : -1;\n      if (anchorIdx >= 0) {\n        this._tokens.splice(anchorIdx, 0, ...wrappedTokens);\n        this._selectionAnchor = wrappedTokens[0];\n        this._selection.set(new Set(wrappedTokens));\n      } else {\n        this._tokens.push(...wrappedTokens);\n        this._resetTokenSelection(null);\n      }\n    });\n    this._setFocus();\n  }\n\n  // For a mousedown on a token, register events for mousemove/mouseup, and start dragging as soon\n  // as mousemove occurs.\n  private _onMouseDown(startEvent: MouseEvent, t: TokenWrap<Token>) {\n    const xInitial = startEvent.clientX;\n    const yInitial = startEvent.clientY;\n    const dragTargetSelector = `.${this._styles.cssToken.className}, .${this._styles.cssInputWrapper.className}`;\n    const dragTargetStyle = this._variant === 'horizontal' ? cssDragTarget : cssVerticalDragTarget;\n\n    let started = false;\n    let allTargets: HTMLElement[];\n    let tokenList: HTMLElement[];\n    let nextUnselectedToken: HTMLElement|undefined;\n\n    const onMove = (ev: MouseEvent) => {\n      if (!started) {\n        started = true;\n        // If we started dragging an element that's not part of the selection, reset the selection\n        // to just that element. After this, we are always dragging the active selection.\n        if (!this._selection.get().has(t)) {\n          this._resetTokenSelection(t);\n        }\n\n        this._rootElem.classList.add('token-dragactive');\n\n        // Get a list of all drag targets, and add a CSS class that shows drop location on hover.\n        allTargets = Array.prototype.filter.call(this._rootElem.children, el => el.matches(dragTargetSelector));\n        allTargets.forEach(el => el.classList.add(dragTargetStyle.className));\n\n        // Get a list of element we are dragging, and add a CSS class to show them as dragged.\n        tokenList = allTargets.filter(el => el.matches('.selected'));\n        tokenList.forEach(el => el.classList.add('token-dragging'));\n\n        // Add a CSS class to the first unselected token after the current selection; we use it for showing\n        // the drag/drop markers when hovering over a token.\n        nextUnselectedToken = allTargets.find(el => el.previousElementSibling === tokenList[tokenList.length - 1]);\n        nextUnselectedToken?.classList.add(dragTargetStyle.className + \"-next\");\n        nextUnselectedToken?.style.setProperty('--count', String(tokenList.length));\n      }\n      const xOffset = ev.clientX - xInitial;\n      const yOffset = ev.clientY - yInitial;\n      const transform = `translate(${xOffset}px, ${yOffset}px)`;\n      tokenList.forEach(el => { el.style.transform = transform; });\n    };\n\n    const onStop = (ev: MouseEvent) => {\n      moveLis.dispose();\n      stopLis.dispose();\n\n      // Stop here if dragging never started.\n      if (!started) { return; }\n\n      // Restore all style changes.\n      this._rootElem.classList.remove('token-dragactive');\n      allTargets.forEach(el => el.classList.remove(dragTargetStyle.className));\n      tokenList.forEach(el => el.classList.remove('token-dragging'));\n      tokenList.forEach(el => { el.style.transform = ''; });\n      nextUnselectedToken?.classList.remove(dragTargetStyle.className + \"-next\");\n\n      // Find the token before which we are inserting the dragged elements. If inserting at the\n      // end (just before or over the input box), destToken will be undefined.\n      const index = allTargets.findIndex((target) => target.contains(ev.target as Node));\n      if (index < 0) { return; }\n\n      const destToken: TokenWrap<Token>|undefined = this._tokens.get()[index];\n\n      const selection = this._selection.get();\n      if (selection.has(destToken)) { return; }   // Not actually moving anywhere new.\n\n      const movedTokens = this._tokens.get().filter(tok => selection.has(tok));\n      if (!movedTokens.length) { return; }        // Didn't find any tokens to move.\n\n      this._combineUndo(() => {\n        this._deleteTokens(selection, 0);\n        // Find destination again after the deletion (it's likely to have changed).\n        const destIndex = destToken ? this._tokens.get().indexOf(destToken) : this._tokens.get().length;\n        // Move the tokens and mark them as selected.\n        this._tokens.splice(destIndex, 0, ...movedTokens);\n        this._selectionAnchor = movedTokens[0];\n        this._selection.set(new Set(movedTokens));\n      });\n    };\n\n    const moveLis = dom.onElem(document, 'mousemove', onMove, {useCapture: true});\n    const stopLis = dom.onElem(document, 'mouseup', onStop, {useCapture: true});\n  }\n\n  private _recordUndo(val: TokenWrap<Token>[], prev: TokenWrap<Token>[], change?: IObsArraySplice<TokenWrap<Token>>) {\n    if (this._inUndoRedo) { return; }\n    const splice = change || {start: 0, numAdded: val.length, deleted: [...prev]};\n    const newTokens = val.slice(splice.start, splice.start + splice.numAdded);\n    const redo = () => this._tokens.splice(splice.start, splice.deleted.length, ...newTokens);\n    const undo = () => this._tokens.splice(splice.start, splice.numAdded, ...splice.deleted);\n    this._undoIndex = Math.min(this._undoIndex + 1, this._undoStack.length);\n    this._undoStack.splice(this._undoIndex, this._undoStack.length, new UndoItem(redo, undo));\n  }\n\n  private _combineUndo(callback: () => void) {\n    const nextAction = this._undoIndex + 1;\n    try {\n      callback();\n    } finally {\n      if (this._undoStack.length > nextAction + 1) {\n        // If multiple actions were added, combine them into one.\n        const actions = this._undoStack.slice(nextAction);\n        const redo = () => actions.forEach(a => a.redo());\n        const undo = () => actions.slice().reverse().forEach(a => a.undo());\n        this._undoIndex = nextAction;\n        this._undoStack.splice(this._undoIndex, actions.length, new UndoItem(redo, undo));\n      }\n    }\n  }\n\n  private _undo(ev: KeyboardEvent): void {\n    if (this._textInput.value === '' && this._undoIndex >= 0 && this._undoIndex < this._undoStack.length) {\n      ev.stopPropagation();\n      ev.preventDefault();\n      this._inUndoRedo = true;\n      try {\n        this._undoStack[this._undoIndex].undo();\n        this._undoIndex--;\n      } finally {\n        this._inUndoRedo = false;\n      }\n    }\n  }\n\n  private _redo(ev: KeyboardEvent): void {\n    if (this._undoIndex + 1 < this._undoStack.length) {\n      ev.stopPropagation();\n      ev.preventDefault();\n      this._inUndoRedo = true;\n      try {\n        this._undoIndex += 1;\n        this._undoStack[this._undoIndex].redo();\n      } finally {\n        this._inUndoRedo = false;\n      }\n    }\n  }\n\n  /**\n   * Returns an array of tokens formatted according to the `trimLabels` option.\n   */\n  private _maybeTrimTokens(tokens: Token[]): Token[] {\n    if (!this._options.trimLabels) { return tokens; }\n    return tokens.map(t => ({...t, label: t.label.trim()}));\n  }\n\n  /**\n   * Returns a filtered array of tokens that don't have empty labels.\n   */\n  private _getNonEmptyTokens(tokens: Token[]): Token[] {\n    return tokens.filter(t => t.label !== '');\n  }\n}\n\nconst cssTokenField = styled('div', `\n  display: flex;\n  border: 1px solid ${colors.darkGrey};\n  border-radius: 3px;\n  padding: 0 4px;\n  line-height: 16px;\n\n  &.token-dragactive {\n    cursor: grabbing;\n  }\n`);\n\nconst cssToken = styled('div', `\n  position: relative;\n  flex: none;\n  border-radius: 3px;\n  background-color: ${colors.mediumGreyOpaque};\n  padding: 4px;\n  margin: 3px 2px;\n  user-select: none;\n  cursor: grab;\n\n  &.selected {\n    background-color: ${colors.darkGrey};\n  }\n  &.token-dragging {\n    pointer-events: none;\n    z-index: 1;\n    opacity: 0.7;\n  }\n  .${cssTokenField.className}.token-dragactive & {\n    cursor: unset;\n  }\n`);\n\nconst cssInputWrapper = styled('div', `\n  position: relative;\n  flex: auto;\n  margin: 3px 2px;\n  display: flex;\n`);\n\nconst cssTokenInput = styled('input', `\n  color: ${theme.cellEditorFg};\n  background-color: ${theme.cellEditorBg};\n  flex: auto;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  padding: 0;\n  border: none;\n  outline: none;\n  line-height: inherit;\n`);\n\n// This class is applied to tokens and the input box on start of dragging, to use them as drag\n// targets. Insertion point will always be to the left of them. While dragging, these include a\n// transparent pseudo-element to cover some area to the left, to know when it's a suitable drop\n// position. While the drag is over the element (or its extension), it gets shifted to show\n// the user the location of the drop using another pseudo-element.\nconst cssDragTarget = styled('div', `\n  &::before {\n    content: \"\";\n    position: absolute;\n    left: -8px;\n    right: 50%;\n    top: 0px;\n    bottom: 0px;\n  }\n  &:hover {\n    transform: translateX(2px);\n  }\n  &:hover::after {\n    content: \"\";\n    position: absolute;\n    background-color: ${colors.lightGreen};\n    width: 2px;\n    top: 0px;\n    bottom: 0px;\n    left: -4px;\n  }\n`);\n\nconst cssVerticalDragTarget = styled('div', `\n  /* This pseudo-element prevents small, flickering height changes when\n   * dragging the selection over targets. */\n  &::before {\n    content: \"\";\n    position: absolute;\n    top: -8px;\n    bottom: 0px;\n    left: 0px;\n    right: 0px;\n  }\n  &-next::before {\n    /* 27.75px is the height of a token. */\n    top: calc(-27.75px * var(--count, 1) - 8px);\n  }\n  &:hover {\n    transform: translateY(4px);\n    margin-bottom: 8px;\n  }\n  &:hover::after {\n    content: \"\";\n    position: absolute;\n    background-color: ${colors.lightGreen};\n    height: 2px;\n    top: -5px;\n    bottom: 0px;\n    left: 0px;\n    right: 0px;\n  }\n`);\n\nconst cssHiddenInput = styled('input', `\n  left: -10000px;\n  width: 1px;\n  position: absolute;\n`);\n\nconst cssDeleteButton = styled('div', `\n  display: inline;\n  margin-left: 4px;\n  vertical-align: bottom;\n  line-height: 1;\n  cursor: pointer;\n  .${cssTokenField.className}.token-dragactive & {\n    cursor: unset;\n  }\n`);\n\nconst cssDeleteIcon = styled(icon, `\n  --icon-color: ${colors.slate};\n  &:hover {\n    --icon-color: ${colors.dark};\n  }\n`);\n\nexport const tokenFieldStyles = {\n  cssTokenField,\n  cssToken,\n  cssInputWrapper,\n  cssTokenInput,\n  cssDeleteButton,\n  cssDeleteIcon,\n};\n\nexport type ITokenFieldStyles = Partial<typeof tokenFieldStyles>;\n","/**\n * Generic support of observable state represented by the current page's URL. The state is\n * initialized on first use, and updated on navigation events, such as Back/Forward button clicks,\n * and on calls to pushUrl().\n *\n * Application-specific module should instantiate UrlState with the desired way to encode state in\n * URLs. Other code may then use the UrlState object exposed by that app-specific module.\n *\n * UrlState also provides functions to navigate: makeUrl(), pushUrl(), and setLinkUrl(). The\n * preferred option is to use actual <a> links for navigation, creating them like so:\n *\n *    import {urlState} from '...appUrlState';\n *    dom('a', urlState().setLinkUrl({org: 'foo'}))\n *    dom('a', urlState().setLinkUrl({docPage: pageId}))\n *\n * These will set actual hrefs (e.g. allowing links to be opened in a new tab), and also will\n * intercept clicks and update history (using pushUrl()) without reloading the page.\n */\nimport * as log from 'app/client/lib/log';\nimport {BaseObservable, Disposable, dom, DomElementMethod, observable} from 'grainjs';\n\nexport interface UrlStateSpec<IUrlState> {\n  encodeUrl(state: IUrlState, baseLocation: Location | URL): string;\n  decodeUrl(location: Location | URL): IUrlState;\n  updateState(prevState: IUrlState, newState: IUrlState): IUrlState;\n\n  // If present, the return value is checked by pushUrl() to decide if we can stay on the page or\n  // need to load the new URL. The new URL is always loaded if origin changes.\n  needPageLoad(prevState: IUrlState, newState: IUrlState): boolean;\n\n  // Give the implementation a chance to complete outstanding work, e.g. if there is unsaved\n  // data in the page state that would get destroyed.\n  delayPushUrl(prevState: IUrlState, newState: IUrlState): Promise<void>;\n}\n\nexport type UpdateFunc<IUrlState> = (prevState: IUrlState) => IUrlState;\n\n/**\n * Represents the state of a page in browser history, as encoded in window.location URL.\n */\nexport class UrlState<IUrlState extends object> extends Disposable {\n  // Current state. This gets initialized in the constructor, and updated on navigation events.\n  public state = observable<IUrlState>(this._getState());\n\n  constructor(private _window: HistWindow, private _stateImpl: UrlStateSpec<IUrlState>) {\n    super();\n\n    // Create a hook for navigation. It's exposed on the window for overriding in tests.\n    if (!_window._urlStateLoadPage) {\n      _window._urlStateLoadPage = (href) => { _window.location.href = href; };\n    }\n\n    // On navigation events, update our current state, including the observables.\n    this.autoDispose(dom.onElem(this._window, 'popstate', (ev) => this.loadState()));\n  }\n\n  /**\n   * Creates a new history entry (navigable with Back/Forward buttons), encoding the given state\n   * in the URL. This is similar to navigating to a new URL, but does not reload the page.\n   */\n  public async pushUrl(urlState: IUrlState|UpdateFunc<IUrlState>,\n                       options: {replace?: boolean, avoidReload?: boolean} = {}) {\n    const prevState = this.state.get();\n    const newState = this._mergeState(prevState, urlState);\n\n    const newUrl = this._stateImpl.encodeUrl(newState, this._window.location);\n\n    // Don't create a new history entry if nothing changed as it would only be annoying.\n    if (newUrl === this._window.location.href) { return; }\n\n    const oldOrigin = this._window.location.origin;\n    const newOrigin = new URL(newUrl).origin;\n\n    // We can only pushState() without reloading the page if going to a same-origin URL.\n    const samePage = (oldOrigin === newOrigin &&\n      (options.avoidReload || !this._stateImpl.needPageLoad(prevState, newState)));\n\n    if (samePage) {\n      await this._stateImpl.delayPushUrl(prevState, newState);\n      try {\n        if (options.replace) {\n          this._window.history.replaceState(null, '', newUrl);\n        } else {\n          this._window.history.pushState(null, '', newUrl);\n        }\n        // pushState/replaceState above do not trigger 'popstate' event, so we call loadState() manually.\n        this.loadState();\n      } catch (e) {\n        // If we fail, we may be in a context where Grist doesn't have\n        // control over history, e.g. an iframe with srcdoc. Go ahead\n        // and apply the application state change (e.g. switching to a\n        // different Grist page). The back button won't work, but what\n        // it should do in an embedded context is full of nuance anyway.\n        log.debug(`pushUrl failure: ${e}`);\n        this.state.set(this._stateImpl.decodeUrl(new URL(newUrl)));\n      }\n    } else {\n      this._window._urlStateLoadPage!(newUrl);\n    }\n  }\n\n  /**\n   * Creates a URL (e.g. to use in a link's href) encoding the given state. The `use` argument\n   * allows for this to be used in a computed, and is used by setLinkUrl() and setHref().\n   *\n   * If urlState is an object (such as IGristUrlState), it gets merged with previous state\n   * according to rules (in gristUrlState's updateState). Alternatively, it can be a function that\n   * takes previous state and returns the new one (without mutating the previous state).\n   */\n  public makeUrl(urlState: IUrlState|UpdateFunc<IUrlState>, use: UseCB = unwrap): string {\n    const fullState = this._mergeState(use(this.state), urlState);\n    return this._stateImpl.encodeUrl(fullState, this._window.location);\n  }\n\n  /**\n   * Sets href on a dom element, e.g. dom('a', setHref({...})).\n   * This is similar to {href: makeUrl(urlState)}, but the destination URL will reflect the\n   * current url state (e.g. due to switching pages).\n   */\n  public setHref(urlState: IUrlState|UpdateFunc<IUrlState>): DomElementMethod {\n    return dom.attr('href', (use) => this.makeUrl(urlState, use));\n  }\n\n  /**\n   * Applies to an <a> element to create a smart link, e.g. dom('a', setLinkUrl({ws: wsId})). It\n   * both sets the href (e.g. to allow the link to be opened to a new tab), AND intercepts plain\n   * clicks on it to \"follow\" the link without reloading the page.\n   */\n  public setLinkUrl(urlState: IUrlState|UpdateFunc<IUrlState>): DomElementMethod[] {\n    return [\n      dom.attr('href', (use) => this.makeUrl(urlState, use)),\n      dom.on('click', (ev) => {\n        // Only override plain-vanilla clicks.\n        if (ev.shiftKey || ev.metaKey || ev.ctrlKey || ev.altKey) { return; }\n        ev.preventDefault();\n        return this.pushUrl(urlState);\n      }),\n    ];\n  }\n\n  /**\n   * Reset the state from the current URL. This shouldn't normally need to get called. It's called\n   * automatically when needed. It's also used by tests.\n   */\n  public loadState() {\n    log.debug(`loadState ${this._window.location.href}`);\n    this.state.set(this._getState());\n  }\n\n  private _getState(): IUrlState {\n    return this._stateImpl.decodeUrl(this._window.location);\n  }\n\n  private _mergeState(prevState: IUrlState, newState: IUrlState|UpdateFunc<IUrlState>): IUrlState {\n    return (typeof newState === 'object') ?\n      this._stateImpl.updateState(prevState, newState) :\n      newState(prevState);\n  }\n}\n\n// This is what we expect from the global Window object. Tests may override with a mock.\nexport interface HistWindow extends EventTarget {\n  history: History;\n  location: Location;\n\n  // This is a hook we create, to allow stubbing or overriding in tests.\n  _urlStateLoadPage?: (href: string) => void;\n}\n\n// The type of a 'use' callback as used in a computed(). It's what makes a computed subscribe to\n// its dependencies. The unwrap() helper allows using a dependency without any subscribing.\ntype UseCB = <T>(obs: BaseObservable<T>) => T;\nconst unwrap: UseCB = (obs) => obs.get();\n","/**\n * Implements an autocomplete dropdown.\n */\nimport {createPopper, Modifier, Instance as Popper, Options as PopperOptions} from '@popperjs/core';\nimport {ACItem, ACResults, HighlightFunc} from 'app/client/lib/ACIndex';\nimport {reportError} from 'app/client/models/errors';\nimport {Disposable, dom, EventCB, IDisposable} from 'grainjs';\nimport {obsArray, onKeyElem, styled} from 'grainjs';\nimport merge = require('lodash/merge');\nimport maxSize from 'popper-max-size-modifier';\nimport {cssMenu} from 'popweasel';\n\n\nexport interface IAutocompleteOptions<Item extends ACItem> {\n  // If provided, applies the css class to the menu container. Could be multiple, space-separated.\n  menuCssClass?: string;\n\n  // A single class name to add for the selected item, or 'selected' by default.\n  selectedCssClass?: string;\n\n  // Popper options for positioning the popup.\n  popperOptions?: Partial<PopperOptions>;\n\n  // To which element to append the popup content. Null means triggerElem.parentNode; string is\n  // a selector for the closest matching ancestor of triggerElem, e.g. 'body'.\n  // Defaults to the document body.\n  attach?: Element|string|null;\n\n  // Given a search term, return the list of Items to render.\n  search(searchText: string): Promise<ACResults<Item>>;\n\n  // Function to render a single item.\n  renderItem(item: Item, highlightFunc: HighlightFunc): HTMLElement;\n\n  // Get text for the text input for a selected item, i.e. the text to present to the user.\n  getItemText(item: Item): string;\n\n  // A callback triggered when user clicks one of the choices.\n  onClick?(): void;\n}\n\n/**\n * An instance of an open Autocomplete dropdown.\n */\nexport class Autocomplete<Item extends ACItem> extends Disposable {\n  // The UL element containing the actual menu items.\n  protected _menuContent: HTMLElement;\n\n  // Index into _items as well as into _menuContent, -1 if nothing selected.\n  protected _selectedIndex: number = -1;\n\n  // Currently selected element.\n  protected _selected: HTMLElement|null = null;\n\n  private _popper: Popper;\n  private _mouseOver: {reset(): void};\n  private _lastAsTyped: string;\n  private _items = this.autoDispose(obsArray<Item>([]));\n  private _highlightFunc: HighlightFunc;\n\n  constructor(\n    private _triggerElem: HTMLInputElement | HTMLTextAreaElement,\n    private readonly _options: IAutocompleteOptions<Item>,\n  ) {\n    super();\n\n    const content = cssMenuWrap(\n      this._menuContent = cssMenu({class: _options.menuCssClass || ''},\n        dom.forEach(this._items, (item) => _options.renderItem(item, this._highlightFunc)),\n        dom.style('min-width', _triggerElem.getBoundingClientRect().width + 'px'),\n        dom.on('mouseleave', (ev) => this._setSelected(-1, true)),\n        dom.on('click', (ev) => {\n          this._setSelected(this._findTargetItem(ev.target), true);\n          if (_options.onClick) { _options.onClick(); }\n        })\n      ),\n      // Prevent trigger element from being blurred on click.\n      dom.on('mousedown', (ev) => ev.preventDefault()),\n    );\n\n    this._mouseOver = attachMouseOverOnMove(this._menuContent,\n      (ev) => this._setSelected(this._findTargetItem(ev.target), true));\n\n    // Add key handlers to the trigger element as well as the menu if it is an input.\n    this.autoDispose(onKeyElem(_triggerElem, 'keydown', {\n      ArrowDown: () => this._setSelected(this._getNext(1), true),\n      ArrowUp: () => this._setSelected(this._getNext(-1), true),\n    }));\n\n    // Keeps track of the last value as typed by the user.\n    this.search();\n    this.autoDispose(dom.onElem(_triggerElem, 'input', () => this.search()));\n\n    const attachElem = _options.attach === undefined ? document.body : _options.attach;\n    const containerElem = getContainer(_triggerElem, attachElem) ?? document.body;\n    containerElem.appendChild(content);\n\n    this.onDispose(() => { dom.domDispose(content); content.remove(); });\n\n    // Prepare and create the Popper instance, which places the content according to the options.\n    const popperOptions = merge({}, defaultPopperOptions, _options.popperOptions);\n    this._popper = createPopper(_triggerElem, content, popperOptions);\n    this.onDispose(() => this._popper.destroy());\n  }\n\n  public getSelectedItem(): Item|undefined {\n    return this._items.get()[this._selectedIndex];\n  }\n\n  public search(findMatch?: (items: Item[]) => number) {\n    this._updateChoices(this._triggerElem.value, findMatch).catch(reportError);\n  }\n\n  // When the selected element changes, update the classes of the formerly and newly-selected\n  // elements and optionally update the text input.\n  private _setSelected(index: number, updateValue: boolean) {\n    const elem = (this._menuContent.children[index] as HTMLElement) || null;\n    const prev = this._selected;\n    if (elem !== prev) {\n      const clsName = this._options.selectedCssClass || 'selected';\n      if (prev) { prev.classList.remove(clsName); }\n      if (elem) {\n        elem.classList.add(clsName);\n        elem.scrollIntoView({block: 'nearest'});\n      }\n    }\n    this._selected = elem;\n    this._selectedIndex = elem ? index : -1;\n\n    if (updateValue) {\n      // Update trigger's value with the selected choice, or else with the last typed value.\n      if (elem) {\n        this._triggerElem.value = this._options.getItemText(this.getSelectedItem()!);\n      } else {\n        this._triggerElem.value = this._lastAsTyped;\n      }\n    }\n  }\n\n  private _findTargetItem(target: EventTarget|null): number {\n    // Find immediate child of this._menuContent which is an ancestor of ev.target.\n    const elem = findAncestorChild(this._menuContent, target as Element|null);\n    return Array.prototype.indexOf.call(this._menuContent.children, elem);\n  }\n\n  private _getNext(step: 1 | -1): number {\n    // Pretend there is an extra element at the end to mean \"nothing selected\".\n    const xsize = this._items.get().length + 1;\n    const next = (this._selectedIndex + step + xsize) % xsize;\n    return (next === xsize - 1) ? -1 : next;\n  }\n\n  private async _updateChoices(inputVal: string, findMatch?: (items: Item[]) => number): Promise<void> {\n    this._lastAsTyped = inputVal;\n    // TODO We should perhaps debounce the search() call in some clever way, to avoid unnecessary\n    // searches while typing. Today, search() is synchronous in practice, so it doesn't matter.\n    const acResults = await this._options.search(inputVal);\n    this._highlightFunc = acResults.highlightFunc;\n    this._items.set(acResults.items);\n\n    // Plain update() (which is deferred) may be better, but if _setSelected() causes scrolling\n    // before the positions are updated, it causes the entire page to scroll horizontally.\n    this._popper.forceUpdate();\n\n    this._mouseOver.reset();\n\n    let index: number;\n    if (findMatch) {\n      index = findMatch(this._items.get());\n    } else {\n      index = inputVal ? acResults.selectIndex : -1;\n    }\n    this._setSelected(index, false);\n  }\n}\n\n\n// The maxSize modifiers follow recommendations at https://www.npmjs.com/package/popper-max-size-modifier\nconst calcMaxSize = {\n  ...maxSize,\n  options: {padding: 4},\n};\n\nconst applyMaxSize: Modifier<any, any> = {\n  name: 'applyMaxSize',\n  enabled: true,\n  phase: 'beforeWrite',\n  requires: ['maxSize'],\n  fn({state}: any) {\n    // The `maxSize` modifier provides this data\n    const {height} = state.modifiersData.maxSize;\n    Object.assign(state.styles.popper, {\n      maxHeight: `${Math.max(160, height)}px`\n    });\n  }\n};\n\nexport const defaultPopperOptions: Partial<PopperOptions> = {\n  placement: 'bottom-start',\n  modifiers: [\n    calcMaxSize,\n    applyMaxSize,\n    {name: \"computeStyles\", options: {gpuAcceleration: false}},\n  ],\n};\n\n\n/**\n * Helper that finds the container according to attachElem. Null means\n * elem.parentNode; string is a selector for the closest matching ancestor, e.g. 'body'.\n */\n function getContainer(elem: Element, attachElem: Element|string|null): Node|null {\n  return (typeof attachElem === 'string') ? elem.closest(attachElem) :\n    (attachElem || elem.parentNode);\n}\n\n/**\n * Helper function which returns the direct child of ancestor which is an ancestor of elem, or\n * null if elem is not a descendant of ancestor.\n */\nexport function findAncestorChild(ancestor: Element, elem: Element|null): Element|null {\n  while (elem && elem.parentElement !== ancestor) {\n    elem = elem.parentElement;\n  }\n  return elem;\n}\n\n/**\n * A version of dom.onElem('mouseover') that doesn't start firing until there is first a 'mousemove'.\n * This way if an element is created under the mouse cursor (triggered by the keyboard, for\n * instance) it's not immediately highlighted, but only when a user moves the mouse.\n * Returns an object with a reset() method, which restarts the wait for mousemove.\n */\nexport function attachMouseOverOnMove<T extends EventTarget>(elem: T, callback: EventCB<MouseEvent, T>) {\n  let lis: IDisposable|undefined;\n  function setListener(eventType: 'mouseover'|'mousemove', cb: EventCB<MouseEvent, T>) {\n    if (lis) { lis.dispose(); }\n    lis = dom.onElem(elem, eventType, cb);\n  }\n  function reset() {\n    setListener('mousemove', (ev, _elem) => {\n      setListener('mouseover', callback);\n      callback(ev, _elem);\n    });\n  }\n  reset();\n  return {reset};\n}\n\nconst cssMenuWrap = styled('div', `\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  outline: none;\n`);\n","import * as Bowser from \"bowser\"; // TypeScript\n\nlet parser: Bowser.Parser.Parser|undefined;\n\nfunction getParser() {\n  return parser || (parser = Bowser.getParser(window.navigator.userAgent));\n}\n\n// Returns whether the browser we are in is a desktop browser.\nexport function isDesktop() {\n  const platformType = getParser().getPlatformType();\n  return (!platformType || platformType === 'desktop');\n}\n\n// Returns whether the browser is on mobile iOS.\n// This is used in particular in viewport.ts to set maximum-scale=1 (to prevent iOS auto-zoom when\n// an input is focused, without preventing manual pinch-to-zoom).\nexport function isIOS() {\n  return navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform);\n}\n\n// Returns 'metaKey' on Mac / iOS, and 'ctrlKey' elsewhere. This is useful for various keyboard\n// interactions that use Control on Windows and Linux, and Command key on Mac for the same\n// purpose. Suitable to use with KeyboardEvent and MouseEvent.\n// (Note: Mousetrap.js uses the same logic to interpret its \"mod\" key alias.)\nexport function modKeyProp(): 'metaKey'|'ctrlKey' {\n  return /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? 'metaKey' : 'ctrlKey';\n}\n\nexport function isWin() {\n  const os = getParser().getOSName();\n  return os === 'Windows';\n}\n","/**\n * This module contains tools and helpers to open HelpScout \"Beacon\" -- a popup which may contain\n * an email form, chat, and help docs -- and to include info relevant to support requests.\n *\n * Usage:\n *    import {Beacon} from 'app/client/lib/helpScout';\n *    Beacon('open')\n *    Beacon('prefill', {...})\n * It takes care of initialization automatically.\n *\n * This is essentially a prettified typescript version of the snippet for the HelpScout Beacon\n * available under Beacon settings in HelpScout. It offers the API documented at\n * https://developer.helpscout.com/beacon-2/web/javascript-api/\n */\n\n// tslint:disable:unified-signatures\n\nimport {logTelemetryEvent} from 'app/client/lib/telemetry';\nimport {AppModel} from 'app/client/models/AppModel';\nimport {reportWarning} from 'app/client/models/errors';\nimport {IAppError} from 'app/client/models/NotifyModel';\nimport {GristLoadConfig} from 'app/common/gristUrls';\nimport {timeFormat} from 'app/common/timeFormat';\nimport {ActiveSessionInfo} from 'app/common/UserAPI';\nimport * as version from 'app/common/version';\nimport {dom} from 'grainjs';\nimport identity = require('lodash/identity');\nimport pickBy = require('lodash/pickBy');\n\nexport type BeaconCmd = 'init' | 'destroy' | 'open' | 'close' | 'toggle' | 'search' | 'suggest' |\n  'article' | 'navigate' | 'identify' | 'prefill' | 'reset' | 'logout' | 'config' | 'on' | 'off' |\n  'once' | 'event' | 'session-data';\n\nexport type BeaconRoute = '/ask/message/' | '/answers/';\n\nexport interface IUserObj {\n  name?: string;\n  email?: string;\n  company?: string;\n  jobTitle?: string;\n  avatar?: string;\n  signature?: string;\n  [customKey: string]: string|number|boolean|null|undefined;\n}\n\ninterface IFormObj {\n  name?: string;\n  email?: string;\n  subject?: string;\n  text?: string;\n  fields?: Array<{id: number, value: string|number|boolean}>;\n}\n\ninterface ISessionData {\n  [key: string]: string;\n}\n\ninterface ICallbackAttributes {\n  id?: string;\n  query?: string;\n}\n\n/**\n * This provides the HelpScout Beacon API, taking care of initializing Beacon on first use.\n */\nexport function Beacon(method: 'init', beaconId: string): void;\nexport function Beacon(method: 'search', query: string): void;\nexport function Beacon(method: 'suggest', articles?: string[]): void;\nexport function Beacon(method: 'article', articleId: string, options?: unknown): void;\nexport function Beacon(method: 'navigate', route: string): void;\nexport function Beacon(method: 'identify', userObj: IUserObj): void;\nexport function Beacon(method: 'prefill', formObj: IFormObj): void;\nexport function Beacon(method: 'config', configObj: object): void;\nexport function Beacon(method: 'on'|'once', event: string,\n  callback: (attrs?: ICallbackAttributes) => void): void;\nexport function Beacon(method: 'off', event: string, callback?: () => void): void;\nexport function Beacon(method: 'session-data', data: ISessionData): void;\nexport function Beacon(method: BeaconCmd): void;\nexport function Beacon(method: BeaconCmd, options?: unknown, data?: unknown) {\n  initBeacon();\n  (window as any).Beacon(method, options, data);\n}\n\n// This is essentially what's done by the code snippet that HelpScout suggests to install in every\n// page. In Grist app pages, we only load HelpScout code when the beacon is opened.\nfunction _beacon(method: BeaconCmd, options?: unknown, data?: unknown) {\n  _beacon.readyQueue.push({method, options, data});\n}\n_beacon.readyQueue = [] as unknown[];\n\nfunction initBeacon(): void {\n  if (!(window as any).Beacon) {\n    const gristConfig: GristLoadConfig|undefined = (window as any).gristConfig;\n    const beaconId = gristConfig && gristConfig.helpScoutBeaconId;\n    if (beaconId) {\n      (window as any).Beacon = _beacon;\n      document.head.appendChild(dom('script',\n        {\n          type: 'text/javascript',\n          src: 'https://beacon-v2.helpscout.net',\n          async: true,\n        },\n        // Report when the beacon fails to load so that the user knows something is wrong, and we\n        // have a log of the error. (Note: might not report all failures due to ad-blockers.)\n        dom.on('error', (e) => {\n          reportWarning(\"Support form failed to load. \" +\n            \"Please email support@getgrist.com with questions instead.\");\n        }),\n      ));\n      _beacon('init', beaconId);\n      _beacon('config', {display: {style: \"manual\"}});\n    } else {\n      (window as any).Beacon = () => null;\n      reportWarning(\"Support form is not configured\");\n    }\n  }\n}\n\nlet lastOpenType: 'error' | 'message' = 'message';\nlet lastRoute: BeaconRoute|null = null;\n\n/**\n * Helper to open a beacon, taking care of setting focus appropriately. Calls optional onOpen\n * callback when the beacon has opened.\n * If errors is given, prepares a form for submitting an error report, and includes stack traces\n * into the session-data.\n */\nfunction _beaconOpen(userObj: IUserObj|null, options: IBeaconOpenOptions) {\n  const {onOpen, errors} = options;\n\n  // The beacon remembers its content, so reset it when switching between reporting errors and\n  // sending a message.\n  const openType = errors?.length ? 'error' : 'message';\n  if (openType !== lastOpenType) {\n    Beacon('reset');\n    lastOpenType = openType;\n  }\n\n  const route: BeaconRoute = options.route || (errors?.length ? '/ask/message/' : '/answers/');\n  // If beacon was and still is being opened for help articles, avoid the 'navigate' call\n  // altogether, to keep the beacon at the last article it was on.\n  const skipNav = (route === lastRoute && route === '/answers/');\n  lastRoute = route;\n\n  Beacon('once', 'open', () => {\n    const iframe = document.querySelector('#beacon-container iframe') as HTMLIFrameElement;\n    if (iframe) { iframe.focus(); }\n    if (onOpen) { onOpen(); }\n  });\n  // Fix base-href tag when opening an article.\n  Beacon('once', 'article-viewed', () => fixBeaconBaseHref());\n  // We duplicate this check for 'ready' event, because 'open' and 'article-viewed' events don't\n  // trigger on page reload when a beacon article is already open (seems to be a HelpScout bug).\n  Beacon('once', 'ready', () => fixBeaconBaseHref());\n\n  Beacon('once', 'close', () => {\n    const iframe = document.querySelector('#beacon-container iframe') as HTMLIFrameElement;\n    if (iframe) { iframe.blur(); }\n    Beacon('off', 'article-viewed');\n  });\n  if (userObj) {\n    Beacon('identify', userObj);\n  }\n\n  const attrs: ISessionData = {};\n  if (errors?.length) {\n    // If sending errors, prefill part of the message (the user sees this and can add to it), and\n    // include more detailed errors with stack traces into session-data.\n    const messages = errors.map(({error, timestamp}) =>\n      (timeFormat('T', new Date(timestamp)) + ' ' + error.message));\n    const lastMessage = errors.length > 0 ? errors[errors.length - 1].error.message : '';\n    const prefill: IFormObj = {\n      subject: `Application Error: ${lastMessage}`.slice(0, 250), // subject has max-length of 250\n      text: `\\n-- Include your description above --\\nErrors encountered:\\n${messages.join('\\n')}\\n`,\n    };\n    Beacon('prefill', prefill);\n    Beacon('config', {messaging: {contactForm: {showSubject: false}}});\n\n    errors.forEach(({error, timestamp}, i) => {\n      attrs[`error-${i}`] =  timeFormat('D T', new Date(timestamp)) + ' ' + error.message;\n      if (error.stack) {\n        attrs[`error-${i}-stack`] = JSON.stringify(error.stack.trim().split('\\n'));\n      }\n    });\n  } else {\n    Beacon('config', {messaging: {contactForm: {showSubject: true}}});\n  }\n\n  Beacon('session-data', {\n    'Grist Version': `${version.version} (${version.gitcommit})`,\n    ...attrs,\n  });\n  Beacon('open');\n  if (!skipNav) {\n    Beacon('navigate', route);\n  }\n\n  Beacon('once', 'open', () => logTelemetryEvent('beaconOpen'));\n  Beacon('on', 'article-viewed', (article) => logTelemetryEvent('beaconArticleViewed', {\n    full: {articleId: article!.id},\n  }));\n  Beacon('on', 'email-sent', () => logTelemetryEvent('beaconEmailSent'));\n  Beacon('on', 'search', (search) => logTelemetryEvent('beaconSearch', {\n    full: {searchQuery: search!.query},\n  }));\n}\n\nfunction fixBeaconBaseHref() {\n  // HelpScout creates an iframe with an empty 'src' attribute, then writes to it. In such an\n  // iframe, different browsers interpret relative links differently: Chrome's are relative to\n  // the parent page's URL; Firefox's are relative to the parent page's <base href>.\n  //\n  // Here we set a <base href> explicitly in the iframe to get consistent behavior of links\n  // relative to the top page's URL (HelpScout then seems to handle clicks on them correctly).\n  const iframe = document.querySelector('#beacon-container iframe') as HTMLIFrameElement;\n  const iframeDoc = iframe?.contentDocument;\n  if (iframeDoc && !iframeDoc.querySelector('head > base')) {\n    iframeDoc.head.appendChild(dom('base', {href: ''}));\n  }\n}\n\nexport interface IBeaconOpenOptions {\n  appModel: AppModel|null;\n  includeAppErrors?: boolean;\n  onOpen?: () => void;\n  errors?: IAppError[];\n  route?: BeaconRoute;\n}\n\n/**\n * Open the helpScout beacon to send us a message. Calls optional onOpen callback when the beacon\n * has opened. The topAppModel is used to get the current user.\n *\n * If includeAppErrors or errors is set, the beacon will open to submit an error report. With\n * includeAppErrors, it will include stack traces of errors in the notifier into the session-data.\n * If errors is set, it will include the specified errors.\n */\nexport function beaconOpenMessage(options: IBeaconOpenOptions) {\n  const app = options.appModel;\n  const errors = options.errors || [];\n  if (options.includeAppErrors && app) {\n    errors.push(...app.notifier.getFullAppErrors());\n  }\n  _beaconOpen(getBeaconUserObj(app), {...options, errors});\n}\n\n\nfunction getBeaconUserObj(appModel: AppModel|null): IUserObj|null {\n  if (!appModel) { return null; }\n\n  // ActiveSessionInfo[\"user\"] includes optional helpScoutSignature too.\n  const user = appModel.currentValidUser as ActiveSessionInfo[\"user\"]|null;\n\n  // For anon user, don't attempt to identify anything. Even the \"company\" field (when anon on a\n  // team doc) isn't useful, because the user may be external to the company.\n  if (!user) { return null; }\n\n  // Use the company name only when it's not a personal org. Otherwise, it adds no information and\n  // overrides more useful company name gleaned by HelpScout from the web.\n  const org = appModel.currentOrg;\n  const company = org && !org.owner ? appModel.currentOrgName : undefined;\n\n  return pickBy({\n    name: user.name,\n    email: user.email,\n    company,\n    avatar: user.picture,\n    signature: user.helpScoutSignature,\n  }, identity);\n}\n","import {safeJsonParse} from 'app/common/gutil';\nimport {Observable} from 'grainjs';\nimport {getSessionStorage, getStorage} from 'app/client/lib/storage';\n\nfunction getStorageBoolObs(store: Storage, key: string, defValue: boolean) {\n  const storedNegation = defValue ? 'false' : 'true';\n  const obs = Observable.create(null, store.getItem(key) === storedNegation ? !defValue : defValue);\n  obs.addListener((val) => val === defValue ? store.removeItem(key) : store.setItem(key, storedNegation));\n  return obs;\n}\n\n/**\n * Helper to create a boolean observable whose state is stored in localStorage.\n *\n * Optionally, a default value of true will make the observable start off as true. Note that the\n * same default value should be used for an observable every time it's created.\n */\nexport function localStorageBoolObs(key: string, defValue = false): Observable<boolean> {\n  return getStorageBoolObs(getStorage(), key, defValue);\n}\n\n/**\n * Similar to `localStorageBoolObs`, but always uses sessionStorage (or an in-memory equivalent).\n */\nexport function sessionStorageBoolObs(key: string, defValue = false): Observable<boolean> {\n  return getStorageBoolObs(getSessionStorage(), key, defValue);\n}\n\nfunction getStorageObs(store: Storage, key: string, defaultValue?: string) {\n  const obs = Observable.create<string|null>(null, store.getItem(key) ?? defaultValue ?? null);\n  obs.addListener((val) => (val === null) ? store.removeItem(key) : store.setItem(key, val));\n  return obs;\n}\n\n/**\n * Helper to create a string observable whose state is stored in localStorage.\n */\nexport function localStorageObs(key: string, defaultValue?: string): Observable<string|null> {\n  return getStorageObs(getStorage(), key, defaultValue);\n}\n\n/**\n * Similar to `localStorageObs`, but always uses sessionStorage (or an in-memory equivalent).\n */\nexport function sessionStorageObs(key: string, defaultValue?: string): Observable<string|null> {\n  return getStorageObs(getSessionStorage(), key, defaultValue);\n}\n\n/**\n * Helper to create a JSON observable whose state is stored in localStorage.\n */\n export function localStorageJsonObs<T>(key: string, defaultValue: T): Observable<T> {\n  const store = getStorage();\n  const currentValue = safeJsonParse(store.getItem(key) || '', defaultValue ?? null);\n  const obs = Observable.create<T>(null, currentValue);\n  obs.addListener((val) => (val === null) ? store.removeItem(key) : store.setItem(key, JSON.stringify(val ?? null)));\n  return obs;\n}\n","import {hooks} from 'app/client/Hooks';\nimport {getGristConfig} from 'app/common/urlUtils';\nimport {DomContents} from 'grainjs';\nimport i18next from 'i18next';\nimport {G} from 'grainjs/dist/cjs/lib/browserGlobals';\n\nexport async function setupLocale() {\n  const now = Date.now();\n  const supportedLngs = getGristConfig().supportedLngs ?? ['en'];\n  const lng = detectCurrentLang();\n  const ns = getGristConfig().namespaces ?? ['client'];\n  // Initialize localization plugin\n  try {\n    // We don't await this promise, as it is resolved synchronously due to initImmediate: false.\n    i18next.init({\n      // By default we use english language.\n      fallbackLng: 'en',\n      // We will load resources ourselves.\n      initImmediate: false,\n      // Read language from navigator object.\n      lng,\n      // By default we use client namespace.\n      defaultNS: 'client',\n      // Read namespaces that are supported by the server.\n      // TODO: this can be converted to a dynamic list of namespaces, for async components.\n      // for now just import all what server offers.\n      // We can fallback to client namespace for any addons.\n      fallbackNS: 'client',\n      ns\n    }).catch((err: any) => {\n      // This should not happen, the promise should be resolved synchronously, without\n      // any errors reported.\n      console.error(\"i18next failed unexpectedly\", err);\n    });\n    // Detect what is resolved languages to load.\n    const languages = i18next.languages;\n    // Fetch all json files (all of which should be already preloaded);\n    const loadPath = `${hooks.baseURI || document.baseURI}locales/{{lng}}.{{ns}}.json`;\n    const pathsToLoad: Promise<any>[] = [];\n    async function load(lang: string, n: string) {\n      const resourceUrl = loadPath.replace('{{lng}}', lang.replace(\"-\", \"_\")).replace('{{ns}}', n);\n      const response = await fetch(resourceUrl);\n      if (!response.ok) {\n        // Throw only if we don't have any fallbacks.\n        if (lang === i18next.options.fallbackLng && n === i18next.options.defaultNS) {\n          throw new Error(`Failed to load ${resourceUrl}`);\n        } else {\n          console.warn(`Failed to load ${resourceUrl}`);\n          return;\n        }\n      }\n      i18next.addResourceBundle(lang, n, await response.json());\n    }\n    for (const lang of languages.filter((l) => supportedLngs.includes(l))) {\n      for (const n of ns) {\n        pathsToLoad.push(load(lang, n));\n      }\n    }\n    await Promise.all(pathsToLoad);\n    console.log(\"Localization initialized in \" + (Date.now() - now) + \"ms\");\n  } catch (error: any) {\n    reportError(error);\n  }\n}\n\nexport function detectCurrentLang() {\n  const { userLocale, supportedLngs } = getGristConfig();\n  const detected = userLocale\n    || document.cookie.match(/grist_user_locale=([^;]+)/)?.[1]\n    || window.navigator.language\n    || 'en';\n  const supportedList = supportedLngs ?? ['en'];\n  // If we have this language in the list (or more general version) mark it as selected.\n  // Compare languages in lower case, as navigator.language can return en-US, en-us (for older Safari).\n  const selected = supportedList.find(supported => supported.toLowerCase() === detected.toLowerCase()) ??\n    supportedList.find(supported => supported === detected.split(/[-_]/)[0]) ?? 'en';\n  return selected;\n}\n\nexport function setAnonymousLocale(lng: string) {\n  document.cookie = lng ? `grist_user_locale=${lng}; path=/; max-age=31536000`\n                        : 'grist_user_locale=; path=/; expires=Thu, 01 Jan 1970 00:00:00 UTC';\n}\n\n/**\n * Resolves the translation of the given key using the given options.\n */\nexport function tString(key: string, args?: any, instance = i18next): string {\n  if (!instance.exists(key, args || undefined)) {\n    const error = new Error(`Missing translation for key: ${key} and language: ${i18next.language}`);\n    reportError(error);\n  }\n  return instance.t(key, args);\n}\n\n// We will try to infer result from the arguments passed to `t` function.\n// For plain objects we expect string as a result. If any property doesn't look as a plain value\n// we assume that it might be a dom node and the result is DomContents.\ntype InferResult<T> = T extends Record<string, string | number | boolean>|undefined|null ? string : DomContents;\n\n/**\n * Resolves the translation of the given key and substitutes. Supports dom elements interpolation.\n */\nexport function t<T extends Record<string, any>>(key: string, args?: T|null, instance = i18next): InferResult<T> {\n  return domT(key, args, instance.t);\n}\n\nfunction domT(key: string, args: any, tImpl: typeof i18next.t) {\n  // If there are any DomElements in args, handle it with missingInterpolationHandler.\n  const domElements = !args ? [] : Object.entries(args).filter(([_, value]) => isLikeDomContents(value));\n  if (!args || !domElements.length) {\n    return tImpl(key, args || undefined);\n  } else {\n    // Make a copy of the arguments, and remove any dom elements from it. It will instruct\n    // i18next library to use `missingInterpolationHandler` handler.\n    const copy = {...args};\n    domElements.forEach(([prop]) => delete copy[prop]);\n\n    // Passing `missingInterpolationHandler` will allow as to resolve all missing keys\n    // and replace them with a marker.\n    const result: string = tImpl(key, {...copy, missingInterpolationHandler});\n\n    // Now replace all markers with dom elements passed as arguments.\n    const parts = result.split(/(\\[\\[\\[[^\\]]+?\\]\\]\\])/);\n    for (let i = 1; i < parts.length; i += 2) { // Every second element is our dom element.\n      const propName = parts[i].substring(3, parts[i].length - 3);\n      const domElement = args[propName] ?? `{{${propName}}}`; // If the prop is not there, simulate default behavior.\n      parts[i] = domElement;\n    }\n    return parts.filter(p => p !== '') as any; // Remove empty parts.\n  }\n}\n\n/**\n * Checks if the given key exists in the any supported language.\n */\nexport function hasTranslation(key: string) {\n  return i18next.exists(key);\n}\n\nfunction missingInterpolationHandler(key: string, value: any) {\n  return `[[[${value[1]}]]]`;\n}\n\n/**\n * Very naive detection if an element has DomContents type.\n */\nfunction isLikeDomContents(value: any): boolean {\n  // As null and undefined are valid DomContents values, we don't treat them as such.\n  if (value === null || value === undefined) { return false; }\n  return value instanceof G.Node || // Node\n    (Array.isArray(value) && isLikeDomContents(value[0])) || // DomComputed\n    typeof value === 'function'; // DomMethod\n}\n\n/**\n * Helper function to create a scoped t function. Scoped t function is bounded to a specific\n * namespace and a key prefix (a scope).\n */\nexport function makeT(scope: string, instance?: typeof i18next) {\n  // Can't create the scopedInstance yet as it might not be initialized.\n  let scopedInstance: null|typeof i18next = null;\n  let scopedResolver: null|typeof i18next.t = null;\n  return function<T extends Record<string, any>>(key: string, args?: T|null) {\n    // Create a scoped instance with disabled namespace and nested features.\n    // This enables keys like `key1.key2:key3` to be resolved properly.\n    if (!scopedInstance) {\n      scopedInstance = (instance ?? i18next).cloneInstance({\n        keySeparator: false,\n        nsSeparator: false,\n        saveMissing: true,\n        missingKeyHandler: (lng, ns, _key) => console.warn(`Missing translation for key: ${_key}`)\n      });\n\n      // Create a version of `t` function that will use the provided prefix as default.\n      const fixedResolver = scopedInstance.getFixedT(null, null, scope);\n\n      // Override the resolver with a custom one, that will use the argument as a default.\n      // This will remove all the overloads from the function, but we don't need them.\n      scopedResolver = (_key: string, _args?: any) => fixedResolver(_key, {defaultValue: _key, ..._args});\n    }\n    return domT(key, args, scopedResolver!);\n  };\n}\n","/**\n * Client-side debug logging.\n * At the moment this simply logs to the browser console, but it's still useful to have dedicated\n * methods to allow collecting them in the future, or silencing them in production or in mocha\n * tests.\n */\n\nexport type LogMethod = (message: string, ...args: any[]) => void;\n\n// tslint:disable:no-console\nexport const debug: LogMethod = console.debug.bind(console);\nexport const info: LogMethod = console.info.bind(console);\nexport const log: LogMethod = console.log.bind(console);\nexport const warn: LogMethod = console.warn.bind(console);\nexport const error: LogMethod = console.error.bind(console);\n","import {IDisposableOwner, Observable} from 'grainjs';\n\nexport interface PausableObservable<T> extends Observable<T> {\n  pause(shouldPause?: boolean): void;\n}\n\n/**\n * Creates and returns an `Observable` that can be paused, effectively causing all\n * calls to `set` to become noops until unpaused, at which point the last value\n * passed to set, if any, will be applied.\n *\n * NOTE: It's only advisable to use this when there are no other alternatives; pausing\n * updates and notifications to subscribers increases the chances of introducing bugs.\n */\nexport function createPausableObs<T>(\n  owner: IDisposableOwner|null,\n  value: T,\n): PausableObservable<T> {\n  let _isPaused = false;\n  let _lastValue: T | undefined = undefined;\n  const obs = Observable.create<T>(owner, value);\n  const set = Symbol('set');\n  return Object.assign(obs, {\n    pause(shouldPause: boolean = true) {\n      _isPaused = shouldPause;\n      if (shouldPause) {\n        _lastValue = undefined;\n      } else if (_lastValue) {\n        obs.set(_lastValue);\n        _lastValue = undefined;\n      }\n    },\n    [set]: obs.set,\n    set(val: T) {\n      _lastValue = val;\n      if (_isPaused) { return; }\n\n      this[set](val);\n    }\n  });\n}\n","/**\n * Expose localStorage and sessionStorage with fallbacks for cases when they don't work (e.g.\n * cross-domain embeds in Firefox and Safari).\n *\n * Usage:\n *    import {getStorage, getSessionStorage} from 'app/client/lib/storage';\n *    ... use getStorage() in place of localStorage...\n *    ... use getSessionStorage() in place of sessionStorage...\n */\n\n/**\n * Returns localStorage if functional, or sessionStorage, or an in-memory storage. The fallbacks\n * help with tests, and when Grist is embedded.\n */\nexport function getStorage(): Storage {\n  _storage ??= testStorage('localStorage') || getSessionStorage();\n  return _storage;\n}\n\n/**\n * Return window.sessionStorage, or when not available, an in-memory storage.\n */\nexport function getSessionStorage(): Storage {\n  // If can't use sessionStorage, fall back to a Map-based non-persistent implementation.\n  _sessionStorage ??= testStorage('sessionStorage') || createInMemoryStorage();\n  return _sessionStorage;\n}\n\n\nlet _storage: Storage|undefined;\nlet _sessionStorage: Storage|undefined;\n\n/**\n * Returns the result of window[storageName] if storage is functional, or null otherwise. In some\n * cases (e.g. when embedded), using localStorage may throw errors, in which case we return null.\n * This is similar to the approach taken by store.js.\n */\nfunction testStorage(storageName: 'localStorage'|'sessionStorage'): Storage|null {\n  try {\n    const testStr = '__localStorage_test';\n    const storage = window[storageName];\n    storage.setItem(testStr, testStr);\n    const ok = (storage.getItem(testStr) === testStr);\n    storage.removeItem(testStr);\n    if (ok) {\n      return storage;\n    }\n  } catch (e) {\n    // Fall through\n  }\n  console.warn(`${storageName} is not available; will use fallback`);\n  return null;\n}\n\nfunction createInMemoryStorage(): Storage {\n  const values = new Map<string, string>();\n  return {\n    setItem(key: string, val: string) { values.set(key, val); },\n    getItem(key: string) { return values.get(key) ?? null; },\n    removeItem(key: string) { values.delete(key); },\n    clear() { values.clear(); },\n    get length() { return values.size; },\n    key(index: number): string|null { throw new Error('Not implemented'); },\n  };\n}\n","import {logError} from 'app/client/models/errors';\nimport {Level, TelemetryContracts, TelemetryEvent, TelemetryMetadataByLevel} from 'app/common/Telemetry';\nimport {fetchFromHome, getGristConfig, pageHasHome} from 'app/common/urlUtils';\n\nexport function logTelemetryEvent(event: TelemetryEvent, metadata?: TelemetryMetadataByLevel) {\n  if (!pageHasHome()) { return; }\n\n  const {telemetry} = getGristConfig();\n  if (!telemetry) { return; }\n\n  const {telemetryLevel} = telemetry;\n  if (Level[telemetryLevel] < TelemetryContracts[event].minimumTelemetryLevel) { return; }\n\n  fetchFromHome('/api/telemetry', {\n    method: 'POST',\n    body: JSON.stringify({\n      event,\n      metadata,\n    }),\n    credentials: 'include',\n    headers: {\n      'Content-Type': 'application/json',\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  }).catch((e: Error) => {\n    console.warn(`Failed to log telemetry event ${event}`, e);\n    logError(e);\n  });\n}\n","// There are many regex for matching URL, but non seem to be the correct solution.\n// Here we will use very fast and simple one.\n// Tested most of the regex solutions mentioned in this post\n// https://stackoverflow.com/questions/37684/how-to-replace-plain-urls-with-links.\n// The best one was http://alexcorvi.github.io/anchorme.js/, which still wasn't perfect.\n// The best non regex solution was https://github.com/Hypercontext/linkifyjs, but it feels a little too heavy.\n// Some examples why this is better or worse from other solution:\n/**\n\nFor 'http://www.uk,http://www.uk'\n'OurRegex' [ 'http://www.uk', 'http://www.uk' ]\n'Anchrome' [ 'http://www.uk,http://www.uk' ]\n'linkify' [ 'http://www.uk,http://www.uk' ]\n'url-regex' [ 'http://www.uk', 'http://www.uk' ]\n\nFor 'might.it be a link'\n'OurRegex' []\n'Anchrome' [ 'might.it' ]\n'linkify' [ 'http://might.it' ]\n'url-regex' []\n\nFor 'Is this correct.No it is not'\n'OurRegex' []\n'Anchrome' [ 'correct.No' ]\n'linkify' [ 'http://correct.No' ]\n'url-regex' []\n\nFor 'Link (in http://www.uk?)'\n'OurRegex' [ 'http://www.uk' ]\n'Anchrome' [ 'http://www.uk' ]\n'linkify' [ 'http://www.uk' ]\n'url-regex' [ 'http://www.uk?)' ]\n*/\n\n// Match http or https then domain name (with optional port) then any text that ends with letter or number.\nexport const urlRegex = /(https?:\\/\\/[A-Za-z\\d][A-Za-z\\d-.]*(?!\\.)(?::\\d+)?(?:\\/[^\\s]*)?[\\w\\d/])/;\n\n/**\n * Detects URLs in a text and returns list of tokens { value, isLink }\n */\nexport function findLinks(text: string): Array<{value: string, isLink: boolean}> {\n  if (!text) {\n    return [{ value: text, isLink: false }];\n  }\n  // urls will be at odd-number indices\n  return text.split(urlRegex).map((value, i) => ({ value, isLink : (i % 2) === 1}));\n}\n\n/**\n * Based on https://stackoverflow.com/a/22429679/2482744\n * -----------------------------------------------------\n * Calculate a 32 bit FNV-1a hash\n * Found here: https://gist.github.com/vaiorabbit/5657561\n * Ref.: http://isthe.com/chongo/tech/comp/fnv/\n */\nexport function hashFnv32a(str: string): string {\n  let hval = 0x811c9dc5;\n  for (let i = 0; i < str.length; i++) {\n    hval ^= str.charCodeAt(i);\n    hval += (hval << 1) + (hval << 4) + (hval << 7) + (hval << 8) + (hval << 24);\n  }\n  // Convert to 8 digit hex string\n  return (\"0000000\" + (hval >>> 0).toString(16)).substr(-8);\n}\n\n/**\n * A poor man's hash for when proper crypto isn't worth it.\n */\nexport function simpleStringHash(str: string) {\n  let result = '';\n  // Crudely convert 32 bits to 128 bits to reduce collisions\n  for (let i = 0; i < 4; i++) {\n    result += hashFnv32a(result + str);\n  }\n  return result;\n}\n","import {BehavioralPromptsManager} from 'app/client/components/BehavioralPromptsManager';\nimport {hooks} from 'app/client/Hooks';\nimport {get as getBrowserGlobals} from 'app/client/lib/browserGlobals';\nimport {makeT} from 'app/client/lib/localization';\nimport {sessionStorageObs} from 'app/client/lib/localStorageObs';\nimport {error} from 'app/client/lib/log';\nimport {reportError, setErrorNotifier} from 'app/client/models/errors';\nimport {urlState} from 'app/client/models/gristUrlState';\nimport {Notifier} from 'app/client/models/NotifyModel';\nimport {getFlavor, ProductFlavor} from 'app/client/ui/CustomThemes';\nimport {buildNewSiteModal, buildUpgradeModal} from 'app/client/ui/ProductUpgrades';\nimport {SupportGristNudge} from 'app/client/ui/SupportGristNudge';\nimport {attachCssThemeVars, prefersDarkModeObs} from 'app/client/ui2018/cssVars';\nimport {OrgUsageSummary} from 'app/common/DocUsage';\nimport {Features, isLegacyPlan, Product} from 'app/common/Features';\nimport {GristLoadConfig, IGristUrlState} from 'app/common/gristUrls';\nimport {FullUser} from 'app/common/LoginSessionAPI';\nimport {LocalPlugin} from 'app/common/plugin';\nimport {DismissedPopup, DismissedReminder, UserPrefs} from 'app/common/Prefs';\nimport {isOwner, isOwnerOrEditor} from 'app/common/roles';\nimport {getTagManagerScript} from 'app/common/tagManager';\nimport {getDefaultThemePrefs, Theme, ThemeColors, ThemePrefs,\n        ThemePrefsChecker} from 'app/common/ThemePrefs';\nimport {getThemeColors} from 'app/common/Themes';\nimport {getGristConfig} from 'app/common/urlUtils';\nimport {getOrgName, isTemplatesOrg, Organization, OrgError, UserAPI, UserAPIImpl} from 'app/common/UserAPI';\nimport {getUserPrefObs, getUserPrefsObs, markAsSeen, markAsUnSeen} from 'app/client/models/UserPrefs';\nimport {bundleChanges, Computed, Disposable, Observable, subscribe} from 'grainjs';\n\nconst t = makeT('AppModel');\n\n// Reexported for convenience.\nexport {reportError} from 'app/client/models/errors';\n\nexport type PageType =\n  | \"doc\"\n  | \"home\"\n  | \"billing\"\n  | \"welcome\"\n  | \"account\"\n  | \"support-grist\"\n  | \"activation\";\n\nconst G = getBrowserGlobals('document', 'window');\n\n// TopAppModel is the part of the app model that persists across org and user switches.\nexport interface TopAppModel {\n  api: UserAPI;\n  isSingleOrg: boolean;\n  productFlavor: ProductFlavor;\n  currentSubdomain: Observable<string|undefined>;\n\n  notifier: Notifier;\n  plugins: LocalPlugin[];\n\n  // Everything else gets fully rebuilt when the org/user changes. This is to ensure that\n  // different parts of the code aren't using different users/orgs while the switch is pending.\n  appObs: Observable<AppModel|null>;\n\n  orgs: Observable<Organization[]>;\n  users: Observable<FullUser[]>;\n\n  // Reinitialize the app. This is called when org or user changes.\n  initialize(): void;\n\n  // Rebuilds the AppModel and consequently the AppUI, without changing the user or the org.\n  reload(): void;\n\n  /**\n   * Returns the UntrustedContentOrigin use settings. Throws if not defined.\n   */\n  getUntrustedContentOrigin(): string;\n  /**\n   * Reloads orgs and accounts for current user.\n   */\n  fetchUsersAndOrgs(): Promise<void>;\n}\n\n/**\n * AppModel is specific to the currently loaded organization and active user. It gets rebuilt when\n * we switch the current organization or the current user.\n */\nexport interface AppModel {\n  topAppModel: TopAppModel;\n  api: UserAPI;\n\n  currentUser: FullUser|null;\n  currentValidUser: FullUser|null;      // Like currentUser, but null when anonymous\n\n  currentOrg: Organization|null;        // null if no access to currentSubdomain\n  currentOrgName: string;               // Our best guess for human-friendly name.\n  currentOrgUsage: Observable<OrgUsageSummary|null>;\n  isPersonal: boolean;                  // Is it a personal site?\n  isTeamSite: boolean;                  // Is it a team site?\n  isLegacySite: boolean;                // Is it a legacy site?\n  isTemplatesSite: boolean;             // Is it the templates site?\n  orgError?: OrgError;                  // If currentOrg is null, the error that caused it.\n  lastVisitedOrgDomain: Observable<string|null>;\n\n  currentProduct: Product|null;         // The current org's product.\n  currentFeatures: Features;            // Features of the current org's product.\n\n  userPrefsObs: Observable<UserPrefs>;\n  themePrefs: Observable<ThemePrefs>;\n  currentTheme: Computed<Theme>;\n  /**\n   * Popups that user has seen.\n   */\n  dismissedPopups: Observable<DismissedPopup[]>;\n  dismissedWelcomePopups: Observable<DismissedReminder[]>;\n\n  pageType: Observable<PageType>;\n  needsOrg: Observable<boolean>;\n\n  notifier: Notifier;\n  planName: string|null;\n\n  behavioralPromptsManager: BehavioralPromptsManager;\n\n  supportGristNudge: SupportGristNudge;\n\n  refreshOrgUsage(): Promise<void>;\n  showUpgradeModal(): void;\n  showNewSiteModal(): void;\n  isBillingManager(): boolean;          // If user is a billing manager for this org\n  isSupport(): boolean;                 // If user is a Support user\n  isOwner(): boolean;                   // If user is an owner of this org\n  isOwnerOrEditor(): boolean;           // If user is an owner or editor of this org\n  /** Creates an computed observable to dismiss a popup or check if it was dismissed */\n  dismissedPopup(name: DismissedPopup): Observable<boolean>;\n}\n\nexport class TopAppModelImpl extends Disposable implements TopAppModel {\n  public readonly isSingleOrg: boolean;\n  public readonly productFlavor: ProductFlavor;\n\n  public readonly currentSubdomain = Computed.create(this, urlState().state, (use, s) => s.org);\n  public readonly notifier = Notifier.create(this);\n  public readonly appObs = Observable.create<AppModel|null>(this, null);\n  public readonly orgs = Observable.create<Organization[]>(this, []);\n  public readonly users = Observable.create<FullUser[]>(this, []);\n  public readonly plugins: LocalPlugin[] = [];\n  private readonly _gristConfig?: GristLoadConfig;\n\n  constructor(\n    window: {gristConfig?: GristLoadConfig},\n    public readonly api: UserAPI = newUserAPIImpl(),\n  ) {\n    super();\n    setErrorNotifier(this.notifier);\n    this.isSingleOrg = Boolean(window.gristConfig && window.gristConfig.singleOrg);\n    this.productFlavor = getFlavor(window.gristConfig && window.gristConfig.org);\n    this._gristConfig = window.gristConfig;\n\n    // Initially, and on any change to subdomain, call initialize() to get the full Organization\n    // and the FullUser to use for it (the user may change when switching orgs).\n    this.autoDispose(subscribe(this.currentSubdomain, (use) => this.initialize()));\n    this.plugins = this._gristConfig?.plugins || [];\n\n    this.fetchUsersAndOrgs().catch(reportError);\n  }\n\n  public initialize(): void {\n    this._doInitialize().catch(reportError);\n  }\n\n  // Rebuilds the AppModel and consequently the AppUI, etc, without changing the user or the org.\n  public reload(): void {\n    const app = this.appObs.get();\n    if (app) {\n      const {currentUser, currentOrg, orgError} = app;\n      AppModelImpl.create(this.appObs, this, currentUser, currentOrg, orgError);\n    }\n  }\n\n  public getUntrustedContentOrigin() {\n    if (G.window.isRunningUnderElectron) {\n      // when loaded within webviews it is safe to serve plugin's content from the same domain\n      return \"\";\n    }\n\n    const origin =  this._gristConfig?.pluginUrl;\n    if (!origin) {\n      throw new Error(\"Missing untrustedContentOrigin configuration\");\n    }\n    if (origin.match(/:[0-9]+$/)) {\n      // Port number already specified, no need to add.\n      return origin;\n    }\n    return origin + \":\" + G.window.location.port;\n  }\n\n  public async fetchUsersAndOrgs() {\n    const data = await this.api.getSessionAll();\n    if (this.isDisposed()) { return; }\n    bundleChanges(() => {\n      this.users.set(data.users);\n      this.orgs.set(data.orgs);\n    });\n  }\n\n  private async _doInitialize() {\n    this.appObs.set(null);\n    try {\n      const {user, org, orgError} = await this.api.getSessionActive();\n      if (this.isDisposed()) { return; }\n      if (org) {\n        // Check that our domain matches what the api returns.\n        const state = urlState().state.get();\n        if (state.org !== org.domain && org.domain !== null) {\n          // If not, redirect.  This is to allow vanity domains\n          // to \"stick\" only if paid for.\n          await urlState().pushUrl({...state, org: org.domain});\n        }\n        if (org.billingAccount && org.billingAccount.product &&\n            org.billingAccount.product.name === 'suspended') {\n          this.notifier.createUserMessage(\n            t(\"This team site is suspended. Documents can be read, but not modified.\"),\n            {actions: ['renew', 'personal']}\n          );\n        }\n      }\n      AppModelImpl.create(this.appObs, this, user, org, orgError);\n    } catch (err) {\n      // tslint:disable-next-line:no-console\n      console.log(`getSessionActive() failed: ${err}`);\n      if (this.isDisposed()) { return; }\n      AppModelImpl.create(this.appObs, this, null, null, {error: err.message, status: err.status || 500});\n    }\n  }\n}\n\nexport class AppModelImpl extends Disposable implements AppModel {\n  public readonly api: UserAPI = this.topAppModel.api;\n\n  // Compute currentValidUser, turning anonymous into null.\n  public readonly currentValidUser: FullUser|null =\n    this.currentUser && !this.currentUser.anonymous ? this.currentUser : null;\n\n  // Figure out the org name, or blank if details are unavailable.\n  public readonly currentOrgName = getOrgNameOrGuest(this.currentOrg, this.currentUser);\n\n  public readonly currentOrgUsage: Observable<OrgUsageSummary|null> = Observable.create(this, null);\n\n  public readonly lastVisitedOrgDomain = this.autoDispose(sessionStorageObs('grist-last-visited-org-domain'));\n\n  public readonly currentProduct = this.currentOrg?.billingAccount?.product ?? null;\n  public readonly currentFeatures = this.currentProduct?.features ?? {};\n\n  public readonly isPersonal = Boolean(this.currentOrg?.owner);\n  public readonly isTeamSite = Boolean(this.currentOrg) && !this.isPersonal;\n  public readonly isLegacySite = Boolean(this.currentProduct && isLegacyPlan(this.currentProduct.name));\n  public readonly isTemplatesSite = isTemplatesOrg(this.currentOrg);\n\n  public readonly userPrefsObs = getUserPrefsObs(this);\n  public readonly themePrefs = getUserPrefObs(this.userPrefsObs, 'theme', {\n    defaultValue: getDefaultThemePrefs(),\n    checker: ThemePrefsChecker,\n  }) as Observable<ThemePrefs>;\n  public readonly currentTheme = this._getCurrentThemeObs();\n\n  public readonly dismissedPopups = getUserPrefObs(this.userPrefsObs, 'dismissedPopups',\n    { defaultValue: [] }) as Observable<DismissedPopup[]>;\n  public readonly dismissedWelcomePopups = getUserPrefObs(this.userPrefsObs, 'dismissedWelcomePopups',\n    { defaultValue: [] }) as Observable<DismissedReminder[]>;\n\n  // Get the current PageType from the URL.\n  public readonly pageType: Observable<PageType> = Computed.create(this, urlState().state,\n    (_use, state) => {\n      if (state.doc) {\n        return 'doc';\n      } else if (state.billing) {\n        return 'billing';\n      } else if (state.welcome) {\n        return 'welcome';\n      } else if (state.account) {\n        return 'account';\n      } else if (state.supportGrist) {\n        return 'support-grist';\n      } else if (state.activation) {\n        return 'activation';\n      } else {\n        return 'home';\n      }\n    });\n\n  public readonly needsOrg: Observable<boolean> = Computed.create(\n    this, urlState().state, (use, state) => {\n      return !(\n        Boolean(state.welcome) ||\n        state.billing === 'scheduled' ||\n        Boolean(state.account) ||\n        Boolean(state.activation) ||\n        Boolean(state.supportGrist)\n      );\n    });\n\n  public readonly notifier = this.topAppModel.notifier;\n\n  public readonly behavioralPromptsManager: BehavioralPromptsManager =\n    BehavioralPromptsManager.create(this, this);\n\n  public readonly supportGristNudge: SupportGristNudge = SupportGristNudge.create(this, this);\n\n  constructor(\n    public readonly topAppModel: TopAppModel,\n    public readonly currentUser: FullUser|null,\n    public readonly currentOrg: Organization|null,\n    public readonly orgError?: OrgError,\n  ) {\n    super();\n\n    this._applyTheme();\n    this.autoDispose(this.currentTheme.addListener(() => this._applyTheme()));\n\n    this._recordSignUpIfIsNewUser();\n\n    const state = urlState().state.get();\n    if (state.createTeam) {\n      // Remove params from the URL.\n      urlState().pushUrl({createTeam: false, params: {}}, {avoidReload: true, replace: true}).catch(() => {});\n      this.showNewSiteModal(state.params?.planType);\n    }\n\n    G.window.resetDismissedPopups = (seen = false) => {\n      this.dismissedPopups.set(seen ? DismissedPopup.values : []);\n      this.behavioralPromptsManager.reset();\n    };\n\n    this.autoDispose(subscribe(urlState().state, this.topAppModel.orgs, async (_use, s, orgs) => {\n      this._updateLastVisitedOrgDomain(s, orgs);\n    }));\n  }\n\n  public get planName() {\n    return this.currentProduct?.name ?? null;\n  }\n\n  public async showUpgradeModal() {\n    if (this.planName && this.currentOrg) {\n      if (this.isPersonal) {\n        this.showNewSiteModal();\n      } else if (this.isTeamSite) {\n        buildUpgradeModal(this, this.planName);\n      } else {\n        throw new Error(\"Unexpected state\");\n      }\n    }\n  }\n\n  public showNewSiteModal(selectedPlan?: string) {\n    if (this.planName) {\n      buildNewSiteModal(this, {\n        planName: this.planName,\n        selectedPlan,\n        onCreate: () => this.topAppModel.fetchUsersAndOrgs().catch(reportError)\n      });\n    }\n  }\n\n  public isSupport() {\n    return Boolean(this.currentValidUser?.isSupport);\n  }\n\n  public isBillingManager() {\n    return Boolean(this.currentOrg?.billingAccount?.isManager);\n  }\n\n  public isOwner() {\n    return Boolean(this.currentOrg && isOwner(this.currentOrg));\n  }\n\n  public isOwnerOrEditor() {\n    return Boolean(this.currentOrg && isOwnerOrEditor(this.currentOrg));\n  }\n\n  /**\n   * Fetch and update the current org's usage.\n   */\n  public async refreshOrgUsage() {\n    if (!this.isOwner()) {\n      // Note: getOrgUsageSummary already checks for owner access; we do an early return\n      // here to skip making unnecessary API calls.\n      return;\n    }\n\n    const usage = await this.api.getOrgUsageSummary(this.currentOrg!.id);\n    if (!this.isDisposed()) {\n      this.currentOrgUsage.set(usage);\n    }\n  }\n\n  public dismissedPopup(name: DismissedPopup): Computed<boolean> {\n    const computed = Computed.create(null, use => use(this.dismissedPopups).includes(name));\n    computed.onWrite(value => {\n      if (value) {\n        markAsSeen(this.dismissedPopups, name);\n      } else {\n        markAsUnSeen(this.dismissedPopups, name);\n      }\n    });\n    return computed;\n  }\n\n  private _updateLastVisitedOrgDomain({doc, org}: IGristUrlState, availableOrgs: Organization[]) {\n    if (\n      !org ||\n      // Invalid or inaccessible sites shouldn't be counted as visited.\n      !this.currentOrg ||\n      // Visits to a document shouldn't be counted either.\n      doc\n    ) {\n      return;\n    }\n\n    // Only count sites that a user has access to (i.e. those listed in the Site Switcher).\n    if (!availableOrgs.some(({domain}) => domain === org)) { return; }\n\n    this.lastVisitedOrgDomain.set(org);\n  }\n\n  /**\n   * If the current user is a new user, record a sign-up event via Google Tag Manager.\n   */\n  private _recordSignUpIfIsNewUser() {\n    const isNewUser = this.userPrefsObs.get().recordSignUpEvent;\n    if (!isNewUser) { return; }\n\n    // If Google Tag Manager isn't configured, don't record anything.\n    const {tagManagerId} = getGristConfig();\n    if (!tagManagerId) { return; }\n\n    let dataLayer = (window as any).dataLayer;\n    if (!dataLayer) {\n      // Load the Google Tag Manager script into the document.\n      const script = document.createElement('script');\n      script.innerHTML = getTagManagerScript(tagManagerId);\n      document.head.appendChild(script);\n      dataLayer = (window as any).dataLayer;\n      if (!dataLayer) {\n        error(`_recordSignUpIfIsNewUser() failed to load Google Tag Manager`);\n      }\n    }\n\n    // Send the sign-up event, and remove the recordSignUpEvent flag from preferences.\n    dataLayer.push({event: 'new-sign-up'});\n    getUserPrefObs(this.userPrefsObs, 'recordSignUpEvent').set(undefined);\n  }\n\n  private _getCurrentThemeObs() {\n    return Computed.create(this, this.themePrefs, prefersDarkModeObs(),\n      (_use, themePrefs, prefersDarkMode) => {\n        let {appearance, syncWithOS} = themePrefs;\n\n        const urlParams = urlState().state.get().params;\n        if (urlParams?.themeAppearance) {\n          appearance = urlParams?.themeAppearance;\n        }\n\n        if (urlParams?.themeSyncWithOs !== undefined) {\n          syncWithOS = urlParams?.themeSyncWithOs;\n        }\n\n        if (syncWithOS) {\n          appearance = prefersDarkMode ? 'dark' : 'light';\n        }\n\n        let nameOrColors = themePrefs.colors[appearance];\n        if (urlParams?.themeName) {\n          nameOrColors = urlParams?.themeName;\n        }\n\n        let colors: ThemeColors;\n        if (typeof nameOrColors === 'string') {\n          colors = getThemeColors(nameOrColors);\n        } else {\n          colors = nameOrColors;\n        }\n\n        return {appearance, colors};\n      },\n    );\n  }\n\n  /**\n   * Applies a theme based on the user's current theme preferences.\n   */\n  private _applyTheme() {\n    // Custom CSS is incompatible with custom themes.\n    if (getGristConfig().enableCustomCss) { return; }\n\n    attachCssThemeVars(this.currentTheme.get());\n  }\n}\n\nexport function getHomeUrl(): string {\n  const {host, protocol} = window.location;\n  const gristConfig: any = (window as any).gristConfig;\n  return (gristConfig && gristConfig.homeUrl) || `${protocol}//${host}`;\n}\n\nexport function newUserAPIImpl(): UserAPIImpl {\n  return new UserAPIImpl(getHomeUrl(), {\n    fetch: hooks.fetch,\n  });\n}\n\nexport function getOrgNameOrGuest(org: Organization|null, user: FullUser|null) {\n  if (!org) { return ''; }\n  if (user && user.anonymous && org.owner && org.owner.id === user.id) {\n    return \"@Guest\";\n  }\n  return getOrgName(org);\n}\n","/**\n * The ConnectStateManager helper class helps maintain the connection state. A disconnect goes\n * through multiple stages, to inform the user of long disconnects while minimizing the disruption\n * for short ones. This class manages these timings, and triggers ConnectState changes.\n */\nimport {Disposable, Observable} from 'grainjs';\n\n// Describes the connection state, which is shown as part of the notifications UI.\n// See https://grist.quip.com/X92IAHZV3uoo/Notifications\nexport enum ConnectState { Connected, JustDisconnected, RecentlyDisconnected, ReallyDisconnected }\n\nexport class ConnectStateManager extends Disposable {\n  // On disconnect, ConnectState changes to JustDisconnected. These intervals set how long after\n  // the disconnect ConnectState should change to other values.\n  public static timeToRecentlyDisconnected = 5000;\n  public static timeToReallyDisconnected = 30000;\n\n  public readonly connectState = Observable.create<ConnectState>(this, ConnectState.Connected);\n\n  private _timers: Array<ReturnType<typeof setTimeout>> = [];\n\n  public setConnected(yesNo: boolean) {\n    if (yesNo) {\n      this._timers.forEach((t) => clearTimeout(t));\n      this._timers = [];\n      this._setState(ConnectState.Connected);\n    } else if (this.connectState.get() === ConnectState.Connected) {\n      this._timers = [\n        setTimeout(() => this._setState(ConnectState.RecentlyDisconnected),\n                   ConnectStateManager.timeToRecentlyDisconnected),\n        setTimeout(() => this._setState(ConnectState.ReallyDisconnected),\n                   ConnectStateManager.timeToReallyDisconnected),\n      ];\n      this._setState(ConnectState.JustDisconnected);\n    }\n  }\n\n  private _setState(state: ConnectState) {\n    this.connectState.set(state);\n  }\n}\n","import * as log from 'app/client/lib/log';\nimport {ConnectState, ConnectStateManager} from 'app/client/models/ConnectState';\nimport {isNarrowScreenObs, testId} from 'app/client/ui2018/cssVars';\nimport {delay} from 'app/common/delay';\nimport {isLongerThan} from 'app/common/gutil';\nimport {InactivityTimer} from 'app/common/InactivityTimer';\nimport {timeFormat} from 'app/common/timeFormat';\nimport {\n  bundleChanges,\n  Computed,\n  Disposable,\n  dom,\n  DomElementArg,\n  Holder,\n  IDisposable,\n  IDisposableOwner,\n  MutableObsArray,\n  obsArray,\n  Observable\n} from 'grainjs';\nimport clamp = require('lodash/clamp');\nimport defaults = require('lodash/defaults');\n\n// When rendering app errors, we'll only show the last few.\nconst maxAppErrors = 5;\n\ninterface INotifier {\n  createUserMessage(message: string, options?: INotifyOptions): INotification;\n  // If you are looking to report errors, please do that via reportError rather\n  // than these methods so that we have a chance to send the error to our logs.\n  createAppError(error: Error): void;\n\n  createProgressIndicator(name: string, size: string, expireOnComplete: boolean): IProgress;\n  createNotification(options: INotifyOptions): INotification;\n  setConnectState(isConnected: boolean): void;\n  slowNotification<T>(promise: Promise<T>, optTimeout?: number): Promise<T>;\n  getFullAppErrors(): IAppError[];\n}\n\nexport interface INotification extends Expirable {\n  expire(): Promise<void>;\n}\n\nexport interface IProgress extends Expirable {\n  setProgress(percent: number): void;\n}\n\n/**\n * Custom action to be shown as a notification with a handler.\n */\nexport interface CustomAction { label: string, action: () => void }\n/**\n * A string, or a function that builds dom.\n */\nexport type MessageType = string | (() => DomElementArg);\n// Identifies supported actions. These are implemented in NotifyUI.\nexport type NotifyAction = 'upgrade' | 'renew' | 'personal' | 'report-problem'\n                           | 'ask-for-help' | 'manage' | CustomAction;\nexport interface INotifyOptions {\n  message: MessageType;     // A string, or a function that builds dom.\n  timestamp?: number;\n  title?: string;\n  canUserClose?: boolean;\n  inToast?: boolean;\n  inDropdown?: boolean;\n  expireSec?: number;\n  badgeCounter?: boolean;\n  level: 'message' | 'info' | 'success' | 'warning' | 'error';\n\n  memos?: string[];  // A list of relevant notes.\n\n  // cssToastAction class from NotifyUI will be applied automatically to action elements.\n  actions?: NotifyAction[];\n\n  // When set, the notification will replace any previous notification with the same key.\n  // This way, we can avoid accumulating many of substantially identical notifications.\n  key?: string|null;\n}\n\ntype Status = 'active' | 'expiring';\n\nexport class Expirable extends Disposable {\n  public static readonly fadeDelay = 250;\n  public readonly status = Observable.create<Status>(this, 'active');\n\n  constructor() {\n    super();\n  }\n\n  /**\n   * Sets status to 'expiring', then calls dispose after a short delay.\n   */\n  public async expire(withoutDelay: boolean = false): Promise<void> {\n    this.status.set('expiring');\n    if(!withoutDelay) {\n      await delay(Expirable.fadeDelay);\n    }\n    if (!this.isDisposed()) {\n      this.dispose();\n    }\n  }\n}\n\nexport class Notification extends Expirable implements INotification {\n\n  public options: Required<INotifyOptions> = {\n    title: '',\n    message: '',\n    timestamp: Date.now(),\n    inDropdown: false,\n    badgeCounter: false,\n    inToast: true,\n    expireSec: 0,\n    canUserClose: false,\n    actions: [],\n    memos: [],\n    key: null,\n    level: 'message'\n  };\n\n  constructor(_opts: INotifyOptions) {\n    super();\n    this.options = defaults({}, _opts, this.options);\n\n    if (this.options.expireSec > 0) {\n      const expireTimer = setTimeout(() => this.expire(), 1000 * this.options.expireSec);\n      this.onDispose(() => clearTimeout(expireTimer));\n    }\n  }\n}\n\ninterface IProgressOptions {\n  name: string;\n  size: string;\n  expireOnComplete?: boolean;\n}\n\nexport class Progress extends Expirable implements IProgress {\n\n  public readonly progress = Observable.create(this, 0);\n\n  constructor(public options: IProgressOptions) {\n    super();\n\n    if (options.expireOnComplete) {\n      this.autoDispose(this.progress.addListener(async progress => {\n        if (progress >= 100) {\n          await this.expire();\n        }\n      }));\n    }\n  }\n\n  /**\n   * progress should be between 0 and 100.\n   */\n  public setProgress(progress: number) {\n    this.progress.set(clamp(progress, 0, 100));\n  }\n}\n\n/**\n * Similar to grainjs MultiHolder, but knows when items are disposed externally and releases them\n * (avoiding the \"already disposed\" warnings in that case). This is probably how grainjs's\n * MultiHolder should actually work, and maybe how `Disposable.autoDispose` should generally work.\n */\nexport class BetterMultiHolder implements IDisposableOwner {\n  private _items = new Set<IDisposable>();\n\n  public autoDispose<T extends IDisposable>(obj: T): T {\n    this._items.add(obj);\n    if (obj instanceof Disposable) {\n      obj.onDispose(() => this._items.delete(obj));\n    }\n    return obj;\n  }\n\n  public dispose() {\n    for (const item of this._items) {\n      item.dispose();\n    }\n    this._items.clear();\n  }\n}\n\nexport interface IAppError {\n  error: Error;\n  timestamp: number;\n  seen?: boolean;       // If seen, this will be hidden from the \"app errors\" toast\n}\n\nexport class Notifier extends Disposable implements INotifier {\n  private _itemsHolder = this.autoDispose(new BetterMultiHolder());\n\n  private _toasts = this.autoDispose(obsArray<Notification>());\n  private _dropdownItems = this.autoDispose(obsArray<Notification>());\n  private _progressItems = this.autoDispose(obsArray<Progress>([]));\n  private _keyedItems = new Map<string, Notification>();\n\n  private _connectStateManager = ConnectStateManager.create(this);\n  private _connectState = this._connectStateManager.connectState;\n  private _disconnectMsg = Computed.create(this, (use) => getDisconnectMessage(use(this._connectState)));\n\n  // Holds recent application errors, which the user may report to us.\n  private _appErrorList = this.autoDispose(obsArray<IAppError>());\n\n  // The dropdown will show all recent errors; the toast only the \"new\" ones, i.e. those since the\n  // last toast was closed.\n  private _appErrorDropdownItem = Holder.create<INotification>(this);\n  private _appErrorToast = Holder.create<INotification>(this);\n  private _slowNotificationToast = Holder.create<INotification>(this);\n  private _slowNotificationInactivityTimer = new InactivityTimer(() => this._slowNotificationToast.clear(), 0);\n\n  constructor() {\n    super();\n    Computed.create(this, this._disconnectMsg, (use, msg) =>\n      msg ? use.owner.autoDispose(this.createNotification({\n        message: msg.message,\n        title: msg.title,\n        canUserClose: true,\n        inToast: true,\n        level : 'message'\n      })) : null);\n  }\n\n  /**\n   * Exposes all the state needed for building UI. This is simply to clarify the intended usage:\n   * these members aren't intended to be exposed, except to the UI-building code.\n   */\n  public getStateForUI() {\n    return {\n      toasts: this._toasts,\n      dropdownItems: this._dropdownItems,\n      progressItems: this._progressItems,\n      connectState: this._connectState,\n      disconnectMsg: this._disconnectMsg,\n    };\n  }\n\n  /**\n   * Creates a basic toast notification. By default, expires in 10 seconds.\n   * Takes an options objects to configure `expireSec` and `canUserClose`.\n   * Set `expireSec` to 0 to prevent expiration.\n   *\n   * Additional option level, can be used to style the notification to like a success, warning,\n   * info or error message.\n   */\n  public createUserMessage(message: MessageType, options: Partial<INotifyOptions> = {}): INotification {\n    const timestamp = Date.now();\n    if (options.actions && options.actions.includes('ask-for-help')) {\n      // If user should be able to ask for help, add this error to the notifier dropdown too for a\n      // good while, so the user can find it after the toast disappears.\n      this.createNotification({\n        timestamp,\n        message,\n        inToast: false,\n        expireSec: 300,\n        canUserClose: true,\n        level: 'message',\n        inDropdown: true,\n        ...options,\n        key: options.key && (\"dropdown:\" + options.key),\n      });\n    }\n    return this.createNotification({\n      timestamp,\n      message,\n      inToast: true,\n      expireSec: 10,\n      canUserClose: true,\n      inDropdown: false,\n      level: 'message',\n      ...options,\n    });\n  }\n\n  /**\n   * If you are looking to report errors, please do that via reportError so\n   * that we have a chance to send the error to our logs.\n   */\n  public createAppError(error: Error): void {\n    bundleChanges(() => {\n      // Remove old messages, to keep a max of maxAppErrors.\n      if (this._appErrorList.get().length >= maxAppErrors) {\n        this._appErrorList.splice(0, this._appErrorList.get().length - maxAppErrors + 1);\n      }\n      this._appErrorList.push({error, timestamp: Date.now()});\n    });\n\n    // Create a dropdown item for errors if we don't have one yet.\n    if (this._appErrorDropdownItem.isEmpty()) {\n      this._appErrorDropdownItem.autoDispose(this._createAppErrorItem('dropdown'));\n    }\n\n    // Create a toast for errors if we don't have one yet. When it's closed, mark the items as\n    // \"seen\" (i.e. not to be shown when the toast pops up again).\n    if (this._appErrorToast.isEmpty()) {\n      const n = this._appErrorToast.autoDispose(this._createAppErrorItem('toast'));\n      n.onDispose(() => this._appErrorList.get().forEach((appErr) => { appErr.seen = true; }));\n    }\n  }\n\n  public createNotification(opts: INotifyOptions): INotification {\n    const n = Notification.create(this._itemsHolder, opts);\n    this._addNotification(n).catch((e) => { log.warn('_addNotification failed', e); });\n    return n;\n  }\n\n  public createProgressIndicator(name: string, size: string, expireOnComplete = false): IProgress {\n    // Progress objects normally dispose themselves; constructor disposes any leftover items.\n    const p = Progress.create(this._itemsHolder, {name, size, expireOnComplete});\n    this._progressItems.push(p);\n    p.onDispose(() => this.isDisposed() || arrayRemove(this._progressItems, p));\n    return p;\n  }\n\n  public setConnectState(isConnected: boolean): void {\n    this._connectStateManager.setConnected(isConnected);\n  }\n\n  public getFullAppErrors() {\n    return this._appErrorList.get();\n  }\n\n  // This is exposed primarily for tests.\n  public clearAppErrors() {\n    this._appErrorList.splice(0);\n    this._appErrorToast.clear();\n  }\n\n  /**\n   * Show a notification when promise takes longer than optTimeout to resolve. Returns the passed in\n   * promise.\n   */\n  public async slowNotification<T>(promise: Promise<T>, optTimeout: number = 1000): Promise<T> {\n    if (await isLongerThan(promise, optTimeout)) {\n      if (this._slowNotificationToast.isEmpty()) {\n        this._slowNotificationToast.autoDispose(this.createNotification({\n          message: \"Still working...\",\n          canUserClose: false,\n          inToast: true,\n          level: 'message',\n        }));\n      }\n      await this._slowNotificationInactivityTimer.disableUntilFinish(promise);\n    }\n    return promise;\n  }\n\n  private async _addNotification(n: Notification): Promise<void> {\n    const key = n.options.key;\n    if (key) {\n      const prev = this._keyedItems.get(key);\n      if (prev) {\n        await prev.expire(true);\n      }\n      this._keyedItems.set(key, n);\n      n.onDispose(() => this.isDisposed() || this._keyedItems.delete(key));\n    }\n    if (n.options.inToast) {\n      this._toasts.push(n);\n      n.onDispose(() => this.isDisposed() || arrayRemove(this._toasts, n));\n    }\n    if (n.options.inDropdown) {\n      this._dropdownItems.push(n);\n      n.onDispose(() => this.isDisposed() || arrayRemove(this._dropdownItems, n));\n    }\n  }\n\n  private _createAppErrorItem(where: 'toast' | 'dropdown') {\n    return this.createNotification({\n      // Building DOM here in NotifyModel seems wrong, but I haven't come up with a better way.\n      message: () => dom.domComputed((use) => {\n        let appErrors = use(this._appErrorList);\n\n        // On narrow screens, only show the most recent error in toasts to conserve space.\n        if (where === 'toast' && use(isNarrowScreenObs())) {\n          appErrors = appErrors.length > 0 ? [appErrors[appErrors.length - 1]] : [];\n        }\n\n        return dom('div',\n          dom.forEach(appErrors, (appErr: IAppError) =>\n            (where === 'toast' && appErr.seen ? null :\n              dom('div', timeFormat('T', new Date(appErr.timestamp)), ' ',\n                  appErr.error.message, testId('notification-app-error'))\n            )\n          ),\n          testId('notification-app-errors')\n        );\n      }),\n      title: 'Unexpected error',\n      canUserClose: true,\n      inToast: where === 'toast',\n      expireSec: where === 'toast' ? 10 : 0,\n      inDropdown: where === 'dropdown',\n      actions: ['report-problem'],\n      level: 'error',\n    });\n  }\n}\n\nfunction arrayRemove<T>(arr: MutableObsArray<T>, elem: T) {\n  const removeIdx = arr.get().findIndex(e => e === elem);\n  if (removeIdx !== -1) {\n    arr.splice(removeIdx, 1);\n  }\n}\n\nfunction getDisconnectMessage(state: ConnectState): {title: string, message: string}|undefined {\n  switch (state) {\n    case ConnectState.RecentlyDisconnected:\n      return {title: 'Connection is lost', message: 'Attempting to reconnect...'};\n    case ConnectState.ReallyDisconnected:\n      return {title: 'Not connected', message: 'The document is in read-only mode until you are back online.'};\n  }\n}\n","import {AppModel, getHomeUrl} from 'app/client/models/AppModel';\nimport {TelemetryPrefs} from 'app/common/Install';\nimport {InstallAPI, InstallAPIImpl, TelemetryPrefsWithSources} from 'app/common/InstallAPI';\nimport {bundleChanges, Disposable, Observable} from 'grainjs';\n\nexport interface TelemetryModel {\n  /** Telemetry preferences (e.g. the current telemetry level). */\n  readonly prefs: Observable<TelemetryPrefsWithSources | null>;\n  fetchTelemetryPrefs(): Promise<void>;\n  updateTelemetryPrefs(prefs: Partial<TelemetryPrefs>): Promise<void>;\n}\n\nexport class TelemetryModelImpl extends Disposable implements TelemetryModel {\n  public readonly prefs: Observable<TelemetryPrefsWithSources | null> = Observable.create(this, null);\n  private readonly _installAPI: InstallAPI = new InstallAPIImpl(getHomeUrl());\n\n  constructor(_appModel: AppModel) {\n    super();\n  }\n\n  public async fetchTelemetryPrefs(): Promise<void> {\n    const prefs = await this._installAPI.getInstallPrefs();\n    bundleChanges(() => {\n      this.prefs.set(prefs.telemetry);\n    });\n  }\n\n  public async updateTelemetryPrefs(prefs: Partial<TelemetryPrefs>): Promise<void> {\n    await this._installAPI.updateInstallPrefs({telemetry: prefs});\n    await this.fetchTelemetryPrefs();\n  }\n}\n","import {localStorageObs} from 'app/client/lib/localStorageObs';\nimport {AppModel} from 'app/client/models/AppModel';\nimport {UserOrgPrefs, UserPrefs} from 'app/common/Prefs';\nimport {Computed, Observable} from 'grainjs';\nimport {CheckerT} from 'ts-interface-checker';\n\ninterface PrefsTypes {\n  userOrgPrefs: UserOrgPrefs;\n  userPrefs: UserPrefs;\n}\n\nfunction makePrefFunctions<P extends keyof PrefsTypes>(prefsTypeName: P) {\n  type PrefsType = PrefsTypes[P];\n\n  /**\n   * Creates an observable that returns a PrefsType, and which stores changes when set.\n   *\n   * For anon user, the prefs live in localStorage. Note that the observable isn't actually watching\n   * for changes on the server, it will only change when set.\n   */\n  function getPrefsObs(appModel: AppModel): Observable<PrefsType> {\n    if (appModel.currentValidUser) {\n      let prefs: PrefsType | undefined;\n      if (prefsTypeName === 'userPrefs') {\n        prefs = appModel.currentValidUser.prefs;\n      } else {\n        prefs = appModel.currentOrg?.[prefsTypeName];\n      }\n      const prefsObs = Observable.create<PrefsType>(null, prefs ?? {});\n      return Computed.create(null, (use) => use(prefsObs))\n        .onWrite(newPrefs => {\n          prefsObs.set(newPrefs);\n          return appModel.api.updateOrg('current', {[prefsTypeName]: newPrefs});\n        });\n    } else {\n      const userId = appModel.currentUser?.id || 0;\n      const jsonPrefsObs = localStorageObs(`${prefsTypeName}:u=${userId}`);\n      return Computed.create(null, jsonPrefsObs, (use, p) => (p && JSON.parse(p) || {}) as PrefsType)\n        .onWrite(newPrefs => {\n          jsonPrefsObs.set(JSON.stringify(newPrefs));\n        });\n    }\n  }\n\n  /**\n   * Creates an observable that returns a particular preference value from `prefsObs`, and which\n   * stores it when set.\n   */\n  function getPrefObs<Name extends keyof PrefsType>(\n    prefsObs: Observable<PrefsType>,\n    prefName: Name,\n    options: {\n      defaultValue?: Exclude<PrefsType[Name], undefined>;\n      checker?: CheckerT<PrefsType[Name]>;\n    } = {}\n  ): Observable<PrefsType[Name] | undefined> {\n    const {defaultValue, checker} = options;\n    return Computed.create(null, (use) => {\n      const prefs = use(prefsObs);\n      if (!(prefName in prefs)) { return defaultValue; }\n\n      const value = prefs[prefName];\n      if (checker) {\n        try {\n          checker.check(value);\n        } catch (e) {\n          console.error(`getPrefObs: preference ${prefName.toString()} has value of invalid type`, e);\n          return defaultValue;\n        }\n      }\n\n      return value;\n    }).onWrite(value => prefsObs.set({...prefsObs.get(), [prefName]: value}));\n  }\n\n  return {getPrefsObs, getPrefObs};\n}\n\n// Functions actually exported are:\n// - getUserOrgPrefsObs(appModel): Observable<UserOrgPrefs>\n// - getUserOrgPrefObs(userOrgPrefsObs, prefName): Observable<PrefType[prefName]>\n// - getUserPrefsObs(appModel): Observable<UserPrefs>\n// - getUserPrefObs(userPrefsObs, prefName): Observable<PrefType[prefName]>\n\nexport const {getPrefsObs: getUserOrgPrefsObs, getPrefObs: getUserOrgPrefObs} = makePrefFunctions('userOrgPrefs');\nexport const {getPrefsObs: getUserPrefsObs, getPrefObs: getUserPrefObs} = makePrefFunctions('userPrefs');\n\n\n// For preferences that store a list of items (such as seen docTours), this helper updates the\n// preference to add itemId to it (e.g. to avoid auto-starting the docTour again in the future).\n// prefKey is used only to log a more informative warning on error.\nexport function markAsSeen<T>(seenIdsObs: Observable<T[] | undefined>, itemId: T) {\n  const seenIds = seenIdsObs.get() || [];\n  try {\n    if (!seenIds.includes(itemId)) {\n      const seen = new Set(seenIds);\n      seen.add(itemId);\n      seenIdsObs.set([...seen].sort());\n    }\n  } catch (e) {\n    // If we fail to save this preference, it's probably not worth alerting the user about,\n    // so just log to console.\n    // tslint:disable-next-line:no-console\n    console.warn(\"Failed to save preference in markAsSeen\", e);\n  }\n}\n\nexport function markAsUnSeen<T>(seenIdsObs: Observable<T[] | undefined>, itemId: T) {\n  const seenIds = seenIdsObs.get() || [];\n  try {\n    if (seenIds.includes(itemId)) {\n      const seen = new Set(seenIds);\n      seen.delete(itemId);\n      seenIdsObs.set([...seen].sort());\n    }\n  } catch (e) {\n    // tslint:disable-next-line:no-console\n    console.warn(\"Failed to save preference in markAsUnSeen\", e);\n  }\n}\n","import {get as getBrowserGlobals} from 'app/client/lib/browserGlobals';\nimport * as log from 'app/client/lib/log';\nimport {INotification, INotifyOptions, MessageType, Notifier} from 'app/client/models/NotifyModel';\nimport {ApiErrorDetails} from 'app/common/ApiError';\nimport {fetchFromHome, pageHasHome} from 'app/common/urlUtils';\nimport isError = require('lodash/isError');\nimport pick = require('lodash/pick');\n\nconst G = getBrowserGlobals('document', 'window');\n\nlet _notifier: Notifier;\n\nexport class UserError extends Error {\n  public name: string = \"UserError\";\n  public key?: string;\n  constructor(message: string, options: {key?: string} = {}) {\n    super(message);\n    this.key = options.key;\n  }\n}\n\n/**\n * This error causes Notifier to show the message with an upgrade link.\n */\nexport class NeedUpgradeError extends Error {\n  public name: string = 'NeedUpgradeError';\n  constructor(message: string = 'This feature is not available in your plan') {\n    super(message);\n  }\n}\n\n/**\n * Set the global Notifier instance used by subsequent reportError calls.\n */\nexport function setErrorNotifier(notifier: Notifier) {\n  _notifier = notifier;\n}\n\n// Returns application errors collected by NotifyModel. Used in tests.\nexport function getAppErrors(): string[] {\n  return _notifier.getFullAppErrors().map((e) => e.error.message);\n}\n\n/**\n * Shows normal notification without any styling or icon.\n */\nexport function reportMessage(msg: MessageType, options?: Partial<INotifyOptions>): INotification|undefined {\n  if (_notifier && !_notifier.isDisposed()) {\n    return _notifier.createUserMessage(msg, {\n      ...options\n    });\n  }\n}\n\n/**\n * Shows warning toast notification (with yellow styling), and log to server and to console. Pass\n * {level: 'error'} for same behavior with adjusted styling.\n */\nexport function reportWarning(msg: string, options?: Partial<INotifyOptions>) {\n  options = {level: 'warning', ...options};\n  log.warn(`${options.level}: `, msg);\n  logError(msg);\n  return reportMessage(msg, options);\n}\n\n/**\n * Shows success toast notification (with green styling).\n */\nexport function reportSuccess(msg: MessageType, options?: Partial<INotifyOptions>) {\n  return reportMessage(msg, {level: 'success', ...options});\n}\n\n// Errors from cross-origin scripts, and some add-ons, show up as unhelpful sanitized \"Script\n// error.\" messages. We want to know if they occur, but they are useless to the user, and useless\n// to report multiple times. We report them just once to the server.\n//\n// In particular, this addresses a bug on iOS version of Firefox, which produces uncaught\n// sanitized errors on load AND on attempts to report them, leading to a loop that hangs the\n// browser. Reporting just once is a sufficient workaround.\nfunction isUnhelpful(ev: ErrorEvent) {\n  return !ev.filename && !ev.lineno && ev.message?.toLowerCase().includes('script error');\n}\nlet unhelpfulErrors = 0;\n\n/**\n * Report an error to the user using the global Notifier instance. If the argument is a UserError\n * or an error with a status in the 400 range, it indicates a user error. Otherwise, it's an\n * application error, which the user can report to us as a bug.\n *\n * Not all errors will be shown as an error toast, depending on the content of the error\n * this function might show a simple toast message.\n */\nexport function reportError(err: Error|string, ev?: ErrorEvent): void {\n  log.error(`ERROR:`, err);\n  if (String(err).match(/GristWSConnection disposed/)) {\n    // This error can be emitted while a page is reloaded, and isn't worth reporting.\n    return;\n  }\n  if (ev && isUnhelpful(ev)) {\n    // Report just once to the server. There is little point reporting subsequent such errors once\n    // we know they happen, since each individual error has no useful information.\n    if (++unhelpfulErrors <= 1) {\n      logError(err);\n    }\n    return;\n  }\n\n  logError(err);\n  if (_notifier && !_notifier.isDisposed()) {\n    if (!isError(err)) {\n      err = new Error(String(err));\n    }\n\n    const details: ApiErrorDetails|undefined = (err as any).details;\n    const code: unknown = (err as any).code;\n    const status: unknown = (err as any).status;\n    const message = (details && details.userError) || err.message;\n    if (details && details.limit) {\n      // This is a notification about reaching a plan limit. Key prevents showing multiple\n      // notifications for the same type of limit.\n      const options: Partial<INotifyOptions> = {\n        title: \"Reached plan limit\",\n        key: `limit:${details.limit.quantity || message}`,\n        actions: details.tips?.some(t => t.action === 'manage') ? ['manage'] : ['upgrade'],\n      };\n      if (details.tips && details.tips.some(tip => tip.action === 'add-members')) {\n        // When adding members would fix a problem, give more specific advice.\n        options.title = \"Add users as team members first\";\n        options.actions = [];\n      }\n      // Show the error as a message\n      _notifier.createUserMessage(message, options);\n    } else if (err.name === 'UserError' || (typeof status === 'number' && status >= 400 && status < 500)) {\n      // This is explicitly a user error, or one in the \"Client Error\" range, so treat it as user\n      // error rather than a bug. Using message as the key causes same-message notifications to\n      // replace previous ones rather than accumulate.\n      const options: Partial<INotifyOptions> = {key: (err as UserError).key || message};\n      if (details && details.tips && details.tips.some(tip => tip.action === 'ask-for-help')) {\n        options.actions = ['ask-for-help'];\n      }\n      _notifier.createUserMessage(message, options);\n    } else if (err.name === 'NeedUpgradeError') {\n      // Show the error as a message\n      _notifier.createUserMessage(err.message, {actions: ['upgrade'], key: 'NEED_UPGRADE'});\n    } else if (code === 'AUTH_NO_EDIT' || code === 'ACL_DENY') {\n      // Show the error as a message\n      _notifier.createUserMessage(err.message, {key: code, memos: details?.memos});\n    } else if (message.match(/\\[Sandbox\\].*between formula and data/)) {\n      // Show nicer error message for summary tables.\n      _notifier.createUserMessage(\"Summary tables can only contain formula columns.\",\n        {key: 'summary', actions: ['ask-for-help']});\n    }  else {\n      // If we don't recognize it, consider it an application error (bug) that the user should be\n      // able to report.\n      if (details?.userError) {\n        // If we have user friendly error, show it instead.\n        _notifier.createAppError(Error(details.userError));\n      } else {\n        _notifier.createAppError(err);\n      }\n    }\n  }\n}\n\n/**\n * Set up error handlers, to report uncaught errors and rejections. These are logged to the\n * console and displayed as notifications, when the notifications UI is set up.\n *\n * koUtil, if passed, will enable reporting errors from the evaluation of knockout computeds. It\n * is passed-in as an argument to avoid creating a dependency when knockout isn't used otherwise.\n */\nexport function setUpErrorHandling(doReportError = reportError, koUtil?: any) {\n  if (koUtil) {\n    koUtil.setComputedErrorHandler((err: any) => doReportError(err));\n  }\n\n  // Report also uncaught JS errors and unhandled Promise rejections.\n  G.window.addEventListener('error', (ev: ErrorEvent) => doReportError(ev.error || ev.message, ev));\n\n  G.window.addEventListener('unhandledrejection', (ev: any) => {\n    const reason = ev.reason || (ev.detail && ev.detail.reason);\n    doReportError(reason || ev);\n  });\n\n  // Expose globally a function to report a notification. This is for compatibility with old UI;\n  // in new UI, it renders messages as user errors. New code should use `reportError()` instead.\n  G.window.gristNotify = (message: string) => doReportError(new UserError(message));\n\n  // Expose the function used in tests to get a list of errors in the notifier.\n  G.window.getAppErrors = getAppErrors;\n}\n\n/**\n * Send information about a problem to the backend.  This is crude; there is some\n * over-logging (regular errors such as access rights or account limits) and\n * under-logging (javascript errors during startup might never get reported).\n */\nexport function logError(error: Error|string) {\n  if (!pageHasHome()) { return; }\n  const docId = G.window.gristDocPageModel?.currentDocId?.get();\n  fetchFromHome('/api/log', {\n    method: 'POST',\n    body: JSON.stringify({\n      // Errors don't stringify, so pick out properties explicitly for errors.\n      event: (error instanceof Error) ? pick(error, Object.getOwnPropertyNames(error)) : error,\n      docId,\n      page: G.window.location.href,\n      browser: pick(G.window.navigator, ['language', 'platform', 'userAgent'])\n    }),\n    credentials: 'include',\n    headers: {\n      'Content-Type': 'application/json',\n      'X-Requested-With': 'XMLHttpRequest',\n    }\n  }).catch(e => {\n    // There ... isn't much we can do about this.\n    // tslint:disable-next-line:no-console\n    console.warn('Failed to log event', e);\n  });\n}\n","import {getGristConfig} from 'app/common/urlUtils';\nimport {get as getBrowserGlobals} from 'app/client/lib/browserGlobals';\nimport {localStorageBoolObs, localStorageJsonObs} from 'app/client/lib/localStorageObs';\nimport {Observable} from 'grainjs';\n\n/**\n * Are comments enabled by feature flag.\n */\nexport function COMMENTS(): Observable<boolean> {\n  const G = getBrowserGlobals('document', 'window');\n  if (!G.window.COMMENTS) {\n    G.window.COMMENTS = localStorageBoolObs('feature-comments', Boolean(getGristConfig().featureComments));\n  }\n  return G.window.COMMENTS;\n}\n\n/**\n * Does backend supports AI assistant.\n */\nexport function HAS_FORMULA_ASSISTANT() {\n  return Boolean(getGristConfig().featureFormulaAssistant);\n}\n\nexport function WHICH_FORMULA_ASSISTANT() {\n  return getGristConfig().assistantService;\n}\n\nexport function PERMITTED_CUSTOM_WIDGETS(): Observable<string[]> {\n  const G = getBrowserGlobals('document', 'window');\n  if (!G.window.PERMITTED_CUSTOM_WIDGETS) {\n    G.window.PERMITTED_CUSTOM_WIDGETS =\n      localStorageJsonObs('PERMITTED_CUSTOM_WIDGETS', getGristConfig().permittedCustomWidgets || []);\n  }\n  return G.window.PERMITTED_CUSTOM_WIDGETS;\n}\n","/**\n * This module provides a urlState() function returning a singleton UrlState, which represents\n * Grist application state as encoded into a URL, and navigation functions.\n *\n * For example, the current org is available as a value or as an observable:\n *\n *    urlState().state.get().org\n *    computed((use) => use(urlState().state).org);\n *\n * Creating a link which has an href but changes state without reloading page is possible with:\n *\n *    dom('a', urlState().setLinkUrl({ws: 10}), \"...\")\n *\n * Grist URLs have the form:\n *    <org-base>/\n *    <org-base>/ws/<ws>/\n *    <org-base>/doc/<doc>[/p/<docPage>]\n *\n * where <org-base> depends on whether subdomains are in use, i.e. one of:\n *    <org>.getgrist.com\n *    localhost:8080/o/<org>\n *\n * Note that the form of URLs depends on the settings in window.gristConfig object.\n */\nimport {unsavedChanges} from 'app/client/components/UnsavedChanges';\nimport {hooks} from 'app/client/Hooks';\nimport {UrlState} from 'app/client/lib/UrlState';\nimport {decodeUrl, encodeUrl, getSlugIfNeeded, GristLoadConfig, IGristUrlState,\n        parseFirstUrlPart} from 'app/common/gristUrls';\nimport {addOrgToPath} from 'app/common/urlUtils';\nimport {Document} from 'app/common/UserAPI';\nimport isEmpty = require('lodash/isEmpty');\nimport isEqual = require('lodash/isEqual');\nimport {CellValue} from \"app/plugin/GristData\";\n\n/**\n * Returns a singleton UrlState object, initializing it on first use.\n */\nexport function urlState(): UrlState<IGristUrlState> {\n  return _urlState || (_urlState = new UrlState(window, new UrlStateImpl(window as any)));\n}\nlet _urlState: UrlState<IGristUrlState>|undefined;\n\n/**\n * Returns url parameters appropriate for the specified document.\n *\n * In addition to setting `doc` and `slug`, it sets additional parameters\n * from `params` if any are supplied.\n */\nexport function docUrl(doc: Document, params: {org?: string} = {}): IGristUrlState {\n  const state: IGristUrlState = {\n    doc: doc.urlId || doc.id,\n    slug: getSlugIfNeeded(doc),\n  };\n\n  // TODO: Get non-sample documents with `org` set to fully work (a few tests fail).\n  if (params.org) {\n    state.org = params.org;\n  }\n  return state;\n}\n\n// Returns the home page for the current org.\nexport function getMainOrgUrl(): string { return urlState().makeUrl({}); }\n\n// When on a document URL, returns the URL with just the doc ID, omitting other bits (like page).\nexport function getCurrentDocUrl(): string { return urlState().makeUrl({docPage: undefined}); }\n\n// Get url for the login page, which will then redirect to `nextUrl` (current page by default).\nexport function getLoginUrl(nextUrl: string | null = _getCurrentUrl()): string {\n  return _getLoginLogoutUrl('login', nextUrl);\n}\n\n// Get url for the signup page, which will then redirect to `nextUrl` (current page by default).\nexport function getSignupUrl(nextUrl: string = _getCurrentUrl()): string {\n  return _getLoginLogoutUrl('signup', nextUrl);\n}\n\n// Get url for the logout page.\nexport function getLogoutUrl(): string {\n  return _getLoginLogoutUrl('logout');\n}\n\n// Get url for the signin page, which will then redirect to `nextUrl` (current page by default).\nexport function getLoginOrSignupUrl(nextUrl: string = _getCurrentUrl()): string {\n  return _getLoginLogoutUrl('signin', nextUrl);\n}\n\nexport function getWelcomeHomeUrl() {\n  return _buildUrl('welcome/home').href;\n}\n\n// Returns the relative URL (i.e. path) of the current page, except when it's the\n// \"/signed-out\" page, in which case it returns the home page (\"/\").\n// This is a good URL to use for a post-login redirect.\nfunction _getCurrentUrl(): string {\n  const {hash, pathname, search} = new URL(window.location.href);\n  if (pathname.endsWith('/signed-out')) { return '/'; }\n\n  return parseFirstUrlPart('o', pathname).path + search + hash;\n}\n\n// Returns the URL for the given login page, with 'next' param optionally set.\nfunction _getLoginLogoutUrl(page: 'login'|'logout'|'signin'|'signup', nextUrl?: string | null): string {\n  const startUrl = _buildUrl(page);\n  if (nextUrl) { startUrl.searchParams.set('next', nextUrl); }\n  return startUrl.href;\n}\n\nfunction _buildUrl(page?: string): URL {\n  const startUrl = new URL(window.location.href);\n  startUrl.pathname = addOrgToPath('', window.location.href, true) + '/' + (page ?? '');\n  startUrl.search = '';\n  startUrl.hash = '';\n  return startUrl;\n}\n\n/**\n * Implements the interface expected by UrlState. It is only exported for the sake of tests; the\n * only public interface is the urlState() accessor.\n */\nexport class UrlStateImpl {\n  constructor(private _window: {gristConfig?: Partial<GristLoadConfig>}) {}\n\n  /**\n   * The actual serialization of a url state into a URL. The URL has the form\n   *    <org-base>/\n   *    <org-base>/ws/<ws>/\n   *    <org-base>/doc/<doc>[/p/<docPage>]\n   *    <org-base>/doc/<doc>[/m/fork][/p/<docPage>]\n   *\n   * where <org-base> depends on whether subdomains are in use, e.g.\n   *    <org>.getgrist.com\n   *    localhost:8080/o/<org>\n   */\n  public encodeUrl(state: IGristUrlState, baseLocation: Location | URL): string {\n    const gristConfig = this._window.gristConfig || {};\n    return encodeUrl(gristConfig, state, baseLocation, {\n      tweaks: hooks.urlTweaks,\n    });\n  }\n\n  /**\n   * Parse a URL location into an IGristUrlState object. See encodeUrl() documentation.\n   */\n  public decodeUrl(location: Location | URL): IGristUrlState {\n    const gristConfig = this._window.gristConfig || {};\n    return decodeUrl(gristConfig, location, {\n      tweaks: hooks.urlTweaks,\n    });\n  }\n\n  /**\n   * Updates existing state with new state, with attention to Grist-specific meanings.\n   * E.g. setting 'docPage' will reuse previous 'doc', but setting 'org' or 'ws' will ignore it.\n   */\n  public updateState(prevState: IGristUrlState, newState: IGristUrlState): IGristUrlState {\n    const keepState = (newState.org || newState.ws || newState.homePage || newState.doc || isEmpty(newState) ||\n                       newState.account || newState.billing  || newState.activation || newState.welcome ||\n                       newState.supportGrist) ?\n      (prevState.org ? {org: prevState.org} : {}) :\n      prevState;\n    return {...keepState, ...newState};\n  }\n\n  /**\n   * The account page, billing pages, and doc-specific pages for now require a page load.\n   * TODO: Make it so doc pages do NOT require a page load, since we are actually serving the same\n   * single-page app for home and for docs, and should only need a reload triggered if it's\n   * a matter of DocWorker requiring a different version (e.g. /v/OTHER/doc/...).\n   */\n  public needPageLoad(prevState: IGristUrlState, newState: IGristUrlState): boolean {\n    const gristConfig = this._window.gristConfig || {};\n    const orgReload = prevState.org !== newState.org;\n    // Reload when moving to/from a document or between doc and non-doc.\n    const docReload = prevState.doc !== newState.doc;\n    // Reload when moving to/from the account page.\n    const accountReload = Boolean(prevState.account) !== Boolean(newState.account);\n    // Reload when moving to/from a billing page.\n    const billingReload = Boolean(prevState.billing) !== Boolean(newState.billing);\n    // Reload when moving to/from an activation page.\n    const activationReload = Boolean(prevState.activation) !== Boolean(newState.activation);\n    // Reload when moving to/from a welcome page.\n    const welcomeReload = Boolean(prevState.welcome) !== Boolean(newState.welcome);\n    // Reload when link keys change, which changes what the user can access\n    const linkKeysReload = !isEqual(prevState.params?.linkParameters, newState.params?.linkParameters);\n    // Reload when moving to/from the Grist sign-up page.\n    const signupReload = [prevState.login, newState.login].includes('signup')\n      && prevState.login !== newState.login;\n    // Reload when moving to/from the support Grist page.\n    const supportGristReload = Boolean(prevState.supportGrist) !== Boolean(newState.supportGrist);\n    return Boolean(orgReload || accountReload || billingReload || activationReload ||\n      gristConfig.errPage || docReload || welcomeReload || linkKeysReload || signupReload ||\n      supportGristReload);\n  }\n\n  /**\n   * Complete outstanding work before changes that would destroy page state, e.g. if there are\n   * edits to be saved.\n   */\n  public async delayPushUrl(prevState: IGristUrlState, newState: IGristUrlState): Promise<void> {\n    if (newState.docPage !== prevState.docPage) {\n      return unsavedChanges.saveChanges();\n    }\n  }\n}\n\n/**\n * Given value like `foo bar baz`, constructs URL by checking if `baz` is a valid URL and,\n * if not, prepending `http://`.\n */\nexport function constructUrl(value: CellValue): string {\n  if (typeof value !== 'string') {\n    return '';\n  }\n  const url = value.slice(value.lastIndexOf(' ') + 1);\n  try {\n    // Try to construct a valid URL\n    return (new URL(url)).toString();\n  } catch (e) {\n    // Not a valid URL, so try to prefix it with http\n    return 'http://' + url;\n  }\n}\n\n/**\n * If urlValue contains a URL to the current document that can be navigated to without a page reload,\n * returns a parsed IGristUrlState that can be passed to urlState().pushState() to do that navigation.\n * Otherwise, returns null.\n */\nexport function sameDocumentUrlState(urlValue: CellValue): IGristUrlState | null {\n  const urlString = constructUrl(urlValue);\n  let url: URL;\n  try {\n    url = new URL(urlString);\n  } catch {\n    return null;\n  }\n  const oldOrigin = window.location.origin;\n  const newOrigin = url.origin;\n  if (oldOrigin !== newOrigin) {\n    return null;\n  }\n\n  const urlStateImpl = new UrlStateImpl(window as any);\n  const result = urlStateImpl.decodeUrl(url);\n  if (urlStateImpl.needPageLoad(urlState().state.get(), result)) {\n    return null;\n  } else {\n    return result;\n  }\n}\n","import {AppModel} from 'app/client/models/AppModel';\nimport {DocPageModel} from 'app/client/models/DocPageModel';\nimport {getLoginOrSignupUrl, getLoginUrl, getLogoutUrl, getSignupUrl, urlState} from 'app/client/models/gristUrlState';\nimport {manageTeamUsers} from 'app/client/ui/OpenUserManager';\nimport {createUserImage} from 'app/client/ui/UserImage';\nimport * as viewport from 'app/client/ui/viewport';\nimport {bigPrimaryButtonLink, primaryButtonLink} from 'app/client/ui2018/buttons';\nimport {mediaDeviceNotSmall, testId, theme, vars} from 'app/client/ui2018/cssVars';\nimport {icon} from 'app/client/ui2018/icons';\nimport {menu, menuDivider, menuItem, menuItemLink, menuSubHeader} from 'app/client/ui2018/menus';\nimport {commonUrls, isFeatureEnabled} from 'app/common/gristUrls';\nimport {FullUser} from 'app/common/LoginSessionAPI';\nimport * as roles from 'app/common/roles';\nimport {Disposable, dom, DomElementArg, styled} from 'grainjs';\nimport {cssMenuItem} from 'popweasel';\nimport {maybeAddSiteSwitcherSection} from 'app/client/ui/SiteSwitcher';\nimport {makeT} from 'app/client/lib/localization';\nimport {getGristConfig} from 'app/common/urlUtils';\n\nconst t = makeT('AccountWidget');\n\n/**\n * Render the user-icon that opens the account menu.\n *\n * When no user is logged in, render \"Sign In\" and \"Sign Up\" buttons.\n *\n * When no user is logged in and a template document is open, render a \"Use This Template\"\n * button.\n */\nexport class AccountWidget extends Disposable {\n  constructor(private _appModel: AppModel, private _docPageModel?: DocPageModel) {\n    super();\n  }\n\n  public buildDom() {\n    return cssAccountWidget(\n      dom.domComputed(use => {\n        const isTemplate = Boolean(this._docPageModel && use(this._docPageModel.isTemplate));\n        const user = this._appModel.currentValidUser;\n        if (!user && isTemplate) {\n          return this._buildUseThisTemplateButton();\n        } else if (!user) {\n          return this._buildSignInAndSignUpButtons();\n        } else {\n          return this._buildAccountMenuButton(user);\n        }\n      }),\n      testId('dm-account'),\n    );\n  }\n\n  private _buildAccountMenuButton(user: FullUser|null) {\n    return cssUserIcon(\n      createUserImage(user, 'medium', testId('user-icon')),\n      menu(() => this._makeAccountMenu(user), {placement: 'bottom-end'}),\n    );\n  }\n\n  private _buildSignInAndSignUpButtons() {\n    return [\n      cssSigninButton(t('Sign In'),\n        cssSigninButton.cls('-secondary'),\n        dom.attr('href', use => {\n          // Keep the redirect param of the login URL fresh.\n          use(urlState().state);\n          return getLoginUrl();\n        }),\n        testId('user-sign-in'),\n      ),\n      cssSigninButton(t('Sign Up'),\n        dom.attr('href', use => {\n          // Keep the redirect param of the signup URL fresh.\n          use(urlState().state);\n          return getSignupUrl();\n        }),\n        testId('user-sign-up'),\n      ),\n    ];\n  }\n\n  private _buildUseThisTemplateButton() {\n    return cssUseThisTemplateButton(t('Use This Template'),\n      dom.attr('href', use => {\n        // Keep the redirect param of the login/signup URL fresh.\n        use(urlState().state);\n        return getLoginOrSignupUrl();\n      }),\n      testId('dm-account-use-this-template'),\n    );\n  }\n\n  /**\n   * Renders the content of the account menu, with a list of available orgs, settings, and sign-out.\n   * Note that `user` should NOT be anonymous (none of the items are really relevant).\n   */\n  private _makeAccountMenu(user: FullUser|null): DomElementArg[] {\n    const currentOrg = this._appModel.currentOrg;\n\n    // The 'Document Settings' item, when there is an open document.\n    const documentSettingsItem = this._docPageModel ? menuItemLink(\n      urlState().setLinkUrl({docPage: 'settings'}),\n      t(\"Document Settings\"),\n      testId('dm-doc-settings')\n    ) : null;\n\n    // The item to toggle mobile mode (presence of viewport meta tag).\n    const mobileModeToggle = menuItem(viewport.toggleViewport,\n      cssSmallDeviceOnly.cls(''),   // Only show this toggle on small devices.\n      t(\"Toggle Mobile Mode\"),\n      cssCheckmark('Tick', dom.show(viewport.viewportEnabled)),\n      testId('usermenu-toggle-mobile'),\n     );\n\n    if (!user) {\n      return [\n        menuItemLink({href: getLoginOrSignupUrl()}, t(\"Sign in\")),\n        menuDivider(),\n        documentSettingsItem,\n        menuItemLink({href: commonUrls.plans}, t(\"Pricing\")),\n        mobileModeToggle,\n      ];\n    }\n\n    const users = this._appModel.topAppModel.users;\n    const isExternal = user?.loginMethod === 'External';\n    return [\n      cssUserInfo(\n        createUserImage(user, 'large'),\n        cssUserName(dom('span', user.name, testId('usermenu-name')),\n          cssEmail(user.email, testId('usermenu-email'))\n        )\n      ),\n      menuItemLink(urlState().setLinkUrl({account: 'account'}), t(\"Profile Settings\"), testId('dm-account-settings')),\n\n      documentSettingsItem,\n\n      // Show 'Organization Settings' when on a home page of a valid org.\n      (!this._docPageModel && currentOrg && this._appModel.isTeamSite ?\n        menuItem(() => manageTeamUsers(currentOrg, user, this._appModel.api),\n                 roles.canEditAccess(currentOrg.access) ? t(\"Manage Team\") : t(\"Access Details\"),\n                 testId('dm-org-access')) :\n        // Don't show on doc pages, or for personal orgs.\n        null),\n\n      this._maybeBuildBillingPageMenuItem(),\n      this._maybeBuildActivationPageMenuItem(),\n      this._maybeBuildSupportGristPageMenuItem(),\n\n      mobileModeToggle,\n\n      // TODO Add section (\"Here right now\") listing icons of other users currently on this doc.\n      // (See Invision \"Panels\" near the bottom.)\n\n      // In case of a single-org setup, skip all the account-switching UI. We'll also skip the\n      // org-listing UI below.\n      this._appModel.topAppModel.isSingleOrg || !isFeatureEnabled(\"multiAccounts\") ? [] : [\n        menuDivider(),\n        menuSubHeader(dom.text((use) => use(users).length > 1 ? t(\"Switch Accounts\") : t(\"Accounts\"))),\n        dom.forEach(users, (_user) => {\n          if (_user.id === user.id) { return null; }\n          return menuItem(() => this._switchAccount(_user),\n            cssSmallIconWrap(createUserImage(_user, 'small')),\n            cssOtherEmail(_user.email, testId('usermenu-other-email')),\n          );\n        }),\n        isExternal ? null : menuItemLink({href: getLoginUrl()}, t(\"Add Account\"), testId('dm-add-account')),\n      ],\n\n      menuItemLink({href: getLogoutUrl()}, t(\"Sign Out\"), testId('dm-log-out')),\n\n      maybeAddSiteSwitcherSection(this._appModel),\n    ];\n  }\n\n  // Switch BrowserSession to use the given user for the currently loaded org.\n  private async _switchAccount(user: FullUser) {\n    await this._appModel.api.setSessionActive(user.email);\n    if (urlState().state.get().doc) {\n      // Document access level may have changed.\n      // If it was not accessible but now is, we currently need to reload the page to get\n      // a complete gristConfig for the document from the server.\n      // If it was accessible but now is not, it would suffice to reconnect the web socket.\n      // For simplicity, just reload from server in either case.\n      // TODO: get fancier here to avoid reload.\n      window.location.reload(true);\n      return;\n    }\n    this._appModel.topAppModel.initialize();\n  }\n\n  private _maybeBuildBillingPageMenuItem() {\n    const {deploymentType} = getGristConfig();\n    if (deploymentType !== 'saas') { return null; }\n\n    const {currentValidUser, currentOrg, isTeamSite} = this._appModel;\n    const isBillingManager = Boolean(currentOrg && currentOrg.billingAccount &&\n      (currentOrg.billingAccount.isManager || currentValidUser?.isSupport));\n\n    return isTeamSite ?\n      // For links, disabling with just a class is hard; easier to just not make it a link.\n      // TODO weasel menus should support disabling menuItemLink.\n      (isBillingManager ?\n        menuItemLink(urlState().setLinkUrl({billing: 'billing'}), t('Billing Account')) :\n        menuItem(() => null, t('Billing Account'), dom.cls('disabled', true))\n      ) :\n      menuItem(() => this._appModel.showUpgradeModal(), t('Upgrade Plan'));\n  }\n\n  private _maybeBuildActivationPageMenuItem() {\n    const {activation, deploymentType} = getGristConfig();\n    if (deploymentType !== 'enterprise' || !activation?.isManager) {\n      return null;\n    }\n\n    return menuItemLink(t('Activation'), urlState().setLinkUrl({activation: 'activation'}));\n  }\n\n  private _maybeBuildSupportGristPageMenuItem() {\n    const {deploymentType} = getGristConfig();\n    if (deploymentType !== 'core') {\n      return null;\n    }\n\n    return menuItemLink(\n      t('Support Grist'),\n      cssHeartIcon('💛'),\n      urlState().setLinkUrl({supportGrist: 'support-grist'}),\n      testId('usermenu-support-grist'),\n    );\n  }\n}\n\nconst cssAccountWidget = styled('div', `\n  display: flex;\n  margin-right: 16px;\n  white-space: nowrap;\n`);\n\nexport const cssUserIcon = styled('div', `\n  height: 48px;\n  width: 48px;\n  padding: 8px;\n  cursor: pointer;\n`);\n\nconst cssHeartIcon = styled('span', `\n  margin-left: 8px;\n`);\n\nconst cssUserInfo = styled('div', `\n  padding: 12px 24px 12px 16px;\n  min-width: 200px;\n  display: flex;\n  align-items: center;\n`);\n\nconst cssUserName = styled('div', `\n  margin-left: 8px;\n  font-size: ${vars.mediumFontSize};\n  font-weight: ${vars.headerControlTextWeight};\n  color: ${theme.text};\n`);\n\nconst cssEmail = styled('div', `\n  margin-top: 4px;\n  font-size: ${vars.smallFontSize};\n  font-weight: initial;\n  color: ${theme.lightText};\n`);\n\nconst cssSmallIconWrap = styled('div', `\n  flex: none;\n  margin: -4px 8px -4px 0px;\n`);\n\nconst cssOtherEmail = styled('div', `\n  color: ${theme.lightText};\n  .${cssMenuItem.className}-sel & {\n    color: ${theme.menuItemSelectedFg};\n  }\n`);\n\nconst cssCheckmark = styled(icon, `\n  flex: none;\n  margin-left: 16px;\n  --icon-color: ${theme.accentIcon};\n`);\n\n// Note that this css class hides the item when the device width is small (not based on viewport\n// width, which may be larger). This only appropriate for when to enable the \"mobile mode\" toggle.\nconst cssSmallDeviceOnly = styled(menuItem, `\n  @media ${mediaDeviceNotSmall} {\n    & {\n      display: none;\n    }\n  }\n`);\n\nconst cssSigninButton = styled(bigPrimaryButtonLink, `\n  display: flex;\n  align-items: center;\n  font-weight: 700;\n  min-height: unset;\n  height: 36px;\n  padding: 8px 16px 8px 16px;\n  font-size: ${vars.mediumFontSize};\n\n  &-secondary, &-secondary:hover {\n    background-color: transparent;\n    border-color: transparent;\n    color: ${theme.text};\n  }\n`);\n\nconst cssUseThisTemplateButton = styled(primaryButtonLink, `\n  margin: 8px;\n`);\n","import {getWelcomeHomeUrl, urlState} from 'app/client/models/gristUrlState';\nimport {getTheme} from 'app/client/ui/CustomThemes';\nimport {cssLeftPane} from 'app/client/ui/PagePanels';\nimport {colors, testId, theme, vars} from 'app/client/ui2018/cssVars';\nimport * as version from 'app/common/version';\nimport {menu, menuItem, menuItemLink, menuSubHeader} from 'app/client/ui2018/menus';\nimport {commonUrls} from 'app/common/gristUrls';\nimport {getOrgName, isTemplatesOrg, Organization} from 'app/common/UserAPI';\nimport {AppModel} from 'app/client/models/AppModel';\nimport {icon} from 'app/client/ui2018/icons';\nimport {DocPageModel} from 'app/client/models/DocPageModel';\nimport * as roles from 'app/common/roles';\nimport {manageTeamUsersApp} from 'app/client/ui/OpenUserManager';\nimport {maybeAddSiteSwitcherSection} from 'app/client/ui/SiteSwitcher';\nimport {Computed, Disposable, dom, DomContents, styled} from 'grainjs';\nimport {makeT} from 'app/client/lib/localization';\nimport {getGristConfig} from 'app/common/urlUtils';\n\nconst t = makeT('AppHeader');\n\n// Maps a name of a Product (from app/gen-server/entity/Product.ts) to a tag (pill) to show next\n// to the org name.\nconst productPills: {[name: string]: string|null} = {\n  // TODO We don't label paid team plans with a tag yet, but we should label as \"Pro\" once we\n  // update our pricing pages to refer to paid team plans as Pro plans.\n  \"professional\": null,   // Deprecated but used in development.\n  \"team\": null,           // Used for the paid team plans.\n  \"teamFree\": \"Free\",     // The new free team plan.\n  // Other plans are either personal, or grandfathered, or for testing.\n};\n\ninterface AppLogoOrgNameAndLink {\n  name: string;\n  link: AppLogoLink;\n  org?: string;\n  href?: string;\n}\n\ntype AppLogoLink = AppLogoOrgDomain | AppLogoHref;\n\ninterface AppLogoOrgDomain {\n  type: 'domain';\n  domain: string;\n}\n\ninterface AppLogoHref {\n  type: 'href';\n  href: string;\n}\n\nexport class AppHeader extends Disposable {\n  private _currentOrg = this._appModel.currentOrg;\n\n  /**\n   * The name and link of the site shown next to the logo.\n   *\n   * The last visited site is used, if known. Otherwise, the current site is used.\n   */\n  private _appLogoOrg = Computed.create<AppLogoOrgNameAndLink>(this, (use) => {\n    const availableOrgs = use(this._appModel.topAppModel.orgs);\n    const currentOrgName = (this._appModel.currentOrgName ||\n      (this._docPageModel && use(this._docPageModel.currentOrgName))) ?? '';\n    const lastVisitedOrgDomain = use(this._appModel.lastVisitedOrgDomain);\n    return this._getAppLogoOrgNameAndLink({availableOrgs, currentOrgName, lastVisitedOrgDomain});\n  });\n\n  private _appLogoOrgName = Computed.create(this, this._appLogoOrg, (_use, {name}) => name);\n\n  private _appLogoOrgLink = Computed.create(this, this._appLogoOrg, (_use, {link}) => link);\n\n  constructor(private _appModel: AppModel, private _docPageModel?: DocPageModel) {\n    super();\n  }\n\n  public buildDom() {\n    const productFlavor = getTheme(this._appModel.topAppModel.productFlavor);\n\n    return cssAppHeader(\n      cssAppHeader.cls('-widelogo', productFlavor.wideLogo || false),\n      dom.domComputed(this._appLogoOrgLink, orgLink => cssAppLogo(\n        // Show version when hovering over the application icon.\n        // Include gitcommit when known. Cast version.gitcommit since, depending\n        // on how Grist is compiled, tsc may believe it to be a constant and\n        // believe that testing it is unnecessary.\n        {title: `Version ${version.version}` +\n          ((version.gitcommit as string) !== 'unknown' ? ` (${version.gitcommit})` : '')},\n        this._setHomePageUrl(orgLink),\n        testId('dm-logo')\n      )),\n      this._buildOrgLinkOrMenu(),\n    );\n  }\n\n  private _buildOrgLinkOrMenu() {\n    const {currentValidUser, isPersonal, isTemplatesSite} = this._appModel;\n    if (!currentValidUser && (isPersonal || isTemplatesSite)) {\n      return cssOrgLink(\n        cssOrgName(dom.text(this._appLogoOrgName), testId('dm-orgname')),\n        {href: commonUrls.templates},\n        testId('dm-org'),\n      );\n    } else {\n      return cssOrg(\n        cssOrgName(dom.text(this._appLogoOrgName), testId('dm-orgname')),\n        productPill(this._currentOrg),\n        dom.maybe(this._appLogoOrgName, () => cssDropdownIcon('Dropdown')),\n        menu(() => [\n          menuSubHeader(\n            this._appModel.isPersonal\n              ? t(\"Personal Site\") + (this._appModel.isLegacySite ? ` (${t(\"Legacy\")})` : '')\n              : t(\"Team Site\"),\n            testId('orgmenu-title'),\n          ),\n          menuItemLink(urlState().setLinkUrl({}), t(\"Home Page\"), testId('orgmenu-home-page')),\n\n          // Show 'Organization Settings' when on a home page of a valid org.\n          (!this._docPageModel && this._currentOrg && !this._currentOrg.owner ?\n            menuItem(() => manageTeamUsersApp(this._appModel),\n              'Manage Team', testId('orgmenu-manage-team'),\n              dom.cls('disabled', !roles.canEditAccess(this._currentOrg.access))) :\n            // Don't show on doc pages, or for personal orgs.\n            null),\n\n          this._maybeBuildBillingPageMenuItem(),\n          this._maybeBuildActivationPageMenuItem(),\n\n          maybeAddSiteSwitcherSection(this._appModel),\n        ], { placement: 'bottom-start' }),\n        testId('dm-org'),\n      );\n    }\n  }\n\n  private _setHomePageUrl(link: AppLogoLink) {\n    if (link.type === 'href') {\n      return {href: link.href};\n    } else {\n      return urlState().setLinkUrl({org: link.domain});\n    }\n  }\n\n  private _maybeBuildBillingPageMenuItem() {\n    const {deploymentType} = getGristConfig();\n    if (deploymentType !== 'saas') { return null; }\n\n    const {currentOrg} = this._appModel;\n    const isBillingManager = this._appModel.isBillingManager() || this._appModel.isSupport();\n    return currentOrg && !currentOrg.owner ?\n      // For links, disabling with just a class is hard; easier to just not make it a link.\n      // TODO weasel menus should support disabling menuItemLink.\n      (isBillingManager\n        ? menuItemLink(\n          urlState().setLinkUrl({billing: 'billing'}),\n          'Billing Account',\n          testId('orgmenu-billing'),\n        )\n        : menuItem(\n          () => null,\n          'Billing Account',\n          dom.cls('disabled', true),\n          testId('orgmenu-billing'),\n        )\n      ) :\n      null;\n  }\n\n  private _maybeBuildActivationPageMenuItem() {\n    const {activation, deploymentType} = getGristConfig();\n    if (deploymentType !== 'enterprise' || !activation?.isManager) {\n      return null;\n    }\n\n    return menuItemLink('Activation', urlState().setLinkUrl({activation: 'activation'}));\n  }\n\n  private _getAppLogoOrgNameAndLink(params: {\n    availableOrgs: Organization[],\n    currentOrgName: string,\n    lastVisitedOrgDomain: string|null,\n  }): AppLogoOrgNameAndLink {\n    const {\n      currentValidUser,\n      isPersonal,\n      isTemplatesSite,\n    } = this._appModel;\n    if (!currentValidUser && (isPersonal || isTemplatesSite)) {\n      // When signed out and not on a team site, link to the templates site.\n      return {\n        name: t('Grist Templates'),\n        link: {\n          type: 'href',\n          href: commonUrls.templates,\n        },\n      };\n    }\n\n    const {availableOrgs, currentOrgName, lastVisitedOrgDomain} = params;\n    if (lastVisitedOrgDomain) {\n      const lastVisitedOrg = availableOrgs.find(({domain}) => domain === lastVisitedOrgDomain);\n      if (lastVisitedOrg) {\n        return {\n          name: getOrgName(lastVisitedOrg),\n          link: {\n            type: 'domain',\n            domain: lastVisitedOrgDomain,\n          },\n        };\n      }\n    }\n\n    return {\n      name: currentOrgName ?? '',\n      link: {\n        type: 'href',\n        href: getWelcomeHomeUrl(),\n      },\n    };\n  }\n}\n\nexport function productPill(org: Organization|null, options: {large?: boolean} = {}): DomContents {\n  if (!org || isTemplatesOrg(org)) {\n    return null;\n  }\n  const product = org?.billingAccount?.product.name;\n  const pillTag = product && productPills[product];\n  if (!pillTag) {\n    return null;\n  }\n  return cssProductPill(cssProductPill.cls('-' + pillTag),\n    options.large ? cssProductPill.cls('-large') : null,\n    pillTag,\n    testId('appheader-product-pill'));\n}\n\n\nconst cssAppHeader = styled('div', `\n  display: flex;\n  width: 100%;\n  height: 100%;\n  align-items: center;\n  background-color: ${theme.leftPanelBg};\n  &, &:hover, &:focus {\n    text-decoration: none;\n    outline: none;\n    color: ${theme.text};\n  }\n`);\n\nconst cssAppLogo = styled('a', `\n  flex: none;\n  height: 48px;\n  width: 48px;\n  background-image: var(--icon-GristLogo);\n  background-size: ${vars.logoSize};\n  background-repeat: no-repeat;\n  background-position: center;\n  background-color: ${vars.logoBg};\n  .${cssAppHeader.className}-widelogo & {\n    width: 100%;\n    background-size: contain;\n    background-origin: content-box;\n    padding: 8px;\n  }\n  .${cssLeftPane.className}-open .${cssAppHeader.className}-widelogo & {\n    background-image: var(--icon-GristWideLogo, var(--icon-GristLogo));\n  }\n`);\n\nconst cssDropdownIcon = styled(icon, `\n  --icon-color: ${theme.text};\n  flex-shrink: 0;\n  margin-right: 8px;\n`);\n\nconst cssOrg = styled('div', `\n  display: none;\n  flex-grow: 1;\n  align-items: center;\n  max-width: calc(100% - 48px);\n  cursor: pointer;\n  height: 100%;\n  font-weight: 500;\n\n  &:hover {\n    background-color: ${theme.hover};\n  }\n\n  .${cssLeftPane.className}-open & {\n    display: flex;\n  }\n`);\n\nconst cssOrgLink = styled('a', `\n  display: none;\n  flex-grow: 1;\n  align-items: center;\n  max-width: calc(100% - 48px);\n  cursor: pointer;\n  height: 100%;\n  font-weight: 500;\n  color: ${theme.text};\n  user-select: none;\n\n  &, &:hover, &:focus {\n    text-decoration: none;\n  }\n\n  &:hover {\n    color: ${theme.text};\n    background-color: ${theme.hover};\n  }\n\n  .${cssLeftPane.className}-open & {\n    display: flex;\n  }\n`);\n\nconst cssOrgName = styled('div', `\n  padding-left: 16px;\n  padding-right: 8px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  .${cssAppHeader.className}-widelogo & {\n    display: none;\n  }\n`);\n\nconst cssProductPill = styled('div', `\n  border-radius: 4px;\n  font-size: ${vars.smallFontSize};\n  padding: 2px 4px;\n  display: inline;\n  vertical-align: middle;\n\n  &-Free {\n    background-color: ${colors.orange};\n    color: white;\n  }\n  &-Pro {\n    background-color: ${colors.lightGreen};\n    color: white;\n  }\n  &-large {\n    padding: 4px 8px;\n    margin-left: 16px;\n    font-size: ${vars.mediumFontSize};\n  }\n`);\n","import {GristLoadConfig} from 'app/common/gristUrls';\nimport {styled} from 'grainjs';\n\nexport type ProductFlavor = 'grist' | 'fieldlink';\n\nexport interface CustomTheme {\n  bodyClassName?: string;\n  wideLogo?: boolean;   // Stretch the logo and hide the org name.\n}\n\nexport function getFlavor(org?: string): ProductFlavor {\n  // Using a URL parameter e.g. __themeOrg=fieldlink allows overriding the org used for custom\n  // theming, for testing.\n  const themeOrg = new URLSearchParams(window.location.search).get('__themeOrg');\n  if (themeOrg) { org = themeOrg; }\n\n  if (!org) {\n    const gristConfig: GristLoadConfig = (window as any).gristConfig;\n    org = gristConfig && gristConfig.org;\n  }\n  if (org === 'fieldlink') {\n    return 'fieldlink';\n  }\n  return 'grist';\n}\n\nexport function getTheme(flavor: ProductFlavor): CustomTheme {\n  switch (flavor) {\n    case 'fieldlink':\n      return {\n        wideLogo: true,\n        bodyClassName: cssFieldLinkBody.className,\n      };\n    default:\n      return {};\n  }\n}\n\nconst cssFieldLinkBody = styled('body', `\n  --icon-GristLogo: url(\"icons/logo-fieldlink.png\");\n  --icon-GristWideLogo: url(\"icons/logo-fieldlink.png\");\n  --grist-logo-bg: white;\n`);\n","import * as commands from 'app/client/components/commands';\nimport {makeT} from 'app/client/lib/localization';\nimport {ShortcutKey, ShortcutKeyContent} from 'app/client/ui/ShortcutKey';\nimport {icon} from 'app/client/ui2018/icons';\nimport {cssLink} from 'app/client/ui2018/links';\nimport {commonUrls, GristDeploymentType} from 'app/common/gristUrls';\nimport {BehavioralPrompt} from 'app/common/Prefs';\nimport {dom, DomContents, DomElementArg, styled} from 'grainjs';\n\nconst t = makeT('GristTooltips');\n\nconst cssTooltipContent = styled('div', `\n  display: flex;\n  flex-direction: column;\n  row-gap: 8px;\n`);\n\nconst cssBoldText = styled('span', `\n  font-weight: 600;\n`);\n\nconst cssItalicizedText = styled('span', `\n  font-style: italic;\n`);\n\nconst cssIcon = styled(icon, `\n  height: 18px;\n  width: 18px;\n`);\n\nexport type Tooltip =\n  | 'dataSize'\n  | 'setTriggerFormula'\n  | 'selectBy'\n  | 'workOnACopy'\n  | 'openAccessRules'\n  | 'addRowConditionalStyle'\n  | 'addColumnConditionalStyle';\n\nexport type TooltipContentFunc = (...domArgs: DomElementArg[]) => DomContents;\n\nexport const GristTooltips: Record<Tooltip, TooltipContentFunc> = {\n  dataSize: (...args: DomElementArg[]) => cssTooltipContent(\n    dom('div', t('The total size of all data in this document, excluding attachments.')),\n    dom('div', t('Updates every 5 minutes.')),\n    ...args,\n  ),\n  setTriggerFormula: (...args: DomElementArg[]) => cssTooltipContent(\n    dom('div',\n      t('Formulas that trigger in certain cases, and store the calculated value as data.')\n    ),\n    dom('div',\n      t('Useful for storing the timestamp or author of a new record, data cleaning, and more.')\n    ),\n    dom('div',\n      cssLink({href: commonUrls.helpTriggerFormulas, target: '_blank'}, t('Learn more.')),\n    ),\n    ...args,\n  ),\n  selectBy: (...args: DomElementArg[]) => cssTooltipContent(\n    dom('div', t('Link your new widget to an existing widget on this page.')),\n    dom('div',\n      cssLink({href: commonUrls.helpLinkingWidgets, target: '_blank'}, t('Learn more.')),\n    ),\n    ...args,\n  ),\n  workOnACopy: (...args: DomElementArg[]) => cssTooltipContent(\n    dom('div',\n      t('Try out changes in a copy, then decide whether to replace the original with your edits.')\n    ),\n    dom('div',\n      cssLink({href: commonUrls.helpTryingOutChanges, target: '_blank'}, 'Learn more.'),\n    ),\n    ...args,\n  ),\n  openAccessRules: (...args: DomElementArg[]) => cssTooltipContent(\n    dom('div',\n      t('Access rules give you the power to create nuanced rules to determine who can \\\nsee or edit which parts of your document.')\n    ),\n    dom('div',\n      cssLink({href: commonUrls.helpAccessRules, target: '_blank'}, t('Learn more.')),\n    ),\n    ...args,\n  ),\n  addRowConditionalStyle: (...args: DomElementArg[]) => cssTooltipContent(\n    dom('div', t('Apply conditional formatting to rows based on formulas.')),\n    dom('div',\n      cssLink({href: commonUrls.helpConditionalFormatting, target: '_blank'}, t('Learn more.')),\n    ),\n    ...args,\n  ),\n  addColumnConditionalStyle: (...args: DomElementArg[]) => cssTooltipContent(\n    dom('div', t('Apply conditional formatting to cells in this column when formula conditions are met.')),\n    dom('div', t('Click on “Open row styles” to apply conditional formatting to rows.')),\n    dom('div',\n      cssLink({href: commonUrls.helpConditionalFormatting, target: '_blank'}, t('Learn more.')),\n    ),\n    ...args,\n  ),\n};\n\nexport interface BehavioralPromptContent {\n  title: () => string;\n  content: (...domArgs: DomElementArg[]) => DomContents;\n  deploymentTypes: GristDeploymentType[] | '*';\n}\n\nexport const GristBehavioralPrompts: Record<BehavioralPrompt, BehavioralPromptContent> = {\n  referenceColumns: {\n    title: () => t('Reference Columns'),\n    content: (...args: DomElementArg[]) => cssTooltipContent(\n      dom('div', t('Reference columns are the key to {{relational}} data in Grist.', {\n        relational: cssBoldText(t('relational'))\n      })),\n      dom('div', t('They allow for one record to point (or refer) to another.')),\n      dom('div',\n        cssLink({href: commonUrls.helpColRefs, target: '_blank'}, t('Learn more.')),\n      ),\n      ...args,\n    ),\n    deploymentTypes: ['saas'],\n  },\n  referenceColumnsConfig: {\n    title: () => t('Reference Columns'),\n    content: (...args: DomElementArg[]) => cssTooltipContent(\n      dom('div', t('Select the table to link to.')),\n      dom('div', t('Cells in a reference column always identify an {{entire}} \\\nrecord in that table, but you may select which column from that record to show.', {\n          entire: cssItalicizedText(t('entire'))\n        })),\n      dom('div',\n        cssLink({href: commonUrls.helpUnderstandingReferenceColumns, target: '_blank'}, t('Learn more.')),\n      ),\n      ...args,\n    ),\n    deploymentTypes: ['saas'],\n  },\n  rawDataPage: {\n    title: () => t('Raw Data page'),\n    content: (...args: DomElementArg[]) => cssTooltipContent(\n      dom('div', t('The Raw Data page lists all data tables in your document, \\\nincluding summary tables and tables not included in page layouts.')),\n      dom('div', cssLink({href: commonUrls.helpRawData, target: '_blank'}, t('Learn more.'))),\n      ...args,\n    ),\n    deploymentTypes: ['saas'],\n  },\n  accessRules: {\n    title: () => t('Access Rules'),\n    content: (...args: DomElementArg[]) => cssTooltipContent(\n      dom('div', t('Access rules give you the power to create nuanced rules \\\nto determine who can see or edit which parts of your document.')),\n      dom('div', cssLink({href: commonUrls.helpAccessRules, target: '_blank'}, t('Learn more.'))),\n      ...args,\n    ),\n    deploymentTypes: ['saas'],\n  },\n  filterButtons: {\n    title: () => t('Pinning Filters'),\n    content: (...args: DomElementArg[]) => cssTooltipContent(\n      dom('div', t('Pinned filters are displayed as buttons above the widget.')),\n      dom('div', t('Unpin to hide the the button while keeping the filter.')),\n      dom('div', cssLink({href: commonUrls.helpFilterButtons, target: '_blank'}, t('Learn more.'))),\n      ...args,\n    ),\n    deploymentTypes: ['saas'],\n  },\n  nestedFiltering: {\n    title: () => t('Nested Filtering'),\n    content: (...args: DomElementArg[]) => cssTooltipContent(\n      dom('div', t('You can filter by more than one column.')),\n      dom('div', t('Only those rows will appear which match all of the filters.')),\n      ...args,\n    ),\n    deploymentTypes: ['saas'],\n  },\n  pageWidgetPicker: {\n    title: () => t('Selecting Data'),\n    content: (...args: DomElementArg[]) => cssTooltipContent(\n      dom('div', t('Select the table containing the data to show.')),\n      dom('div', t('Use the 𝚺 icon to create summary (or pivot) tables, for totals or subtotals.')),\n      ...args,\n    ),\n    deploymentTypes: ['saas'],\n  },\n  pageWidgetPickerSelectBy: {\n    title: () => t('Linking Widgets'),\n    content: (...args: DomElementArg[]) => cssTooltipContent(\n      dom('div', t('Link your new widget to an existing widget on this page.')),\n      dom('div', t('This is the secret to Grist\\'s dynamic and productive layouts.')),\n      dom('div', cssLink({href: commonUrls.helpLinkingWidgets, target: '_blank'}, t('Learn more.'))),\n      ...args,\n    ),\n    deploymentTypes: ['saas'],\n  },\n  editCardLayout: {\n    title: () => t('Editing Card Layout'),\n    content: (...args: DomElementArg[]) => cssTooltipContent(\n      dom('div', t('Rearrange the fields in your card by dragging and resizing cells.')),\n      dom('div', t('Clicking {{EyeHideIcon}} in each cell hides the field from this view without deleting it.', {\n        EyeHideIcon: cssIcon('EyeHide')\n      })),\n      ...args,\n    ),\n    deploymentTypes: ['saas'],\n  },\n  addNew: {\n    title: () => t('Add New'),\n    content: (...args: DomElementArg[]) => cssTooltipContent(\n      dom('div', t('Click the Add New button to create new documents or workspaces, or import data.')),\n      ...args,\n    ),\n    deploymentTypes: ['saas'],\n  },\n  rickRow: {\n    title: () => t('Anchor Links'),\n    content: (...args: DomElementArg[]) => cssTooltipContent(\n      dom('div',\n        t('To make an anchor link that takes the user to a specific cell, click on a row and press {{shortcut}}.',\n          {\n            shortcut: ShortcutKey(ShortcutKeyContent(commands.allCommands.copyLink.humanKeys[0])),\n          }\n        ),\n      ),\n      ...args,\n    ),\n    deploymentTypes: '*',\n  },\n  customURL: {\n    title: () => t('Custom Widgets'),\n    content: (...args: DomElementArg[]) => cssTooltipContent(\n      dom('div',\n        t(\n          'You can choose one of our pre-made widgets or embed your own by providing its full URL.'\n        ),\n      ),\n      dom('div', cssLink({href: commonUrls.helpCustomWidgets, target: '_blank'}, t('Learn more.'))),\n      ...args,\n    ),\n    deploymentTypes: ['saas'],\n  },\n};\n","import {detectCurrentLang, makeT, setAnonymousLocale} from 'app/client/lib/localization';\nimport {AppModel} from 'app/client/models/AppModel';\nimport {hoverTooltip} from 'app/client/ui/tooltips';\nimport {cssHoverCircle} from 'app/client/ui/TopBarCss';\nimport {theme} from 'app/client/ui2018/cssVars';\nimport {icon} from 'app/client/ui2018/icons';\nimport {menu, menuItem} from 'app/client/ui2018/menus';\nimport {getCountryCode} from 'app/common/Locales';\nimport {getGristConfig} from 'app/common/urlUtils';\nimport {dom, makeTestId, styled} from 'grainjs';\n\nconst testId = makeTestId('test-language-');\nconst t = makeT('LanguageMenu');\n\nexport function buildLanguageMenu(appModel: AppModel) {\n  // Get the list of languages from the config, or default to English.\n  const languages = getGristConfig().supportedLngs ?? ['en'];\n  // Get the current language (from user's preference, cookie or browser)\n  const userLanguage = detectCurrentLang();\n\n  if (appModel.currentValidUser) {\n    // For logged in users, we don't need to show the menu (they have a preference in their profile).\n    // But for tests we will show a hidden indicator.\n    return dom('input', {type: 'hidden'}, (testId(`current-` + userLanguage)));\n  }\n\n  // When we switch language, we need to reload the page to get the new translations.\n  // This button is only for anonymous users, so we don't need to save the preference or wait for anything.\n  const changeLanguage = (lng: string) => {\n    setAnonymousLocale(lng);\n    window.location.reload();\n  };\n  const flagIcon = buildFlagIcon(userLanguage);\n  return cssFlagButton(\n    // Flag or emoji flag if we have it.\n    cssFlagIconWrapper(flagIcon),\n    // Expose for test the current language use.\n    testId(`current-` + userLanguage),\n    menu(\n      // Convert the list of languages we support to menu items.\n      () => languages.map((lng) => menuItem(() => changeLanguage(lng), [\n        // Try to convert the locale to nice name, fallback to locale itself.\n        cssFirstUpper(translateLocale(lng) ?? lng),\n        // If this is current language, mark it with a tick (by default we mark en).\n        userLanguage === lng ? cssWrapper(icon('Tick'), testId('selected')) : null,\n        testId(`lang-` + lng),\n      ])),\n      {\n        placement: 'bottom-end',\n      }\n    ),\n    hoverTooltip(t('Language'), {key: 'topBarBtnTooltip'}),\n    testId('button'),\n  );\n}\n\nfunction buildFlagIcon(locale: string) {\n  const countryCode = getCountryCode(locale);\n  return [\n    // Try to show an icon of the country's flag. (The icon may not exist.)\n    !countryCode ? null : cssFlagIcon({\n      // Unfortunately, Windows doesn't support emoji flags, so we need to use SVG icons.\n      style: `background-image: url(\"icons/locales/${countryCode}.svg\");`,\n    }, testId('button-icon')),\n    // Display a placeholder icon behind the one above, to act as a fallback.\n    cssPlaceholderFlagIcon('Flag'),\n  ];\n}\n\nexport function translateLocale(locale: string) {\n  try {\n    locale = locale.replace(\"_\", \"-\");\n    // This API might not be available in all browsers.\n    const languageNames = new Intl.DisplayNames([locale], {type: 'language'});\n    return languageNames.of(locale) || null;\n  } catch (err) {\n    return null;\n  }\n}\n\nconst cssWrapper = styled('div', `\n  margin-left: auto;\n  display: inline-block;\n`);\n\nconst cssFirstUpper = styled('span', `\n  &::first-letter {\n    text-transform: capitalize;\n  }\n`);\n\nconst cssFlagButton = styled(cssHoverCircle, `\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 5px;\n  cursor: pointer;\n`);\n\nconst cssFlagIconWrapper = styled('div', `\n  position: relative;\n  width: 16px;\n  height: 16px;\n`);\n\nconst cssFlagIcon = styled('div', `\n  position: absolute;\n  width: 16px;\n  height: 16px;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-color: transparent;\n  background-size: contain;\n  z-index: 1;\n`);\n\nconst cssPlaceholderFlagIcon = styled(icon, `\n  position: absolute;\n  --icon-color: ${theme.topBarButtonPrimaryFg};\n`);\n","/**\n * These styles are used in HomeLeftPanel, and in Tools for the document left panel.\n * They work in a structure like this:\n *\n *    import * as css from 'app/client/ui/LeftPanelStyles';\n *    css.cssLeftPanel(\n *      css.cssScrollPane(\n *        css.cssTools(\n *          css.cssSectionHeader(...),\n *          css.cssPageEntry(css.cssPageLink(cssPageIcon(...), css.cssLinkText(...))),\n *          css.cssPageEntry(css.cssPageLink(cssPageIcon(...), css.cssLinkText(...))),\n *        )\n *      )\n *    )\n */\nimport {beaconOpenMessage} from 'app/client/lib/helpScout';\nimport {makeT} from 'app/client/lib/localization';\nimport {AppModel} from 'app/client/models/AppModel';\nimport {testId, theme, vars} from 'app/client/ui2018/cssVars';\nimport {icon} from 'app/client/ui2018/icons';\nimport {commonUrls, isFeatureEnabled} from 'app/common/gristUrls';\nimport {dom, DomContents, Observable, styled} from 'grainjs';\n\nconst t = makeT('LeftPanelCommon');\n\n/**\n * Creates the \"help tools\", a button/link to open HelpScout beacon, and one to open the\n * HelpCenter in a new tab.\n */\nexport function createHelpTools(appModel: AppModel): DomContents {\n  if (!isFeatureEnabled(\"helpCenter\")) {\n    return [];\n  }\n  return cssSplitPageEntry(\n    cssPageEntryMain(\n      cssPageLink(cssPageIcon('Help'),\n        cssLinkText(t(\"Help Center\")),\n        dom.cls('tour-help-center'),\n        dom.on('click', (ev) => beaconOpenMessage({appModel})),\n        testId('left-feedback'),\n      ),\n    ),\n    cssPageEntrySmall(\n      cssPageLink(cssPageIcon('FieldLink'),\n        {href: commonUrls.help, target: '_blank'},\n      ),\n    ),\n  );\n}\n\n/**\n * Creates a basic left panel, used in error and billing pages. It only contains the help tools.\n */\nexport function leftPanelBasic(appModel: AppModel, panelOpen: Observable<boolean>) {\n  return cssLeftPanel(\n    cssScrollPane(\n      cssTools(\n        cssTools.cls('-collapsed', (use) => !use(panelOpen)),\n        cssSpacer(),\n        createHelpTools(appModel),\n      )\n    )\n  );\n}\n\n\nexport const cssLeftPanel = styled('div', `\n  flex: 1 1 0px;\n  font-size: ${vars.mediumFontSize};\n  display: flex;\n  flex-direction: column;\n`);\n\nexport const cssScrollPane = styled('div', `\n  flex: 1 1 0px;\n  overflow: hidden auto;\n  display: flex;\n  flex-direction: column;\n`);\n\nexport const cssTools = styled('div', `\n  flex: none;\n  margin-top: auto;\n  padding: 16px 0 16px 0;\n`);\n\nexport const cssSectionHeader = styled('div', `\n  margin: 24px 0 8px 24px;\n  color: ${theme.lightText};\n  text-transform: uppercase;\n  font-weight: 500;\n  font-size: ${vars.xsmallFontSize};\n  letter-spacing: 1px;\n  .${cssTools.className}-collapsed > & {\n    visibility: hidden;\n  }\n`);\n\nexport const cssPageEntry = styled('div', `\n  margin: 0px 16px 0px 0px;\n  border-radius: 0 3px 3px 0;\n  color: ${theme.text};\n  --icon-color: ${theme.lightText};\n  cursor: default;\n\n  &:hover, &.weasel-popup-open, &-renaming {\n    background-color: ${theme.pageHoverBg};\n  }\n  &-selected, &-selected:hover, &-selected.weasel-popup-open {\n    background-color: ${theme.activePageBg};\n    color: ${theme.activePageFg};\n    --icon-color: ${theme.activePageFg};\n  }\n  &-disabled, &-disabled:hover, &-disabled.weasel-popup-open {\n    background-color: initial;\n    color: ${theme.disabledPageFg};\n    --icon-color: ${theme.disabledPageFg};\n  }\n  .${cssTools.className}-collapsed > & {\n    margin-right: 0;\n  }\n`);\n\nexport const cssPageLink = styled('a', `\n  display: flex;\n  align-items: center;\n  height: 32px;\n  line-height: 32px;\n  padding-left: 24px;\n  outline: none;\n  cursor: pointer;\n  &, &:hover, &:focus {\n    text-decoration: none;\n    outline: none;\n    color: inherit;\n  }\n  .${cssTools.className}-collapsed & {\n    padding-left: 16px;\n  }\n`);\n\nexport const cssLinkText = styled('span', `\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  .${cssTools.className}-collapsed & {\n    display: none;\n  }\n`);\n\nexport const cssPageIcon = styled(icon, `\n  flex: none;\n  margin-right: var(--page-icon-margin, 8px);\n  .${cssTools.className}-collapsed & {\n    margin-right: 0;\n  }\n`);\n\nexport const cssSpacer = styled('div', `\n  height: 18px;\n`);\n\nexport const cssSplitPageEntry = styled('div', `\n  display: flex;\n  align-items: center;\n`);\n\nexport const cssPageEntryMain = styled(cssPageEntry, `\n  flex: auto;\n  margin: 0;\n  min-width: 0px;\n`);\n\nexport const cssPageEntrySmall = styled(cssPageEntry, `\n  flex: none;\n  border-radius: 3px;\n  --icon-color: ${theme.controlFg};\n  & > .${cssPageLink.className} {\n    padding: 0 8px 0 16px;\n  }\n  &:hover {\n    --icon-color: ${theme.controlHoverFg};\n  }\n  .${cssTools.className}-collapsed & {\n    display: none;\n  }\n`);\n\nexport const cssMenuTrigger = styled('div', `\n  margin: 0 4px 0 auto;\n  height: 24px;\n  width: 24px;\n  padding: 4px;\n  line-height: 0px;\n  border-radius: 3px;\n  cursor: default;\n  display: none;\n  .${cssPageLink.className}:hover > &, &.weasel-popup-open {\n    display: block;\n  }\n  &:hover, &.weasel-popup-open {\n    background-color: ${theme.pageOptionsHoverBg};\n  }\n  .${cssPageEntry.className}-selected &:hover, .${cssPageEntry.className}-selected &.weasel-popup-open {\n    background-color: ${theme.pageOptionsSelectedHoverBg};\n  }\n`);\n","/**\n * Link or button that opens a menu to make a copy of a document, full or empty. It's used for\n * the sample documents (those in the Support user's Examples & Templates workspace).\n */\n\nimport {makeT} from 'app/client/lib/localization';\nimport {AppModel, reportError} from 'app/client/models/AppModel';\nimport {DocPageModel} from \"app/client/models/DocPageModel\";\nimport {getLoginOrSignupUrl, urlState} from 'app/client/models/gristUrlState';\nimport {getWorkspaceInfo, ownerName, workspaceName} from 'app/client/models/WorkspaceInfo';\nimport {cssInput} from 'app/client/ui/cssInput';\nimport {bigBasicButton, bigPrimaryButtonLink} from 'app/client/ui2018/buttons';\nimport {cssRadioCheckboxOptions, labeledSquareCheckbox, radioCheckboxOption} from 'app/client/ui2018/checkbox';\nimport {testId, theme, vars} from 'app/client/ui2018/cssVars';\nimport {loadingSpinner} from 'app/client/ui2018/loaders';\nimport {select} from 'app/client/ui2018/menus';\nimport {\n  confirmModal,\n  cssModalBody,\n  cssModalButtons,\n  cssModalTitle,\n  cssModalWidth,\n  modal,\n  saveModal\n} from 'app/client/ui2018/modals';\nimport {FullUser} from 'app/common/LoginSessionAPI';\nimport * as roles from 'app/common/roles';\nimport {Document, isTemplatesOrg, Organization, Workspace} from 'app/common/UserAPI';\nimport {Computed, Disposable, dom, input, Observable, styled, subscribe} from 'grainjs';\nimport sortBy = require('lodash/sortBy');\n\nconst t = makeT('MakeCopyMenu');\n\nexport async function replaceTrunkWithFork(user: FullUser|null, doc: Document, app: AppModel, origUrlId: string) {\n  const trunkAccess = (await app.api.getDoc(origUrlId)).access;\n  if (!roles.canEdit(trunkAccess)) {\n    modal((ctl) => [\n      cssModalBody(t(\"Replacing the original requires editing rights on the original document.\")),\n      cssModalButtons(\n        bigBasicButton(t(\"Cancel\"), dom.on('click', () => ctl.close())),\n      )\n    ]);\n    return;\n  }\n  const docApi = app.api.getDocAPI(origUrlId);\n  const cmp = await docApi.compareDoc(doc.id);\n  let titleText = t(\"Update Original\");\n  let buttonText = t(\"Update\");\n  let warningText = t(\"The original version of this document will be updated.\");\n  if (cmp.summary === 'left' || cmp.summary === 'both') {\n    titleText = t(\"Original Has Modifications\");\n    buttonText = t(\"Overwrite\");\n    warningText = `${warningText} ${t(\"Be careful, the original has changes \\\nnot in this document. Those changes will be overwritten.\")}`;\n  } else if (cmp.summary === 'unrelated') {\n    titleText = t(\"Original Looks Unrelated\");\n    buttonText = t(\"Overwrite\");\n    warningText = `${warningText} ${t(\"It will be overwritten, losing any content not in this document.\")}`;\n  } else if (cmp.summary === 'same') {\n    titleText = t('Original Looks Identical');\n    warningText = `${warningText} ${t(\"However, it appears to be already identical.\")}`;\n  }\n  confirmModal(titleText, buttonText,\n    async () => {\n      try {\n        await docApi.replace({sourceDocId: doc.id});\n        await urlState().pushUrl({doc: origUrlId});\n      } catch (e) {\n        reportError(e);  // For example: no write access on trunk.\n      }\n    }, {explanation: warningText});\n}\n\n// Show message in a modal with a `Sign up` button that redirects to the login page.\nfunction signupModal(message: string) {\n  return modal((ctl) => [\n    cssModalBody(message),\n    cssModalButtons(\n      bigPrimaryButtonLink(t(\"Sign up\"), {href: getLoginOrSignupUrl(), target: '_blank'}, testId('modal-signup')),\n      bigBasicButton(t(\"Cancel\"), dom.on('click', () => ctl.close())),\n    ),\n    cssModalWidth('normal'),\n  ]);\n}\n\n/**\n * Whether we should offer user the option to copy this doc to other orgs.\n * We allow copying out of source org when the source org is a personal org, or user has owner\n * access to the doc, or the doc is public.\n */\nfunction allowOtherOrgs(doc: Document, app: AppModel): boolean {\n  const org = app.currentOrg;\n  const isPersonalOrg = Boolean(org && org.owner);\n  // We allow copying out of a personal org.\n  if (isPersonalOrg) { return true; }\n  // Otherwise, it's a proper org. Allow copying out if the doc is public or if the user has\n  // owner access to it. In case of a fork, it's the owner access to trunk that matters.\n  if (doc.public || roles.canEditAccess(doc.trunkAccess || doc.access)) { return true; }\n  // For non-public docs on a team site, non-privileged users are not allowed to copy them out.\n  return false;\n}\n\n\n/**\n * Ask user for the destination and new name, and make a copy of the doc using those.\n */\nexport async function makeCopy(doc: Document, app: AppModel, modalTitle: string): Promise<void> {\n  if (!app.currentValidUser) {\n    signupModal(t(\"To save your changes, please sign up, then reload this page.\"));\n    return;\n  }\n  let orgs = allowOtherOrgs(doc, app) ? await app.api.getOrgs(true) : null;\n  if (orgs) {\n    // Don't show the templates org since it's selected by default, and\n    // is not writable to.\n    orgs = orgs.filter(o => !isTemplatesOrg(o));\n  }\n\n  // Show a dialog with a form to select destination.\n  saveModal((ctl, owner) => {\n    const saveCopyModal = SaveCopyModal.create(owner, doc, app, orgs);\n    return {\n      title: modalTitle,\n      body: saveCopyModal.buildDom(),\n      saveFunc: () => saveCopyModal.save(),\n      saveDisabled: saveCopyModal.saveDisabled,\n      width: 'normal',\n    };\n  });\n}\n\nclass SaveCopyModal extends Disposable {\n  private _workspaces = Observable.create<Workspace[]|null>(this, null);\n  private _destName = Observable.create<string>(this, '');\n  private _destOrg = Observable.create<Organization|null>(this, this._app.currentOrg);\n  private _destWS = Observable.create<Workspace|null>(this, this._doc.workspace);\n  private _asTemplate = Observable.create<boolean>(this, false);\n  private _saveDisabled = Computed.create(this, this._destWS, this._destName, (use, ws, name) =>\n    (!name.trim() || !ws || !roles.canEdit(ws.access)));\n\n  // Only show workspaces for team sites, since they are not a feature of personal orgs.\n  private _showWorkspaces = Computed.create(this, this._destOrg, (use, org) => Boolean(org && !org.owner));\n\n  // If orgs is non-null, then we show a selector for orgs.\n  constructor(private _doc: Document, private _app: AppModel, private _orgs: Organization[]|null) {\n    super();\n    if (_doc.name !== 'Untitled') {\n      this._destName.set(_doc.name + ' (copy)');\n    }\n    if (this._orgs && this._app.currentOrg) {\n      // Set _destOrg to an Organization object from _orgs array; there should be one equivalent\n      // to currentOrg, but we need the actual object for select() to recognize it as selected.\n      const orgId = this._app.currentOrg.id;\n      this._destOrg.set(this._orgs.find((org) => org.id === orgId) || this._orgs[0]);\n    }\n    this.autoDispose(subscribe(this._destOrg, (use, org) => this._updateWorkspaces(org).catch(reportError)));\n  }\n\n  public get saveDisabled() { return this._saveDisabled; }\n\n  public async save() {\n    const ws = this._destWS.get();\n    if (!ws) { throw new Error(t(\"No destination workspace\")); }\n    const api = this._app.api;\n    const org = this._destOrg.get();\n    const docWorker = await api.getWorkerAPI('import');\n    const destName = this._destName.get() + '.grist';\n    try {\n      const uploadId = await docWorker.copyDoc(this._doc.id, this._asTemplate.get(), destName);\n      const {id} = await docWorker.importDocToWorkspace(uploadId, ws.id);\n      await urlState().pushUrl({org: org?.domain || undefined, doc: id, docPage: urlState().state.get().docPage});\n    } catch(err) {\n      // Convert access denied errors to normal Error to make it consistent with other endpoints.\n      // TODO: Should not allow to click this button when user doesn't have permissions.\n      if (err.status === 403) {\n        throw new Error(err.details.userError || err.message);\n      }\n      throw err;\n    }\n  }\n\n  public buildDom() {\n    return [\n      cssField(\n        cssLabel(t(\"Name\")),\n        input(this._destName, {onInput: true}, {placeholder: t(\"Enter document name\")},  dom.cls(cssInput.className),\n          // modal dialog grabs focus after 10ms delay; so to focus this input, wait a bit longer\n          // (see the TODO in app/client/ui2018/modals.ts about weasel.js and focus).\n          (elem) => { setTimeout(() => { elem.focus(); }, 20); },\n          dom.on('focus', (ev, elem) => { elem.select(); }),\n          testId('copy-dest-name'))\n      ),\n      cssField(\n        cssLabel(t(\"As Template\")),\n        cssCheckbox(this._asTemplate, t(\"Include the structure without any of the data.\"),\n          testId('save-as-template'))\n      ),\n      // Show the team picker only when saving to other teams is allowed and there are other teams\n      // accessible.\n      (this._orgs ?\n        cssField(\n          cssLabel(t(\"Organization\")),\n          select(this._destOrg, this._orgs.map(value => ({value, label: value.name}))),\n          testId('copy-dest-org'),\n        ) : null\n      ),\n      // Don't show the workspace picker when destOrg is a personal site and there is just one\n      // workspace, since workspaces are not a feature of personal orgs.\n      // Show the workspace picker only when destOrg is a team site, because personal orgs do not have workspaces.\n      dom.domComputed((use) => use(this._showWorkspaces) && use(this._workspaces), (wss) =>\n        wss === false ? null :\n        wss && wss.length === 0 ? cssWarningText(t(\"You do not have write access to this site\"),\n          testId('copy-warning')) :\n        [\n          cssField(\n            cssLabel(t(\"Workspace\")),\n            (wss === null ?\n              cssSpinner(loadingSpinner()) :\n              select(this._destWS, wss.map(value => ({\n                value,\n                label: workspaceName(this._app, value),\n                disabled: !roles.canEdit(value.access),\n              })))\n            ),\n            testId('copy-dest-workspace'),\n          ),\n          wss ? dom.domComputed(this._destWS, (destWs) =>\n            destWs && !roles.canEdit(destWs.access) ?\n              cssWarningText(t(\"You do not have write access to the selected workspace\"),\n                testId('copy-warning')\n              ) : null\n          ) : null\n        ]\n      ),\n    ];\n  }\n\n  /**\n   * Fetch a list of workspaces for the given org, in the same order in which we list them in HomeModel,\n   * and set this._workspaces to it. While fetching, this._workspaces is set to null.\n   * Once fetched, we also set this._destWS.\n   */\n  private async _updateWorkspaces(org: Organization|null) {\n    this._workspaces.set(null);     // Show that workspaces are loading.\n    this._destWS.set(null);         // Disable saving while waiting to set a new destination workspace.\n    try {\n      let wss = org ? await this._app.api.getOrgWorkspaces(org.id) : [];\n      if (this._destOrg.get() !== org) {\n        // We must have switched the org. Don't update anything; in particularr, keep _workspaces\n        // and _destWS as null, to show loading/save-disabled status. Let the new fetch update things.\n        return;\n      }\n      // Sort the same way that HomeModel sorts workspaces.\n      wss = sortBy(wss,\n        (ws) => [ws.isSupportWorkspace, ownerName(this._app, ws).toLowerCase(), ws.name.toLowerCase()]);\n      // Filter out isSupportWorkspace, since it's not writable and confusing to include.\n      // (The support user creating a new example can just download and upload.)\n      wss = wss.filter(ws => !ws.isSupportWorkspace);\n\n      let defaultWS: Workspace|undefined;\n      const showWorkspaces = (org && !org.owner);\n      if (showWorkspaces) {\n        // If we show a workspace selector, default to the current document's workspace (when its\n        // org is selected) even if it's not writable. User can switch the workspace manually.\n        defaultWS = wss.find(ws => (ws.id === this._doc.workspace.id));\n      } else {\n        // If the workspace selector is not shown (for personal orgs), prefer the user's default\n        // Home workspace as long as its writable.\n        defaultWS = wss.find(ws => getWorkspaceInfo(this._app, ws).isDefault && roles.canEdit(ws.access));\n      }\n      const firstWritable = wss.find(ws => roles.canEdit(ws.access));\n\n      // If there is at least one destination available, set one as the current selection.\n      // Otherwise, make it clear to the user that there are no options.\n      if (firstWritable) {\n        this._workspaces.set(wss);\n        this._destWS.set(defaultWS || firstWritable);\n      } else {\n        this._workspaces.set([]);\n        this._destWS.set(null);\n      }\n    } catch (e) {\n      this._workspaces.set([]);\n      this._destWS.set(null);\n      throw e;\n    }\n  }\n}\n\ntype DownloadOption = 'full' | 'nohistory' | 'template';\n\nexport function downloadDocModal(doc: Document, pageModel: DocPageModel) {\n  return modal((ctl, owner) => {\n    const selected = Observable.create<DownloadOption>(owner, 'full');\n\n    return [\n      cssModalTitle(`Download document`),\n      cssRadioCheckboxOptions(\n          radioCheckboxOption(selected, 'full', t(\"Download full document and history\")),\n          radioCheckboxOption(selected, 'nohistory', t(\"Remove document history (can significantly reduce file size)\")),\n          radioCheckboxOption(selected, 'template', t(\"Remove all data but keep the structure to use as a template\")),\n      ),\n      cssModalButtons(\n        dom.domComputed(use =>\n          bigPrimaryButtonLink(`Download`, {\n              href: pageModel.appModel.api.getDocAPI(doc.id).getDownloadUrl({\n                template: use(selected) === \"template\",\n                removeHistory: use(selected) === \"nohistory\" || use(selected) === \"template\",\n              }),\n              target: '_blank',\n              download: ''\n            },\n            dom.on('click', () => {\n              ctl.close();\n            }),\n            testId('download-button-link'),\n          ),\n        ),\n        bigBasicButton('Cancel', dom.on('click', () => {\n          ctl.close();\n        }))\n      )\n    ];\n  });\n}\n\nexport const cssField = styled('div', `\n  margin: 16px 0;\n  display: flex;\n`);\n\nexport const cssLabel = styled('label', `\n  font-weight: normal;\n  font-size: ${vars.mediumFontSize};\n  color: ${theme.text};\n  margin: 8px 16px 0 0;\n  white-space: nowrap;\n  width: 80px;\n  flex: none;\n`);\n\nconst cssWarningText = styled('div', `\n  color: ${theme.errorText};\n  margin-top: 8px;\n`);\n\nconst cssSpinner = styled('div', `\n  text-align: center;\n  flex: 1;\n  height: 30px;\n`);\n\nconst cssCheckbox = styled(labeledSquareCheckbox, `\n  margin-top: 8px;\n`);\n","import {beaconOpenMessage, IBeaconOpenOptions} from 'app/client/lib/helpScout';\nimport {makeT} from 'app/client/lib/localization';\nimport {AppModel} from 'app/client/models/AppModel';\nimport {ConnectState} from 'app/client/models/ConnectState';\nimport {urlState} from 'app/client/models/gristUrlState';\nimport {Expirable, IAppError, Notification, Notifier, NotifyAction, Progress} from 'app/client/models/NotifyModel';\nimport {hoverTooltip} from 'app/client/ui/tooltips';\nimport {cssHoverCircle, cssTopBarBtn} from 'app/client/ui/TopBarCss';\nimport {theme, vars} from 'app/client/ui2018/cssVars';\nimport {icon} from 'app/client/ui2018/icons';\nimport {IconName} from \"app/client/ui2018/IconList\";\nimport {menuCssClass} from 'app/client/ui2018/menus';\nimport {commonUrls, isFeatureEnabled} from 'app/common/gristUrls';\nimport {dom, makeTestId, styled} from 'grainjs';\nimport {cssMenu, defaultMenuOptions, IOpenController, setPopupToCreateDom} from 'popweasel';\n\nconst t = makeT('NotifyUI');\n\nconst testId = makeTestId('test-notifier-');\n\n\nfunction buildAction(action: NotifyAction, item: Notification, options: IBeaconOpenOptions): HTMLElement|null {\n  const appModel = options.appModel;\n  switch (action) {\n    case 'upgrade':\n      if (appModel) {\n        return cssToastAction(t(\"Upgrade Plan\"), dom.on('click', () =>\n          appModel.showUpgradeModal()));\n      } else {\n        return dom('a', cssToastAction.cls(''), t(\"Upgrade Plan\"), {target: '_blank'},\n          {href: commonUrls.plans});\n      }\n    case 'manage':\n      if (urlState().state.get().billing === 'billing') { return null; }\n      return dom('a', cssToastAction.cls(''), t(\"Manage billing\"), {target: '_blank'},\n        {href: urlState().makeUrl({billing: 'billing'})});\n    case 'renew':\n      // If already on the billing page, nothing to return.\n      if (urlState().state.get().billing === 'billing') { return null; }\n      // If not a billing manager, nothing to return.\n      if (appModel && appModel.currentOrg && appModel.currentOrg.billingAccount &&\n          !appModel.currentOrg.billingAccount.isManager) { return null; }\n      // Otherwise return a link to the billing page.\n      return dom('a', cssToastAction.cls(''), t(\"Renew\"), {target: '_blank'},\n                 {href: urlState().makeUrl({billing: 'billing'})});\n\n    case 'personal':\n      if (!appModel) { return null; }\n      return cssToastAction(t(\"Go to your free personal site\"), dom.on('click', async () => {\n        const info = await appModel.api.getSessionAll();\n        const orgs = info.orgs.filter(org => org.owner && org.owner.id === appModel.currentUser?.id);\n        if (orgs.length !== 1) {\n          throw new Error(t(\"Cannot find personal site, sorry!\"));\n        }\n        window.location.assign(urlState().makeUrl({org: orgs[0].domain || undefined}));\n      }));\n\n    case 'report-problem':\n      return cssToastAction(t(\"Report a problem\"), testId('toast-report-problem'),\n        dom.on('click', () => beaconOpenMessage({...options, includeAppErrors: true})));\n\n    case 'ask-for-help': {\n      const errors: IAppError[] = [{\n        error: new Error(item.options.message as string),\n        timestamp: item.options.timestamp,\n      }];\n      return cssToastAction(t(\"Ask for help\"),\n        dom.on('click', () => beaconOpenMessage({...options, includeAppErrors: true, errors})));\n    }\n\n    default:\n      return cssToastAction(action.label, testId('toast-custom-action'),\n        dom.on('click', action.action));\n  }\n}\n\nfunction notificationIcon(item: Notification) {\n let iconName: IconName|null = null;\n  switch(item.options.level) {\n    case \"error\":   iconName = \"Warning\"; break;\n    case \"warning\": iconName = \"Warning\"; break;\n    case \"success\": iconName = \"TickSolid\"; break;\n    case \"info\": iconName = \"Info\"; break;\n  }\n  return iconName ? icon(iconName, dom.cls(cssToastIcon.className)) : null;\n}\n\nfunction buildNotificationDom(item: Notification, options: IBeaconOpenOptions) {\n  const iconElement = notificationIcon(item);\n  const hasLeftIcon = Boolean(!item.options.title && iconElement);\n  return cssToastWrapper(testId('toast-wrapper'),\n    cssToastWrapper.cls(use => `-${use(item.status)}`),\n    cssToastWrapper.cls(`-${item.options.level}`),\n    cssToastWrapper.cls('-memo', item.options.memos.length > 0),\n    cssToastWrapper.cls(hasLeftIcon ? '-left-icon' : ''),\n    item.options.title ? null : iconElement,\n    cssToastBody(\n      item.options.title ? cssToastTitle(notificationIcon(item), cssToastTitle(item.options.title)) : null,\n      cssToastText(testId('toast-message'),\n        item.options.message,\n      ),\n      item.options.actions.length ? cssToastActions(\n        item.options.actions.map((action) => buildAction(action, item, options))\n      ) : null,\n      item.options.memos.length ? cssToastMemos(\n        item.options.memos.map(memo => cssToastMemo(\n          cssToastMemoIcon('Memo'),\n          dom('div', memo, testId('toast-memo')),\n        ))\n      ) : null,\n    ),\n    dom.maybe(item.options.canUserClose, () =>\n      cssToastClose(testId('toast-close'),\n        '✕',\n        dom.on('click', () => item.dispose())\n      )\n    )\n  );\n}\n\nfunction buildProgressDom(item: Progress) {\n  return cssToastWrapper(testId('progress-wrapper'),\n    cssToastBody(\n      cssToastText(testId('progress-message'),\n        dom.text(item.options.name),\n        dom.maybe(item.options.size, size => cssProgressBarSize(` (${size})`))\n      ),\n      cssProgressBarWrapper(\n        cssProgressBarStatus(\n          dom.style('width', use => `${use(item.progress)}%`)\n        )\n      )\n    )\n  );\n}\n\nexport function buildNotifyMenuButton(notifier: Notifier, appModel: AppModel|null) {\n  const {connectState} = notifier.getStateForUI();\n  return cssHoverCircle({style: `margin: 5px;`},\n    dom.domComputed(connectState, (state) => buildConnectStateButton(state)),\n    (elem) => {\n      setPopupToCreateDom(elem, (ctl) => buildNotifyDropdown(ctl, notifier, appModel),\n        {...defaultMenuOptions, placement: 'bottom-end'});\n    },\n    hoverTooltip('Notifications', {key: 'topBarBtnTooltip'}),\n    testId('menu-btn'),\n  );\n}\n\nfunction buildNotifyDropdown(ctl: IOpenController, notifier: Notifier, appModel: AppModel|null): Element {\n  const {connectState, disconnectMsg, dropdownItems} = notifier.getStateForUI();\n\n  return cssDropdownWrapper(\n    // Reuse css classes for menus (combination of popweasel classes and those from Grist menus)\n    dom.cls(cssMenu.className),\n    dom.cls(menuCssClass),\n\n    // Close on Escape.\n    dom.onKeyDown({Escape: () => ctl.close()}),\n    // Once attached, focus this element, so that it accepts keyboard events.\n    (elem) => { setTimeout(() => elem.focus(), 0); },\n\n    cssDropdownContent(\n      cssDropdownHeader(\n        cssDropdownHeaderTitle(t(\"Notifications\")),\n        !isFeatureEnabled(\"helpCenter\") ? null :\n        cssDropdownFeedbackLink(\n          cssDropdownFeedbackIcon('Feedback'),\n          t(\"Give feedback\"),\n          dom.on('click', () => beaconOpenMessage({appModel, onOpen: () => ctl.close(), route: '/ask/message/'})),\n          testId('feedback'),\n        )\n      ),\n      dom.maybe(disconnectMsg, (msg) =>\n        cssDropdownStatus(\n          buildConnectStateButton(connectState.get()),\n          dom('div', cssDropdownStatusText(msg.message), testId('disconnect-msg')),\n        )\n      ),\n      dom.maybe((use) => use(dropdownItems).length === 0 && !use(disconnectMsg), () =>\n        cssDropdownStatus(\n          dom('div', cssDropdownStatusText(t(\"No notifications\"))),\n        )\n      ),\n      dom.forEach(dropdownItems, item =>\n        buildNotificationDom(item, {appModel, onOpen: () => ctl.close()})),\n    ),\n    testId('dropdown'),\n  );\n}\n\nexport function buildSnackbarDom(notifier: Notifier, appModel: AppModel|null): Element {\n  const {progressItems, toasts} = notifier.getStateForUI();\n  return cssSnackbarWrapper(testId('snackbar-wrapper'),\n    dom.forEach(progressItems, item => buildProgressDom(item)),\n    dom.forEach(toasts, toast => buildNotificationDom(toast, {appModel})),\n  );\n}\n\nfunction buildConnectStateButton(state: ConnectState): Element {\n  switch (state) {\n    case ConnectState.JustDisconnected: return cssTopBarBtn('Notification', cssTopBarBtn.cls('-slate'));\n    case ConnectState.RecentlyDisconnected: return cssTopBarBtn('Offline', cssTopBarBtn.cls('-slate'));\n    case ConnectState.ReallyDisconnected: return cssTopBarBtn('Offline', cssTopBarBtn.cls('-error'));\n    case ConnectState.Connected:\n    default:\n      return cssTopBarBtn('Notification');\n  }\n}\n\n\nconst cssDropdownWrapper = styled('div', `\n  background-color: ${theme.notificationsPanelBodyBg};\n  border: 1px solid ${theme.notificationsPanelBorder};\n  padding: 0px;\n`);\n\nconst cssDropdownContent = styled('div', `\n  min-width: 320px;\n  max-width: 320px;\n`);\n\nconst cssDropdownHeader = styled('div', `\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 24px;\n  background-color: ${theme.notificationsPanelHeaderBg};\n  outline: 1px solid ${theme.notificationsPanelBorder};\n`);\n\nconst cssDropdownHeaderTitle = styled('span', `\n  color: ${theme.text};\n  font-weight: bold;\n`);\n\nconst cssDropdownFeedbackLink = styled('div', `\n  display: flex;\n  color: ${theme.controlFg};\n  cursor: pointer;\n  user-select: none;\n  &:hover {\n    text-decoration: underline;\n  }\n`);\n\nconst cssDropdownFeedbackIcon = styled(icon, `\n  background-color: ${theme.controlFg};\n  margin-right: 4px;\n`);\n\nconst cssDropdownStatus = styled('div', `\n  padding: 16px 48px 24px 48px;\n  text-align: center;\n  border-top: 1px solid ${theme.notificationsPanelBorder};\n`);\n\nconst cssDropdownStatusText = styled('div', `\n  display: inline-block;\n  margin: 8px 0 0 0;\n  text-align: left;\n  color: ${theme.lightText};\n`);\n\n// z-index below is set above other assorted children of <body>, which includes\n// indexes such as 999 for modals.\nconst cssSnackbarWrapper = styled('div', `\n  position: fixed;\n  bottom: 8px;\n  right: 8px;\n  z-index: ${vars.notificationZIndex};\n\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n\n  font-size: ${vars.mediumFontSize};\n\n  pointer-events: none; /* Allow mouse clicks through */\n`);\n\nconst cssToastBody = styled('div', `\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  padding: 0 12px;\n  overflow-wrap: anywhere;\n`);\n\nconst cssToastIcon = styled('div', `\n  flex-shrink: 0;\n  height: 18px;\n  width: 18px;\n`);\n\nconst cssToastActions = styled('div', `\n  display: flex;\n  align-items: flex-end;\n  margin-top: 16px;\n  color: ${theme.toastControlFg};\n`);\n\nconst cssToastWrapper = styled('div', `\n  display: flex;\n  min-width: 240px;\n  max-width: 320px;\n  overflow: hidden;\n\n  margin: 4px;\n  padding: 12px;\n  border-radius: 3px;\n\n  color: ${theme.toastText};\n  background-color: ${theme.toastBg};\n\n  pointer-events: auto;\n\n  opacity: 1;\n  transition: opacity ${Expirable.fadeDelay}ms;\n\n  &-memo {\n    color: ${theme.toastMemoText};\n    background-color: ${theme.toastMemoBg};\n  }\n  &-error {\n    border-left: 6px solid ${theme.toastErrorBg};\n    padding-left: 6px;\n    --icon-color: ${theme.toastErrorIcon};\n  }\n  &-success {\n    border-left: 6px solid ${theme.toastSuccessBg};\n    padding-left: 6px;\n    --icon-color: ${theme.toastSuccessIcon};\n  }\n  &-warning {\n    border-left: 6px solid ${theme.toastWarningBg};\n    padding-left: 6px;\n    --icon-color: ${theme.toastWarningIcon};\n  }\n  &-info {\n    border-left: 6px solid ${theme.toastInfoBg};\n    padding-left: 6px;\n    --icon-color: ${theme.toastInfoIcon};\n  }\n  &-info .${cssToastActions.className} {\n    color: ${theme.toastInfoControlFg};\n  }\n\n  &-left-icon {\n    padding-left: 12px;\n  }\n  &-left-icon > .${cssToastBody.className} {\n    padding-left: 10px;\n  }\n\n  &-expiring, &-expired {\n    opacity: 0;\n  }\n  .${cssDropdownContent.className} > & > .notification-icon {\n    display: none;\n  }\n  .${cssDropdownContent.className} > & {\n    background-color: unset;\n    color: ${theme.text};\n    border-radius: 0px;\n    border-top: 1px solid ${theme.notificationsPanelBorder};\n    margin: 0px;\n    padding: 16px 20px;\n  }\n`);\n\n\nconst cssToastText = styled('div', `\n  .${cssToastWrapper.className}-memo & {\n    font-weight: 700;\n  }\n`);\n\nconst cssToastTitle = styled(cssToastText, `\n  display: flex;\n  gap: 8px;\n  font-weight: bold;\n  margin-bottom: 8px;\n`);\n\nconst cssToastClose = styled('div', `\n  cursor: pointer;\n  user-select: none;\n  width: 16px;\n  height: 16px;\n  line-height: 16px;\n  text-align: center;\n  margin: -4px -4px -4px 4px;\n`);\n\nconst cssToastAction = styled('div', `\n  cursor: pointer;\n  user-select: none;\n  margin-right: 24px;\n  &, &:hover, &:focus {\n    color: inherit;\n  }\n  &:hover {\n    text-decoration: underline;\n  }\n`);\n\nconst cssToastMemos = styled('div', `\n  margin-top: 8px;\n  display: flex;\n  flex-direction: column;\n`);\n\nconst cssToastMemo = styled('div', `\n  display: flex;\n  column-gap: 8px;\n  align-items: center;\n`);\n\nconst cssToastMemoIcon = styled(icon, `\n  --icon-color: ${theme.toastMemoText};\n  flex-shrink: 0;\n`);\n\nconst cssProgressBarWrapper = styled('div', `\n  margin-top: 18px;\n  margin-bottom: 11px;\n  height: 3px;\n  border-radius: 3px;\n  background-color: ${theme.progressBarBg};\n`);\n\nconst cssProgressBarSize = styled('span', `\n  color: ${theme.toastLightText};\n`);\n\nconst cssProgressBarStatus = styled('div', `\n  height: 3px;\n  min-width: 3px;\n  border-radius: 3px;\n  background-color: ${theme.progressBarFg};\n`);\n","import {loadUserManager} from 'app/client/lib/imports';\nimport {AppModel} from 'app/client/models/AppModel';\nimport {FullUser, Organization, UserAPI} from 'app/common/UserAPI';\n\n// Opens the user-manager for the given org.\nexport async function manageTeamUsers(org: Organization, user: FullUser|null, api: UserAPI) {\n  (await loadUserManager()).showUserManagerModal(api, {\n    permissionData: api.getOrgAccess(org.id),\n    activeUser: user,\n    resourceType: 'organization',\n    resourceId: org.id,\n    resource: org,\n  });\n}\n\n// Opens the user-manager for the current org in the given AppModel.\nexport async function manageTeamUsersApp(app: AppModel) {\n  if (app.currentOrg) {\n    return manageTeamUsers(app.currentOrg, app.currentValidUser, app.api);\n  }\n}\n","/**\n * Exports resizeFlexVHandle() for resizing flex items. The returned handle should be attached to\n * a flexbox container next to the item that needs resizing. Usage:\n *\n *    dom('div.flex',\n *      dom('div.child-to-be-resized', ...),\n *      resizeFlexVHandle({target: 'left', onSave: (width) => { ... })\n *      dom('div.other-children', ...),\n *    )\n *\n * The .target parameter determines whether to resize the left or right sibling of the handle. The\n * handle shows up as a 1px line of color --resize-handle-color. On hover and while resizing, it\n * changes to --resize-handle-highlight.\n *\n * The handle may be dragged to change the width of the target. It sets style.width while\n * dragging, and calls .onSave(width) at the end, and optionally .onDrag(width) while dragging.\n *\n * You may limit the width of the target with min-width, max-width properties as usual.\n *\n * At the moment, flexbox width resizing is the only need, but the same approach is intended to be\n * easily extended to non-flexbox situation, and to height-resizing.\n */\nimport {mouseDrag} from 'app/client/ui/mouseDrag';\nimport {DomElementArg, styled} from \"grainjs\";\n\nexport type ChangeFunc = (value: number) => void;\nexport type Edge = 'left' | 'right';\n\nexport interface IResizeFlexOptions {\n  // Whether to change the width of the flex item to the left or to the right of this handle.\n  target: 'left'|'right';\n  onDrag?(value: number): void;\n  onSave(value: number): void;\n}\n\nexport interface IResizeOptions {\n  prop: 'width' | 'height';\n  sign: 1 | -1;\n  getTarget(handle: Element): Element|null;\n  onDrag?(value: number): void;\n  onSave(value: number): void;\n}\n\n// See module documentation for usage.\nexport function resizeFlexVHandle(options: IResizeFlexOptions, ...args: DomElementArg[]): Element {\n  const resizeOptions: IResizeOptions = {\n    prop: 'width',\n    sign: options.target === 'left' ? 1 : -1,\n    getTarget(handle: Element) {\n      return options.target === 'left' ? handle.previousElementSibling : handle.nextElementSibling;\n    },\n    onDrag: options.onDrag,\n    onSave: options.onSave,\n  };\n  return cssResizeFlexVHandle(\n    mouseDrag((ev, handle) => onResizeStart(ev, handle, resizeOptions)),\n    ...args);\n}\n\n// The core of the implementation. This is intended to be very general, so as to be adaptable to\n// other kinds of resizing (edge of parent, resizing height) by only attaching this to the\n// mouseDrag() event with suitable options. See resizeFlexVHandle().\nfunction onResizeStart(startEv: MouseEvent, handle: Element, options: IResizeOptions) {\n  const target = options.getTarget(handle) as HTMLElement|null;\n  if (!target) { return null; }\n\n  const {sign, prop, onDrag, onSave} = options;\n  const startSize = getComputedSize(target, prop);\n\n  // Set the body cursor to that on the handle, so that it doesn't jump to different shapes as\n  // the mouse moves temporarily outside of the handle. (Approach from jqueryui-resizable.)\n  const startBodyCursor = document.body.style.cursor;\n  document.body.style.cursor = window.getComputedStyle(handle).cursor;\n\n  handle.classList.add(cssResizeDragging.className);\n\n  return {\n    // While moving, just adjust the size of the target, relying on min-width/max-width for\n    // constraints.\n    onMove(ev: MouseEvent) {\n      target.style[prop] = (startSize + sign * (ev.pageX - startEv.pageX)) + 'px';\n      if (onDrag) { onDrag(getComputedSize(target, prop)); }\n    },\n\n    // At the end, undo temporary changes, and call onSave() with the actual size.\n    onStop(ev: MouseEvent) {\n      handle.classList.remove(cssResizeDragging.className);\n\n      // Restore the body cursor to what it was.\n      document.body.style.cursor = startBodyCursor;\n\n      target.style[prop] = (startSize + sign * (ev.pageX - startEv.pageX)) + 'px';\n      onSave(getComputedSize(target, prop));\n    },\n  };\n}\n\n\n// Compute the CSS width or height of the element. If element.style[prop] is set to it, it should\n// be unchanged. (Note that when an element has borders or padding, the size from\n// getBoundingClientRect() would be different, and isn't suitable for style[prop].)\nfunction getComputedSize(elem: Element, prop: 'width'|'height'): number {\n  const sizePx = window.getComputedStyle(elem)[prop];\n  const sizeNum = sizePx && parseFloat(sizePx);\n  // If we can't get the size, fall back to getBoundingClientRect().\n  return Number.isFinite(sizeNum as number) ? sizeNum as number : elem.getBoundingClientRect()[prop];\n}\n\nconst cssResizeFlexVHandle = styled('div', `\n  position: relative;\n  flex: none;\n  top: 0;\n  height: 100%;\n  cursor: ew-resize;\n  z-index: 10;\n\n  /* width with negative margins leaves exactly 1px line in the middle */\n  width: 7px;\n  margin: auto -3px;\n\n  /* two highlighted 1px lines are placed in the middle, normal and highlighted one */\n  &::before, &::after {\n    content: \"\";\n    position: absolute;\n    height: 100%;\n    width: 1px;\n    left: 3px;\n  }\n  &::before {\n    background-color: var(--resize-handle-color, lightgrey);\n  }\n  /* the highlighted line is shown on hover with opacity transition */\n  &::after {\n    background-color: var(--resize-handle-highlight, black);\n    opacity: 0;\n    transition: opacity linear 0.2s;\n  }\n  &:hover::after {\n    opacity: 1;\n    transition: opacity linear 0.2s 0.2s;\n  }\n  /* the highlighted line is also always shown while dragging */\n  &-dragging::after {\n    opacity: 1;\n    transition: none !important;\n  }\n`);\n\n// May be applied to Handle class to show the highlighted line while dragging.\nconst cssResizeDragging = styled('div', `\n  &::after {\n    opacity: 1;\n    transition: none !important;\n  }\n`);\n","/**\n * Note that it assumes the presence of cssVars.cssRootVars on <body>.\n */\nimport {makeT} from 'app/client/lib/localization';\nimport * as commands from 'app/client/components/commands';\nimport {watchElementForBlur} from 'app/client/lib/FocusLayer';\nimport {urlState} from \"app/client/models/gristUrlState\";\nimport {resizeFlexVHandle} from 'app/client/ui/resizeHandle';\nimport {hoverTooltip} from 'app/client/ui/tooltips';\nimport {transition, TransitionWatcher} from 'app/client/ui/transitions';\nimport {cssHideForNarrowScreen, isScreenResizing, mediaNotSmall, mediaSmall, theme} from 'app/client/ui2018/cssVars';\nimport {isNarrowScreenObs} from 'app/client/ui2018/cssVars';\nimport {icon} from 'app/client/ui2018/icons';\nimport {\n  dom, DomElementArg, DomElementMethod, MultiHolder, noTestId, Observable, styled, subscribe, TestId\n} from \"grainjs\";\nimport noop from 'lodash/noop';\nimport once from 'lodash/once';\nimport {SessionObs} from 'app/client/lib/sessionObs';\nimport debounce from 'lodash/debounce';\n\nconst t = makeT('PagePanels');\n\nconst AUTO_EXPAND_TIMEOUT_MS = 400;\n\n// delay must be greater than the time needed for transientInput to update focus (ie: 10ms);\nconst DELAY_BEFORE_TESTING_FOCUS_CHANGE_MS = 12;\n\nexport interface PageSidePanel {\n  // Note that widths need to start out with a correct default in JS (having them in CSS is not\n  // enough), needed for open/close transitions.\n  panelWidth: Observable<number>;\n  panelOpen: Observable<boolean>;\n  hideOpener?: boolean;           // If true, don't show the opener handle.\n  header: DomElementArg;\n  content: DomElementArg;\n}\n\nexport interface PageContents {\n  leftPanel: PageSidePanel;\n  rightPanel?: PageSidePanel;     // If omitted, the right panel isn't shown at all.\n\n  headerMain: DomElementArg;\n  contentMain: DomElementArg;\n  banner?: DomElementArg;\n\n  onResize?: () => void;          // Callback for when either pane is opened, closed, or resized.\n  testId?: TestId;\n  contentTop?: DomElementArg;\n  contentBottom?: DomElementArg;\n}\n\nexport function pagePanels(page: PageContents) {\n  const testId = page.testId || noTestId;\n  const left = page.leftPanel;\n  const right = page.rightPanel;\n  const onResize = page.onResize || (() => null);\n  const leftOverlap = Observable.create(null, false);\n  const dragResizer = Observable.create(null, false);\n  const bannerHeight = Observable.create(null, 0);\n  const isScreenResizingObs = isScreenResizing();\n\n  let lastLeftOpen = left.panelOpen.get();\n  let lastRightOpen = right?.panelOpen.get() || false;\n  let leftPaneDom: HTMLElement;\n  let rightPaneDom: HTMLElement;\n  let mainHeaderDom: HTMLElement;\n  let contentTopDom: HTMLElement;\n  let onLeftTransitionFinish = noop;\n\n  // When switching to mobile mode, close panels; when switching to desktop, restore the\n  // last desktop state.\n  const sub1 = subscribe(isNarrowScreenObs(), (use, narrow) => {\n    if (narrow) {\n      lastLeftOpen = leftOverlap.get() ? false : left.panelOpen.get();\n      lastRightOpen = right?.panelOpen.get() || false;\n    }\n    left.panelOpen.set(narrow ? false : lastLeftOpen);\n    right?.panelOpen.set(narrow ? false : lastRightOpen);\n\n    // overlap should always be OFF when switching screen mode\n    leftOverlap.set(false);\n  });\n\n  // When url changes, we must have navigated; close the left panel since if it were open, it was\n  // the likely cause of the navigation (e.g. switch to another page or workspace).\n  const sub2 = subscribe(isNarrowScreenObs(), urlState().state, (use, narrow, state) => {\n    if (narrow) {\n      left.panelOpen.set(false);\n    }\n  });\n\n  const pauseSavingLeft = (yesNo: boolean) => {\n    (left.panelOpen as SessionObs<boolean>)?.pauseSaving?.(yesNo);\n  };\n\n  const commandsGroup = commands.createGroup({\n    leftPanelOpen: () => new Promise((resolve) => {\n      const watcher = new TransitionWatcher(leftPaneDom);\n      watcher.onDispose(() => resolve(undefined));\n      left.panelOpen.set(true);\n    }),\n    rightPanelOpen: () => new Promise((resolve, reject) => {\n      if (!right) {\n        reject(new Error('PagePanels rightPanelOpen called while right panel is undefined'));\n        return;\n      }\n\n      const watcher = new TransitionWatcher(rightPaneDom);\n      watcher.onDispose(() => resolve(undefined));\n      right.panelOpen.set(true);\n    }),\n  }, null, true);\n  let contentWrapper: HTMLElement;\n  return cssPageContainer(\n    dom.autoDispose(sub1),\n    dom.autoDispose(sub2),\n    dom.autoDispose(commandsGroup),\n    dom.autoDispose(leftOverlap),\n    dom('div', page.contentTop, elem => { contentTopDom = elem; }),\n    dom.maybe(page.banner, () => {\n      let elem: HTMLElement;\n      const updateTop = () => {\n        const height = mainHeaderDom.getBoundingClientRect().bottom;\n        elem.style.top = height + 'px';\n      };\n      setTimeout(() => watchHeightElem(contentTopDom, updateTop));\n      const lis = isScreenResizingObs.addListener(val => val || updateTop());\n      return elem = cssBannerContainer(\n        page.banner,\n        watchHeight(h => bannerHeight.set(h)),\n        dom.autoDispose(lis),\n      );\n    }),\n    cssContentMain(\n      leftPaneDom = cssLeftPane(\n        testId('left-panel'),\n        cssOverflowContainer(\n          contentWrapper = cssLeftPanelContainer(\n            cssLeftPaneHeader(\n              left.header,\n              dom.style('margin-bottom', use => use(bannerHeight) + 'px')\n            ),\n            left.content,\n          ),\n        ),\n\n        // Show plain border when the resize handle is hidden.\n        cssResizeDisabledBorder(\n          dom.hide((use) => use(left.panelOpen) && !use(leftOverlap)),\n          cssHideForNarrowScreen.cls(''),\n          testId('left-disabled-resizer'),\n        ),\n\n        dom.style('width', (use) => use(left.panelOpen) ? use(left.panelWidth) + 'px' : ''),\n\n        // Opening/closing the left pane, with transitions.\n        cssLeftPane.cls('-open', left.panelOpen),\n        transition(use => (use(isNarrowScreenObs()) ? false : use(left.panelOpen)), {\n          prepare(elem, open) {\n            elem.style.width = (open ? 48 : left.panelWidth.get()) + 'px';\n          },\n          run(elem, open) {\n            elem.style.width = contentWrapper.style.width = (open ? left.panelWidth.get() : 48) + 'px';\n          },\n          finish() {\n            onResize();\n            contentWrapper.style.width = '';\n            onLeftTransitionFinish();\n          },\n        }),\n\n        // opening left panel on hover\n        dom.on('mouseenter', (evt1, elem) => {\n\n\n          if (left.panelOpen.get()\n\n            // when no opener should not auto-expand\n            || left.hideOpener\n\n            // if user is resizing the window, don't expand.\n            || isScreenResizingObs.get()) { return; }\n\n\n\n          let isMouseInsideLeftPane = true;\n          let isFocusInsideLeftPane = false;\n          let isMouseDragging = false;\n\n          const owner = new MultiHolder();\n          const startExpansion = () => {\n            leftOverlap.set(true);\n            pauseSavingLeft(true); // prevents from updating state in the window storage\n            left.panelOpen.set(true);\n            onLeftTransitionFinish = noop;\n            watchBlur();\n          };\n          const startCollapse = () => {\n            left.panelOpen.set(false);\n            pauseSavingLeft(false);\n            // turns overlap off only when the transition finishes\n            onLeftTransitionFinish = once(() => leftOverlap.set(false));\n            clear();\n          };\n          const clear = () => {\n            if (owner.isDisposed()) { return; }\n            clearTimeout(timeoutId);\n            owner.dispose();\n          };\n          dom.onDisposeElem(elem, clear);\n\n          // updates isFocusInsideLeftPane and starts watch for blur on activeElement.\n          const watchBlur = debounce(() => {\n            if (owner.isDisposed()) { return; }\n            isFocusInsideLeftPane = Boolean(leftPaneDom.contains(document.activeElement) ||\n              document.activeElement?.closest('.grist-floating-menu'));\n            maybeStartCollapse();\n            if (document.activeElement) {\n              maybePatchDomAndChangeFocus(); // This is to support projects test environment\n              watchElementForBlur(document.activeElement, watchBlur);\n            }\n          }, DELAY_BEFORE_TESTING_FOCUS_CHANGE_MS);\n\n          // starts collapsed only if neither mouse nor focus are inside the left pane. Return true\n          // if started collapsed, false otherwise.\n          const maybeStartCollapse = () => {\n            if (!isMouseInsideLeftPane && !isFocusInsideLeftPane && !isMouseDragging) {\n              startCollapse();\n            }\n          };\n\n          // mouse events\n          const onMouseEvt = (evt: MouseEvent) => {\n            const rect = leftPaneDom.getBoundingClientRect();\n            isMouseInsideLeftPane = evt.clientX <= rect.right;\n            isMouseDragging = evt.buttons !== 0;\n            maybeStartCollapse();\n          };\n          owner.autoDispose(dom.onElem(document, 'mousemove', onMouseEvt));\n          owner.autoDispose(dom.onElem(document, 'mouseup', onMouseEvt));\n\n          // Enables collapsing when the cursor leaves the window. This comes handy in a split\n          // screen setup, especially when Grist is on the right side: moving the cursor back and\n          // forth between the 2 windows, the cursor is likely to hover the left pane and expand it\n          // inadvertendly. This line collapses it back.\n          const onMouseLeave = () => {\n            isMouseInsideLeftPane = false;\n            maybeStartCollapse();\n          };\n          owner.autoDispose(dom.onElem(document.body, 'mouseleave', onMouseLeave));\n\n          // schedule start of expansion\n          const timeoutId = setTimeout(startExpansion, AUTO_EXPAND_TIMEOUT_MS);\n        }),\n        cssLeftPane.cls('-overlap', leftOverlap),\n        cssLeftPane.cls('-dragging', dragResizer),\n      ),\n\n      // Resizer for the left pane.\n      // TODO: resizing to small size should collapse. possibly should allow expanding too\n      cssResizeFlexVHandle(\n        {target: 'left', onSave: (val) => { left.panelWidth.set(val); onResize();\n                                            leftPaneDom.style['width'] = val + 'px';\n                                            setTimeout(() => dragResizer.set(false), 0); },\n         onDrag: (val) => { dragResizer.set(true); }},\n        testId('left-resizer'),\n        dom.show((use) => use(left.panelOpen) && !use(leftOverlap)),\n        cssHideForNarrowScreen.cls('')),\n\n      cssMainPane(\n        mainHeaderDom = cssTopHeader(\n          testId('top-header'),\n          (left.hideOpener ? null :\n            cssPanelOpener('PanelRight', cssPanelOpener.cls('-open', left.panelOpen),\n              testId('left-opener'),\n              dom.on('click', () => toggleObs(left.panelOpen)),\n              cssHideForNarrowScreen.cls(''))\n          ),\n\n          page.headerMain,\n\n          (!right || right.hideOpener ? null :\n            cssPanelOpener('PanelLeft', cssPanelOpener.cls('-open', right.panelOpen),\n              testId('right-opener'),\n              dom.cls('tour-creator-panel'),\n              hoverTooltip(() => (right.panelOpen.get() ? t('Close Creator Panel') : t('Open Creator Panel')),\n                {key: 'topBarBtnTooltip'}),\n              dom.on('click', () => toggleObs(right.panelOpen)),\n              cssHideForNarrowScreen.cls(''))\n          ),\n          dom.style('margin-bottom', use => use(bannerHeight) + 'px'),\n        ),\n        page.contentMain,\n        cssMainPane.cls('-left-overlap', leftOverlap),\n        testId('main-pane'),\n      ),\n      (right ? [\n        // Resizer for the right pane.\n        cssResizeFlexVHandle(\n          {target: 'right', onSave: (val) => { right.panelWidth.set(val); onResize(); }},\n          testId('right-resizer'),\n          dom.show(right.panelOpen),\n          cssHideForNarrowScreen.cls('')),\n\n        rightPaneDom = cssRightPane(\n          testId('right-panel'),\n          cssRightPaneHeader(\n            right.header,\n            dom.style('margin-bottom', use => use(bannerHeight) + 'px')\n          ),\n          right.content,\n\n          dom.style('width', (use) => use(right.panelOpen) ? use(right.panelWidth) + 'px' : ''),\n\n          // Opening/closing the right pane, with transitions.\n          cssRightPane.cls('-open', right.panelOpen),\n          transition(use => (use(isNarrowScreenObs()) ? false : use(right.panelOpen)), {\n            prepare(elem, open) { elem.style.marginLeft = (open ? -1 : 1) * right.panelWidth.get() + 'px'; },\n            run(elem, open) { elem.style.marginLeft = ''; },\n            finish: onResize,\n          }),\n        )] : null\n      ),\n      cssContentOverlay(\n        dom.show((use) => use(left.panelOpen) || Boolean(right && use(right.panelOpen))),\n        dom.on('click', () => {\n          left.panelOpen.set(false);\n          if (right) { right.panelOpen.set(false); }\n        }),\n        testId('overlay')\n      ),\n      dom.maybe(isNarrowScreenObs(), () =>\n        cssBottomFooter(\n          testId('bottom-footer'),\n          cssPanelOpenerNarrowScreenBtn(\n            cssPanelOpenerNarrowScreen(\n              'FieldTextbox',\n              dom.on('click', () => {\n                right?.panelOpen.set(false);\n                toggleObs(left.panelOpen);\n              }),\n              testId('left-opener-ns')\n            ),\n            cssPanelOpenerNarrowScreenBtn.cls('-open', left.panelOpen)\n          ),\n          page.contentBottom,\n          (!right ? null :\n            cssPanelOpenerNarrowScreenBtn(\n              cssPanelOpenerNarrowScreen(\n                'Settings',\n                dom.on('click', () => {\n                  left.panelOpen.set(false);\n                  toggleObs(right.panelOpen);\n                }),\n                testId('right-opener-ns')\n              ),\n              cssPanelOpenerNarrowScreenBtn.cls('-open', right.panelOpen),\n            )\n          ),\n        )\n      ),\n    ),\n  );\n}\n\nfunction toggleObs(boolObs: Observable<boolean>) {\n  boolObs.set(!boolObs.get());\n}\n\nconst bottomFooterHeightPx = 48;\nconst cssVBox = styled('div', `\n  display: flex;\n  flex-direction: column;\n`);\nconst cssHBox = styled('div', `\n  display: flex;\n`);\nconst cssPageContainer = styled(cssVBox, `\n  position: absolute;\n  isolation: isolate; /* Create a new stacking context */\n  z-index: 0; /* As of March 2019, isolation does not have Edge support, so force one with z-index */\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  min-width: 600px;\n  background-color: ${theme.pageBg};\n\n  @media ${mediaSmall} {\n    & {\n      padding-bottom: ${bottomFooterHeightPx}px;\n      min-width: 240px;\n    }\n    .interface-singlePage & {\n      padding-bottom: 0;\n    }\n  }\n`);\nconst cssContentMain = styled(cssHBox, `\n  flex: 1 1 0px;\n  overflow: hidden;\n`);\nexport const cssLeftPane = styled(cssVBox, `\n  position: relative;\n  background-color: ${theme.leftPanelBg};\n  width: 48px;\n  margin-right: 0px;\n  transition: width 0.4s;\n  will-change: width;\n  @media ${mediaSmall} {\n    & {\n      width: 240px;\n      position: fixed;\n      z-index: 10;\n      top: 0;\n      bottom: ${bottomFooterHeightPx}px;\n      left: -${240 + 15}px; /* adds an extra 15 pixels to also hide the box shadow */\n      visibility: hidden;\n      box-shadow: 10px 0 5px rgba(0, 0, 0, 0.2);\n      transition: left 0.4s, visibility 0.4s;\n      will-change: left;\n    }\n    &-open {\n      left: 0;\n      visibility: visible;\n    }\n  }\n  &-open {\n    width: 240px;\n  }\n  @media print {\n    & {\n      display: none;\n    }\n  }\n  .interface-singlePage & {\n    display: none;\n  }\n  &-overlap {\n    position: fixed;\n    z-index: 10;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    min-width: unset;\n  }\n  &-dragging {\n    transition: unset;\n    min-width: 160px;\n    max-width: 320px;\n  }\n`);\nconst cssOverflowContainer = styled(cssVBox, `\n  overflow: hidden;\n  flex: 1 1 0px;\n`);\nconst cssMainPane = styled(cssVBox, `\n  position: relative;\n  flex: 1 1 0px;\n  min-width: 0px;\n  background-color: ${theme.mainPanelBg};\n  z-index: 1;\n  &-left-overlap {\n    margin-left: 48px;\n  }\n`);\nconst cssRightPane = styled(cssVBox, `\n  position: relative;\n  background-color: ${theme.rightPanelBg};\n  width: 0px;\n  margin-left: 0px;\n  overflow: hidden;\n  transition: margin-left 0.4s;\n  z-index: 0;\n  @media ${mediaSmall} {\n    & {\n      width: 240px;\n      position: fixed;\n      z-index: 10;\n      top: 0;\n      bottom: ${bottomFooterHeightPx}px;\n      right: -${240 + 15}px; /* adds an extra 15 pixels to also hide the box shadow */\n      box-shadow: -10px 0 5px rgba(0, 0, 0, 0.2);\n      visibility: hidden;\n      transition: right 0.4s, visibility 0.4s;\n      will-change: right;\n    }\n    &-open {\n      right: 0;\n      visibility: visible;\n    }\n  }\n  &-open {\n    width: 240px;\n    min-width: 240px;\n    max-width: 320px;\n  }\n  @media print {\n    & {\n      display: none;\n    }\n  }\n  .interface-singlePage & {\n    display: none;\n  }\n`);\nconst cssHeader = styled('div', `\n  height: 49px;\n  flex: none;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 1px solid ${theme.pagePanelsBorder};\n\n  @media print {\n    & {\n      display: none;\n    }\n  }\n\n  .interface-singlePage & {\n    display: none;\n  }\n`);\nconst cssTopHeader = styled(cssHeader, `\n  background-color: ${theme.topHeaderBg};\n`);\nconst cssLeftPaneHeader = styled(cssHeader, `\n  background-color: ${theme.leftPanelBg};\n`);\nconst cssRightPaneHeader = styled(cssHeader, `\n  background-color: ${theme.rightPanelBg};\n`);\nconst cssBottomFooter = styled ('div', `\n  height: ${bottomFooterHeightPx}px;\n  background-color: ${theme.bottomFooterBg};\n  z-index: 20;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  padding: 8px 16px;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  border-top: 1px solid ${theme.pagePanelsBorder};\n  @media ${mediaNotSmall} {\n    & {\n      display: none;\n    }\n  }\n  @media print {\n    & {\n      display: none;\n    }\n  }\n  .interface-singlePage & {\n    display: none;\n  }\n`);\nconst cssResizeFlexVHandle = styled(resizeFlexVHandle, `\n  --resize-handle-color: ${theme.pagePanelsBorder};\n  --resize-handle-highlight: ${theme.pagePanelsBorderResizing};\n\n  @media print {\n    & {\n      display: none;\n    }\n  }\n`);\nconst cssResizeDisabledBorder = styled('div', `\n  flex: none;\n  width: 1px;\n  height: 100%;\n  background-color: ${theme.pagePanelsBorder};\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: -1px;\n  z-index: 2;\n`);\nconst cssPanelOpener = styled(icon, `\n  flex: none;\n  width: 32px;\n  height: 32px;\n  padding: 8px 8px;\n  cursor: pointer;\n  -webkit-mask-size: 16px 16px;\n  background-color: ${theme.controlFg};\n  transition: transform 0.4s;\n  &:hover { background-color: ${theme.controlHoverFg}; }\n  &-open { transform: rotateY(180deg); }\n`);\nconst cssPanelOpenerNarrowScreenBtn = styled('div', `\n  width: 32px;\n  height: 32px;\n  --icon-color: ${theme.sidePanelOpenerFg};\n  cursor: pointer;\n  border-radius: 4px;\n  &-open {\n    background-color: ${theme.sidePanelOpenerActiveBg};\n    --icon-color: ${theme.sidePanelOpenerActiveFg};\n  }\n`);\nconst cssPanelOpenerNarrowScreen = styled(icon, `\n  width: 24px;\n  height: 24px;\n  margin: 4px;\n`);\nconst cssContentOverlay = styled('div', `\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  background-color: ${theme.pageBackdrop};\n  opacity: 0.5;\n  display: none;\n  z-index: 9;\n  @media ${mediaSmall} {\n    & {\n      display: unset;\n    }\n  }\n`);\nconst cssLeftPanelContainer = styled('div', `\n  flex: 1 1 0px;\n  display: flex;\n  flex-direction: column;\n`);\nconst cssHiddenInput = styled('input', `\n  position: absolute;\n  top: -100px;\n  left: 0;\n  width: 10px;\n  height: 10px;\n  font-size: 1;\n  z-index: -1;\n`);\nconst cssBannerContainer = styled('div', `\n  position: absolute;\n  z-index: 11;\n  width: 100%;\n`);\n// watchElementForBlur does not work if focus is on body. Which never happens when running in Grist\n// because focus is constantly given to the copypasteField. But it does happen when running inside a\n// projects test. For that latter case we had a hidden <input> field to the dom and give it focus.\nfunction maybePatchDomAndChangeFocus() {\n  if (document.activeElement?.matches('body')) {\n    const hiddenInput = cssHiddenInput();\n    document.body.appendChild(hiddenInput);\n    hiddenInput.focus();\n  }\n}\n// Watch for changes in dom subtree and call callback with element height;\nfunction watchHeight(callback: (height: number) => void): DomElementMethod {\n  return elem => watchHeightElem(elem, callback);\n}\n\nfunction watchHeightElem(elem: HTMLElement, callback: (height: number) => void) {\n  const onChange = () => callback(elem.getBoundingClientRect().height);\n  const observer = new MutationObserver(onChange);\n  observer.observe(elem, {childList: true, subtree: true, attributes: true});\n  dom.onDisposeElem(elem, () => observer.disconnect());\n  onChange();\n}\n","import type {AppModel} from 'app/client/models/AppModel';\nimport {commonUrls} from 'app/common/gristUrls';\nimport {Disposable, DomArg, DomContents, IDisposableOwner} from 'grainjs';\n\nexport function buildNewSiteModal(context: Disposable, options: {\n  planName: string,\n  selectedPlan?: string,\n  onCreate?: () => void\n}) {\n  window.location.href = commonUrls.plans;\n}\n\nexport function buildUpgradeModal(owner: Disposable, planName: string)  {\n  window.location.href = commonUrls.plans;\n}\n\nexport function showTeamUpgradeConfirmation(owner: Disposable) {\n}\n\nexport interface UpgradeButton  {\n  showUpgradeCard(...args: DomArg<HTMLElement>[]): DomContents;\n  showUpgradeButton(...args: DomArg<HTMLElement>[]): DomContents;\n}\n\nexport function buildUpgradeButton(owner: IDisposableOwner, app: AppModel): UpgradeButton {\n  return {\n    showUpgradeCard : () => null,\n    showUpgradeButton : () => null,\n  };\n}\n","import {theme} from 'app/client/ui2018/cssVars';\nimport {styled} from 'grainjs';\n\nexport const ShortcutKeyContent = styled('span', `\n  font-style: normal;\n  font-family: inherit;\n  color: ${theme.shortcutKeyPrimaryFg};\n`);\n\nexport const ShortcutKeyContentStrong = styled(ShortcutKeyContent, `\n  font-weight: 700;\n`);\n\nexport const ShortcutKey = styled('div', `\n  display: inline-block;\n  padding: 2px 5px;\n  border-radius: 4px;\n  margin: 0px 2px;\n  border: 1px solid ${theme.shortcutKeyBorder};\n  color: ${theme.shortcutKeyFg};\n  background-color: ${theme.shortcutKeyBg};\n  font-family: inherit;\n  font-style: normal;\n  white-space: nowrap;\n`);\n","import {dom, makeTestId, styled} from 'grainjs';\nimport {getSingleOrg, isFeatureEnabled} from 'app/common/gristUrls';\nimport {getOrgName} from 'app/common/UserAPI';\nimport {makeT} from 'app/client/lib/localization';\nimport {AppModel} from 'app/client/models/AppModel';\nimport {urlState} from 'app/client/models/gristUrlState';\nimport {theme} from 'app/client/ui2018/cssVars';\nimport {menuDivider, menuIcon, menuItem, menuItemLink, menuSubHeader} from 'app/client/ui2018/menus';\nimport {icon} from 'app/client/ui2018/icons';\n\nconst t = makeT('SiteSwitcher');\n\nconst testId = makeTestId('test-site-switcher-');\n\n/**\n * Adds a menu divider and a site switcher, if there is need for one.\n */\nexport function maybeAddSiteSwitcherSection(appModel: AppModel) {\n  const orgs = appModel.topAppModel.orgs;\n  return dom.maybe((use) => use(orgs).length > 0 && !getSingleOrg() && isFeatureEnabled(\"multiSite\"), () => [\n    menuDivider(),\n    buildSiteSwitcher(appModel),\n  ]);\n}\n\n/**\n * Builds a menu sub-section that displays a list of orgs/sites that the current\n * valid user has access to, with buttons to navigate to them.\n *\n * Used by AppHeader and AccountWidget.\n */\nexport function buildSiteSwitcher(appModel: AppModel) {\n  const orgs = appModel.topAppModel.orgs;\n\n  return [\n    menuSubHeader(t(\"Switch Sites\")),\n    dom.forEach(orgs, (org) =>\n      menuItemLink(urlState().setLinkUrl({ org: org.domain || undefined }),\n        cssOrgSelected.cls('', appModel.currentOrg ? org.id === appModel.currentOrg.id : false),\n        getOrgName(org),\n        cssOrgCheckmark('Tick', testId('org-tick')),\n        testId('org'),\n      )\n    ),\n    menuItem(\n      () => appModel.showNewSiteModal(),\n      menuIcon('Plus'),\n      t(\"Create new team site\"),\n      testId('create-new-site'),\n    ),\n  ];\n}\n\nconst cssOrgSelected = styled('div', `\n  background-color: ${theme.siteSwitcherActiveBg};\n  color: ${theme.siteSwitcherActiveFg};\n`);\n\nconst cssOrgCheckmark = styled(icon, `\n  flex: none;\n  margin-left: 16px;\n  --icon-color: ${theme.siteSwitcherActiveFg};\n  display: none;\n  .${cssOrgSelected.className} > & {\n    display: block;\n  }\n`);\n","import {makeT} from 'app/client/lib/localization';\nimport {localStorageObs} from 'app/client/lib/localStorageObs';\nimport {getStorage} from 'app/client/lib/storage';\nimport {tokenFieldStyles} from 'app/client/lib/TokenField';\nimport {AppModel} from 'app/client/models/AppModel';\nimport {urlState} from 'app/client/models/gristUrlState';\nimport {TelemetryModel, TelemetryModelImpl} from 'app/client/models/TelemetryModel';\nimport {bigPrimaryButton} from 'app/client/ui2018/buttons';\nimport {colors, isNarrowScreenObs, theme, vars} from 'app/client/ui2018/cssVars';\nimport {icon} from 'app/client/ui2018/icons';\nimport {cssLink} from 'app/client/ui2018/links';\nimport {commonUrls} from 'app/common/gristUrls';\nimport {getGristConfig} from 'app/common/urlUtils';\nimport {Disposable, dom, makeTestId, Observable, styled} from 'grainjs';\n\nconst testId = makeTestId('test-support-grist-nudge-');\n\nconst t = makeT('SupportGristNudge');\n\ntype ButtonState =\n  | 'collapsed'\n  | 'expanded';\n\ntype CardPage =\n  | 'support-grist'\n  | 'opted-in';\n\n/**\n * Nudges users to support Grist by opting in to telemetry.\n *\n * This currently includes a button that opens a card with the nudge.\n * The button is hidden when the card is visible, and vice versa.\n */\nexport class SupportGristNudge extends Disposable {\n  private readonly _telemetryModel: TelemetryModel = new TelemetryModelImpl(this._appModel);\n\n  private readonly _buttonState: Observable<ButtonState>;\n  private readonly _currentPage: Observable<CardPage>;\n  private readonly _isClosed: Observable<boolean>;\n\n  constructor(private _appModel: AppModel) {\n    super();\n    if (!this._shouldShowCardOrButton()) { return; }\n\n    this._buttonState = localStorageObs(\n      `u=${this._appModel.currentValidUser?.id ?? 0};supportGristNudge`, 'expanded'\n    ) as Observable<ButtonState>;\n    this._currentPage = Observable.create(null, 'support-grist');\n    this._isClosed = Observable.create(this, false);\n  }\n\n  public showButton() {\n    if (!this._shouldShowCardOrButton()) { return null; }\n\n    return dom.maybe(\n      use => !use(isNarrowScreenObs()) && (use(this._buttonState) === 'collapsed' && !use(this._isClosed)),\n      () => this._buildButton()\n    );\n  }\n\n  public showCard() {\n    if (!this._shouldShowCardOrButton()) { return null; }\n\n    return dom.maybe(\n      use => !use(isNarrowScreenObs()) && (use(this._buttonState) === 'expanded' && !use(this._isClosed)),\n      () => this._buildCard()\n    );\n  }\n\n  private _markAsDismissed() {\n    this._appModel.dismissedPopup('supportGrist').set(true);\n    getStorage().removeItem(\n      `u=${this._appModel.currentValidUser?.id ?? 0};supportGristNudge`);\n\n  }\n\n  private _close() {\n    this._isClosed.set(true);\n  }\n\n  private _dismissAndClose() {\n    this._markAsDismissed();\n    this._close();\n  }\n\n  private _shouldShowCardOrButton() {\n    if (this._appModel.dismissedPopups.get().includes('supportGrist')) {\n      return false;\n    }\n\n    const {activation, deploymentType, telemetry} = getGristConfig();\n    if (deploymentType !== 'core' || !activation?.isManager) {\n      return false;\n    }\n\n    if (telemetry && telemetry.telemetryLevel !== 'off') {\n      return false;\n    }\n\n    return true;\n  }\n\n  private _buildButton() {\n    return cssContributeButton(\n      cssButtonIconAndText(\n        icon('Fireworks'),\n        t('Contribute'),\n      ),\n      cssContributeButtonCloseButton(\n        icon('CrossSmall'),\n        dom.on('click', (ev) => {\n          ev.stopPropagation();\n          this._dismissAndClose();\n        }),\n        testId('contribute-button-close'),\n      ),\n      dom.on('click', () => { this._buttonState.set('expanded'); }),\n      testId('contribute-button'),\n    );\n  }\n\n  private _buildCard() {\n    return cssCard(\n      dom.domComputed(this._currentPage, page => {\n        if (page === 'support-grist') {\n          return this._buildSupportGristCardContent();\n        } else {\n          return this._buildOptedInCardContent();\n        }\n      }),\n      testId('card'),\n    );\n  }\n\n  private _buildSupportGristCardContent() {\n    return [\n      cssCloseButton(\n        icon('CrossBig'),\n        dom.on('click', () => this._buttonState.set('collapsed')),\n        testId('card-close'),\n      ),\n      cssLeftAlignedHeader(t('Support Grist')),\n      cssParagraph(t(\n        'Opt in to telemetry to help us understand how the product ' +\n        'is used, so that we can prioritize future improvements.'\n      )),\n      cssParagraph(\n        t(\n          'We only collect usage statistics, as detailed in our {{helpCenterLink}}, never ' +\n          'document contents. Opt out any time from the {{supportGristLink}} in the user menu.',\n          {\n            helpCenterLink: helpCenterLink(),\n            supportGristLink: supportGristLink(),\n          },\n        ),\n      ),\n      cssFullWidthButton(\n        t('Opt in to Telemetry'),\n        dom.on('click', () => this._optInToTelemetry()),\n        testId('card-opt-in'),\n      ),\n    ];\n  }\n\n  private _buildOptedInCardContent() {\n    return [\n      cssCloseButton(\n        icon('CrossBig'),\n        dom.on('click', () => this._close()),\n        testId('card-close-icon-button'),\n      ),\n      cssCenteredFlex(cssSparks()),\n      cssCenterAlignedHeader(t('Opted In')),\n      cssParagraph(\n        t(\n          'Thank you! Your trust and support is greatly appreciated. ' +\n          'Opt out any time from the {{link}} in the user menu.',\n          {link: supportGristLink()},\n        ),\n      ),\n      cssCenteredFlex(\n        cssPrimaryButton(\n          t('Close'),\n          dom.on('click', () => this._close()),\n          testId('card-close-button'),\n        ),\n      ),\n    ];\n  }\n\n  private async _optInToTelemetry() {\n    await this._telemetryModel.updateTelemetryPrefs({telemetryLevel: 'limited'});\n    this._currentPage.set('opted-in');\n    this._markAsDismissed();\n  }\n}\n\nfunction helpCenterLink() {\n  return cssLink(\n    t('Help Center'),\n    {href: commonUrls.helpTelemetryLimited, target: '_blank'},\n  );\n}\n\nfunction supportGristLink() {\n  return cssLink(\n    t('Support Grist page'),\n    {href: urlState().makeUrl({supportGrist: 'support-grist'}), target: '_blank'},\n  );\n}\n\nconst cssCenteredFlex = styled('div', `\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`);\n\nconst cssContributeButton = styled('div', `\n  position: relative;\n  background: ${theme.controlPrimaryBg};\n  color: ${theme.controlPrimaryFg};\n  border-radius: 25px;\n  padding: 4px 12px 4px 8px;\n  font-style: normal;\n  font-weight: medium;\n  font-size: 13px;\n  line-height: 16px;\n  cursor: pointer;\n  --icon-color: ${theme.controlPrimaryFg};\n\n  &:hover {\n    background: ${theme.controlPrimaryHoverBg};\n  }\n`);\n\nconst cssButtonIconAndText = styled('div', `\n  display: flex;\n  gap: 8px;\n`);\n\nconst cssContributeButtonCloseButton = styled(tokenFieldStyles.cssDeleteButton, `\n  margin-left: 4px;\n  vertical-align: bottom;\n  line-height: 1;\n  position: absolute;\n  top: -4px;\n  right: -8px;\n  border-radius: 16px;\n  background-color: ${colors.dark};\n  width: 18px;\n  height: 18px;\n  cursor: pointer;\n  z-index: 1;\n  display: none;\n  align-items: center;\n  justify-content: center;\n\n  .${cssContributeButton.className}:hover & {\n    display: flex;\n  }\n`);\n\nconst cssCard = styled('div', `\n  width: 297px;\n  padding: 24px;\n  background: #DCF4EB;\n  border-radius: 4px;\n  align-self: flex-start;\n  position: sticky;\n  flex-shrink: 0;\n  top: 0px;\n`);\n\nconst cssHeader = styled('div', `\n  font-size: ${vars.xxxlargeFontSize};\n  font-weight: 600;\n  margin-bottom: 16px;\n`);\n\nconst cssLeftAlignedHeader = styled(cssHeader, `\n  text-align: left;\n`);\n\nconst cssCenterAlignedHeader = styled(cssHeader, `\n  text-align: center;\n`);\n\nconst cssParagraph = styled('div', `\n  font-size: 13px;\n  line-height: 18px;\n  margin-bottom: 12px;\n`);\n\nconst cssPrimaryButton = styled(bigPrimaryButton, `\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: 32px;\n  text-align: center;\n`);\n\nconst cssFullWidthButton = styled(cssPrimaryButton, `\n  width: 100%;\n`);\n\nconst cssCloseButton = styled('div', `\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  padding: 4px;\n  border-radius: 4px;\n  cursor: pointer;\n  --icon-color: ${colors.slate};\n\n  &:hover {\n    background-color: ${colors.mediumGreyOpaque};\n  }\n`);\n\nconst cssSparks = styled('div', `\n  height: 48px;\n  width: 48px;\n  background-image: var(--icon-Sparks);\n  display: inline-block;\n  background-repeat: no-repeat;\n`);\n","import {get as getBrowserGlobals} from 'app/client/lib/browserGlobals';\nimport {reportError} from 'app/client/models/errors';\nimport {spinnerModal} from 'app/client/ui2018/modals';\nimport type {DocPageModel} from 'app/client/models/DocPageModel';\nimport type {Document} from 'app/common/UserAPI';\nimport { getGoogleCodeForSending } from \"app/client/ui/googleAuth\";\nconst G = getBrowserGlobals('window');\nimport {makeT} from 'app/client/lib/localization';\n\nconst t = makeT('sendToDrive');\n\n/**\n * Sends xlsx file to Google Drive. It first authenticates with Google to get encrypted access\n * token, then it calls \"send-to-drive\" api endpoint to upload xlsx file to drive and finally it\n * redirects to the created spreadsheet. Code that is received from Google contains encrypted access\n * token, server is able to decrypt it using GOOGLE_CLIENT_SECRET key.\n */\nexport async function sendToDrive(doc: Document, pageModel: DocPageModel) {\n  // Get current document - it will be used to remove popup listener.\n  const gristDoc = pageModel.gristDoc.get();\n  // Sanity check - gristDoc should be always present\n  if (!gristDoc) { throw new Error(\"Grist document is not present in Page Model\"); }\n\n  // Create send to google drive handler (it will return a spreadsheet url).\n  const send = (code: string) =>\n    // Decorate it with a spinner\n    spinnerModal(t(\"Sending file to Google Drive\"),\n      pageModel.appModel.api.getDocAPI(doc.id)\n        .sendToDrive(code, pageModel.currentDocTitle.get())\n    );\n\n  try {\n    const token = await getGoogleCodeForSending(gristDoc);\n    const {url} = await send(token);\n    G.window.location.assign(url);\n  } catch (err) {\n    reportError(err);\n  }\n}\n","import {loadUserManager} from 'app/client/lib/imports';\nimport {AppModel, reportError} from 'app/client/models/AppModel';\nimport {DocInfo, DocPageModel} from 'app/client/models/DocPageModel';\nimport {docUrl, urlState} from 'app/client/models/gristUrlState';\nimport {GristTooltips} from 'app/client/ui/GristTooltips';\nimport {downloadDocModal, makeCopy, replaceTrunkWithFork} from 'app/client/ui/MakeCopyMenu';\nimport {sendToDrive} from 'app/client/ui/sendToDrive';\nimport {hoverTooltip, withInfoTooltip} from 'app/client/ui/tooltips';\nimport {cssHoverCircle, cssTopBarBtn} from 'app/client/ui/TopBarCss';\nimport {primaryButton} from 'app/client/ui2018/buttons';\nimport {mediaXSmall, testId, theme} from 'app/client/ui2018/cssVars';\nimport {icon} from 'app/client/ui2018/icons';\nimport {menu, menuAnnotate, menuDivider, menuIcon, menuItem, menuItemLink, menuText} from 'app/client/ui2018/menus';\nimport {buildUrlId, isFeatureEnabled, parseUrlId} from 'app/common/gristUrls';\nimport * as roles from 'app/common/roles';\nimport {Document} from 'app/common/UserAPI';\nimport {dom, DomContents, styled} from 'grainjs';\nimport {MenuCreateFunc} from 'popweasel';\nimport {makeT} from 'app/client/lib/localization';\n\nconst t = makeT('ShareMenu');\n\nfunction buildOriginalUrlId(urlId: string, isSnapshot: boolean): string {\n  const parts = parseUrlId(urlId);\n  return isSnapshot ? buildUrlId({...parts, snapshotId: undefined}) : parts.trunkId;\n}\n\n/**\n * Builds the content of the export menu. The menu button and contents render differently for\n * different modes (normal, pre-fork, fork, snapshot).\n */\nexport function buildShareMenuButton(pageModel: DocPageModel): DomContents {\n  // The menu needs pageModel.currentDoc to render the button. It further needs pageModel.gristDoc\n  // to render its contents, but we handle by merely skipping such content if gristDoc is not yet\n  // available (a user quick enough to open the menu in this state would have to re-open it).\n  return dom.maybe(pageModel.currentDoc, (doc) => {\n    const appModel = pageModel.appModel;\n    const saveCopy = () => makeCopy(doc, appModel, t(\"Save Document\")).catch(reportError);\n    if (doc.isSnapshot) {\n      const backToCurrent = () => urlState().pushUrl({doc: buildOriginalUrlId(doc.id, true)});\n      return shareButton(t(\"Back to Current\"), () => [\n        menuManageUsers(doc, pageModel),\n        menuSaveCopy(t(\"Save Copy\"), doc, appModel),\n        menuOriginal(doc, appModel, {isSnapshot: true}),\n        menuExports(doc, pageModel),\n      ], {buttonAction: backToCurrent});\n    } else if (doc.isTutorialFork) {\n      return shareButton(t(\"Save Copy\"), () => [\n        menuSaveCopy(t(\"Save Copy\"), doc, appModel),\n        menuOriginal(doc, appModel, {isTutorialFork: true}),\n        menuExports(doc, pageModel),\n      ], {buttonAction: saveCopy});\n    } else if (doc.isPreFork || doc.isBareFork) {\n      // A new unsaved document, or a fiddle, or a public example.\n      const saveActionTitle = doc.isBareFork ? t(\"Save Document\") : t(\"Save Copy\");\n      return shareButton(saveActionTitle, () => [\n        menuManageUsers(doc, pageModel),\n        menuSaveCopy(saveActionTitle, doc, appModel),\n        menuExports(doc, pageModel),\n      ], {buttonAction: saveCopy});\n    } else if (doc.isFork) {\n      // For forks, the main actions are \"Replace Original\" and \"Save Copy\". When \"Replace\n      // Original\" is unavailable (for samples, forks of public docs, etc), we'll consider \"Save\n      // Copy\" primary and keep it as an action button on top. Otherwise, show a tag without a\n      // default action; click opens the menu where the user can choose.\n      if (!roles.canEdit(doc.trunkAccess || null)) {\n        return shareButton(t(\"Save Copy\"), () => [\n          menuManageUsers(doc, pageModel),\n          menuSaveCopy(t(\"Save Copy\"), doc, appModel),\n          menuOriginal(doc, appModel),\n          menuExports(doc, pageModel),\n        ], {buttonAction: saveCopy});\n      } else {\n        return shareButton(t(\"Unsaved\"), () => [\n          menuManageUsers(doc, pageModel),\n          menuSaveCopy(t(\"Save Copy\"), doc, appModel),\n          menuOriginal(doc, appModel),\n          menuExports(doc, pageModel),\n        ]);\n      }\n    } else {\n      return shareButton(null, () => [\n        menuManageUsers(doc, pageModel),\n        menuSaveCopy(t(\"Duplicate Document\"), doc, appModel),\n        menuWorkOnCopy(pageModel),\n        menuExports(doc, pageModel),\n      ]);\n    }\n  });\n}\n\n/**\n * Render the share button, possibly as a text+icon pair when buttonText is not null. The text\n * portion can be an independent action button (when buttonAction is given), or simply a more\n * visible extension of the icon that opens the menu.\n */\nfunction shareButton(buttonText: string|null, menuCreateFunc: MenuCreateFunc,\n                     options: {buttonAction?: () => void} = {},\n) {\n  if (!buttonText) {\n    // Regular circular button that opens a menu.\n    return cssHoverCircle({ style: `margin: 5px;` },\n      cssTopBarBtn('Share', dom.cls('tour-share-icon')),\n      menu(menuCreateFunc, {placement: 'bottom-end'}),\n      hoverTooltip(t('Share'), {key: 'topBarBtnTooltip'}),\n      testId('tb-share'),\n    );\n  } else if (options.buttonAction) {\n    // Split button: the left text part calls `buttonAction`, and the circular icon opens menu.\n    return cssShareButton(\n      cssShareAction(buttonText,\n        dom.on('click', options.buttonAction),\n        testId('tb-share-action'),\n      ),\n      cssShareCircle(\n        cssShareIcon('Share'),\n        menu(menuCreateFunc, {placement: 'bottom-end'}),\n        hoverTooltip(t('Share'), {key: 'topBarBtnTooltip'}),\n        testId('tb-share'),\n      ),\n    );\n  } else {\n    // Combined button: the left text part and circular icon open the menu as a single button.\n    return cssShareButton(\n      cssShareButton.cls('-combined'),\n      cssShareAction(buttonText),\n      cssShareCircle(\n        cssShareIcon('Share')\n      ),\n      menu(menuCreateFunc, {placement: 'bottom-end'}),\n      hoverTooltip(t('Share'), {key: 'topBarBtnTooltip'}),\n      testId('tb-share'),\n    );\n  }\n}\n\n// Renders \"Manage Users\" menu item.\nfunction menuManageUsers(doc: DocInfo, pageModel: DocPageModel) {\n  return [\n    menuItem(() => manageUsers(doc, pageModel),\n      roles.canEditAccess(doc.access) ? t(\"Manage Users\") : t(\"Access Details\"),\n      dom.cls('disabled', doc.isFork),\n      testId('tb-share-option')\n    ),\n    menuDivider(),\n  ];\n}\n\ninterface MenuOriginalOptions {\n  /** Defaults to false. */\n  isSnapshot?: boolean;\n  /** Defaults to false. */\n  isTutorialFork?: boolean;\n}\n\n/**\n * Renders \"Return to Original\" and \"Replace Original\" menu items.\n *\n * When used with snapshots, we say \"Current Version\" in place of the word \"Original\".\n *\n * When used with tutorial forks, the \"Return to Original\" and \"Compare to Original\" menu\n * items are excluded. Note that it's still possible to return to the original by manually\n * setting the open mode in the URL to \"/m/default\" - if the menu item were to ever be included\n * again, it should likely be a shortcut to setting the open mode back to default.\n */\nfunction menuOriginal(doc: Document, appModel: AppModel, options: MenuOriginalOptions = {}) {\n  const {isSnapshot = false, isTutorialFork = false} = options;\n  const termToUse = isSnapshot ? t(\"Current Version\") : t(\"Original\");\n  const origUrlId = buildOriginalUrlId(doc.id, isSnapshot);\n  const originalUrl = urlState().makeUrl({doc: origUrlId});\n\n  // When comparing forks, show changes from the original to the fork. When comparing a snapshot,\n  // show changes from the snapshot to the original, which seems more natural. The per-snapshot\n  // comparison links in DocHistory use the same order.\n  const [leftDocId, rightDocId] = isSnapshot ? [doc.id, origUrlId] : [origUrlId, doc.id];\n\n  // Preserve the current state in order to stay on the selected page. TODO: Should auto-switch to\n  // first page when the requested page is not in the document.\n  const compareHref = dom.attr('href', (use) => urlState().makeUrl({\n    ...use(urlState().state), doc: leftDocId, params: {compare: rightDocId}}));\n\n  const compareUrlId = urlState().state.get().params?.compare;\n  const comparingSnapshots: boolean = isSnapshot && Boolean(compareUrlId && parseUrlId(compareUrlId).snapshotId);\n\n  function replaceOriginal() {\n    const user = appModel.currentValidUser;\n    replaceTrunkWithFork(user, doc, appModel, origUrlId).catch(reportError);\n  }\n  return [\n    isTutorialFork ? null : cssMenuSplitLink({href: originalUrl},\n      cssMenuSplitLinkText(t(\"Return to {{termToUse}}\", {termToUse})), testId('return-to-original'),\n      cssMenuIconLink({href: originalUrl, target: '_blank'}, testId('open-original'),\n        cssMenuIcon('FieldLink'),\n      )\n    ),\n    menuItem(replaceOriginal, t(\"Replace {{termToUse}}...\", {termToUse}),\n      // Disable if original is not writable, and also when comparing snapshots (since it's\n      // unclear which of the versions to use).\n      dom.cls('disabled', !roles.canEdit(doc.trunkAccess || null) || comparingSnapshots),\n      testId('replace-original'),\n    ),\n    isTutorialFork ? null : menuItemLink(compareHref, {target: '_blank'}, t(\"Compare to {{termToUse}}\", {termToUse}),\n      menuAnnotate('Beta'),\n      testId('compare-original'),\n    ),\n  ];\n}\n\n// Renders \"Save Copy...\" and \"Copy as Template...\" menu items. The name of the first action is\n// specified in saveActionTitle.\nfunction menuSaveCopy(saveActionTitle: string, doc: Document, appModel: AppModel) {\n  const saveCopy = () => makeCopy(doc, appModel, saveActionTitle).catch(reportError);\n  return [\n    // TODO Disable these when user has no accessible destinations.\n    menuItem(saveCopy, `${saveActionTitle}...`, testId('save-copy')),\n  ];\n}\n\n// Renders \"Work on a Copy\" menu item.\nfunction menuWorkOnCopy(pageModel: DocPageModel) {\n  const gristDoc = pageModel.gristDoc.get();\n  if (!gristDoc) { return null; }\n\n  const makeUnsavedCopy = async function() {\n    const {urlId} = await gristDoc.docComm.fork();\n    await urlState().pushUrl({doc: urlId});\n  };\n\n  return [\n    menuItem(makeUnsavedCopy, t(\"Work on a Copy\"), testId('work-on-copy')),\n    menuText(\n      withInfoTooltip(\n        t(\"Edit without affecting the original\"),\n        GristTooltips.workOnACopy(),\n        {tooltipMenuOptions: {attach: null}}\n      )\n    ),\n  ];\n}\n\n/**\n * The part of the menu with \"Download\" and \"Export CSV\" items.\n */\nfunction menuExports(doc: Document, pageModel: DocPageModel) {\n  const isElectron = (window as any).isRunningUnderElectron;\n  const gristDoc = pageModel.gristDoc.get();\n  if (!gristDoc) { return null; }\n\n  // Note: This line adds the 'show in folder' option for electron and a download option for hosted.\n  return [\n    menuDivider(),\n    (isElectron ?\n      menuItem(() => gristDoc.app.comm.showItemInFolder(doc.name),\n        t(\"Show in folder\"), testId('tb-share-option')) :\n        menuItem(() => downloadDocModal(doc, pageModel),\n        menuIcon('Download'), t(\"Download...\"), testId('tb-share-option'))\n    ),\n    menuItemLink({ href: gristDoc.getCsvLink(), target: '_blank', download: ''},\n      menuIcon('Download'), t(\"Export CSV\"), testId('tb-share-option')),\n    menuItemLink({\n      href: pageModel.appModel.api.getDocAPI(doc.id).getDownloadXlsxUrl(),\n      target: '_blank', download: ''\n    }, menuIcon('Download'), t(\"Export XLSX\"), testId('tb-share-option')),\n    (!isFeatureEnabled(\"sendToDrive\") ? null : menuItem(() => sendToDrive(doc, pageModel),\n      menuIcon('Download'), t(\"Send to Google Drive\"), testId('tb-share-option'))),\n  ];\n}\n\n/**\n * Opens the user-manager for the doc.\n */\nasync function manageUsers(doc: DocInfo, docPageModel: DocPageModel) {\n  const appModel: AppModel = docPageModel.appModel;\n  const api = appModel.api;\n  const user = appModel.currentValidUser;\n  (await loadUserManager()).showUserManagerModal(api, {\n    permissionData: api.getDocAccess(doc.id),\n    activeUser: user,\n    resourceType: 'document',\n    resourceId: doc.id,\n    resource: doc,\n    docPageModel,\n    appModel: docPageModel.appModel,\n    linkToCopy: urlState().makeUrl(docUrl(doc)),\n    // On save, re-fetch the document info, to toggle the \"Public Access\" icon if it changed.\n    // Skip if personal, since personal cannot affect \"Public Access\", and the only\n    // change possible is to remove the user (which would make refreshCurrentDoc fail)\n    onSave: async (personal) => !personal && docPageModel.refreshCurrentDoc(doc),\n    reload: () => api.getDocAccess(doc.id),\n  });\n}\n\nconst cssShareButton = styled('div', `\n  display: flex;\n  align-items: center;\n  position: relative;\n  z-index: 0;\n  margin: 5px;\n  white-space: nowrap;\n\n  --share-btn-bg: ${theme.controlPrimaryBg};\n  &-combined:hover, &-combined.weasel-popup-open {\n    --share-btn-bg: ${theme.controlPrimaryHoverBg};\n  }\n`);\n\n// Hide this on very small screens, since it takes up a lot of space and its action is also\n// available in the associated menu.\nconst cssShareAction = styled(primaryButton, `\n  margin-right: -16px;\n  padding-right: 24px;\n  background-color: var(--share-btn-bg);\n  border-color:     var(--share-btn-bg);\n\n  @media ${mediaXSmall} {\n    & {\n      display: none !important;\n    }\n  }\n`);\n\nconst cssShareCircle = styled(cssHoverCircle, `\n  z-index: 1;\n  background-color: var(--share-btn-bg);\n  border: 1px solid ${theme.topHeaderBg};\n  &:hover, &.weasel-popup-open {\n    background-color: ${theme.controlPrimaryHoverBg};\n  }\n`);\n\nconst cssShareIcon = styled(cssTopBarBtn, `\n  background-color: ${theme.controlPrimaryFg};\n  height: 30px;\n  width: 30px;\n`);\n\nconst cssMenuSplitLink = styled(menuItemLink, `\n  padding: 0;\n  align-items: stretch;\n`);\n\nconst cssMenuSplitLinkText = styled('div', `\n  flex: auto;\n  padding: var(--weaseljs-menu-item-padding, 8px 24px);\n  &:not(:hover) {\n    background-color: ${theme.menuBg};\n    color: ${theme.menuItemFg};\n  }\n`);\n\nconst cssMenuIconLink = styled('a', `\n  display: block;\n  flex: none;\n  padding: 8px 24px;\n\n  background-color: ${theme.menuBg};\n  --icon-color: ${theme.menuItemLinkFg};\n  &:hover {\n    background-color: ${theme.menuItemLinkselectedBg};\n    --icon-color: ${theme.menuItemLinkSelectedFg};\n  }\n`);\n\nconst cssMenuIcon = styled(icon, `\n  display: block;\n`);\n","import {makeT} from 'app/client/lib/localization';\nimport {GristDoc} from 'app/client/components/GristDoc';\nimport {loadSearch} from 'app/client/lib/imports';\nimport type * as searchModule from 'app/client/ui2018/search';\nimport {AppModel, reportError} from 'app/client/models/AppModel';\nimport {DocPageModel} from 'app/client/models/DocPageModel';\nimport {workspaceName} from 'app/client/models/WorkspaceInfo';\nimport {AccountWidget} from 'app/client/ui/AccountWidget';\nimport {buildNotifyMenuButton} from 'app/client/ui/NotifyUI';\nimport {manageTeamUsersApp} from 'app/client/ui/OpenUserManager';\nimport {buildShareMenuButton} from 'app/client/ui/ShareMenu';\nimport {hoverTooltip} from 'app/client/ui/tooltips';\nimport {cssHoverCircle, cssTopBarBtn} from 'app/client/ui/TopBarCss';\nimport {buildLanguageMenu} from 'app/client/ui/LanguageMenu';\nimport {docBreadcrumbs} from 'app/client/ui2018/breadcrumbs';\nimport {basicButton} from 'app/client/ui2018/buttons';\nimport {cssHideForNarrowScreen, testId, theme} from 'app/client/ui2018/cssVars';\nimport {IconName} from 'app/client/ui2018/IconList';\nimport {menuAnnotate} from 'app/client/ui2018/menus';\nimport {COMMENTS} from 'app/client/models/features';\nimport * as roles from 'app/common/roles';\nimport {Computed, dom, DomElementArg, makeTestId, MultiHolder, Observable, styled} from 'grainjs';\n\nconst t = makeT('TopBar');\n\nexport function createTopBarHome(appModel: AppModel) {\n  const isAnonymous = !appModel.currentValidUser;\n\n  return [\n    cssFlexSpace(),\n    appModel.supportGristNudge.showButton(),\n    (appModel.isTeamSite && roles.canEditAccess(appModel.currentOrg?.access || null) ?\n      [\n        basicButton(\n          t(\"Manage Team\"),\n          dom.on('click', () => manageTeamUsersApp(appModel)),\n          testId('topbar-manage-team')\n        ),\n        cssSpacer()\n      ] :\n      null\n    ),\n\n    buildLanguageMenu(appModel),\n    isAnonymous ? null : buildNotifyMenuButton(appModel.notifier, appModel),\n    dom('div', dom.create(AccountWidget, appModel)),\n  ];\n}\n\nexport function createTopBarDoc(owner: MultiHolder, appModel: AppModel, pageModel: DocPageModel, allCommands: any) {\n  const doc = pageModel.currentDoc;\n  const renameDoc = (val: string) => pageModel.renameDoc(val);\n  const displayNameWs = Computed.create(owner, pageModel.currentWorkspace,\n    (use, ws) => ws ? {...ws, name: workspaceName(appModel, ws)} : ws);\n\n  const moduleObs = Observable.create<typeof searchModule|null>(owner, null);\n  loadSearch().then(module => moduleObs.set(module)).catch(reportError);\n\n  // Observable to decide whether to include the searchBar into this page. It doesn't work on\n  // 'code' and 'acl' pages, so it's better to omit it, and let the browser's native search work.\n  const enabledObs = Computed.create(owner, pageModel.gristDoc, (use, gristDoc) => {\n    const viewId = gristDoc ? use(gristDoc.activeViewId) : null;\n    return viewId !== null && viewId !== 'code' && viewId !== 'acl';\n  });\n\n  const searchModelObs = Computed.create(owner,\n    moduleObs, pageModel.gristDoc, enabledObs,\n    (use, module, gristDoc, enabled) => {\n      if (!module || !gristDoc || !enabled) {\n        return null;\n      }\n      return module.SearchModelImpl.create(use.owner, gristDoc);\n    });\n\n  const isUndoRedoAvailable = Computed.create(owner, use => {\n    const gristDoc = use(pageModel.gristDoc);\n    if (!gristDoc) { return false; }\n\n    const undoStack = gristDoc.getUndoStack();\n    return !use(undoStack.isDisabled);\n  });\n\n  const isAnonymous = !pageModel.appModel.currentValidUser;\n\n  return [\n    // TODO Before gristDoc is loaded, we could show doc-name without the page. For now, we delay\n    // showing of breadcrumbs until gristDoc is loaded.\n    dom.maybe(pageModel.gristDoc, (gristDoc) =>\n      cssBreadcrumbContainer(\n        docBreadcrumbs(displayNameWs, pageModel.currentDocTitle, gristDoc.currentPageName, {\n          docNameSave: renameDoc,\n          pageNameSave: getRenamePageFn(gristDoc),\n          cancelRecoveryMode: getCancelRecoveryModeFn(gristDoc),\n          isPageNameReadOnly: (use) => use(gristDoc.isReadonly) || typeof use(gristDoc.activeViewId) !== 'number',\n          isDocNameReadOnly: (use) => use(gristDoc.isReadonly) || use(pageModel.isFork),\n          isFork: pageModel.isFork,\n          isBareFork: pageModel.isBareFork,\n          isRecoveryMode: pageModel.isRecoveryMode,\n          isTutorialFork: pageModel.isTutorialFork,\n          isFiddle: Computed.create(owner, (use) => use(pageModel.isPrefork)),\n          isSnapshot: pageModel.isSnapshot,\n          isPublic: Computed.create(owner, doc, (use, _doc) => Boolean(_doc && _doc.public)),\n          isTemplate: pageModel.isTemplate,\n          isAnonymous,\n        })\n      )\n    ),\n    cssFlexSpace(),\n\n    // Don't show useless undo/redo buttons for sample docs, to leave more space for \"Make copy\".\n    dom.maybe(pageModel.undoState, (state) => [\n      topBarUndoBtn('Undo',\n        dom.on('click', () => state.isUndoDisabled.get() || allCommands.undo.run()),\n        hoverTooltip('Undo', {key: 'topBarBtnTooltip'}),\n        cssHoverCircle.cls('-disabled', use => use(state.isUndoDisabled) || !use(isUndoRedoAvailable)),\n        testId('undo'),\n      ),\n      topBarUndoBtn('Redo',\n        dom.on('click', () => state.isRedoDisabled.get() || allCommands.redo.run()),\n        hoverTooltip('Redo', {key: 'topBarBtnTooltip'}),\n        cssHoverCircle.cls('-disabled', use => use(state.isRedoDisabled) || !use(isUndoRedoAvailable)),\n        testId('redo'),\n      ),\n      cssSpacer(),\n    ]),\n    dom.domComputed((use) => {\n      const model = use(searchModelObs);\n      return model && use(moduleObs)?.searchBar(model, makeTestId('test-tb-search-'));\n    }),\n    dom.maybe(use => !(use(pageModel.isTemplate) && isAnonymous), () => [\n      buildShareMenuButton(pageModel),\n      dom.maybe(use =>\n        (\n          use(pageModel.gristDoc)\n          && !use(use(pageModel.gristDoc)!.isReadonly)\n          && use(COMMENTS())\n        ),\n        () => buildShowDiscussionButton(pageModel)),\n      dom.update(\n        buildNotifyMenuButton(appModel.notifier, appModel),\n        cssHideForNarrowScreen.cls(''),\n      ),\n    ]),\n    dom('div', dom.create(AccountWidget, appModel, pageModel)),\n  ];\n}\n\nfunction buildShowDiscussionButton(pageModel: DocPageModel) {\n  return cssHoverCircle({ style: `margin: 5px; position: relative;` },\n    cssTopBarBtn('Chat', dom.cls('tour-share-icon')),\n    cssBeta('Beta'),\n    hoverTooltip('Comments', {key: 'topBarBtnTooltip'}),\n    testId('open-discussion'),\n    dom.on('click', () => pageModel.gristDoc.get()!.showTool('discussion'))\n  );\n}\n\nconst cssBeta = styled(menuAnnotate, `\n  position: absolute;\n  top: 4px;\n  right: -9px;\n  font-weight: bold;\n`);\n\n// Given the GristDoc instance, returns a rename function for the current active page.\n// If the current page is not able to be renamed or the new name is invalid, the function is a noop.\nfunction getRenamePageFn(gristDoc: GristDoc): (val: string) => Promise<void> {\n  return async (val: string) => {\n    const views = gristDoc.docModel.views;\n    const viewId = gristDoc.activeViewId.get();\n    if (typeof viewId === 'number' && val.length > 0) {\n      const name = views.rowModels[viewId].name;\n      await name.saveOnly(val);\n    }\n  };\n}\n\nfunction getCancelRecoveryModeFn(gristDoc: GristDoc): () => Promise<void> {\n  return async () => {\n    await gristDoc.app.topAppModel.api.getDocAPI(gristDoc.docPageModel.currentDocId.get()!)\n      .recover(false);\n  };\n}\n\nfunction topBarUndoBtn(iconName: IconName, ...domArgs: DomElementArg[]): Element {\n  return cssHoverCircle(\n    cssTopBarUndoBtn(iconName),\n    ...domArgs\n  );\n}\n\nconst cssTopBarUndoBtn = styled(cssTopBarBtn, `\n  background-color: ${theme.topBarButtonSecondaryFg};\n\n  .${cssHoverCircle.className}:hover & {\n    background-color: ${theme.topBarButtonPrimaryFg};\n  }\n\n  .${cssHoverCircle.className}-disabled:hover & {\n    background-color: ${theme.topBarButtonDisabledFg};\n    cursor: default;\n  }\n`);\n\nconst cssBreadcrumbContainer = styled('div', `\n  padding: 7px;\n  flex: 1 1 auto;\n  min-width: 24px;\n  overflow: hidden;\n`);\n\nconst cssFlexSpace = styled('div', `\n  flex: 1 1 0px;\n`);\n\nconst cssSpacer = styled('div', `\n  max-width: 10px;\n  flex: auto;\n`);\n","import {theme} from 'app/client/ui2018/cssVars';\nimport {icon} from 'app/client/ui2018/icons';\nimport {styled} from 'grainjs';\n\nexport const cssHoverCircle = styled('div', `\n  width: 32px;\n  height: 32px;\n  background: none;\n  border-radius: 16px;\n\n  &:hover, &.weasel-popup-open {\n    background-color: ${theme.hover};\n  }\n\n  &-disabled:hover {\n    background: none;\n  }\n`);\n\nexport const cssTopBarBtn = styled(icon, `\n  width: 32px;\n  height: 32px;\n  padding: 8px 8px;\n  cursor: pointer;\n  -webkit-mask-size: 16px 16px;\n  background-color: ${theme.topBarButtonPrimaryFg};\n\n  .${cssHoverCircle.className}-disabled & {\n    background-color: ${theme.topBarButtonDisabledFg};\n    cursor: default;\n  }\n  &-slate { background-color: ${theme.topBarButtonSecondaryFg}; }\n  &-error { background-color: ${theme.topBarButtonErrorFg}; }\n`);\n","import {colors, theme} from 'app/client/ui2018/cssVars';\nimport {FullUser} from 'app/common/LoginSessionAPI';\nimport {dom, DomElementArg, styled} from 'grainjs';\nimport {icon} from 'app/client/ui2018/icons';\n\nexport type Size = 'small' | 'medium' | 'large';\n\n/**\n * Returns a DOM element showing a circular icon with a user's picture, or the user's initials if\n * picture is missing. Also varies the color of the circle when using initials.\n */\nexport function createUserImage(user: FullUser|'exampleUser'|null, size: Size, ...args: DomElementArg[]): HTMLElement {\n  let initials: string;\n  return cssUserImage(\n    cssUserImage.cls('-' + size),\n    (user === 'exampleUser') ? [cssUserImage.cls('-example'), cssExampleUserIcon('EyeShow')] :\n    (!user || user.anonymous) ? cssUserImage.cls('-anon') :\n    [\n      (user.picture ? cssUserPicture({src: user.picture}, dom.on('error', (ev, el) => dom.hideElem(el, true))) : null),\n      dom.style('background-color', pickColor(user)),\n      (initials = getInitials(user)).length > 1 ? cssUserImage.cls('-reduced') : null,\n      initials!,\n    ],\n    ...args,\n  );\n}\n\n/**\n * Extracts initials from a user, e.g. a FullUser. E.g. \"Foo Bar\" is turned into \"FB\", and\n * \"foo@example.com\" into just \"f\".\n *\n * Exported for testing.\n */\nexport function getInitials(user: {name?: string, email?: string}) {\n  const source = (user.name && user.name.trim()) || (user.email && user.email.trim()) || '';\n  return source.split(/\\s+/, 2).map(p => p.slice(0, 1)).join('');\n}\n\n/**\n * Hashes the username to return a color.\n */\nfunction pickColor(user: FullUser): string {\n  let c = hashCode(user.name + ':' + user.email) % someColors.length;\n  if (c < 0) { c += someColors.length; }\n  return someColors[c];\n}\n\n/**\n * Hash a string into an integer. From https://stackoverflow.com/a/7616484/328565.\n */\nfunction hashCode(str: string): number {\n  let hash: number = 0;\n  for (let i = 0; i < str.length; i++) {\n    // tslint:disable-next-line:no-bitwise\n    hash = ((hash << 5) - hash + str.charCodeAt(i)) | 0;\n  }\n  return hash;\n}\n\n// These mostly come from https://clrs.cc/\nconst someColors = [\n  '#0B437D',\n  '#0074D9',\n  '#7FDBFF',\n  '#39CCCC',\n  '#16DD6D',\n  '#2ECC40',\n  '#16B378',\n  '#EFCC00',\n  '#FF851B',\n  '#FF4136',\n  '#85144b',\n  '#F012BE',\n  '#B10DC9',\n];\n\nexport const cssUserImage = styled('div', `\n  position: relative;\n  text-align: center;\n  text-transform: uppercase;\n  user-select: none;\n  -moz-user-select: none;\n  color: white;\n  border-radius: 100px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &-small {\n    width: 24px;\n    height: 24px;\n    font-size: 13.5px;\n    --reduced-font-size: 12px;\n  }\n  &-medium {\n    width: 32px;\n    height: 32px;\n    font-size: 18px;\n    --reduced-font-size: 16px;\n  }\n  &-large {\n    width: 40px;\n    height: 40px;\n    font-size: 22.5px;\n    --reduced-font-size: 20px;\n  }\n\n  &-anon {\n    border: 1px solid ${colors.slate};\n    color: ${colors.slate};\n  }\n  &-anon::before {\n    content: \"?\"\n  }\n  &-reduced {\n    font-size: var(--reduced-font-size);\n  }\n\n  &-example {\n    background-color: ${colors.slate};\n    border: 1px solid ${colors.slate};\n  }\n`);\n\nconst cssUserPicture = styled('img', `\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  background-color: ${theme.menuBg};\n  border-radius: 100px;\n  box-sizing: content-box;    /* keep the border outside of the size of the image */\n`);\n\nconst cssExampleUserIcon = styled(icon, `\n  background-color: white;\n  width: 45px;\n  height: 45px;\n  transform: scaleY(0.75);\n`);\n","import {theme, vars} from 'app/client/ui2018/cssVars';\nimport {styled} from 'grainjs';\n\nexport const cssInput = styled('input', `\n  color: ${theme.inputFg};\n  background-color: ${theme.inputBg};\n  height: 30px;\n  width: 100%;\n  font-size: ${vars.mediumFontSize};\n  border-radius: 3px;\n  padding: 5px;\n  border: 1px solid ${theme.inputBorder};\n  outline: none;\n\n  &::placeholder {\n    color: ${theme.inputPlaceholderFg};\n  }\n`);\n","import {get as getBrowserGlobals} from 'app/client/lib/browserGlobals';\nimport type {Disposable} from 'grainjs';\nimport { GristLoadConfig } from \"app/common/gristUrls\";\n\n/**\n * Functions to perform server side authentication with Google.\n *\n * The authentication flow is performed by server side (app/server/lib/GoogleAuth.ts). Here we will\n * open up a popup with a stub html file (served by the server), that will redirect user to Google\n * Auth Service. In return, we will get authorization_code (which will be delivered by a postMessage\n * from the iframe), that when converted to authorization_token, can be used to access Google Drive\n * API. Accessing Google Drive files is done by the server, here we only ask for the permissions.\n *\n * Exposed methods are:\n * - getGoogleCodeForSending: asks google for a permission to create files on the drive (and read\n *                            them)\n * - getGoogleCodeForReading: asks google for a permission to read all files\n * - canReadPrivateFiles:     Grist by default won't ask for permission to read all files, but can be\n *                            configured this way by an environmental variable.\n */\n\nconst G = getBrowserGlobals('window');\n\nexport const ACCESS_DENIED = \"access_denied\";\nexport const AUTH_INTERRUPTED = \"auth_interrupted\";\n\n// https://developers.google.com/identity/protocols/oauth2/scopes#drive\n// \"View and manage Google Drive files and folders that you have opened or created with this app\"\nconst APP_SCOPE = \"https://www.googleapis.com/auth/drive.file\";\n// \"See and download all your Google Drive files\"\nconst READ_SCOPE = \"https://www.googleapis.com/auth/drive.readonly\";\n\nexport function getGoogleCodeForSending(owner: Disposable) {\n  return getGoogleAuthCode(owner, APP_SCOPE);\n}\n\nexport function getGoogleCodeForReading(owner: Disposable) {\n  const gristConfig: GristLoadConfig = (window as any).gristConfig || {};\n  // Default scope allows as to manage files we created.\n  return getGoogleAuthCode(owner, gristConfig.googleDriveScope || APP_SCOPE);\n}\n\n/**\n * Checks if default scope for Google Drive integration will allow to access all personal files\n */\nexport function canReadPrivateFiles() {\n  const gristConfig: GristLoadConfig = (window as any).gristConfig || {};\n  return gristConfig.googleDriveScope === READ_SCOPE;\n}\n\n/**\n * Opens up a popup with server side Google Authentication. Returns a code that can be used\n * by server side to retrieve access_token required in Google Api.\n */\nfunction getGoogleAuthCode(owner: Disposable, scope: string) {\n  // Compute google auth server endpoint (grist endpoint for server side google authentication).\n  // This endpoint renders a page that redirects user to Google Consent screen and after Google\n  // sends a response, it will post this response back to us.\n  // Message will be an object { code, error }.\n  const authLink = getGoogleAuthEndpoint(scope);\n  const authWindow = openPopup(authLink);\n  return new Promise<string>((resolve, reject) => {\n    attachListener(owner, authWindow, async (event: MessageEvent|null) => {\n      // If the no message, or window was closed (user closed it intentionally).\n      if (!event || authWindow.closed) {\n        reject(new Error(AUTH_INTERRUPTED));\n        return;\n      }\n      // For the first message (we expect only a single message) close the window.\n      authWindow.close();\n      if (owner.isDisposed()) {\n        reject(new Error(AUTH_INTERRUPTED));\n        return;\n      }\n      // Check response from the popup\n      const response = (event.data || {}) as {code?: string, error?: string};\n      // - when user declined, report back, caller should stop current flow,\n      if (response.error === \"access_denied\") {\n        reject(new Error(ACCESS_DENIED));\n        return;\n      }\n      // - when there is no authorization, or error is different from what we expected - report to user.\n      if (!response.code) {\n        reject(new Error(response.error || \"Missing authorization code\"));\n        return;\n      }\n      resolve(response.code);\n    });\n  });\n}\n\n// Helper function that attaches a handler to message event from a popup window.\nfunction attachListener(owner: Disposable, popup: Window, listener: (e: MessageEvent|null) => void) {\n  const wrapped = (e: MessageEvent) => {\n    // Listen to events only from our window.\n    if (e.source !== popup) { return; }\n    // In case when Grist was reloaded or user navigated away - do nothing.\n    if (owner.isDisposed()) { return; }\n    listener(e);\n    // Clear the listener, to avoid orphaned calls from closed event.\n    listener = () => {};\n  };\n  // Unfortunately there is no ease way to detect if user has closed the popup.\n  const closeHandler = onClose(popup, () => {\n    listener(null);\n    // Clear the listener, to avoid orphaned messages from window.\n    listener = () => {};\n  });\n  owner.onDispose(closeHandler);\n  G.window.addEventListener('message', wrapped);\n  owner.onDispose(() => {\n    G.window.removeEventListener('message', wrapped);\n  });\n}\n\n// Periodically checks if the window is closed.\n// Returns a function that can be used to cancel the event.\nfunction onClose(window: Window, clb: () => void) {\n  const interval = setInterval(() => {\n    if (window.closed) {\n      clearInterval(interval);\n      clb();\n    }\n  }, 1000);\n  return () => clearInterval(interval);\n}\n\nfunction openPopup(url: string): Window {\n  // Center window on desktop\n  // https://stackoverflow.com/questions/16363474/window-open-on-a-multi-monitor-dual-monitor-system-where-does-window-pop-up\n  const width = 600;\n  const height = 650;\n  const left = window.screenX + (screen.width - width) / 2;\n  const top = (screen.height - height) / 4;\n  let windowFeatures = `top=${top},left=${left},menubar=no,location=no,` +\n    `resizable=yes,scrollbars=yes,status=yes,height=${height},width=${width}`;\n\n  // If window will be too large (for example on mobile) - open as a new tab\n  if (screen.width <= width || screen.height <= height) {\n    windowFeatures = '';\n  }\n\n  const authWindow = G.window.open(url, \"GoogleAuthPopup\", windowFeatures);\n  if (!authWindow) {\n    // This method should be invoked by an user action.\n    throw new Error(\"This method should be invoked synchronously\");\n  }\n  return authWindow;\n}\n\n/**\n * Generates Google Auth endpoint (exposed by Grist) url. For example:\n * https://docs.getgrist.com/auth/google\n * @param scope Requested access scope for Google Services:\n * https://developers.google.com/identity/protocols/oauth2/scopes\n */\nfunction getGoogleAuthEndpoint(scope: string) {\n  return new URL(`auth/google?scope=${scope}`, window.location.origin).href;\n}\n","/**\n * Small utility to help with processing mouse-drag events. Usage is:\n *    dom('div', mouseDrag((startEvent, elem) => ({\n *      onMove(moveEvent) { ... },\n *      onStop(stopEvent) { ... },\n *    })));\n *\n * The passed-in callback is called on 'mousedown' events. It may return null to ignore the event.\n * Otherwise, it should return a handler for mousemove/mouseup: we will then subscribe to these\n * events, and clean up on mouseup.\n */\nimport {dom, DomElementMethod, IDisposable} from \"grainjs\";\n\n\nexport interface MouseDragHandler {\n  onMove(moveEv: MouseEvent): void;\n  onStop(endEv: MouseEvent): void;\n}\n\nexport type MouseDragStart = (startEv: MouseEvent, elem: HTMLElement) => MouseDragHandler|null;\n\nexport function mouseDragElem(elem: HTMLElement, onStart: MouseDragStart): IDisposable {\n\n  // This prevents the default text-drag behavior when elem is part of a text selection.\n  elem.style.userSelect = 'none';\n\n  return dom.onElem(elem, 'mousedown', (ev, el) => _startDragging(ev, el, onStart));\n}\nexport function mouseDrag(onStart: MouseDragStart): DomElementMethod {\n  return (elem) => { mouseDragElem(elem, onStart); };\n}\n\n// Same as mouseDragElem, but listens for mousedown on descendants of elem that match selector.\nexport function mouseDragMatchElem(elem: HTMLElement, selector: string, onStart: MouseDragStart): IDisposable {\n  return dom.onMatchElem(elem, selector, 'mousedown',\n    (ev, el) => _startDragging(ev as MouseEvent, el as HTMLElement, onStart));\n}\n\nfunction _startDragging(startEv: MouseEvent, elem: HTMLElement, onStart: MouseDragStart) {\n  const dragHandler = onStart(startEv, elem);\n  if (dragHandler) {\n\n    const {onMove, onStop} = dragHandler;\n    const upLis = dom.onElem(document, 'mouseup', stop, {useCapture: true});\n    const moveLis = dom.onElem(document, 'mousemove', onMove, {useCapture: true});\n\n    function stop(stopEv: MouseEvent) {\n      moveLis.dispose();\n      upLis.dispose();\n      onStop(stopEv);\n    }\n  }\n}\n","/**\n * This module implements tooltips of two kinds:\n * - to be shown on hover, similar to the native \"title\" attribute (popweasel meant to provide\n *   that, but its machinery isn't really needed). TODO these aren't yet implemented.\n * - to be shown briefly, as a transient notification next to some action element.\n */\n\nimport {prepareForTransition} from 'app/client/ui/transitions';\nimport {testId, theme, vars} from 'app/client/ui2018/cssVars';\nimport {icon} from 'app/client/ui2018/icons';\nimport {makeLinks} from 'app/client/ui2018/links';\nimport {menuCssClass} from 'app/client/ui2018/menus';\nimport {dom, DomContents, DomElementArg, DomElementMethod, styled} from 'grainjs';\nimport Popper from 'popper.js';\nimport {cssMenu, defaultMenuOptions, IMenuOptions, setPopupToCreateDom} from 'popweasel';\nimport merge = require('lodash/merge');\n\nexport interface ITipOptions {\n  /**\n   * Where to place the tooltip relative to the reference element.\n   *\n   * Defaults to 'top'.\n   *\n   * See https://popper.js.org/docs/v1/#popperplacements--codeenumcode.\n   */\n  placement?: Popper.Placement;\n\n  /** When set, a tooltip will replace any previous tooltip with the same key. */\n  key?: string;\n\n  /**\n   * Optionally, popper modifiers (e.g. {offset: {offset: 8}}),\n   * See https://popper.js.org/docs/v1/#modifiers.\n   */\n  modifiers?: Popper.Modifiers;\n}\n\nexport interface ITransientTipOptions extends ITipOptions {\n  /** When to remove the transient tooltip. Defaults to 2000ms. */\n  timeoutMs?: number;\n}\n\nexport interface IHoverTipOptions extends ITransientTipOptions {\n  /** How soon after mouseenter to show it. Defaults to 200 ms. */\n  openDelay?: number;\n\n  /** If set and non-zero, remove the tip automatically after this time. */\n  timeoutMs?: number;\n\n  /**\n   * How soon after mouseleave to hide it.\n   *\n   * Defaults to 100 ms.\n   *\n   * A non-zero delay gives the pointer some time to be outside of the trigger\n   * and the tooltip content if the user moves the pointer from one to the other.\n   */\n  closeDelay?: number;\n\n  /**\n   * Also show the tip on clicking the element it's attached to.\n   *\n   * Defaults to false.\n   *\n   * Should only be set to true if `closeOnClick` is false.\n   */\n  openOnClick?: boolean;\n\n  /**\n   * Hide the tip on clicking the element it's attached to.\n   *\n   * Defaults to true.\n   *\n   * Should only be set to true if `openOnClick` is false.\n   */\n  closeOnClick?: boolean;\n\n  /** Whether to show the tooltip only when the ref element overflows horizontally. */\n  overflowOnly?: boolean;\n}\n\nexport type ITooltipContent = ITooltipContentFunc | DomContents;\n\nexport type ITooltipContentFunc = (ctl: ITooltipControl) => DomContents;\n\nexport interface ITooltipControl {\n  close(): void;\n  getDom(): HTMLElement;       // The tooltip DOM.\n}\n\n/**\n * Map of open tooltips, mapping the key (from ITipOptions) to ITooltipControl that allows removing\n * the tooltip.\n */\nconst openTooltips = new Map<string, ITooltipControl>();\n\n/**\n * Show tipContent briefly (2s by default), in a tooltip next to refElem (on top of it, by default).\n * See also ITipOptions.\n */\nexport function showTransientTooltip(\n  refElem: Element,\n  tipContent: ITooltipContent,\n  options: ITransientTipOptions = {}) {\n  const ctl = showTooltip(refElem, typeof tipContent == 'function' ? tipContent : () => tipContent, options);\n  const origClose = ctl.close;\n  ctl.close = () => { clearTimeout(timer); origClose(); };\n\n  const timer = setTimeout(ctl.close, options.timeoutMs || 2000);\n  return ctl;\n}\n\n/**\n * Show the return value of tipContent(ctl) in a tooltip next to refElem (on top of it, by default).\n * Returns ctl. In both places, ctl is an object with a close() method, which closes the tooltip.\n * See also ITipOptions.\n */\nexport function showTooltip(\n  refElem: Element, tipContent: ITooltipContentFunc, options: ITipOptions = {}\n): ITooltipControl {\n  const placement: Popper.Placement = options.placement ?? 'top';\n  const key = options.key;\n  const hasKey = key && openTooltips.has(key);\n  let closed = false;\n\n  // If we had a previous tooltip with the same key, clean it up.\n  if (key) { openTooltips.get(key)?.close(); }\n\n  // Cleanup involves destroying the Popper instance, removing the element, etc.\n  function close() {\n    if (closed) { return; }\n    closed = true;\n    popper.destroy();\n    dom.domDispose(content);\n    content.remove();\n    if (key) { openTooltips.delete(key); }\n  }\n  const ctl: ITooltipControl = {close, getDom: () => content};\n\n  // Add the content element.\n  const content = cssTooltip({role: 'tooltip'}, tipContent(ctl), testId(`tooltip`));\n  // Prepending instead of appending allows better text selection, as this element is on top.\n  document.body.prepend(content);\n\n  // Create a popper for positioning the tooltip content relative to refElem.\n  const popperOptions: Popper.PopperOptions = {\n    modifiers: merge(\n      { preventOverflow: {boundariesElement: 'viewport'} },\n      options.modifiers\n    ),\n    placement,\n  };\n\n  const popper = new Popper(refElem, content, popperOptions);\n\n  // If refElem is disposed we close the tooltip.\n  dom.onDisposeElem(refElem, close);\n\n  // If we're not replacing the tooltip, fade in the content using transitions.\n  if (!hasKey) {\n    prepareForTransition(content, () => { content.style.opacity = '0'; });\n    content.style.opacity = '';\n  }\n\n  if (key) { openTooltips.set(key, ctl); }\n  return ctl;\n}\n\n/**\n * Render a tooltip on hover. Suitable for use during dom construction, e.g.\n *    dom('div', 'Trigger', hoverTooltip('Hello!')\n */\nexport function hoverTooltip(tipContent: ITooltipContent, options?: IHoverTipOptions): DomElementMethod {\n  const defaultOptions: IHoverTipOptions = {placement: 'bottom'};\n  return (elem) => setHoverTooltip(elem, tipContent, {...defaultOptions, ...options});\n}\n\n/**\n * On hover, show the full text of this element when it overflows horizontally. It is intended\n * mainly for styled with \"text-overflow: ellipsis\".\n * E.g. dom('label', 'Long text...', overflowTooltip()).\n */\nexport function overflowTooltip(options?: IHoverTipOptions): DomElementMethod {\n  const defaultOptions: IHoverTipOptions = {\n    placement: 'bottom-start',\n    overflowOnly: true,\n    modifiers: {offset: {offset: '40, 0'}},\n  };\n  return (elem) => setHoverTooltip(elem, () => elem.textContent,  {...defaultOptions, ...options});\n}\n\n/**\n * Attach a tooltip to the given element, to be rendered on hover.\n */\nexport function setHoverTooltip(\n  refElem: Element,\n  tipContent: ITooltipContent,\n  options: IHoverTipOptions = {}\n) {\n  const {key, openDelay = 200, timeoutMs, closeDelay = 100, openOnClick, closeOnClick = true,\n    overflowOnly = false} = options;\n\n  const tipContentFunc = typeof tipContent === 'function' ? tipContent : () => tipContent;\n\n  // Controller for closing the tooltip, if one is open.\n  let tipControl: ITooltipControl|undefined;\n\n  // A marker, that the tooltip should be closed, but we are waiting for the mouseup event.\n  const POSTPONED = Symbol();\n\n  // Timer to open or close the tooltip, depending on whether tipControl is set.\n  let timer: ReturnType<typeof setTimeout>|undefined|typeof POSTPONED;\n\n  // To allow user select text, we will monitor if the selection has started in the tooltip (by listening\n  // to the mousedown event). If it has and mouse goes outside, we will mark that the tooltip should be closed.\n  // When the selection is over (by listening to mouseup on window), a new close is scheduled with 1.4s, to allow\n  // user to press Ctrl+C (but only if the marker - POSTPONED - is still set).\n  let mouseGrabbed = false;\n  function grabMouse(tip: Element) {\n    mouseGrabbed = true;\n    const listener = dom.onElem(window, 'mouseup', () => {\n      mouseGrabbed = false;\n      if (timer === POSTPONED) {\n        scheduleCloseIfOpen(1400);\n      }\n    });\n    dom.autoDisposeElem(tip, listener);\n\n    // Disable text selection in any other element except this one. This class sets user-select: none to all\n    // elements except the tooltip. This helps to avoid accidental selection of text in other elements, once\n    // the mouse leaves the tooltip.\n    document.body.classList.add(cssDisableSelectOnAll.className);\n    dom.onDisposeElem(tip, () => document.body.classList.remove(cssDisableSelectOnAll.className));\n  }\n\n  function clearTimer() {\n    if (timer !== POSTPONED) { clearTimeout(timer); }\n    timer = undefined;\n  }\n  function resetTimer(func: () => void, delay: number|typeof POSTPONED) {\n    clearTimer();\n    timer = delay === POSTPONED ? POSTPONED : setTimeout(func, delay);\n  }\n  function scheduleCloseIfOpen(timeout = closeDelay) {\n    clearTimer();\n    if (tipControl) {\n      resetTimer(close, mouseGrabbed ? POSTPONED : timeout);\n    }\n  }\n  function open() {\n    clearTimer();\n    tipControl = showTooltip(refElem, ctl => tipContentFunc({...ctl, close}), options);\n    const tipDom = tipControl.getDom();\n    dom.onElem(tipDom, 'mouseenter', clearTimer);\n    dom.onElem(tipDom, 'mouseleave', () => scheduleCloseIfOpen());\n    dom.onElem(tipDom, 'mousedown', grabMouse.bind(null, tipDom));\n    dom.onDisposeElem(tipDom, () => close());\n    if (timeoutMs) { resetTimer(close, timeoutMs); }\n  }\n  function close() {\n    clearTimer();\n    tipControl?.close();\n    tipControl = undefined;\n  }\n\n  // We simulate hover effect by handling mouseenter/mouseleave.\n  dom.onElem(refElem, 'mouseenter', () => {\n    if (overflowOnly && (refElem as HTMLElement).offsetWidth >= refElem.scrollWidth) {\n      return;\n    }\n    if (!tipControl && !timer) {\n      // If we're replacing a tooltip, open without delay.\n      const delay = key && openTooltips.has(key) ? 0 : openDelay;\n      resetTimer(open, delay);\n    } else if (tipControl) {\n      // Already shown, reset to newly-shown state.\n      clearTimer();\n      if (timeoutMs) { resetTimer(close, timeoutMs); }\n    }\n  });\n\n  dom.onElem(refElem, 'mouseleave', () => scheduleCloseIfOpen());\n\n  if (openOnClick) {\n    // If requested, re-open on click.\n    dom.onElem(refElem, 'click', () => { close(); open(); });\n  } else if (closeOnClick) {\n    // If requested, close on click.\n    dom.onElem(refElem, 'click', () => { close(); });\n  }\n\n  // Close tooltip if refElem is disposed.\n  dom.onDisposeElem(refElem, close);\n}\n\n/**\n * Build a handy button for closing a tooltip.\n */\nexport function tooltipCloseButton(ctl: ITooltipControl): HTMLElement {\n  return cssTooltipCloseButton(icon('CrossSmall'),\n    dom.on('mousedown', (ev) =>{\n      ev.stopPropagation();\n      ev.preventDefault();\n      ctl.close();\n    }),\n    testId('tooltip-close'),\n  );\n}\n\n/**\n * Renders an info icon that shows a tooltip with the specified `content` on click.\n */\nexport function infoTooltip(content: DomContents, menuOptions?: IMenuOptions, ...domArgs: DomElementArg[]) {\n  return cssInfoTooltipButton('?',\n    (elem) => {\n      setPopupToCreateDom(\n        elem,\n        (ctl) => {\n          return cssInfoTooltipPopup(\n            cssInfoTooltipPopupCloseButton(\n              icon('CrossSmall'),\n              dom.on('click', () => ctl.close()),\n              testId('info-tooltip-close'),\n            ),\n            cssInfoTooltipPopupBody(\n              content,\n              testId('info-tooltip-popup-body'),\n            ),\n            dom.cls(menuCssClass),\n            dom.cls(cssMenu.className),\n            dom.onKeyDown({\n              Enter: () => ctl.close(),\n              Escape: () => ctl.close(),\n            }),\n            (popup) => { setTimeout(() => popup.focus(), 0); },\n            testId('info-tooltip-popup'),\n          );\n        },\n        {...defaultMenuOptions, ...{placement: 'bottom-end'}, ...menuOptions},\n      );\n    },\n    testId('info-tooltip'),\n    ...domArgs,\n  );\n}\n\nexport interface WithInfoTooltipOptions {\n  domArgs?: DomElementArg[];\n  tooltipButtonDomArgs?: DomElementArg[];\n  tooltipMenuOptions?: IMenuOptions;\n}\n\n/**\n * Wraps `domContent` with a info tooltip button that displays the provided\n * `tooltipContent` on click, and returns the wrapped element.\n *\n * The tooltip button is displayed to the right of `domContents`, and displays\n * a popup on click. The popup can be dismissed by clicking away from it, clicking\n * the close button in the top-right corner, or pressing Enter or Escape.\n *\n * Arguments can be passed to both the top-level wrapped DOM element and the\n * tooltip button element with `options.domArgs` and `options.tooltipButtonDomArgs`\n * respectively.\n *\n * Usage:\n *\n *   withInfoTooltip(\n *     dom('div', 'Hello World!'),\n *     dom('p', 'This is some text to show inside the tooltip.'),\n *   )\n */\nexport function withInfoTooltip(\n  domContents: DomContents,\n  tooltipContent: DomContents,\n  options: WithInfoTooltipOptions = {},\n) {\n  const {domArgs, tooltipButtonDomArgs, tooltipMenuOptions} = options;\n  return cssDomWithTooltip(\n    domContents,\n    infoTooltip(tooltipContent, tooltipMenuOptions, tooltipButtonDomArgs),\n    ...(domArgs ?? [])\n  );\n}\n\n/**\n * Renders an description info icon that shows a tooltip with the specified `content` on click.\n */\nexport function descriptionInfoTooltip(\n  content: string,\n  testPrefix: string,\n  ...domArgs: DomElementArg[]) {\n  const body = makeLinks(content);\n  const options = {\n    closeDelay: 200,\n    key: 'columnDescription',\n    openOnClick: true,\n  };\n  const builder = () => cssDescriptionInfoTooltip(\n    body,\n    // Used id test to find the origin of the tooltip regardless webdriver implementation (some of them start)\n    cssTooltipCorner(testId('tooltip-origin')),\n    testId(`${testPrefix}-info-tooltip-popup`),\n    {tabIndex: '-1'}\n  );\n  return cssDescriptionInfoTooltipButton(\n    icon('Info', dom.cls(\"info_toggle_icon\")),\n    testId(`${testPrefix}-info-tooltip`),\n    dom.on('mousedown', (e) => e.stopPropagation()),\n    dom.on('click', (e) => e.stopPropagation()),\n    hoverTooltip(builder, options),\n    dom.cls(\"info_toggle_icon_wrapper\"),\n    ...domArgs,\n  );\n}\n\nconst cssTooltipCorner = styled('div', `\n  position: absolute;\n  width: 0;\n  height: 0;\n  top: 0;\n  left: 0;\n  visibility: hidden;\n`);\n\nconst cssDescriptionInfoTooltip = styled('div', `\n  position: relative;\n  white-space: pre-wrap;\n  text-align: left;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  line-height: 1.4;\n  max-width: min(500px, calc(100vw - 80px)); /* can't use 100%, 500px and 80px are picked by hand */\n`);\n\nconst cssDescriptionInfoTooltipButton = styled('div', `\n  cursor: pointer;\n  --icon-color: ${theme.infoButtonFg};\n  border-radius: 50%;\n  display: inline-block;\n  padding-left: 5px;\n  line-height: 0px;\n\n  &:hover  {\n    --icon-color: ${theme.infoButtonHoverFg};\n  }\n  &:active  {\n    --icon-color: ${theme.infoButtonActiveFg};\n  }\n`);\n\n\nconst cssTooltip = styled('div', `\n  position: absolute;\n  z-index: ${vars.tooltipZIndex};      /* should be higher than a modal */\n  background-color: ${theme.tooltipBg};\n  border-radius: 3px;\n  box-shadow: 0 0 2px rgba(0,0,0,0.5);\n  text-align: center;\n  color: ${theme.tooltipFg};\n  width: auto;\n  font-family: sans-serif;\n  font-size: 10pt;\n  padding: 8px 16px;\n  margin: 4px;\n  transition: opacity 0.2s;\n  user-select: auto;\n`);\n\nconst cssDisableSelectOnAll = styled('div', `\n  & *:not(.${cssTooltip.className}, .${cssTooltip.className} *) {\n    user-select: none;\n  }\n`);\n\nconst cssTooltipCloseButton = styled('div', `\n  cursor: pointer;\n  user-select: none;\n  width: 16px;\n  height: 16px;\n  line-height: 16px;\n  text-align: center;\n  margin: -4px -4px -4px 8px;\n  --icon-color: ${theme.tooltipCloseButtonFg};\n  border-radius: 16px;\n\n  &:hover {\n    background-color: ${theme.tooltipCloseButtonHoverBg};\n    --icon-color: ${theme.tooltipCloseButtonHoverFg};\n  }\n`);\n\nconst cssInfoTooltipButton = styled('div', `\n  flex-shrink: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: ${vars.largeFontSize};\n  width: ${vars.largeFontSize};\n  border: 1px solid ${theme.controlSecondaryFg};\n  color: ${theme.controlSecondaryFg};\n  border-radius: 50%;\n  cursor: pointer;\n  user-select: none;\n\n  &:hover {\n    border: 1px solid ${theme.controlSecondaryHoverFg};\n    color: ${theme.controlSecondaryHoverFg};\n  }\n`);\n\nconst cssInfoTooltipPopup = styled('div', `\n  display: flex;\n  flex-direction: column;\n  background-color: ${theme.popupBg};\n  max-width: 200px;\n  margin: 4px;\n  padding: 0px;\n`);\n\nconst cssInfoTooltipPopupBody = styled('div', `\n  color: ${theme.text};\n  text-align: left;\n  padding: 0px 16px 16px 16px;\n`);\n\nconst cssInfoTooltipPopupCloseButton = styled('div', `\n  flex-shrink: 0;\n  align-self: flex-end;\n  cursor: pointer;\n  --icon-color: ${theme.controlSecondaryFg};\n  margin: 8px 8px 4px 0px;\n  padding: 2px;\n  border-radius: 4px;\n\n  &:hover {\n    background-color: ${theme.hover};\n  }\n`);\n\nconst cssDomWithTooltip = styled('div', `\n  display: flex;\n  align-items: center;\n  column-gap: 8px;\n`);\n","/**\n * A helper for CSS transitions. Usage:\n *\n *    dom(...,\n *      transition(obs, {\n *        prepare(elem, val) { SET STYLE WITH TRANSITIONS OFF },\n *        run(elem, val) { SET STYLE WITH TRANSITIONS ON },\n *        // finish(elem, val) { console.log(\"transition finished\"); }\n *      )\n *    )\n *\n * Allows modifiying styles in response to changes in an observable. Any time the observable\n * changes, the prepare() callback allows preparing the styles, with transitions off. Then\n * the run() callback can set the styles that will be subject to transitions.\n *\n * The actual transition styles (e.g. 'transition: width 0.2s') should be set on elem elsewhere.\n *\n * The optional finish() callback is called when the transition ends. If CSS transitions are set\n * on multiple properties, only the first one is used to determine when the transition ends.\n *\n * All callbacks are called with the element this is attached to, and the value of the observable.\n *\n * The recommendation is to avoid setting styles at transition end, since it's not entirely\n * reliable; it's better to arrange CSS so that the desired final styles can be set in run(). The\n * finish() callback is intended to tell other code that the element is in its transitioned state.\n *\n * When the observable changes during a transition, the prepare() callback is skipped, the run()\n * callback is called, and the finish() callback delayed until the new transition ends.\n *\n * If other styles are changed (or css classes applied) when the observable changes, subscriptions\n * triggered BEFORE the transition() subscription are applied with transitions OFF (like\n * prepare()); those triggered AFTER are subject to transitions (like run()).\n */\n\nimport {BindableValue, Disposable, dom, DomElementMethod, subscribeElem} from 'grainjs';\n\nexport interface ITransitionLogic<T = void> {\n  prepare(elem: HTMLElement, value: T): void;\n  run(elem: HTMLElement, value: T): void;\n  finish?(elem: HTMLElement, value: T): void;\n}\n\nexport function transition<T>(obs: BindableValue<T>, trans: ITransitionLogic<T>): DomElementMethod {\n  const {prepare, run, finish} = trans;\n  let watcher: TransitionWatcher|null = null;\n  let firstCall = true;\n  return (elem) => subscribeElem<T>(elem, obs, (val) => {\n    // First call is initialization, don't treat it as a transition\n    if (firstCall) { firstCall = false; return; }\n    if (watcher) {\n      watcher.reschedule();\n    } else {\n      watcher = new TransitionWatcher(elem);\n      watcher.onDispose(() => {\n        watcher = null;\n        if (finish) { finish(elem, val); }\n      });\n\n      // Call prepare() with transitions turned off.\n      prepareForTransition(elem, () => prepare(elem, val));\n    }\n    run(elem, val);\n  });\n}\n\n/**\n * Call prepare() with transitions turned off. This allows preparing an element before another\n * change to properties actually gets animated using the element's transition settings.\n */\nexport function prepareForTransition(elem: HTMLElement, prepare: () => void) {\n  const prior = elem.style.transitionProperty;\n  elem.style.transitionProperty = 'none';\n  prepare();\n\n  // Recompute styles while transitions are off. See https://stackoverflow.com/a/16575811/328565\n  // for explanation and https://stackoverflow.com/a/31862081/328565 for the recommendation used\n  // here to trigger a style computation without a reflow.\n  window.getComputedStyle(elem).opacity;   // eslint-disable-line no-unused-expressions\n\n  // Restore transitions.\n  elem.style.transitionProperty = prior;\n}\n\n\n/**\n * Helper for waiting for an active transition to end. Beyond listening to 'transitionend', it\n * does a few things:\n *\n * (1) if the transition lists multiple properties, only the first property and duration are used\n *     ('transitionend' on additional properties is inconsistent across browsers).\n * (2) if 'transitionend' fails to fire, the transition is considered ended when duration elapses,\n *     plus 10ms grace period (to let 'transitionend' fire first normally).\n * (3) reschedule() allows resetting the timer if a new transition is known to have started.\n *\n * When the transition ends, TransitionWatcher disposes itself. Its onDispose() method allows\n * registering callbacks.\n */\nexport class TransitionWatcher extends Disposable {\n  private _propertyName: string;\n  private _durationMs: number;\n  private _timer: ReturnType<typeof setTimeout>;\n\n  constructor(elem: Element) {\n    super();\n    const style = window.getComputedStyle(elem);\n    this._propertyName = style.transitionProperty.split(\",\")[0].trim();\n\n    // Gets the duration of the transition from the styles of the given element, in ms.\n    // FF and Chrome both return transitionDuration in seconds (e.g. \"0.150s\") In case of multiple\n    // values, e.g. \"0.150s, 2s\"; parseFloat will just parse the first one.\n    const duration = style.transitionDuration;\n    this._durationMs = ((duration && parseFloat(duration)) || 0) * 1000;\n\n    this.autoDispose(dom.onElem(elem, 'transitionend', (e) =>\n      (e.propertyName === this._propertyName) && this.dispose()));\n\n    this._timer = setTimeout(() => this.dispose(), this._durationMs + 10);\n    this.onDispose(() => clearTimeout(this._timer));\n  }\n\n  public reschedule() {\n    clearTimeout(this._timer);\n    this._timer = setTimeout(() => this.dispose(), this._durationMs + 10);\n  }\n}\n","import {isIOS} from 'app/client/lib/browserInfo';\nimport {localStorageBoolObs} from 'app/client/lib/localStorageObs';\nimport {dom} from 'grainjs';\n\nexport const viewportEnabled = localStorageBoolObs('viewportEnabled', true);\n\nexport function toggleViewport() {\n  viewportEnabled.set(!viewportEnabled.get());\n  if (!viewportEnabled.get()) {\n    // Removing the meta tag doesn't cause mobile browsers to reload automatically.\n    location.reload();\n  }\n}\n\nexport function addViewportTag() {\n  dom.update(document.head,\n    dom.maybe(viewportEnabled, () => {\n      // For the maximum-scale=1 advice, see https://stackoverflow.com/a/46254706/328565. On iOS,\n      // it prevents the auto-zoom when an input is focused, but does not prevent manual\n      // pinch-to-zoom. On Android, it's not needed, and would prevent manual zoom.\n      const viewportContent = \"width=device-width,initial-scale=1.0\" + (isIOS() ? \",maximum-scale=1\" : \"\");\n      return dom('meta', {name: \"viewport\", content: viewportContent});\n    })\n  );\n}\n","/**\n * Exports `docBreadcrumbs()` which returns a styled breadcrumb for the current page:\n *\n *  [icon] Workspace (link) / Document name (editable) / Page name (editable)\n *\n * Workspace is a clickable link and document and page names are editable labels.\n */\nimport {makeT} from 'app/client/lib/localization';\nimport { urlState } from 'app/client/models/gristUrlState';\nimport { cssHideForNarrowScreen, mediaNotSmall, testId, theme } from 'app/client/ui2018/cssVars';\nimport { editableLabel } from 'app/client/ui2018/editableLabel';\nimport { icon } from 'app/client/ui2018/icons';\nimport { cssLink } from 'app/client/ui2018/links';\nimport { BindableValue, dom, Observable, styled } from 'grainjs';\nimport { tooltip } from 'popweasel';\n\nconst t = makeT('breadcrumbs');\n\nexport const cssBreadcrumbs = styled('div', `\n  color: ${theme.lightText};\n  white-space: nowrap;\n  cursor: default;\n`);\n\nexport const separator = styled('span', `\n  padding: 0 2px;\n`);\n\nconst cssIcon = styled(icon, `\n  background-color: ${theme.accentIcon};\n  margin-top: -2px;\n`);\n\nconst cssPublicIcon = styled(cssIcon, `\n  margin-left: 8px;\n  margin-top: -4px;\n`);\n\nconst cssWorkspaceName = styled(cssLink, `\n  margin-left: 8px;\n`);\n\nconst cssWorkspaceNarrowScreen = styled(icon, `\n  transform: rotateY(180deg);\n  width: 32px;\n  height: 32px;\n  margin-bottom: 4px;\n  margin-left: -7px;\n  margin-right: 8px;\n  background-color: ${theme.lightText};\n  cursor: pointer;\n  @media ${mediaNotSmall} {\n    & {\n      display: none;\n    }\n  }\n`);\n\nconst cssEditableName = styled('input', `\n  &:hover, &:focus {\n    color: ${theme.text};\n  }\n`);\n\nconst cssTag = styled('span', `\n  background-color: ${theme.breadcrumbsTagBg};\n  color: ${theme.breadcrumbsTagFg};\n  border-radius: 3px;\n  padding: 0 4px;\n  margin-left: 4px;\n`);\n\nconst cssAlertTag = styled(cssTag, `\n  background-color: ${theme.breadcrumbsTagAlertBg};\n  --icon-color: ${theme.breadcrumbsTagFg};\n  a {\n    cursor: pointer;\n  }\n`);\n\ninterface PartialWorkspace {\n  id: number;\n  name: string;\n}\n\nexport function docBreadcrumbs(\n  workspace: Observable<PartialWorkspace|null>,\n  docName: Observable<string>,\n  pageName: Observable<string>,\n  options: {\n    docNameSave: (val: string) => Promise<void>,\n    pageNameSave: (val: string) => Promise<void>,\n    cancelRecoveryMode: () => Promise<void>,\n    isDocNameReadOnly?: BindableValue<boolean>,\n    isPageNameReadOnly?: BindableValue<boolean>,\n    isFork: Observable<boolean>,\n    isTutorialFork: Observable<boolean>,\n    isBareFork: Observable<boolean>,\n    isFiddle: Observable<boolean>,\n    isRecoveryMode: Observable<boolean>,\n    isSnapshot?: Observable<boolean>,\n    isPublic?: Observable<boolean>,\n    isTemplate?: Observable<boolean>,\n    isAnonymous?: boolean,\n  }\n  ): Element {\n    const shouldShowWorkspace = !(options.isTemplate && options.isAnonymous);\n    return cssBreadcrumbs(\n      !shouldShowWorkspace ? null : dom.domComputed<[boolean, PartialWorkspace|null]>(\n        (use) => [use(options.isBareFork), use(workspace)],\n        ([isBareFork, ws]) => {\n          if (isBareFork || !ws) { return null; }\n          return [\n            cssIcon('Home',\n              testId('bc-home'),\n              cssHideForNarrowScreen.cls('')),\n            cssWorkspaceName(\n              urlState().setLinkUrl({ws: ws.id}),\n              dom.text(ws.name),\n              testId('bc-workspace'),\n              cssHideForNarrowScreen.cls('')\n            ),\n            cssWorkspaceNarrowScreen(\n              'Expand',\n              urlState().setLinkUrl({ws: ws.id}),\n              testId('bc-workspace-ns')\n            ),\n            separator(' / ',\n                      testId('bc-separator'),\n                      cssHideForNarrowScreen.cls(''))\n          ];\n        }\n      ),\n      editableLabel(docName, {\n        save: options.docNameSave,\n        inputArgs: [\n          testId('bc-doc'),\n          cssEditableName.cls(''),\n          dom.boolAttr('disabled', options.isDocNameReadOnly || false),\n        ],\n      }),\n      dom.maybe(options.isPublic, () => cssPublicIcon('PublicFilled', testId('bc-is-public'))),\n      dom.domComputed((use) => {\n        if (options.isSnapshot && use(options.isSnapshot)) {\n          return cssTag(t(\"snapshot\"), testId('snapshot-tag'));\n        }\n        if (use(options.isFork) && !use(options.isTutorialFork)) {\n          return cssTag(t(\"unsaved\"), testId('unsaved-tag'));\n        }\n        if (use(options.isRecoveryMode)) {\n          return cssAlertTag(t(\"recovery mode\"),\n                             dom('a', dom.on('click', () => options.cancelRecoveryMode()),\n                                 icon('CrossSmall')),\n                             testId('recovery-mode-tag'));\n        }\n        if (use(options.isFiddle)) {\n          return cssTag(t(\"fiddle\"), tooltip({title: t(`You may make edits, but they will create a new copy and will\nnot affect the original document.`)}), testId('fiddle-tag'));\n        }\n      }),\n      separator(' / ',\n                testId('bc-separator'),\n                cssHideForNarrowScreen.cls('')),\n      editableLabel(pageName, {\n        save: options.pageNameSave,\n        inputArgs: [\n          testId('bc-page'),\n          cssEditableName.cls(''),\n          dom.boolAttr('disabled', options.isPageNameReadOnly || false),\n          dom.cls(cssHideForNarrowScreen.className),\n        ],\n      }),\n    );\n}\n","/**\n * UI 2018 Buttons\n *\n * Four styles are include: basicButton, primaryButton, bigBasicButton, bigPrimaryButton.\n *\n * Buttons support passing in DomElementArgs, which can be used to register click handlers, set\n * the disabled property, and other HTML <button> element behaviors.\n *\n * Examples:\n *\n * `basicButton('Basic button', dom.on('click', () => alert('Basic button')))`\n * `primaryButton('Primary button', dom.prop('disabled', true))`\n */\n\nimport { theme, vars } from 'app/client/ui2018/cssVars';\nimport { tbind } from 'app/common/tbind';\nimport { dom, DomElementArg, styled } from 'grainjs';\n\nexport const cssButton = styled('button', `\n  /* Resets */\n  position: relative;\n  outline: none;\n  border-style: none;\n  line-height: normal;\n  user-select: none;\n\n  /* Vars */\n  font-size:     ${vars.mediumFontSize};\n  letter-spacing: -0.08px;\n  padding: 4px 8px;\n\n  background-color: transparent;\n  color:            ${theme.controlFg};\n  --icon-color:     ${theme.controlFg};\n\n  border:        ${theme.controlBorder};\n  border-radius: ${vars.controlBorderRadius};\n\n  cursor: pointer;\n\n  &-large {\n    font-weight: 500;\n    padding: 10px 24px;\n    min-height: 40px;\n  }\n\n  &-primary {\n    background-color: ${theme.controlPrimaryBg};\n    color:            ${theme.controlPrimaryFg};\n    --icon-color:     ${theme.controlPrimaryFg};\n    border-color:     ${theme.controlPrimaryBg};\n  }\n\n  &:hover {\n    color:        ${theme.controlHoverFg};\n    --icon-color: ${theme.controlHoverFg};\n    border-color: ${theme.controlHoverFg};\n  }\n  &-primary:hover {\n    color:            ${theme.controlPrimaryFg};\n    --icon-color:     ${theme.controlPrimaryFg};\n    background-color: ${theme.controlPrimaryHoverBg};\n    border-color: ${theme.controlPrimaryHoverBg};\n  }\n  &:disabled {\n    cursor: not-allowed;\n    color:        ${theme.controlDisabledFg};\n    --icon-color: ${theme.controlDisabledFg};\n    background-color: ${theme.controlDisabledBg};\n    border-color: ${theme.controlDisabledBg};\n  }\n\n`);\n\ninterface IButtonProps {\n  large?: boolean;\n  primary?: boolean;\n  link?: boolean;\n}\n\n/**\n * Helper to create a button or button-like link with requested properties.\n */\nfunction button(props: IButtonProps, ...domArgs: DomElementArg[]) {\n  const elem = props.link ? cssButtonLink(dom.cls(cssButton.className)) : cssButton();\n  return dom.update(elem,\n    cssButton.cls('-large', Boolean(props.large)),\n    cssButton.cls('-primary', Boolean(props.primary)),\n    ...domArgs\n  );\n}\n\n// Button-creating functions, each taking ...DomElementArg arguments.\nexport const basicButton = tbind(button, null, {});\nexport const bigBasicButton = tbind(button, null, {large: true});\nexport const primaryButton = tbind(button, null, {primary: true});\nexport const bigPrimaryButton = tbind(button, null, {large: true, primary: true});\n\n// Functions that create button-like <a> links, each taking ...DomElementArg arguments.\nexport const basicButtonLink = tbind(button, null, {link: true});\nexport const bigBasicButtonLink = tbind(button, null, {link: true, large: true});\nexport const primaryButtonLink = tbind(button, null, {link: true, primary: true});\nexport const bigPrimaryButtonLink = tbind(button, null, {link: true, large: true, primary: true});\n\n// Button that looks like a link (have no background and no border).\nexport const textButton = styled(cssButton, `\n  border: none;\n  padding: 0px;\n  text-align: left;\n  background-color: inherit !important;\n  &:disabled {\n    color: ${theme.controlPrimaryDisabled};\n  }\n`);\n\nconst cssButtonLink = styled('a', `\n  display: inline-block;\n  &, &:hover, &:focus {\n    text-decoration: none;\n  }\n`);\n\nexport const cssButtonGroup = styled('div', `\n  display: flex;\n  flex-direction: row;\n\n  & > .${cssButton.className} {\n    border-radius: 0;\n  }\n\n  & > .${cssButton.className}:first-child {\n    border-top-left-radius: ${vars.controlBorderRadius};\n    border-bottom-left-radius: ${vars.controlBorderRadius};\n  }\n\n  & > .${cssButton.className}:last-child {\n    border-top-right-radius: ${vars.controlBorderRadius};\n    border-bottom-right-radius: ${vars.controlBorderRadius};\n  }\n`);\n","/**\n * UI 2018 Checkboxes\n *\n * Includes:\n *  - squareCheckbox\n *  - circleCheckbox\n *  - labeledSquareCheckbox\n *  - labeledCircleCheckbox\n *\n * Checkboxes support passing in DomElementArgs, which can be used to register click handlers, set\n * the disabled property, and other HTML <input> element behaviors.\n *\n * Examples:\n *  squareCheckbox(observable(true)),\n *  labeledSquareCheckbox(observable(false), 'Include other values', dom.prop('disabled', true)),\n */\n\nimport {testId, theme} from 'app/client/ui2018/cssVars';\nimport {Computed, dom, DomArg, DomContents, Observable, styled} from 'grainjs';\n\nexport const cssLabel = styled('label', `\n  position: relative;\n  display: inline-flex;\n  min-width: 0px;\n  margin-bottom: 0px;\n\n  outline: none;\n  user-select: none;\n\n  --color: ${theme.checkboxBorder};\n  &:hover {\n    --color: ${theme.checkboxBorderHover};\n  }\n`);\n\n\n\n// TODO: the !important markings are to trump bootstrap, and should be removed when it's gone.\nexport const cssCheckboxSquare = styled('input', `\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  margin: 0 !important;\n  padding: 0;\n\n  flex-shrink: 0;\n\n  display: inline-block;\n  width: 16px;\n  height: 16px;\n  outline: none !important;\n\n  --radius: 3px;\n\n  &:checked:enabled, &:indeterminate:enabled {\n    --color: ${theme.controlPrimaryBg};\n  }\n\n  &:disabled {\n    --color: ${theme.checkboxDisabledBg};\n    cursor: not-allowed;\n  }\n\n  &::before, &::after {\n    content: '';\n\n    position: absolute;\n    top: 0;\n    left: 0;\n\n    height: 16px;\n    width: 16px;\n\n    box-sizing: border-box;\n    border: 1px solid var(--color);\n    border-radius: var(--radius);\n  }\n\n  &:checked::before, &:disabled::before, &:indeterminate::before {\n    background-color: var(--color);\n  }\n\n  &:not(:checked):indeterminate::after {\n    -webkit-mask-image: var(--icon-Minus);\n  }\n\n  &:not(:disabled)::after {\n    background-color: ${theme.checkboxBg};\n  }\n\n  &:checked::after, &:indeterminate::after {\n    content: '';\n    position: absolute;\n    height: 16px;\n    width: 16px;\n    -webkit-mask-image: var(--icon-Tick);\n    -webkit-mask-size: contain;\n    -webkit-mask-position: center;\n    -webkit-mask-repeat: no-repeat;\n    background-color: ${theme.controlPrimaryFg};\n  }\n`);\n\nexport const cssCheckboxCircle = styled(cssCheckboxSquare, `\n  --radius: 100%;\n`);\n\nexport const cssLabelText = styled('span', `\n  margin-left: 8px;\n  color: ${theme.text};\n  font-weight: initial;   /* negate bootstrap */\n  overflow: hidden;\n  text-overflow: ellipsis;\n`);\n\ntype CheckboxArg = DomArg<HTMLInputElement>;\n\nfunction checkbox(\n  obs: Observable<boolean>, cssCheckbox: typeof cssCheckboxSquare,\n  label: DomArg, right: boolean,  ...domArgs: CheckboxArg[]\n) {\n  const field = cssCheckbox(\n      { type: 'checkbox' },\n      dom.prop('checked', obs),\n      dom.on('change', (ev, el) => obs.set(el.checked)),\n      ...domArgs\n    );\n  const text = label ? cssLabelText(label) : null;\n  if (right) {\n    return cssReversedLabel([text, cssInlineRelative(field)]);\n  }\n  return cssLabel(field, text);\n}\n\nexport function squareCheckbox(obs: Observable<boolean>, ...domArgs: CheckboxArg[]) {\n  return checkbox(obs, cssCheckboxSquare, '', false, ...domArgs);\n}\n\nexport function circleCheckbox(obs: Observable<boolean>, ...domArgs: CheckboxArg[]) {\n  return checkbox(obs, cssCheckboxCircle, '', false, ...domArgs);\n}\n\nexport function labeledSquareCheckbox(obs: Observable<boolean>, label: DomArg, ...domArgs: CheckboxArg[]) {\n  return checkbox(obs, cssCheckboxSquare, label, false, ...domArgs);\n}\n\nexport function labeledLeftSquareCheckbox(obs: Observable<boolean>, label: DomArg, ...domArgs: CheckboxArg[]) {\n  return checkbox(obs, cssCheckboxSquare, label, true, ...domArgs);\n}\n\nexport function labeledCircleCheckbox(obs: Observable<boolean>, label: DomArg, ...domArgs: CheckboxArg[]) {\n  return checkbox(obs, cssCheckboxCircle, label, false, ...domArgs);\n}\n\nexport const Indeterminate = 'indeterminate';\nexport type TriState = boolean|'indeterminate';\n\nfunction triStateCheckbox(\n  obs: Observable<TriState>, cssCheckbox: typeof cssCheckboxSquare, label: string = '',  ...domArgs: CheckboxArg[]\n) {\n  const checkboxObs = Computed.create(null, obs, (_use, state) => state === true)\n    .onWrite((checked) => obs.set(checked));\n  return checkbox(\n    checkboxObs, cssCheckbox, label, false,\n    dom.prop('indeterminate', (use) => use(obs) === 'indeterminate'),\n    dom.autoDispose(checkboxObs),\n    ...domArgs\n  );\n}\n\nexport function triStateSquareCheckbox(obs: Observable<TriState>, ...domArgs: CheckboxArg[]) {\n  return triStateCheckbox(obs, cssCheckboxSquare, '', ...domArgs);\n}\n\nexport function labeledTriStateSquareCheckbox(obs: Observable<TriState>, label: string, ...domArgs: CheckboxArg[]) {\n  return triStateCheckbox(obs, cssCheckboxSquare, label, ...domArgs);\n}\n\nexport function radioCheckboxOption<T>(selectedObservable: Observable<T>, optionId: T, content: DomContents) {\n  const selected = Computed.create(null, use => use(selectedObservable) === optionId)\n    .onWrite(val => val ? selectedObservable.set(optionId) : void 0);\n  return dom.update(\n    labeledCircleCheckbox(selected, content, dom.autoDispose(selected)),\n    testId(`option-${optionId}`),\n    cssBlockCheckbox.cls(''),\n    cssBlockCheckbox.cls('-block', selected),\n  );\n}\n\nexport const cssRadioCheckboxOptions = styled('div', `\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n`);\n\n// We need to reset top and left of ::before element, as it is wrongly set\n// on the inline checkbox.\n// To simulate radio button behavior, we will block user input after option is selected, because\n// checkbox doesn't support two-way binding.\nconst cssBlockCheckbox = styled('div', `\n  display: flex;\n  padding: 10px 8px;\n  border: 1px solid ${theme.modalBorder};\n  border-radius: 3px;\n  cursor: pointer;\n  & input::before, & input::after  {\n    top: unset;\n    left: unset;\n  }\n  &:hover {\n    border-color: ${theme.accentBorder};\n  }\n  &-block {\n    pointer-events: none;\n  }\n  &-block a {\n    pointer-events: all;\n  }\n`);\n\nconst cssInlineRelative = styled('div', `\n  display: inline-block;\n  position: relative;\n  height: 16px;\n`);\n\nconst cssReversedLabel = styled(cssLabel, `\n  justify-content: space-between;\n  gap: 8px;\n  & .${cssLabelText.className} {\n    margin: 0px;\n  }\n`);\n","/**\n * CSS Variables. To use in your web application, add `cssRootVars` to the class list for your app's\n * root node, typically `<body>`.\n *\n * The fonts used attempt to default to system fonts as described here:\n *  https://css-tricks.com/snippets/css/system-font-stack/\n *\n */\nimport {createPausableObs, PausableObservable} from 'app/client/lib/pausableObs';\nimport {getStorage} from 'app/client/lib/storage';\nimport {urlState} from 'app/client/models/gristUrlState';\nimport {getTheme, ProductFlavor} from 'app/client/ui/CustomThemes';\nimport {Theme, ThemeAppearance} from 'app/common/ThemePrefs';\nimport {dom, DomElementMethod, makeTestId, Observable, styled, TestId} from 'grainjs';\nimport debounce = require('lodash/debounce');\nimport values = require('lodash/values');\n\nconst VAR_PREFIX = 'grist';\n\nclass CustomProp {\n  constructor(public name: string, public value?: string, public fallback?: string | CustomProp) {\n\n  }\n\n  public decl(): string | undefined {\n    if (this.value === undefined) { return undefined; }\n\n    return `--${VAR_PREFIX}-${this.name}: ${this.value};`;\n  }\n\n  public toString(): string {\n    let value = `--${VAR_PREFIX}-${this.name}`;\n    if (this.fallback) {\n      value += `, ${this.fallback}`;\n    }\n    return `var(${value})`;\n  }\n}\n\n/**\n * Theme-agnostic color properties.\n *\n * These are appropriate for UI elements whose color should not change based on the active\n * theme. Generally, you should instead use the properties defined in `theme`, which will change\n * based on the active theme.\n */\nexport const colors = {\n  lightGrey: new CustomProp('color-light-grey', '#F7F7F7'),\n  mediumGrey: new CustomProp('color-medium-grey', 'rgba(217,217,217,0.6)'),\n  mediumGreyOpaque: new CustomProp('color-medium-grey-opaque', '#E8E8E8'),\n  darkGrey: new CustomProp('color-dark-grey', '#D9D9D9'),\n\n  light: new CustomProp('color-light', '#FFFFFF'),\n  dark: new CustomProp('color-dark', '#262633'),\n  darkText: new CustomProp('color-dark-text', '#494949'),\n  darkBg: new CustomProp('color-dark-bg', '#262633'),\n  slate: new CustomProp('color-slate', '#929299'),\n\n  lightGreen: new CustomProp('color-light-green', '#16B378'),\n  darkGreen: new CustomProp('color-dark-green', '#009058'),\n  darkerGreen: new CustomProp('color-darker-green', '#007548'),\n  lighterGreen: new CustomProp('color-lighter-green', '#b1ffe2'),\n\n  lighterBlue: new CustomProp('color-lighter-blue', '#87b2f9'),\n  lightBlue: new CustomProp('color-light-blue', '#3B82F6'),\n  orange: new CustomProp('color-orange', '#F9AE41'),\n\n  cursor: new CustomProp('color-cursor', '#16B378'),\n  selection: new CustomProp('color-selection', 'rgba(22,179,120,0.15)'),\n  selectionOpaque: new CustomProp('color-selection-opaque', '#DCF4EB'),\n  selectionDarkerOpaque: new CustomProp('color-selection-darker-opaque', '#d6eee5'),\n\n  inactiveCursor: new CustomProp('color-inactive-cursor', '#A2E1C9'),\n\n  hover: new CustomProp('color-hover', '#bfbfbf'),\n  error: new CustomProp('color-error', '#D0021B'),\n  warning: new CustomProp('color-warning', '#F9AE41'),\n  warningBg: new CustomProp('color-warning-bg', '#dd962c'),\n  backdrop: new CustomProp('color-backdrop', 'rgba(38,38,51,0.9)')\n\n};\n\nexport const vars = {\n  /* Fonts */\n  fontFamily: new CustomProp('font-family', `-apple-system,BlinkMacSystemFont,Segoe UI,Liberation Sans,\n    Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol`),\n\n  // This is more monospace and looks better for data that should often align (e.g. to have 00000\n  // take similar space to 11111). This is the main font for user data.\n  fontFamilyData: new CustomProp('font-family-data',\n    `Liberation Sans,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol`),\n\n  /* Font sizes */\n  xxsmallFontSize:  new CustomProp('xx-font-size',        '8px'),\n  xsmallFontSize:   new CustomProp('x-small-font-size',   '10px'),\n  smallFontSize:    new CustomProp('small-font-size',     '11px'),\n  mediumFontSize:   new CustomProp('medium-font-size',    '13px'),\n  introFontSize:    new CustomProp('intro-font-size',     '14px'),    // feels friendlier\n  largeFontSize:    new CustomProp('large-font-size',     '16px'),\n  xlargeFontSize:   new CustomProp('x-large-font-size',   '18px'),\n  xxlargeFontSize:  new CustomProp('xx-large-font-size',  '20px'),\n  xxxlargeFontSize: new CustomProp('xxx-large-font-size', '22px'),\n\n  /* Controls size and space */\n  controlFontSize: new CustomProp('control-font-size', '12px'),\n  smallControlFontSize: new CustomProp('small-control-font-size', '10px'),\n  bigControlFontSize: new CustomProp('big-control-font-size', '13px'),\n  headerControlFontSize: new CustomProp('header-control-font-size', '22px'),\n  bigControlTextWeight: new CustomProp('big-text-weight', '500'),\n  headerControlTextWeight: new CustomProp('header-text-weight', '600'),\n\n  /* Labels */\n  labelTextSize:  new CustomProp('label-text-size', 'medium'),\n  labelTextBg:    new CustomProp('label-text-bg', '#FFFFFF'),\n  labelActiveBg:  new CustomProp('label-active-bg', '#F0F0F0'),\n\n  controlMargin:  new CustomProp('normal-margin', '2px'),\n  controlPadding: new CustomProp('normal-padding', '3px 5px'),\n  tightPadding:   new CustomProp('tight-padding',  '1px 2px'),\n  loosePadding:   new CustomProp('loose-padding',  '5px 15px'),\n\n  /* Control colors and borders */\n  primaryBg:        new CustomProp('primary-fg', '#16B378'),\n  primaryBgHover:   new CustomProp('primary-fg-hover', '#009058'),\n  primaryFg:        new CustomProp('primary-bg', '#ffffff'),\n\n  controlBg:      new CustomProp('control-bg', '#ffffff'),\n  controlFg:      new CustomProp('control-fg', '#16B378'),\n  controlFgHover: new CustomProp('primary-fg-hover', '#009058'),\n\n  controlBorder:        new CustomProp('control-border', '1px solid #11B683'),\n  controlBorderRadius:  new CustomProp('border-radius', '4px'),\n\n  logoBg: new CustomProp('logo-bg', '#040404'),\n  logoSize: new CustomProp('logo-size', '22px 22px'),\n  toastBg: new CustomProp('toast-bg', '#040404'),\n\n  /* Z indexes */\n  menuZIndex: new CustomProp('menu-z-index', '999'),\n  modalZIndex: new CustomProp('modal-z-index', '999'),\n  onboardingBackdropZIndex: new CustomProp('onboarding-backdrop-z-index', '999'),\n  onboardingPopupZIndex: new CustomProp('onboarding-popup-z-index', '1000'),\n  floatingPopupZIndex: new CustomProp('floating-popup-z-index', '1002'),\n  tutorialModalZIndex: new CustomProp('tutorial-modal-z-index', '1003'),\n  pricingModalZIndex: new CustomProp('pricing-modal-z-index', '1004'),\n  floatingPopupMenuZIndex: new CustomProp('floating-popup-menu-z-index', '1004'),\n  notificationZIndex: new CustomProp('notification-z-index', '1100'),\n  browserCheckZIndex: new CustomProp('browser-check-z-index', '5000'),\n  tooltipZIndex: new CustomProp('tooltip-z-index', '5000'),\n  // TODO: Add properties for remaining hard-coded z-indexes.\n};\n\n/**\n * Theme-related color properties.\n *\n * Unlike `colors`, these properties don't define any values as they aren't known ahead of time.\n * Instead, when the application loads, CSS variables mapped to these properties are attached to\n * the document based on the user's theme preferences.\n *\n * In the case that CSS variables aren't attached to the document, their fallback values will be\n * used. This ensures that styles are still applied even when there's trouble fetching preferences,\n * and also serves as a method of maintaining backwards compatibility with custom CSS rules that\n * use legacy variable names (prefixed with `grist-color-`).\n */\nexport const theme = {\n  /* Text */\n  text: new CustomProp('theme-text', undefined, colors.dark),\n  lightText: new CustomProp('theme-text-light', undefined, colors.slate),\n  darkText: new CustomProp('theme-text-dark', undefined, 'black'),\n  errorText: new CustomProp('theme-text-error', undefined, colors.error),\n  dangerText: new CustomProp('theme-text-danger', undefined, '#FFA500'),\n  disabledText: new CustomProp('theme-text-disabled', undefined, colors.slate),\n\n  /* Page */\n  pageBg: new CustomProp('theme-page-bg', undefined, colors.lightGrey),\n  pageBackdrop: new CustomProp('theme-page-backdrop', undefined, 'grey'),\n\n  /* Page Panels */\n  mainPanelBg: new CustomProp('theme-page-panels-main-panel-bg', undefined, 'white'),\n  leftPanelBg: new CustomProp('theme-page-panels-left-panel-bg', undefined, colors.lightGrey),\n  rightPanelBg: new CustomProp('theme-page-panels-right-panel-bg', undefined, colors.lightGrey),\n  topHeaderBg: new CustomProp('theme-page-panels-top-header-bg', undefined, 'white'),\n  bottomFooterBg: new CustomProp('theme-page-panels-bottom-footer-bg', undefined, 'white'),\n  pagePanelsBorder: new CustomProp('theme-page-panels-border', undefined, colors.mediumGrey),\n  pagePanelsBorderResizing: new CustomProp('theme-page-panels-border-resizing', undefined,\n    colors.lightGreen),\n  sidePanelOpenerFg: new CustomProp('theme-page-panels-side-panel-opener-fg', undefined,\n    colors.slate),\n  sidePanelOpenerActiveFg: new CustomProp('theme-page-panels-side-panel-opener-active-fg',\n    undefined, 'white'),\n  sidePanelOpenerActiveBg: new CustomProp('theme-page-panels-side-panel-opener-active-bg',\n    undefined, colors.lightGreen),\n\n  /* Add New */\n  addNewCircleFg: new CustomProp('theme-add-new-circle-fg', undefined, colors.light),\n  addNewCircleBg: new CustomProp('theme-add-new-circle-bg', undefined, colors.darkGreen),\n  addNewCircleHoverBg: new CustomProp('theme-add-new-circle-hover-bg', undefined,\n    colors.darkerGreen),\n  addNewCircleSmallFg: new CustomProp('theme-add-new-circle-small-fg', undefined, colors.light),\n  addNewCircleSmallBg: new CustomProp('theme-add-new-circle-small-bg', undefined,\n    colors.lightGreen),\n  addNewCircleSmallHoverBg: new CustomProp('theme-add-new-circle-small-hover-bg', undefined,\n    colors.darkGreen),\n\n  /* Top Bar */\n  topBarButtonPrimaryFg: new CustomProp('theme-top-bar-button-primary-fg', undefined,\n    colors.lightGreen),\n  topBarButtonSecondaryFg: new CustomProp('theme-top-bar-button-secondary-fg', undefined,\n    colors.slate),\n  topBarButtonDisabledFg: new CustomProp('theme-top-bar-button-disabled-fg', undefined,\n    colors.darkGrey),\n  topBarButtonErrorFg: new CustomProp('theme-top-bar-button-error-fg', undefined, colors.error),\n\n  /* Notifications */\n  notificationsPanelHeaderBg: new CustomProp('theme-notifications-panel-header-bg', undefined,\n    colors.lightGrey),\n  notificationsPanelBodyBg: new CustomProp('theme-notifications-panel-body-bg', undefined,\n    'white'),\n  notificationsPanelBorder: new CustomProp('theme-notifications-panel-border', undefined,\n    colors.darkGrey),\n\n  /* Toasts */\n  toastText: new CustomProp('theme-toast-text', undefined, colors.light),\n  toastLightText: new CustomProp('theme-toast-text-light', undefined, colors.slate),\n  toastBg: new CustomProp('theme-toast-bg', undefined, vars.toastBg),\n  toastMemoText: new CustomProp('theme-toast-memo-text', undefined, colors.light),\n  toastMemoBg: new CustomProp('theme-toast-memo-bg', undefined, colors.dark),\n  toastErrorIcon: new CustomProp('theme-toast-error-icon', undefined, colors.error),\n  toastErrorBg: new CustomProp('theme-toast-error-bg', undefined, colors.error),\n  toastSuccessIcon: new CustomProp('theme-toast-success-icon', undefined, colors.darkGreen),\n  toastSuccessBg: new CustomProp('theme-toast-success-bg', undefined, colors.darkGreen),\n  toastWarningIcon: new CustomProp('theme-toast-warning-icon', undefined, colors.warning),\n  toastWarningBg: new CustomProp('theme-toast-warning-bg', undefined, colors.warningBg),\n  toastInfoIcon: new CustomProp('theme-toast-info-icon', undefined, colors.lightBlue),\n  toastInfoBg: new CustomProp('theme-toast-info-bg', undefined, colors.lightBlue),\n  toastControlFg: new CustomProp('theme-toast-control-fg', undefined, colors.lightGreen),\n  toastInfoControlFg: new CustomProp('theme-toast-control-info-fg', undefined, colors.lighterBlue),\n\n  /* Tooltips */\n  tooltipFg: new CustomProp('theme-tooltip-fg', undefined, 'white'),\n  tooltipBg: new CustomProp('theme-tooltip-bg', undefined, 'rgba(0, 0, 0, 0.75)'),\n  tooltipIcon: new CustomProp('theme-tooltip-icon', undefined, colors.slate),\n  tooltipCloseButtonFg: new CustomProp('theme-tooltip-close-button-fg', undefined, 'white'),\n  tooltipCloseButtonHoverFg: new CustomProp('theme-tooltip-close-button-hover-fg', undefined,\n    'black'),\n  tooltipCloseButtonHoverBg: new CustomProp('theme-tooltip-close-button-hover-bg', undefined,\n    'white'),\n  tooltipPopupHeaderFg: new CustomProp('theme-tooltip-popup-header-fg', undefined, colors.light),\n  tooltipPopupHeaderBg: new CustomProp('theme-tooltip-popup-header-bg', undefined, colors.lightGreen),\n\n  /* Modals */\n  modalBg: new CustomProp('theme-modal-bg', undefined, 'white'),\n  modalBackdrop: new CustomProp('theme-modal-backdrop', undefined, colors.backdrop),\n  modalBorder: new CustomProp('theme-modal-border', undefined, colors.mediumGreyOpaque),\n  modalBorderDark: new CustomProp('theme-modal-border-dark', undefined, colors.darkGrey),\n  modalBorderHover: new CustomProp('theme-modal-border-hover', undefined, colors.slate),\n  modalInnerShadow: new CustomProp('theme-modal-shadow-inner', undefined,\n    'rgba(31, 37, 50, 0.31)'),\n  modalOuterShadow: new CustomProp('theme-modal-shadow-outer', undefined,\n    'rgba(76, 86, 103, 0.24)'),\n  modalCloseButtonFg: new CustomProp('theme-modal-close-button-fg', undefined, colors.slate),\n  modalBackdropCloseButtonFg: new CustomProp('theme-modal-backdrop-close-button-fg', undefined,\n    vars.primaryBg),\n  modalBackdropCloseButtonHoverFg: new CustomProp('theme-modal-backdrop-close-button-hover-fg',\n    undefined, colors.lighterGreen),\n\n  /* Popups */\n  popupBg: new CustomProp('theme-popup-bg', undefined, 'white'),\n  popupInnerShadow: new CustomProp('theme-popup-shadow-inner', undefined,\n    'rgba(31, 37, 50, 0.31)'),\n  popupOuterShadow: new CustomProp('theme-popup-shadow-outer', undefined,\n    'rgba(76, 86, 103, 0.24)'),\n  popupCloseButtonFg: new CustomProp('theme-popup-close-button-fg', undefined, colors.slate),\n\n  /* Prompts */\n  promptFg: new CustomProp('theme-prompt-fg', undefined, '#606060'),\n\n  /* Progress Bars */\n  progressBarFg: new CustomProp('theme-progress-bar-fg', undefined, colors.lightGreen),\n  progressBarErrorFg: new CustomProp('theme-progress-bar-error-fg', undefined, colors.error),\n  progressBarBg: new CustomProp('theme-progress-bar-bg', undefined, colors.darkGrey),\n\n  /* Links */\n  link: new CustomProp('theme-link', undefined, colors.lightGreen),\n  linkHover: new CustomProp('theme-link-hover', undefined, colors.lightGreen),\n\n  /* Hover */\n  hover: new CustomProp('theme-hover', undefined, colors.mediumGrey),\n  lightHover: new CustomProp('theme-hover-light', undefined, colors.lightGrey),\n\n  /* Cell Editor */\n  cellEditorFg: new CustomProp('theme-cell-editor-fg', undefined, colors.dark),\n  cellEditorBg: new CustomProp('theme-cell-editor-bg', undefined, colors.light),\n\n  /* Cursor */\n  cursor: new CustomProp('theme-cursor', undefined, colors.cursor),\n  cursorInactive: new CustomProp('theme-cursor-inactive', undefined, colors.inactiveCursor),\n  cursorReadonly: new CustomProp('theme-cursor-readonly', undefined, colors.slate),\n\n  /* Tables */\n  tableHeaderFg: new CustomProp('theme-table-header-fg', undefined, 'unset'),\n  tableHeaderSelectedFg: new CustomProp('theme-table-header-selected-fg', undefined, 'unset'),\n  tableHeaderBg: new CustomProp('theme-table-header-bg', undefined, colors.lightGrey),\n  tableHeaderSelectedBg: new CustomProp('theme-table-header-selected-bg', undefined,\n    colors.mediumGreyOpaque),\n  tableHeaderBorder: new CustomProp('theme-table-header-border', undefined, 'lightgray'),\n  tableHeaderBorderDark: new CustomProp('theme-table-header-border-dark', undefined,\n    colors.darkGrey),\n  tableBodyBg: new CustomProp('theme-table-body-bg', undefined, 'white'),\n  tableBodyBorder: new CustomProp('theme-table-body-border', undefined, colors.darkGrey),\n  tableAddNewBg: new CustomProp('theme-table-add-new-bg', undefined, 'inherit'),\n  tableScrollShadow: new CustomProp('theme-table-scroll-shadow', undefined, '#444444'),\n  tableFrozenColumnsBorder: new CustomProp('theme-table-frozen-columns-border', undefined,\n    '#999999'),\n  tableDragDropIndicator: new CustomProp('theme-table-drag-drop-indicator', undefined, 'gray'),\n  tableDragDropShadow: new CustomProp('theme-table-drag-drop-shadow', undefined, '#F0F0F0'),\n\n  /* Cards */\n  cardCompactWidgetBg: new CustomProp('theme-card-compact-widget-bg', undefined,\n    colors.mediumGrey),\n  cardCompactRecordBg: new CustomProp('theme-card-compact-record-bg', undefined, 'white'),\n  cardBlocksBg: new CustomProp('theme-card-blocks-bg', undefined, colors.mediumGrey),\n  cardFormLabel: new CustomProp('theme-card-form-label', undefined, colors.slate),\n  cardCompactLabel: new CustomProp('theme-card-compact-label', undefined, colors.slate),\n  cardBlocksLabel: new CustomProp('theme-card-blocks-label', undefined, colors.slate),\n  cardFormBorder: new CustomProp('theme-card-form-border', undefined, 'lightgrey'),\n  cardCompactBorder: new CustomProp('theme-card-compact-border', undefined, colors.darkGrey),\n  cardEditingLayoutBg: new CustomProp('theme-card-editing-layout-bg', undefined,\n    'rgba(192, 192, 192, 0.2)'),\n  cardEditingLayoutBorder: new CustomProp('theme-card-editing-layout-border', undefined,\n    colors.darkGrey),\n\n  /* Card Lists */\n  cardListFormBorder: new CustomProp('theme-card-list-form-border', undefined, colors.darkGrey),\n  cardListBlocksBorder: new CustomProp('theme-card-list-blocks-border', undefined,\n    colors.darkGrey),\n\n  /* Selection */\n  selection: new CustomProp('theme-selection', undefined, colors.selection),\n  selectionDarker: new CustomProp('theme-selection-darker', undefined, 'rgba(22,179,120,0.25)'),\n  selectionDarkest: new CustomProp('theme-selection-darkest', undefined, 'rgba(22,179,120,0.35)'),\n  selectionOpaqueFg: new CustomProp('theme-selection-opaque-fg', undefined, 'unset'),\n  selectionOpaqueBg: new CustomProp('theme-selection-opaque-bg', undefined,\n    colors.selectionOpaque),\n  selectionOpaqueDarkBg: new CustomProp('theme-selection-opaque-dark-bg', undefined,\n    colors.selectionDarkerOpaque),\n  selectionHeader: new CustomProp('theme-selection-header', undefined, colors.mediumGrey),\n\n  /* Widgets */\n  widgetBg: new CustomProp('theme-widget-bg', undefined, 'white'),\n  widgetBorder: new CustomProp('theme-widget-border', undefined, colors.darkGrey),\n  widgetActiveBorder: new CustomProp('theme-widget-active-border', undefined, colors.lightGreen),\n  widgetInactiveStripesLight: new CustomProp('theme-widget-inactive-stripes-light', undefined,\n    colors.lightGrey),\n  widgetInactiveStripesDark: new CustomProp('theme-widget-inactive-stripes-dark', undefined,\n    colors.mediumGreyOpaque),\n\n  /* Pinned Docs */\n  pinnedDocFooterBg: new CustomProp('theme-pinned-doc-footer-bg', undefined, colors.light),\n  pinnedDocBorder: new CustomProp('theme-pinned-doc-border', undefined, colors.mediumGrey),\n  pinnedDocBorderHover: new CustomProp('theme-pinned-doc-border-hover', undefined, colors.slate),\n  pinnedDocEditorBg: new CustomProp('theme-pinned-doc-editor-bg', undefined, colors.mediumGrey),\n\n  /* Raw Data */\n  rawDataTableBorder: new CustomProp('theme-raw-data-table-border', undefined, colors.mediumGrey),\n  rawDataTableBorderHover: new CustomProp('theme-raw-data-table-border-hover',\n    undefined, colors.slate),\n\n  /* Controls */\n  controlFg: new CustomProp('theme-control-fg', undefined, vars.controlFg),\n  controlPrimaryFg: new CustomProp('theme-control-primary-fg', undefined, vars.primaryFg),\n  controlPrimaryBg: new CustomProp('theme-control-primary-bg', undefined, vars.primaryBg),\n  controlSecondaryFg: new CustomProp('theme-control-secondary-fg', undefined, colors.slate),\n  controlHoverFg: new CustomProp('theme-control-hover-fg', undefined, vars.controlFgHover),\n  controlPrimaryHoverBg: new CustomProp('theme-control-primary-hover-bg', undefined,\n    vars.primaryBgHover),\n  controlSecondaryHoverFg: new CustomProp('theme-control-secondary-hover-fg', undefined,\n    colors.dark),\n  controlSecondaryHoverBg: new CustomProp('theme-control-secondary-hover-bg', undefined,\n    colors.darkGrey),\n  controlDisabledFg: new CustomProp('theme-control-disabled-fg', undefined, colors.light),\n  controlDisabledBg: new CustomProp('theme-control-disabled-bg', undefined, colors.slate),\n  controlPrimaryDisabled: new CustomProp('theme-control-primary-disabled', undefined,\n    colors.inactiveCursor),\n  controlBorder: new CustomProp('theme-control-border', undefined, vars.controlBorder),\n\n  /* Checkboxes */\n  checkboxBg: new CustomProp('theme-checkbox-bg', undefined, colors.light),\n  checkboxDisabledBg: new CustomProp('theme-checkbox-disabled-bg', undefined, colors.darkGrey),\n  checkboxBorder: new CustomProp('theme-checkbox-border', undefined, colors.darkGrey),\n  checkboxBorderHover: new CustomProp('theme-checkbox-border-hover', undefined, colors.hover),\n\n  /* Move Docs */\n  moveDocsSelectedFg: new CustomProp('theme-move-docs-selected-fg', undefined, 'white'),\n  moveDocsSelectedBg: new CustomProp('theme-move-docs-selected-bg', undefined, colors.lightGreen),\n  moveDocsDisabledFg: new CustomProp('theme-move-docs-disabled-bg', undefined, colors.darkGrey),\n\n  /* Filter Bar */\n  filterBarButtonSavedFg: new CustomProp('theme-filter-bar-button-saved-fg', undefined,\n    colors.light),\n  filterBarButtonSavedBg: new CustomProp('theme-filter-bar-button-saved-bg', undefined,\n    colors.slate),\n  filterBarButtonSavedHoverBg: new CustomProp('theme-filter-bar-button-saved-hover-bg', undefined,\n    colors.darkGrey),\n\n  /* Icons */\n  iconDisabled: new CustomProp('theme-icon-disabled', undefined, colors.slate),\n  iconError: new CustomProp('theme-icon-error', undefined, colors.error),\n\n  /* Icon Buttons */\n  iconButtonFg: new CustomProp('theme-icon-button-fg', undefined, colors.light),\n  iconButtonPrimaryBg: new CustomProp('theme-icon-button-primary-bg', undefined,\n    colors.lightGreen),\n  iconButtonPrimaryHoverBg: new CustomProp('theme-icon-button-primary-hover-bg',\n    undefined, colors.darkGreen),\n  iconButtonSecondaryBg: new CustomProp('theme-icon-button-secondary-bg', undefined,\n    colors.darkGrey),\n  iconButtonSecondaryHoverBg: new CustomProp('theme-icon-button-secondary-hover-bg',\n    undefined, colors.slate),\n\n  /* Left Panel */\n  pageHoverBg: new CustomProp('theme-left-panel-page-hover-bg', undefined, colors.mediumGrey),\n  activePageFg: new CustomProp('theme-left-panel-active-page-fg', undefined, 'white'),\n  activePageBg: new CustomProp('theme-left-panel-active-page-bg', undefined, colors.darkBg),\n  disabledPageFg: new CustomProp('theme-left-panel-disabled-page-fg', undefined, colors.darkGrey),\n  pageOptionsFg: new CustomProp('theme-left-panel-page-options-bg', undefined, colors.slate),\n  pageOptionsHoverFg: new CustomProp('theme-left-panel-page-options-hover-fg', undefined, 'white'),\n  pageOptionsHoverBg: new CustomProp('theme-left-panel-page-options-hover-bg', undefined,\n    colors.darkGrey),\n  pageOptionsSelectedHoverBg: new CustomProp('theme-left-panel-page-options-selected-hover-bg',\n    undefined, colors.slate),\n  pageInitialsFg: new CustomProp('theme-left-panel-page-initials-fg', undefined, 'white'),\n  pageInitialsBg: new CustomProp('theme-left-panel-page-initials-bg', undefined, colors.slate),\n  pageInitialsEmojiBg: new CustomProp('theme-left-panel-page-emoji-fg', undefined, 'white'),\n  pageInitialsEmojiOutline: new CustomProp('theme-left-panel-page-emoji-outline', undefined,\n    colors.darkGrey),\n\n  /* Right Panel */\n  rightPanelTabFg: new CustomProp('theme-right-panel-tab-fg', undefined, colors.dark),\n  rightPanelTabBg: new CustomProp('theme-right-panel-tab-bg', undefined, colors.lightGrey),\n  rightPanelTabIcon: new CustomProp('theme-right-panel-tab-icon', undefined, colors.slate),\n  rightPanelTabIconHover: new CustomProp('theme-right-panel-tab-icon-hover', undefined,\n    colors.lightGreen),\n  rightPanelTabHoverBg: new CustomProp('theme-right-panel-tab-hover-bg', undefined,\n    colors.mediumGrey),\n  rightPanelTabSelectedFg: new CustomProp('theme-right-panel-tab-selected-fg', undefined,\n    colors.light),\n  rightPanelTabSelectedBg: new CustomProp('theme-right-panel-tab-selected-bg', undefined,\n    colors.lightGreen),\n  rightPanelTabButtonHoverBg: new CustomProp('theme-right-panel-tab-button-hover-bg',\n    undefined, colors.darkGreen),\n  rightPanelSubtabFg: new CustomProp('theme-right-panel-subtab-fg', undefined, colors.lightGreen),\n  rightPanelSubtabSelectedFg: new CustomProp('theme-right-panel-subtab-selected-fg', undefined,\n    colors.dark),\n  rightPanelSubtabSelectedUnderline: new CustomProp('theme-right-panel-subtab-selected-underline',\n    undefined, colors.lightGreen),\n  rightPanelSubtabHoverFg: new CustomProp('theme-right-panel-subtab-hover-fg', undefined,\n    colors.darkGreen),\n  rightPanelSubtabHoverUnderline: new CustomProp('theme-right-panel-subtab-hover-underline',\n    undefined, colors.lightGreen),\n  rightPanelDisabledOverlay: new CustomProp('theme-right-panel-disabled-overlay', undefined,\n    'white'),\n  rightPanelToggleButtonEnabledFg: new CustomProp('theme-right-panel-toggle-button-enabled-fg',\n    undefined, colors.light),\n  rightPanelToggleButtonEnabledBg: new CustomProp('theme-right-panel-toggle-button-enabled-bg',\n    undefined, colors.dark),\n  rightPanelToggleButtonEnabledHoverFg: new CustomProp(\n    'theme-right-panel-toggle-button-enabled-hover-fg', undefined, colors.darkGrey),\n  rightPanelToggleButtonDisabledFg: new CustomProp('theme-right-panel-toggle-button-disabled-fg',\n    undefined, colors.light),\n  rightPanelToggleButtonDisabledBg: new CustomProp('theme-right-panel-toggle-button-disabled-bg',\n    undefined, colors.mediumGreyOpaque),\n  rightPanelFieldSettingsBg: new CustomProp('theme-right-panel-field-settings-bg',\n    undefined, colors.mediumGreyOpaque),\n  rightPanelFieldSettingsButtonBg: new CustomProp('theme-right-panel-field-settings-button-bg',\n    undefined, 'lightgrey'),\n\n  /* Document History */\n  documentHistorySnapshotFg: new CustomProp('theme-document-history-snapshot-fg', undefined,\n    colors.dark),\n  documentHistorySnapshotSelectedFg: new CustomProp('theme-document-history-snapshot-selected-fg',\n    undefined, colors.light),\n  documentHistorySnapshotBg: new CustomProp('theme-document-history-snapshot-bg', undefined,\n    'white'),\n  documentHistorySnapshotSelectedBg: new CustomProp('theme-document-history-snapshot-selected-bg',\n    undefined, colors.dark),\n  documentHistorySnapshotBorder: new CustomProp('theme-document-history-snapshot-border',\n    undefined, colors.mediumGrey),\n  documentHistoryActivityText: new CustomProp('theme-document-history-activity-text', undefined,\n    'unset'),\n  documentHistoryActivityLightText: new CustomProp('theme-document-history-activity-text-light',\n    undefined, '#333333'),\n\n  /* Accents */\n  accentIcon: new CustomProp('theme-accent-icon', undefined, colors.lightGreen),\n  accentBorder: new CustomProp('theme-accent-border', undefined, colors.lightGreen),\n  accentText: new CustomProp('theme-accent-text', undefined, colors.lightGreen),\n\n  /* Inputs */\n  inputFg: new CustomProp('theme-input-fg', undefined, 'black'),\n  inputBg: new CustomProp('theme-input-bg', undefined, 'white'),\n  inputDisabledFg: new CustomProp('theme-input-disabled-fg', undefined, colors.slate),\n  inputDisabledBg: new CustomProp('theme-input-disabled-bg', undefined, colors.lightGrey),\n  inputPlaceholderFg: new CustomProp('theme-input-placeholder-fg', undefined, '#757575'),\n  inputBorder: new CustomProp('theme-input-border', undefined, colors.darkGrey),\n  inputValid: new CustomProp('theme-input-valid', undefined, colors.lightGreen),\n  inputInvalid: new CustomProp('theme-input-invalid', undefined, colors.error),\n  inputFocus: new CustomProp('theme-input-focus', undefined, '#5E9ED6'),\n  inputReadonlyBg: new CustomProp('theme-input-readonly-bg', undefined, colors.lightGrey),\n  inputReadonlyBorder: new CustomProp('theme-input-readonly-border', undefined, colors.mediumGreyOpaque),\n\n  /* Choice Entry */\n  choiceEntryBg: new CustomProp('theme-choice-entry-bg', undefined, 'white'),\n  choiceEntryBorder: new CustomProp('theme-choice-entry-border', undefined, colors.darkGrey),\n  choiceEntryBorderHover: new CustomProp('theme-choice-entry-border-hover', undefined,\n    colors.hover),\n\n  /* Select Buttons */\n  selectButtonFg: new CustomProp('theme-select-button-fg', undefined, colors.dark),\n  selectButtonPlaceholderFg: new CustomProp('theme-select-button-placeholder-fg', undefined,\n    colors.slate),\n  selectButtonDisabledFg: new CustomProp('theme-select-button-disabled-fg', undefined, 'grey'),\n  selectButtonBg: new CustomProp('theme-select-button-bg', undefined, 'white'),\n  selectButtonBorder: new CustomProp('theme-select-button-border', undefined, colors.darkGrey),\n  selectButtonBorderInvalid: new CustomProp('theme-select-button-border-invalid', undefined,\n    colors.error),\n\n  /* Menus */\n  menuText: new CustomProp('theme-menu-text', undefined, colors.slate),\n  menuLightText: new CustomProp('theme-menu-light-text', undefined, colors.slate),\n  menuBg: new CustomProp('theme-menu-bg', undefined, 'white'),\n  menuSubheaderFg: new CustomProp('theme-menu-subheader-fg', undefined, 'unset'),\n  menuBorder: new CustomProp('theme-menu-border', undefined, colors.mediumGreyOpaque),\n  menuShadow: new CustomProp('theme-menu-shadow', undefined, 'rgba(38, 38, 51, 0.6)'),\n\n  /* Menu Items */\n  menuItemFg: new CustomProp('theme-menu-item-fg', undefined, 'black'),\n  menuItemSelectedFg: new CustomProp('theme-menu-item-selected-fg', undefined, colors.light),\n  menuItemSelectedBg: new CustomProp('theme-menu-item-selected-bg', undefined, vars.primaryBg),\n  menuItemDisabledFg: new CustomProp('theme-menu-item-disabled-fg', undefined, '#D9D9D9'),\n  menuItemIconFg: new CustomProp('theme-menu-item-icon-fg', undefined, colors.slate),\n  menuItemIconSelectedFg: new CustomProp('theme-menu-item-icon-selected-fg', undefined, 'white'),\n  menuItemLinkFg: new CustomProp('theme-menu-item-link-fg', undefined, colors.lightGreen),\n  menuItemLinkSelectedFg: new CustomProp('theme-menu-item-link-selected-fg', undefined,\n    colors.darkGreen),\n  menuItemLinkselectedBg: new CustomProp('theme-menu-item-link-selected-bg', undefined,\n    colors.mediumGreyOpaque),\n\n  /* Autocomplete */\n  autocompleteMatchText: new CustomProp('theme-autocomplete-match-text', undefined,\n    colors.lightGreen),\n  autocompleteSelectedMatchText: new CustomProp('theme-autocomplete-selected-match-text',\n    undefined, colors.lighterGreen),\n  autocompleteChoiceSelectedBg: new CustomProp('theme-autocomplete-item-selected-bg', undefined,\n    colors.mediumGreyOpaque),\n\n  /* Search */\n  searchBorder: new CustomProp('theme-search-border', undefined, 'grey'),\n  searchPrevNextButtonFg: new CustomProp('theme-search-prev-next-button-fg', undefined,\n    colors.slate),\n  searchPrevNextButtonBg: new CustomProp('theme-search-prev-next-button-bg', undefined,\n    colors.mediumGrey),\n\n  /* Loaders */\n  loaderFg: new CustomProp('theme-loader-fg', undefined, colors.lightGreen),\n  loaderBg: new CustomProp('theme-loader-bg', undefined, colors.darkGrey),\n\n  /* Site Switcher */\n  siteSwitcherActiveFg: new CustomProp('theme-site-switcher-active-fg', undefined, colors.light),\n  siteSwitcherActiveBg: new CustomProp('theme-site-switcher-active-bg', undefined, colors.dark),\n\n  /* Doc Menu */\n  docMenuDocOptionsFg: new CustomProp('theme-doc-menu-doc-options-fg', undefined, colors.darkGrey),\n  docMenuDocOptionsHoverFg: new CustomProp('theme-doc-menu-doc-options-hover-fg', undefined,\n    colors.slate),\n  docMenuDocOptionsHoverBg: new CustomProp('theme-doc-menu-doc-options-hover-bg', undefined,\n    colors.darkGrey),\n\n  /* Shortcut Keys */\n  shortcutKeyFg: new CustomProp('theme-shortcut-key-fg', undefined, 'black'),\n  shortcutKeyPrimaryFg: new CustomProp('theme-shortcut-key-primary-fg', undefined,\n    colors.darkGreen),\n  shortcutKeySecondaryFg: new CustomProp('theme-shortcut-key-secondary-fg', undefined,\n    colors.slate),\n  shortcutKeyBg: new CustomProp('theme-shortcut-key-bg', undefined, 'white'),\n  shortcutKeyBorder: new CustomProp('theme-shortcut-key-border', undefined, colors.slate),\n\n  /* Breadcrumbs */\n  breadcrumbsTagFg: new CustomProp('theme-breadcrumbs-tag-fg', undefined, 'white'),\n  breadcrumbsTagBg: new CustomProp('theme-breadcrumbs-tag-bg', undefined, colors.slate),\n  breadcrumbsTagAlertBg: new CustomProp('theme-breadcrumbs-tag-alert-fg', undefined, colors.error),\n\n  /* Page Widget Picker */\n  widgetPickerPrimaryBg: new CustomProp('theme-widget-picker-primary-bg', undefined, 'white'),\n  widgetPickerSecondaryBg: new CustomProp('theme-widget-picker-secondary-bg', undefined,\n    colors.lightGrey),\n  widgetPickerItemFg: new CustomProp('theme-widget-picker-item-fg', undefined, 'unset'),\n  widgetPickerItemSelectedBg: new CustomProp('theme-widget-picker-item-selected-bg', undefined,\n    colors.mediumGrey),\n  widgetPickerItemDisabledBg: new CustomProp('theme-widget-picker-item-disabled-bg', undefined,\n    colors.mediumGrey),\n  widgetPickerIcon: new CustomProp('theme-widget-picker-icon', undefined, colors.slate),\n  widgetPickerPrimaryIcon: new CustomProp('theme-widget-picker-primary-icon', undefined,\n    colors.lightGreen),\n  widgetPickerSummaryIcon: new CustomProp('theme-widget-picker-summary-icon', undefined,\n    colors.darkGreen),\n  widgetPickerBorder: new CustomProp('theme-widget-picker-border', undefined, colors.mediumGrey),\n  widgetPickerShadow: new CustomProp('theme-widget-picker-shadow', undefined,\n    'rgba(38,38,51,0.20)'),\n\n  /* Code View */\n  codeViewText: new CustomProp('theme-code-view-text', undefined, '#444'),\n  codeViewKeyword: new CustomProp('theme-code-view-keyword', undefined, '#444'),\n  codeViewComment: new CustomProp('theme-code-view-comment', undefined, '#888888'),\n  codeViewMeta: new CustomProp('theme-code-view-meta', undefined, '#1F7199'),\n  codeViewTitle: new CustomProp('theme-code-view-title', undefined, '#880000'),\n  codeViewParams: new CustomProp('theme-code-view-params', undefined, '#444'),\n  codeViewString: new CustomProp('theme-code-view-string', undefined, '#880000'),\n  codeViewNumber: new CustomProp('theme-code-view-number', undefined, '#880000'),\n  codeViewBuiltin: new CustomProp('theme-code-view-builtin', undefined, '#397300'),\n  codeViewLiteral: new CustomProp('theme-code-view-literal', undefined, '#78A960'),\n\n  /* Importer */\n  importerTableInfoBorder: new CustomProp('theme-importer-table-info-border', undefined, colors.darkGrey),\n  importerPreviewBorder: new CustomProp('theme-importer-preview-border', undefined,\n    colors.darkGrey),\n  importerSkippedTableOverlay: new CustomProp('theme-importer-skipped-table-overlay', undefined,\n    colors.mediumGrey),\n  importerMatchIcon: new CustomProp('theme-importer-match-icon', undefined, colors.darkGrey),\n  importerOutsideBg: new CustomProp('theme-importer-outside-bg', undefined, colors.lightGrey),\n  importerMainContentBg: new CustomProp('theme-importer-main-content-bg', undefined, '#FFFFFF'),\n\n  // tabs\n  importerActiveFileBg: new CustomProp('theme-importer-active-file-bg', undefined, colors.lightGreen),\n  importerActiveFileFg: new CustomProp('theme-importer-active-file-fg', undefined, colors.light),\n  importerInactiveFileBg: new CustomProp('theme-importer-inactive-file-bg', undefined, colors.mediumGrey),\n  importerInactiveFileFg: new CustomProp('theme-importer-inactive-file-fg', undefined, colors.light),\n\n  /* Menu Toggles */\n  menuToggleFg: new CustomProp('theme-menu-toggle-fg', undefined, colors.slate),\n  menuToggleHoverFg: new CustomProp('theme-menu-toggle-hover-fg', undefined, colors.darkGreen),\n  menuToggleActiveFg: new CustomProp('theme-menu-toggle-active-fg', undefined, colors.darkerGreen),\n  menuToggleBg: new CustomProp('theme-menu-toggle-bg', undefined, 'white'),\n  menuToggleBorder: new CustomProp('theme-menu-toggle-border', undefined, colors.slate),\n\n  /* Info Button */\n  infoButtonFg: new CustomProp('theme-info-button-fg', undefined, \"#8F8F8F\"),\n  infoButtonHoverFg: new CustomProp('theme-info-button-hover-fg', undefined, \"#707070\"),\n  infoButtonActiveFg: new CustomProp('theme-info-button-active-fg', undefined, \"#5C5C5C\"),\n\n  /* Button Groups */\n  buttonGroupFg: new CustomProp('theme-button-group-fg', undefined, colors.dark),\n  buttonGroupLightFg: new CustomProp('theme-button-group-light-fg', undefined, colors.slate),\n  buttonGroupBg: new CustomProp('theme-button-group-bg', undefined, 'unset'),\n  buttonGroupIcon: new CustomProp('theme-button-group-icon', undefined, colors.slate),\n  buttonGroupBorder: new CustomProp('theme-button-group-border', undefined, colors.darkGrey),\n  buttonGroupBorderHover: new CustomProp('theme-button-group-border-hover', undefined,\n    colors.hover),\n  buttonGroupSelectedFg: new CustomProp('theme-button-group-selected-fg', undefined, colors.light),\n  buttonGroupLightSelectedFg: new CustomProp('theme-button-group-light-selected-fg', undefined,\n    colors.lightGreen),\n  buttonGroupSelectedBg: new CustomProp('theme-button-group-selected-bg', undefined, colors.dark),\n  buttonGroupSelectedBorder: new CustomProp('theme-button-group-selected-border', undefined,\n    colors.dark),\n\n  /* Access Rules */\n  accessRulesTableHeaderFg: new CustomProp('theme-access-rules-table-header-fg', undefined,\n    colors.dark),\n  accessRulesTableHeaderBg: new CustomProp('theme-access-rules-table-header-bg', undefined,\n    colors.mediumGrey),\n  accessRulesTableBodyFg: new CustomProp('theme-access-rules-table-body-fg', undefined,\n    colors.dark),\n  accessRulesTableBorder: new CustomProp('theme-access-rules-table-border', undefined,\n    colors.slate),\n  accessRulesColumnListBorder: new CustomProp('theme-access-rules-column-list-border', undefined,\n    colors.darkGrey),\n  accessRulesColumnItemFg: new CustomProp('theme-access-rules-column-item-fg', undefined,\n    colors.dark),\n  accessRulesColumnItemBg: new CustomProp('theme-access-rules-column-item-bg', undefined,\n    colors.mediumGreyOpaque),\n  accessRulesColumnItemIconFg: new CustomProp('theme-access-rules-column-item-icon-fg', undefined,\n    colors.slate),\n  accessRulesColumnItemIconHoverFg: new CustomProp('theme-access-rules-column-item-icon-hover-fg',\n    undefined, colors.light),\n  accessRulesColumnItemIconHoverBg: new CustomProp('theme-access-rules-column-item-icon-hover-bg',\n    undefined, colors.slate),\n  accessRulesFormulaEditorBg: new CustomProp('theme-access-rules-formula-editor-bg', undefined,\n    'white'),\n  accessRulesFormulaEditorBorderHover: new CustomProp(\n    'theme-access-rules-formula-editor-border-hover', undefined, colors.darkGrey),\n  accessRulesFormulaEditorBgDisabled: new CustomProp(\n    'theme-access-rules-formula-editor-bg-disabled', undefined, colors.mediumGreyOpaque),\n  accessRulesFormulaEditorFocus: new CustomProp('theme-access-rules-formula-editor-focus',\n    undefined, colors.cursor),\n\n  /* Cells */\n  cellFg: new CustomProp('theme-cell-fg', undefined, 'unset'),\n  cellBg: new CustomProp('theme-cell-bg', undefined, '#FFFFFF00'),\n  cellZebraBg: new CustomProp('theme-cell-zebra-bg', undefined, '#F8F8F8'),\n\n  /* Charts */\n  chartFg: new CustomProp('theme-chart-fg', undefined, '#444'),\n  chartBg: new CustomProp('theme-chart-bg', undefined, '#fff'),\n  chartLegendBg: new CustomProp('theme-chart-legend-bg', undefined, '#FFFFFF80'),\n  chartXAxis: new CustomProp('theme-chart-x-axis', undefined, '#444'),\n  chartYAxis: new CustomProp('theme-chart-y-axis', undefined, '#444'),\n\n  /* Comments */\n  commentsPopupHeaderBg: new CustomProp('theme-comments-popup-header-bg', undefined,\n    colors.lightGrey),\n  commentsPopupBodyBg: new CustomProp('theme-comments-popup-body-bg', undefined, 'white'),\n  commentsPopupBorder: new CustomProp('theme-comments-popup-border', undefined, colors.darkGrey),\n  commentsUserNameFg: new CustomProp('theme-comments-user-name-fg', undefined, colors.darkText),\n  commentsPanelTopicBg: new CustomProp('theme-comments-panel-topic-bg', undefined, 'white'),\n  commentsPanelTopicBorder: new CustomProp('theme-comments-panel-topic-border', undefined, '#ccc'),\n  commentsPanelResolvedTopicBg: new CustomProp('theme-comments-panel-resolved-topic-bg', undefined,\n    vars.labelActiveBg),\n\n  /* Date Picker */\n  datePickerSelectedFg: new CustomProp('theme-date-picker-selected-fg', undefined,\n    colors.light),\n  datePickerSelectedBg: new CustomProp('theme-date-picker-selected-bg', undefined,\n    '#286090'),\n  datePickerSelectedBgHover: new CustomProp('theme-date-picker-selected-bg-hover',\n    undefined, '#204d74'),\n  datePickerTodayFg: new CustomProp('theme-date-picker-today-fg', undefined,\n    colors.light),\n  datePickerTodayBg: new CustomProp('theme-date-picker-today-bg', undefined,\n    colors.lightGreen),\n  datePickerTodayBgHover: new CustomProp('theme-date-picker-today-bg-hover', undefined,\n    colors.darkGreen),\n  datePickerRangeStartEndBg: new CustomProp('theme-date-picker-range-start-end-bg', undefined,\n    '#777'),\n  datePickerRangeStartEndBgHover: new CustomProp('theme-date-picker-range-start-end-bg-hover',\n    undefined, '#5E5E5E'),\n  datePickerRangeBg: new CustomProp('theme-date-picker-range-bg', undefined,\n    colors.mediumGreyOpaque),\n  datePickerRangeBgHover: new CustomProp('theme-date-picker-range-bg-hover', undefined,\n    colors.darkGrey),\n\n  /* Tutorials */\n  tutorialsPopupBorder: new CustomProp('theme-tutorials-popup-border', undefined,\n    colors.darkGrey),\n  tutorialsPopupHeaderFg: new CustomProp('theme-tutorials-popup-header-fg', undefined,\n    colors.lightGreen),\n  tutorialsPopupBoxBg: new CustomProp('theme-tutorials-popup-box-bg', undefined, '#F5F5F5'),\n\n  /* Ace */\n  aceEditorBg: new CustomProp('theme-ace-editor-bg', undefined, 'white'),\n  aceAutocompletePrimaryFg: new CustomProp('theme-ace-autocomplete-primary-fg', undefined, '#444'),\n  aceAutocompleteSecondaryFg: new CustomProp('theme-ace-autocomplete-secondary-fg', undefined,\n    '#8f8f8f'),\n  aceAutocompleteHighlightedFg: new CustomProp('theme-ace-autocomplete-highlighted-fg', undefined, '#000'),\n  aceAutocompleteBg: new CustomProp('theme-ace-autocomplete-bg', undefined, '#FBFBFB'),\n  aceAutocompleteBorder: new CustomProp('theme-ace-autocomplete-border', undefined, 'lightgray'),\n  aceAutocompleteLink: new CustomProp('theme-ace-autocomplete-link', undefined, colors.lightGreen),\n  aceAutocompleteLinkHighlighted: new CustomProp('theme-ace-autocomplete-link-highlighted',\n    undefined, colors.darkGreen),\n  aceAutocompleteActiveLineBg: new CustomProp('theme-ace-autocomplete-active-line-bg',\n    undefined, '#CAD6FA'),\n  aceAutocompleteLineBorderHover: new CustomProp('theme-ace-autocomplete-line-border-hover',\n    undefined, '#abbffe'),\n  aceAutocompleteLineBgHover: new CustomProp('theme-ace-autocomplete-line-bg-hover',\n    undefined, 'rgba(233,233,253,0.4)'),\n\n  /* Color Select */\n  colorSelectFg: new CustomProp('theme-color-select-fg', undefined, colors.dark),\n  colorSelectBg: new CustomProp('theme-color-select-bg', undefined, 'white'),\n  colorSelectShadow: new CustomProp('theme-color-select-shadow', undefined,\n    'rgba(38,38,51,0.6)'),\n  colorSelectFontOptionsBorder: new CustomProp('theme-color-select-font-options-border',\n    undefined, colors.darkGrey),\n  colorSelectFontOptionFg: new CustomProp('theme-color-select-font-option-fg',\n    undefined, colors.dark),\n  colorSelectFontOptionBg: new CustomProp('theme-color-select-font-option-bg',\n    undefined, colors.light),\n  colorSelectFontOptionBgHover: new CustomProp('theme-color-select-font-option-bg-hover',\n    undefined, colors.lightGrey),\n  colorSelectFontOptionFgSelected: new CustomProp('theme-color-select-font-option-selected-fg',\n    undefined, colors.light),\n  colorSelectFontOptionBgSelected: new CustomProp('theme-color-select-font-option-selected-bg',\n    undefined, colors.dark),\n  colorSelectColorSquareBorder: new CustomProp('theme-color-select-color-square-border',\n    undefined, '#D9D9D9'),\n  colorSelectColorSquareBorderEmpty: new CustomProp('theme-color-select-color-square-border-empty',\n    undefined, colors.dark),\n  colorSelectInputFg: new CustomProp('theme-color-select-input-fg',\n    undefined, colors.slate),\n  colorSelectInputBg: new CustomProp('theme-color-select-input-bg',\n    undefined, 'white'),\n  colorSelectInputBorder: new CustomProp('theme-color-select-input-border',\n    undefined, colors.darkGrey),\n\n  /* Highlighted Code */\n  highlightedCodeBlockBg: new CustomProp('theme-highlighted-code-block-bg', undefined,\n    colors.light),\n  highlightedCodeBlockBgDisabled: new CustomProp('theme-highlighted-code-block-bg-disabled',\n    undefined, colors.mediumGreyOpaque),\n  highlightedCodeFg: new CustomProp('theme-highlighted-code-fg',\n    undefined, colors.slate),\n  highlightedCodeBorder: new CustomProp('theme-highlighted-code-border',\n    undefined, colors.darkGrey),\n  highlightedCodeBgDisabled: new CustomProp('theme-highlighted-code-bg-disabled',\n    undefined, colors.mediumGreyOpaque),\n\n  /* Login Page */\n  loginPageBg: new CustomProp('theme-login-page-bg', undefined, 'white'),\n  loginPageBackdrop: new CustomProp('theme-login-page-backdrop', undefined, '#F5F8FA'),\n  loginPageLine: new CustomProp('theme-login-page-line', undefined, colors.lightGrey),\n\n  /* Formula Assistant */\n  formulaAssistantHeaderBg: new CustomProp(\n    'theme-formula-assistant-header-bg', undefined, colors.lightGrey),\n  formulaAssistantBorder: new CustomProp(\n    'theme-formula-assistant-border', undefined, colors.darkGrey),\n  formulaAssistantPreformattedTextBg: new CustomProp(\n    'theme-formula-assistant-preformatted-text-bg', undefined, colors.lightGrey),\n};\n\nconst cssColors = values(colors).map(v => v.decl()).join('\\n');\nconst cssVars = values(vars).map(v => v.decl()).join('\\n');\nconst cssFontParams = `\n  font-family: ${vars.fontFamily};\n  font-size: ${vars.mediumFontSize};\n  -moz-osx-font-smoothing: grayscale;\n  -webkit-font-smoothing: antialiased;\n`;\n\n// We set box-sizing globally to match bootstrap's setting of border-box, since we are integrating\n// into an app which already has it set, and it's impossible to make things look consistently with\n// AND without it. This duplicates bootstrap's setting.\nconst cssBorderBox = `\n  *, *:before, *:after {\n  -webkit-box-sizing: border-box;\n     -moz-box-sizing: border-box;\n          box-sizing: border-box;\n  }\n`;\n\n// These styles duplicate bootstrap's global settings, which we rely on even on pages that don't\n// have bootstrap.\nconst cssInputFonts = `\n  button, input, select, textarea {\n    font-family: inherit;\n    font-size: inherit;\n    line-height: inherit;\n  }\n`;\n\n// Font style classes used by style selector.\nconst cssFontStyles = `\n  .font-italic {\n    font-style: italic;\n  }\n  .font-bold {\n    font-weight: 800;\n  }\n  .font-underline {\n    text-decoration: underline;\n  }\n  .font-strikethrough {\n    text-decoration: line-through;\n  }\n  .font-strikethrough.font-underline {\n    text-decoration: line-through underline;\n  }\n`;\n\nconst cssVarsOnly = styled('div', cssColors + cssVars);\nconst cssBodyVars = styled('div', cssFontParams + cssColors + cssVars + cssBorderBox + cssInputFonts + cssFontStyles);\n\nconst cssBody = styled('body', `\n  margin: 0;\n  height: 100%;\n`);\n\nconst cssRoot = styled('html', `\n  height: 100%;\n  overflow: hidden;\n`);\n\nexport const cssRootVars = cssBodyVars.className;\n\n// Also make a globally available testId, with a simple \"test-\" prefix (i.e. in tests, query css\n// class \".test-{name}\". Ideally, we'd use noTestId() instead in production.\nexport const testId: TestId = makeTestId('test-');\n\n// Min width for normal screen layout (in px). Note: <768px is bootstrap's definition of small\n// screen (covers phones, including landscape, but not tablets).\nconst largeScreenWidth = 992;\nconst mediumScreenWidth = 768;\nconst smallScreenWidth = 576;   // Anything below this is extra-small (e.g. portrait phones).\n\n// Fractional width for max-query follows https://getbootstrap.com/docs/4.0/layout/overview/#responsive-breakpoints\nexport const mediaMedium = `(max-width: ${largeScreenWidth - 0.02}px)`;\nexport const mediaSmall = `(max-width: ${mediumScreenWidth - 0.02}px)`;\nexport const mediaNotSmall = `(min-width: ${mediumScreenWidth}px)`;\nexport const mediaXSmall = `(max-width: ${smallScreenWidth - 0.02}px)`;\n\nexport const mediaDeviceNotSmall = `(min-device-width: ${mediumScreenWidth}px)`;\n\nexport function isNarrowScreen() {\n  return window.innerWidth < mediumScreenWidth;\n}\n\nlet _isNarrowScreenObs: Observable<boolean>|undefined;\n\n// Returns a singleton observable for whether the screen is a small one.\nexport function isNarrowScreenObs(): Observable<boolean> {\n  if (!_isNarrowScreenObs) {\n    const obs = Observable.create<boolean>(null, isNarrowScreen());\n    window.addEventListener('resize', () => obs.set(isNarrowScreen()));\n    _isNarrowScreenObs = obs;\n  }\n  return _isNarrowScreenObs;\n}\n\nexport const cssHideForNarrowScreen = styled('div', `\n  @media ${mediaSmall} {\n    & {\n      display: none !important;\n    }\n  }\n`);\n\nlet _isScreenResizingObs: Observable<boolean>|undefined;\n\n// Returns a singleton observable for whether user is currently resizing the window. (listen to\n// `resize` events and uses a timer of 1000ms).\nexport function isScreenResizing(): Observable<boolean> {\n  if (!_isScreenResizingObs) {\n    const obs = Observable.create<boolean>(null, false);\n    const ping = debounce(() => obs.set(false), 1000);\n    window.addEventListener('resize', () => { obs.set(true); ping(); });\n    _isScreenResizingObs = obs;\n  }\n  return _isScreenResizingObs;\n}\n\nexport function prefersDarkMode(): boolean {\n  return window.matchMedia('(prefers-color-scheme: dark)').matches;\n}\n\nlet _prefersDarkModeObs: PausableObservable<boolean>|undefined;\n\n/**\n * Returns a singleton observable for whether the user agent prefers dark mode.\n */\nexport function prefersDarkModeObs(): PausableObservable<boolean> {\n  if (!_prefersDarkModeObs) {\n    const query = window.matchMedia('(prefers-color-scheme: dark)');\n    const obs = createPausableObs<boolean>(null, query.matches);\n    query.addEventListener('change', event => obs.set(event.matches));\n    _prefersDarkModeObs = obs;\n  }\n  return _prefersDarkModeObs;\n}\n\n/**\n * Attaches the global css properties to the document's root to make them available in the page.\n */\nexport function attachCssRootVars(productFlavor: ProductFlavor, varsOnly: boolean = false) {\n  dom.update(document.documentElement, varsOnly ? dom.cls(cssVarsOnly.className) : dom.cls(cssRootVars));\n  document.documentElement.classList.add(cssRoot.className);\n  document.body.classList.add(cssBody.className);\n  const customTheme = getTheme(productFlavor);\n  if (customTheme.bodyClassName) {\n    document.body.classList.add(customTheme.bodyClassName);\n  }\n  const interfaceStyle = urlState().state.get().params?.style || 'full';\n  document.body.classList.add(`interface-${interfaceStyle}`);\n}\n\n/**\n * Attaches theme-related css properties to the theme style element.\n */\nexport function attachCssThemeVars({appearance, colors: themeColors}: Theme) {\n  // Prepare the custom properties needed for applying the theme.\n  const properties = Object.entries(themeColors)\n    .map(([name, value]) => `--grist-theme-${name}: ${value};`);\n\n  // Include properties for styling the scrollbar.\n  properties.push(...getCssScrollbarProperties(appearance));\n\n  // Include properties for picking an appropriate background image.\n  properties.push(...getCssThemeBackgroundProperties(appearance));\n\n  // Apply the properties to the theme style element.\n  getOrCreateStyleElement('grist-theme').textContent = `:root {\n${properties.join('\\n')}\n  }`;\n\n  // Make the browser aware of the color scheme.\n  document.documentElement.style.setProperty(`color-scheme`, appearance);\n\n  // Cache the appearance in local storage; this is currently used to apply a suitable\n  // background image that's shown while the application is loading.\n  getStorage().setItem('appearance', appearance);\n}\n\n/**\n * Gets scrollbar-related css properties that are appropriate for the given `appearance`.\n *\n * Note: Browser support for customizing scrollbars is still a mixed bag; the bulk of customization\n * is non-standard and unsupported by Firefox. If support matures, we could expose some of these in\n * custom themes, but for now we'll just go with reasonable presets.\n */\nfunction getCssScrollbarProperties(appearance: ThemeAppearance) {\n  return [\n    '--scroll-bar-fg: ' +\n      (appearance === 'dark' ? '#6B6B6B;' : '#A8A8A8;'),\n    '--scroll-bar-hover-fg: ' +\n      (appearance === 'dark' ? '#7B7B7B;' : '#8F8F8F;'),\n    '--scroll-bar-active-fg: ' +\n      (appearance === 'dark' ? '#8B8B8B;' : '#7C7C7C;'),\n    '--scroll-bar-bg: ' +\n      (appearance === 'dark' ? '#2B2B2B;' : '#F0F0F0;'),\n  ];\n}\n\n/**\n * Gets background-related css properties that are appropriate for the given `appearance`.\n *\n * Currently, this sets a property for showing a background image that's visible while a page\n * is loading.\n */\nfunction getCssThemeBackgroundProperties(appearance: ThemeAppearance) {\n  const value = appearance === 'dark'\n    ? 'url(\"img/prismpattern.png\")'\n    : 'url(\"img/gplaypattern.png\")';\n  return [`--grist-theme-bg: ${value};`];\n}\n\n/**\n * Gets or creates a style element in the head of the document with the given `id`.\n *\n * Useful for grouping CSS values such as theme custom properties without needing to\n * pollute the document with in-line styles.\n */\nfunction getOrCreateStyleElement(id: string) {\n  let style = document.head.querySelector(id);\n  if (style) { return style; }\n  style = document.createElement('style');\n  style.setAttribute('id', id);\n  document.head.append(style);\n  return style;\n}\n\n// A dom method to hide element in print view\nexport function hideInPrintView(): DomElementMethod {\n  return cssHideInPrint.cls('');\n}\n\nconst cssHideInPrint = styled('div', `\n  @media print {\n    & {\n      display: none !important;\n    }\n  }\n`);\n","/**\n * editableLabel uses grainjs's input widget and adds UI and behavioral extensions:\n *   - Label width grows/shrinks with content (using a hidden sizer element)\n *   - On Escape, cancel editing and revert to original value\n *   - Clicking away or hitting Enter on empty value cancels editing too\n *\n * The structure is a wrapper diver with an input child: div > input. Supports passing in\n * DomElementArgs, which get passed to the underlying <input> element.\n *\n * TODO: Consider merging this into grainjs's input widget.\n */\nimport { theme } from 'app/client/ui2018/cssVars';\nimport { dom, DomArg, styled } from 'grainjs';\nimport { Observable } from 'grainjs';\nimport noop = require('lodash/noop');\n\nconst cssWrapper = styled('div', `\n  position: relative;\n  display: inline-block;\n`);\n\nexport const cssLabelText = styled(rawTextInput, `\n  /* Reset appearance */\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  padding: 0;\n  margin: 0;\n  border: none;\n  outline: none;\n\n  /* Size is determined by the hidden sizer, so take up 100% of width */\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n\n  line-height: inherit;\n  font-size: inherit;\n  font-family: inherit;\n  font-weight: inherit;\n  background-color: inherit;\n  color: inherit;\n`);\n\nexport const cssTextInput = styled('input', `\n  outline: none;\n  height: 28px;\n  border: 1px solid ${theme.inputBorder};\n  border-radius: 3px;\n  padding: 0 6px;\n`);\n\nconst cssSizer = styled('div', `\n  visibility: hidden;\n  overflow: visible;\n  white-space: pre;\n\n  &:empty:before {\n    content: ' ';  /* Don't collapse */\n  }\n`);\n\nenum Status { NORMAL, EDITING, SAVING }\n\ntype SaveFunc = (value: string) => void|PromiseLike<void>;\n\nexport interface EditableLabelOptions {\n  save: SaveFunc;\n  args?: Array<DomArg<HTMLDivElement>>;\n  inputArgs?: Array<DomArg<HTMLInputElement>>;\n}\n\n/**\n * Provides a label that takes in an observable that is set on Enter or loss of focus. Escape\n * cancels editing. Label grows in size with typed input. Validation logic (if any) should happen in\n * the save function, to reject a value simply throw an error, this will revert to the saved one .\n */\nexport function editableLabel(label: Observable<string>, options: EditableLabelOptions) {\n  const {save, args, inputArgs} = options;\n\n  let input: HTMLInputElement;\n  let sizer: HTMLSpanElement;\n\n  function updateSizer() {\n    sizer.textContent = input.value;\n  }\n\n  return cssWrapper(\n    sizer = cssSizer(label.get()),\n    input = rawTextInput(label, save, updateSizer, dom.cls(cssLabelText.className),\n      dom.on('focus', () => input.select()),\n      ...inputArgs ?? [],\n    ),\n    ...args ?? [],\n  );\n}\n\n/**\n * Provides a text input element that pretty much behaves like the editableLabel only it shows as a\n * regular input within a rigid static frame. It takes in an observable that is set on Enter or loss\n * of focus. Escape cancels editing. Validation logic (if any) should happen in the save function,\n * to reject a value simply throw an error, this will revert to the the saved one.\n */\nexport function textInput(label: Observable<string>, save: SaveFunc, ...args: Array<DomArg<HTMLInputElement>>) {\n  return rawTextInput(label, save, noop, dom.cls(cssTextInput.className), ...args);\n}\n\n/**\n * A helper that implements all the saving logic for both editableLabel and textInput.\n */\nexport function rawTextInput(value: Observable<string>, save: SaveFunc, onChange: () => void,\n                             ...args: Array<DomArg<HTMLInputElement>>) {\n  let status: Status = Status.NORMAL;\n  let inputEl: HTMLInputElement;\n\n  // When label changes updates the input, unless in the middle of editing.\n  const lis = value.addListener((val) => { if (status !== Status.EDITING) { setValue(val); } });\n\n  function setValue(val: string) {\n    inputEl.value = val;\n    onChange();\n  }\n\n  function revertToSaved() {\n    setValue(value.get());\n    status = Status.NORMAL;\n    inputEl.blur();\n  }\n\n  async function saveEdit() {\n    if (status === Status.EDITING) {\n      status = Status.SAVING;\n      inputEl.disabled = true;\n      // Ignore errors; save() callback is expected to handle their reporting.\n      try { await save(inputEl.value); } catch (e) { /* ignore */ }\n      inputEl.disabled = false;\n      revertToSaved();\n    } else if (status === Status.NORMAL) {\n      // If we are not editing, nothing to save, but lets end in the expected blurred state.\n      inputEl.blur();\n    }\n  }\n\n  return inputEl = dom('input',\n    dom.autoDispose(lis),\n    {type: 'text'},\n    dom.on('input', () => { status = Status.EDITING; onChange(); }),\n    dom.on('blur', saveEdit),\n    // we set the attribute to the initial value and keep it updated for the convenience of usage\n    // with selenium webdriver\n    dom.attr('value', value),\n    dom.onKeyDown({\n      Escape: revertToSaved,\n      Enter: saveEdit,\n    }),\n    ...args\n  );\n}\n","/**\n * Exports a single `icon` function which returns a DOM Element for the given icon name.\n * Names are of type `IconName` imported from `IconList.ts`, which is auto-generated during the\n * build process.\n *\n * In order to use the icons, you must first include the generated CSS file:\n *\n *   <link rel=\"stylesheet\" href=\"icons.css\">\n *\n * The CSS file encodes each icon as a `url()` with base64 DataURI of the icon SVG and saves it\n * as a CSS :root var of the form --icon-${name}. It also includes a class for each icon that\n * uses the variable to set the mask-image (vs background-image, allowing you to change colors\n * using background-color):\n *\n *   .icon.Search_icon { -webkit-mask-image: var(--icon-Search); }\n *\n * This approach is more performant than inlining SVGs or using <symbol> with <use>.\n *\n * Examples:\n *\n *   // Display icon with default color and size\n *   dom('div',\n *     icon('Search')\n *   );\n *\n *   // Display bigger icon in blue\n *   const bigBlueIcon = styled(icon, `\n *     background-color: blue;\n *     width: 32px;\n *     height: 32px;\n *   `);\n *   dom('div',\n *     bigBlueIcon('Search')\n *   )\n *\n *   // Use icon image directly in css to style a checkbox\n *   // Refer to https://developer.mozilla.org/en-US/docs/Learn/HTML/Forms/Advanced_styling_for_HTML_forms\n *   const checkbox = styled('input#checkbox', `\n *     -webkit-appearance: none;\n *     -moz-appearance: none;\n *      width: 1rem;\n *      height: 1rem;\n *      border: 1px solid blue;\n *\n *      &:checked::before {\n *        position: absolute;\n *        content: var(--icon-Select);\n *      }\n *   `);\n */\n\nimport { theme } from 'app/client/ui2018/cssVars';\nimport { dom, DomElementArg, styled } from 'grainjs';\nimport { IconName } from './IconList';\n\n/**\n * Defaults for all icons.\n */\nconst iconDiv = styled('div', `\n  position: relative;\n  display: inline-block;\n  vertical-align: middle;\n  -webkit-mask-repeat: no-repeat;\n  -webkit-mask-position: center;\n  -webkit-mask-size: contain;\n  width: 16px;\n  height: 16px;\n  background-color: var(--icon-color, var(--grist-theme-text, black));\n`);\n\nexport const cssIconBackground = styled(iconDiv, `\n  background-color: var(--icon-background, inherit);\n  -webkit-mask: none;\n  & .${iconDiv.className} {\n    transition: inherit;\n    display: block;\n  }\n`);\n\nexport function icon(name: IconName, ...domArgs: DomElementArg[]): HTMLElement {\n  return iconDiv(\n    dom.style('-webkit-mask-image', `var(--icon-${name})`),\n    ...domArgs\n  );\n}\n\n/**\n * Container box for an icon to serve as a button..\n */\nexport const cssIconButton = styled('div', `\n  flex: none;\n  height: 24px;\n  width: 24px;\n  padding: 4px;\n  border-radius: 3px;\n  line-height: 0px;\n  cursor: default;\n  --icon-color: ${theme.controlSecondaryFg};\n  &:hover, &.weasel-popup-open {\n    background-color: ${theme.controlSecondaryHoverBg};\n    --icon-color: ${theme.controlSecondaryFg};\n  }\n`);\n","import {findLinks} from 'app/client/lib/textUtils';\nimport { sameDocumentUrlState, urlState } from 'app/client/models/gristUrlState';\nimport { colors, hideInPrintView, testId, theme } from 'app/client/ui2018/cssVars';\nimport {cssIconBackground, icon} from 'app/client/ui2018/icons';\nimport { CellValue } from 'app/plugin/GristData';\nimport { dom, DomArg, IDomArgs, Observable, styled } from 'grainjs';\n\n/**\n * Styling for a simple <A HREF> link.\n */\n\nexport const cssLink = styled('a', `\n  color: ${theme.link};\n  --icon-color: ${theme.link};\n  text-decoration: none;\n  &:hover, &:focus {\n    color: ${theme.linkHover};\n    --icon-color: ${theme.linkHover};\n    text-decoration: underline;\n  }\n`);\n\nexport function gristLink(href: string|Observable<string>, ...args: IDomArgs<HTMLElement>) {\n  return dom(\"a\",\n    dom.attr(\"href\", href),\n    dom.attr(\"target\", \"_blank\"),\n    dom.on(\"click\", ev => onClickHyperLink(ev, typeof href === 'string' ? href : href.get())),\n    // stop propagation to prevent the grist custom context menu to show up and let the default one\n    // to show up instead.\n    dom.on(\"contextmenu\", ev => ev.stopPropagation()),\n    // As per Google and Mozilla recommendations to prevent opened links\n    // from running on the same process as Grist:\n    // https://developers.google.com/web/tools/lighthouse/audits/noopener\n    dom.attr(\"rel\", \"noopener noreferrer\"),\n    hideInPrintView(),\n    args\n  );\n}\n\n/**\n * If possible (i.e. if `url` points to somewhere in the current document)\n * use pushUrl to navigate without reloading or opening a new tab\n */\nexport async function onClickHyperLink(ev: MouseEvent, url: CellValue) {\n  // Only override plain-vanilla clicks.\n  if (ev.shiftKey || ev.metaKey || ev.ctrlKey || ev.altKey) { return; }\n\n  const newUrlState = sameDocumentUrlState(url);\n  if (!newUrlState) { return; }\n\n  ev.preventDefault();\n  await urlState().pushUrl(newUrlState);\n}\n\n/**\n * Generates dom contents out of a text with clickable links.\n */\nexport function makeLinks(text: string) {\n  try {\n    const domElements: DomArg[] = [];\n    for (const {value, isLink} of findLinks(text)) {\n      if (isLink) {\n        // Wrap link with a span to provide hover on and to override wrapping.\n        domElements.push(cssMaybeWrap(\n          gristLink(value,\n            cssIconBackground(\n              icon(\"FieldLink\", testId('tb-link-icon')),\n              dom.cls(cssHoverInText.className),\n            ),\n          ),\n          linkColor(value),\n          testId(\"text-link\")\n        ));\n      } else {\n        domElements.push(value);\n      }\n    }\n    return domElements;\n  } catch(ex) {\n    // In case when something went wrong, simply log and return original text, as showing\n    // links is not that important.\n    console.warn(\"makeLinks failed\", ex);\n    return text;\n  }\n}\n\n// For links we want to break all the parts, not only words.\nconst cssMaybeWrap = styled('span', `\n  white-space: inherit;\n  .text_wrapping & {\n    word-break: break-all;\n    white-space: pre-wrap;\n  }\n`);\n\n// A gentle transition effect on hover in, and the same effect on hover out with a little delay.\nexport const cssHoverIn = (parentClass: string) => styled('span', `\n  --icon-color: var(--grist-actual-cell-color, ${colors.lightGreen});\n  margin: -1px 2px 2px 0;\n  border-radius: 3px;\n  transition-property: background-color;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 150ms;\n  transition-delay: 90ms;\n  .${parentClass}:hover & {\n    --icon-background: ${colors.lightGreen};\n    --icon-color: white;\n    transition-duration: 80ms;\n    transition-delay: 0ms;\n  }\n`);\n\nconst cssHoverInText = cssHoverIn(cssMaybeWrap.className);\n\nconst linkColor = styled('span', `\n  color: var(--grist-actual-cell-color, ${colors.lightGreen});;\n`);\n","import {theme} from 'app/client/ui2018/cssVars';\nimport {DomArg, keyframes, styled} from 'grainjs';\n\nconst rotate360 = keyframes(`\n  from { transform: rotate(45deg); }\n  75% { transform: rotate(405deg); }\n  to { transform: rotate(405deg); }\n`);\n\nconst flash = keyframes(`\n  0% {\n    background-color: ${theme.loaderFg};\n  }\n  50%, 100% {\n    background-color: ${theme.loaderBg};\n  }\n`);\n\n/**\n * Creates a 32x32 pixel loading spinner. Use by calling `loadingSpinner()`.\n */\nexport const loadingSpinner = styled('div', `\n  display: inline-block;\n  box-sizing: border-box;\n  width: 32px;\n  height: 32px;\n  border-radius: 32px;\n  border: 4px solid ${theme.loaderBg};\n  border-top-color: ${theme.loaderFg};\n  animation: ${rotate360} 1s ease-out infinite;\n`);\n\n/**\n * Creates a three-dots loading animation. Use by calling `loadingDots()`.\n */\nexport function loadingDots(...args: DomArg<HTMLDivElement>[]) {\n  return cssLoadingDotsContainer(\n    cssLoadingDot(cssLoadingDot.cls('-left')),\n    cssLoadingDot(cssLoadingDot.cls('-middle')),\n    cssLoadingDot(cssLoadingDot.cls('-right')),\n    ...args,\n  );\n}\n\nconst cssLoadingDotsContainer = styled('div', `\n  --dot-size: 10px;\n  display: inline-flex;\n  column-gap: calc(var(--dot-size) / 2);\n`);\n\nconst cssLoadingDot = styled('div', `\n  border-radius: 50%;\n  width: var(--dot-size);\n  height: var(--dot-size);\n  background-color: ${theme.loaderFg};\n  color: ${theme.loaderFg};\n  animation: ${flash} 1s alternate infinite;\n\n  &-left {\n    animation-delay: 0s;\n  }\n  &-middle {\n    animation-delay: 0.25s;\n  }\n  &-right {\n    animation-delay: 0.5s;\n  }\n`);\n","import { Command } from 'app/client/components/commands';\nimport { FocusLayer } from 'app/client/lib/FocusLayer';\nimport { makeT } from 'app/client/lib/localization';\nimport { NeedUpgradeError, reportError } from 'app/client/models/errors';\nimport { textButton } from 'app/client/ui2018/buttons';\nimport { cssCheckboxSquare, cssLabel, cssLabelText } from 'app/client/ui2018/checkbox';\nimport { testId, theme, vars } from 'app/client/ui2018/cssVars';\nimport { IconName } from 'app/client/ui2018/IconList';\nimport { icon } from 'app/client/ui2018/icons';\nimport { cssSelectBtn } from 'app/client/ui2018/select';\nimport { BindableValue, Computed, dom, DomElementArg, DomElementMethod, IDomArgs,\n         MaybeObsArray, MutableObsArray, Observable, styled } from 'grainjs';\nimport * as weasel from 'popweasel';\n\nconst t = makeT('menus');\n\nexport interface IOptionFull<T> {\n  value: T;\n  label: string;\n  disabled?: boolean;\n  icon?: IconName;\n}\n\nlet _lastOpenedController: weasel.IOpenController|null = null;\n\n// Close opened menu if any, otherwise do nothing.\n// WARN: current implementation does not handle submenus correctly. Does not seem a problem as of\n// today though, as there is no submenu in UI.\nexport function closeRegisteredMenu() {\n  if (_lastOpenedController) { _lastOpenedController.close(); }\n}\n\n// Register `ctl` to make sure it is closed when `closeMenu()` is called.\nexport function registerMenuOpen(ctl: weasel.IOpenController) {\n  _lastOpenedController = ctl;\n  ctl.onDispose(() => _lastOpenedController = null);\n}\n\n// For string options, we can use a string for label and value without wrapping into an object.\nexport type IOption<T> = (T & string) | IOptionFull<T>;\n\nexport function menu(createFunc: weasel.MenuCreateFunc, options?: weasel.IMenuOptions): DomElementMethod {\n  const wrappedCreateFunc = (ctl: weasel.IOpenController) => {\n    registerMenuOpen(ctl);\n    return createFunc(ctl);\n  };\n  return weasel.menu(wrappedCreateFunc, {...defaults, ...options});\n}\n\n// TODO Weasel doesn't allow other options for submenus, but probably should.\nexport type ISubMenuOptions = weasel.ISubMenuOptions & weasel.IPopupOptions;\n\nexport function menuItemSubmenu(\n  submenu: weasel.MenuCreateFunc,\n  options: ISubMenuOptions,\n  ...args: DomElementArg[]\n): Element {\n  return weasel.menuItemSubmenu(submenu, {...defaults, ...options}, ...args);\n}\n\nexport const cssMenuElem = styled('div', `\n  font-family: ${vars.fontFamily};\n  font-size: ${vars.mediumFontSize};\n  line-height: initial;\n  max-width: 400px;\n  padding: 8px 0px 16px 0px;\n  box-shadow: 0 2px 20px 0 ${theme.menuShadow};\n  min-width: 160px;\n  z-index: ${vars.menuZIndex};\n  --weaseljs-selected-background-color: ${theme.menuItemSelectedBg};\n  --weaseljs-menu-item-padding: 8px 24px;\n  background-color: ${theme.menuBg};\n\n  @media print {\n    & {\n      display: none;\n    }\n  }\n`);\n\nconst menuItemStyle = `\n  justify-content: flex-start;\n  align-items: center;\n  color: ${theme.menuItemFg};\n  --icon-color: ${theme.accentIcon};\n  .${weasel.cssMenuItem.className}-sel {\n    color: ${theme.menuItemSelectedFg};\n    --icon-color: ${theme.menuItemSelectedFg};\n  }\n  &.disabled {\n    cursor: default;\n    color: ${theme.menuItemDisabledFg};\n    --icon-color: ${theme.menuItemDisabledFg};\n  }\n`;\n\nexport const menuCssClass = cssMenuElem.className;\n\n// Add grist-floating-menu class to support existing browser tests\nconst defaults = { menuCssClass: menuCssClass + ' grist-floating-menu' };\n\nexport interface SelectOptions<T> extends weasel.ISelectUserOptions {\n  /** Additional DOM element args to pass to each select option. */\n  renderOptionArgs?: (option: IOptionFull<T | null>) => DomElementArg;\n}\n\n/**\n * Creates a select dropdown widget. The observable `obs` reflects the value of the selected\n * option, and `optionArray` is an array (regular or observable) of option values and labels.\n * These may be either strings, or {label, value, icon, disabled} objects. Icons are optional\n * and must be IconName strings from 'app/client/ui2018/IconList'.\n *\n * The type of value may be any type at all; it is opaque to this widget.\n *\n * If obs is set to an invalid or disabled value, then defLabel option is used to determine the\n * label that the select box will show, blank by default.\n *\n * Usage:\n *    const fruit = observable(\"apple\");\n *    select(fruit, [\"apple\", \"banana\", \"mango\"]);\n *\n *    const employee = observable(17);\n *    const allEmployees = Observable.create(owner, [\n *      {value: 12, label: \"Bob\", disabled: true},\n *      {value: 17, label: \"Alice\"},\n *      {value: 21, label: \"Eve\"},\n *    ]);\n *    select(employee, allEmployees, {defLabel: \"Select employee:\"});\n *\n *    const name = observable(\"alice\");\n *    const names = [\"alice\", \"bob\", \"carol\"];\n *    select(name, names, {renderOptionArgs: (op) => console.log(`Rendered option ${op.value}`)});\n *\n * Note that this select element is not compatible with browser address autofill for usage in\n * forms, and that formSelect should be used for this purpose.\n */\nexport function select<T>(obs: Observable<T>, optionArray: MaybeObsArray<IOption<T>>,\n                          options: SelectOptions<T> = {}) {\n  const {renderOptionArgs, ...weaselOptions} = options;\n  const _menu = cssSelectMenuElem(testId('select-menu'));\n  const _btn = cssSelectBtn(testId('select-open'));\n\n  const {menuCssClass: menuClass, ...otherOptions} = weaselOptions;\n  const selectOptions = {\n    buttonArrow: cssInlineCollapseIcon('Collapse'),\n    menuCssClass: _menu.className + ' ' + (menuClass || ''),\n    buttonCssClass: _btn.className,\n    ...otherOptions,\n  };\n\n  return weasel.select(obs, optionArray, selectOptions, (op) =>\n    cssOptionRow(\n      op.icon ? cssOptionRowIcon(op.icon) : null,\n      cssOptionLabel(t(op.label)),\n      renderOptionArgs ? renderOptionArgs(op) : null,\n      testId('select-row')\n    )\n  ) as HTMLElement; // TODO: should be changed in weasel\n}\n\n/**\n * Same as select(), but the main element looks like a link rather than a button.\n */\nexport function linkSelect<T>(obs: Observable<T>, optionArray: MaybeObsArray<IOption<T>>,\n                              options: weasel.ISelectUserOptions = {}) {\n  const _btn = cssSelectBtnLink(testId('select-open'));\n  const elem = select(obs, optionArray, {buttonCssClass: _btn.className, ...options});\n  // It feels strange to have focus stay on this link; remove tabIndex that makes it focusable.\n  elem.removeAttribute('tabIndex');\n  return elem;\n}\n\nexport interface IMultiSelectUserOptions {\n  placeholder?: string;\n  error?: Observable<boolean>;\n}\n\n/**\n * Creates a select dropdown widget that supports selecting multiple options.\n *\n * The observable array `selectedOptions` reflects the selected options, and\n * `availableOptions` is an array (normal or observable) of selectable options.\n * These may either be strings, or {label, value} objects.\n */\nexport function multiSelect<T>(selectedOptions: MutableObsArray<T>,\n                               availableOptions: MaybeObsArray<IOption<T>>,\n                               options: IMultiSelectUserOptions = {},\n                               ...domArgs: DomElementArg[]) {\n  const selectedOptionsSet = Computed.create(null, selectedOptions, (_use, opts) => new Set(opts));\n\n  const selectedOptionsText = Computed.create(null, selectedOptionsSet, (use, selectedOpts) => {\n    if (selectedOpts.size === 0) {\n      return options.placeholder ?? t(\"Select fields\");\n    }\n\n    const optionArray = Array.isArray(availableOptions) ? availableOptions : use(availableOptions);\n    return optionArray\n      .filter(opt => selectedOpts.has(weasel.getOptionFull(opt).value))\n      .map(opt => weasel.getOptionFull(opt).label)\n      .join(', ');\n  });\n\n  function buildMultiSelectMenu(ctl: weasel.IOpenController) {\n    return cssMultiSelectMenu(\n      { tabindex: '-1' }, // Allow menu to be focused.\n      dom.cls(menuCssClass),\n      FocusLayer.attach({pauseMousetrap: true}),\n      dom.onKeyDown({\n        Enter: () => ctl.close(),\n        Escape: () => ctl.close()\n      }),\n      elem => {\n        // Set focus on open, so that keyboard events work.\n        setTimeout(() => elem.focus(), 0);\n\n        // Sets menu width to match parent container (button) width.\n        const style = elem.style;\n        style.minWidth = ctl.getTriggerElem().getBoundingClientRect().width + 'px';\n        style.marginLeft = style.marginRight = '0';\n      },\n      dom.domComputed(selectedOptionsSet, selectedOpts => {\n        return dom.forEach(availableOptions, option => {\n          const fullOption = weasel.getOptionFull(option);\n          return cssCheckboxLabel(\n            cssCheckboxSquare(\n              {type: 'checkbox'},\n              dom.prop('checked', selectedOpts.has(fullOption.value)),\n              dom.on('change', (_ev, elem) => {\n                if (elem.checked) {\n                  selectedOptions.push(fullOption.value);\n                } else {\n                  selectedOpts.delete(fullOption.value);\n                  selectedOptions.set([...selectedOpts]);\n                }\n              }),\n              dom.style('position', 'relative'),\n              testId('multi-select-menu-option-checkbox')\n            ),\n            cssCheckboxText(fullOption.label, testId('multi-select-menu-option-text')),\n            testId('multi-select-menu-option')\n          );\n        });\n      }),\n      testId('multi-select-menu')\n    );\n  }\n\n  return cssSelectBtn(\n    dom.autoDispose(selectedOptionsSet),\n    dom.autoDispose(selectedOptionsText),\n    cssMultiSelectSummary(\n      dom.text(selectedOptionsText),\n      cssMultiSelectSummary.cls('-placeholder', use => use(selectedOptionsSet).size === 0)\n    ),\n    icon('Dropdown'),\n    elem => {\n      weasel.setPopupToCreateDom(elem, ctl => buildMultiSelectMenu(ctl), weasel.defaultMenuOptions);\n    },\n    dom.style('border', use => {\n      return options.error && use(options.error)\n        ? `1px solid ${theme.selectButtonBorderInvalid}`\n        : `1px solid ${theme.selectButtonBorder}`;\n    }),\n    ...domArgs\n  );\n}\n\n/**\n * Creates a select dropdown widget that is more ideal for forms. Implemented using the <select>\n * element to work with browser form autofill and typing in the desired value to quickly set it.\n * The appearance of the opened menu is OS dependent.\n *\n * The observable `obs` reflects the value of the selected option, and `optionArray` is an\n * array (regular or observable) of option values and labels. These may be either strings,\n * or {label, value} objects.\n *\n * If obs is set to an empty string value, then defLabel option is used to determine the\n * label that the select box will show, blank by default.\n *\n * Usage:\n *    const fruit = observable(\"\");\n *    formSelect(fruit, [\"apple\", \"banana\", \"mango\"], {defLabel: \"Select fruit:\"});\n */\nexport function formSelect(obs: Observable<string>, optionArray: MaybeObsArray<IOption<string>>,\n                           options: {defaultLabel?: string} = {}) {\n  const {defaultLabel = \"\"} = options;\n  const container: Element = cssSelectBtnContainer(\n    dom('select', {class: cssSelectBtn.className, style: 'height: 42px; padding: 12px 30px 12px 12px;'},\n      dom.prop('value', obs),\n      dom.on('change', (_, elem) => { obs.set(elem.value); }),\n      dom('option', {value: '', hidden: 'hidden'}, defaultLabel),\n      dom.forEach(optionArray, (option) => {\n        const obj: weasel.IOptionFull<string> = weasel.getOptionFull(option);\n        return dom('option', {value: obj.value}, obj.label);\n      })\n    ),\n    cssCollapseIcon('Collapse')\n  );\n  return container;\n}\n\nexport function inputMenu(createFunc: weasel.MenuCreateFunc, options?: weasel.IMenuOptions): DomElementMethod {\n  // Triggers the input menu on 'input' events, if the input has text inside.\n  function inputTrigger(triggerElem: Element, ctl: weasel.PopupControl): void {\n    dom.onElem(triggerElem, 'input', () => {\n      (triggerElem as HTMLInputElement).value.length > 0 ? ctl.open() : ctl.close();\n    });\n  }\n  return weasel.inputMenu(createFunc, {\n    trigger: [inputTrigger],\n    menuCssClass: `${cssMenuElem.className} ${cssInputButtonMenuElem.className}`,\n    ...options\n  });\n}\n\n// A menu item that leads to the billing page if the desired operation requires an upgrade.\n// Such menu items are marked with a little sparkle unicode.\nexport function upgradableMenuItem(needUpgrade: boolean, action: () => void, ...rem: any[]) {\n  if (needUpgrade) {\n    return menuItem(() => reportError(new NeedUpgradeError()), ...rem, \" *\");\n  } else {\n    return menuItem(action, ...rem);\n  }\n}\n\nexport function upgradeText(needUpgrade: boolean, onClick: () => void) {\n  if (!needUpgrade) { return null; }\n  return menuText(dom('span', t(\"* Workspaces are available on team plans. \"),\n    cssUpgradeTextButton(t(\"Upgrade now\"), dom.on('click', () => onClick()))));\n}\n\n/**\n * Create an autocomplete element and tie it to an input or textarea element.\n *\n * Usage:\n *      const employees = ['Thomas', 'June', 'Bethany', 'Mark', 'Marjorey', 'Zachary'];\n *      const inputElem = input(...);\n *      autocomplete(inputElem, employees);\n */\nexport function autocomplete(\n  inputElem: HTMLInputElement,\n  choices: MaybeObsArray<string>,\n  options: weasel.IAutocompleteOptions = {}\n) {\n  return weasel.autocomplete(inputElem, choices, {\n    ...defaults, ...options,\n    menuCssClass: defaults.menuCssClass + ' ' + cssSelectMenuElem.className + ' ' + (options.menuCssClass || '')\n  });\n}\n\n/**\n * Creates simple (not reactive) static menu that looks like a select-box.\n * Primary usage is for menus, where you want to control how the options and a default\n * label will look. Label is not updated or changed when one of the option is clicked, for those\n * use cases use a select component.\n * Icons are optional, can use custom elements instead of labels and options.\n *\n * Usage:\n *\n *  selectMenu(selectTitle(\"Title\", \"Script\"), () => [\n *    selectOption(() => ..., \"Option1\", \"Database\"),\n *    selectOption(() => ..., \"Option2\", \"Script\"),\n *  ]);\n *\n *  // Control disabled state (if the menu will be opened or not)\n *\n *  const disabled = observable(false);\n *  selectMenu(selectTitle(\"Title\", \"Script\"), () => [\n *    selectOption(() => ..., \"Option1\", \"Database\"),\n *    selectOption(() => ..., \"Option2\", \"Script\"),\n *  ], disabled);\n *\n */\nexport function selectMenu(\n  label: DomElementArg,\n  items: () => DomElementArg[],\n  ...args: IDomArgs<HTMLDivElement>\n) {\n  const _menu = cssSelectMenuElem(testId('select-menu'));\n  return cssSelectBtn(\n    label,\n    icon('Dropdown'),\n    menu(\n      items,\n      {\n        ...weasel.defaultMenuOptions,\n        menuCssClass: _menu.className + ' grist-floating-menu',\n        stretchToSelector : `.${cssSelectBtn.className}`,\n        trigger : [(triggerElem, ctl) => {\n          const isDisabled = () => triggerElem.classList.contains('disabled');\n          dom.onElem(triggerElem, 'click', () => isDisabled() || ctl.toggle());\n          dom.onKeyElem(triggerElem as HTMLElement, 'keydown', {\n            ArrowDown: () => isDisabled() || ctl.open(),\n            ArrowUp: () => isDisabled() || ctl.open()\n          });\n        }]\n      },\n    ),\n    ...args,\n  );\n}\n\nexport function selectTitle(label: BindableValue<string>, iconName?: BindableValue<IconName>) {\n  return cssOptionRow(\n    iconName ? dom.domComputed(iconName, (name) => cssOptionRowIcon(name)) : null,\n    dom.text(label)\n  );\n}\n\nexport function selectOption(\n  action: (item: HTMLElement) => void,\n  label: BindableValue<string>,\n  iconName?: BindableValue<IconName>,\n  ...args: IDomArgs<HTMLElement>) {\n  return menuItem(action, selectTitle(label, iconName), ...args);\n}\n\nexport const menuSubHeader = styled('div', `\n  color: ${theme.menuSubheaderFg};\n  font-size: ${vars.xsmallFontSize};\n  text-transform: uppercase;\n  font-weight: ${vars.bigControlTextWeight};\n  padding: 8px 24px 16px 24px;\n  cursor: default;\n`);\n\nexport const menuText = styled('div', `\n  display: flex;\n  align-items: center;\n  font-size: ${vars.smallFontSize};\n  color: ${theme.menuText};\n  padding: 8px 24px 4px 24px;\n  max-width: 250px;\n  cursor: default;\n`);\n\nexport const menuItem = styled(weasel.menuItem, menuItemStyle);\n\nexport const menuItemLink = styled(weasel.menuItemLink, menuItemStyle);\n\n/**\n * A version of menuItem which runs the action on next tick, allowing the menu to close even when\n * the action causes the disabling of the element being clicked.\n * TODO disabling the element should not prevent the menu from closing; once fixed in weasel, this\n * can be removed.\n */\nexport const menuItemAsync: typeof weasel.menuItem = function(action, ...args) {\n  return menuItem(() => setTimeout(action, 0), ...args);\n};\n\nexport function menuItemCmd(cmd: Command, label: string, ...args: DomElementArg[]) {\n  return menuItem(\n    cmd.run,\n    dom('span', label, testId('cmd-name')),\n    cmd.humanKeys.length ? cssCmdKey(cmd.humanKeys[0]) : null,\n    cssMenuItemCmd.cls(''), // overrides some menu item styles\n    ...args\n  );\n}\n\nexport function menuAnnotate(text: string, ...args: DomElementArg[]) {\n  return cssAnnotateMenuItem(text, ...args);\n}\n\nexport const menuDivider = styled(weasel.cssMenuDivider, `\n  background-color: ${theme.menuBorder};\n  margin: 8px 0;\n`);\n\nexport const menuIcon = styled(icon, `\n  flex: none;\n  margin-right: 8px;\n`);\n\nconst cssSelectMenuElem = styled(cssMenuElem, `\n  max-height: 400px;\n  overflow-y: auto;\n\n  --weaseljs-menu-item-padding: 8px 16px;\n`);\n\nconst cssSelectBtnContainer = styled('div', `\n  position: relative;\n  width: 100%;\n`);\n\nconst cssSelectBtnLink = styled('div', `\n  display: flex;\n  align-items: center;\n  font-size: ${vars.mediumFontSize};\n  color: ${theme.controlFg};\n  --icon-color: ${theme.controlFg};\n  width: initial;\n  height: initial;\n  line-height: inherit;\n  background-color: initial;\n  padding: initial;\n  border: initial;\n  border-radius: initial;\n  box-shadow: initial;\n  cursor: pointer;\n  outline: none;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n\n  &:hover, &:focus, &:active {\n    color: ${theme.controlHoverFg};\n    --icon-color: ${theme.controlHoverFg};\n    box-shadow: initial;\n  }\n`);\n\n\nexport const cssOptionRow = styled('span', `\n  display: flex;\n  align-items: center;\n  width: 100%;\n`);\n\nexport const cssOptionRowIcon = styled(icon, `\n  height: 16px;\n  width: 16px;\n  background-color: var(--icon-color, ${theme.menuItemIconFg});\n  margin: -3px 8px 0 2px;\n  margin: 0 8px 0 0;\n  flex: none;\n\n  .${weasel.cssMenuItem.className}-sel & {\n    background-color: ${theme.menuItemSelectedFg};\n  }\n\n  .${weasel.cssMenuItem.className}.disabled & {\n    background-color: ${theme.menuItemDisabledFg};\n  }\n`);\n\nconst cssOptionLabel = styled('div', `\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  .${weasel.cssMenuItem.className} & {\n    color: ${theme.menuItemFg};\n  }\n\n  .${weasel.cssMenuItem.className}-sel & {\n    color: ${theme.menuItemSelectedFg};\n    background-color: ${theme.menuItemSelectedBg};\n  }\n\n  .${weasel.cssMenuItem.className}.disabled & {\n    color: ${theme.menuItemDisabledFg};\n  }\n`);\n\nconst cssInlineCollapseIcon = styled(icon, `\n  margin: 0 2px;\n  pointer-events: none;\n`);\n\nconst cssCollapseIcon = styled(icon, `\n  position: absolute;\n  right: 12px;\n  top: calc(50% - 8px);\n  pointer-events: none;\n  background-color: ${theme.selectButtonFg};\n`);\n\nconst cssInputButtonMenuElem = styled(cssMenuElem, `\n  padding: 4px 0px;\n`);\n\nconst cssMenuItemCmd = styled('div', `\n  justify-content: space-between;\n`);\n\nconst cssCmdKey = styled('span', `\n  margin-left: 16px;\n  color: ${theme.menuItemIconFg};\n  margin-right: -12px;\n\n  .${weasel.cssMenuItem.className}-sel > & {\n    color: ${theme.menuItemIconSelectedFg};\n  }\n\n  .${weasel.cssMenuItem.className}.disabled > & {\n    color: ${theme.menuItemDisabledFg};\n  }\n`);\n\nconst cssAnnotateMenuItem = styled('span', `\n  color: ${theme.accentText};\n  text-transform: uppercase;\n  font-size: 8px;\n  vertical-align: super;\n  margin-top: -4px;\n  margin-left: 4px;\n  font-weight: bold;\n\n  .${weasel.cssMenuItem.className}-sel > & {\n    color: ${theme.menuItemIconSelectedFg};\n  }\n`);\n\nconst cssMultiSelectSummary = styled('div', `\n  flex: 1 1 0px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: ${theme.selectButtonFg};\n\n  &-placeholder {\n    color: ${theme.selectButtonPlaceholderFg};\n  }\n`);\n\nconst cssMultiSelectMenu = styled(weasel.cssMenu, `\n  display: flex;\n  flex-direction: column;\n  max-height: calc(max(300px, 95vh - 300px));\n  max-width: 400px;\n  padding-bottom: 0px;\n  background-color: ${theme.menuBg};\n`);\n\nconst cssCheckboxLabel = styled(cssLabel, `\n  padding: 8px 16px;\n`);\n\nconst cssCheckboxText = styled(cssLabelText, `\n  margin-right: 12px;\n  color: ${theme.text};\n  white-space: pre;\n`);\n\nconst cssUpgradeTextButton = styled(textButton, `\n  font-size: ${vars.smallFontSize};\n`);\n","import {FocusLayer} from 'app/client/lib/FocusLayer';\nimport {makeT} from 'app/client/lib/localization';\nimport {reportError} from 'app/client/models/errors';\nimport {cssInput} from 'app/client/ui/cssInput';\nimport {prepareForTransition, TransitionWatcher} from 'app/client/ui/transitions';\nimport {bigBasicButton, bigPrimaryButton, cssButton} from 'app/client/ui2018/buttons';\nimport {mediaSmall, testId, theme, vars} from 'app/client/ui2018/cssVars';\nimport {loadingSpinner} from 'app/client/ui2018/loaders';\nimport {waitGrainObs} from 'app/common/gutil';\nimport {IOpenController, IPopupOptions, PopupControl, popupOpen} from 'popweasel';\nimport {Computed, Disposable, dom, DomContents, DomElementArg, input, keyframes,\n  MultiHolder, Observable, styled} from 'grainjs';\nimport {cssMenuElem} from 'app/client/ui2018/menus';\n\nconst t = makeT('modals');\n\n// IModalControl is passed into the function creating the body of the modal.\nexport interface IModalControl {\n  // Observable for whether there is work in progress that's delaying the closing of the modal. It\n  // is useful for disabling a Save or Close button.\n  workInProgress: Computed<boolean>;\n\n  // Focus the modal dialog.\n  focus(): void;\n\n  // Request to close, without waiting. It's possible for closing to get prevented.\n  close(): void;\n\n  // Returns true if closed, false if closing was prevented.\n  closeAndWait(): Promise<boolean>;\n\n  // Prevents closing, if close has been called and is pending. No-op otherwise.\n  preventClose(): void;\n\n  // Wraps the passed-in function, so that closing is delayed while the function is running. If\n  // {close: true} is passed in, then requests closing of the modal when the function is done.\n  //\n  // With catchErrors set, errors are caught and reported, and prevent the dialog from closing.\n  // Otherwise, only StayOpen exception prevents closing; other errors will be propagated.\n  doWork<Args extends any[]>(\n    func: (...args: Args) => Promise<unknown>,\n    options?: {close?: boolean, catchErrors?: boolean},\n  ): (...args: Args) => Promise<void>;\n}\n\nexport class ModalControl extends Disposable implements IModalControl {\n  private _inProgress = Observable.create<number>(this, 0);\n  private _workInProgress = Computed.create(this, this._inProgress, (use, n) => (n > 0));\n  private _closePromise: Promise<boolean>|undefined;\n  private _shouldClose = false;\n\n  constructor(\n    private _doClose: () => void,\n    private _doFocus?: () => void,\n  ) {\n    super();\n  }\n\n  public focus() {\n    this._doFocus?.();\n  }\n\n  public close(): void {\n    this.closeAndWait().catch(() => {});\n  }\n\n  public async closeAndWait(): Promise<boolean> {\n    return this._closePromise || (this._closePromise = this._doCloseAndWait());\n  }\n\n  public preventClose(): void {\n    this._shouldClose = false;\n  }\n\n  public get workInProgress() {\n    return this._workInProgress;\n  }\n\n  public doWork<Args extends any[]>(\n    func: (...args: Args) => Promise<unknown>,\n    options: {close?: boolean, catchErrors?: boolean} = {},\n  ): (...args: Args) => Promise<void> {\n    return async (...args) => {\n      this._inProgress.set(this._inProgress.get() + 1);\n      const closePromise = options.close ? this.closeAndWait() : null;\n      try {\n        await func(...args);\n      } catch (err) {\n        if (err instanceof StayOpen) {\n          this.preventClose();\n        } else if (options.catchErrors) {\n          reportError(err);\n          this.preventClose();\n        } else {\n          throw err;\n        }\n      } finally {\n        this._inProgress.set(this._inProgress.get() - 1);\n        if (closePromise) {\n          await closePromise;\n        }\n      }\n    };\n  }\n\n  private async _doCloseAndWait(): Promise<boolean> {\n    this._shouldClose = true;\n    try {\n      // Since some modals expect an immediate close; avoid an await when no work is pending.\n      if (this.workInProgress.get()) {\n        await waitGrainObs(this.workInProgress, wip => !wip);\n      }\n      if (this._shouldClose) { this._doClose(); }\n      return this._shouldClose;\n    } finally {\n      this._closePromise = undefined;\n    }\n  }\n}\n\n/**\n * The modal variant.\n *\n * Fade-in modals open with a fade-in background animation, and close immediately.\n *\n * Collapsing modals open with a expanding animation from a referenced DOM element, and\n * close with a collapsing animation into the referenced element.\n */\nexport type IModalVariant = 'fade-in' | 'collapsing';\n\nexport interface IModalOptions {\n  // The modal variant. Defaults to \"fade-in\".\n  variant?: IModalVariant;\n  // Required for \"collapsing\" variant modals. This is the anchor element for animations.\n  refElement?: HTMLElement;\n  // If set, escape key does not close the dialog.\n  noEscapeKey?: boolean;\n  // If set, clicking into background does not close dialog.\n  noClickAway?: boolean;\n  // DOM arguments to pass to the modal backer.\n  backerDomArgs?: DomElementArg[];\n  // If given, call and wait for this before closing the dialog. If it returns false, don't close.\n  // Error also prevents closing, and is reported as an unexpected error.\n  beforeClose?: () => Promise<boolean>;\n}\n\n// A custom error type to signal to the modal that it should stay open, but not report any error\n// (presumably because the error was already reported).\nexport class StayOpen extends Error {\n}\n\nexport type ModalWidth =\n  'normal' |          // Normal dialog, from 428px to 480px in width.\n  'fixed-wide';       // Fixed 600px width.\n\n/**\n * A simple modal. Shows up in the middle of the screen with a tinted backdrop.\n * Created with the given body content and width.\n *\n * Closed via clicking anywhere outside the modal. May also be closed by\n * calling ctl.close().\n *\n * The createFn callback may tie the disposal of temporary objects to its `owner` argument.\n *\n * Example usage:\n *  modal((ctl, owner) => [\n *    cssModalTitle(`Pin doc`),\n *    cssModalBody('Are you sure you want to pin doc?')\n *    cssModalButtons(\n *      primary('Yes', dom.on('click', () => { onClick(true); ctl.close(); })),\n *      secondary('Cancel', dom.on('click', () => { onClick(false); ctl.close(); }))\n *    )\n *  ])\n */\nexport function modal(\n  createFn: (ctl: IModalControl, owner: MultiHolder) => DomElementArg,\n  options: IModalOptions = {}\n): void {\n  const {\n    noEscapeKey,\n    noClickAway,\n    refElement = document.body,\n    variant = 'fade-in',\n    backerDomArgs = [],\n  } = options;\n\n  function doClose() {\n    if (!modalDom.isConnected) { return; }\n\n    variant === 'collapsing' ? collapseAndCloseModal() : closeModal();\n  }\n\n  function closeModal() {\n    document.body.removeChild(modalDom);\n    // Ensure we run the disposers for the DOM contained in the modal.\n    dom.domDispose(modalDom);\n  }\n\n  function collapseAndCloseModal() {\n    const watcher = new TransitionWatcher(dialogDom);\n    watcher.onDispose(() => closeModal());\n    modalDom.classList.add(cssModalBacker.className + '-collapsing');\n    collapseModal();\n  }\n\n  function expandModal() {\n    prepareForTransition(dialogDom, () => collapseModal());\n    Object.assign(dialogDom.style, {\n      transform: '',\n      opacity: '',\n      visibility: 'visible',\n    });\n  }\n\n  function collapseModal() {\n    const rect = dialogDom.getBoundingClientRect();\n    const collapsedRect = refElement.getBoundingClientRect();\n    const originX = (collapsedRect.left + collapsedRect.width / 2) - rect.left;\n    const originY = (collapsedRect.top + collapsedRect.height / 2) - rect.top;\n    Object.assign(dialogDom.style, {\n      transform: `scale(${collapsedRect.width / rect.width}, ${collapsedRect.height / rect.height})`,\n      transformOrigin: `${originX}px ${originY}px`,\n      opacity: '0',\n    });\n  }\n\n  let close = doClose;\n  let dialogDom: HTMLElement;\n\n  const modalDom = cssModalBacker(\n    dom.create((owner) => {\n      const focus = () => dialogDom.focus();\n      const ctl = ModalControl.create(owner, doClose, focus);\n      close = () => ctl.close();\n\n      dialogDom = cssModalDialog(\n        createFn(ctl, owner),\n        cssModalDialog.cls('-collapsing', variant === 'collapsing'),\n        dom.on('click', (ev) => ev.stopPropagation()),\n        noEscapeKey ? null : dom.onKeyDown({ Escape: close }),\n        testId('modal-dialog'),\n      );\n      FocusLayer.create(owner, {\n        defaultFocusElem: dialogDom,\n        allowFocus: (elem) => (elem !== document.body),\n        // Pause mousetrap keyboard shortcuts while the modal is shown. Without this, arrow keys\n        // will navigate in a grid underneath the modal, and Enter may open a cell there.\n        pauseMousetrap: true\n      });\n      return dialogDom;\n    }),\n    noClickAway ? null : dom.on('click', () => close()),\n    ...backerDomArgs,\n  );\n\n  document.body.appendChild(modalDom);\n  if (variant === 'collapsing') { expandModal(); }\n}\n\nexport interface ISaveModalOptions {\n  title: DomElementArg;           // Normally just a string.\n  body: DomElementArg;            // Content of the dialog.\n  saveLabel?: DomElementArg;      // Normally just a string; defaults to \"Save\".\n  saveDisabled?: Observable<boolean>;   // Optional observable for when to disable Save button.\n  saveFunc: () => Promise<unknown>;     // Called on Save; dialog closes when promise is fulfilled.\n  hideCancel?: boolean;           // If set, hide the Cancel button\n  width?: ModalWidth;             // Set a width style for the dialog.\n  modalArgs?: DomElementArg;      // Extra args to apply to the outer cssModalDialog element.\n  extraButtons?: DomContents;     // More buttons!\n}\n\n/**\n * Creates a modal dialog with a title, body, and Save/Cancel buttons. The provided createFunc()\n * is called immediately to get the dialog's contents and options (see ISaveModalOptions for\n * details). For example:\n *\n *    saveModal((ctl, owner) => {\n *      const myObs = Computed.create(owner, ...);\n *      return {\n *        title: 'My Dialog',\n *        body: dom('div', 'Hello', dom.text(myObs)),\n *        saveDisabled: Computed.create(owner, (use) => !use(myObs)),\n *        saveFunc: () => server.ping(),\n *        modalArgs: {style: 'background-color: blue'},\n *      };\n *    });\n *\n * On Save, the dialog calls saveFunc(), disables the Save button, and stays open until saveFunc()\n * is resolved. It then closes on success, or reports the error and stays open on rejection. To\n * stay open without reporting an error (if one is already reported), throw StayOpen exception.\n *\n * The dialog interprets Enter/Escape keys as if the Save/Cancel buttons were clicked.\n *\n * Note that it's possible to close the dialog via Cancel while saveFunc() is pending. That's\n * probably desirable, but keep in mind that the dialog may be disposed before saveFunc() returns.\n *\n * Error handling examples:\n *  1.  saveFunc: doSomething\n *      (Most common) If doSomething fails, the error is reported and the dialog stays open.\n *  2.  saveFunc: () => doSomething().catch(reportError)\n *      If doSomething fails, the error is reported but the dialog closes anyway.\n *  3.  saveFunc: () => doSomething().catch((e) => { alert(\"BOOM\"); throw new StayOpen(); })\n *      If doSomething fails, an alert is shown, and the dialog stays open.\n */\nexport function saveModal(\n  createFunc: (ctl: IModalControl, owner: MultiHolder) => ISaveModalOptions,\n  modalOptions?: IModalOptions\n) {\n  return modal((ctl, owner) => {\n    const options = createFunc(ctl, owner);\n\n    const isSaveDisabled = Computed.create(owner, (use) =>\n      use(ctl.workInProgress) || (options.saveDisabled ? use(options.saveDisabled) : false));\n\n    const save = ctl.doWork(options.saveFunc, {close: true, catchErrors: true});\n\n    return [\n      cssModalTitle(options.title, testId('modal-title')),\n      cssModalBody(options.body),\n      cssModalButtons(\n        bigPrimaryButton(options.saveLabel || t(\"Save\"),\n          dom.boolAttr('disabled', isSaveDisabled),\n          dom.on('click', save),\n          testId('modal-confirm'),\n        ),\n        options.extraButtons,\n        options.hideCancel ? null : bigBasicButton(t(\"Cancel\"),\n          dom.on('click', () => ctl.close()),\n          testId('modal-cancel'),\n        ),\n      ),\n      dom.onKeyDown({ Enter: () => isSaveDisabled.get() || save() }),\n      options.width && cssModalWidth(options.width),\n      options.modalArgs,\n    ];\n  }, modalOptions);\n}\n\nexport interface ConfirmModalOptions {\n  explanation?: DomElementArg,\n  hideCancel?: boolean;\n  extraButtons?: DomContents;\n  modalOptions?: IModalOptions;\n}\n\n/**\n * Builds a simple confirm modal with 'Enter' bound to the confirm action.\n *\n * See saveModal() for error handling notes that here apply to the onConfirm callback.\n */\nexport function confirmModal(\n  title: DomElementArg,\n  btnText: DomElementArg,\n  onConfirm: () => Promise<void>,\n  {explanation, hideCancel, extraButtons, modalOptions}: ConfirmModalOptions = {},\n): void {\n  return saveModal((ctl, owner): ISaveModalOptions => ({\n    title,\n    body: explanation || null,\n    saveLabel: btnText,\n    saveFunc: onConfirm,\n    hideCancel,\n    width: 'normal',\n    extraButtons,\n  }), modalOptions);\n}\n\n\n/**\n * Creates a simple prompt modal (replacement for the native one).\n * Closed via clicking anywhere outside the modal or Cancel button.\n *\n * Example usage:\n *  promptModal(\n *    \"Enter your name\",\n *    (name: string) => alert(`Hello ${name}`),\n *    \"Ok\" // Confirm button name,\n *    \"John doe\", // Initial text (can be empty or undefined)\n *    \"Enter your name\", // input placeholder\n *    () => console.log('User cancelled') // Called when user cancels, or clicks outside.\n *  )\n *\n * @param title: Prompt text.\n * @param onConfirm: Handler for Confirm button.\n * @param btnText: Text of the confirm button.\n * @param initial: Initial value in the input element.\n * @param placeholder: Placeholder for the input element.\n * @param onCancel: Optional cancel handler.\n */\nexport function promptModal(\n  title: string,\n  onConfirm: (text: string) => Promise<unknown>,\n  btnText: string,\n  initial?: string,\n  placeholder?: string,\n  onCancel?: () => void\n): void {\n  saveModal((ctl, owner): ISaveModalOptions => {\n    let confirmed = false;\n    const text = Observable.create(owner, initial ?? '');\n    const txtInput = input(text, { onInput : true }, { placeholder }, cssInput.cls(''), testId('modal-prompt'));\n    const options: ISaveModalOptions = {\n      title,\n      body: txtInput,\n      saveLabel: btnText,\n      saveFunc: () => {\n        // Mark that confirm was invoked.\n        confirmed = true;\n        return onConfirm(text.get() || '');\n      },\n      width: 'normal'\n    };\n    owner.onDispose(() => {\n      if (confirmed) { return; }\n      onCancel?.();\n    });\n    setTimeout(() => txtInput.focus(), 10);\n    return options;\n  });\n}\n\n/**\n * Wraps prompt modal in a promise that is resolved either when user confirms or cancels.\n * When user cancels the returned value is always undefined.\n *\n * Example usage:\n *  async handler() {\n *    const name = await invokePrompt(\"Please enter your name\");\n *    if (name !== undefined) alert(`Hello ${name}`);\n *  }\n *\n * @param title: Prompt text.\n * @param btnText: Text of the confirm button, default is \"Ok\".\n * @param initial: Initial value in the input element.\n * @param placeholder: Placeholder for the input element.\n */\nexport function invokePrompt(\n  title: string,\n  btnText?: string,\n  initial?: string,\n  placeholder?: string\n): Promise<string|undefined> {\n  let onResolve: (text: string|undefined) => any;\n  const prom = new Promise<string|undefined>((resolve) => {\n    onResolve = resolve;\n  });\n  promptModal(title, onResolve!, btnText ?? t(\"Ok\"), initial, placeholder, () => {\n    if (onResolve) {\n      onResolve(undefined);\n    }\n  });\n  return prom;\n}\n\n/**\n * Builds a simple spinner modal. The modal gets removed when `promise` resolves.\n */\nexport async function spinnerModal<T>(\n  title: string,\n  promise: Promise<T>): Promise<T> {\n\n  modal((ctl, owner) => {\n\n    // `finally` is missing from es2016, below is a work-around.\n    const close = () => ctl.close();\n    promise.then(close, close);\n\n    return [\n      cssModalSpinner.cls(''),\n      cssModalTitle(\n        title,\n        testId('modal-spinner-title'),\n      ),\n      cssSpinner(loadingSpinner()),\n      testId('modal-spinner'),\n    ];\n  }, {\n    noClickAway: true,\n    noEscapeKey: true,\n  });\n  return await promise;\n}\n\n/**\n * Apply this to a modal as\n *    modal(() => [cssModalBody(...), cssModalWidth('normal')])\n * or\n *    saveModal(() => {..., width: 'normal'})\n */\nexport function cssModalWidth(style: ModalWidth) {\n  return cssModalDialog.cls('-' + style);\n}\n\n/**\n * Shows a little modal as a tooltip.\n *\n * Example:\n * dom.on('click', (_, element) => modalTooltip(element, (ctl) => {\n *  return dom('div', 'Hello world', dom.on('click', () => ctl.close()));\n * }))\n */\nexport function modalTooltip(\n  reference: Element,\n  domCreator: (ctl: IOpenController) => DomElementArg,\n  options: IPopupOptions = {}\n): PopupControl {\n  return popupOpen(reference, (ctl: IOpenController) => {\n    const element = cssModalTooltip(\n      domCreator(ctl)\n    );\n    return element;\n  }, options);\n}\n\n/* CSS styled components */\n\nexport const cssModalTooltip = styled(cssMenuElem, `\n  padding: 16px 24px;\n  background: ${theme.modalBg};\n  border-radius: 3px;\n  outline: none;\n  & > div {\n    outline: none;\n  }\n`);\n\nexport const cssModalTopPadding = styled('div', `\n  padding-top: var(--css-modal-dialog-padding-vertical);\n`);\n\nexport const cssModalBottomPadding = styled('div', `\n  padding-bottom: var(--css-modal-dialog-padding-vertical);\n`);\n\nexport const cssModalHorizontalPadding = styled('div', `\n  padding-left: var(--css-modal-dialog-padding-horizontal);\n  padding-right: var(--css-modal-dialog-padding-horizontal);\n`);\n\n// For centering, we use 'margin: auto' on the flex item instead of 'justify-content: center' on\n// the flex container, to ensure the full item can be scrolled in case of overflow.\n// See https://stackoverflow.com/a/33455342/328565\n//\n// If you want to control the padding yourself, use the cssModalTopPadding and other classes above and add -full-body\n// variant to the modal.\nexport const cssModalDialog = styled('div', `\n  --css-modal-dialog-padding-horizontal: 64px;\n  --css-modal-dialog-padding-vertical: 40px;\n  background-color: ${theme.modalBg};\n  min-width: 428px;\n  color: ${theme.darkText};\n  margin: auto;\n  border-radius: 3px;\n  box-shadow: 0 2px 18px 0 ${theme.modalInnerShadow}, 0 0 1px 0 ${theme.modalOuterShadow};\n  padding: var(--css-modal-dialog-padding-vertical) var(--css-modal-dialog-padding-horizontal);\n  outline: none;\n\n  &-normal {\n    max-width: 480px;\n  }\n  &-fixed-wide {\n    width: 600px;\n  }\n  &-collapsing {\n    transition-property: opacity, transform;\n    transition-duration: 0.4s;\n    transition-timing-function: ease-in-out;\n  }\n  @media ${mediaSmall} {\n    & {\n      width: unset;\n      min-width: unset;\n      --css-modal-dialog-padding-horizontal: 16px;\n      --css-modal-dialog-padding-vertical: 24px;\n    }\n  }\n  &-full-body {\n    padding: 0;\n  }\n`);\n\nexport const cssModalTitle = styled('div', `\n  font-size: ${vars.xxxlargeFontSize};\n  font-weight: ${vars.headerControlTextWeight};\n  color: ${theme.text};\n  margin: 0 0 16px 0;\n  line-height: 32px;\n  overflow-wrap: break-word;\n`);\n\nexport const cssModalBody = styled('div', `\n  color: ${theme.text};\n  margin: 16px 0;\n`);\n\nexport const cssModalButtons = styled('div', `\n  margin: 40px 0 0 0;\n\n  & > button,\n  & > .${cssButton.className} {\n    margin: 0 8px 0 0;\n  }\n`);\n\nexport const cssModalCloseButton = styled('div', `\n  align-self: flex-end;\n  margin: -8px;\n  padding: 4px;\n  border-radius: 4px;\n  cursor: pointer;\n  --icon-color: ${theme.modalCloseButtonFg};\n\n  &:hover {\n    background-color: ${theme.hover};\n  }\n`);\n\nconst cssFadeIn = keyframes(`\n  from {background-color: transparent}\n`);\n\nconst cssFadeOut = keyframes(`\n  from {background-color: ${theme.modalBackdrop}}\n`);\n\nconst cssModalBacker = styled('div', `\n  position: fixed;\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  padding: 16px;\n  z-index: ${vars.modalZIndex};\n  background-color: ${theme.modalBackdrop};\n  overflow-y: auto;\n  animation-name: ${cssFadeIn};\n  animation-duration: 0.4s;\n\n  &-collapsing {\n    animation-name: ${cssFadeOut};\n    background-color: transparent;\n  }\n`);\n\nconst cssSpinner = styled('div', `\n  display: flex;\n  align-items: center;\n  height: 80px;\n  margin: auto;\n`);\n\nconst cssModalSpinner = styled('div', `\n  display: flex;\n  flex-direction: column;\n`);\n\nconst cssFadeInFromTop = keyframes(`\n  from {top: -250px; opacity: 0}\n  to {top: 0; opacity: 1}\n`);\n\nexport const cssAnimatedModal = styled('div', `\n  animation-name: ${cssFadeInFromTop};\n  animation-duration: 0.4s;\n  position: relative;\n`);\n","import {theme, vars} from 'app/client/ui2018/cssVars';\nimport {styled} from 'grainjs';\n\n// Import popweasel so that the styles we define here are included later in CSS, and take priority\n// over popweasel styles, when used together.\nimport 'popweasel';\n\n/**\n * Style for a select dropdown button.\n *\n * This incorporates styling from popweasel's select, so that it can be used to style buttons that\n * don't use it.\n */\nexport const cssSelectBtn = styled('div', `\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  height: 30px;\n  line-height: 16px;\n  background-color: ${theme.selectButtonBg};\n  color: ${theme.selectButtonFg};\n  --icon-color: ${theme.selectButtonFg};\n  font-size: ${vars.mediumFontSize};\n  padding: 5px;\n  border: 1px solid ${theme.selectButtonBorder};\n  border-radius: 3px;\n  cursor: pointer;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  user-select: none;\n  -moz-user-select: none;\n  outline: none;\n\n  &:focus {\n    outline: none;\n    box-shadow: 0px 0px 2px 2px #5E9ED6;\n  }\n\n  &.disabled, &-disabled {\n    --icon-color: ${theme.selectButtonDisabledFg};\n    color: ${theme.selectButtonDisabledFg};\n    cursor: pointer;\n  }\n`);\n","/**\n * A tip for fixing an error.\n */\nexport interface ApiTip {\n  action: 'add-members' | 'upgrade' | 'ask-for-help' | 'manage';\n  message: string;\n}\n\nexport type LimitType = 'collaborators' | 'docs' | 'workspaces' | 'assistant';\n\n/**\n * Documentation of a limit relevant to an API error.\n */\nexport interface ApiLimit {\n  quantity: LimitType;  // what are we counting\n  subquantity?: string;    // a nuance to what we are counting\n  maximum: number;         // maximum allowed\n  value: number;           // current value of quantity for user\n  projectedValue: number;  // value of quantity expected if request had been allowed\n}\n\n/**\n * Structured details about an API error.\n */\nexport interface ApiErrorDetails {\n  limit?: ApiLimit;\n\n  // If set, this is the more user-friendly message to show to the user than error.message.\n  userError?: string;\n\n  // If set, contains suggestions for fixing a problem.\n  tips?: ApiTip[];\n\n  memos?: string[];\n}\n\n/**\n * An error with an http status code.\n */\nexport class ApiError extends Error {\n  constructor(message: string, public status: number, public details?: ApiErrorDetails) {\n    super(message);\n  }\n}\n","import {ApiError, ApiErrorDetails} from 'app/common/ApiError';\nimport axios, {AxiosRequestConfig, AxiosResponse} from 'axios';\nimport {tbind} from './tbind';\n\nexport interface IOptions {\n  headers?: Record<string, string>;\n  fetch?: typeof fetch;\n  newFormData?: () => FormData;  // constructor for FormData depends on platform.\n  extraParameters?: Map<string, string>;  // if set, add query parameters to requests.\n}\n\n/**\n * Base setup class for creating a REST API client interface.\n */\nexport class BaseAPI {\n  // Count of pending requests. It is relied on by tests.\n  public static numPendingRequests(): number { return this._numPendingRequests; }\n\n  // Wrap a promise to add to the count of pending requests until the promise is resolved.\n  public static async countPendingRequest<T>(promise: Promise<T>): Promise<T> {\n    try {\n      BaseAPI._numPendingRequests++;\n      return await promise;\n    } finally {\n      BaseAPI._numPendingRequests--;\n    }\n  }\n\n  // Define a decorator for methods in BaseAPI or derived classes.\n  public static countRequest(target: unknown, propertyKey: string, descriptor: PropertyDescriptor) {\n    const originalMethod = descriptor.value;\n    descriptor.value = async function(...args: any[]) {\n      return BaseAPI.countPendingRequest(originalMethod.apply(this, args));\n    };\n  }\n\n  // Make a JSON request to the given URL, and read the response as JSON. Handles errors, and\n  // counts pending requests in the same way as BaseAPI methods do.\n  public static requestJson(url: string, init: RequestInit = {}): Promise<unknown> {\n    return new BaseAPI().requestJson(url, init);\n  }\n\n  // Make a request to the given URL, and read the response. Handles errors, and\n  // counts pending requests in the same way as BaseAPI methods do.\n  public static request(url: string, init: RequestInit = {}): Promise<Response> {\n    return new BaseAPI().request(url, init);\n  }\n\n  private static _numPendingRequests: number = 0;\n\n  protected fetch: typeof fetch;\n  protected newFormData: () => FormData;\n  private _headers: Record<string, string>;\n  private _extraParameters?: Map<string, string>;\n\n  constructor(options: IOptions = {}) {\n    this.fetch = options.fetch || tbind(window.fetch, window);\n    this.newFormData = options.newFormData || (() => new FormData());\n    this._headers = {\n      'Content-Type': 'application/json',\n      'X-Requested-With': 'XMLHttpRequest',\n      ...options.headers\n    };\n    this._extraParameters = options.extraParameters;\n  }\n\n  // Make a modified request, exposed for test convenience.\n  public async testRequest(url: string, init: RequestInit = {}): Promise<Response> {\n    return this.request(url, init);\n  }\n\n  public defaultHeaders() {\n    return this._headers;\n  }\n\n  public defaultHeadersWithoutContentType() {\n    const headers = {...this.defaultHeaders()};\n    delete headers['Content-Type'];\n    return headers;\n  }\n\n  // Similar to request, but uses the axios library, and supports progress indicator.\n  @BaseAPI.countRequest\n  protected async requestAxios(url: string, config: AxiosRequestConfig): Promise<AxiosResponse> {\n    // If using with FormData in node, axios needs the headers prepared by FormData.\n    let headers = config.headers;\n    if (config.data && typeof config.data.getHeaders === 'function') {\n      headers = {...config.data.getHeaders(), ...headers};\n    }\n    const resp = await axios.request({\n      url,\n      withCredentials: true,\n      validateStatus: (status) => true,     // This is more like fetch\n      ...config,\n      headers,\n    });\n    if (resp.status !== 200) {\n      throwApiError(url, resp, resp.data);\n    }\n    return resp;\n  }\n\n  @BaseAPI.countRequest\n  protected async request(input: string, init: RequestInit = {}): Promise<Response> {\n    init = Object.assign({ headers: this._headers, credentials: 'include' }, init);\n    if (this._extraParameters) {\n      const url = new URL(input);\n      for (const [key, val] of this._extraParameters.entries()) {\n        url.searchParams.set(key, val);\n        input = url.href;\n      }\n    }\n    const resp = await this.fetch(input, init);\n    if (resp.status !== 200) {\n      const body = await resp.json().catch(() => ({}));\n      throwApiError(input, resp, body);\n    }\n    return resp;\n  }\n\n  /**\n   * Make a request, and read the response as JSON. This allows counting the request as pending\n   * until it has been read, which is relied on by tests.\n   */\n  @BaseAPI.countRequest\n  protected async requestJson(input: string, init: RequestInit = {}): Promise<any> {\n    return (await this.request(input, init)).json();\n  }\n}\n\nfunction throwApiError(url: string, resp: Response | AxiosResponse, body: any) {\n  // If the response includes details, include them into the ApiError we construct. Include\n  // also the error message from the server as details.userError. It's used by the Notifier.\n  if (!body) { body = {}; }\n  const details: ApiErrorDetails = body.details && typeof body.details === 'object' ? body.details :\n    {errorDetails: body.details};\n  // If a userError is already specified, do not overwrite it.\n  // (The error handling here is quite confusing, would it not be better\n  // to just unserialize an ApiError into the form it would have had on\n  // the server?)\n  if (body.error && !details.userError) {\n    details.userError = body.error;\n  }\n  if (body.memos) {\n    details.memos = body.memos;\n  }\n  throw new ApiError(`Request to ${url} failed with status ${resp.status}: ` +\n    `${resp.statusText} (${body.error || 'unknown cause'})`, resp.status, details);\n}\n","import {BaseAPI, IOptions} from 'app/common/BaseAPI';\nimport {FullUser} from 'app/common/LoginSessionAPI';\nimport {StringUnion} from 'app/common/StringUnion';\nimport {addCurrentOrgToPath} from 'app/common/urlUtils';\nimport {BillingAccount, ManagerDelta, OrganizationWithoutAccessInfo} from 'app/common/UserAPI';\n\nexport const BillingSubPage = StringUnion('payment', 'scheduled');\nexport type BillingSubPage = typeof BillingSubPage.type;\n\nexport const BillingPage = StringUnion(...BillingSubPage.values, 'billing');\nexport type BillingPage = typeof BillingPage.type;\n\n// updateDomain - it is a subpage for billing page, to update domain name.\n// The rest are for payment page:\n// signUpLite - it is a subpage for payment, to finalize (complete) signup process\n// and set domain and team name when they are not set yet (currently only from landing pages).\n// signUp - it is landing page for new team sites (it doesn't ask for the name of the team)\nexport const BillingTask = StringUnion('signUpLite', 'updateDomain', 'signUp', 'cancelPlan', 'upgraded');\nexport type BillingTask = typeof BillingTask.type;\n\n// Note that IBillingPlan includes selected fields from the Stripe plan object along with\n// custom metadata fields that are present on plans we store in Stripe.\n// For reference: https://stripe.com/docs/api/plans/object\nexport interface IBillingPlan {\n  id: string;                 // the Stripe plan id\n  nickname: string;\n  currency: string;           // lowercase three-letter ISO currency code\n  interval: string;           // billing frequency - one of day, week, month or year\n  amount: number;             // amount in cents charged at each interval\n  metadata: {\n    family?: string;          // groups plans for filtering by GRIST_STRIPE_FAMILY env variable\n    isStandard: boolean;      // indicates that the plan should be returned by the API to be offered.\n    supportAvailable: boolean;\n    gristProduct: string;     // name of grist product that should be used with this plan.\n    unthrottledApi: boolean;\n    customSubdomain: boolean;\n    workspaces: boolean;\n    maxDocs?: number;         // if given, limit of docs that can be created\n    maxUsersPerDoc?: number;  // if given, limit of users each doc can be shared with\n  };\n  trial_period_days: number|null;  // Number of days in the trial period, or null if there is none.\n  product: string;         // the Stripe product id.\n  active: boolean;\n}\n\nexport interface ILimitTier {\n  name?: string;\n  volume: number;\n  price: number;\n  flatFee: number;\n  type: string;\n  planId: string;\n  interval: string; // probably 'month'|'year';\n}\n\n// Utility type that requires all properties to be non-nullish.\n// type NonNullableProperties<T> = { [P in keyof T]: Required<NonNullable<T[P]>>; };\n\n// Stripe promotion code and coupon information. Used by client to apply signup discounts.\n// For reference: https://stripe.com/docs/api/promotion_codes/object#promotion_code_object-coupon\nexport interface IBillingCoupon {\n  id: string;\n  promotion_code: string;\n  name: string|null;\n  percent_off: number|null;\n  amount_off: number|null;\n}\n\n// Stripe subscription discount information.\n// For reference: https://stripe.com/docs/api/discounts/object\nexport interface IBillingDiscount {\n  name: string|null;\n  percent_off: number|null;\n  amount_off: number|null;\n  end_timestamp_ms: number|null;\n}\n\n\nexport interface IBillingSubscription {\n  // All standard plan options.\n  plans: IBillingPlan[];\n  tiers: ILimitTier[];\n  // Index in the plans array of the plan currently in effect.\n  planIndex: number;\n  // Index in the plans array of the plan to be in effect after the current period end.\n  // Equal to the planIndex when the plan has not been downgraded or cancelled.\n  upcomingPlanIndex: number;\n  // Timestamp in milliseconds indicating when the current plan period ends.\n  // Null if the account is not signed up with Stripe.\n  periodEnd: number|null;\n  // Whether the subscription is in the trial period.\n  isInTrial: boolean;\n  // Value in cents remaining for the current subscription. This indicates the amount that\n  // will be discounted from a subscription upgrade.\n  valueRemaining: number;\n  // The effective tax rate of the customer for the given address.\n  taxRate: number;\n  // The current number of users with whom the paid org is shared.\n  userCount: number;\n  // The next total in cents that Stripe is going to charge (includes tax and discount).\n  nextTotal: number;\n  // Discount information, if any.\n  discount: IBillingDiscount|null;\n  // Last plan we had a subscription for, if any.\n  lastPlanId: string|null;\n  // Whether there is a valid plan in effect.\n  isValidPlan: boolean;\n  // A flag for when all is well with the user's subscription.\n  inGoodStanding: boolean;\n  // Whether there is a paying valid account (even on free plan). It this is set\n  // user needs to upgrade the plan using Stripe Customer portal. In not, we need to\n  // go though checkout process.\n  activeSubscription: boolean;\n  // Whether the plan is billable. Billable plans must be in Stripe.\n  billable: boolean;\n  // Whether we are waiting for upgrade to complete.\n  upgradingPlanIndex: number;\n\n  // Stripe status, documented at https://stripe.com/docs/api/subscriptions/object#subscription_object-status\n  // such as \"active\", \"trialing\" (reflected in isInTrial), \"incomplete\", etc.\n  status?: string;\n  lastInvoiceUrl?: string;    // URL of the Stripe-hosted page with the last invoice.\n  lastChargeError?: string;   // The last charge error, if any, to show in case of a bad status.\n  lastChargeTime?: number;    // The time of the last charge attempt.\n  limit?: ILimit|null;\n}\n\nexport interface ILimit {\n  limitValue: number;\n  currentUsage: number;\n  type: string; // Limit type, for now only assistant is supported.\n  price: number; // If this is 0, it means it is a free plan.\n}\n\nexport interface IBillingOrgSettings {\n  name: string;\n  domain: string;\n}\n\n// Full description of billing account, including nested list of orgs and managers.\nexport interface FullBillingAccount extends BillingAccount {\n  orgs: OrganizationWithoutAccessInfo[];\n  managers: FullUser[];\n}\n\nexport interface BillingAPI {\n  isDomainAvailable(domain: string): Promise<boolean>;\n  getPlans(): Promise<IBillingPlan[]>;\n  getSubscription(): Promise<IBillingSubscription>;\n  getBillingAccount(): Promise<FullBillingAccount>;\n  updateBillingManagers(delta: ManagerDelta): Promise<void>;\n  updateSettings(settings: IBillingOrgSettings): Promise<void>;\n  subscriptionStatus(planId: string): Promise<boolean>;\n  createFreeTeam(name: string, domain: string): Promise<string>;\n  createTeam(name: string, domain: string): Promise<string>;\n  upgrade(): Promise<string>;\n  cancelCurrentPlan(): Promise<void>;\n  downgradePlan(planName: string): Promise<void>;\n  renewPlan(): string;\n  customerPortal(): string;\n  updateAssistantPlan(tier: number): Promise<void>;\n}\n\nexport class BillingAPIImpl extends BaseAPI implements BillingAPI {\n  constructor(private _homeUrl: string, options: IOptions = {}) {\n    super(options);\n  }\n\n  public async isDomainAvailable(domain: string): Promise<boolean> {\n    return this.requestJson(`${this._url}/api/billing/domain`, {\n      method: 'POST',\n      body: JSON.stringify({ domain })\n    });\n  }\n  public async getPlans(): Promise<IBillingPlan[]> {\n    return this.requestJson(`${this._url}/api/billing/plans`, {method: 'GET'});\n  }\n\n  // Returns an IBillingSubscription\n  public async getSubscription(): Promise<IBillingSubscription> {\n    return this.requestJson(`${this._url}/api/billing/subscription`, {method: 'GET'});\n  }\n\n  public async getBillingAccount(): Promise<FullBillingAccount> {\n    return this.requestJson(`${this._url}/api/billing`, {method: 'GET'});\n  }\n\n  public async cancelCurrentPlan() {\n    await this.request(`${this._url}/api/billing/cancel-plan`, {\n      method: 'POST',\n    });\n  }\n\n  public async downgradePlan(planName: string): Promise<void> {\n    await this.request(`${this._url}/api/billing/downgrade-plan`, {\n      method: 'POST',\n      body: JSON.stringify({ planName })\n    });\n  }\n\n  public async updateSettings(settings?: IBillingOrgSettings): Promise<void> {\n    await this.request(`${this._url}/api/billing/settings`, {\n      method: 'POST',\n      body: JSON.stringify({ settings })\n    });\n  }\n\n  public async updateBillingManagers(delta: ManagerDelta): Promise<void> {\n    await this.request(`${this._url}/api/billing/managers`, {\n      method: 'PATCH',\n      body: JSON.stringify({delta})\n    });\n  }\n\n  public async createFreeTeam(name: string, domain: string): Promise<string> {\n    const data = await this.requestJson(`${this._url}/api/billing/team-free`, {\n      method: 'POST',\n      body: JSON.stringify({\n        domain,\n        name\n      })\n    });\n    return data.orgUrl;\n  }\n\n  public async createTeam(name: string, domain: string): Promise<string> {\n    const data = await this.requestJson(`${this._url}/api/billing/team`, {\n      method: 'POST',\n      body: JSON.stringify({\n        domain,\n        name,\n        planType: 'team',\n        next: window.location.href\n      })\n    });\n    return data.checkoutUrl;\n  }\n\n  public async upgrade(): Promise<string> {\n    const data = await this.requestJson(`${this._url}/api/billing/upgrade`, {\n      method: 'POST',\n    });\n    return data.checkoutUrl;\n  }\n\n  public customerPortal(): string {\n    return `${this._url}/api/billing/customer-portal`;\n  }\n\n  public renewPlan(): string {\n    return `${this._url}/api/billing/renew`;\n  }\n\n  public async updateAssistantPlan(tier: number): Promise<void> {\n    await this.request(`${this._url}/api/billing/upgrade-assistant`, {\n      method: 'POST',\n      body: JSON.stringify({ tier })\n    });\n  }\n\n  /**\n   * Checks if current org has active subscription for a Stripe plan.\n   */\n  public async subscriptionStatus(planId: string): Promise<boolean> {\n    const data = await this.requestJson(`${this._url}/api/billing/status`, {\n      method: 'POST',\n      body: JSON.stringify({planId})\n    });\n    return data.active;\n  }\n\n  private get _url(): string {\n    return addCurrentOrgToPath(this._homeUrl);\n  }\n}\n","import {MinimalActionGroup} from 'app/common/ActionGroup';\nimport {TableDataAction} from 'app/common/DocActions';\nimport {FilteredDocUsageSummary} from 'app/common/DocUsage';\nimport {Role} from 'app/common/roles';\nimport {StringUnion} from 'app/common/StringUnion';\nimport {FullUser} from 'app/common/UserAPI';\n\n// Possible flavors of items in a list of documents.\nexport type DocEntryTag = ''|'sample'|'invite'|'shared';\n\nexport const OpenDocMode = StringUnion(\n  'default',  // open doc with user's maximal access level\n  'view',     // open doc limited to view access (if user has at least that level of access)\n  'fork',     // as for 'view', but suggest a fork on any attempt to edit - the client will\n              // enable the editing UI experience and trigger a fork on any edit.\n);\nexport type OpenDocMode = typeof OpenDocMode.type;\n\n/**\n * Represents an entry in the DocList.\n */\nexport interface DocEntry {\n  docId?: string;       // Set for shared docs and invites\n  name: string;\n  mtime?: Date;\n  size?: number;\n  tag: DocEntryTag;\n  senderName?: string;\n  senderEmail?: string;\n}\n\nexport interface DocCreationInfo {\n  id: string;\n  title: string;\n}\n\n/**\n * This documents the members of the structure returned when a local\n * grist document is opened.\n */\nexport interface OpenLocalDocResult {\n  docFD: number;\n  clientId: string;  // the docFD is meaningful only in the context of this session\n  doc: {[tableId: string]: TableDataAction};\n  log: MinimalActionGroup[];\n  recoveryMode?: boolean;\n  userOverride?: UserOverride;\n  docUsage?: FilteredDocUsageSummary;\n}\n\nexport interface UserOverride {\n  user: FullUser|null;\n  access: Role|null;\n}\n\nexport interface DocListAPI {\n  /**\n   * Returns a all known Grist documents and document invites to show in the doc list.\n   */\n  getDocList(): Promise<{docs: DocEntry[], docInvites: DocEntry[]}>;\n\n  /**\n   * Creates a new document, fetches it, and adds a table to it. Returns its name.\n   */\n  createNewDoc(): Promise<string>;\n\n  /**\n   * Makes a copy of the given sample doc. Returns the name of the new document.\n   */\n  importSampleDoc(sampleDocName: string): Promise<string>;\n\n  /**\n   * Processes an upload, containing possibly multiple files, to create a single new document, and\n   * returns the new document's name.\n   */\n  importDoc(uploadId: number): Promise<string>;\n\n  /**\n   * Deletes a Grist document. Returns the name of the deleted document. If `deletePermanently` is\n   * true, the doc is deleted permanently rather than just moved to the trash.\n   */\n  deleteDoc(docName: string, deletePermanently: boolean): Promise<string>;\n\n  /**\n   * Renames a document.\n   */\n  renameDoc(oldName: string, newName: string): Promise<void>;\n\n  /**\n   * Opens a document, loads it, subscribes to its userAction events, and returns its metadata.\n   */\n  openDoc(userDocName: string, openMode?: OpenDocMode,\n          linkParameters?: Record<string, string>): Promise<OpenLocalDocResult>;\n}\n","export interface SnapshotWindow {\n  count: number;\n  unit: 'days' | 'month' | 'year';\n}\n\n// Information about the product associated with an org or orgs.\nexport interface Product {\n  name: string;\n  features: Features;\n}\n\n\n// A product is essentially a list of flags and limits that we may enforce/support.\nexport interface Features {\n  vanityDomain?: boolean;   // are user-selected domains allowed (unenforced) (default: true)\n\n  workspaces?: boolean;     // are workspaces shown in web interface (default: true)\n                            // (this was intended as something we can turn off to shut down\n                            // web access to content while leaving access to billing)\n\n  /**\n   * Some optional limits.  Since orgs can change plans, limits will typically be checked\n   * at the point of creation.  E.g. adding someone new to a document, or creating a\n   * new document.  If, after an operation, the limit would be exceeded, that operation\n   * is denied.  That means it is possible to exceed limits if the limits were not in\n   * place when shares/docs were originally being added.  The action that would need\n   * to be taken when infringement is pre-existing is not so obvious.\n   */\n\n  maxSharesPerDoc?: number; // Maximum number of users that can be granted access to a\n                            // particular doc.  Doesn't count users granted access at\n                            // workspace or organization level.  Doesn't count billable\n                            // users if applicable (default: unlimited)\n\n  maxSharesPerDocPerRole?: {[role: string]: number};  // As maxSharesPerDoc, but\n                            // for specific roles.  Roles are named as in app/common/roles.\n                            // Applied independently to maxSharesPerDoc.\n                            // (default: unlimited)\n  maxSharesPerWorkspace?: number;  // Maximum number of users that can be granted access to\n                            // a particular workspace.  Doesn't count users granted access\n                            // at organizational level, or billable users (default: unlimited)\n\n  maxDocsPerOrg?: number;   // Maximum number of documents allowed per org.\n                            // (default: unlimited)\n  maxWorkspacesPerOrg?: number;   // Maximum number of workspaces allowed per org.\n                            // (default: unlimited)\n\n  readOnlyDocs?: boolean;   // if set, docs can only be read, not written.\n\n  snapshotWindow?: SnapshotWindow;  // if set, controls how far back snapshots are kept.\n\n  baseMaxRowsPerDocument?: number;  // If set, establishes a default maximum on the\n                                 // number of rows (total) in a single document.\n                                 // Actual max for a document may be higher.\n  baseMaxApiUnitsPerDocumentPerDay?: number;  // Similar for api calls.\n  baseMaxDataSizePerDocument?: number;  // Similar maximum for number of bytes of 'normal' data in a document\n  baseMaxAttachmentsBytesPerDocument?: number;  // Similar maximum for total number of bytes used\n                                                // for attached files in a document\n\n  gracePeriodDays?: number;  // Duration of the grace period in days, before entering delete-only mode\n\n  baseMaxAssistantCalls?: number; // Maximum number of AI assistant calls. Defaults to 0 if not set, use -1 to indicate\n                                  // unbound limit. This is total limit, not per month or per day, it is used as a seed\n                                  // value for the limits table. To create a per-month limit, there must be a separate\n                                  // task that resets the usage in the limits table.\n}\n\n// Check whether it is possible to add members at the org level.  There's no flag\n// for this right now, it isn't enforced at the API level, it is just a bluff.\n// For now, when maxWorkspacesPerOrg is 1, we should assume members can't be added\n// to org (even though this is not enforced).\nexport function canAddOrgMembers(features: Features): boolean {\n  return features.maxWorkspacesPerOrg !== 1;\n}\n\n\nexport const PERSONAL_LEGACY_PLAN = 'starter';\nexport const PERSONAL_FREE_PLAN = 'personalFree';\nexport const TEAM_FREE_PLAN = 'teamFree';\nexport const TEAM_PLAN = 'team';\n\nexport const displayPlanName: { [key: string]: string } = {\n  [PERSONAL_LEGACY_PLAN]: 'Free Personal (Legacy)',\n  [PERSONAL_FREE_PLAN]: 'Free Personal',\n  [TEAM_FREE_PLAN]: 'Team Free',\n  [TEAM_PLAN]: 'Pro'\n} as const;\n\n// Returns true if `planName` is for a personal product.\nexport function isPersonalPlan(planName: string): boolean {\n  return isFreePersonalPlan(planName);\n}\n\n// Returns true if `planName` is for a free personal product.\nexport function isFreePersonalPlan(planName: string): boolean {\n  return [PERSONAL_LEGACY_PLAN, PERSONAL_FREE_PLAN].includes(planName);\n}\n\n// Returns true if `planName` is for a legacy product.\nexport function isLegacyPlan(planName: string): boolean {\n  return isFreeLegacyPlan(planName);\n}\n\n// Returns true if `planName` is for a free legacy product.\nexport function isFreeLegacyPlan(planName: string): boolean {\n  return [PERSONAL_LEGACY_PLAN].includes(planName);\n}\n\n// Returns true if `planName` is for a team product.\nexport function isTeamPlan(planName: string): boolean {\n  return !isPersonalPlan(planName);\n}\n\n// Returns true if `planName` is for a free team product.\nexport function isFreeTeamPlan(planName: string): boolean {\n  return [TEAM_FREE_PLAN].includes(planName);\n}\n\n// Returns true if `planName` is for a free product.\nexport function isFreePlan(planName: string): boolean {\n  return (\n    isFreePersonalPlan(planName) ||\n    isFreeTeamPlan(planName) ||\n    isFreeLegacyPlan(planName) ||\n    planName === 'Free'\n  );\n}\n","/**\n * InactivityTimer allows to set a function that executes after a certain time of\n * inactivity. Activities can be of two kinds: synchronous or asynchronous. Asynchronous activities,\n * are handle with the `disableUntiFinish` method that takes in a Promise and makes sure that the\n * timer does not start before the promise resolves. Synchronous activities are monitored with the\n * `ping` method which resets the timer if called during inactivity.\n *\n * Timer won't start before any activity happens, but you may simply call ping() after construction\n * to start it. After cb is called, timer is disabled but enabled again if there is more activity.\n *\n * Example usage: InactivityTimer is used internally for implementing the plugins' component\n * deactivation after a certain time of inactivity.\n *\n */\n\nexport class InactivityTimer {\n\n  private _timeout?: NodeJS.Timer | null;\n  private _counter: number = 0;\n  private _enabled: boolean = true;\n\n  constructor(private _callback: () => void, private _delay: number) {}\n\n  // Returns the delay used by InactivityTimer, in ms.\n  public getDelay(): number {\n    return this._delay;\n  }\n\n  // Sets a different delay to use, in ms.\n  public setDelay(delayMs: number): void {\n    this._delay = delayMs;\n    this.ping();\n  }\n\n  /**\n   * Enable the InactivityTimer and schedule the callback.\n   */\n  public enable(): void {\n    this._enabled = true;\n    this.ping();\n  }\n\n  /**\n   * Clears the timeout and prevents the callback from being called until enable() is called.\n   */\n  public disable(): void {\n    this._enabled = false;\n    this._clearTimeout();\n  }\n\n  /**\n   * Returns whether the InactivityTimer is enabled. If not, the callback will not be scheduled.\n   */\n  public isEnabled(): boolean {\n    return this._enabled;\n  }\n\n  /**\n   * Whether the callback is currently scheduled, and would trigger if there is no activity and if\n   * it's not disabled before it triggers.\n   */\n  public isScheduled(): boolean {\n    return Boolean(this._timeout);\n  }\n\n  /**\n   * Resets the timer if called during inactivity.\n   */\n  public ping() {\n    if (!this._counter && this._enabled) {\n      this._setTimeout();\n    }\n  }\n\n  /**\n   * The `disableUntilFinish` method takes in a promise and makes sure the timer won't start before\n   * it resolves. It returns a promise that resolves to the same object.\n   */\n  public async disableUntilFinish<T>(promise: Promise<T>): Promise<T> {\n    this._beginActivity();\n    try {\n      return await promise;\n    } finally {\n      this._endActivity();\n    }\n  }\n\n  private _beginActivity() {\n    this._counter++;\n    this._clearTimeout();\n  }\n\n  private _endActivity() {\n    this._counter = Math.max(this._counter - 1, 0);\n    this.ping();\n  }\n\n  private _clearTimeout() {\n    if (this._timeout) {\n      clearTimeout(this._timeout);\n      this._timeout = null;\n    }\n  }\n\n  private _setTimeout() {\n    this._clearTimeout();\n    this._timeout = setTimeout(() => this._onTimeoutTriggered(), this._delay);\n  }\n\n  private _onTimeoutTriggered() {\n    this._clearTimeout();\n    // _counter is set to 0, even if there's no reason why it should be any thing else.\n    this._counter = 0;\n    this._callback();\n  }\n}\n","import {BaseAPI, IOptions} from 'app/common/BaseAPI';\nimport {InstallPrefs} from 'app/common/Install';\nimport {TelemetryLevel} from 'app/common/Telemetry';\nimport {addCurrentOrgToPath} from 'app/common/urlUtils';\n\nexport const installPropertyKeys = ['prefs'];\n\nexport interface InstallProperties {\n  prefs: InstallPrefs;\n}\n\nexport interface InstallPrefsWithSources {\n  telemetry: {\n    telemetryLevel: PrefWithSource<TelemetryLevel>;\n  },\n}\n\nexport type TelemetryPrefsWithSources = InstallPrefsWithSources['telemetry'];\n\nexport interface PrefWithSource<T> {\n  value: T;\n  source: PrefSource;\n}\n\nexport type PrefSource = 'environment-variable' | 'preferences';\n\nexport interface InstallAPI {\n  getInstallPrefs(): Promise<InstallPrefsWithSources>;\n  updateInstallPrefs(prefs: Partial<InstallPrefs>): Promise<void>;\n}\n\nexport class InstallAPIImpl extends BaseAPI implements InstallAPI {\n  constructor(private _homeUrl: string, options: IOptions = {}) {\n    super(options);\n  }\n\n  public async getInstallPrefs(): Promise<InstallPrefsWithSources> {\n    return this.requestJson(`${this._url}/api/install/prefs`, {method: 'GET'});\n  }\n\n  public async updateInstallPrefs(prefs: Partial<InstallPrefs>): Promise<void> {\n    await this.request(`${this._url}/api/install/prefs`, {\n      method: 'PATCH',\n      body: JSON.stringify({...prefs}),\n    });\n  }\n\n  private get _url(): string {\n    return addCurrentOrgToPath(this._homeUrl);\n  }\n}\n","// This file was generated by core/buildtools/generate_locale_list.js at 2021-09-23T08:32:25.517Z\nexport const localeCodes = [\n  \"af-ZA\", \"ak-GH\", \"am-ET\", \"ar-AE\", \"ar-BH\", \"ar-DZ\", \"ar-EG\",\n  \"ar-IN\", \"ar-IQ\", \"ar-JO\", \"ar-KW\", \"ar-LB\", \"ar-LY\", \"ar-MA\",\n  \"ar-OM\", \"ar-QA\", \"ar-SA\", \"ar-SD\", \"ar-SS\", \"ar-SY\", \"ar-TN\",\n  \"ar-YE\", \"as-IN\", \"ast-ES\", \"az-AZ\", \"az-IR\", \"be-BY\", \"bem-ZM\",\n  \"bg-BG\", \"bn-BD\", \"bn-IN\", \"bo-CN\", \"bo-IN\", \"br-FR\", \"brx-IN\",\n  \"bs-BA\", \"ca-AD\", \"ca-ES\", \"ca-FR\", \"ca-IT\", \"ce-RU\", \"chr-US\",\n  \"ckb-IQ\", \"cs-CZ\", \"cy-GB\", \"da-DK\", \"de-AT\", \"de-BE\", \"de-CH\",\n  \"de-DE\", \"de-IT\", \"de-LI\", \"de-LU\", \"doi-IN\", \"dz-BT\", \"el-CY\",\n  \"el-GR\", \"en-AG\", \"en-AU\", \"en-BW\", \"en-CA\", \"en-DK\", \"en-GB\",\n  \"en-HK\", \"en-IE\", \"en-IL\", \"en-IN\", \"en-NG\", \"en-NZ\", \"en-PH\",\n  \"en-SC\", \"en-SG\", \"en-US\", \"en-ZA\", \"en-ZM\", \"en-ZW\", \"es-AR\",\n  \"es-BO\", \"es-CL\", \"es-CO\", \"es-CR\", \"es-CU\", \"es-DO\", \"es-EC\",\n  \"es-ES\", \"es-GT\", \"es-HN\", \"es-MX\", \"es-NI\", \"es-PA\", \"es-PE\",\n  \"es-PR\", \"es-PY\", \"es-SV\", \"es-US\", \"es-UY\", \"es-VE\", \"et-EE\",\n  \"eu-ES\", \"fa-IR\", \"ff-SN\", \"fi-FI\", \"fil-PH\", \"fo-FO\", \"fr-BE\",\n  \"fr-CA\", \"fr-CH\", \"fr-FR\", \"fr-LU\", \"fur-IT\", \"fy-DE\", \"fy-NL\",\n  \"ga-IE\", \"gd-GB\", \"gl-ES\", \"gu-IN\", \"gv-GB\", \"ha-NG\", \"he-IL\",\n  \"hi-IN\", \"hr-HR\", \"hsb-DE\", \"hu-HU\", \"hy-AM\", \"ia-FR\", \"id-ID\",\n  \"ig-NG\", \"is-IS\", \"it-CH\", \"it-IT\", \"ja-JP\", \"kab-DZ\", \"ka-GE\",\n  \"kk-KZ\", \"kl-GL\", \"km-KH\", \"kn-IN\", \"kok-IN\", \"ko-KR\", \"ks-IN\",\n  \"ku-TR\", \"kw-GB\", \"ky-KG\", \"lb-LU\", \"lg-UG\", \"ln-CD\", \"lo-LA\",\n  \"lt-LT\", \"lv-LV\", \"mai-IN\", \"mai-NP\", \"mfe-MU\", \"mg-MG\", \"mi-NZ\",\n  \"mk-MK\", \"ml-IN\", \"mni-IN\", \"mn-MN\", \"mr-IN\", \"ms-MY\", \"mt-MT\",\n  \"my-MM\", \"ne-NP\", \"nl-AW\", \"nl-BE\", \"nl-NL\", \"nn-NO\", \"om-ET\",\n  \"om-KE\", \"or-IN\", \"os-RU\", \"pa-IN\", \"pa-PK\", \"pl-PL\", \"ps-AF\",\n  \"pt-BR\", \"pt-PT\", \"ro-RO\", \"ru-RU\", \"ru-UA\", \"rw-RW\", \"sa-IN\",\n  \"sat-IN\", \"sd-IN\", \"se-NO\", \"si-LK\", \"sk-SK\", \"sl-SI\", \"so-DJ\",\n  \"so-ET\", \"so-KE\", \"so-SO\", \"sq-AL\", \"sq-MK\", \"sr-ME\", \"sr-RS\",\n  \"sv-FI\", \"sv-SE\", \"sw-KE\", \"sw-TZ\", \"ta-IN\", \"ta-LK\", \"te-IN\",\n  \"tg-TJ\", \"th-TH\", \"ti-ER\", \"ti-ET\", \"tk-TM\", \"to-TO\", \"tr-CY\",\n  \"tr-TR\", \"tt-RU\", \"ug-CN\", \"uk-UA\", \"ur-IN\", \"ur-PK\", \"uz-UZ\",\n  \"vi-VN\", \"wae-CH\", \"wo-SN\", \"xh-ZA\", \"yi-US\", \"yo-NG\", \"yue-HK\",\n  \"zh-CN\", \"zh-HK\", \"zh-SG\", \"zh-TW\", \"zu-ZA\"\n];\n","import * as LocaleCurrencyMap from 'locale-currency/map';\nimport * as LocaleCurrency from 'locale-currency';\nimport {nativeCompare} from 'app/common/gutil';\nimport {localeCodes} from \"app/common/LocaleCodes\";\n\nconst DEFAULT_CURRENCY = \"USD\";\n\nexport interface Locale {\n  name: string;\n  code: string;\n}\n\nexport let locales: Readonly<Locale[]>;\n\n// Intl.DisplayNames is only supported on recent browsers, so proceed with caution.\ntry {\n  const regionDisplay = new Intl.DisplayNames('en', {type: 'region'});\n  const languageDisplay = new Intl.DisplayNames('en', {type: 'language'});\n  const display = (code: string) => {\n    try {\n      const locale = new Intl.Locale(code);\n      const regionName = regionDisplay.of(locale.region!);\n      const languageName = languageDisplay.of(locale.language);\n      return `${regionName} (${languageName})`;\n    } catch (ex) {\n      return code;\n    }\n  };\n  // Leave only those that are supported by current system (can be translated to human readable form).\n  // Though, this file is in common, it is safe to filter by current system\n  // as the list should be already filtered by codes that are supported by the backend.\n  locales = Intl.DisplayNames.supportedLocalesOf(localeCodes).map(code => {\n    return {name: display(code), code};\n  });\n} catch {\n  // Fall back to using the locale code as the display name.\n  locales = localeCodes.map(code => ({name: code, code}));\n}\n\nexport interface Currency {\n  name: string;\n  code: string;\n}\n\nexport let currencies: Readonly<Currency[]>;\n\n// locale-currency package doesn't have South Sudanese pound currency or a default value for Kosovo\nLocaleCurrencyMap[\"SS\"] = \"SSP\";\nLocaleCurrencyMap[\"XK\"] = \"EUR\";\nconst currenciesCodes = Object.values(LocaleCurrencyMap);\nexport function getCurrency(code: string) {\n  const currency = LocaleCurrency.getCurrency(code ?? 'en-US');\n  // Fallback to USD\n  return currency ?? DEFAULT_CURRENCY;\n}\n\n// Intl.DisplayNames is only supported on recent browsers, so proceed with caution.\ntry {\n  const currencyDisplay = new Intl.DisplayNames('en', {type: 'currency'});\n  currencies = [...new Set(currenciesCodes)].map(code => {\n    return {name: currencyDisplay.of(code)!, code};\n  });\n} catch {\n  // Fall back to using the currency code as the display name.\n  currencies = [...new Set(currenciesCodes)].map(code => {\n    return {name: code, code};\n  });\n}\n\ncurrencies = [...currencies].sort((a, b) => nativeCompare(a.code, b.code));\n\n\nexport function getCountryCode(locale: string) {\n  // We have some defaults defined.\n  if (locale === 'en') { return 'US'; }\n  let countryCode = locale.split(/[-_]/)[1];\n  if (countryCode) { return countryCode.toUpperCase(); }\n\n  // Some defaults that we support and can't be read from language code.\n  countryCode = {\n    'uk': 'UA', // Ukraine\n  }[locale] ?? locale.toUpperCase();\n\n  // Test if we can use language as a country code.\n  if (localeCodes.map(code => code.split(/[-_]/)[1]).includes(countryCode)) {\n    return countryCode;\n  }\n  return null;\n}\n","import {StringUnion} from 'app/common/StringUnion';\nimport {ThemePrefs} from 'app/common/ThemePrefs';\n\nexport const SortPref = StringUnion(\"name\", \"date\");\nexport type SortPref = typeof SortPref.type;\n\nexport const ViewPref = StringUnion(\"list\", \"icons\");\nexport type ViewPref = typeof ViewPref.type;\n\n// A collection of preferences related to a user or org (or combination).\nexport interface Prefs {\n  // A dummy field used only in tests.\n  placeholder?: string;\n}\n\n// A collection of preferences related to a user.\nexport interface UserPrefs extends Prefs {\n  // Whether to ask the user to fill out a form about their use-case, on opening the DocMenu page.\n  // Set to true on first login, then reset when the form is closed, so that it only shows once.\n  showNewUserQuestions?: boolean;\n  // Whether to record a new sign-up event via Google Tag Manager. Set to true on first login, then\n  // reset on first page load (after the event is sent), so that it's only recorded once.\n  recordSignUpEvent?: boolean;\n  // Theme-related preferences.\n  theme?: ThemePrefs;\n  // List of deprecated warnings user have seen. Kept for historical reasons as some users have them in their prefs.\n  seenDeprecatedWarnings?: DeprecationWarning[];\n  // List of dismissedPopups user have seen.\n  dismissedPopups?: DismissedPopup[];\n  // Behavioral prompt preferences.\n  behavioralPrompts?: BehavioralPromptPrefs;\n  // Welcome popups a user has dismissed.\n  dismissedWelcomePopups?: DismissedReminder[];\n  // Localization support.\n  locale?: string;\n}\n\n// A collection of preferences related to a combination of user and org.\nexport interface UserOrgPrefs extends Prefs {\n  docMenuSort?: SortPref;\n  docMenuView?: ViewPref;\n\n  // List of example docs that the user has seen and dismissed the welcome card for.\n  // The numbers are the `id` from IExampleInfo in app/client/ui/ExampleInfo.\n  // By living in UserOrgPrefs, this applies only to the examples-containing org.\n  seenExamples?: number[];\n\n  // Whether the user should see the onboarding tour of Grist. False by default, since existing\n  // users should not see it. New users get this set to true when the user is created. This\n  // applies to the personal org only; the tour is currently only shown there.\n  showGristTour?: boolean;\n\n  // List of document IDs where the user has seen and dismissed the document tour.\n  seenDocTours?: string[];\n}\n\nexport type OrgPrefs = Prefs;\n\n/**\n * List of all deprecated warnings that user can see and dismiss.\n * All of them are marked as seen for new users in FlexServer.ts (welcomeNewUser handler).\n * For now we use then to mark which keyboard shortcuts are deprecated, so those keys\n * are also used in commandList.js.\n *\n * Source code for this feature was deprecated itself :). Here is a link to the latest revision:\n * https://github.com/gristlabs/grist-core/blob/ec20e7fb68786e10979f238c16c432c50a9a7464/app/client/components/DeprecatedCommands.ts\n */\nexport const DeprecationWarning = StringUnion(\n  // Those are not checked anymore. They are kept here for historical reasons (as some users have them marked as seen\n  // so they should not be reused).\n  // 'deprecatedInsertRowBefore',\n  // 'deprecatedInsertRecordAfter',\n  // 'deprecatedDeleteRecords',\n);\nexport type DeprecationWarning = typeof DeprecationWarning.type;\n\nexport const BehavioralPrompt = StringUnion(\n  'referenceColumns',\n  'referenceColumnsConfig',\n  'rawDataPage',\n  'accessRules',\n  'filterButtons',\n  'nestedFiltering',\n  'pageWidgetPicker',\n  'pageWidgetPickerSelectBy',\n  'editCardLayout',\n  'addNew',\n  'rickRow',\n  'customURL',\n);\nexport type BehavioralPrompt = typeof BehavioralPrompt.type;\n\nexport interface BehavioralPromptPrefs {\n  /** Defaults to false. */\n  dontShowTips: boolean;\n  /** List of tips that have been dismissed. */\n  dismissedTips: BehavioralPrompt[];\n}\n\n/**\n * List of all popups that user can see and dismiss\n */\nexport const DismissedPopup = StringUnion(\n  'deleteRecords', // confirmation for deleting records keyboard shortcut,\n  'deleteFields',  // confirmation for deleting columns keyboard shortcut,\n  'tutorialFirstCard', // first card of the tutorial,\n  'formulaHelpInfo', // formula help info shown in the popup editor,\n  'formulaAssistantInfo', // formula assistant info shown in the popup editor,\n  'supportGrist', // nudge to opt in to telemetry,\n);\nexport type DismissedPopup = typeof DismissedPopup.type;\n\nexport const WelcomePopup = StringUnion(\n  'coachingCall',\n);\nexport type WelcomePopup = typeof WelcomePopup.type;\n\nexport interface DismissedReminder {\n  /** The name of the popup. */\n  id: WelcomePopup;\n  /** Unix timestamp in ms when the popup was last dismissed. */\n  lastDismissedAt: number;\n  /** If non-null, Unix timestamp in ms when the popup will reappear. */\n  nextAppearanceAt: number | null;\n  /**  The number of times this popup has been dismissed. */\n  timesDismissed: number;\n}\n","/**\n * RefCountMap maintains a reference-counted key-value map. Its sole method is use(key) which\n * increments the counter for the key, and returns a disposable object which exposes the value via\n * the get() method, and decrements the counter back on disposal.\n *\n * The value is constructed on first reference using options.create(key) callback. After the last\n * reference is gone, and an optional gracePeriodMs elapsed, the value is cleaned up using\n * options.dispose(key, value) callback.\n */\nimport {IDisposable} from 'grainjs';\n\nexport interface IRefCountSub<Value> extends IDisposable {\n  get(): Value;\n  dispose(): void;\n}\n\nexport class RefCountMap<Key, Value> implements IDisposable {\n  private _map: Map<Key, RefCountValue<Value>> = new Map();\n  private _createKey: (key: Key) => Value;\n  private _disposeKey: (key: Key, value: Value) => void;\n  private _gracePeriodMs: number;\n\n  /**\n   * Values are created using options.create(key) on first use. They are disposed after last use,\n   * using options.dispose(key, value). If options.gracePeriodMs is greater than zero, values\n   * stick around for this long after last use.\n   */\n  constructor(options: {\n    create: (key: Key) => Value,\n    dispose: (key: Key, value: Value) => void,\n    gracePeriodMs: number,\n  }) {\n    this._createKey = options.create;\n    this._disposeKey = options.dispose;\n    this._gracePeriodMs = options.gracePeriodMs;\n  }\n\n  /**\n   * Use a value, constructing it if needed, or only incrementing the reference count if this key\n   * is already in the map. The returned subscription object has a get() method which returns the\n   * actual value, and a dispose() method, which must be called to release this subscription (i.e.\n   * decrement back the reference count).\n   */\n  public use(key: Key): IRefCountSub<Value> {\n    const rcValue = this._useKey(key);\n    return {\n      get: () => rcValue.value,\n      dispose: () => this._releaseKey(rcValue, key),\n    };\n  }\n\n  /**\n   * Return the value for the key, if one is set, or undefined otherwise, without touching\n   * reference counts.\n   */\n  public get(key: Key): Value|undefined {\n    return this._map.get(key)?.value;\n  }\n\n  /**\n   * Purge a key by immediately removing it from the map. Disposing the remaining IRefCountSub\n   * values will be no-ops.\n   */\n  public purgeKey(key: Key): void {\n    // Note that we must be careful that disposing stale IRefCountSub values is a no-op even when\n    // the same key gets re-added to the map after purgeKey.\n    this._doDisposeKey(key);\n  }\n\n  /**\n   * Disposing clears the map immediately, and calls options.dispose on all values.\n   */\n  public dispose(): void {\n    // Note that a clear() method like this one would not be OK. If the map were to continue being\n    // used after clear(), subscriptions created before clear() would wreak havoc when disposed.\n    for (const [key, r] of this._map) {\n      r.count = 0;\n      this._disposeKey.call(null, key, r.value);\n    }\n    this._map.clear();\n  }\n\n  // For testing: set gracePeriodMs, returning the previous value.\n  public testSetGracePeriodMs(ms: number): number {\n    const prev = this._gracePeriodMs;\n    this._gracePeriodMs = ms;\n    return prev;\n  }\n\n  private _useKey(key: Key): RefCountValue<Value> {\n    const r = this._map.get(key);\n    if (r) {\n      r.count += 1;\n      r.unsetTimeout();\n      return r;\n    }\n    const value = this._createKey.call(null, key);\n    const rcValue = new RefCountValue(value);\n    this._map.set(key, rcValue);\n    return rcValue;\n  }\n\n  private _releaseKey(r: RefCountValue<Value>, key: Key): void {\n    if (r.count > 0) {\n      r.count -= 1;\n      if (r.count === 0) {\n        if (this._gracePeriodMs > 0) {\n          if (!r.disposeTimeout) {\n            r.disposeTimeout = setTimeout(() => this._doDisposeKey(key), this._gracePeriodMs);\n          }\n        } else {\n          this._doDisposeKey(key);\n        }\n      }\n    }\n  }\n\n  private _doDisposeKey(key: Key): void {\n    const r = this._map.get(key);\n    if (r) {\n      this._map.delete(key);\n      r.count = 0;\n      r.unsetTimeout();   // Important, to avoid timeout triggering after the same key is re-added.\n      this._disposeKey.call(null, key, r.value);\n    }\n  }\n}\n\n/**\n * This is an implementation detail of the RefCountMap, which represents a single item.\n */\nclass RefCountValue<Value> {\n  public count: number = 1;\n  public disposeTimeout?: ReturnType<typeof setTimeout> = undefined;\n  constructor(public value: Value) {}\n\n  public unsetTimeout() {\n    if (this.disposeTimeout) {\n      clearTimeout(this.disposeTimeout);\n      this.disposeTimeout = undefined;\n    }\n  }\n}\n","/**\n * TypeScript will infer a string union type from the literal values passed to\n * this function. Without `extends string`, it would instead generalize them\n * to the common string type.\n *\n * Example definition:\n * const Race = StringUnion(\n *   \"orc\",\n *   \"human\",\n *   \"night elf\",\n *   \"undead\",\n * );\n * type Race = typeof Race.type;\n *\n * For more details, see:\n * https://stackoverflow.com/questions/36836011/checking-validity-of-string\n *   -literal-union-type-at-runtime?answertab=active#tab-top\n */\nexport const StringUnion = <UnionType extends string>(...values: UnionType[]) => {\n  Object.freeze(values);\n  const valueSet: Set<string> = new Set(values);\n\n  const guard = (value: string): value is UnionType => {\n    return valueSet.has(value);\n  };\n\n  const check = (value: string): UnionType => {\n    if (!guard(value)) {\n      const actual = JSON.stringify(value);\n      const expected = values.map(s => JSON.stringify(s)).join(' | ');\n      throw new TypeError(`Value '${actual}' is not assignable to type '${expected}'.`);\n    }\n    return value;\n  };\n\n  const checkAll = (arr: string[]): UnionType[] => {\n    return arr.map(check);\n  };\n\n  /**\n   * StringUnion.parse(value) returns value when it's valid, and undefined otherwise.\n   */\n  const parse = (value: string|null|undefined): UnionType|undefined => {\n    return value != null && guard(value) ? value : undefined;\n  };\n\n  const unionNamespace = {guard, check, parse, values, checkAll};\n  return Object.freeze(unionNamespace as typeof unionNamespace & {type: UnionType});\n};\n","import {StringUnion} from 'app/common/StringUnion';\n\n/**\n * Telemetry levels, in increasing order of data collected.\n */\nexport enum Level {\n  off = 0,\n  limited = 1,\n  full = 2,\n}\n\n/**\n * A set of contracts that all telemetry events must follow prior to being\n * logged.\n *\n * Currently, this includes meeting minimum telemetry levels for events\n * and their metadata, and passing in the correct data type for the value of\n * each metadata property.\n *\n * The `minimumTelemetryLevel` defined at the event level will also be applied\n * to all metadata properties of an event, and can be overridden at the metadata\n * level.\n */\nexport const TelemetryContracts: TelemetryContracts = {\n  apiUsage: {\n    description: 'Triggered when an HTTP request with an API key is made.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      method: {\n        description: 'The HTTP request method (e.g. GET, POST, PUT).',\n        dataType: 'string',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n      },\n      userAgent: {\n        description: 'The User-Agent HTTP request header.',\n        dataType: 'string',\n      },\n    },\n  },\n  assistantOpen: {\n    description: 'Triggered when the AI Assistant is first opened.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'short',\n    metadataContracts: {\n      docIdDigest: {\n        description: 'A hash of the doc id.',\n        dataType: 'string',\n      },\n      conversationId: {\n        description: 'A random identifier for the current conversation with the assistant.',\n        dataType: 'string',\n      },\n      context: {\n        description: 'The type of assistant (e.g. \"formula\"), table id, and column id.',\n        dataType: 'object',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n      },\n    },\n  },\n  assistantSend: {\n    description: 'Triggered when a message is sent to the AI Assistant.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'short',\n    metadataContracts: {\n      docIdDigest: {\n        description: 'A hash of the doc id.',\n        dataType: 'string',\n      },\n      siteId: {\n        description: 'The id of the site.',\n        dataType: 'number',\n      },\n      siteType: {\n        description: 'The type of the site.',\n        dataType: 'string',\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n      },\n      access: {\n        description: 'The document access level of the user that triggered this event.',\n        dataType: 'string',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n      },\n      conversationId: {\n        description: 'A random identifier for the current conversation with the assistant.',\n        dataType: 'string',\n      },\n      context: {\n        description: 'The type of assistant (e.g. \"formula\"), table id, and column id.',\n        dataType: 'object',\n      },\n      prompt: {\n        description: 'The role (\"user\" or \"system\"), content, and index of the message sent to the AI Assistant.',\n        dataType: 'object',\n      },\n    },\n  },\n  assistantReceive: {\n    description: 'Triggered when a message is received from the AI Assistant is received.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'short',\n    metadataContracts: {\n      docIdDigest: {\n        description: 'A hash of the doc id.',\n        dataType: 'string',\n      },\n      siteId: {\n        description: 'The id of the site.',\n        dataType: 'number',\n      },\n      siteType: {\n        description: 'The type of the site.',\n        dataType: 'string',\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n      },\n      access: {\n        description: 'The document access level of the user that triggered this event.',\n        dataType: 'string',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n      },\n      conversationId: {\n        description: 'A random identifier for the current conversation with the assistant.',\n        dataType: 'string',\n      },\n      context: {\n        description: 'The type of assistant (e.g. \"formula\"), table id, and column id.',\n        dataType: 'object',\n      },\n      message: {\n        description: 'The content and index of the message received from the AI Assistant.',\n        dataType: 'object',\n      },\n      suggestedFormula: {\n        description: 'The formula suggested by the AI Assistant, if present.',\n        dataType: 'string',\n      },\n    },\n  },\n  assistantSave: {\n    description: 'Triggered when changes in the expanded formula editor are saved after the AI Assistant ' +\n      'was opened.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'short',\n    metadataContracts: {\n      docIdDigest: {\n        description: 'A hash of the doc id.',\n        dataType: 'string',\n      },\n      conversationId: {\n        description: 'A random identifier for the current conversation with the assistant.',\n        dataType: 'string',\n      },\n      context: {\n        description: 'The type of assistant (e.g. \"formula\"), table id, and column id.',\n        dataType: 'object',\n      },\n      newFormula: {\n        description: 'The formula that was saved.',\n        dataType: 'string',\n      },\n      oldFormula: {\n        description: 'The formula that was overwritten.',\n        dataType: 'string',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n      },\n    },\n  },\n  assistantCancel: {\n    description: 'Triggered when changes in the expanded formula editor are discarded after the AI Assistant ' +\n      'was opened.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'short',\n    metadataContracts: {\n      docIdDigest: {\n        description: 'A hash of the doc id.',\n        dataType: 'string',\n      },\n      conversationId: {\n        description: 'A random identifier for the current conversation with the assistant.',\n        dataType: 'string',\n      },\n      context: {\n        description: 'The type of assistant (e.g. \"formula\"), table id, and column id.',\n        dataType: 'object',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n      },\n    },\n  },\n  assistantClearConversation: {\n    description: 'Triggered when a conversation in the AI Assistant is cleared.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'short',\n    metadataContracts: {\n      docIdDigest: {\n        description: 'A hash of the doc id.',\n        dataType: 'string',\n      },\n      conversationId: {\n        description: 'A random identifier for the current conversation with the assistant.',\n        dataType: 'string',\n      },\n      context: {\n        description: 'The type of assistant (e.g. \"formula\"), table id, and column id.',\n        dataType: 'object',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n      },\n    },\n  },\n  assistantClose: {\n    description: 'Triggered when a formula is saved or discarded after the AI Assistant was opened.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      docIdDigest: {\n        description: 'A hash of the doc id.',\n        dataType: 'string',\n      },\n      conversationId: {\n        description: 'A random identifier for the current conversation with the assistant.',\n        dataType: 'string',\n      },\n      suggestionApplied: {\n        description: 'True if a suggested formula from one of the received messages was applied.',\n        dataType: 'boolean',\n      },\n      conversationLength: {\n        description: 'The number of messages sent and received since opening the AI Assistant.',\n        dataType: 'number',\n      },\n      conversationHistoryLength: {\n        description: \"The number of messages in the conversation's history. May be less than conversationLength \"\n          + \"if the conversation history was cleared in the same session.\",\n        dataType: 'number',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n      },\n    },\n  },\n  beaconOpen: {\n    description: 'Triggered when HelpScout Beacon is opened.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n      },\n    },\n  },\n  beaconArticleViewed: {\n    description: 'Triggered when an article is opened in HelpScout Beacon.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      articleId: {\n        description: 'The id of the article.',\n        dataType: 'string',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n      },\n    },\n  },\n  beaconEmailSent: {\n    description: 'Triggered when an email is sent in HelpScout Beacon.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n      },\n    },\n  },\n  beaconSearch: {\n    description: 'Triggered when a search is made in HelpScout Beacon.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      searchQuery: {\n        description: 'The search query.',\n        dataType: 'string',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n      },\n    },\n  },\n  documentForked: {\n    description: 'Triggered when a document is forked.',\n    minimumTelemetryLevel: Level.limited,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      docIdDigest: {\n        description: 'A hash of the doc id.',\n        dataType: 'string',\n      },\n      siteId: {\n        description: 'The id of the site containing the forked document.',\n        dataType: 'number',\n        minimumTelemetryLevel: Level.full,\n      },\n      siteType: {\n        description: 'The type of the site.',\n        dataType: 'string',\n        minimumTelemetryLevel: Level.full,\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n        minimumTelemetryLevel: Level.full,\n      },\n      access: {\n        description: 'The document access level of the user that triggered this event.',\n        dataType: 'string',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n        minimumTelemetryLevel: Level.full,\n      },\n      forkIdDigest: {\n        description: 'A hash of the fork id.',\n        dataType: 'string',\n      },\n      forkDocIdDigest: {\n        description: 'A hash of the full id of the fork, including the trunk id and fork id.',\n        dataType: 'string',\n      },\n      trunkIdDigest: {\n        description: 'A hash of the trunk id.',\n        dataType: 'string',\n      },\n      isTemplate: {\n        description: 'Whether the trunk is a template.',\n        dataType: 'boolean',\n      },\n      lastActivity: {\n        description: 'Timestamp of the last update to the trunk document.',\n        dataType: 'date',\n      },\n    },\n  },\n  documentOpened: {\n    description: 'Triggered when a public document or template is opened.',\n    minimumTelemetryLevel: Level.limited,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      docIdDigest: {\n        description: 'A hash of the doc id.',\n        dataType: 'string',\n      },\n      siteId: {\n        description: 'The site id.',\n        dataType: 'number',\n        minimumTelemetryLevel: Level.full,\n      },\n      siteType: {\n        description: 'The site type.',\n        dataType: 'string',\n        minimumTelemetryLevel: Level.full,\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n        minimumTelemetryLevel: Level.full,\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n        minimumTelemetryLevel: Level.full,\n      },\n      access: {\n        description: 'The document access level of the user that triggered this event.',\n        dataType: 'string',\n      },\n      isPublic: {\n        description: 'Whether the document is public.',\n        dataType: 'boolean',\n      },\n      isSnapshot: {\n        description: 'Whether a snapshot was opened.',\n        dataType: 'boolean',\n      },\n      isTemplate: {\n        description: 'Whether the document is a template.',\n        dataType: 'boolean',\n      },\n      lastUpdated: {\n        description: 'Timestamp of when the document was last updated.',\n        dataType: 'date',\n      },\n    },\n  },\n  documentUsage: {\n    description: 'Triggered on doc open and close, as well as hourly while a document is open.',\n    minimumTelemetryLevel: Level.limited,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      docIdDigest: {\n        description: 'A hash of the doc id.',\n        dataType: 'string',\n      },\n      siteId: {\n        description: 'The site id.',\n        dataType: 'number',\n        minimumTelemetryLevel: Level.full,\n      },\n      siteType: {\n        description: 'The site type.',\n        dataType: 'string',\n        minimumTelemetryLevel: Level.full,\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n        minimumTelemetryLevel: Level.full,\n      },\n      access: {\n        description: 'The document access level of the user that triggered this event.',\n        dataType: 'string',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n        minimumTelemetryLevel: Level.full,\n      },\n      triggeredBy: {\n        description: 'What caused this event to trigger. May be either \"docOpen\", \"interval\", or \"docClose\".',\n        dataType: 'string',\n      },\n      isPublic: {\n        description: 'Whether the document is public.',\n        dataType: 'boolean',\n      },\n      rowCount: {\n        description: 'The number of rows in the document.',\n        dataType: 'number',\n      },\n      dataSizeBytes: {\n        description: 'The total size of all data in the document, excluding attachments.',\n        dataType: 'number',\n      },\n      attachmentsSize: {\n        description: 'The total size of all attachments in the document.',\n        dataType: 'number',\n      },\n      numAccessRules: {\n        description: 'The number of access rules in the document.',\n        dataType: 'number',\n      },\n      numUserAttributes: {\n        description: 'The number of user attributes in the document.',\n        dataType: 'number',\n      },\n      numAttachments: {\n        description: 'The number of attachments in the document.',\n        dataType: 'number',\n      },\n      attachmentTypes: {\n        description: \"A list of unique file extensions compiled from all of the document's attachments.\",\n        dataType: 'string[]',\n      },\n      numCharts: {\n        description: 'The number of charts in the document.',\n        dataType: 'number',\n      },\n      chartTypes: {\n        description: 'A list of chart types of every chart in the document.',\n        dataType: 'string[]',\n      },\n      numLinkedCharts: {\n        description: 'The number of linked charts in the document.',\n        dataType: 'number',\n      },\n      numLinkedWidgets: {\n        description: 'The number of linked widgets in the document.',\n        dataType: 'number',\n      },\n      numColumns: {\n        description: 'The number of columns in the document.',\n        dataType: 'number',\n      },\n      numColumnsWithConditionalFormatting: {\n        description: 'The number of columns with conditional formatting in the document.',\n        dataType: 'number',\n      },\n      numFormulaColumns: {\n        description: 'The number of formula columns in the document.',\n        dataType: 'number',\n      },\n      numTriggerFormulaColumns: {\n        description: 'The number of trigger formula columns in the document.',\n        dataType: 'number',\n      },\n      numSummaryFormulaColumns: {\n        description: 'The number of summary formula columns in the document.',\n        dataType: 'number',\n      },\n      numFieldsWithConditionalFormatting: {\n        description: 'The number of fields with conditional formatting in the document.',\n        dataType: 'number',\n      },\n      numTables: {\n        description: 'The number of tables in the document.',\n        dataType: 'number',\n      },\n      numOnDemandTables: {\n        description: 'The number of on-demand tables in the document.',\n        dataType: 'number',\n      },\n      numTablesWithConditionalFormatting: {\n        description: 'The number of tables with conditional formatting in the document.',\n        dataType: 'number',\n      },\n      numSummaryTables: {\n        description: 'The number of summary tables in the document.',\n        dataType: 'number',\n      },\n      numCustomWidgets: {\n        description: 'The number of custom widgets in the document.',\n        dataType: 'number',\n      },\n      customWidgetIds: {\n        description: 'A list of plugin ids for every custom widget in the document. '\n          + 'The ids of widgets not created by Grist Labs are replaced with \"externalId\".',\n        dataType: 'string[]',\n      },\n    },\n  },\n  processMonitor: {\n    description: 'Triggered every 5 seconds.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      heapUsedMB: {\n        description: 'Size of JS heap in use, in MiB.',\n        dataType: 'number',\n      },\n      heapTotalMB: {\n        description: 'Total heap size, in MiB, allocated for JS by V8. ',\n        dataType: 'number',\n      },\n      cpuAverage: {\n        description: 'Fraction (typically between 0 and 1) of CPU usage. Includes all threads, so may exceed 1.',\n        dataType: 'number',\n      },\n      intervalMs: {\n        description: 'Interval (in milliseconds) over which `cpuAverage` is reported.',\n        dataType: 'number',\n      },\n    },\n  },\n  sendingWebhooks: {\n    description: 'Triggered when sending webhooks.',\n    minimumTelemetryLevel: Level.limited,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      numEvents: {\n        description: 'The number of events in the batch of webhooks being sent.',\n        dataType: 'number',\n      },\n      docIdDigest: {\n        description: 'A hash of the doc id.',\n        dataType: 'string',\n      },\n      siteId: {\n        description: 'The site id.',\n        dataType: 'number',\n        minimumTelemetryLevel: Level.full,\n      },\n      siteType: {\n        description: 'The site type.',\n        dataType: 'string',\n        minimumTelemetryLevel: Level.full,\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n        minimumTelemetryLevel: Level.full,\n      },\n      access: {\n        description: 'The document access level of the user that triggered this event.',\n        dataType: 'string',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n        minimumTelemetryLevel: Level.full,\n      },\n    },\n  },\n  signupFirstVisit: {\n    description: 'Triggered when a new user first opens the Grist app',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      siteId: {\n        description: 'The site id of first visit after signup.',\n        dataType: 'number',\n      },\n      siteType: {\n        description: 'The site type of first visit after signup.',\n        dataType: 'string',\n      },\n      userId: {\n        description: 'The id of the user that signed up.',\n        dataType: 'number',\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n      },\n    },\n  },\n  signupVerified: {\n    description: 'Triggered after a user successfully verifies their account during sign-up. '\n      + 'Not triggered in grist-core.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      isAnonymousTemplateSignup: {\n        description: 'Whether the user viewed any templates before signing up.',\n        dataType: 'boolean',\n      },\n      templateId: {\n        description: 'The doc id of the template the user last viewed before signing up, if any.',\n        dataType: 'string',\n      },\n    },\n  },\n  siteMembership: {\n    description: 'Triggered daily.',\n    minimumTelemetryLevel: Level.limited,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      siteId: {\n        description: 'The site id.',\n        dataType: 'number',\n      },\n      siteType: {\n        description: 'The site type.',\n        dataType: 'string',\n      },\n      numOwners: {\n        description: 'The number of users with an owner role in this site.',\n        dataType: 'number',\n      },\n      numEditors: {\n        description: 'The number of users with an editor role in this site.',\n        dataType: 'number',\n      },\n      numViewers: {\n        description: 'The number of users with a viewer role in this site.',\n        dataType: 'number',\n      },\n    },\n  },\n  siteUsage: {\n    description: 'Triggered daily.',\n    minimumTelemetryLevel: Level.limited,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      siteId: {\n        description: 'The site id.',\n        dataType: 'number',\n      },\n      siteType: {\n        description: 'The site type.',\n        dataType: 'string',\n      },\n      inGoodStanding: {\n        description: \"Whether the site's subscription is in good standing.\",\n        dataType: 'boolean',\n      },\n      stripePlanId: {\n        description: 'The Stripe Plan id associated with this site.',\n        dataType: 'string',\n        minimumTelemetryLevel: Level.full,\n      },\n      numDocs: {\n        description: 'The number of docs in this site.',\n        dataType: 'number',\n      },\n      numWorkspaces: {\n        description: 'The number of workspaces in this site.',\n        dataType: 'number',\n      },\n      numMembers: {\n        description: 'The number of site members.',\n        dataType: 'number',\n      },\n      lastActivity: {\n        description: 'A timestamp of the most recent update made to a site document.',\n        dataType: 'date',\n      },\n      earliestDocCreatedAt: {\n        description: 'A timestamp of the earliest non-deleted document creation time.',\n        dataType: 'date',\n      },\n    },\n  },\n  tutorialProgressChanged: {\n    description: 'Triggered on changes to tutorial progress.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      tutorialForkIdDigest: {\n        description: 'A hash of the tutorial fork id.',\n        dataType: 'string',\n      },\n      tutorialTrunkIdDigest: {\n        description: 'A hash of the tutorial trunk id.',\n        dataType: 'string',\n      },\n      lastSlideIndex: {\n        description: 'The 0-based index of the last tutorial slide the user had open.',\n        dataType: 'number',\n      },\n      numSlides: {\n        description: 'The total number of slides in the tutorial.',\n        dataType: 'number',\n      },\n      percentComplete: {\n        description: 'Percentage of tutorial completion.',\n        dataType: 'number',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n      },\n    },\n  },\n  tutorialRestarted: {\n    description: 'Triggered when a tutorial is restarted.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      tutorialForkIdDigest: {\n        description: 'A hash of the tutorial fork id.',\n        dataType: 'string',\n      },\n      tutorialTrunkIdDigest: {\n        description: 'A hash of the tutorial trunk id.',\n        dataType: 'string',\n      },\n      docIdDigest: {\n        description: 'A hash of the doc id.',\n        dataType: 'string',\n      },\n      siteId: {\n        description: 'The site id.',\n        dataType: 'number',\n      },\n      siteType: {\n        description: 'The site type.',\n        dataType: 'string',\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n      },\n      access: {\n        description: 'The document access level of the user that triggered this event.',\n        dataType: 'string',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n      },\n    },\n  },\n  watchedVideoTour: {\n    description: 'Triggered when the video tour is closed.',\n    minimumTelemetryLevel: Level.limited,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      watchTimeSeconds: {\n        description: 'The number of seconds elapsed in the video player.',\n        dataType: 'number',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n        minimumTelemetryLevel: Level.full,\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n        minimumTelemetryLevel: Level.full,\n      },\n    },\n  },\n};\n\ntype TelemetryContracts = Record<TelemetryEvent, TelemetryEventContract>;\n\nexport const TelemetryEvents = StringUnion(\n  'apiUsage',\n  'assistantOpen',\n  'assistantSend',\n  'assistantReceive',\n  'assistantSave',\n  'assistantCancel',\n  'assistantClearConversation',\n  'assistantClose',\n  'beaconOpen',\n  'beaconArticleViewed',\n  'beaconEmailSent',\n  'beaconSearch',\n  'documentForked',\n  'documentOpened',\n  'documentUsage',\n  'processMonitor',\n  'sendingWebhooks',\n  'signupFirstVisit',\n  'signupVerified',\n  'siteMembership',\n  'siteUsage',\n  'tutorialProgressChanged',\n  'tutorialRestarted',\n  'watchedVideoTour',\n);\nexport type TelemetryEvent = typeof TelemetryEvents.type;\n\ninterface TelemetryEventContract {\n  description: string;\n  minimumTelemetryLevel: Level;\n  retentionPeriod: TelemetryRetentionPeriod;\n  metadataContracts?: Record<string, MetadataContract>;\n}\n\nexport type TelemetryRetentionPeriod = 'short' | 'indefinitely';\n\ninterface MetadataContract {\n  description: string;\n  dataType: 'boolean' | 'number' | 'string' | 'string[]' | 'date' | 'object';\n  minimumTelemetryLevel?: Level;\n}\n\nexport type TelemetryMetadataByLevel = Partial<Record<EnabledTelemetryLevel, TelemetryMetadata>>;\n\nexport type EnabledTelemetryLevel = Exclude<TelemetryLevel, 'off'>;\n\nexport const TelemetryLevels = StringUnion('off', 'limited', 'full');\nexport type TelemetryLevel = typeof TelemetryLevels.type;\n\nexport type TelemetryMetadata = Record<string, any>;\n\n/**\n * The name of a cookie that's set whenever a template is opened.\n *\n * The cookie remembers the last template that was opened, which is then read during\n * sign-up to track which templates were viewed before sign-up.\n */\nexport const TELEMETRY_TEMPLATE_SIGNUP_COOKIE_NAME = 'gr_template_signup_trk';\n\n/**\n * Returns a function that accepts a telemetry event and metadata, and performs various\n * checks on it based on a set of contracts and the `telemetryLevel`.\n *\n * The function throws if any checks fail.\n */\nexport function buildTelemetryEventChecker(telemetryLevel: TelemetryLevel) {\n  const currentTelemetryLevel = Level[telemetryLevel];\n\n  return (event: TelemetryEvent, metadata?: TelemetryMetadata) => {\n    const eventContract = TelemetryContracts[event];\n    if (!eventContract) {\n      throw new Error(`Unknown telemetry event: ${event}`);\n    }\n\n    const eventMinimumTelemetryLevel = eventContract.minimumTelemetryLevel;\n    if (currentTelemetryLevel < eventMinimumTelemetryLevel) {\n      throw new Error(\n        `Telemetry event ${event} requires a minimum telemetry level of ${eventMinimumTelemetryLevel} ` +\n        `but the current level is ${currentTelemetryLevel}`\n      );\n    }\n\n    for (const [key, value] of Object.entries(metadata ?? {})) {\n      const metadataContract = eventContract.metadataContracts?.[key];\n      if (!metadataContract) {\n        throw new Error(`Unknown metadata for telemetry event ${event}: ${key}`);\n      }\n\n      const metadataMinimumTelemetryLevel = metadataContract.minimumTelemetryLevel;\n      if (metadataMinimumTelemetryLevel && currentTelemetryLevel < metadataMinimumTelemetryLevel) {\n        throw new Error(\n          `Telemetry metadata ${key} of event ${event} requires a minimum telemetry level of ` +\n          `${metadataMinimumTelemetryLevel} but the current level is ${currentTelemetryLevel}`\n        );\n      }\n\n      const {dataType} = metadataContract;\n      if (dataType.endsWith('[]')) {\n        if (!Array.isArray(value)) {\n          throw new Error(\n            `Telemetry metadata ${key} of event ${event} expected a value of type array ` +\n            `but received a value of type ${typeof value}`\n          );\n        }\n\n        const elementDataType = dataType.slice(0, -2);\n        if (value.some(element => typeof element !== elementDataType)) {\n          throw new Error(\n            `Telemetry metadata ${key} of event ${event} expected a value of type ${elementDataType}[] ` +\n            `but received a value of type ${typeof value}[]`\n          );\n        }\n      } else if (dataType === 'date') {\n        if (!(value instanceof Date) && typeof value !== 'string') {\n          throw new Error(\n            `Telemetry metadata ${key} of event ${event} expected a value of type Date or string ` +\n            `but received a value of type ${typeof value}`\n          );\n        }\n      } else if (dataType !== typeof value) {\n        throw new Error(\n          `Telemetry metadata ${key} of event ${event} expected a value of type ${dataType} ` +\n          `but received a value of type ${typeof value}`\n        );\n      }\n    }\n  };\n}\n\nexport type TelemetryEventChecker = (event: TelemetryEvent, metadata?: TelemetryMetadata) => void;\n","/**\n * This module was automatically generated by `ts-interface-builder`\n */\nimport * as t from \"ts-interface-checker\";\n// tslint:disable:object-literal-key-quotes\n\nexport const ThemePrefs = t.iface([], {\n  \"appearance\": \"ThemeAppearance\",\n  \"syncWithOS\": \"boolean\",\n  \"colors\": t.iface([], {\n    \"light\": \"ThemeNameOrColors\",\n    \"dark\": \"ThemeNameOrColors\",\n  }),\n});\n\nexport const ThemeAppearance = t.union(t.lit('light'), t.lit('dark'));\n\nexport const ThemeNameOrColors = t.union(\"ThemeName\", \"ThemeColors\");\n\nexport const ThemeName = t.union(t.lit('GristLight'), t.lit('GristDark'));\n\nexport const Theme = t.iface([], {\n  \"appearance\": \"ThemeAppearance\",\n  \"colors\": \"ThemeColors\",\n});\n\nexport const ThemeColors = t.iface([], {\n  \"text\": \"string\",\n  \"text-light\": \"string\",\n  \"text-dark\": \"string\",\n  \"text-error\": \"string\",\n  \"text-danger\": \"string\",\n  \"text-disabled\": \"string\",\n  \"page-bg\": \"string\",\n  \"page-backdrop\": \"string\",\n  \"page-panels-main-panel-bg\": \"string\",\n  \"page-panels-left-panel-bg\": \"string\",\n  \"page-panels-right-panel-bg\": \"string\",\n  \"page-panels-top-header-bg\": \"string\",\n  \"page-panels-bottom-footer-bg\": \"string\",\n  \"page-panels-border\": \"string\",\n  \"page-panels-border-resizing\": \"string\",\n  \"page-panels-side-panel-opener-fg\": \"string\",\n  \"page-panels-side-panel-opener-active-fg\": \"string\",\n  \"page-panels-side-panel-opener-active-bg\": \"string\",\n  \"add-new-circle-fg\": \"string\",\n  \"add-new-circle-bg\": \"string\",\n  \"add-new-circle-hover-bg\": \"string\",\n  \"add-new-circle-small-fg\": \"string\",\n  \"add-new-circle-small-bg\": \"string\",\n  \"add-new-circle-small-hover-bg\": \"string\",\n  \"top-bar-button-primary-fg\": \"string\",\n  \"top-bar-button-secondary-fg\": \"string\",\n  \"top-bar-button-disabled-fg\": \"string\",\n  \"top-bar-button-error-fg\": \"string\",\n  \"notifications-panel-header-bg\": \"string\",\n  \"notifications-panel-body-bg\": \"string\",\n  \"notifications-panel-border\": \"string\",\n  \"toast-text\": \"string\",\n  \"toast-text-light\": \"string\",\n  \"toast-bg\": \"string\",\n  \"toast-memo-text\": \"string\",\n  \"toast-memo-bg\": \"string\",\n  \"toast-error-icon\": \"string\",\n  \"toast-error-bg\": \"string\",\n  \"toast-success-icon\": \"string\",\n  \"toast-success-bg\": \"string\",\n  \"toast-warning-icon\": \"string\",\n  \"toast-warning-bg\": \"string\",\n  \"toast-info-icon\": \"string\",\n  \"toast-info-bg\": \"string\",\n  \"toast-control-fg\": \"string\",\n  \"toast-control-info-fg\": \"string\",\n  \"tooltip-fg\": \"string\",\n  \"tooltip-bg\": \"string\",\n  \"tooltip-icon\": \"string\",\n  \"tooltip-close-button-fg\": \"string\",\n  \"tooltip-close-button-hover-fg\": \"string\",\n  \"tooltip-close-button-hover-bg\": \"string\",\n  \"tooltip-popup-header-fg\": \"string\",\n  \"tooltip-popup-header-bg\": \"string\",\n  \"modal-bg\": \"string\",\n  \"modal-backdrop\": \"string\",\n  \"modal-border\": \"string\",\n  \"modal-border-dark\": \"string\",\n  \"modal-border-hover\": \"string\",\n  \"modal-shadow-inner\": \"string\",\n  \"modal-shadow-outer\": \"string\",\n  \"modal-close-button-fg\": \"string\",\n  \"modal-backdrop-close-button-fg\": \"string\",\n  \"modal-backdrop-close-button-hover-fg\": \"string\",\n  \"popup-bg\": \"string\",\n  \"popup-shadow-inner\": \"string\",\n  \"popup-shadow-outer\": \"string\",\n  \"popup-close-button-fg\": \"string\",\n  \"prompt-fg\": \"string\",\n  \"progress-bar-fg\": \"string\",\n  \"progress-bar-error-fg\": \"string\",\n  \"progress-bar-bg\": \"string\",\n  \"link\": \"string\",\n  \"link-hover\": \"string\",\n  \"hover\": \"string\",\n  \"hover-light\": \"string\",\n  \"cell-editor-fg\": \"string\",\n  \"cell-editor-bg\": \"string\",\n  \"cursor\": \"string\",\n  \"cursor-inactive\": \"string\",\n  \"cursor-readonly\": \"string\",\n  \"table-header-fg\": \"string\",\n  \"table-header-selected-fg\": \"string\",\n  \"table-header-bg\": \"string\",\n  \"table-header-selected-bg\": \"string\",\n  \"table-header-border\": \"string\",\n  \"table-header-border-dark\": \"string\",\n  \"table-body-bg\": \"string\",\n  \"table-body-border\": \"string\",\n  \"table-add-new-bg\": \"string\",\n  \"table-scroll-shadow\": \"string\",\n  \"table-frozen-columns-border\": \"string\",\n  \"table-drag-drop-indicator\": \"string\",\n  \"table-drag-drop-shadow\": \"string\",\n  \"card-compact-widget-bg\": \"string\",\n  \"card-compact-record-bg\": \"string\",\n  \"card-blocks-bg\": \"string\",\n  \"card-form-label\": \"string\",\n  \"card-compact-label\": \"string\",\n  \"card-blocks-label\": \"string\",\n  \"card-form-border\": \"string\",\n  \"card-compact-border\": \"string\",\n  \"card-editing-layout-bg\": \"string\",\n  \"card-editing-layout-border\": \"string\",\n  \"card-list-form-border\": \"string\",\n  \"card-list-blocks-border\": \"string\",\n  \"selection\": \"string\",\n  \"selection-darker\": \"string\",\n  \"selection-darkest\": \"string\",\n  \"selection-opaque-fg\": \"string\",\n  \"selection-opaque-bg\": \"string\",\n  \"selection-opaque-dark-bg\": \"string\",\n  \"selection-header\": \"string\",\n  \"widget-bg\": \"string\",\n  \"widget-border\": \"string\",\n  \"widget-active-border\": \"string\",\n  \"widget-inactive-stripes-light\": \"string\",\n  \"widget-inactive-stripes-dark\": \"string\",\n  \"pinned-doc-footer-bg\": \"string\",\n  \"pinned-doc-border\": \"string\",\n  \"pinned-doc-border-hover\": \"string\",\n  \"pinned-doc-editor-bg\": \"string\",\n  \"raw-data-table-border\": \"string\",\n  \"raw-data-table-border-hover\": \"string\",\n  \"control-fg\": \"string\",\n  \"control-primary-fg\": \"string\",\n  \"control-primary-bg\": \"string\",\n  \"control-secondary-fg\": \"string\",\n  \"control-hover-fg\": \"string\",\n  \"control-primary-hover-bg\": \"string\",\n  \"control-secondary-hover-fg\": \"string\",\n  \"control-secondary-hover-bg\": \"string\",\n  \"control-disabled-fg\": \"string\",\n  \"control-disabled-bg\": \"string\",\n  \"control-primary-disabled\": \"string\",\n  \"control-border\": \"string\",\n  \"checkbox-bg\": \"string\",\n  \"checkbox-disabled-bg\": \"string\",\n  \"checkbox-border\": \"string\",\n  \"checkbox-border-hover\": \"string\",\n  \"move-docs-selected-fg\": \"string\",\n  \"move-docs-selected-bg\": \"string\",\n  \"move-docs-disabled-bg\": \"string\",\n  \"filter-bar-button-saved-fg\": \"string\",\n  \"filter-bar-button-saved-bg\": \"string\",\n  \"filter-bar-button-saved-hover-bg\": \"string\",\n  \"icon-disabled\": \"string\",\n  \"icon-error\": \"string\",\n  \"icon-button-fg\": \"string\",\n  \"icon-button-primary-bg\": \"string\",\n  \"icon-button-primary-hover-bg\": \"string\",\n  \"icon-button-secondary-bg\": \"string\",\n  \"icon-button-secondary-hover-bg\": \"string\",\n  \"left-panel-page-hover-bg\": \"string\",\n  \"left-panel-active-page-fg\": \"string\",\n  \"left-panel-active-page-bg\": \"string\",\n  \"left-panel-disabled-page-fg\": \"string\",\n  \"left-panel-page-options-fg\": \"string\",\n  \"left-panel-page-options-hover-fg\": \"string\",\n  \"left-panel-page-options-hover-bg\": \"string\",\n  \"left-panel-page-options-selected-hover-bg\": \"string\",\n  \"left-panel-page-initials-fg\": \"string\",\n  \"left-panel-page-initials-bg\": \"string\",\n  \"left-panel-page-emoji-fg\": \"string\",\n  \"left-panel-page-emoji-outline\": \"string\",\n  \"right-panel-tab-fg\": \"string\",\n  \"right-panel-tab-bg\": \"string\",\n  \"right-panel-tab-icon\": \"string\",\n  \"right-panel-tab-icon-hover\": \"string\",\n  \"right-panel-tab-hover-bg\": \"string\",\n  \"right-panel-tab-selected-fg\": \"string\",\n  \"right-panel-tab-selected-bg\": \"string\",\n  \"right-panel-tab-button-hover-bg\": \"string\",\n  \"right-panel-subtab-fg\": \"string\",\n  \"right-panel-subtab-selected-fg\": \"string\",\n  \"right-panel-subtab-selected-underline\": \"string\",\n  \"right-panel-subtab-hover-fg\": \"string\",\n  \"right-panel-subtab-hover-underline\": \"string\",\n  \"right-panel-disabled-overlay\": \"string\",\n  \"right-panel-toggle-button-enabled-fg\": \"string\",\n  \"right-panel-toggle-button-enabled-bg\": \"string\",\n  \"right-panel-toggle-button-enabled-hover-fg\": \"string\",\n  \"right-panel-toggle-button-disabled-fg\": \"string\",\n  \"right-panel-toggle-button-disabled-bg\": \"string\",\n  \"right-panel-field-settings-bg\": \"string\",\n  \"right-panel-field-settings-button-bg\": \"string\",\n  \"document-history-snapshot-fg\": \"string\",\n  \"document-history-snapshot-selected-fg\": \"string\",\n  \"document-history-snapshot-bg\": \"string\",\n  \"document-history-snapshot-selected-bg\": \"string\",\n  \"document-history-snapshot-border\": \"string\",\n  \"document-history-activity-text\": \"string\",\n  \"document-history-activity-text-light\": \"string\",\n  \"accent-icon\": \"string\",\n  \"accent-border\": \"string\",\n  \"accent-text\": \"string\",\n  \"input-fg\": \"string\",\n  \"input-bg\": \"string\",\n  \"input-disabled-fg\": \"string\",\n  \"input-disabled-bg\": \"string\",\n  \"input-placeholder-fg\": \"string\",\n  \"input-border\": \"string\",\n  \"input-valid\": \"string\",\n  \"input-invalid\": \"string\",\n  \"input-focus\": \"string\",\n  \"input-readonly-bg\": \"string\",\n  \"input-readonly-border\": \"string\",\n  \"choice-entry-bg\": \"string\",\n  \"choice-entry-border\": \"string\",\n  \"choice-entry-border-hover\": \"string\",\n  \"select-button-fg\": \"string\",\n  \"select-button-placeholder-fg\": \"string\",\n  \"select-button-disabled-fg\": \"string\",\n  \"select-button-bg\": \"string\",\n  \"select-button-border\": \"string\",\n  \"select-button-border-invalid\": \"string\",\n  \"menu-text\": \"string\",\n  \"menu-light-text\": \"string\",\n  \"menu-bg\": \"string\",\n  \"menu-subheader-fg\": \"string\",\n  \"menu-border\": \"string\",\n  \"menu-shadow\": \"string\",\n  \"menu-item-fg\": \"string\",\n  \"menu-item-selected-fg\": \"string\",\n  \"menu-item-selected-bg\": \"string\",\n  \"menu-item-disabled-fg\": \"string\",\n  \"menu-item-icon-fg\": \"string\",\n  \"menu-item-icon-selected-fg\": \"string\",\n  \"menu-item-link-fg\": \"string\",\n  \"menu-item-link-selected-fg\": \"string\",\n  \"menu-item-link-selected-bg\": \"string\",\n  \"autocomplete-match-text\": \"string\",\n  \"autocomplete-selected-match-text\": \"string\",\n  \"autocomplete-item-selected-bg\": \"string\",\n  \"search-border\": \"string\",\n  \"search-prev-next-button-fg\": \"string\",\n  \"search-prev-next-button-bg\": \"string\",\n  \"loader-fg\": \"string\",\n  \"loader-bg\": \"string\",\n  \"site-switcher-active-fg\": \"string\",\n  \"site-switcher-active-bg\": \"string\",\n  \"doc-menu-doc-options-fg\": \"string\",\n  \"doc-menu-doc-options-hover-fg\": \"string\",\n  \"doc-menu-doc-options-hover-bg\": \"string\",\n  \"shortcut-key-fg\": \"string\",\n  \"shortcut-key-primary-fg\": \"string\",\n  \"shortcut-key-secondary-fg\": \"string\",\n  \"shortcut-key-bg\": \"string\",\n  \"shortcut-key-border\": \"string\",\n  \"breadcrumbs-tag-fg\": \"string\",\n  \"breadcrumbs-tag-bg\": \"string\",\n  \"breadcrumbs-tag-alert-bg\": \"string\",\n  \"widget-picker-primary-bg\": \"string\",\n  \"widget-picker-secondary-bg\": \"string\",\n  \"widget-picker-item-fg\": \"string\",\n  \"widget-picker-item-selected-bg\": \"string\",\n  \"widget-picker-item-disabled-bg\": \"string\",\n  \"widget-picker-icon\": \"string\",\n  \"widget-picker-primary-icon\": \"string\",\n  \"widget-picker-summary-icon\": \"string\",\n  \"widget-picker-border\": \"string\",\n  \"widget-picker-shadow\": \"string\",\n  \"code-view-text\": \"string\",\n  \"code-view-keyword\": \"string\",\n  \"code-view-comment\": \"string\",\n  \"code-view-meta\": \"string\",\n  \"code-view-title\": \"string\",\n  \"code-view-params\": \"string\",\n  \"code-view-string\": \"string\",\n  \"code-view-number\": \"string\",\n  \"code-view-builtin\": \"string\",\n  \"code-view-literal\": \"string\",\n  \"importer-table-info-border\": \"string\",\n  \"importer-preview-border\": \"string\",\n  \"importer-skipped-table-overlay\": \"string\",\n  \"importer-match-icon\": \"string\",\n  \"importer-outside-bg\": \"string\",\n  \"importer-main-content-bg\": \"string\",\n  \"importer-active-file-bg\": \"string\",\n  \"importer-active-file-fg\": \"string\",\n  \"importer-inactive-file-bg\": \"string\",\n  \"importer-inactive-file-fg\": \"string\",\n  \"menu-toggle-fg\": \"string\",\n  \"menu-toggle-hover-fg\": \"string\",\n  \"menu-toggle-active-fg\": \"string\",\n  \"menu-toggle-bg\": \"string\",\n  \"menu-toggle-border\": \"string\",\n  \"info-button-fg\": \"string\",\n  \"info-button-hover-fg\": \"string\",\n  \"info-button-active-fg\": \"string\",\n  \"button-group-fg\": \"string\",\n  \"button-group-light-fg\": \"string\",\n  \"button-group-bg\": \"string\",\n  \"button-group-icon\": \"string\",\n  \"button-group-border\": \"string\",\n  \"button-group-border-hover\": \"string\",\n  \"button-group-selected-fg\": \"string\",\n  \"button-group-light-selected-fg\": \"string\",\n  \"button-group-selected-bg\": \"string\",\n  \"button-group-selected-border\": \"string\",\n  \"access-rules-table-header-fg\": \"string\",\n  \"access-rules-table-header-bg\": \"string\",\n  \"access-rules-table-body-fg\": \"string\",\n  \"access-rules-table-border\": \"string\",\n  \"access-rules-column-list-border\": \"string\",\n  \"access-rules-column-item-fg\": \"string\",\n  \"access-rules-column-item-bg\": \"string\",\n  \"access-rules-column-item-icon-fg\": \"string\",\n  \"access-rules-column-item-icon-hover-fg\": \"string\",\n  \"access-rules-column-item-icon-hover-bg\": \"string\",\n  \"access-rules-formula-editor-bg\": \"string\",\n  \"access-rules-formula-editor-border-hover\": \"string\",\n  \"access-rules-formula-editor-bg-disabled\": \"string\",\n  \"access-rules-formula-editor-focus\": \"string\",\n  \"cell-fg\": \"string\",\n  \"cell-bg\": \"string\",\n  \"cell-zebra-bg\": \"string\",\n  \"chart-fg\": \"string\",\n  \"chart-bg\": \"string\",\n  \"chart-legend-bg\": \"string\",\n  \"chart-x-axis\": \"string\",\n  \"chart-y-axis\": \"string\",\n  \"comments-popup-header-bg\": \"string\",\n  \"comments-popup-body-bg\": \"string\",\n  \"comments-popup-border\": \"string\",\n  \"comments-user-name-fg\": \"string\",\n  \"comments-panel-topic-bg\": \"string\",\n  \"comments-panel-topic-border\": \"string\",\n  \"comments-panel-resolved-topic-bg\": \"string\",\n  \"date-picker-selected-fg\": \"string\",\n  \"date-picker-selected-bg\": \"string\",\n  \"date-picker-selected-bg-hover\": \"string\",\n  \"date-picker-today-fg\": \"string\",\n  \"date-picker-today-bg\": \"string\",\n  \"date-picker-today-bg-hover\": \"string\",\n  \"date-picker-range-start-end-bg\": \"string\",\n  \"date-picker-range-start-end-bg-hover\": \"string\",\n  \"date-picker-range-bg\": \"string\",\n  \"date-picker-range-bg-hover\": \"string\",\n  \"tutorials-popup-border\": \"string\",\n  \"tutorials-popup-header-fg\": \"string\",\n  \"tutorials-popup-box-bg\": \"string\",\n  \"ace-editor-bg\": \"string\",\n  \"ace-autocomplete-primary-fg\": \"string\",\n  \"ace-autocomplete-secondary-fg\": \"string\",\n  \"ace-autocomplete-highlighted-fg\": \"string\",\n  \"ace-autocomplete-bg\": \"string\",\n  \"ace-autocomplete-border\": \"string\",\n  \"ace-autocomplete-link\": \"string\",\n  \"ace-autocomplete-link-highlighted\": \"string\",\n  \"ace-autocomplete-active-line-bg\": \"string\",\n  \"ace-autocomplete-line-border-hover\": \"string\",\n  \"ace-autocomplete-line-bg-hover\": \"string\",\n  \"color-select-fg\": \"string\",\n  \"color-select-bg\": \"string\",\n  \"color-select-shadow\": \"string\",\n  \"color-select-font-options-border\": \"string\",\n  \"color-select-font-option-fg\": \"string\",\n  \"color-select-font-option-bg\": \"string\",\n  \"color-select-font-option-bg-hover\": \"string\",\n  \"color-select-font-option-fg-selected\": \"string\",\n  \"color-select-font-option-bg-selected\": \"string\",\n  \"color-select-color-square-border\": \"string\",\n  \"color-select-color-square-border-empty\": \"string\",\n  \"color-select-input-fg\": \"string\",\n  \"color-select-input-bg\": \"string\",\n  \"color-select-input-border\": \"string\",\n  \"highlighted-code-block-bg\": \"string\",\n  \"highlighted-code-block-bg-disabled\": \"string\",\n  \"highlighted-code-fg\": \"string\",\n  \"highlighted-code-border\": \"string\",\n  \"highlighted-code-bg-disabled\": \"string\",\n  \"login-page-bg\": \"string\",\n  \"login-page-backdrop\": \"string\",\n  \"login-page-line\": \"string\",\n  \"formula-assistant-header-bg\": \"string\",\n  \"formula-assistant-border\": \"string\",\n  \"formula-assistant-preformatted-text-bg\": \"string\",\n});\n\nconst exportedTypeSuite: t.ITypeSuite = {\n  ThemePrefs,\n  ThemeAppearance,\n  ThemeNameOrColors,\n  ThemeName,\n  Theme,\n  ThemeColors,\n};\nexport default exportedTypeSuite;\n","import ThemePrefsTI from 'app/common/ThemePrefs-ti';\nimport {CheckerT, createCheckers} from 'ts-interface-checker';\n\nexport interface ThemePrefs {\n  appearance: ThemeAppearance;\n  syncWithOS: boolean;\n  colors: {\n    light: ThemeNameOrColors;\n    dark: ThemeNameOrColors;\n  }\n}\n\nexport type ThemeAppearance = 'light' | 'dark';\n\nexport type ThemeNameOrColors = ThemeName | ThemeColors;\n\nexport type ThemeName = 'GristLight' | 'GristDark';\n\nexport interface Theme {\n  appearance: ThemeAppearance;\n  colors: ThemeColors;\n}\n\nexport interface ThemeColors {\n  /* Text */\n  'text': string;\n  'text-light': string;\n  'text-dark': string;\n  'text-error': string;\n  'text-danger': string;\n  'text-disabled': string;\n\n  /* Page */\n  'page-bg': string;\n  'page-backdrop': string;\n\n  /* Page Panels */\n  'page-panels-main-panel-bg': string;\n  'page-panels-left-panel-bg': string;\n  'page-panels-right-panel-bg': string;\n  'page-panels-top-header-bg': string;\n  'page-panels-bottom-footer-bg': string;\n  'page-panels-border': string;\n  'page-panels-border-resizing': string;\n  'page-panels-side-panel-opener-fg': string;\n  'page-panels-side-panel-opener-active-fg': string;\n  'page-panels-side-panel-opener-active-bg': string;\n\n  /* Add New */\n  'add-new-circle-fg': string;\n  'add-new-circle-bg': string;\n  'add-new-circle-hover-bg': string;\n  'add-new-circle-small-fg': string;\n  'add-new-circle-small-bg': string;\n  'add-new-circle-small-hover-bg': string;\n\n  /* Top Bar */\n  'top-bar-button-primary-fg': string;\n  'top-bar-button-secondary-fg': string;\n  'top-bar-button-disabled-fg': string;\n  'top-bar-button-error-fg': string;\n\n  /* Notifications */\n  'notifications-panel-header-bg': string;\n  'notifications-panel-body-bg': string;\n  'notifications-panel-border': string;\n\n  /* Toasts */\n  'toast-text': string;\n  'toast-text-light': string;\n  'toast-bg': string;\n  'toast-memo-text': string;\n  'toast-memo-bg': string;\n  'toast-error-icon': string;\n  'toast-error-bg': string;\n  'toast-success-icon': string;\n  'toast-success-bg': string;\n  'toast-warning-icon': string;\n  'toast-warning-bg': string;\n  'toast-info-icon': string;\n  'toast-info-bg': string;\n  'toast-control-fg': string;\n  'toast-control-info-fg': string;\n\n  /* Tooltips */\n  'tooltip-fg': string;\n  'tooltip-bg': string;\n  'tooltip-icon': string;\n  'tooltip-close-button-fg': string;\n  'tooltip-close-button-hover-fg': string;\n  'tooltip-close-button-hover-bg': string;\n  'tooltip-popup-header-fg': string;\n  'tooltip-popup-header-bg': string;\n\n  /* Modals */\n  'modal-bg': string;\n  'modal-backdrop': string;\n  'modal-border': string;\n  'modal-border-dark': string;\n  'modal-border-hover': string;\n  'modal-shadow-inner': string;\n  'modal-shadow-outer': string;\n  'modal-close-button-fg': string;\n  'modal-backdrop-close-button-fg': string;\n  'modal-backdrop-close-button-hover-fg': string;\n\n  /* Popups */\n  'popup-bg': string;\n  'popup-shadow-inner': string;\n  'popup-shadow-outer': string;\n  'popup-close-button-fg': string;\n\n  /* Prompts */\n  'prompt-fg': string;\n\n  /* Progress Bars */\n  'progress-bar-fg': string;\n  'progress-bar-error-fg': string;\n  'progress-bar-bg': string;\n\n  /* Links */\n  'link': string;\n  'link-hover': string;\n\n  /* Hover */\n  'hover': string;\n  'hover-light': string;\n\n  /* Cell Editor */\n  'cell-editor-fg': string;\n  'cell-editor-bg': string;\n\n  /* Cursor */\n  'cursor': string;\n  'cursor-inactive': string;\n  'cursor-readonly': string;\n\n  /* Tables */\n  'table-header-fg': string;\n  'table-header-selected-fg': string;\n  'table-header-bg': string;\n  'table-header-selected-bg': string;\n  'table-header-border': string;\n  'table-header-border-dark': string;\n  'table-body-bg': string;\n  'table-body-border': string;\n  'table-add-new-bg': string;\n  'table-scroll-shadow': string;\n  'table-frozen-columns-border': string;\n  'table-drag-drop-indicator': string;\n  'table-drag-drop-shadow': string;\n\n  /* Cards */\n  'card-compact-widget-bg': string;\n  'card-compact-record-bg': string;\n  'card-blocks-bg': string;\n  'card-form-label': string;\n  'card-compact-label': string;\n  'card-blocks-label': string;\n  'card-form-border': string;\n  'card-compact-border': string;\n  'card-editing-layout-bg': string;\n  'card-editing-layout-border': string;\n\n  /* Card Lists */\n  'card-list-form-border': string;\n  'card-list-blocks-border': string;\n\n  /* Selection */\n  'selection': string;\n  'selection-darker': string;\n  'selection-darkest': string;\n  'selection-opaque-fg': string;\n  'selection-opaque-bg': string;\n  'selection-opaque-dark-bg': string;\n  'selection-header': string;\n\n  /* Widgets */\n  'widget-bg': string;\n  'widget-border': string;\n  'widget-active-border': string;\n  'widget-inactive-stripes-light': string;\n  'widget-inactive-stripes-dark': string;\n\n  /* Pinned Docs */\n  'pinned-doc-footer-bg': string;\n  'pinned-doc-border': string;\n  'pinned-doc-border-hover': string;\n  'pinned-doc-editor-bg': string;\n\n  /* Raw Data */\n  'raw-data-table-border': string;\n  'raw-data-table-border-hover': string;\n\n  /* Controls */\n  'control-fg': string;\n  'control-primary-fg': string;\n  'control-primary-bg': string;\n  'control-secondary-fg': string;\n  'control-hover-fg': string;\n  'control-primary-hover-bg': string;\n  'control-secondary-hover-fg': string;\n  'control-secondary-hover-bg': string;\n  'control-disabled-fg': string;\n  'control-disabled-bg': string;\n  'control-primary-disabled': string;\n  'control-border': string;\n\n  /* Checkboxes */\n  'checkbox-bg': string;\n  'checkbox-disabled-bg': string;\n  'checkbox-border': string;\n  'checkbox-border-hover': string;\n\n  /* Move Docs */\n  'move-docs-selected-fg': string;\n  'move-docs-selected-bg': string;\n  'move-docs-disabled-bg': string;\n\n  /* Filter Bar */\n  'filter-bar-button-saved-fg': string;\n  'filter-bar-button-saved-bg': string;\n  'filter-bar-button-saved-hover-bg': string;\n\n  /* Icons */\n  'icon-disabled': string;\n  'icon-error': string;\n\n  /* Icon Buttons */\n  'icon-button-fg': string;\n  'icon-button-primary-bg': string;\n  'icon-button-primary-hover-bg': string;\n  'icon-button-secondary-bg': string;\n  'icon-button-secondary-hover-bg': string;\n\n  /* Left Panel */\n  'left-panel-page-hover-bg': string;\n  'left-panel-active-page-fg': string;\n  'left-panel-active-page-bg': string;\n  'left-panel-disabled-page-fg': string;\n  'left-panel-page-options-fg': string;\n  'left-panel-page-options-hover-fg': string;\n  'left-panel-page-options-hover-bg': string;\n  'left-panel-page-options-selected-hover-bg': string;\n  'left-panel-page-initials-fg': string;\n  'left-panel-page-initials-bg': string;\n  'left-panel-page-emoji-fg': string;\n  'left-panel-page-emoji-outline': string;\n\n  /* Right Panel */\n  'right-panel-tab-fg': string;\n  'right-panel-tab-bg': string;\n  'right-panel-tab-icon': string;\n  'right-panel-tab-icon-hover': string;\n  'right-panel-tab-hover-bg': string;\n  'right-panel-tab-selected-fg': string;\n  'right-panel-tab-selected-bg': string;\n  'right-panel-tab-button-hover-bg': string;\n  'right-panel-subtab-fg': string;\n  'right-panel-subtab-selected-fg': string;\n  'right-panel-subtab-selected-underline': string;\n  'right-panel-subtab-hover-fg': string;\n  'right-panel-subtab-hover-underline': string;\n  'right-panel-disabled-overlay': string;\n  'right-panel-toggle-button-enabled-fg': string;\n  'right-panel-toggle-button-enabled-bg': string;\n  'right-panel-toggle-button-enabled-hover-fg': string;\n  'right-panel-toggle-button-disabled-fg': string;\n  'right-panel-toggle-button-disabled-bg': string;\n  'right-panel-field-settings-bg': string;\n  'right-panel-field-settings-button-bg': string;\n\n  /* Document History */\n  'document-history-snapshot-fg': string;\n  'document-history-snapshot-selected-fg': string;\n  'document-history-snapshot-bg': string;\n  'document-history-snapshot-selected-bg': string;\n  'document-history-snapshot-border': string;\n  'document-history-activity-text': string;\n  'document-history-activity-text-light': string;\n\n  /* Accents */\n  'accent-icon': string;\n  'accent-border': string;\n  'accent-text': string;\n\n  /* Inputs */\n  'input-fg': string;\n  'input-bg': string;\n  'input-disabled-fg': string;\n  'input-disabled-bg': string;\n  'input-placeholder-fg': string;\n  'input-border': string;\n  'input-valid': string;\n  'input-invalid': string;\n  'input-focus': string;\n  'input-readonly-bg': string;\n  'input-readonly-border': string;\n\n  /* Choice Entry */\n  'choice-entry-bg': string;\n  'choice-entry-border': string;\n  'choice-entry-border-hover': string;\n\n  /* Select Buttons */\n  'select-button-fg': string;\n  'select-button-placeholder-fg': string;\n  'select-button-disabled-fg': string;\n  'select-button-bg': string;\n  'select-button-border': string;\n  'select-button-border-invalid': string;\n\n  /* Menus */\n  'menu-text': string;\n  'menu-light-text': string;\n  'menu-bg': string;\n  'menu-subheader-fg': string;\n  'menu-border': string;\n  'menu-shadow': string;\n\n  /* Menu Items */\n  'menu-item-fg': string;\n  'menu-item-selected-fg': string;\n  'menu-item-selected-bg': string;\n  'menu-item-disabled-fg': string;\n  'menu-item-icon-fg': string;\n  'menu-item-icon-selected-fg': string;\n  'menu-item-link-fg': string;\n  'menu-item-link-selected-fg': string;\n  'menu-item-link-selected-bg': string;\n\n  /* Autocomplete */\n  'autocomplete-match-text': string;\n  'autocomplete-selected-match-text': string;\n  'autocomplete-item-selected-bg': string;\n\n  /* Search */\n  'search-border': string;\n  'search-prev-next-button-fg': string;\n  'search-prev-next-button-bg': string;\n\n  /* Loaders */\n  'loader-fg': string;\n  'loader-bg': string;\n\n  /* Site Switcher */\n  'site-switcher-active-fg': string;\n  'site-switcher-active-bg': string;\n\n  /* Doc Menu */\n  'doc-menu-doc-options-fg': string;\n  'doc-menu-doc-options-hover-fg': string;\n  'doc-menu-doc-options-hover-bg': string;\n\n  /* Shortcut Keys */\n  'shortcut-key-fg': string;\n  'shortcut-key-primary-fg': string;\n  'shortcut-key-secondary-fg': string;\n  'shortcut-key-bg': string;\n  'shortcut-key-border': string;\n\n  /* Breadcrumbs */\n  'breadcrumbs-tag-fg': string;\n  'breadcrumbs-tag-bg': string;\n  'breadcrumbs-tag-alert-bg': string;\n\n  /* Page Widget Picker */\n  'widget-picker-primary-bg': string;\n  'widget-picker-secondary-bg': string;\n  'widget-picker-item-fg': string;\n  'widget-picker-item-selected-bg': string;\n  'widget-picker-item-disabled-bg': string;\n  'widget-picker-icon': string;\n  'widget-picker-primary-icon': string;\n  'widget-picker-summary-icon': string;\n  'widget-picker-border': string;\n  'widget-picker-shadow': string;\n\n  /* Code View */\n  'code-view-text': string;\n  'code-view-keyword': string;\n  'code-view-comment': string;\n  'code-view-meta': string;\n  'code-view-title': string;\n  'code-view-params': string;\n  'code-view-string': string;\n  'code-view-number': string;\n  'code-view-builtin': string;\n  'code-view-literal': string;\n\n  /* Importer */\n  'importer-table-info-border': string;\n  'importer-preview-border': string;\n  'importer-skipped-table-overlay': string;\n  'importer-match-icon': string;\n  'importer-outside-bg': string;\n  'importer-main-content-bg': string;\n  'importer-active-file-bg': string;\n  'importer-active-file-fg': string;\n  'importer-inactive-file-bg': string;\n  'importer-inactive-file-fg': string;\n\n  /* Menu Toggles */\n  'menu-toggle-fg': string;\n  'menu-toggle-hover-fg': string;\n  'menu-toggle-active-fg': string;\n  'menu-toggle-bg': string;\n  'menu-toggle-border': string;\n\n  /* Info Button */\n  'info-button-fg': string;\n  'info-button-hover-fg': string;\n  'info-button-active-fg': string;\n\n  /* Button Groups */\n  'button-group-fg': string;\n  'button-group-light-fg': string;\n  'button-group-bg': string;\n  'button-group-icon': string;\n  'button-group-border': string;\n  'button-group-border-hover': string;\n  'button-group-selected-fg': string;\n  'button-group-light-selected-fg': string;\n  'button-group-selected-bg': string;\n  'button-group-selected-border': string;\n\n  /* Access Rules */\n  'access-rules-table-header-fg': string;\n  'access-rules-table-header-bg': string;\n  'access-rules-table-body-fg': string;\n  'access-rules-table-border': string;\n  'access-rules-column-list-border': string;\n  'access-rules-column-item-fg': string;\n  'access-rules-column-item-bg': string;\n  'access-rules-column-item-icon-fg': string;\n  'access-rules-column-item-icon-hover-fg': string;\n  'access-rules-column-item-icon-hover-bg': string;\n  'access-rules-formula-editor-bg': string;\n  'access-rules-formula-editor-border-hover': string;\n  'access-rules-formula-editor-bg-disabled': string;\n  'access-rules-formula-editor-focus': string;\n\n  /* Cells */\n  'cell-fg': string;\n  'cell-bg': string;\n  'cell-zebra-bg': string;\n\n  /* Charts */\n  'chart-fg': string;\n  'chart-bg': string;\n  'chart-legend-bg': string;\n  'chart-x-axis': string;\n  'chart-y-axis': string;\n\n  /* Comments */\n  'comments-popup-header-bg': string;\n  'comments-popup-body-bg': string;\n  'comments-popup-border': string;\n  'comments-user-name-fg': string;\n  'comments-panel-topic-bg': string;\n  'comments-panel-topic-border': string;\n  'comments-panel-resolved-topic-bg': string;\n\n  /* Date Picker */\n  'date-picker-selected-fg': string;\n  'date-picker-selected-bg': string;\n  'date-picker-selected-bg-hover': string;\n  'date-picker-today-fg': string;\n  'date-picker-today-bg': string;\n  'date-picker-today-bg-hover': string;\n  'date-picker-range-start-end-bg': string;\n  'date-picker-range-start-end-bg-hover': string;\n  'date-picker-range-bg': string;\n  'date-picker-range-bg-hover': string;\n\n  /* Tutorials */\n  'tutorials-popup-border': string;\n  'tutorials-popup-header-fg': string;\n  'tutorials-popup-box-bg': string;\n\n  /* Ace */\n  'ace-editor-bg': string;\n  'ace-autocomplete-primary-fg': string;\n  'ace-autocomplete-secondary-fg': string;\n  'ace-autocomplete-highlighted-fg': string;\n  'ace-autocomplete-bg': string;\n  'ace-autocomplete-border': string;\n  'ace-autocomplete-link': string;\n  'ace-autocomplete-link-highlighted': string;\n  'ace-autocomplete-active-line-bg': string;\n  'ace-autocomplete-line-border-hover': string;\n  'ace-autocomplete-line-bg-hover': string;\n\n  /* Color Select */\n  'color-select-fg': string;\n  'color-select-bg': string;\n  'color-select-shadow': string;\n  'color-select-font-options-border': string;\n  'color-select-font-option-fg': string;\n  'color-select-font-option-bg': string;\n  'color-select-font-option-bg-hover': string;\n  'color-select-font-option-fg-selected': string;\n  'color-select-font-option-bg-selected': string;\n  'color-select-color-square-border': string;\n  'color-select-color-square-border-empty': string;\n  'color-select-input-fg': string;\n  'color-select-input-bg': string;\n  'color-select-input-border': string;\n\n  /* Highlighted Code */\n  'highlighted-code-block-bg': string;\n  'highlighted-code-block-bg-disabled': string;\n  'highlighted-code-fg': string;\n  'highlighted-code-border': string;\n  'highlighted-code-bg-disabled': string;\n\n  /* Login Page */\n  'login-page-bg': string;\n  'login-page-backdrop': string;\n  'login-page-line': string;\n\n  /* Formula Assistant */\n  'formula-assistant-header-bg': string;\n  'formula-assistant-border': string;\n  'formula-assistant-preformatted-text-bg': string;\n}\n\nexport const ThemePrefsChecker = createCheckers(ThemePrefsTI).ThemePrefs as CheckerT<ThemePrefs>;\nexport const ThemeAppearanceChecker = createCheckers(ThemePrefsTI).ThemeAppearance as CheckerT<ThemeAppearance>;\nexport const ThemeNameChecker = createCheckers(ThemePrefsTI).ThemeName as CheckerT<ThemeName>;\n\nexport function getDefaultThemePrefs(): ThemePrefs {\n  return {\n    appearance: 'light',\n    syncWithOS: false,\n    colors: {\n      light: 'GristLight',\n      dark: 'GristDark',\n    }\n  };\n}\n","import {ThemeColors, ThemeName} from 'app/common/ThemePrefs';\nimport {GristDark} from 'app/common/themes/GristDark';\nimport {GristLight} from 'app/common/themes/GristLight';\n\nconst THEMES: Readonly<Record<ThemeName, ThemeColors>> = {\n  GristLight,\n  GristDark,\n};\n\nexport function getThemeColors(themeName: ThemeName): ThemeColors {\n  return THEMES[themeName];\n}\n\n/**\n * A simple JS script that handles setting an appropriate background image\n * based on the appearance setting most recently set by the client.\n *\n * The motivation for this snippet is to avoid the FOUC-like effect that can\n * occur when Grist is loading a page, typically manifesting as a momentary flash\n * from a light background to a dark background (and vice versa). By predicting what\n * the appearance should be based on what was last stored in local storage, we can set\n * a suitable background image before the application (and consequently, the user's\n * theme preferences) have loaded, which should avoid the flash in most cases.\n *\n * Simpler alternatives exist, like using the user agent's preferred color scheme, but\n * don't account for the fact that Grist allows users to manually set their preferred\n * appearance. While this solution isn't perfect, it's a significant improvement over the\n * default behavior.\n */\nexport function getThemeBackgroundSnippet() {\n  /* Note that we only need to set the property if the appearance is dark; a fallback\n   * to the light background (gplaypattern.png) already exists in App.css. */\n  return `\n<script>\ntry {\n  if (localStorage.getItem('appearance') === 'dark' && !window.gristConfig.enableCustomCss) {\n    const style = document.createElement('style');\n    style.setAttribute('id', 'grist-theme');\n    style.textContent = ':root {\\\\n' +\n      '  --grist-theme-bg: url(\"img/prismpattern.png\");\\\\n' +\n      '  --grist-theme-bg-color: #333333;\\\\n' +\n      '}';\n    document.head.append(style);\n  }\n} catch {\n  /* Do nothing. */\n}\n</script>\n`;\n}\n","import {ActionSummary} from 'app/common/ActionSummary';\nimport {ApplyUAResult, ForkResult, PermissionDataWithExtraUsers, QueryFilters} from 'app/common/ActiveDocAPI';\nimport {AssistanceRequest, AssistanceResponse} from 'app/common/AssistancePrompts';\nimport {BaseAPI, IOptions} from 'app/common/BaseAPI';\nimport {BillingAPI, BillingAPIImpl} from 'app/common/BillingAPI';\nimport {BrowserSettings} from 'app/common/BrowserSettings';\nimport {ICustomWidget} from 'app/common/CustomWidget';\nimport {BulkColValues, TableColValues, TableRecordValue, TableRecordValues, UserAction} from 'app/common/DocActions';\nimport {DocCreationInfo, OpenDocMode} from 'app/common/DocListAPI';\nimport {OrgUsageSummary} from 'app/common/DocUsage';\nimport {Product} from 'app/common/Features';\nimport {isClient} from 'app/common/gristUrls';\nimport {encodeQueryParams} from 'app/common/gutil';\nimport {FullUser, UserProfile} from 'app/common/LoginSessionAPI';\nimport {OrgPrefs, UserOrgPrefs, UserPrefs} from 'app/common/Prefs';\nimport * as roles from 'app/common/roles';\nimport {\n  WebhookFields,\n  WebhookSubscribe,\n  WebhookSummaryCollection,\n  WebhookUpdate\n} from 'app/common/Triggers';\nimport {addCurrentOrgToPath, getGristConfig} from 'app/common/urlUtils';\nimport omitBy from 'lodash/omitBy';\n\n\nexport type {FullUser, UserProfile};\n\n// Nominal email address of the anonymous user.\nexport const ANONYMOUS_USER_EMAIL = 'anon@getgrist.com';\n\n// Nominal email address of a user who, if you share with them, everyone gets access.\nexport const EVERYONE_EMAIL = 'everyone@getgrist.com';\n\n// A special 'docId' that means to create a new document.\nexport const NEW_DOCUMENT_CODE = 'new';\n\n// Properties shared by org, workspace, and doc resources.\nexport interface CommonProperties {\n  name: string;\n  createdAt: string;  // ISO date string\n  updatedAt: string;  // ISO date string\n  removedAt?: string; // ISO date string - only can appear on docs and workspaces currently\n  public?: boolean;   // If set, resource is available to the public\n}\nexport const commonPropertyKeys = ['createdAt', 'name', 'updatedAt'];\n\nexport interface OrganizationProperties extends CommonProperties {\n  domain: string|null;\n  // Organization includes preferences relevant to interacting with its content.\n  userOrgPrefs?: UserOrgPrefs;  // Preferences specific to user and org\n  orgPrefs?: OrgPrefs;          // Preferences specific to org (but not a particular user)\n  userPrefs?: UserPrefs;        // Preferences specific to user (but not a particular org)\n}\nexport const organizationPropertyKeys = [...commonPropertyKeys, 'domain',\n                                         'orgPrefs', 'userOrgPrefs', 'userPrefs'];\n\n// Basic information about an organization, excluding the user's access level\nexport interface OrganizationWithoutAccessInfo extends OrganizationProperties {\n  id: number;\n  owner: FullUser|null;\n  billingAccount?: BillingAccount;\n  host: string|null;  // if set, org's preferred domain (e.g. www.thing.com)\n}\n\n// Organization information plus the user's access level\nexport interface Organization extends OrganizationWithoutAccessInfo {\n  access: roles.Role;\n}\n\n// Basic information about a billing account associated with an org or orgs.\nexport interface BillingAccount {\n  id: number;\n  individual: boolean;\n  product: Product;\n  isManager: boolean;\n  inGoodStanding: boolean;\n  externalOptions?: {\n    invoiceId?: string;\n  };\n}\n\n// The upload types vary based on which fetch implementation is in use.  This is\n// an incomplete list.  For example, node streaming types are supported by node-fetch.\nexport type UploadType = string | Blob | Buffer;\n\n/**\n * Returns a user-friendly org name, which is either org.name, or \"@User Name\" for personal orgs.\n */\nexport function getOrgName(org: Organization): string {\n  return org.owner ? `@` + org.owner.name : org.name;\n}\n\n/**\n * Returns whether the given org is the templates org, which contains the public\n * templates and tutorials.\n */\nexport function isTemplatesOrg(org: {domain: Organization['domain']}|null): boolean {\n  if (!org) { return false; }\n\n  const {templateOrg} = getGristConfig();\n  return org.domain === templateOrg;\n}\n\nexport type WorkspaceProperties = CommonProperties;\nexport const workspacePropertyKeys = ['createdAt', 'name', 'updatedAt'];\n\nexport interface Workspace extends WorkspaceProperties {\n  id: number;\n  docs: Document[];\n  org: Organization;\n  orgDomain?: string;\n  access: roles.Role;\n  owner?: FullUser;  // Set when workspaces are in the \"docs\" pseudo-organization,\n                     // assembled from multiple personal organizations.\n                     // Not set when workspaces are all from the same organization.\n\n  // Set when the workspace belongs to support@getgrist.com. We expect only one such workspace\n  // (\"Examples & Templates\"), containing sample documents.\n  isSupportWorkspace?: boolean;\n}\n\nexport type DocumentType = 'tutorial'|'template';\n\n// Non-core options for a document.\n// \"Non-core\" means bundled into a single options column in the database.\n// TODO: consider smoothing over this distinction in the API.\nexport interface DocumentOptions {\n  description?: string|null;\n  icon?: string|null;\n  openMode?: OpenDocMode|null;\n  externalId?: string|null;  // A slot for storing an externally maintained id.\n                             // Not used in grist-core, but handy for Electron app.\n  tutorial?: TutorialMetadata|null;\n}\n\nexport interface TutorialMetadata {\n  lastSlideIndex?: number;\n  numSlides?: number;\n}\n\nexport interface DocumentProperties extends CommonProperties {\n  isPinned: boolean;\n  urlId: string|null;\n  trunkId: string|null;\n  type: DocumentType|null;\n  options: DocumentOptions|null;\n}\n\nexport const documentPropertyKeys = [...commonPropertyKeys, 'isPinned', 'urlId', 'options', 'type'];\n\nexport interface Document extends DocumentProperties {\n  id: string;\n  workspace: Workspace;\n  access: roles.Role;\n  trunkAccess?: roles.Role|null;\n  forks?: Fork[];\n}\n\nexport interface Fork {\n  id: string;\n  trunkId: string;\n  updatedAt: string;  // ISO date string\n  options: DocumentOptions|null;\n}\n\n// Non-core options for a user.\nexport interface UserOptions {\n  // Whether signing in with Google is allowed. Defaults to true if unset.\n  allowGoogleLogin?: boolean;\n  // The \"sub\" (subject) from the JWT issued by the password-based authentication provider.\n  authSubject?: string;\n  // Whether user is a consultant. Consultant users can be added to sites\n  // without being counted for billing. Defaults to false if unset.\n  isConsultant?: boolean;\n  // Locale selected by the user. Defaults to 'en' if unset.\n  locale?: string;\n}\n\nexport interface PermissionDelta {\n  maxInheritedRole?: roles.BasicRole|null;\n  users?: {\n    // Maps from email to group name, or null to inherit.\n    [email: string]: roles.NonGuestRole|null\n  };\n}\n\nexport interface PermissionData {\n  // True if permission data is restricted to current user.\n  personal?: true;\n  // True if current user is a public member.\n  public?: boolean;\n  maxInheritedRole?: roles.BasicRole|null;\n  users: UserAccessData[];\n}\n\n// A structure for modifying managers of a billing account.\nexport interface ManagerDelta {\n  users: {\n    // To add a manager, link their email to 'managers'.\n    // To remove a manager, link their email to null.\n    // This format is used to rhyme with the ACL PermissionDelta format.\n    [email: string]: 'managers'|null\n  };\n}\n\n// Information about a user and their access to an unspecified resource of interest.\nexport interface UserAccessData {\n  id: number;\n  name: string;\n  email: string;\n  ref?: string|null;\n  picture?: string|null; // When present, a url to a public image of unspecified dimensions.\n  // Represents the user's direct access to the resource of interest. Lack of access to a resource\n  // is represented by a null value.\n  access: roles.Role|null;\n  // A user's parentAccess represent their effective inheritable access to the direct parent of the resource\n  // of interest. The user's effective access to the resource of interest can be determined based\n  // on the user's parentAccess, the maxInheritedRole setting of the resource and the user's direct\n  // access to the resource. Lack of access to the parent resource is represented by a null value.\n  // If parent has non-inheritable access, this should be null.\n  parentAccess?: roles.BasicRole|null;\n  orgAccess?: roles.BasicRole|null;\n  anonymous?: boolean;    // If set to true, the user is the anonymous user.\n  isMember?: boolean;\n}\n\n/**\n * Combines access, parentAccess, and maxInheritedRole info into the resulting access role.\n */\nexport function getRealAccess(user: UserAccessData, permissionData: PermissionData): roles.Role|null {\n  const inheritedAccess = roles.getWeakestRole(user.parentAccess || null, permissionData.maxInheritedRole || null);\n  return roles.getStrongestRole(user.access, inheritedAccess);\n}\n\nconst roleNames: {[role: string]: string} = {\n  [roles.OWNER]: 'Owner',\n  [roles.EDITOR]: 'Editor',\n  [roles.VIEWER]: 'Viewer',\n};\n\nexport function getUserRoleText(user: UserAccessData) {\n  return roleNames[user.access!] || user.access || 'no access';\n}\n\nexport interface ActiveSessionInfo {\n  user: FullUser & {helpScoutSignature?: string};\n  org: Organization|null;\n  orgError?: OrgError;\n}\n\nexport interface OrgError {\n  error: string;\n  status: number;\n}\n\n/**\n * Options to control the source of a document being replaced.  For\n * example, a document could be initialized from another document\n * (e.g. a fork) or from a snapshot.\n */\nexport interface DocReplacementOptions {\n  /**\n   * The docId to copy from.\n   */\n  sourceDocId?: string;\n  /**\n   * The s3 version ID.\n   */\n  snapshotId?: string;\n  /**\n   * True if tutorial metadata should be reset.\n   *\n   * Metadata that's reset includes the doc (i.e. tutorial) name, and the\n   * properties under options.tutorial (e.g. lastSlideIndex).\n   */\n  resetTutorialMetadata?: boolean;\n}\n\n/**\n * Information about a single document snapshot/backup.\n */\nexport interface DocSnapshot {\n  lastModified: string;  // when the snapshot was made\n  snapshotId: string;    // the id of the snapshot in the underlying store\n  docId: string;         // an id for accessing the snapshot as a Grist document\n}\n\n/**\n * A list of document snapshots.\n */\nexport interface DocSnapshots {\n  snapshots: DocSnapshot[];  // snapshots, freshest first.\n}\n\n/**\n * Information about a single document state.\n */\nexport interface DocState {\n  n: number;  // a sequential identifier\n  h: string;  // a hash identifier\n}\n\n/**\n * A list of document states.  Most recent is first.\n */\nexport interface DocStates {\n  states: DocState[];\n}\n\n/**\n * A comparison between two documents, called \"left\" and \"right\".\n * The comparison is based on the action histories in the documents.\n * If those histories have been truncated, the comparison may report\n * two documents as being unrelated even if they do in fact have some\n * shared history.\n */\nexport interface DocStateComparison {\n  left: DocState;         // left / local document\n  right: DocState;        // right / remote document\n  parent: DocState|null;  // most recent common ancestor of left and right\n  // summary of the relationship between the two documents.\n  //        same: documents have the same most recent state\n  //        left: the left document has actions not yet in the right\n  //       right: the right document has actions not yet in the left\n  //        both: both documents have changes (possible divergence)\n  //   unrelated: no common history found\n  summary: 'same' | 'left' | 'right' | 'both' | 'unrelated';\n  // optionally, details of what changed may be included.\n  details?: DocStateComparisonDetails;\n}\n\n/**\n * Detailed comparison between document versions.  For now, this\n * is provided as a pair of ActionSummary objects, relative to\n * the most recent common ancestor.\n */\nexport interface DocStateComparisonDetails {\n  leftChanges: ActionSummary;\n  rightChanges: ActionSummary;\n}\n\nexport interface UserAPI {\n  getSessionActive(): Promise<ActiveSessionInfo>;\n  setSessionActive(email: string, org?: string): Promise<void>;\n  getSessionAll(): Promise<{users: FullUser[], orgs: Organization[]}>;\n  getOrgs(merged?: boolean): Promise<Organization[]>;\n  getWorkspace(workspaceId: number): Promise<Workspace>;\n  getOrg(orgId: number|string): Promise<Organization>;\n  getOrgWorkspaces(orgId: number|string): Promise<Workspace[]>;\n  getOrgUsageSummary(orgId: number|string): Promise<OrgUsageSummary>;\n  getTemplates(onlyFeatured?: boolean): Promise<Workspace[]>;\n  getDoc(docId: string): Promise<Document>;\n  newOrg(props: Partial<OrganizationProperties>): Promise<number>;\n  newWorkspace(props: Partial<WorkspaceProperties>, orgId: number|string): Promise<number>;\n  newDoc(props: Partial<DocumentProperties>, workspaceId: number): Promise<string>;\n  newUnsavedDoc(options?: {timezone?: string}): Promise<string>;\n  renameOrg(orgId: number|string, name: string): Promise<void>;\n  renameWorkspace(workspaceId: number, name: string): Promise<void>;\n  renameDoc(docId: string, name: string): Promise<void>;\n  updateOrg(orgId: number|string, props: Partial<OrganizationProperties>): Promise<void>;\n  updateDoc(docId: string, props: Partial<DocumentProperties>): Promise<void>;\n  deleteOrg(orgId: number|string): Promise<void>;\n  deleteWorkspace(workspaceId: number): Promise<void>;     // delete workspace permanently\n  softDeleteWorkspace(workspaceId: number): Promise<void>; // soft-delete workspace\n  undeleteWorkspace(workspaceId: number): Promise<void>;   // recover soft-deleted workspace\n  deleteDoc(docId: string): Promise<void>;      // delete doc permanently\n  softDeleteDoc(docId: string): Promise<void>;  // soft-delete doc\n  undeleteDoc(docId: string): Promise<void>;    // recover soft-deleted doc\n  updateOrgPermissions(orgId: number|string, delta: PermissionDelta): Promise<void>;\n  updateWorkspacePermissions(workspaceId: number, delta: PermissionDelta): Promise<void>;\n  updateDocPermissions(docId: string, delta: PermissionDelta): Promise<void>;\n  getOrgAccess(orgId: number|string): Promise<PermissionData>;\n  getWorkspaceAccess(workspaceId: number): Promise<PermissionData>;\n  getDocAccess(docId: string): Promise<PermissionData>;\n  pinDoc(docId: string): Promise<void>;\n  unpinDoc(docId: string): Promise<void>;\n  moveDoc(docId: string, workspaceId: number): Promise<void>;\n  getUserProfile(): Promise<FullUser>;\n  updateUserName(name: string): Promise<void>;\n  updateUserLocale(locale: string|null): Promise<void>;\n  updateAllowGoogleLogin(allowGoogleLogin: boolean): Promise<void>;\n  updateIsConsultant(userId: number, isConsultant: boolean): Promise<void>;\n  getWorker(key: string): Promise<string>;\n  getWorkerAPI(key: string): Promise<DocWorkerAPI>;\n  getBillingAPI(): BillingAPI;\n  getDocAPI(docId: string): DocAPI;\n  fetchApiKey(): Promise<string>;\n  createApiKey(): Promise<string>;\n  deleteApiKey(): Promise<void>;\n  getTable(docId: string, tableName: string): Promise<TableColValues>;\n  applyUserActions(docId: string, actions: UserAction[]): Promise<ApplyUAResult>;\n  importUnsavedDoc(material: UploadType, options?: {\n    filename?: string,\n    timezone?: string,\n    onUploadProgress?: (ev: ProgressEvent) => void,\n  }): Promise<string>;\n  deleteUser(userId: number, name: string): Promise<void>;\n  getBaseUrl(): string;  // Get the prefix for all the endpoints this object wraps.\n  forRemoved(): UserAPI; // Get a version of the API that works on removed resources.\n  getWidgets(): Promise<ICustomWidget[]>;\n}\n\n/**\n * Parameters for the download CSV and XLSX endpoint (/download/table-schema & /download/csv & /download/csv).\n */\n export interface DownloadDocParams {\n  tableId: string;\n  viewSection?: number;\n  activeSortSpec?: string;\n  filters?: string;\n}\n\ninterface GetRowsParams {\n  filters?: QueryFilters;\n  immediate?: boolean;\n}\n\n/**\n * Collect endpoints related to the content of a single document that we've been thinking\n * of as the (restful) \"Doc API\".  A few endpoints that could be here are not, for historical\n * reasons, such as downloads.\n */\nexport interface DocAPI {\n  // Immediate flag is a currently not-advertised feature, allowing a query to proceed without\n  // waiting for a document to be initialized. This is useful if the calculations done when\n  // opening a document are irrelevant.\n  getRows(tableId: string, options?: GetRowsParams): Promise<TableColValues>;\n  getRecords(tableId: string, options?: GetRowsParams): Promise<TableRecordValue[]>;\n  updateRows(tableId: string, changes: TableColValues): Promise<number[]>;\n  addRows(tableId: string, additions: BulkColValues): Promise<number[]>;\n  removeRows(tableId: string, removals: number[]): Promise<number[]>;\n  fork(): Promise<ForkResult>;\n  replace(source: DocReplacementOptions): Promise<void>;\n  // Get list of document versions (specify raw to bypass caching, which should only make\n  // a difference if snapshots have \"leaked\")\n  getSnapshots(raw?: boolean): Promise<DocSnapshots>;\n  // remove selected snapshots, or all snapshots that have \"leaked\" from inventory (should\n  // be empty), or all but the current snapshot.\n  removeSnapshots(snapshotIds: string[] | 'unlisted' | 'past'): Promise<{snapshotIds: string[]}>;\n  forceReload(): Promise<void>;\n  recover(recoveryMode: boolean): Promise<void>;\n  // Compare two documents, optionally including details of the changes.\n  compareDoc(remoteDocId: string, options?: { detail: boolean }): Promise<DocStateComparison>;\n  // Compare two versions within a document, including details of the changes.\n  // Versions are identified by action hashes, or aliases understood by HashUtil.\n  // Currently, leftHash is expected to be an ancestor of rightHash.  If rightHash\n  // is HEAD, the result will contain a copy of any rows added or updated.\n  compareVersion(leftHash: string, rightHash: string): Promise<DocStateComparison>;\n  getDownloadUrl(options: {template: boolean, removeHistory: boolean}): string;\n  getDownloadXlsxUrl(params?: DownloadDocParams): string;\n  getDownloadCsvUrl(params: DownloadDocParams): string;\n  getDownloadTableSchemaUrl(params: DownloadDocParams): string;\n  /**\n   * Exports current document to the Google Drive as a spreadsheet file. To invoke this method, first\n   * acquire \"code\" via Google Auth Endpoint (see ShareMenu.ts for an example).\n   * @param code Authorization code returned from Google (requested via Grist's Google Auth Endpoint)\n   * @param title Name of the spreadsheet that will be created (should use a Grist document's title)\n   */\n  sendToDrive(code: string, title: string): Promise<{url: string}>;\n  // Upload a single attachment and return the resulting metadata row ID.\n  // The arguments are passed to FormData.append.\n  uploadAttachment(value: string | Blob, filename?: string): Promise<number>;\n\n  // Get users that are worth proposing to \"View As\" for access control purposes.\n  getUsersForViewAs(): Promise<PermissionDataWithExtraUsers>;\n\n  getWebhooks(): Promise<WebhookSummaryCollection>;\n  addWebhook(webhook: WebhookFields): Promise<{webhookId: string}>;\n  removeWebhook(webhookId: string, tableId: string): Promise<void>;\n  // Update webhook\n  updateWebhook(webhook: WebhookUpdate): Promise<void>;\n  flushWebhooks(): Promise<void>;\n  flushWebhook(webhookId: string): Promise<void>;\n\n  getAssistance(params: AssistanceRequest): Promise<AssistanceResponse>;\n}\n\n// Operations that are supported by a doc worker.\nexport interface DocWorkerAPI {\n  readonly url: string;\n  importDocToWorkspace(uploadId: number, workspaceId: number, settings?: BrowserSettings): Promise<DocCreationInfo>;\n  upload(material: UploadType, filename?: string): Promise<number>;\n  downloadDoc(docId: string, template?: boolean): Promise<Response>;\n  copyDoc(docId: string, template?: boolean, name?: string): Promise<number>;\n}\n\nexport class UserAPIImpl extends BaseAPI implements UserAPI {\n  constructor(private _homeUrl: string, private _options: IOptions = {}) {\n    super(_options);\n  }\n\n  public forRemoved(): UserAPI {\n    const extraParameters = new Map<string, string>([['showRemoved', '1']]);\n    return new UserAPIImpl(this._homeUrl, {...this._options, extraParameters});\n  }\n\n  public async getSessionActive(): Promise<ActiveSessionInfo> {\n    return this.requestJson(`${this._url}/api/session/access/active`, {method: 'GET'});\n  }\n\n  public async setSessionActive(email: string, org?: string): Promise<void> {\n    const body = JSON.stringify({ email, org });\n    return this.requestJson(`${this._url}/api/session/access/active`, {method: 'POST', body});\n  }\n\n  public async getSessionAll(): Promise<{users: FullUser[], orgs: Organization[]}> {\n    return this.requestJson(`${this._url}/api/session/access/all`, {method: 'GET'});\n  }\n\n  public async getOrgs(merged: boolean = false): Promise<Organization[]> {\n    return this.requestJson(`${this._url}/api/orgs?merged=${merged ? 1 : 0}`, { method: 'GET' });\n  }\n\n  public async getWorkspace(workspaceId: number): Promise<Workspace> {\n    return this.requestJson(`${this._url}/api/workspaces/${workspaceId}`, { method: 'GET' });\n  }\n\n  public async getOrg(orgId: number|string): Promise<Organization> {\n    return this.requestJson(`${this._url}/api/orgs/${orgId}`, { method: 'GET' });\n  }\n\n  public async getOrgWorkspaces(orgId: number|string): Promise<Workspace[]> {\n    return this.requestJson(`${this._url}/api/orgs/${orgId}/workspaces?includeSupport=1`,\n      { method: 'GET' });\n  }\n\n  public async getOrgUsageSummary(orgId: number|string): Promise<OrgUsageSummary> {\n    return this.requestJson(`${this._url}/api/orgs/${orgId}/usage`, { method: 'GET' });\n  }\n\n  public async getTemplates(onlyFeatured: boolean = false): Promise<Workspace[]> {\n    return this.requestJson(`${this._url}/api/templates?onlyFeatured=${onlyFeatured ? 1 : 0}`, { method: 'GET' });\n  }\n\n  public async getWidgets(): Promise<ICustomWidget[]> {\n    return await this.requestJson(`${this._url}/api/widgets`, { method: 'GET' });\n  }\n\n  public async getDoc(docId: string): Promise<Document> {\n    return this.requestJson(`${this._url}/api/docs/${docId}`, { method: 'GET' });\n  }\n\n  public async newOrg(props: Partial<OrganizationProperties>): Promise<number> {\n    return this.requestJson(`${this._url}/api/orgs`, {\n      method: 'POST',\n      body: JSON.stringify(props)\n    });\n  }\n\n  public async newWorkspace(props: Partial<WorkspaceProperties>, orgId: number|string): Promise<number> {\n    return this.requestJson(`${this._url}/api/orgs/${orgId}/workspaces`, {\n      method: 'POST',\n      body: JSON.stringify(props)\n    });\n  }\n\n  public async newDoc(props: Partial<DocumentProperties>, workspaceId: number): Promise<string> {\n    return this.requestJson(`${this._url}/api/workspaces/${workspaceId}/docs`, {\n      method: 'POST',\n      body: JSON.stringify(props)\n    });\n  }\n\n  public async newUnsavedDoc(options: {timezone?: string} = {}): Promise<string> {\n    return this.requestJson(`${this._url}/api/docs`, {\n      method: 'POST',\n      body: JSON.stringify(options),\n    });\n  }\n\n  public async renameOrg(orgId: number|string, name: string): Promise<void> {\n    await this.request(`${this._url}/api/orgs/${orgId}`, {\n      method: 'PATCH',\n      body: JSON.stringify({ name })\n    });\n  }\n\n  public async renameWorkspace(workspaceId: number, name: string): Promise<void> {\n    await this.request(`${this._url}/api/workspaces/${workspaceId}`, {\n      method: 'PATCH',\n      body: JSON.stringify({ name })\n    });\n  }\n\n  public async renameDoc(docId: string, name: string): Promise<void> {\n    return this.updateDoc(docId, {name});\n  }\n\n  public async updateOrg(orgId: number|string, props: Partial<OrganizationProperties>): Promise<void> {\n    await this.request(`${this._url}/api/orgs/${orgId}`, {\n      method: 'PATCH',\n      body: JSON.stringify(props)\n    });\n  }\n\n  public async updateDoc(docId: string, props: Partial<DocumentProperties>): Promise<void> {\n    await this.request(`${this._url}/api/docs/${docId}`, {\n      method: 'PATCH',\n      body: JSON.stringify(props)\n    });\n  }\n\n  public async deleteOrg(orgId: number|string): Promise<void> {\n    await this.request(`${this._url}/api/orgs/${orgId}`, { method: 'DELETE' });\n  }\n\n  public async deleteWorkspace(workspaceId: number): Promise<void> {\n    await this.request(`${this._url}/api/workspaces/${workspaceId}`, { method: 'DELETE' });\n  }\n\n  public async softDeleteWorkspace(workspaceId: number): Promise<void> {\n    await this.request(`${this._url}/api/workspaces/${workspaceId}/remove`, { method: 'POST' });\n  }\n\n  public async undeleteWorkspace(workspaceId: number): Promise<void> {\n    await this.request(`${this._url}/api/workspaces/${workspaceId}/unremove`, { method: 'POST' });\n  }\n\n  public async deleteDoc(docId: string): Promise<void> {\n    await this.request(`${this._url}/api/docs/${docId}`, { method: 'DELETE' });\n  }\n\n  public async softDeleteDoc(docId: string): Promise<void> {\n    await this.request(`${this._url}/api/docs/${docId}/remove`, { method: 'POST' });\n  }\n\n  public async undeleteDoc(docId: string): Promise<void> {\n    await this.request(`${this._url}/api/docs/${docId}/unremove`, { method: 'POST' });\n  }\n\n  public async updateOrgPermissions(orgId: number|string, delta: PermissionDelta): Promise<void> {\n    await this.request(`${this._url}/api/orgs/${orgId}/access`, {\n      method: 'PATCH',\n      body: JSON.stringify({ delta })\n    });\n  }\n\n  public async updateWorkspacePermissions(workspaceId: number, delta: PermissionDelta): Promise<void> {\n    await this.request(`${this._url}/api/workspaces/${workspaceId}/access`, {\n      method: 'PATCH',\n      body: JSON.stringify({ delta })\n    });\n  }\n\n  public async updateDocPermissions(docId: string, delta: PermissionDelta): Promise<void> {\n    await this.request(`${this._url}/api/docs/${docId}/access`, {\n      method: 'PATCH',\n      body: JSON.stringify({ delta })\n    });\n  }\n\n  public async getOrgAccess(orgId: number|string): Promise<PermissionData> {\n    return this.requestJson(`${this._url}/api/orgs/${orgId}/access`, { method: 'GET' });\n  }\n\n  public async getWorkspaceAccess(workspaceId: number): Promise<PermissionData> {\n    return this.requestJson(`${this._url}/api/workspaces/${workspaceId}/access`, { method: 'GET' });\n  }\n\n  public async getDocAccess(docId: string): Promise<PermissionData> {\n    return this.requestJson(`${this._url}/api/docs/${docId}/access`, { method: 'GET' });\n  }\n\n  public async pinDoc(docId: string): Promise<void> {\n    await this.request(`${this._url}/api/docs/${docId}/pin`, {\n      method: 'PATCH'\n    });\n  }\n\n  public async unpinDoc(docId: string): Promise<void> {\n    await this.request(`${this._url}/api/docs/${docId}/unpin`, {\n      method: 'PATCH'\n    });\n  }\n\n  public async moveDoc(docId: string, workspaceId: number): Promise<void> {\n    await this.request(`${this._url}/api/docs/${docId}/move`, {\n      method: 'PATCH',\n      body: JSON.stringify({ workspace: workspaceId })\n    });\n  }\n\n  public async getUserProfile(): Promise<FullUser> {\n    return this.requestJson(`${this._url}/api/profile/user`);\n  }\n\n  public async updateUserName(name: string): Promise<void> {\n    await this.request(`${this._url}/api/profile/user/name`, {\n      method: 'POST',\n      body: JSON.stringify({name})\n    });\n  }\n\n  public async updateUserLocale(locale: string|null): Promise<void> {\n    await this.request(`${this._url}/api/profile/user/locale`, {\n      method: 'POST',\n      body: JSON.stringify({locale})\n    });\n  }\n\n  public async updateAllowGoogleLogin(allowGoogleLogin: boolean): Promise<void> {\n    await this.request(`${this._url}/api/profile/allowGoogleLogin`, {\n      method: 'POST',\n      body: JSON.stringify({allowGoogleLogin})\n    });\n  }\n\n  public async updateIsConsultant(userId: number, isConsultant: boolean): Promise<void> {\n    await this.request(`${this._url}/api/profile/isConsultant`, {\n      method: 'POST',\n      body: JSON.stringify({userId, isConsultant})\n    });\n  }\n\n  public async getWorker(key: string): Promise<string> {\n    const json = await this.requestJson(`${this._url}/api/worker/${key}`, {\n      method: 'GET',\n      credentials: 'include'\n    });\n    return getDocWorkerUrl(this._homeUrl, json);\n  }\n\n  public async getWorkerAPI(key: string): Promise<DocWorkerAPI> {\n    const docUrl = this._urlWithOrg(await this.getWorker(key));\n    return new DocWorkerAPIImpl(docUrl, this._options);\n  }\n\n  public getBillingAPI(): BillingAPI {\n    return new BillingAPIImpl(this._url, this._options);\n  }\n\n  public getDocAPI(docId: string): DocAPI {\n    return new DocAPIImpl(this._url, docId, this._options);\n  }\n\n  public async fetchApiKey(): Promise<string> {\n    const resp = await this.request(`${this._url}/api/profile/apiKey`);\n    return await resp.text();\n  }\n\n  public async createApiKey(): Promise<string> {\n    const res = await this.request(`${this._url}/api/profile/apiKey`, {\n      method: 'POST'\n    });\n    return await res.text();\n  }\n\n  public async deleteApiKey(): Promise<void> {\n    await this.request(`${this._url}/api/profile/apiKey`, {\n      method: 'DELETE'\n    });\n  }\n\n  // This method is not strictly needed anymore, but is widely used by\n  // tests so supporting as a handy shortcut for getDocAPI(docId).getRows(tableName)\n  public async getTable(docId: string, tableName: string): Promise<TableColValues> {\n    return this.getDocAPI(docId).getRows(tableName);\n  }\n\n  public async applyUserActions(docId: string, actions: UserAction[]): Promise<ApplyUAResult> {\n    return this.requestJson(`${this._url}/api/docs/${docId}/apply`, {\n      method: 'POST',\n      body: JSON.stringify(actions)\n    });\n  }\n\n  public async importUnsavedDoc(material: UploadType, options?: {\n    filename?: string,\n    timezone?: string,\n    onUploadProgress?: (ev: ProgressEvent) => void,\n  }): Promise<string> {\n    options = options || {};\n    const formData = this.newFormData();\n    formData.append('upload', material as any, options.filename);\n    if (options.timezone) { formData.append('timezone', options.timezone); }\n    const resp = await this.requestAxios(`${this._url}/api/docs`, {\n      method: 'POST',\n      data: formData,\n      onUploadProgress: options.onUploadProgress,\n      // On browser, it is important not to set Content-Type so that the browser takes care\n      // of setting HTTP headers appropriately.  Outside browser, requestAxios has logic\n      // for setting the HTTP headers.\n      headers: {...this.defaultHeadersWithoutContentType()},\n    });\n    return resp.data;\n  }\n\n  public async deleteUser(userId: number, name: string) {\n    await this.request(`${this._url}/api/users/${userId}`,\n                       {method: 'DELETE',\n                        body: JSON.stringify({name})});\n  }\n\n  public getBaseUrl(): string { return this._url; }\n\n  // Recomputes the URL on every call to pick up changes in the URL when switching orgs.\n  // (Feels inefficient, but probably doesn't matter, and it's simpler than the alternatives.)\n  private get _url(): string {\n    return this._urlWithOrg(this._homeUrl);\n  }\n\n  private _urlWithOrg(base: string): string {\n    return isClient() ? addCurrentOrgToPath(base) : base.replace(/\\/$/, '');\n  }\n}\n\nexport class DocWorkerAPIImpl extends BaseAPI implements DocWorkerAPI {\n  constructor(public readonly url: string, _options: IOptions = {}) {\n    super(_options);\n  }\n\n  public async importDocToWorkspace(uploadId: number, workspaceId: number, browserSettings?: BrowserSettings):\n      Promise<DocCreationInfo> {\n    return this.requestJson(`${this.url}/api/workspaces/${workspaceId}/import`, {\n      method: 'POST',\n      body: JSON.stringify({ uploadId, browserSettings })\n    });\n  }\n\n  public async upload(material: UploadType, filename?: string): Promise<number> {\n    const formData = this.newFormData();\n    formData.append('upload', material as any, filename);\n    const json = await this.requestJson(`${this.url}/uploads`, {\n      // On browser, it is important not to set Content-Type so that the browser takes care\n      // of setting HTTP headers appropriately.  Outside of browser, node-fetch also appears\n      // to take care of this - https://github.github.io/fetch/#request-body\n      headers: {...this.defaultHeadersWithoutContentType()},\n      method: 'POST',\n      body: formData\n    });\n    return json.uploadId;\n  }\n\n  public async downloadDoc(docId: string, template: boolean = false): Promise<Response> {\n    const extra = template ? '?template=1' : '';\n    const result = await this.request(`${this.url}/api/docs/${docId}/download${extra}`, {\n      method: 'GET',\n    });\n    if (!result.ok) { throw new Error(await result.text()); }\n    return result;\n  }\n\n  public async copyDoc(docId: string, template: boolean = false, name?: string): Promise<number> {\n    const url = new URL(`${this.url}/copy?doc=${docId}`);\n    if (template) {\n      url.searchParams.append('template', '1');\n    }\n    if (name) {\n      url.searchParams.append('name', name);\n    }\n    const json = await this.requestJson(url.href, {\n      method: 'POST',\n    });\n    return json.uploadId;\n  }\n}\n\nexport class DocAPIImpl extends BaseAPI implements DocAPI {\n  private _url: string;\n\n  constructor(url: string, public readonly docId: string, options: IOptions = {}) {\n    super(options);\n    this._url = `${url}/api/docs/${docId}`;\n  }\n\n  public async getRows(tableId: string, options?: GetRowsParams): Promise<TableColValues> {\n    return this._getRecords(tableId, 'data', options);\n  }\n\n  public async getRecords(tableId: string, options?: GetRowsParams): Promise<TableRecordValue[]> {\n    const response: TableRecordValues = await this._getRecords(tableId, 'records', options);\n    return response.records;\n  }\n\n  public async updateRows(tableId: string, changes: TableColValues): Promise<number[]> {\n    return this.requestJson(`${this._url}/tables/${tableId}/data`, {\n      body: JSON.stringify(changes),\n      method: 'PATCH'\n    });\n  }\n\n  public async addRows(tableId: string, additions: BulkColValues): Promise<number[]> {\n    return this.requestJson(`${this._url}/tables/${tableId}/data`, {\n      body: JSON.stringify(additions),\n      method: 'POST'\n    });\n  }\n\n  public async removeRows(tableId: string, removals: number[]): Promise<number[]> {\n    return this.requestJson(`${this._url}/tables/${tableId}/data/delete`, {\n      body: JSON.stringify(removals),\n      method: 'POST'\n    });\n  }\n\n  public async fork(): Promise<ForkResult> {\n    return this.requestJson(`${this._url}/fork`, {\n      method: 'POST'\n    });\n  }\n\n  public async replace(source: DocReplacementOptions): Promise<void> {\n    return this.requestJson(`${this._url}/replace`, {\n      body: JSON.stringify(source),\n      method: 'POST'\n    });\n  }\n\n  public async getSnapshots(raw?: boolean): Promise<DocSnapshots> {\n    return this.requestJson(`${this._url}/snapshots?raw=${raw}`);\n  }\n\n  public async removeSnapshots(snapshotIds: string[] | 'unlisted' | 'past') {\n    const body = typeof snapshotIds === 'string' ? { select: snapshotIds } : { snapshotIds };\n    return await this.requestJson(`${this._url}/snapshots/remove`, {\n      method: 'POST',\n      body: JSON.stringify(body)\n    });\n  }\n\n  public async getUsersForViewAs(): Promise<PermissionDataWithExtraUsers> {\n    return this.requestJson(`${this._url}/usersForViewAs`);\n  }\n\n  public async getWebhooks(): Promise<WebhookSummaryCollection> {\n    return this.requestJson(`${this._url}/webhooks`);\n  }\n\n  public async addWebhook(webhook: WebhookSubscribe & {tableId: string}): Promise<{webhookId: string}> {\n    const {tableId} = webhook;\n    return this.requestJson(`${this._url}/tables/${tableId}/_subscribe`, {\n      method: 'POST',\n      body: JSON.stringify(\n        omitBy(webhook, (val, key) => key === 'tableId' || val === null)),\n    });\n  }\n\n  public async updateWebhook(webhook: WebhookUpdate): Promise<void> {\n    return this.requestJson(`${this._url}/webhooks/${webhook.id}`, {\n      method: 'PATCH',\n      body: JSON.stringify(webhook.fields),\n    });\n  }\n\n  public removeWebhook(webhookId: string, tableId: string) {\n    // unsubscribeKey is not required for owners\n    const unsubscribeKey = '';\n    return this.requestJson(`${this._url}/tables/${tableId}/_unsubscribe`, {\n      method: 'POST',\n      body: JSON.stringify({webhookId, unsubscribeKey}),\n    });\n  }\n\n  public async flushWebhooks(): Promise<void> {\n    await this.request(`${this._url}/webhooks/queue`, {\n      method: 'DELETE'\n    });\n  }\n\n  public async flushWebhook(id: string): Promise<void> {\n    await this.request(`${this._url}/webhooks/queue/${id}`, {\n      method: 'DELETE'\n    });\n  }\n\n  public async forceReload(): Promise<void> {\n    await this.request(`${this._url}/force-reload`, {\n      method: 'POST'\n    });\n  }\n\n  public async recover(recoveryMode: boolean): Promise<void> {\n    await this.request(`${this._url}/recover`, {\n      body: JSON.stringify({recoveryMode}),\n      method: 'POST'\n    });\n  }\n\n  public async compareDoc(remoteDocId: string, options: {\n    detail?: boolean\n  } = {}): Promise<DocStateComparison> {\n     const q = options.detail ? '?detail=true' : '';\n     return this.requestJson(`${this._url}/compare/${remoteDocId}${q}`);\n  }\n\n  public async compareVersion(leftHash: string, rightHash: string): Promise<DocStateComparison> {\n    const url = new URL(`${this._url}/compare`);\n    url.searchParams.append('left', leftHash);\n    url.searchParams.append('right', rightHash);\n    return this.requestJson(url.href);\n  }\n\n  public getDownloadUrl({template, removeHistory}: {template: boolean, removeHistory: boolean}): string {\n    return this._url + `/download?template=${template}&nohistory=${removeHistory}`;\n  }\n\n  public getDownloadXlsxUrl(params: DownloadDocParams) {\n    return this._url + '/download/xlsx?' + encodeQueryParams({...params});\n  }\n\n  public getDownloadCsvUrl(params: DownloadDocParams) {\n    // We spread `params` to work around TypeScript being overly cautious.\n    return this._url + '/download/csv?' + encodeQueryParams({...params});\n  }\n\n  public getDownloadTableSchemaUrl(params: DownloadDocParams) {\n    // We spread `params` to work around TypeScript being overly cautious.\n    return this._url + '/download/table-schema?' + encodeQueryParams({...params});\n  }\n\n  public async sendToDrive(code: string, title: string): Promise<{url: string}> {\n    const url = new URL(`${this._url}/send-to-drive`);\n    url.searchParams.append('title', title);\n    url.searchParams.append('code', code);\n    return this.requestJson(url.href);\n  }\n\n  public async uploadAttachment(value: string | Blob, filename?: string): Promise<number> {\n    const formData = this.newFormData();\n    formData.append('upload', value, filename);\n    const response = await this.requestAxios(`${this._url}/attachments`, {\n      method: 'POST',\n      data: formData,\n      // On browser, it is important not to set Content-Type so that the browser takes care\n      // of setting HTTP headers appropriately.  Outside browser, requestAxios has logic\n      // for setting the HTTP headers.\n      headers: {...this.defaultHeadersWithoutContentType()},\n    });\n    return response.data[0];\n  }\n\n  public async getAssistance(params: AssistanceRequest): Promise<AssistanceResponse> {\n    return await this.requestJson(`${this._url}/assistant`, {\n      method: 'POST',\n      body: JSON.stringify(params),\n    });\n  }\n\n  private _getRecords(tableId: string, endpoint: 'data' | 'records', options?: GetRowsParams): Promise<any> {\n    const url = new URL(`${this._url}/tables/${tableId}/${endpoint}`);\n    if (options?.filters) {\n      url.searchParams.append('filter', JSON.stringify(options.filters));\n    }\n    if (options?.immediate) {\n      url.searchParams.append('immediate', 'true');\n    }\n    return this.requestJson(url.href);\n  }\n}\n\n/**\n * Get a docWorkerUrl from information returned from backend. When the backend\n * is fully configured, and there is a pool of workers, this is straightforward,\n * just return the docWorkerUrl reported by the backend. For single-instance\n * installs, the backend returns a null docWorkerUrl, and a client can simply\n * use the homeUrl of the backend, with extra path prefix information\n * given by selfPrefix. At the time of writing, the selfPrefix contains a\n * doc-worker id, and a tag for the codebase (used in consistency checks).\n */\nexport function getDocWorkerUrl(homeUrl: string, docWorkerInfo: {\n  docWorkerUrl: string|null,\n  selfPrefix?: string,\n}): string {\n  if (!docWorkerInfo.docWorkerUrl) {\n    if (!docWorkerInfo.selfPrefix) {\n      // This should never happen.\n      throw new Error('missing selfPrefix for docWorkerUrl');\n    }\n    const url = new URL(homeUrl);\n    url.pathname = docWorkerInfo.selfPrefix + url.pathname;\n    return url.href;\n  }\n  return docWorkerInfo.docWorkerUrl;\n}\n","/**\n * Simple utilities for escaping/quoting/parsing CSV data.\n *\n * This only supports the default Excel-like encoding, in which fields containing any separators\n * or quotes get quoted (using '\"'), and quotes get doubled.\n *\n * Quoting is also applied when values contain leading or trailing whitespace, and on parsing,\n * leading or trailing whitespace in unquoted values is trimmed, so that \",\" or \", \" may be used\n * as a separator.\n *\n * This is intended for copy-pasting multi-choice values, where plain comma-separated text is the\n * most user-friendly, and CSV encoding is used to ensure we can handle arbitrary values.\n */\n\n// Encode a row. If {prettier: true} is set, separate output with \", \". Leading whitespace gets\n// encoded in any case.\nexport function csvEncodeRow(values: string[], options: {prettier?: boolean} = {}): string {\n  return values.map(csvEncodeCell).join(options.prettier ? \", \" : \",\");\n}\n\nexport function csvDecodeRow(text: string): string[] {\n  // Clever regexp from https://github.com/micnews/csv-line\n  const parts = text.split(/((?:(?:\"[^\"]*\")|[^,])*)/);\n  const main = parts.filter((v, idx) => idx % 2).map(csvDecodeCell);\n  // The \"delimiter\" (odd-numbered parts) is our content. If it's not at the start/end, it means\n  // we have commas, and should include empty fields at those ends.\n  if (parts[0]) { main.unshift(\"\"); }\n  if (parts[parts.length - 1]) { main.push(\"\"); }\n  return main;\n}\n\nexport function csvEncodeCell(value: string): string {\n  return /[,\\r\\n\"]|^\\s|\\s$/.test(value) ? '\"' + value.replace(/\"/g, '\"\"') + '\"' : value;\n}\n\nexport function csvDecodeCell(value: string): string {\n  return value.trim().replace(/^\"|\"$/g, '').replace(/\"\"/g, '\"');\n}\n","/**\n * Returns a promise that resolves in the given number of milliseconds.\n * (A replica of bluebird.delay using native promises.)\n */\nexport function delay(msec: number): Promise<void> {\n  return new Promise<void>((resolve) => setTimeout(resolve, msec));\n}\n","import {BillingPage, BillingSubPage, BillingTask} from 'app/common/BillingAPI';\nimport {OpenDocMode} from 'app/common/DocListAPI';\nimport {EngineCode} from 'app/common/DocumentSettings';\nimport {encodeQueryParams, isAffirmative} from 'app/common/gutil';\nimport {LocalPlugin} from 'app/common/plugin';\nimport {StringUnion} from 'app/common/StringUnion';\nimport {TelemetryLevel} from 'app/common/Telemetry';\nimport {ThemeAppearance, ThemeAppearanceChecker, ThemeName, ThemeNameChecker} from 'app/common/ThemePrefs';\nimport {getGristConfig} from 'app/common/urlUtils';\nimport {Document} from 'app/common/UserAPI';\nimport {IAttachedCustomWidget} from \"app/common/widgetTypes\";\nimport {UIRowId} from 'app/plugin/GristAPI';\nimport clone = require('lodash/clone');\nimport pickBy = require('lodash/pickBy');\n\nexport const SpecialDocPage = StringUnion('code', 'acl', 'data', 'GristDocTour', 'settings', 'webhook');\ntype SpecialDocPage = typeof SpecialDocPage.type;\nexport type IDocPage = number | SpecialDocPage;\n\nexport type ViewDocPage = number | 'data';\n/**\n * ViewDocPage is a page that shows table data (either normal or raw data view).\n */\nexport function isViewDocPage(docPage: IDocPage): docPage is ViewDocPage {\n  return typeof docPage === 'number' || docPage === 'data';\n}\n\n// What page to show in the user's home area. Defaults to 'workspace' if a workspace is set, and\n// to 'all' otherwise.\nexport const HomePage = StringUnion('all', 'workspace', 'templates', 'trash');\nexport type IHomePage = typeof HomePage.type;\n\n// TODO: Remove 'user' and 'info', since those pages are no longer part of any flow.\nexport const WelcomePage = StringUnion('teams', 'signup', 'verify', 'select-account');\nexport type WelcomePage = typeof WelcomePage.type;\n\nexport const AccountPage = StringUnion('account');\nexport type AccountPage = typeof AccountPage.type;\n\nexport const ActivationPage = StringUnion('activation');\nexport type ActivationPage = typeof ActivationPage.type;\n\nexport const LoginPage = StringUnion('signup', 'login', 'verified', 'forgot-password');\nexport type LoginPage = typeof LoginPage.type;\n\nexport const SupportGristPage = StringUnion('support-grist');\nexport type SupportGristPage = typeof SupportGristPage.type;\n\n// Overall UI style.  \"full\" is normal, \"singlePage\" is a single page focused, panels hidden experience.\nexport const InterfaceStyle = StringUnion('singlePage', 'full');\nexport type InterfaceStyle = typeof InterfaceStyle.type;\n\n// Default subdomain for home api service if not otherwise specified.\nexport const DEFAULT_HOME_SUBDOMAIN = 'api';\n\n// This is the minimum length a urlId may have if it is chosen\n// as a prefix of the docId.\nexport const MIN_URLID_PREFIX_LENGTH = 12;\n\n/**\n * Special ways to open a document, based on what the user intends to do.\n *   - view: Open document in read-only mode (even if user has edit rights)\n *   - fork: Open document in fork-ready mode.  This means that while edits are\n *           permitted, those edits should go to a copy of the document rather than\n *           the original.\n */\n\nexport const commonUrls = {\n  help: getHelpCenterUrl(),\n  helpAccessRules: \"https://support.getgrist.com/access-rules\",\n  helpAssistantDataUse: \"https://support.getgrist.com/ai-assistant/#data-use-policy\",\n  helpColRefs: \"https://support.getgrist.com/col-refs\",\n  helpConditionalFormatting: \"https://support.getgrist.com/conditional-formatting\",\n  helpFilterButtons: \"https://support.getgrist.com/search-sort-filter/#filter-buttons\",\n  helpLinkingWidgets: \"https://support.getgrist.com/linking-widgets\",\n  helpRawData: \"https://support.getgrist.com/raw-data\",\n  helpUnderstandingReferenceColumns: \"https://support.getgrist.com/col-refs/#understanding-reference-columns\",\n  helpTriggerFormulas: \"https://support.getgrist.com/formulas/#trigger-formulas\",\n  helpTryingOutChanges: \"https://support.getgrist.com/copying-docs/#trying-out-changes\",\n  helpCustomWidgets: \"https://support.getgrist.com/widget-custom\",\n  helpTelemetryLimited: \"https://support.getgrist.com/telemetry-limited\",\n  plans: \"https://www.getgrist.com/pricing\",\n  sproutsProgram: \"https://www.getgrist.com/sprouts-program\",\n  contact: \"https://www.getgrist.com/contact\",\n  templates: 'https://www.getgrist.com/templates',\n  community: 'https://community.getgrist.com',\n  functions: 'https://support.getgrist.com/functions',\n  formulaSheet: 'https://support.getgrist.com/formula-cheat-sheet',\n\n  basicTutorial: 'https://templates.getgrist.com/woXtXUBmiN5T/Grist-Basics',\n  basicTutorialImage: 'https://www.getgrist.com/wp-content/uploads/2021/08/lightweight-crm.png',\n  gristLabsCustomWidgets: 'https://gristlabs.github.io/grist-widget/',\n  gristLabsWidgetRepository: 'https://github.com/gristlabs/grist-widget/releases/download/latest/manifest.json',\n  githubGristCore: 'https://github.com/gristlabs/grist-core',\n  githubSponsorGristLabs: 'https://github.com/sponsors/gristlabs',\n};\n\n/**\n * Values representable in a URL. The current state is available as urlState().state observable\n * in client. Updates to this state are expected by functions such as makeUrl() and setLinkUrl().\n */\nexport interface IGristUrlState {\n  org?: string;\n  homePage?: IHomePage;\n  ws?: number;\n  doc?: string;\n  slug?: string;       // if present, this is based on the document title, and is not a stable id\n  mode?: OpenDocMode;\n  fork?: UrlIdParts;\n  docPage?: IDocPage;\n  account?: AccountPage;\n  billing?: BillingPage;\n  activation?: ActivationPage;\n  login?: LoginPage;\n  welcome?: WelcomePage;\n  supportGrist?: SupportGristPage;\n  welcomeTour?: boolean;\n  docTour?: boolean;\n  manageUsers?: boolean;\n  createTeam?: boolean;\n  params?: {\n    billingPlan?: string;\n    planType?: string;\n    billingTask?: BillingTask;\n    embed?: boolean;\n    state?: string;\n    style?: InterfaceStyle;\n    compare?: string;\n    linkParameters?: Record<string, string>;  // Parameters to pass as 'user.Link' in granular ACLs.\n                                              // Encoded in URL as query params with extra '_' suffix.\n    themeSyncWithOs?: boolean;\n    themeAppearance?: ThemeAppearance;\n    themeName?: ThemeName;\n  };\n  hash?: HashLink;   // if present, this specifies an individual row within a section of a page.\n}\n\n// Subset of GristLoadConfig used by getOrgUrlInfo(), which affects the interpretation of the\n// current URL.\nexport interface OrgUrlOptions {\n  // The org associated with the current URL.\n  org?: string;\n\n  // Base domain for constructing new URLs, should start with \".\" and not include port, e.g.\n  // \".getgrist.com\". It should be unset for localhost operation and in single-org mode.\n  baseDomain?: string;\n\n  // In single-org mode, this is the single well-known org.\n  singleOrg?: string;\n\n  // Base URL used for accessing plugin material.\n  pluginUrl?: string;\n\n  // If set, org is expected to be encoded in the path, not domain.\n  pathOnly?: boolean;\n}\n\n// Result of getOrgUrlInfo().\nexport interface OrgUrlInfo {\n  hostname?: string;      // If hostname should be changed to access the requested org.\n  orgInPath?: string;     // If /o/{orgInPath} should be used to access the requested org.\n}\n\n/**\n * Given host (optionally with port), baseDomain, and pluginUrl, determine whether to interpret host\n * as a custom domain, a native domain, or a plugin domain.\n */\nexport function getHostType(host: string, options: {\n  baseDomain?: string, pluginUrl?: string\n}): 'native' | 'custom' | 'plugin' {\n\n  if (options.pluginUrl) {\n    const url = new URL(options.pluginUrl);\n    if (url.host.toLowerCase() === host.toLowerCase()) {\n      return 'plugin';\n    }\n  }\n\n  const hostname = host.split(\":\")[0];\n  if (!options.baseDomain) { return 'native'; }\n  if (hostname !== 'localhost' && !hostname.endsWith(options.baseDomain)) { return 'custom'; }\n  return 'native';\n}\n\nexport function getOrgUrlInfo(newOrg: string, currentHost: string, options: OrgUrlOptions): OrgUrlInfo {\n  if (newOrg === options.singleOrg) {\n    return {};\n  }\n  if (options.pathOnly) {\n    return {orgInPath: newOrg};\n  }\n  const hostType = getHostType(currentHost, options);\n  if (hostType !== 'plugin') {\n    const hostname = currentHost.split(\":\")[0];\n    if (!options.baseDomain || hostname === 'localhost') {\n      return {orgInPath: newOrg};\n    }\n  }\n  if (newOrg === options.org && hostType !== 'native') {\n    return {};\n  }\n  return {hostname: newOrg + options.baseDomain};\n}\n\n/**\n * The actual serialization of a url state into a URL. The URL has the form\n *    <org-base>/\n *    <org-base>/ws/<ws>/\n *    <org-base>/doc/<doc>[/p/<docPage>]\n *\n * where <org-base> depends on whether subdomains are in use, e.g.\n *    <org>.getgrist.com\n *    localhost:8080/o/<org>\n */\nexport function encodeUrl(gristConfig: Partial<GristLoadConfig>,\n                          state: IGristUrlState, baseLocation: Location | URL,\n                          options: {\n                            // make an api url - warning: just barely works, and\n                            // only for documents\n                            api?: boolean,\n                            tweaks?: UrlTweaks,\n                          } = {}): string {\n  const url = new URL(baseLocation.href);\n  const parts = ['/'];\n\n  if (state.org) {\n    // We figure out where to stick the org using the gristConfig and the current host.\n    const {hostname, orgInPath} = getOrgUrlInfo(state.org, baseLocation.host, gristConfig);\n    if (hostname) {\n      url.hostname = hostname;\n    }\n    if (orgInPath) {\n      parts.push(`o/${orgInPath}/`);\n    }\n  }\n\n  if (options.api) {\n    parts.push(`api/`);\n  }\n  if (state.ws) { parts.push(`ws/${state.ws}/`); }\n  if (state.doc) {\n    if (options.api) {\n      parts.push(`docs/${encodeURIComponent(state.doc)}`);\n    } else if (state.slug) {\n      parts.push(`${encodeURIComponent(state.doc)}/${encodeURIComponent(state.slug)}`);\n    } else {\n      parts.push(`doc/${encodeURIComponent(state.doc)}`);\n    }\n    if (state.mode && OpenDocMode.guard(state.mode)) {\n      parts.push(`/m/${state.mode}`);\n    }\n    if (state.docPage) {\n      parts.push(`/p/${state.docPage}`);\n    }\n  } else if (state.homePage === 'trash' || state.homePage === 'templates') {\n    parts.push(`p/${state.homePage}`);\n  }\n\n  if (state.account) {\n    parts.push(state.account === 'account' ? 'account' : `account/${state.account}`);\n  }\n\n  if (state.billing) {\n    parts.push(state.billing === 'billing' ? 'billing' : `billing/${state.billing}`);\n  }\n\n  if (state.activation) { parts.push(state.activation); }\n\n  if (state.login) { parts.push(state.login); }\n\n  if (state.welcome) {\n    parts.push(`welcome/${state.welcome}`);\n  }\n\n  if (state.supportGrist) { parts.push(state.supportGrist); }\n\n  const queryParams = pickBy(state.params, (v, k) => k !== 'linkParameters') as {[key: string]: string};\n  for (const [k, v] of Object.entries(state.params?.linkParameters || {})) {\n    queryParams[`${k}_`] = v;\n  }\n  const hashParts: string[] = [];\n  if (state.hash && (state.hash.rowId || state.hash.popup)) {\n    const hash = state.hash;\n    hashParts.push(state.hash?.popup ? 'a2' : `a1`);\n    for (const key of ['sectionId', 'rowId', 'colRef'] as Array<keyof HashLink>) {\n      const partValue = hash[key];\n      if (partValue) {\n        const partKey = key === 'rowId' && state.hash?.rickRow ? 'rr' : key[0];\n        hashParts.push(`${partKey}${partValue}`);\n      }\n    }\n  }\n  const queryStr = encodeQueryParams(queryParams);\n\n  url.pathname = parts.join('');\n  url.search = queryStr;\n\n  if (state.hash) {\n    // Project tests use hashes, so only set hash if there is an anchor.\n    url.hash = hashParts.join('.');\n  } else if (state.welcomeTour) {\n    url.hash = 'repeat-welcome-tour';\n  } else if (state.docTour) {\n    url.hash = 'repeat-doc-tour';\n  } else if (state.manageUsers) {\n    url.hash = 'manage-users';\n  } else if (state.createTeam) {\n    url.hash = 'create-team';\n  } else {\n    url.hash = '';\n  }\n  options.tweaks?.postEncode?.({\n    url,\n    parts,\n    state,\n    baseLocation,\n  });\n  return url.href;\n}\n\n/**\n * Parse a URL location into an IGristUrlState object. See encodeUrl() documentation.\n */\nexport function decodeUrl(gristConfig: Partial<GristLoadConfig>, location: Location | URL, options?: {\n  tweaks?: UrlTweaks,\n}): IGristUrlState {\n  location = new URL(location.href);  // Make sure location is a URL.\n  options?.tweaks?.preDecode?.({ url: location });\n  const parts = location.pathname.slice(1).split('/');\n  const map = new Map<string, string>();\n  for (let i = 0; i < parts.length; i += 2) {\n    map.set(parts[i], decodeURIComponent(parts[i + 1]));\n  }\n  // When the urlId is a prefix of the docId, documents are identified\n  // as \"<urlId>/slug\" instead of \"doc/<urlId>\".  We can detect that because\n  // the minimum length of a urlId prefix is longer than the maximum length\n  // of any of the valid keys in the url.\n  for (const key of map.keys()) {\n    if (key.length >= MIN_URLID_PREFIX_LENGTH && !LoginPage.guard(key) && !SupportGristPage.guard(key)) {\n      map.set('doc', key);\n      map.set('slug', map.get(key)!);\n      map.delete(key);\n      break;\n    }\n  }\n\n  const state: IGristUrlState = {};\n  const subdomain = parseSubdomain(location.host);\n  if (gristConfig.org || gristConfig.singleOrg) {\n    state.org = gristConfig.org || gristConfig.singleOrg;\n  } else if (!gristConfig.pathOnly && subdomain.org) {\n    state.org = subdomain.org;\n  }\n  const sp = new URLSearchParams(location.search);\n  if (location.search) { state.params = {}; }\n  if (map.has('o')) { state.org = map.get('o'); }\n  if (map.has('ws')) { state.ws = parseInt(map.get('ws')!, 10); }\n  if (map.has('doc')) {\n    state.doc = map.get('doc');\n    const fork = parseUrlId(map.get('doc')!);\n    if (fork.forkId) { state.fork = fork; }\n    if (map.has('slug')) { state.slug = map.get('slug'); }\n    if (map.has('p')) { state.docPage = parseDocPage(map.get('p')!); }\n  } else {\n    if (map.has('p')) {\n      const p = map.get('p')!;\n      state.homePage = HomePage.parse(p);\n    }\n  }\n  if (map.has('m')) { state.mode = OpenDocMode.parse(map.get('m')); }\n  if (map.has('account')) { state.account = AccountPage.parse(map.get('account')) || 'account'; }\n  if (map.has('billing')) { state.billing = BillingSubPage.parse(map.get('billing')) || 'billing'; }\n  if (map.has('activation')) {\n    state.activation = ActivationPage.parse(map.get('activation')) || 'activation';\n  }\n  if (map.has('welcome')) { state.welcome = WelcomePage.parse(map.get('welcome')); }\n  if (map.has('support-grist')) {\n    state.supportGrist = SupportGristPage.parse(map.get('support-grist')) || 'support-grist';\n  }\n  if (sp.has('planType')) { state.params!.planType = sp.get('planType')!; }\n  if (sp.has('billingPlan')) { state.params!.billingPlan = sp.get('billingPlan')!; }\n  if (sp.has('billingTask')) {\n    state.params!.billingTask = BillingTask.parse(sp.get('billingTask'));\n  }\n\n  if (map.has('signup')) {\n    state.login = 'signup';\n  } else if (map.has('login')) {\n    state.login = 'login';\n  } else if (map.has('verified')) {\n    state.login = 'verified';\n  } else if (map.has('forgot-password')) {\n    state.login = 'forgot-password';\n  }\n  if (sp.has('state')) {\n    state.params!.state = sp.get('state')!;\n  }\n\n  if (sp.has('style')) {\n    let style = sp.get('style');\n    if (style === 'light') {\n      style = 'singlePage';\n    }\n\n    state.params!.style = InterfaceStyle.parse(style);\n  }\n  if (sp.has('embed')) {\n    const embed = state.params!.embed = isAffirmative(sp.get('embed'));\n    // Turn view mode on if no mode has been specified, and not a fork.\n    if (embed && !state.mode && !state.fork) { state.mode = 'view'; }\n    // Turn on single page style if no style has been specified.\n    if (embed && !state.params!.style) { state.params!.style = 'singlePage'; }\n  }\n\n  // Theme overrides\n  if (sp.has('themeSyncWithOs')) {\n    state.params!.themeSyncWithOs = isAffirmative(sp.get('themeSyncWithOs'));\n  }\n\n  if (sp.has('themeAppearance')) {\n    const appearance = sp.get('themeAppearance');\n    if (ThemeAppearanceChecker.strictTest(appearance)) {\n      state.params!.themeAppearance = appearance;\n    }\n  }\n\n  if (sp.has('themeName')) {\n    const themeName = sp.get('themeName');\n    if (ThemeNameChecker.strictTest(themeName)) {\n      state.params!.themeName = themeName;\n    }\n  }\n\n  if (sp.has('compare')) {\n    state.params!.compare = sp.get('compare')!;\n  }\n  for (const [k, v] of sp.entries()) {\n    if (k.endsWith('_')) {\n      if (!state.params!.linkParameters) { state.params!.linkParameters = {}; }\n      state.params!.linkParameters[k.slice(0, k.length - 1)] = v;\n    }\n  }\n  if (location.hash) {\n    const hash = location.hash;\n    const hashParts = hash.split('.');\n    const hashMap = new Map<string, string>();\n    for (const part of hashParts) {\n      if (part.startsWith('rr')) {\n        hashMap.set(part.slice(0, 2), part.slice(2));\n      } else {\n        hashMap.set(part.slice(0, 1), part.slice(1));\n      }\n    }\n    if (hashMap.has('#') && ['a1', 'a2'].includes(hashMap.get('#') || '')) {\n      const link: HashLink = {};\n      const keys = [\n        'sectionId',\n        'rowId',\n        'colRef',\n      ] as Array<Exclude<keyof HashLink, 'popup' | 'rickRow'>>;\n      for (const key of keys) {\n        let ch: string;\n        if (key === 'rowId' && hashMap.has('rr')) {\n          ch = 'rr';\n          link.rickRow = true;\n        } else {\n          ch = key.substr(0, 1);\n          if (!hashMap.has(ch)) { continue; }\n        }\n        const value = hashMap.get(ch);\n        if (key === 'rowId' && value === 'new') {\n          link[key] = 'new';\n        } else {\n          link[key] = parseInt(value!, 10);\n        }\n      }\n      if (hashMap.get('#') === 'a2') {\n        link.popup =  true;\n      }\n      state.hash = link;\n    }\n    state.welcomeTour = hashMap.get('#') === 'repeat-welcome-tour';\n    state.docTour = hashMap.get('#') === 'repeat-doc-tour';\n    state.manageUsers = hashMap.get('#') === 'manage-users';\n    state.createTeam = hashMap.get('#') === 'create-team';\n  }\n  return state;\n}\n\n// Returns a function suitable for user with makeUrl/setHref/etc, which updates aclAsUser*\n// linkParameters in the current state, unsetting them if email is null. Optional extraState\n// allows setting other properties (e.g. 'docPage') at the same time.\nexport function userOverrideParams(email: string|null, extraState?: IGristUrlState) {\n  return function(prevState: IGristUrlState): IGristUrlState {\n    const combined = {...prevState, ...extraState};\n    const linkParameters = clone(combined.params?.linkParameters) || {};\n    if (email) {\n      linkParameters.aclAsUser = email;\n    } else {\n      delete linkParameters.aclAsUser;\n    }\n    delete linkParameters.aclAsUserId;\n    return {...combined, params: {...combined.params, linkParameters}};\n  };\n}\n\n/**\n * parseDocPage is a noop for special pages, otherwise parse to integer\n */\nfunction parseDocPage(p: string): IDocPage {\n  if (SpecialDocPage.guard(p)) {\n    return p;\n  }\n  return parseInt(p, 10);\n}\n\n/**\n * Parses the URL like \"foo.bar.baz\" into the pair {org: \"foo\", base: \".bar.baz\"}.\n * Port is allowed and included into base.\n *\n * The \"base\" part is required to have at least two periods.  The \"org\" part must pass\n * the subdomainRegex test.\n *\n * If there's no way to parse the URL into such a pair, then an empty object is returned.\n */\nexport function parseSubdomain(host: string|undefined): {org?: string, base?: string} {\n  if (!host) { return {}; }\n  const match = /^([^.]+)(\\..+\\..+)$/.exec(host.toLowerCase());\n  if (match) {\n    const org = match[1];\n    const base = match[2];\n    if (subdomainRegex.exec(org)) {\n      return {org, base};\n    }\n  }\n  // Host has nowhere to put a subdomain.\n  return {};\n}\n\n// Allowed localhost addresses.\nconst localhostRegex = /^localhost(?::(\\d+))?$/i;\n\n/**\n * Like parseSubdomain, but throws an error if neither of these cases apply:\n *   - host can be parsed into a valid subdomain and a valid base domain.\n *   - host is localhost:NNNN\n * An empty object is only returned when host is localhost:NNNN.\n */\nexport function parseSubdomainStrictly(host: string|undefined): {org?: string, base?: string} {\n  if (!host) { throw new Error('host not known'); }\n  const result = parseSubdomain(host);\n  if (result.org) { return result; }\n  if (!host.match(localhostRegex)) {\n    throw new Error(`host not understood: ${host}`);\n  }\n  // Host is localhost[:NNNN], no org available.\n  return {};\n}\n\n/**\n * These settings get sent to the client along with the loaded page. At the minimum, the browser\n * needs to know the URL of the home API server (e.g. api.getgrist.com).\n */\nexport interface GristLoadConfig {\n  // URL of the Home API server for the browser client to use.\n  homeUrl: string|null;\n\n  // When loading /doc/{docId}, we include the id used to assign the document (this is the docId).\n  assignmentId?: string;\n\n  // Org or \"subdomain\". When present, this overrides org information from the hostname. We rely\n  // on this for custom domains, but set it generally for all pages.\n  org?: string;\n\n  // Base domain for constructing new URLs, should start with \".\" and not include port, e.g.\n  // \".getgrist.com\". It should be unset for localhost operation and in single-org mode.\n  baseDomain?: string;\n\n  // In single-org mode, this is the single well-known org. Suppress any org selection UI.\n  singleOrg?: string;\n\n  // Url for support for the browser client to use.\n  helpCenterUrl?: string;\n\n  // When set, this directs the client to encode org information in path, not in domain.\n  pathOnly?: boolean;\n\n  // Type of error page to show. This is used for pages such as \"signed-out\" and \"not-found\",\n  // which don't include the full app.\n  errPage?: string;\n\n  // When errPage is a generic \"other-error\", this is the message to show.\n  errMessage?: string;\n\n  // URL for client to use for untrusted content.\n  pluginUrl?: string;\n\n  // Stripe API key for use on the client.\n  stripeAPIKey?: string;\n\n  // BeaconID for the support widget from HelpScout.\n  helpScoutBeaconId?: string;\n\n  // If set, enable anonymous sharing UI elements.\n  supportAnon?: boolean;\n\n  // If set, allow selection of the specified engines.\n  // TODO: move this list to a separate endpoint.\n  supportEngines?: EngineCode[];\n\n  // Max upload allowed for imports (except .grist files), in bytes; 0 or omitted for unlimited.\n  maxUploadSizeImport?: number;\n\n  // Max upload allowed for attachments, in bytes; 0 or omitted for unlimited.\n  maxUploadSizeAttachment?: number;\n\n  // Pre-fetched call to getDoc for the doc being loaded.\n  getDoc?: {[id: string]: Document};\n\n  // Pre-fetched call to getWorker for the doc being loaded.\n  getWorker?: {[id: string]: string|null};\n\n  // The timestamp when this gristConfig was generated.\n  timestampMs: number;\n\n  // Google Client Id, used in Google integration (ex: Google Drive Plugin)\n  googleClientId?: string;\n\n  // Max scope we can request for accessing files from Google Drive.\n  // Default used by Grist is https://www.googleapis.com/auth/drive.file:\n  // View and manage Google Drive files and folders that you have opened or created with this app.\n  // More on scopes: https://developers.google.com/identity/protocols/oauth2/scopes#drive\n  googleDriveScope?: string;\n\n  // List of registered plugins (used by HomePluginManager and DocPluginManager)\n  plugins?: LocalPlugin[];\n\n  // If custom widget list is available.\n  enableWidgetRepository?: boolean;\n\n  // Whether there is somewhere for survey data to go.\n  survey?: boolean;\n\n  // Google Tag Manager id. Currently only used to load tag manager for reporting new sign-ups.\n  tagManagerId?: string;\n\n  activation?: Activation;\n\n  // List of enabled features.\n  features?: IFeature[];\n\n  // String to append to the end of the HTML document.title\n  pageTitleSuffix?: string;\n\n  // If custom CSS should be included in the head of each page.\n  enableCustomCss?: boolean;\n\n  // Supported languages for the UI. By default only english (en) is supported.\n  supportedLngs?: readonly string[];\n\n  // Loaded namespaces for translations.\n  namespaces?: readonly string[];\n\n  // TODO: remove when comments will be released.\n  featureComments?: boolean;\n\n  // TODO: remove once released.\n  featureFormulaAssistant?: boolean;\n\n  permittedCustomWidgets?: IAttachedCustomWidget[];\n\n  // Used to determine which disclosure links should be provided to user of\n  // formula assistance.\n  assistantService?: 'OpenAI' | undefined;\n\n  // Email address of the support user.\n  supportEmail?: string;\n\n  // Current user locale, read from the user options;\n  userLocale?: string;\n\n  // Telemetry config.\n  telemetry?: TelemetryConfig;\n\n  // The Grist deployment type (e.g. core, enterprise).\n  deploymentType?: GristDeploymentType;\n\n  // The org containing public templates and tutorials.\n  templateOrg?: string|null;\n}\n\nexport const Features = StringUnion(\n  \"helpCenter\",\n  \"billing\",\n  \"templates\",\n  \"multiSite\",\n  \"multiAccounts\",\n  \"sendToDrive\",\n  \"tutorials\",\n);\nexport type IFeature = typeof Features.type;\n\nexport function isFeatureEnabled(feature: IFeature): boolean {\n  return (getGristConfig().features || []).includes(feature);\n}\n\nexport function getPageTitleSuffix(config?: GristLoadConfig) {\n  return config?.pageTitleSuffix ?? \" - Grist\";\n}\n\nexport interface TelemetryConfig {\n  telemetryLevel: TelemetryLevel;\n}\n\nexport const GristDeploymentTypes = StringUnion('saas', 'core', 'enterprise', 'electron', 'static');\nexport type GristDeploymentType = typeof GristDeploymentTypes.type;\n\n/**\n * For a packaged version of Grist that requires activation, this\n * summarizes the current state. Not applicable to grist-core.\n */\nexport interface ActivationState {\n  trial?: {                  // Present when installation has not yet been activated.\n    days: number;            // Max number of days allowed prior to activation.\n    expirationDate: string;  // ISO8601 date that Grist will get cranky.\n    daysLeft: number;        // Number of days left until Grist will get cranky.\n  }\n  needKey?: boolean;         // Set when Grist is cranky and demanding activation.\n  key?: {                    // Set when Grist is activated.\n    expirationDate?: string; // ISO8601 date that Grist will need reactivation.\n    daysLeft?: number;       // Number of days until Grist will need reactivation.\n  }\n}\n\nexport interface Activation extends ActivationState {\n  isManager: boolean;\n}\n\n// Acceptable org subdomains are alphanumeric (hyphen also allowed) and of\n// non-zero length.\nconst subdomainRegex = /^[-a-z0-9]+$/i;\n\nexport interface OrgParts {\n  subdomain: string|null;\n  orgFromHost: string|null;\n  orgFromPath: string|null;\n  pathRemainder: string;\n  mismatch: boolean;\n}\n\n/**\n * Returns true if code is running in client, false if running in server.\n */\nexport function isClient() {\n  return (typeof window !== 'undefined') && window && window.location && window.location.hostname;\n}\n\n/**\n * Returns a known org \"subdomain\" if Grist is configured in single-org mode\n * (GRIST_SINGLE_ORG=<org> on the server) or if the page includes an org in gristConfig.\n */\nexport function getKnownOrg(): string|null {\n  if (isClient()) {\n    const gristConfig: GristLoadConfig = (window as any).gristConfig;\n    return (gristConfig && gristConfig.singleOrg) || null;\n  } else {\n    return process.env.GRIST_SINGLE_ORG || null;\n  }\n}\n\nexport function getHelpCenterUrl(): string|null {\n  if(isClient()) {\n    const gristConfig: GristLoadConfig = (window as any).gristConfig;\n    return gristConfig && gristConfig.helpCenterUrl || null;\n  } else {\n    return process.env.GRIST_HELP_CENTER || null;\n  }\n}\n\n/**\n * Like getKnownOrg, but respects singleOrg/GRIST_SINGLE_ORG strictly.\n * The main difference in behavior would be for orgs with custom domains\n * served from a shared pool of servers, for which gristConfig.org would\n * be set, but not gristConfig.singleOrg.\n */\nexport function getSingleOrg(): string|null {\n  if (isClient()) {\n    const gristConfig: GristLoadConfig = (window as any).gristConfig;\n    return (gristConfig && gristConfig.singleOrg) || null;\n  } else {\n    return process.env.GRIST_SINGLE_ORG || null;\n  }\n}\n\n/**\n * Returns true if org must be encoded in path, not in domain.  Determined from\n * gristConfig on the client.  On the server, returns true if the host is\n * supplied and is 'localhost', or if GRIST_ORG_IN_PATH is set to 'true'.\n */\nexport function isOrgInPathOnly(host?: string): boolean {\n  if (isClient()) {\n    const gristConfig: GristLoadConfig = (window as any).gristConfig;\n    return (gristConfig && gristConfig.pathOnly) || false;\n  } else {\n    if (host && host.match(localhostRegex)) { return true; }\n    return (process.env.GRIST_ORG_IN_PATH === 'true');\n  }\n}\n\n// Extract an organization name from the host.  Returns null if an organization name\n// could not be recovered.  Organization name may be overridden by server configuration.\nexport function getOrgFromHost(reqHost: string): string|null {\n  const singleOrg = getKnownOrg();\n  if (singleOrg) { return singleOrg; }\n  if (isOrgInPathOnly()) { return null; }\n  return parseSubdomain(reqHost).org || null;\n}\n\n/**\n * Get any information about an organization that is embedded in the host name or the\n * path.\n * For example, on nasa.getgrist.com, orgFromHost and subdomain will be set to \"nasa\".\n * On localhost:8000/o/nasa, orgFromPath and subdomain will be set to \"nasa\".\n * On nasa.getgrist.com/o/nasa, orgFromHost, orgFromPath, and subdomain will all be \"nasa\".\n * On spam.getgrist.com/o/nasa, orgFromHost will be \"spam\", orgFromPath will be \"nasa\",\n * subdomain will be null, and mismatch will be true.\n */\nexport function extractOrgParts(reqHost: string|undefined, reqPath: string): OrgParts {\n  let orgFromHost: string|null = getKnownOrg();\n\n  if (!orgFromHost && reqHost) {\n    orgFromHost = getOrgFromHost(reqHost);\n    if (orgFromHost) {\n      // Some subdomains are shared, and do not reflect the name of an organization.\n      // See https://phab.getgrist.com/w/hosting/v1/urls/ for a list.\n      if (/^(api|v1-.*|doc-worker-.*)$/.test(orgFromHost)) {\n        orgFromHost = null;\n      }\n    }\n  }\n\n  const part = parseFirstUrlPart('o', reqPath);\n  if (part.value) {\n    const orgFromPath = part.value.toLowerCase();\n    const mismatch = Boolean(orgFromHost && orgFromPath && (orgFromHost !== orgFromPath));\n    const subdomain = mismatch ? null : orgFromPath;\n    return {orgFromHost, orgFromPath, pathRemainder: part.path, mismatch, subdomain};\n  }\n  return {orgFromHost, orgFromPath: null, pathRemainder: reqPath, mismatch: false, subdomain: orgFromHost};\n}\n\n/**\n * When a prefix is extracted from the path, the remainder of the path may be empty.\n * This method makes sure there is at least a \"/\".\n */\nexport function sanitizePathTail(path: string|undefined) {\n  path = path || '/';\n  return (path.startsWith('/') ? '' : '/') + path;\n}\n\n/*\n * If path starts with /{tag}/{value}{/rest}, returns value and the remaining path (/rest).\n * Otherwise, returns value of undefined and the path unchanged.\n * E.g. parseFirstUrlPart('o', '/o/foo/bar') returns {value: 'foo', path: '/bar'}.\n */\nexport function parseFirstUrlPart(tag: string, path: string): {value?: string, path: string} {\n  const match = path.match(/^\\/([^/?#]+)\\/([^/?#]+)(.*)$/);\n  if (match && match[1] === tag) {\n    return {value: match[2], path: sanitizePathTail(match[3])};\n  } else {\n    return {path};\n  }\n}\n\n/**\n * The internal structure of a UrlId.  There is no internal structure. unless the id is\n * for a fork, in which case the fork has a separate id, and a user id may also be\n * embedded to track ownership.\n */\nexport interface UrlIdParts {\n  trunkId: string;\n  forkId?: string;\n  forkUserId?: number;\n  snapshotId?: string;\n}\n\n// Parse a string of the form trunkId or trunkId~forkId or trunkId~forkId~forkUserId\n// or trunkId[....]~v=snapshotId\nexport function parseUrlId(urlId: string): UrlIdParts {\n  let snapshotId: string|undefined;\n  const parts = urlId.split('~');\n  const bareParts = parts.filter(part => !part.includes('='));\n  for (const part of parts) {\n    if (part.startsWith('v=')) {\n      snapshotId = decodeURIComponent(part.substr(2).replace(/_/g, '%'));\n    }\n  }\n  return {\n    trunkId: bareParts[0],\n    forkId: bareParts[1],\n    forkUserId: (bareParts[2] !== undefined) ? parseInt(bareParts[2], 10) : undefined,\n    snapshotId,\n  };\n}\n\n// Construct a string of the form trunkId or trunkId~forkId or trunkId~forkId~forkUserId\n// or trunkId[....]~v=snapshotId\nexport function buildUrlId(parts: UrlIdParts): string {\n  let token = [parts.trunkId, parts.forkId, parts.forkUserId].filter(x => x !== undefined).join('~');\n  if (parts.snapshotId) {\n    // This could be an S3 VersionId, about which AWS makes few promises.\n    // encodeURIComponent leaves untouched the following:\n    //   alphabetic; decimal; any of: - _ . ! ~ * ' ( )\n    // We further encode _.!~*'() to fit within existing limits on what characters\n    // may be in a docId (leaving just the hyphen, which is permitted).  The limits\n    // could be loosened, but without much benefit.\n    const codedSnapshotId = encodeURIComponent(parts.snapshotId)\n      .replace(/[_.!~*'()]/g, ch => `_${ch.charCodeAt(0).toString(16).toUpperCase()}`)\n      .replace(/%/g, '_');\n    token = `${token}~v=${codedSnapshotId}`;\n  }\n  return token;\n}\n\n/**\n * Values that may be encoded in a hash in a document url.\n */\nexport interface HashLink {\n  sectionId?: number;\n  rowId?: UIRowId;\n  colRef?: number;\n  popup?: boolean;\n  rickRow?: boolean;\n}\n\n// Check whether a urlId is a prefix of the docId, and adequately long to be\n// a candidate for use in prettier urls.\nfunction shouldIncludeSlug(doc: {id: string, urlId: string|null}): boolean {\n  if (!doc.urlId || doc.urlId.length < MIN_URLID_PREFIX_LENGTH) { return false; }\n  return doc.id.startsWith(doc.urlId);\n}\n\n// Convert the name of a document into a slug.  Only alphanumerics are retained,\n// and spaces are replaced with hyphens.\n// TODO: investigate whether there's a better option with unicode than just\n// deleting it, seems unfair to languages using anything other than unaccented\n// Latin characters.\nfunction nameToSlug(name: string): string {\n  return name.trim().replace(/ /g, '-').replace(/[^-a-zA-Z0-9]/g, '').replace(/---*/g, '-');\n}\n\n// Returns a slug for the given docId/urlId/name, or undefined if a slug should\n// not be used.\nexport function getSlugIfNeeded(doc: {id: string, urlId: string|null, name: string}): string|undefined {\n  if (!shouldIncludeSlug(doc)) { return; }\n  return nameToSlug(doc.name);\n}\n\n/**\n * It is possible we want to remap Grist URLs in some way - specifically,\n * grist-static does this. We allow for a hook that is called after\n * encoding state as a URL, and a hook that is called before decoding\n * state from a URL.\n */\nexport interface UrlTweaks {\n  /**\n   * Tweak an encoded URL. Operates on the URL directly, in place.\n   */\n  postEncode?(options: {\n    url: URL,\n    parts: string[],\n    state: IGristUrlState,\n    baseLocation: Location | URL,\n  }): void;\n\n  /**\n   * Tweak a URL prior to decoding it. Operates on the URL directly, in place.\n   */\n  preDecode?(options: {\n    url: URL,\n  }): void;\n}\n","import {delay} from 'app/common/delay';\nimport {BindableValue, DomElementMethod, IKnockoutReadObservable, ISubscribable, Listener, Observable,\n        subscribeElem, UseCB, UseCBOwner} from 'grainjs';\nimport {Observable as KoObservable} from 'knockout';\nimport identity = require('lodash/identity');\n\n// Some definitions have moved to be used by plugin API.\nexport {arrayRepeat} from 'app/plugin/gutil';\n\nexport const UP_TRIANGLE = '\\u25B2';\nexport const DOWN_TRIANGLE = '\\u25BC';\n\nconst EMAIL_RE = new RegExp(\"^\\\\w[\\\\w%+/='-]*(\\\\.[\\\\w%+/='-]+)*@([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z\" +\n  \"0-9])?\\\\.)+[A-Za-z]{2,6}$\", \"u\");\n\n// Returns whether str starts with prefix. (Note that this implementation avoids creating a new\n// string, and only checks a single location.)\nexport function startsWith(str: string, prefix: string): boolean {\n  return str.lastIndexOf(prefix, 0) === 0;\n}\n\n// Returns whether str ends with suffix.\nexport function endsWith(str: string, suffix: string): boolean {\n  return str.indexOf(suffix, str.length - suffix.length) !== -1;\n}\n\n// If str starts with prefix, removes it and returns what remains. Otherwise, returns null.\nexport function removePrefix(str: string, prefix: string): string|null {\n  return startsWith(str, prefix) ? str.slice(prefix.length) : null;\n}\n\n\n// If str ends with suffix, removes it and returns what remains. Otherwise, returns null.\nexport function removeSuffix(str: string, suffix: string): string|null {\n  return endsWith(str, suffix) ? str.slice(0, str.length - suffix.length) : null;\n}\n\nexport function removeTrailingSlash(str: string): string {\n  const result = removeSuffix(str, '/');\n  return result === null ? str : result;\n}\n\n// Expose <string>.padStart.  The version of node we use has it, but they typings\n// need the es2017 typescript target.  TODO: replace once typings in place.\nexport function padStart(str: string, targetLength: number, padString: string) {\n  return (str as any).padStart(targetLength, padString);\n}\n\n// Capitalizes every word in a string.\nexport function capitalize(str: string): string {\n  return str.replace(/\\b[a-z]/gi, c => c.toUpperCase());\n}\n\n// Capitalizes the first word in a string.\nexport function capitalizeFirstWord(str: string): string {\n  return str.replace(/\\b[a-z]/i, c => c.toUpperCase());\n}\n\n// Returns whether the string n represents a valid number.\n// http://stackoverflow.com/questions/18082/validate-numbers-in-javascript-isnumeric\nexport function isNumber(n: string): boolean {\n  // This wasn't right for a long time: isFinite() is key to failing on strings like \"5a\".\n  return !isNaN(parseFloat(n)) && isFinite(n as any);\n}\n\n/**\n * Returns a value clamped to the given min-max range.\n * @param {Number} value - some numeric value.\n * @param {Number} min - minimum value allowed.\n * @param {Number} max - maximum value allowed. Must have min <= max.\n * @returns {Number} - value restricted to the given range.\n */\nexport function clamp(value: number, min: number, max: number): number {\n  return Math.max(min, Math.min(max, value));\n}\n\n/**\n * Checks if ele is contained within the given bounds.\n * @param {Number} value\n * @param {Number} bound1 - does not have to be less than/equal to bound2\n * @param {Number} bound2\n * @returns {Boolean} - True/False\n */\nexport function between(value: number, bound1: number, bound2: number): boolean {\n  const lower = Math.min(bound1, bound2);\n  const upper = Math.max(bound1, bound2);\n  return lower <= value && value <= upper;\n}\n\n/**\n * Returns the positive modulo of x by n. (Javascript default allows negatives)\n */\nexport function mod(x: number, n: number): number {\n  return ((x % n) + n) % n;\n}\n\n/**\n * Returns a number that is n rounded down to the next nearest number divisible by m\n */\n\nexport function roundDownToMultiple(n: number, m: number): number {\n  return Math.floor(n / m) * m;\n}\n\n/**\n * Returns the first argument unless it's undefined, in which case returns the second one.\n */\nexport function undefDefault<T>(x: T|undefined, y: T): T {\n  return (x !== void 0) ? x : y;\n}\n\n// for typescript 4\n// type Undef<T> = T extends [infer A, ...infer B] ? undefined extends A ? NonNullable<A> | Undef<B> : A : unknown;\n\ntype Undef1<T> = T extends [infer A] ? A : unknown;\n\ntype Undef2<T> = T extends [infer A, infer B] ?\n    undefined extends A ? NonNullable<A> | Undef1<[B]> : A : Undef1<T>;\n\ntype Undef3<T> = T extends [infer A, infer B, infer C] ?\n    undefined extends A ? NonNullable<A> | Undef2<[B, C]> : A : Undef2<T>;\n\ntype Undef<T> = T extends [infer A, infer B, infer C, infer D] ?\n    undefined extends A ? NonNullable<A> | Undef3<[B, C, D]> : A : Undef3<T>;\n\n/*\n\nUndef<T> can detect correct type that will be returned as a first defined value:\n\nconst t1: number = undef(1, 1 as number | undefined);\nconst t1: number | undefined = undef(2 as number | undefined, 3 as number | undefined);\nconst t3: number = undef(3 as number | undefined, undefined, 4);\nconst t4: number = undef(1, '');\nconst t5: number = undef(1 as number | undefined, 4);\nconst t6: string = undef('1', 2);\nconst t7: string | number = undef(undefined, 2 as number | undefined, '3');\nconst t8: string = undef(undefined, undefined, '3');\nconst t9: string = undef(undefined, '2' as string | undefined, '3');\nconst ta: string | number | undefined = undef(undefined, '2' as string | undefined, 3 as number | undefined);\nconst tb: string | number = undef(undefined, '2' as string | undefined, 3 as number | undefined, 5);\n*/\n\n/**\n * Returns the first defined value from the list or unknown.\n * Use with typed result, so the typescript type checker can provide correct type.\n */\nexport function undef<T extends Array<any>>(...list: T): Undef<T> {\n  for(const value of list) {\n    if (value !== undefined) { return value; }\n  }\n  return undefined as any;\n}\n\n/**\n * Like undef, but each element of list is a method that is only called\n * if needed, and promises are supported. No fancy type inference though, sorry.\n */\nexport async function firstDefined<T>(...list: Array<() => Promise<T>>): Promise<T | undefined> {\n  for(const op of list) {\n    const value = await op();\n    if (value !== undefined) { return value; }\n  }\n  return undefined;\n}\n\n/**\n * Parses json and returns the result, or returns defaultVal if parsing fails.\n */\nexport function safeJsonParse(json: string, defaultVal: any): any {\n  try {\n    return json !== '' && json !== undefined ? JSON.parse(json) : defaultVal;\n  } catch (e) {\n    return defaultVal;\n  }\n}\n\n/**\n * Just like encodeURIComponent, but does not encode slashes. Slashes don't hurt to be included in\n * URL parameters, and look much friendlier not encoded.\n */\nexport function encodeQueryParam(str: string|number|undefined): string {\n  return encodeURIComponent(String(str === undefined ? null : str)).replace(/%2F/g, '/');\n}\n\n/**\n * Encode an object into a querystring (\"key=value&key2=value2\").\n * This is similar to JQuery's $.param, but only works on shallow objects.\n */\nexport function encodeQueryParams(obj: {[key: string]: string|number|undefined}): string {\n  return Object.keys(obj).map((k: string) => encodeQueryParam(k) + '=' + encodeQueryParam(obj[k])).join('&');\n}\n\n/**\n * Return a list of the words in the string, using the given separator string. At most\n * maxNumSplits splits are done, so the result will have at most maxNumSplits + 1 elements (this\n * is the main difference from how JS built-in string.split() works, and similar to Python split).\n * @param {String} str: String to split.\n * @param {String} sep: Separator to split on.\n * @param {Number} maxNumSplits: Maximum number of splits to do.\n * @return {Array[String]} Array of words, of length at most maxNumSplits + 1.\n */\nexport function maxsplit(str: string, sep: string, maxNumSplits: number): string[] {\n  const result: string[] = [];\n  let start = 0, pos;\n  for (let i = 0; i < maxNumSplits; i++) {\n    pos = str.indexOf(sep, start);\n    if (pos === -1) {\n      break;\n    }\n    result.push(str.slice(start, pos));\n    start = pos + sep.length;\n  }\n  result.push(str.slice(start));\n  return result;\n}\n\n\n// Compare arrays of scalars for equality.\nexport function arraysEqual(a: any[], b: any[]): boolean {\n  if (a === b) {\n    return true;\n  }\n  if (!a || !b) {\n    return false;\n  }\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  for (let i = 0; i < a.length; i++) {\n    if (a[i] !== b[i]) { return false; }\n  }\n  return true;\n}\n\n\n// Gives a set representing the set difference a - b.\nexport function setDifference<T>(a: Set<T>, b: Set<T>): Set<T> {\n  const c = new Set<T>();\n  for (const ai of a) {\n    if (!b.has(ai)) { c.add(ai); }\n  }\n  return c;\n}\n\n// Like array.indexOf, but works with array-like objects like HTMLCollection.\nexport function indexOf<T>(arrayLike: ArrayLike<T>, item: T): number {\n  return Array.prototype.indexOf.call(arrayLike, item);\n}\n\n\n/**\n * Removes a value from the given array. Only the first instance is removed.\n * Returns true on success, false if the value was not found.\n */\nexport function arrayRemove<T>(array: T[], value: T): boolean {\n  const index = array.indexOf(value);\n  if (index === -1) {\n    return false;\n  }\n  array.splice(index, 1);\n  return true;\n}\n\n\n/**\n * Inserts value into the array before nextValue, or at the end if nextValue is not found.\n */\nexport function arrayInsertBefore<T>(array: T[], value: T, nextValue: T): void {\n  const index = array.indexOf(nextValue);\n  if (index === -1) {\n    array.push(value);\n  } else {\n    array.splice(index, 0, value);\n  }\n}\n\n\n/**\n * Extends the first array with the second. Like native push, but adds all values in anotherArray.\n */\nexport function arrayExtend<T>(array: T[], anotherArray: T[]): void {\n  for (let i = 0, len = anotherArray.length; i < len; i++) {\n    array.push(anotherArray[i]);\n  }\n}\n\n\n/**\n * Copies count items from fromArray to toArray, copying in a forward direction (which matters\n * when the arrays are the same and source and destination indices overlap).\n *\n * See test/common/arraySplice.js for alternative implementations with timings, from which this\n * one is chosen as consistently among the faster ones.\n */\nexport function arrayCopyForward<T>(toArray: T[], toStart: number,\n                                    fromArray: ArrayLike<T>, fromStart: number, count: number): void {\n  const end = toStart + count;\n  for (const xend = end - 7; toStart < xend; fromStart += 8, toStart += 8) {\n    toArray[toStart] = fromArray[fromStart];\n    toArray[toStart + 1] = fromArray[fromStart + 1];\n    toArray[toStart + 2] = fromArray[fromStart + 2];\n    toArray[toStart + 3] = fromArray[fromStart + 3];\n    toArray[toStart + 4] = fromArray[fromStart + 4];\n    toArray[toStart + 5] = fromArray[fromStart + 5];\n    toArray[toStart + 6] = fromArray[fromStart + 6];\n    toArray[toStart + 7] = fromArray[fromStart + 7];\n  }\n  for (; toStart < end; ++fromStart, ++toStart) {\n    toArray[toStart] = fromArray[fromStart];\n  }\n}\n\n\n/**\n * Copies count items from fromArray to toArray, copying in a backward direction (which matters\n * when the arrays are the same and source and destination indices overlap).\n *\n * See test/common/arraySplice.js for alternative implementations with timings, from which this\n * one is chosen as consistently among the faster ones.\n */\nexport function arrayCopyBackward<T>(toArray: T[], toStart: number,\n                                     fromArray: ArrayLike<T>, fromStart: number, count: number): void {\n  let i = toStart + count - 1, j = fromStart + count - 1;\n  for (const xStart = toStart + 7; i >= xStart; i -= 8, j -= 8) {\n    toArray[i] = fromArray[j];\n    toArray[i - 1] = fromArray[j - 1];\n    toArray[i - 2] = fromArray[j - 2];\n    toArray[i - 3] = fromArray[j - 3];\n    toArray[i - 4] = fromArray[j - 4];\n    toArray[i - 5] = fromArray[j - 5];\n    toArray[i - 6] = fromArray[j - 6];\n    toArray[i - 7] = fromArray[j - 7];\n  }\n  for ( ; i >= toStart; --i, --j) {\n    toArray[i] = fromArray[j];\n  }\n}\n\n\n/**\n * Appends a slice of fromArray to the end of toArray.\n *\n * See test/common/arraySplice.js for alternative implementations with timings, from which this\n * one is chosen as consistently among the faster ones.\n */\nexport function arrayAppend<T>(toArray: T[], fromArray: ArrayLike<T>, fromStart: number, count: number): void {\n  if (count === 1) {\n    toArray.push(fromArray[fromStart]);\n  } else {\n    const len = toArray.length;\n    toArray.length = len + count;\n    arrayCopyForward(toArray, len, fromArray, fromStart, count);\n  }\n}\n\n\n/**\n * Splices array arrToInsert into target starting at the given start index.\n * This implementation tries to be smart by avoiding allocations, appending to the array\n * contiguously, then filling in the gap.\n *\n * See test/common/arraySplice.js for alternative implementations with timings, from which this\n * one is chosen as consistently among the faster ones.\n */\nexport function arraySplice<T>(target: T[], start: number, arrToInsert: ArrayLike<T>): T[] {\n  const origLen = target.length;\n  const tailLen = origLen - start;\n  const insLen = arrToInsert.length;\n  target.length = origLen + insLen;\n  if (insLen > tailLen) {\n    arrayCopyForward(target, origLen, arrToInsert, tailLen, insLen - tailLen);\n    arrayCopyForward(target, start + insLen, target, start, tailLen);\n    arrayCopyForward(target, start, arrToInsert, 0, tailLen);\n  } else {\n    arrayCopyForward(target, origLen, target, origLen - insLen, insLen);\n    arrayCopyBackward(target, start + insLen, target, start, tailLen - insLen);\n    arrayCopyForward(target, start, arrToInsert, 0, insLen);\n  }\n  return target;\n}\n\n\n// Type for a compare func that returns a positive, negative, or zero value, as used for sorting.\nexport type CompareFunc<T> = (a: T, b: T) => number;\n\n/**\n * Returns the index at which the given element can be inserted to keep the array sorted.\n * This is equivalent to underscore's sortedIndex and python's bisect_left.\n * @param {Array} array - sorted array of elements based on the given compareFunc\n * @param {object} elem - object to be inserted in the given array\n * @param {function} compareFunc - compares 2 elements. Returns a pos value if the 1st element is\n *                                 larger, 0 if they're equal, a neg value if the 2nd is larger.\n */\nexport function sortedIndex<T>(array: ArrayLike<T>, elem: T, compareFunc: CompareFunc<T>): number {\n  let lo = 0, mid;\n  let hi = array.length;\n\n  if (array.length === 0) { return 0; }\n  while (lo < hi) {\n    mid = Math.floor((lo + hi) / 2);\n    if (compareFunc(array[mid], elem) < 0) { // mid < elem\n      lo = mid + 1;\n    } else {\n      hi = mid;\n    }\n  }\n  return lo;\n}\n\n/**\n * Returns true if an array contains duplicate values.\n * Values are considered equal if their toString() representations are equal.\n */\nexport function hasDuplicates(array: any[]): boolean {\n  const prevVals = Object.create(null);\n  for (const value of array) {\n    if (value in prevVals) {\n      return true;\n    }\n    prevVals[value] = true;\n  }\n  return false;\n}\n\n/**\n * Counts the number of items in array which satisfy the callback.\n */\nexport function countIf<T>(array: ReadonlyArray<T>, callback: (item: T) => boolean): number {\n  let count = 0;\n  array.forEach(item => {\n    if (callback(item)) { count++; }\n  });\n  return count;\n}\n\n\n/**\n * For two parallel arrays, calls mapFunc(a[i], b[i]) for each pair of corresponding elements, and\n * returns an array of the results.\n */\nexport function map2<T, U, V>(array1: ArrayLike<T>, array2: ArrayLike<U>, mapFunc: (a: T, b: U) => V): V[] {\n  const len = array1.length;\n  const result: V[] = new Array(len);\n  for (let i = 0; i < len; i++) {\n    result[i] = mapFunc(array1[i], array2[i]);\n  }\n  return result;\n}\n\n/**\n * Takes a 2d array returns a new matrix with r rows and c columns\n * @param [Array] dataMatrix: a 2d array\n * @param [Number] r: final row length\n * @param [Number] c: final column length\n */\nexport function growMatrix<T>(dataMatrix: T[][], r: number, c: number): T[][] {\n  const colArr = dataMatrix.map(colVals =>\n    Array.from({length: c}, (_v, k) => colVals[k % colVals.length])\n  );\n  return Array.from({length: r}, (_v, k) => colArr[k % colArr.length]);\n}\n\n/**\n * Returns a function that compares two elements based on multiple sort keys and the\n * given compare functions.\n * Elements are compared using the sort key functions with index 0 having the greatest priority.\n * Subsequent sort key functions are used as tie breakers.\n * @param {function Array} sortKeyFuncs - a list of sort key functions.\n * @param {function Array} compareKeyFuncs - a list of comparison functions parallel to sortKeyFuncs\n * Each compare function  must satisfy the comparison invariant:\n *   If compare(a, b) > 0 then a > b,\n *   If compare(a, b) < 0 then a < b,\n *   If compare(a, b) == 0 then a == b,\n * @param {Array of 1/-1's} optAscending - Comparison on sortKeyFuncs[i] is inverted if optAscending[i] == -1\n */\nexport function multiCompareFunc<T, U>(sortKeyFuncs: ReadonlyArray<(a: T) => U>,\n                                       compareFuncs: ArrayLike<CompareFunc<U>>,\n                                       optAscending?: number[]): CompareFunc<T> {\n  if (sortKeyFuncs.length !== compareFuncs.length) {\n    throw new Error('Number of sort key funcs must be the same as the number of compare funcs');\n  }\n  const ascending = optAscending || sortKeyFuncs.map(() => 1);\n  return function(a: T, b: T): number {\n    let compareOutcome, keyA, keyB;\n    for (let i = 0; i < compareFuncs.length; i++) {\n      keyA = sortKeyFuncs[i](a);\n      keyB = sortKeyFuncs[i](b);\n      compareOutcome = compareFuncs[i](keyA, keyB);\n      if (compareOutcome !== 0) { return ascending[i] * compareOutcome; }\n    }\n    return 0;\n  };\n}\n\n\nexport function nativeCompare<T>(a: T, b: T): number {\n  return (a < b ? -1 : (a > b ? 1 : 0));\n}\n\n/**\n * Creates a function that compares objects by a property value.\n */\nexport function propertyCompare<T>(property: keyof T) {\n  return function(a: T, b: T) {\n    return nativeCompare(a[property], b[property]);\n  };\n}\n\n// TODO: In the future, locale should be a value associated with the document or the user.\nexport const defaultLocale = 'en-US';\nexport const defaultCollator = new Intl.Collator(defaultLocale);\nexport const localeCompare = defaultCollator.compare;\n\n/**\n * A copy of python`s `setdefault` function.\n * Sets key in mapInst to value, if key is not already set.\n * @param {Map} mapInst: Instance of Map.\n * @param {Object} key: Key into the map.\n * @param {Object} value: Value to insert, possibly.\n */\nexport function setDefault<K, V>(mapInst: Map<K, V>, key: K, val: V): V {\n  if (!mapInst.has(key)) { mapInst.set(key, val); }\n  return mapInst.get(key)!;\n}\n\n\n/**\n * Similar to Python's `setdefault`: returns the key `key` from `mapInst`, or if it's not there, sets\n * it to the result buildValue().\n */\nexport function getSetMapValue<K, V>(mapInst: Map<K, V>, key: K, buildValue: () => V): V {\n  if (!mapInst.has(key)) { mapInst.set(key, buildValue()); }\n  return mapInst.get(key)!;\n}\n\n\n/**\n * If key is in mapInst, remove it and return its value, else return `undefined`.\n * @param {Map} mapInst: Instance of Map.\n * @param {Object} key: Key into the map to remove.\n */\nexport function popFromMap<K, V>(mapInst: Map<K, V>, key: K): V|undefined {\n  const value = mapInst.get(key);\n  mapInst.delete(key);\n  return value;\n}\n\n/**\n * For each encountered value in `values`, increment the corresponding counter in `valueCounts`.\n */\nexport function addCountsToMap<T>(valueCounts: Map<T, number>, values: Iterable<T>,\n                                  mapFunc: (v: any) => any = identity) {\n  for (const v of values) {\n    const mappedValue = mapFunc(v);\n    valueCounts.set(mappedValue, (valueCounts.get(mappedValue) || 0) + 1);\n  }\n}\n\n/**\n * Returns whether one Set is a subset of another.\n */\nexport function isSubset(smaller: Set<any>, larger: Set<any>): boolean {\n  for (const value of smaller) {\n    if (!larger.has(value)) {\n      return false;\n    }\n  }\n  return true;\n}\n\n\n/**\n * Merges the contents of two or more objects together into the first object, recursing into\n * nested objects and arrays (like jquery.extend(true, ...)).\n * @param {Object} target - The object to modify. Use {} to create a new merged object.\n * @param {Object} ... - Additional objects from which to copy properties into target.\n * @returns {Object} The first argument, target, modified.\n */\nexport function deepExtend(target: any, _varArgObjects: any): any {\n  for (let i = 1; i < arguments.length; i++) {\n    const object = arguments[i];\n    // Extend the base object\n    for (const name in object) {\n      if (!object.hasOwnProperty(name)) { continue; }\n      let src = object[name];\n      if (src === target || src === undefined) {\n        // Prevent one kind of infinite loop, as JQuery's extend does, and skip undefined values.\n        continue;\n      }\n\n      if (src) {\n        // Recurse if we're merging plain objects or arrays\n        const tgt = target[name];\n        if (Array.isArray(src)) {\n          src = deepExtend(tgt && Array.isArray(tgt) ? tgt : [], src);\n        } else if (typeof src === 'object') {\n          src = deepExtend(tgt && typeof tgt === 'object' ? tgt : {}, src);\n        }\n      }\n      target[name] = src;\n    }\n  }\n  // Return the modified object\n  return target;\n}\n\n\n/**\n * Returns a human-readable string containing a number of bytes, KB, or MB.\n * @param {Number} bytes. Number of bytes.\n * @returns {String} A description such as \"4.1KB\".\n */\nexport function byteString(bytes: number): string {\n  if (bytes < 1024) {\n    return bytes + 'B';\n  } else if (bytes < 1024 * 1024) {\n    return (bytes / 1024).toFixed(1) + 'KB';\n  } else {\n    return (bytes / 1024 / 1024).toFixed(1) + 'MB';\n  }\n}\n\n\n/**\n * Creates a new object mapping each key in keysArray to the value returned by callback.\n * @param {Array} keysArray - Array of strings to use as the properties of the returned object.\n * @param {Function} callback - Function that produces the value for each key. Called in the same\n *    way as array.map() calls its callbacks.\n * @param {Object} optThisArg - Value to use as `this` when executing callback.\n * @returns {Object} - object mapping keys from `keysArray` to values returned by `callback`.\n */\nexport function mapToObject<T>(keysArray: string[], callback: (key: string) => T,\n                               optThisArg: any): {[key: string]: T} {\n  const values: T[] = keysArray.map(callback, optThisArg);\n  const map: {[key: string]: T} = {};\n  for (let i = 0; i < keysArray.length; i++) {\n    map[keysArray[i]] = values[i];\n  }\n  return map;\n}\n\n/**\n * Remove the specified elements from the array, with the elements specified by\n * their index.  The array arr is modified in-place.  The indexes must be provided\n * in order, sorted lowest to highest, with no duplicates, or out-of-bound indices,\n * etc (this method does no error checking; it is used in place of lodash-pullAt\n * for performance reasons).\n */\nexport function pruneArray<T>(arr: T[], indexes: number[]) {\n  if (indexes.length === 0) { return; }\n  if (indexes.length === 1) {\n    arr.splice(indexes[0], 1);\n    return;\n  }\n  const len = arr.length;\n  let arrAt = 0;\n  let indexesAt = 0;\n  for (let i = 0; i < len; i++) {\n    if (i === indexes[indexesAt]) {\n      indexesAt++;\n      continue;\n    }\n    if (i !== arrAt) {\n      arr[arrAt] = arr[i];\n    }\n    arrAt++;\n  }\n  arr.length = arrAt;\n}\n\n/**\n * A List of python identifiers; the result of running keywords.kwlist in Python 2.7.6,\n * plus additional illegal identifiers None, False, True\n * Using [] instead of new Array causes a \"comprehension error\" for some reason\n */\nconst _kwlist = ['and', 'as', 'assert', 'break', 'class', 'continue', 'def',\n             'del', 'elif', 'else', 'except', 'exec', 'finally', 'for', 'from', 'global',\n             'if', 'import', 'in', 'is', 'lambda', 'not', 'or', 'pass', 'print', 'raise',\n             'return', 'try', 'while', 'with', 'yield', 'None', 'False', 'True'];\n/**\n * Given an arbitrary string, makes substitutions to make it a valid SQL/Python identifier.\n * Corresponds to sandbox/grist/gencode.sanitize_ident\n */\nexport function sanitizeIdent(ident: string, prefix?: string) {\n  prefix = prefix || 'c';\n  // Remove non-alphanumeric non-_ chars\n  ident = ident.replace(/[^a-zA-Z0-9_]+/g, '_');\n  // Remove leading and trailing _\n  ident = ident.replace(/^_+|_+$/g, '');\n  // Place prefix at front if the beginning isn't a number\n  ident = ident.replace(/^(?=[0-9])/g, prefix);\n  // Append prefix until it is not  python keyword\n  while (_kwlist.includes(ident)) {\n    ident = prefix + ident;\n  }\n  return ident;\n}\n\n\n/**\n * Clone a function, returning a function object that represents a brand new function with the\n * same code. If the same function is used with different argument types, it would prevent JS V8\n * engine optimizations (or cause it to deoptimize it). If different clones are called with\n * different argument types, they can be optimized independently.\n *\n * As with all micro-optimizations, only do this when the optimization matters.\n */\nexport function cloneFunc(fn: Function): Function {     // tslint:disable-line:ban-types\n  /* jshint evil:true */  // suppress eval warning.\n  return eval('(' + fn.toString() + ')');   // tslint:disable-line:no-eval\n}\n\n\n/**\n * Generates a random id using a sequence of uppercase alphanumeric characters\n * preceded by an optional prefix.\n */\nexport function genRandomId(len: number, optPrefix?: string): string {\n  const chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n  let ret = optPrefix || '';\n  for (let i = 0; i < len; i++) {\n    ret += chars[Math.floor(Math.random() * chars.length)];\n  }\n  return ret;\n}\n\n/**\n * Scans through two sorted arrays, calling a function on each item or pair of items\n * for every present key in order.\n * @param {Array} arrA - First array to scan. NOTE: Should be sorted by the key value.\n * @param {Array} arrB - Second array to scan. NOTE: Should be sorted by the key value.\n * @param {Function} callback - Called with an item from arrA as the first argument and an\n *  item from arrB as the second. Called for every unique key in order, either with one of the\n *  arguments null if the key is present only in one array, or both non-null if the key is\n *  present in both arrays. NOTE: Key values should not be null.\n * @param {Function} optKeyFunc - Optional function to map each array value to a sort key.\n *  Defaults to the identity function.\n */\nexport function sortedScan<T, U>(arrA: ArrayLike<T>, arrB: ArrayLike<U>,\n                                 callback: (a: T|null, B: U|null) => void,\n                                 optKeyFunc?: (item: T|U) => any) {\n  const keyFunc = optKeyFunc || identity;\n  let i = 0, j = 0;\n  while (i < arrA.length || j < arrB.length) {\n    const a = arrA[i], b = arrB[j];\n    const keyA = i < arrA.length ? keyFunc(a) : null;\n    const keyB = j < arrB.length ? keyFunc(b) : null;\n    if (keyA !== null && (keyB === null || keyA < keyB)) {\n      callback(a, null);\n      i++;\n    } else if (keyA === null || keyA > keyB) {\n      callback(null, b);\n      j++;\n    } else {\n      callback(a, b);\n      i++;\n      j++;\n    }\n  }\n}\n\n/**\n * Returns the time in ms to wait until attempting another connection.\n * @param {Number} attemptNumber - Reconnect attempt number starting at 0.\n * @param {Array} intervals - Array of reconnect intervals in ms.\n * @returns {Number}\n */\nexport function getReconnectTimeout(attemptNumber: number, intervals: ArrayLike<number>): number {\n  if (attemptNumber >= intervals.length) {\n    // Add an additional wait time if already at max attempts.\n    const timeout = intervals[intervals.length - 1];\n    return timeout + Math.random() * timeout;\n  } else {\n    return intervals[attemptNumber];\n  }\n}\n\n/**\n * Returns whether the given email is a valid formatted email string.\n * @param {String} email - Email to test.\n * @returns {Boolean}\n */\nexport function isEmail(email: string): boolean {\n  return EMAIL_RE.test(email.toLowerCase());\n}\n\n/*\n * Takes an observable and returns a promise for when the observable's value matches the given\n * predicate. It then unsubscribes from the observable, and returns its value.\n * If a predicate is not given, resolves to the observable values as soon as it's truthy.\n */\nexport function waitObs<T>(observable: KoObservable<T>, predicate: (value: T) => boolean = Boolean): Promise<T> {\n  return new Promise((resolve, _reject) => {\n    const value = observable.peek();\n    if (predicate(value)) { return resolve(value); }\n    const sub = observable.subscribe((val: T) => {\n      if (predicate(val)) {\n        sub.dispose();\n        resolve(val);\n      }\n    });\n  });\n}\n\n/**\n * Same as waitObs but for grainjs observables.\n */\nexport async function waitGrainObs<T>(observable: Observable<T>): Promise<NonNullable<T>>;\nexport async function waitGrainObs<T>(observable: Observable<T>, predicate?: (value: T) => boolean): Promise<T>;\nexport async function waitGrainObs<T>(observable: Observable<T>,\n                                      predicate: (value: T) => boolean = Boolean): Promise<T> {\n  let sub: Listener|undefined;\n  const res: T = await new Promise((resolve, _reject) => {\n    const value = observable.get();\n    if (predicate(value)) { return resolve(value); }\n    sub = observable.addListener((val: T) => {\n      if (predicate(val)) {\n        resolve(val);\n      }\n    });\n  });\n  if (sub) { sub.dispose(); }\n  return res;\n}\n\n\n// `dom.style` does not work here because custom css property (ie: `--foo`) needs to be set using\n// `style.setProperty` (credit: https://vanseodesign.com/css/custom-properties-and-javascript/).\n// TODO: consider making PR to fix `dom.style` in grainjs.\nexport function inlineStyle(property: string, valueObs: BindableValue<string>): DomElementMethod {\n  return (elem) => subscribeElem(elem, valueObs, (val) => {\n    elem.style.setProperty(property, val);\n  });\n}\n\n\n/**\n * Class to maintain a chain of promise-returning callbacks. All scheduled callbacks will be\n * called in order as long as the previous one is successful. If a callback fails is rejected,\n * already-scheduled callbacks will be skipped, but newly-scheduled ones will be run.\n */\nexport class PromiseChain<T> {\n  private _last: Promise<T|void> = Promise.resolve();\n\n  // Adds a callback to the chain. If the callback runs, the return value is the return value of\n  // the callback. If it's skipped due to a failure earlier in the chain, the return value is the\n  // rejection with the message \"Skipped due to an earlier error\".\n  public add(nextCB: () => Promise<T>): Promise<T> {\n    const next = this._last.catch(() => { throw new Error(\"Skipped due to an earlier error\"); }).then(nextCB);\n    // If any callback fails, all queued ones will be skipped. Here we reset the chain, so that\n    // callbacks added later do get run.\n    next.catch(() => { this._last = Promise.resolve(); });\n    this._last = next;\n    return next;\n  }\n}\n\n/**\n * Indicates if a hex color value, e.g. '#000000', is darker than the given value.\n * Darkness is measured from 0..255, where 0 is the darkest and 255 is the lightest.\n *\n * Taken from: https://stackoverflow.com/questions/12043187/how-to-check-if-hex-color-is-too-black\n */\nexport function isColorDark(hexColor: string, isDarkBelow: number = 220): boolean {\n  const c = hexColor.substring(1);  // strip #\n  const rgb = parseInt(c, 16);      // convert rrggbb to decimal\n  // Extract RGB components\n  const r = (rgb >> 16) & 0xff;     // tslint:disable-line:no-bitwise\n  const g = (rgb >>  8) & 0xff;     // tslint:disable-line:no-bitwise\n  const b = (rgb >>  0) & 0xff;     // tslint:disable-line:no-bitwise\n\n  const luma = 0.2126 * r + 0.7152 * g + 0.0722 * b;  // per ITU-R BT.709\n  return luma < isDarkBelow;\n}\n\n/**\n * Returns true if val is a valid hex color value. For instance: #aabbaa is valid, #aabba is not. Do\n * not accept neither short notation nor hex with transparency, ie: #aab, #aabb and #aabbaabb are\n * invalid.\n */\nexport function isValidHex(val: string): boolean {\n  return /^#([0-9A-F]{6})$/i.test(val);\n}\n\n\n/**\n * Returns a promise that resolves to true if promise takes longer than timeoutMsec to resolve. If not\n * or if promise throws returns false.\n */\nexport async function isLongerThan(promise: Promise<any>, timeoutMsec: number): Promise<boolean> {\n  let isPending = true;\n  const done = () => { isPending = false; };\n  await Promise.race([\n    promise.then(done, done),\n    delay(timeoutMsec)\n  ]);\n  return isPending;\n}\n\n/**\n * Returns true if the parameter, when rendered as a string, matches\n * 1, on, or true (case insensitively).  Useful for processing query\n * parameters that may have been manually set.\n */\nexport function isAffirmative(parameter: any): boolean {\n  return ['1', 'on', 'true', 'yes'].includes(String(parameter).toLowerCase());\n}\n\n/**\n * Returns whether a value is neither null nor undefined, with a type guard for the return type.\n *\n * This is particularly useful for filtering, e.g. if `array` includes values of type\n * T|null|undefined, then TypeScript can tell that `array.filter(isNonNullish)` has the type T[].\n */\nexport function isNonNullish<T>(value: T | null | undefined): value is T {\n  return value !== null && value !== undefined;\n}\n\n/**\n * Returns the value of both grainjs and knockout observable without creating a dependency.\n */\nexport const unwrap: UseCB = (obs: ISubscribable) => {\n  if ('_getDepItem' in obs) {\n    return obs.get();\n  }\n  return (obs as ko.Observable).peek();\n};\n\n/**\n * Use helper for simple boolean negation.\n */\nexport const not = (obs: Observable<any>|IKnockoutReadObservable<any>) => (use: UseCBOwner) => !use(obs);\n\n/**\n * Get a set of up to `count` distinct values of `values`.\n */\nexport function getDistinctValues<T>(values: readonly T[], count: number = Infinity): Set<T> {\n  const distinct = new Set<T>();\n  // Add values to the set until it reaches the desired size, or until there are no more values.\n  for (let i = 0; i < values.length && distinct.size < count; i++) {\n    distinct.add(values[i]);\n  }\n  return distinct;\n}\n\n/**\n * Asserts that variable `name` has a non-nullish `value`.\n */\nexport function assertIsDefined<T>(name: string, value: T): asserts value is NonNullable<T> {\n  if (value === undefined || value === null) {\n    throw new Error(`Expected '${name}' to be defined, but received ${value}`);\n  }\n}\n\n/**\n * Calls function `fn`, passes any thrown errors to function `recover`, and finally calls `fn`\n * once more if `recover` doesn't throw.\n */\nexport async function retryOnce<T>(fn: () => Promise<T>, recover: (e: unknown) => Promise<void>): Promise<T> {\n  try {\n    return await fn();\n  } catch (e) {\n    await recover(e);\n    return await fn();\n  }\n}\n\n/**\n * Checks if value is 'empty' (like null, undefined, empty string, empty array/set/map, empty object).\n * Values like 0, true, false are not empty.\n */\nexport function notSet(value: any) {\n  return value === undefined || value === null || value === ''\n         || (Array.isArray(value) && !value.length)\n         || (typeof value === 'object' && !Object.keys(value).length)\n         || (['[object Map]', '[object Set'].includes(value.toString()) && !value.size);\n}\n\n/**\n * Checks if value is 'empty', if it is, returns the default value (which is null).\n */\nexport function ifNotSet(value: any, def: any = null) {\n  return notSet(value) ? def : value;\n}\n","import {Organization} from 'app/common/UserAPI';\n\nexport const OWNER  = 'owners';\nexport const EDITOR = 'editors';\nexport const VIEWER = 'viewers';\nexport const GUEST  = 'guests';\nexport const MEMBER = 'members';\n\n// Roles ordered from most to least permissive.\nconst roleOrder: Array<Role|null> = [OWNER, EDITOR, VIEWER, MEMBER, GUEST, null];\n\nexport type BasicRole = 'owners'|'editors'|'viewers';\nexport type NonMemberRole = BasicRole|'guests';\nexport type NonGuestRole = BasicRole|'members';\nexport type Role = NonMemberRole|'members';\n\n// Returns the BasicRole (or null) with the same effective access as the given role.\nexport function getEffectiveRole(role: Role|null): BasicRole|null {\n  if (role === GUEST || role === MEMBER) {\n    return VIEWER;\n  } else {\n    return role;\n  }\n}\n\nexport function canEditAccess(role: string|null): boolean {\n  return role === OWNER;\n}\n\n// Note that while canEdit has the same return value as canDelete, the functions are\n// kept separate as they may diverge in the future.\nexport function canEdit(role: string|null): boolean {\n  return role === OWNER || role === EDITOR;\n}\n\nexport function canDelete(role: string|null): boolean {\n  return role === OWNER || role === EDITOR;\n}\n\nexport function canView(role: string|null): boolean {\n  return role !== null;\n}\n\nexport function isOwner(resource: {access: Role}|null): resource is {access: Role} {\n  return resource?.access === OWNER;\n}\n\nexport function isOwnerOrEditor(resource: {access: Role}|null): resource is {access: Role} {\n  return canEdit(resource?.access ?? null);\n}\n\nexport function canUpgradeOrg(org: Organization|null): org is Organization {\n  // TODO: Need to consider billing managers and support user.\n  return isOwner(org);\n}\n\n// Returns true if the role string is a valid role or null.\nexport function isValidRole(role: string|null): role is Role|null {\n  return (roleOrder as Array<string|null>).includes(role);\n}\n\n// Returns true if the role string is a valid non-Guest, non-Member, non-null role.\nexport function isBasicRole(role: string|null): role is BasicRole {\n  return Boolean(role && role !== GUEST && role !== MEMBER && isValidRole(role));\n}\n\n// Returns true if the role string is a valid non-Guest, non-null role.\nexport function isNonGuestRole(role: string|null): role is NonGuestRole {\n  return Boolean(role && role !== GUEST && isValidRole(role));\n}\n\n/**\n * Returns out of any number of group role names the one that offers more permissions. The function\n * is overloaded so that the output type matches the specificity of the input values.\n */\nexport function getStrongestRole<T extends Role|null>(...args: T[]): T {\n  return getFirstMatchingRole(roleOrder, args);\n}\n\n/**\n * Returns out of any number of group role names the one that offers fewer permissions. The function\n * is overloaded so that the output type matches the specificity of the input values.\n */\nexport function getWeakestRole<T extends Role|null>(...args: T[]): T {\n  return getFirstMatchingRole(roleOrder.slice().reverse(), args);\n}\n\n// Returns which of the `anyOf` args comes first in `array`. Helper for getStrongestRole\n// and getWeakestRole.\nfunction getFirstMatchingRole<T extends Role|null>(array: Array<Role|null>, anyOf: T[]): T {\n  if (anyOf.length === 0) {\n    throw new Error(`getFirstMatchingRole: No roles given`);\n  }\n  for (const role of anyOf) {\n    if (!isValidRole(role)) {\n      throw new Error(`getFirstMatchingRole: Invalid role ${role}`);\n    }\n  }\n  return array.find((item) => anyOf.includes(item as T)) as T;\n}\n","/**\n * Returns the Google Tag Manager snippet to insert into <head> of the page, if\n * `tagId` is set to a non-empty value. Otherwise returns an empty string.\n */\nexport function getTagManagerSnippet(tagId?: string) {\n  // Note also that we only insert the snippet for the <head>. The second recommended part (for\n  // <body>) is for <noscript> scenario, which doesn't apply to the Grist app (such visits, if\n  // any, wouldn't work and shouldn't be counted for any metrics we care about).\n  if (!tagId) { return \"\"; }\n\n  return `\n<!-- Google Tag Manager -->\n<script>${getTagManagerScript(tagId)}</script>\n<!-- End Google Tag Manager -->\n`;\n}\n\n/**\n * Returns the body of the Google Tag Manager script. This is suitable for use by the client,\n * since it must dynamically load it by calling `document.createElement('script')` and setting\n * its `innerHTML`.\n */\nexport function getTagManagerScript(tagId: string) {\n  return `(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','${tagId}');`;\n}\n","/**\n * A version of Function.bind() that preserves types.\n */\n\n// tslint:disable:max-line-length\n\n// Bind just the context for a function of up to 4 args.\nexport function tbind<T, R, Args extends any[]>(func: (this: T, ...a: Args) => R, context: T): (...a: Args) => R;\n\n// Bind context and first arg for a function of up to 5 args.\nexport function tbind<T, R, X, Args extends any[]>(\n  func: (this: T, x: X, ...a: Args) => R, context: T, x: X\n): (...a: Args) => R;\n\nexport function tbind(func: any, context: any, ...boundArgs: any[]): any {\n  return func.bind(context, ...boundArgs);\n}\n","import {ThemeColors} from 'app/common/ThemePrefs';\n\nexport const GristDark: ThemeColors = {\n  /* Text */\n  'text': '#EFEFEF',\n  'text-light': '#A4A4A4',\n  'text-dark': '#FFFFFF',\n  'text-error': '#FF6666',\n  'text-danger': '#FFA500',\n  'text-disabled': '#A4A4A4',\n\n  /* Page */\n  'page-bg': '#262633',\n  'page-backdrop': 'black',\n\n  /* Page Panels */\n  'page-panels-main-panel-bg': '#32323F',\n  'page-panels-left-panel-bg': '#262633',\n  'page-panels-right-panel-bg': '#262633',\n  'page-panels-top-header-bg': '#32323F',\n  'page-panels-bottom-footer-bg': '#32323F',\n  'page-panels-border': '#57575F',\n  'page-panels-border-resizing': '#1DA270',\n  'page-panels-side-panel-opener-fg': '#A4A4A4',\n  'page-panels-side-panel-opener-active-fg': '#FFFFFF',\n  'page-panels-side-panel-opener-active-bg': '#1DA270',\n\n  /* Add New */\n  'add-new-circle-fg': '#FFFFFF',\n  'add-new-circle-bg': '#157A54',\n  'add-new-circle-hover-bg': '#0A5438',\n  'add-new-circle-small-fg': '#FFFFFF',\n  'add-new-circle-small-bg': '#1DA270',\n  'add-new-circle-small-hover-bg': '#157A54',\n\n  /* Top Bar */\n  'top-bar-button-primary-fg': '#1DA270',\n  'top-bar-button-secondary-fg': '#A4A4A4',\n  'top-bar-button-disabled-fg': '#69697D',\n  'top-bar-button-error-fg': 'FF6666',\n\n  /* Notifications */\n  'notifications-panel-header-bg': '#262633',\n  'notifications-panel-body-bg': '#32323F',\n  'notifications-panel-border': '#69697D',\n\n  /* Toasts */\n  'toast-text': '#FFFFFF',\n  'toast-text-light': '#929299',\n  'toast-bg': '#040404',\n  'toast-memo-text': '#EFEFEF',\n  'toast-memo-bg': '#555563',\n  'toast-error-icon': '#D0021B',\n  'toast-error-bg': '#D0021B',\n  'toast-success-icon': '#009058',\n  'toast-success-bg': '#009058',\n  'toast-warning-icon': '#F9AE41',\n  'toast-warning-bg': '#DD962C',\n  'toast-info-icon': '#3B82F6',\n  'toast-info-bg': '#3B82F6',\n  'toast-control-fg': '#16B378',\n  'toast-control-info-fg': '#87B2F9',\n\n  /* Tooltips */\n  'tooltip-fg': 'white',\n  'tooltip-bg': 'rgba(0, 0, 0, 0.75)',\n  'tooltip-icon': '#A4A4A4',\n  'tooltip-close-button-fg': 'white',\n  'tooltip-close-button-hover-fg': 'black',\n  'tooltip-close-button-hover-bg': 'white',\n  'tooltip-popup-header-fg': '#EFEFEF',\n  'tooltip-popup-header-bg': '#1DA270',\n\n  /* Modals */\n  'modal-bg': '#32323F',\n  'modal-backdrop': 'rgba(0,0,0,0.6)',\n  'modal-border': '#57575F',\n  'modal-border-dark': '#69697D',\n  'modal-border-hover': '#A4A4A4',\n  'modal-shadow-inner': '#000000',\n  'modal-shadow-outer': '#000000',\n  'modal-close-button-fg': '#A4A4A4',\n  'modal-backdrop-close-button-fg': '#1DA270',\n  'modal-backdrop-close-button-hover-fg': '#157A54',\n\n  /* Popups */\n  'popup-bg': '#32323F',\n  'popup-shadow-inner': '#000000',\n  'popup-shadow-outer': '#000000',\n  'popup-close-button-fg': '#A4A4A4',\n\n  /* Prompts */\n  'prompt-fg': '#A4A4A4',\n\n  /* Progress Bars */\n  'progress-bar-fg': '#1DA270',\n  'progress-bar-error-fg': '#FF6666',\n  'progress-bar-bg': '#69697D',\n\n  /* Links */\n  'link': '#1DA270',\n  'link-hover': '#1DA270',\n\n  /* Hover */\n  'hover': 'rgba(111,111,117,0.6)',\n  'hover-light': 'rgba(111,111,117,0.4)',\n\n  /* Cell Editor */\n  'cell-editor-fg': '#FFFFFF',\n  'cell-editor-bg': '#32323F',\n\n  /* Cursor */\n  'cursor': '#1DA270',\n  'cursor-inactive': 'rgba(29,162,112,0.5)',\n  'cursor-readonly': '#A4A4A4',\n\n  /* Tables */\n  'table-header-fg': '#EFEFEF',\n  'table-header-selected-fg': '#EFEFEF',\n  'table-header-bg': '#262633',\n  'table-header-selected-bg': '#414358',\n  'table-header-border': '#57575F',\n  'table-header-border-dark': '#69697D',\n  'table-body-bg': '#32323F',\n  'table-body-border': '#69697D',\n  'table-add-new-bg': '#4A4A5D',\n  'table-scroll-shadow': '#000000',\n  'table-frozen-columns-border': '#A4A4A4',\n  'table-drag-drop-indicator': '#A4A4A4',\n  'table-drag-drop-shadow': 'rgba(111,111,117,0.6)',\n\n  /* Cards */\n  'card-compact-widget-bg': '#262633',\n  'card-compact-record-bg': '#32323F',\n  'card-blocks-bg': '#404150',\n  'card-form-label': '#A4A4A4',\n  'card-compact-label': '#A4A4A4',\n  'card-blocks-label': '#A4A4A4',\n  'card-form-border': '#69697D',\n  'card-compact-border': '#69697D',\n  'card-editing-layout-bg': 'rgba(85, 85, 99, 0.2)',\n  'card-editing-layout-border': '#69697D',\n\n  /* Card Lists */\n  'card-list-form-border': '#57575F',\n  'card-list-blocks-border': '#57575F',\n\n  /* Selection */\n  'selection': 'rgba(22,179,120,0.15)',\n  'selection-darker': 'rgba(22,179,120,0.25)',\n  'selection-darkest': 'rgba(22,179,120,0.35)',\n  'selection-opaque-fg': 'white',\n  'selection-opaque-bg': '#2F4748',\n  'selection-opaque-dark-bg': '#253E3E',\n  'selection-header': 'rgba(107,107,144,0.4)',\n\n  /* Widgets */\n  'widget-bg': '#32323F',\n  'widget-border': '#57575F',\n  'widget-active-border': '#1DA270',\n  'widget-inactive-stripes-light': '#262633',\n  'widget-inactive-stripes-dark': '#32323F',\n\n  /* Pinned Docs */\n  'pinned-doc-footer-bg': '#32323F',\n  'pinned-doc-border': '#57575F',\n  'pinned-doc-border-hover': '#A4A4A4',\n  'pinned-doc-editor-bg': '#57575F',\n\n  /* Raw Data */\n  'raw-data-table-border': '#57575F',\n  'raw-data-table-border-hover': '#A4A4A4',\n\n  /* Controls */\n  'control-fg': '#1DA270',\n  'control-primary-fg': '#FFFFFF',\n  'control-primary-bg': '#1DA270',\n  'control-secondary-fg': '#A4A4A4',\n  'control-hover-fg': '#157A54',\n  'control-primary-hover-bg': '#157A54',\n  'control-secondary-hover-fg': '#EFEFEF',\n  'control-secondary-hover-bg': '#57575F',\n  'control-disabled-fg': '#A4A4A4',\n  'control-disabled-bg': '#69697D',\n  'control-primary-disabled': '#5F8C7B',\n  'control-border': '1px solid #1DA270',\n\n  /* Checkboxes */\n  'checkbox-bg': '#32323F',\n  'checkbox-disabled-bg': '#69697D',\n  'checkbox-border': '#69697D',\n  'checkbox-border-hover': '#57575F',\n\n  /* Move Docs */\n  'move-docs-selected-fg': '#FFFFFF',\n  'move-docs-selected-bg': '#1DA270',\n  'move-docs-disabled-bg': '#69697D',\n\n  /* Filter Bar */\n  'filter-bar-button-saved-fg': '#FFFFFF',\n  'filter-bar-button-saved-bg': '#555563',\n  'filter-bar-button-saved-hover-bg': '#69697D',\n\n  /* Icons */\n  'icon-disabled': '#A4A4A4',\n  'icon-error': '#FFA500',\n\n  /* Icon Buttons */\n  'icon-button-fg': '#FFFFFF',\n  'icon-button-primary-bg': '#1DA270',\n  'icon-button-primary-hover-bg': '#157A54',\n  'icon-button-secondary-bg': '#69697D',\n  'icon-button-secondary-hover-bg': '#A4A4A4',\n\n  /* Left Panel */\n  'left-panel-page-hover-bg': 'rgba(111,111,117,0.25)',\n  'left-panel-active-page-fg': '#EFEFEF',\n  'left-panel-active-page-bg': '#555563',\n  'left-panel-disabled-page-fg': '#69697D',\n  'left-panel-page-options-fg': '#A4A4A4',\n  'left-panel-page-options-hover-fg': '#FFFFFF',\n  'left-panel-page-options-hover-bg': '#69697D',\n  'left-panel-page-options-selected-hover-bg': '#A4A4A4',\n  'left-panel-page-initials-fg': 'white',\n  'left-panel-page-initials-bg': '#929299',\n  'left-panel-page-emoji-fg': 'black',\n  'left-panel-page-emoji-outline': '#69697D',\n\n  /* Right Panel */\n  'right-panel-tab-fg': '#EFEFEF',\n  'right-panel-tab-bg': '#262633',\n  'right-panel-tab-icon': '#A4A4A4',\n  'right-panel-tab-icon-hover': '#1DA270',\n  'right-panel-tab-hover-bg': 'rgba(111,111,117,0.6)',\n  'right-panel-tab-selected-fg': '#FFFFFF',\n  'right-panel-tab-selected-bg': '#1DA270',\n  'right-panel-tab-button-hover-bg': '#157A54',\n  'right-panel-subtab-fg': '#1DA270',\n  'right-panel-subtab-selected-fg': '#EFEFEF',\n  'right-panel-subtab-selected-underline': '#1DA270',\n  'right-panel-subtab-hover-fg': '#157A54',\n  'right-panel-subtab-hover-underline': '#1DA270',\n  'right-panel-disabled-overlay': '#262633',\n  'right-panel-toggle-button-enabled-fg': '#FFFFFF',\n  'right-panel-toggle-button-enabled-bg': '#555563',\n  'right-panel-toggle-button-enabled-hover-fg': '#D9D9D9',\n  'right-panel-toggle-button-disabled-fg': '#FFFFFF',\n  'right-panel-toggle-button-disabled-bg': '#333333',\n  'right-panel-field-settings-bg': '#414358',\n  'right-panel-field-settings-button-bg': '#57575F',\n\n  /* Document History */\n  'document-history-snapshot-fg': '#EFEFEF',\n  'document-history-snapshot-selected-fg': '#EFEFEF',\n  'document-history-snapshot-bg': '#32323F',\n  'document-history-snapshot-selected-bg': '#555563',\n  'document-history-snapshot-border': '#69697D',\n  'document-history-activity-text': '#EFEFEF',\n  'document-history-activity-text-light': '#A4A4A4',\n\n  /* Accents */\n  'accent-icon': '#1DA270',\n  'accent-border': '#1DA270',\n  'accent-text': '#1DA270',\n\n  /* Inputs */\n  'input-fg': '#EFEFEF',\n  'input-bg': '#32323F',\n  'input-disabled-fg': '#A4A4A4',\n  'input-disabled-bg': '#262633',\n  'input-placeholder-fg': '#A4A4A4',\n  'input-border': '#69697D',\n  'input-valid': '#1DA270',\n  'input-invalid': '#FF6666',\n  'input-focus': '#5E9ED6',\n  'input-readonly-bg': '#262633',\n  'input-readonly-border': '#69697D',\n\n  /* Choice Entry */\n  'choice-entry-bg': '#32323F',\n  'choice-entry-border': '#69697D',\n  'choice-entry-border-hover': '#A4A4A4',\n\n  /* Select Buttons */\n  'select-button-fg': '#EFEFEF',\n  'select-button-placeholder-fg': '#A4A4A4',\n  'select-button-disabled-fg': '#A4A4A4',\n  'select-button-bg': '#32323F',\n  'select-button-border': '#69697D',\n  'select-button-border-invalid': '#FF6666',\n\n  /* Menus */\n  'menu-text': '#A4A4A4',\n  'menu-light-text': '#A4A4A4',\n  'menu-bg': '#32323F',\n  'menu-subheader-fg': '#EFEFEF',\n  'menu-border': '#69697D',\n  'menu-shadow': '#000000',\n\n  /* Menu Items */\n  'menu-item-fg': '#FFFFFF',\n  'menu-item-selected-fg': '#FFFFFF',\n  'menu-item-selected-bg': '#1DA270',\n  'menu-item-disabled-fg': '#69697D',\n  'menu-item-icon-fg': '#A4A4A4',\n  'menu-item-icon-selected-fg': '#FFFFFF',\n  'menu-item-link-fg': '#1DA270',\n  'menu-item-link-selected-fg': '#157A54',\n  'menu-item-link-selected-bg': '#484859',\n\n  /* Autocomplete */\n  'autocomplete-match-text': '#1DA270',\n  'autocomplete-selected-match-text': '#0A5438',\n  'autocomplete-item-selected-bg': '#69697D',\n\n  /* Search */\n  'search-border': '#69697D',\n  'search-prev-next-button-fg': '#A4A4A4',\n  'search-prev-next-button-bg': '#24242F',\n\n  /* Loading Spinners */\n  'loader-fg': '#1DA270',\n  'loader-bg': '#69697D',\n\n  /* Site Switcher */\n  'site-switcher-active-fg': '#FFFFFF',\n  'site-switcher-active-bg': '#000000',\n\n  /* Doc Menu */\n  'doc-menu-doc-options-fg': '#69697D',\n  'doc-menu-doc-options-hover-fg': '#A4A4A4',\n  'doc-menu-doc-options-hover-bg': '#69697D',\n\n  /* Shortcut Keys */\n  'shortcut-key-fg': '#FFFFFF',\n  'shortcut-key-primary-fg': '#17B378',\n  'shortcut-key-secondary-fg': '#A4A4A4',\n  'shortcut-key-bg': '#32323F',\n  'shortcut-key-border': '#A4A4A4',\n\n  /* Breadcrumbs */\n  'breadcrumbs-tag-fg': 'white',\n  'breadcrumbs-tag-bg': '#929299',\n  'breadcrumbs-tag-alert-bg': '#D0021B',\n\n  /* Page Widget Picker */\n  'widget-picker-primary-bg': '#32323F',\n  'widget-picker-secondary-bg': '#262633',\n  'widget-picker-item-fg': '#FFFFFF',\n  'widget-picker-item-selected-bg': 'rgba(111,111,117,0.6)',\n  'widget-picker-item-disabled-bg': 'rgba(111,111,117,0.6)',\n  'widget-picker-icon': '#A4A4A4',\n  'widget-picker-primary-icon': '#1DA270',\n  'widget-picker-summary-icon': '#1DA270',\n  'widget-picker-border': 'rgba(111,111,117,0.6)',\n  'widget-picker-shadow': '#000000',\n\n  /* Code View */\n  'code-view-text': '#D2D2D2',\n  'code-view-keyword': '#D2D2D2',\n  'code-view-comment': '#888888',\n  'code-view-meta': '#7CD4FF',\n  'code-view-title': '#ED7373',\n  'code-view-params': '#D2D2D2',\n  'code-view-string': '#ED7373',\n  'code-view-number': '#ED7373',\n  'code-view-builtin': '#BFE6D8',\n  'code-view-literal': '#9ED682',\n\n  /* Importer */\n  'importer-table-info-border': '#69697D',\n  'importer-preview-border': '#69697D',\n  'importer-skipped-table-overlay': 'rgba(111,111,117,0.6)',\n  'importer-match-icon': '#69697D',\n  'importer-outside-bg': '#32323F',\n  'importer-main-content-bg': '#262633',\n  'importer-active-file-bg': '#16B378',\n  'importer-active-file-fg': '#FFFFFF',\n  'importer-inactive-file-bg': '#808080',\n  'importer-inactive-file-fg': '#FFFFFF',\n\n  /* Menu Toggles */\n  'menu-toggle-fg': '#A4A4A4',\n  'menu-toggle-hover-fg': '#1DA270',\n  'menu-toggle-active-fg': '#157A54',\n  'menu-toggle-bg': '#32323F',\n  'menu-toggle-border': '#A4A4A4',\n\n  /* Info Button */\n  'info-button-fg': '#8F8F8F',\n  'info-button-hover-fg': '#707070',\n  'info-button-active-fg': '#5C5C5C',\n\n  /* Button Groups */\n  'button-group-fg': '#EFEFEF',\n  'button-group-light-fg': '#A4A4A4',\n  'button-group-bg': 'unset',\n  'button-group-icon': '#A4A4A4',\n  'button-group-border': '#69697D',\n  'button-group-border-hover': '#555563',\n  'button-group-selected-fg': '#EFEFEF',\n  'button-group-light-selected-fg': '#1DA270',\n  'button-group-selected-bg': '#555563',\n  'button-group-selected-border': '#555563',\n\n  /* Access Rules */\n  'access-rules-table-header-fg': '#EFEFEF',\n  'access-rules-table-header-bg': '#57575F',\n  'access-rules-table-body-fg': '#A4A4A4',\n  'access-rules-table-border': '#A4A4A4',\n  'access-rules-column-list-border': '#69697D',\n  'access-rules-column-item-fg': '#EFEFEF',\n  'access-rules-column-item-bg': '#57575F',\n  'access-rules-column-item-icon-fg': '#A4A4A4',\n  'access-rules-column-item-icon-hover-fg': '#EFEFEF',\n  'access-rules-column-item-icon-hover-bg': '#A4A4A4',\n  'access-rules-formula-editor-bg': '#32323F',\n  'access-rules-formula-editor-border-hover': '#69697D',\n  'access-rules-formula-editor-bg-disabled': '#57575F',\n  'access-rules-formula-editor-focus': '#1DA270',\n\n  /* Cells */\n  'cell-fg': '#FFFFFF',\n  'cell-bg': '#32323F',\n  'cell-zebra-bg': '#262633',\n\n  /* Charts */\n  'chart-fg': '#A4A4A4',\n  'chart-bg': '#32323F',\n  'chart-legend-bg': '#32323F80',\n  'chart-x-axis': '#A4A4A4',\n  'chart-y-axis': '#A4A4A4',\n\n  /* Comments */\n  'comments-popup-header-bg': '#262633',\n  'comments-popup-body-bg': '#32323F',\n  'comments-popup-border': '#69697D',\n  'comments-user-name-fg': '#DFDFDF',\n  'comments-panel-topic-bg': '#32323F',\n  'comments-panel-topic-border': '#555563',\n  'comments-panel-resolved-topic-bg': '#262634',\n\n  /* Date Picker */\n  'date-picker-selected-fg': '#FFFFFF',\n  'date-picker-selected-bg': '#7F7F7F',\n  'date-picker-selected-bg-hover': '#8F8F8F',\n  'date-picker-today-fg': '#FFFFFF',\n  'date-picker-today-bg': '#1DA270',\n  'date-picker-today-bg-hover': '#157A54',\n  'date-picker-range-start-end-bg': '#7F7F7F',\n  'date-picker-range-start-end-bg-hover': '#8F8F8F',\n  'date-picker-range-bg': '#57575F',\n  'date-picker-range-bg-hover': '#7F7F7F',\n\n  /* Tutorials */\n  'tutorials-popup-border': '#69697D',\n  'tutorials-popup-header-fg': '#FFFFFF',\n  'tutorials-popup-box-bg': '#57575F',\n\n  /* Ace */\n  'ace-editor-bg': '#32323F',\n  'ace-autocomplete-primary-fg': '#EFEFEF',\n  'ace-autocomplete-secondary-fg': '#A4A4A4',\n  'ace-autocomplete-highlighted-fg': '#FFFFFF',\n  'ace-autocomplete-bg': '#32323F',\n  'ace-autocomplete-border': '#69697D',\n  'ace-autocomplete-link': '#28BE86',\n  'ace-autocomplete-link-highlighted': '#45D48B',\n  'ace-autocomplete-active-line-bg': '#555563',\n  'ace-autocomplete-line-border-hover': 'rgba(111,111,117,0.3)',\n  'ace-autocomplete-line-bg-hover': 'rgba(111,111,117,0.3)',\n\n  /* Color Select */\n  'color-select-fg': '#EFEFEF',\n  'color-select-bg': '#32323F',\n  'color-select-shadow': '#000000',\n  'color-select-font-options-border': '#69697D',\n  'color-select-font-option-fg': '#EFEFEF',\n  'color-select-font-option-bg': '#32323F',\n  'color-select-font-option-bg-hover': '#262633',\n  'color-select-font-option-fg-selected': '#EFEFEF',\n  'color-select-font-option-bg-selected': '#555563',\n  'color-select-color-square-border': '#A4A4A4',\n  'color-select-color-square-border-empty': '#EFEFEF',\n  'color-select-input-fg': '#EFEFEF',\n  'color-select-input-bg': '#32323F',\n  'color-select-input-border': '#69697D',\n\n  /* Highlighted Code */\n  'highlighted-code-block-bg': '#262633',\n  'highlighted-code-block-bg-disabled': '#555563',\n  'highlighted-code-fg': '#A4A4A4',\n  'highlighted-code-border': '#69697D',\n  'highlighted-code-bg-disabled': '#555563',\n\n  /* Login Page */\n  'login-page-bg': '#32323F',\n  'login-page-backdrop': '#404150',\n  'login-page-line': '#57575F',\n\n  /* Formula Assistant */\n  'formula-assistant-header-bg': '#262633',\n  'formula-assistant-border': '#69697D',\n  'formula-assistant-preformatted-text-bg': '#262633',\n};\n","import {ThemeColors} from 'app/common/ThemePrefs';\n\nexport const GristLight: ThemeColors = {\n  /* Text */\n  'text': '#262633',\n  'text-light': '#929299',\n  'text-dark': 'black',\n  'text-error': '#D0021B',\n  'text-danger': '#FFA500',\n  'text-disabled': '#929299',\n\n  /* Page */\n  'page-bg': '#F7F7F7',\n  'page-backdrop': 'grey',\n\n  /* Page Panels */\n  'page-panels-main-panel-bg': 'white',\n  'page-panels-left-panel-bg': '#F7F7F7',\n  'page-panels-right-panel-bg': '#F7F7F7',\n  'page-panels-top-header-bg': 'white',\n  'page-panels-bottom-footer-bg': 'white',\n  'page-panels-border': 'rgba(217,217,217,0.6)',\n  'page-panels-border-resizing': '#16B378',\n  'page-panels-side-panel-opener-fg': '#929299',\n  'page-panels-side-panel-opener-active-fg': 'white',\n  'page-panels-side-panel-opener-active-bg': '#16B378',\n\n  /* Add New */\n  'add-new-circle-fg': '#FFFFFF',\n  'add-new-circle-bg': '#009058',\n  'add-new-circle-hover-bg': '#007548',\n  'add-new-circle-small-fg': '#FFFFFF',\n  'add-new-circle-small-bg': '#16B378',\n  'add-new-circle-small-hover-bg': '#009058',\n\n  /* Top Bar */\n  'top-bar-button-primary-fg': '#16B378',\n  'top-bar-button-secondary-fg': '#929299',\n  'top-bar-button-disabled-fg': '#D9D9D9',\n  'top-bar-button-error-fg': '#D0021B',\n\n  /* Notifications */\n  'notifications-panel-header-bg': '#F7F7F7',\n  'notifications-panel-body-bg': 'white',\n  'notifications-panel-border': '#D9D9D9',\n\n  /* Toasts */\n  'toast-text': '#FFFFFF',\n  'toast-text-light': '#929299',\n  'toast-bg': '#040404',\n  'toast-memo-text': '#FFFFFF',\n  'toast-memo-bg': '#262633',\n  'toast-error-icon': '#D0021B',\n  'toast-error-bg': '#D0021B',\n  'toast-success-icon': '#009058',\n  'toast-success-bg': '#009058',\n  'toast-warning-icon': '#F9AE41',\n  'toast-warning-bg': '#DD962C',\n  'toast-info-icon': '#3B82F6',\n  'toast-info-bg': '#3B82F6',\n  'toast-control-fg': '#16B378',\n  'toast-control-info-fg': '#87B2F9',\n\n  /* Tooltips */\n  'tooltip-fg': 'white',\n  'tooltip-bg': 'rgba(0, 0, 0, 0.75)',\n  'tooltip-icon': '#929299',\n  'tooltip-close-button-fg': 'white',\n  'tooltip-close-button-hover-fg': 'black',\n  'tooltip-close-button-hover-bg': 'white',\n  'tooltip-popup-header-fg': 'white',\n  'tooltip-popup-header-bg': '#16B378',\n\n  /* Modals */\n  'modal-bg': 'white',\n  'modal-backdrop': 'rgba(38,38,51,0.9)',\n  'modal-border': '#E8E8E8',\n  'modal-border-dark': '#D9D9D9',\n  'modal-border-hover': '#929299',\n  'modal-shadow-inner': 'rgba(31,37,50,0.31)',\n  'modal-shadow-outer': 'rgba(76,86,103,0.24)',\n  'modal-close-button-fg': '#929299',\n  'modal-backdrop-close-button-fg': '#16B378',\n  'modal-backdrop-close-button-hover-fg': '#B1FFE2',\n\n  /* Popups */\n  'popup-bg': 'white',\n  'popup-shadow-inner': 'rgba(31, 37, 50, 0.31)',\n  'popup-shadow-outer': 'rgba(76, 86, 103, 0.24)',\n  'popup-close-button-fg': '#929299',\n\n  /* Prompts */\n  'prompt-fg': '#606060',\n\n  /* Progress Bars */\n  'progress-bar-fg': '#16B378',\n  'progress-bar-error-fg': '#D0021B',\n  'progress-bar-bg': '#D9D9D9',\n\n  /* Links */\n  'link': '#16B378',\n  'link-hover': '#16B378',\n\n  /* Hover */\n  'hover': 'rgba(217,217,217,0.6)',\n  'hover-light': '#F7F7F7',\n\n  /* Cell Editor */\n  'cell-editor-fg': '#262633',\n  'cell-editor-bg': '#FFFFFF',\n\n  /* Cursor */\n  'cursor': '#16B378',\n  'cursor-inactive': '#A2E1C9',\n  'cursor-readonly': '#929299',\n\n  /* Tables */\n  'table-header-fg': 'unset',\n  'table-header-selected-fg': 'unset',\n  'table-header-bg': '#F7F7F7',\n  'table-header-selected-bg': '#E8E8E8',\n  'table-header-border': 'lightgray',\n  'table-header-border-dark': '#D9D9D9',\n  'table-body-bg': 'white',\n  'table-body-border': '#D9D9D9',\n  'table-add-new-bg': 'inherit',\n  'table-scroll-shadow': '#444444',\n  'table-frozen-columns-border': '#999999',\n  'table-drag-drop-indicator': 'gray',\n  'table-drag-drop-shadow': '#F0F0F0',\n\n  /* Cards */\n  'card-compact-widget-bg': 'rgba(217,217,217,0.6)',\n  'card-compact-record-bg': 'white',\n  'card-blocks-bg': 'rgba(217,217,217,0.6)',\n  'card-form-label': '#929299',\n  'card-compact-label': '#929299',\n  'card-blocks-label': '#929299',\n  'card-form-border': 'lightgrey',\n  'card-compact-border': '#D9D9D9',\n  'card-editing-layout-bg': 'rgba(192, 192, 192, 0.2)',\n  'card-editing-layout-border': '#D9D9D9',\n\n  /* Card Lists */\n  'card-list-form-border': '#D9D9D9',\n  'card-list-blocks-border': '#D9D9D9',\n\n  /* Selection */\n  'selection': 'rgba(22,179,120,0.15)',\n  'selection-darker': 'rgba(22,179,120,0.25)',\n  'selection-darkest': 'rgba(22,179,120,0.35)',\n  'selection-opaque-fg': 'black',\n  'selection-opaque-bg': '#DCF4EB',\n  'selection-opaque-dark-bg': '#D6EEE5',\n  'selection-header': 'rgba(217,217,217,0.6)',\n\n  /* Widgets */\n  'widget-bg': 'white',\n  'widget-border': '#D9D9D9',\n  'widget-active-border': '#16B378',\n  'widget-inactive-stripes-light': '#F7F7F7',\n  'widget-inactive-stripes-dark': '#E8E8E8',\n\n  /* Pinned Docs */\n  'pinned-doc-footer-bg': 'white',\n  'pinned-doc-border': 'rgba(217,217,217,0.6)',\n  'pinned-doc-border-hover': '#929299',\n  'pinned-doc-editor-bg': 'rgba(217,217,217,0.6)',\n\n  /* Raw Data */\n  'raw-data-table-border': 'rgba(217,217,217,0.6)',\n  'raw-data-table-border-hover': '#929299',\n\n  /* Controls */\n  'control-fg': '#16B378',\n  'control-primary-fg': '#FFFFFF',\n  'control-primary-bg': '#16B378',\n  'control-secondary-fg': '#929299',\n  'control-hover-fg': '#009058',\n  'control-primary-hover-bg': '#009058',\n  'control-secondary-hover-fg': '#262633',\n  'control-secondary-hover-bg': '#D9D9D9',\n  'control-disabled-fg': '#FFFFFF',\n  'control-disabled-bg': '#929299',\n  'control-primary-disabled': '#A2E1C9',\n  'control-border': '1px solid #11B683',\n\n  /* Checkboxes */\n  'checkbox-bg': '#FFFFFF',\n  'checkbox-disabled-bg': '#D9D9D9',\n  'checkbox-border': '#D9D9D9',\n  'checkbox-border-hover': '#BFBFBF',\n\n  /* Move Docs */\n  'move-docs-selected-fg': 'white',\n  'move-docs-selected-bg': '#16B378',\n  'move-docs-disabled-bg': '#D9D9D9',\n\n  /* Filter Bar */\n  'filter-bar-button-saved-fg': '#FFFFFF',\n  'filter-bar-button-saved-bg': '#929299',\n  'filter-bar-button-saved-hover-bg': '#D9D9D9',\n\n  /* Icons */\n  'icon-disabled': '#929299',\n  'icon-error': '#D0021B',\n\n  /* Icon Buttons */\n  'icon-button-fg': '#FFFFFF',\n  'icon-button-primary-bg': '#16B378',\n  'icon-button-primary-hover-bg': '#009058',\n  'icon-button-secondary-bg': '#D9D9D9',\n  'icon-button-secondary-hover-bg': '#929299',\n\n  /* Left Panel */\n  'left-panel-page-hover-bg': 'rgba(217,217,217,0.6)',\n  'left-panel-active-page-fg': '#FFFFFF',\n  'left-panel-active-page-bg': '#262633',\n  'left-panel-disabled-page-fg': '#BDBDBD',\n  'left-panel-page-options-fg': '#929299',\n  'left-panel-page-options-hover-fg': 'white',\n  'left-panel-page-options-hover-bg': '#D9D9D9',\n  'left-panel-page-options-selected-hover-bg': '#929299',\n  'left-panel-page-initials-fg': 'white',\n  'left-panel-page-initials-bg': '#929299',\n  'left-panel-page-emoji-fg': 'white',\n  'left-panel-page-emoji-outline': '#BDBDBD',\n\n  /* Right Panel */\n  'right-panel-tab-fg': '#262633',\n  'right-panel-tab-bg': '#F7F7F7',\n  'right-panel-tab-icon': '#929299',\n  'right-panel-tab-icon-hover': '#16B378',\n  'right-panel-tab-hover-bg': 'rgba(217,217,217,0.6)',\n  'right-panel-tab-selected-fg': '#FFFFFF',\n  'right-panel-tab-selected-bg': '#16B378',\n  'right-panel-tab-button-hover-bg': '#009058',\n  'right-panel-subtab-fg': '#16B378',\n  'right-panel-subtab-selected-fg': '#262633',\n  'right-panel-subtab-selected-underline': '#16B378',\n  'right-panel-subtab-hover-fg': '#009058',\n  'right-panel-subtab-hover-underline': '#16B378',\n  'right-panel-disabled-overlay': '#F7F7F7',\n  'right-panel-toggle-button-enabled-fg': '#FFFFFF',\n  'right-panel-toggle-button-enabled-bg': '#262633',\n  'right-panel-toggle-button-enabled-hover-fg': '#D9D9D9',\n  'right-panel-toggle-button-disabled-fg': '#FFFFFF',\n  'right-panel-toggle-button-disabled-bg': '#E8E8E8',\n  'right-panel-field-settings-bg': '#E8E8E8',\n  'right-panel-field-settings-button-bg': 'lightgrey',\n\n  /* Document History */\n  'document-history-snapshot-fg': '#262633',\n  'document-history-snapshot-selected-fg': '#FFFFFF',\n  'document-history-snapshot-bg': 'white',\n  'document-history-snapshot-selected-bg': '#262633',\n  'document-history-snapshot-border': 'rgba(217,217,217,0.6)',\n  'document-history-activity-text': '#000000',\n  'document-history-activity-text-light': '#333333',\n\n  /* Accents */\n  'accent-icon': '#16B378',\n  'accent-border': '#16B378',\n  'accent-text': '#16B378',\n\n  /* Inputs */\n  'input-fg': 'black',\n  'input-bg': 'white',\n  'input-disabled-fg': '#929299',\n  'input-disabled-bg': '#F7F7F7',\n  'input-placeholder-fg': '#929299',\n  'input-border': '#D9D9D9',\n  'input-valid': '#16B378',\n  'input-invalid': '#D0021B',\n  'input-focus': '#5E9ED6',\n  'input-readonly-bg': '#F7F7F7',\n  'input-readonly-border': '#E8E8E8',\n\n  /* Choice Entry */\n  'choice-entry-bg': 'white',\n  'choice-entry-border': '#D9D9D9',\n  'choice-entry-border-hover': '#BFBFBF',\n\n  /* Select Buttons */\n  'select-button-fg': '#262633',\n  'select-button-placeholder-fg': '#929299',\n  'select-button-disabled-fg': 'grey',\n  'select-button-bg': 'white',\n  'select-button-border': '#D9D9D9',\n  'select-button-border-invalid': '#D0021B',\n\n  /* Menus */\n  'menu-text': '#929299',\n  'menu-light-text': '#929299',\n  'menu-bg': 'white',\n  'menu-subheader-fg': 'unset',\n  'menu-border': '#E8E8E8',\n  'menu-shadow': 'rgba(38, 38, 51, 0.6)',\n\n  /* Menu Items */\n  'menu-item-fg': 'black',\n  'menu-item-selected-fg': '#FFFFFF',\n  'menu-item-selected-bg': '#16B378',\n  'menu-item-disabled-fg': '#D9D9D9',\n  'menu-item-icon-fg': '#929299',\n  'menu-item-icon-selected-fg': 'white',\n  'menu-item-link-fg': '#16B378',\n  'menu-item-link-selected-fg': '#009058',\n  'menu-item-link-selected-bg': '#E8E8E8',\n\n  /* Autocomplete */\n  'autocomplete-match-text': '#16B378',\n  'autocomplete-selected-match-text': '#B1FFE2',\n  'autocomplete-item-selected-bg': '#E8E8E8',\n\n  /* Search */\n  'search-border': 'grey',\n  'search-prev-next-button-fg': '#929299',\n  'search-prev-next-button-bg': 'rgba(217,217,217,0.6)',\n\n  /* Loaders */\n  'loader-fg': '#16B378',\n  'loader-bg': '#D9D9D9',\n\n  /* Site Switcher */\n  'site-switcher-active-fg': '#FFFFFF',\n  'site-switcher-active-bg': '#262633',\n\n  /* Doc Menu */\n  'doc-menu-doc-options-fg': '#D9D9D9',\n  'doc-menu-doc-options-hover-fg': '#929299',\n  'doc-menu-doc-options-hover-bg': '#D9D9D9',\n\n  /* Shortcut Keys */\n  'shortcut-key-fg': 'black',\n  'shortcut-key-primary-fg': '#009058',\n  'shortcut-key-secondary-fg': '#929299',\n  'shortcut-key-bg': 'white',\n  'shortcut-key-border': '#929299',\n\n  /* Breadcrumbs */\n  'breadcrumbs-tag-fg': 'white',\n  'breadcrumbs-tag-bg': '#929299',\n  'breadcrumbs-tag-alert-bg': '#D0021B',\n\n  /* Page Widget Picker */\n  'widget-picker-primary-bg': 'white',\n  'widget-picker-secondary-bg': '#F7F7F7',\n  'widget-picker-item-fg': 'unset',\n  'widget-picker-item-selected-bg': 'rgba(217,217,217,0.6)',\n  'widget-picker-item-disabled-bg': 'rgba(217,217,217,0.6)',\n  'widget-picker-icon': '#929299',\n  'widget-picker-primary-icon': '#16B378',\n  'widget-picker-summary-icon': '#009058',\n  'widget-picker-border': 'rgba(217,217,217,0.6)',\n  'widget-picker-shadow': 'rgba(38,38,51,0.20)',\n\n  /* Code View */\n  'code-view-text': '#444',\n  'code-view-keyword': '#444',\n  'code-view-comment': '#888888',\n  'code-view-meta': '#1F7199',\n  'code-view-title': '#880000',\n  'code-view-params': '#444',\n  'code-view-string': '#880000',\n  'code-view-number': '#880000',\n  'code-view-builtin': '#397300',\n  'code-view-literal': '#78A960',\n\n  /* Importer */\n  'importer-table-info-border': '#D9D9D9',\n  'importer-preview-border': '#D9D9D9',\n  'importer-skipped-table-overlay': 'rgba(217,217,217,0.6)',\n  'importer-match-icon': '#D9D9D9',\n  'importer-outside-bg': '#F7F7F7',\n  'importer-main-content-bg': '#FFFFFF',\n  'importer-active-file-bg': '#16B378',\n  'importer-active-file-fg': '#FFFFFF',\n  'importer-inactive-file-bg': 'rgba(217,217,217,0.6)',\n  'importer-inactive-file-fg': '#FFFFFF',\n\n  /* Menu Toggles */\n  'menu-toggle-fg': '#929299',\n  'menu-toggle-hover-fg': '#009058',\n  'menu-toggle-active-fg': '#007548',\n  'menu-toggle-bg': 'white',\n  'menu-toggle-border': '#929299',\n\n  /* Info Button */\n  'info-button-fg': '#8F8F8F',\n  'info-button-hover-fg': '#707070',\n  'info-button-active-fg': '#5C5C5C',\n\n  /* Button Groups */\n  'button-group-fg': '#262633',\n  'button-group-light-fg': '#929299',\n  'button-group-bg': 'unset',\n  'button-group-icon': '#929299',\n  'button-group-border': '#D9D9D9',\n  'button-group-border-hover': '#BFBFBF',\n  'button-group-selected-fg': '#FFFFFF',\n  'button-group-light-selected-fg': '#16B378',\n  'button-group-selected-bg': '#262633',\n  'button-group-selected-border': '#262633',\n\n  /* Access Rules */\n  'access-rules-table-header-fg': '#262633',\n  'access-rules-table-header-bg': 'rgba(217,217,217,0.6)',\n  'access-rules-table-body-fg': '#929299',\n  'access-rules-table-border': '#929299',\n  'access-rules-column-list-border': '#D9D9D9',\n  'access-rules-column-item-fg': '#262633',\n  'access-rules-column-item-bg': '#E8E8E8',\n  'access-rules-column-item-icon-fg': '#929299',\n  'access-rules-column-item-icon-hover-fg': '#FFFFFF',\n  'access-rules-column-item-icon-hover-bg': '#929299',\n  'access-rules-formula-editor-bg': 'white',\n  'access-rules-formula-editor-border-hover': '#D9D9D9',\n  'access-rules-formula-editor-bg-disabled': '#E8E8E8',\n  'access-rules-formula-editor-focus': '#16B378',\n\n  /* Cells */\n  'cell-fg': 'black',\n  'cell-bg': 'white',\n  'cell-zebra-bg': '#F8F8F8',\n\n  /* Charts */\n  'chart-fg': '#444',\n  'chart-bg': '#fff',\n  'chart-legend-bg': '#FFFFFF80',\n  'chart-x-axis': '#444',\n  'chart-y-axis': '#444',\n\n  /* Comments */\n  'comments-popup-header-bg': '#F7F7F7',\n  'comments-popup-body-bg': 'white',\n  'comments-popup-border': '#D9D9D9',\n  'comments-user-name-fg': '#494949',\n  'comments-panel-topic-bg': 'white',\n  'comments-panel-topic-border': '#ccc',\n  'comments-panel-resolved-topic-bg': '#F0F0F0',\n\n  /* Date Picker */\n  'date-picker-selected-fg': '#262633',\n  'date-picker-selected-bg': '#D9D9D9',\n  'date-picker-selected-bg-hover': '#CFCFCF',\n  'date-picker-today-fg': '#FFFFFF',\n  'date-picker-today-bg': '#16B378',\n  'date-picker-today-bg-hover': '#009058',\n  'date-picker-range-start-end-bg': '#D9D9D9',\n  'date-picker-range-start-end-bg-hover': '#CFCFCF',\n  'date-picker-range-bg': '#EEEEEE',\n  'date-picker-range-bg-hover': '#D9D9D9',\n\n  /* Tutorials */\n  'tutorials-popup-border': '#D9D9D9',\n  'tutorials-popup-header-fg': '#FFFFFF',\n  'tutorials-popup-box-bg': '#F5F5F5',\n\n  /* Ace */\n  'ace-editor-bg': 'white',\n  'ace-autocomplete-primary-fg': '#444',\n  'ace-autocomplete-secondary-fg': '#8F8F8F',\n  'ace-autocomplete-highlighted-fg': '#000',\n  'ace-autocomplete-bg': '#FBFBFB',\n  'ace-autocomplete-border': 'lightgray',\n  'ace-autocomplete-link': '#16B378',\n  'ace-autocomplete-link-highlighted': '#009058',\n  'ace-autocomplete-active-line-bg': '#CAD6FA',\n  'ace-autocomplete-line-border-hover': '#ABBFFE',\n  'ace-autocomplete-line-bg-hover': 'rgba(233,233,253,0.4)',\n\n  /* Color Select */\n  'color-select-fg': '#262633',\n  'color-select-bg': 'white',\n  'color-select-shadow': 'rgba(38,38,51,0.6)',\n  'color-select-font-options-border': '#D9D9D9',\n  'color-select-font-option-fg': '#262633',\n  'color-select-font-option-bg': '#FFFFFF',\n  'color-select-font-option-bg-hover': '#F7F7F7',\n  'color-select-font-option-fg-selected': '#FFFFFF',\n  'color-select-font-option-bg-selected': '#262633',\n  'color-select-color-square-border': '#D9D9D9',\n  'color-select-color-square-border-empty': '#262633',\n  'color-select-input-fg': '#929299',\n  'color-select-input-bg': 'white',\n  'color-select-input-border': '#D9D9D9',\n\n  /* Highlighted Code */\n  'highlighted-code-block-bg': '#FFFFFF',\n  'highlighted-code-block-bg-disabled': '#E8E8E8',\n  'highlighted-code-fg': '#929299',\n  'highlighted-code-border': '#D9D9D9',\n  'highlighted-code-bg-disabled': '#E8E8E8',\n\n  /* Login Page */\n  'login-page-bg': 'white',\n  'login-page-backdrop': '#F5F8FA',\n  'login-page-line': '#F7F7F7',\n\n  /* Formula Assistant */\n  'formula-assistant-header-bg': '#F7F7F7',\n  'formula-assistant-border': '#D9D9D9',\n  'formula-assistant-preformatted-text-bg': '#F7F7F7',\n};\n","/**\n * timeFormat(format, date) formats the passed-in Date object using the format string. The format\n * string may contain the following:\n *    'h': hour (00 - 23)\n *    'm': minute (00 - 59)\n *    's': second (00 - 59)\n *    'd': day of the month (01 - 31)\n *    'n': month (01 - 12)\n *    'y': 4-digit year\n *    'M': milliseconds (000 - 999)\n *    'Y': date as 20140212\n *    'D': date as 2014-02-12\n *    'T': time as 00:51:06\n *    'A': full time and date, as 2014-02-12 00:51:06.123\n * @param {String} format The format string.\n * @param {Date} date The date/time object to format.\n * @returns {String} The formatted date and/or time.\n */\n\nfunction pad(num: number, len: number): string {\n  const s = num.toString();\n  return s.length >= len ? s : \"00000000\".slice(0, len - s.length) + s;\n}\n\ntype FormatHelper = (out: string[], date: Date) => void;\nconst timeFormatKeys: {[spec: string]: FormatHelper} = {\n  h: (out, date) => out.push(pad(date.getHours(), 2)),\n  m: (out, date) => out.push(pad(date.getMinutes(), 2)),\n  s: (out, date) => out.push(pad(date.getSeconds(), 2)),\n  d: (out, date) => out.push(pad(date.getDate(), 2)),\n  n: (out, date) => out.push(pad(date.getMonth() + 1, 2)),\n  y: (out, date) => out.push(\"\" + date.getFullYear()),\n  M: (out, date) => out.push(pad(date.getMilliseconds(), 3)),\n  Y: (out, date) => timeFormatHelper(out, 'ynd', date),\n  D: (out, date) => timeFormatHelper(out, 'y-n-d', date),\n  T: (out, date) => timeFormatHelper(out, 'h:m:s', date),\n  A: (out, date) => timeFormatHelper(out, 'D T.M', date),\n};\n\nfunction timeFormatHelper(out: string[], format: string, date: Date) {\n  for (let i = 0, len = format.length; i < len; i++) {\n    const c = format[i];\n    const helper = timeFormatKeys[c];\n    if (helper) {\n      helper(out, date);\n    } else {\n      out.push(c);\n    }\n  }\n}\n\nexport function timeFormat(format: string, date: Date): string {\n  const out: string[] = [];\n  timeFormatHelper(out, format, date);\n  return out.join(\"\");\n}\n","import {extractOrgParts, GristLoadConfig} from 'app/common/gristUrls';\n\nexport function getGristConfig(): GristLoadConfig {\n  return (window as any).gristConfig || {};\n}\n\n/**\n *\n * Adds /o/ORG to the supplied path, with ORG extracted from current URL if possible.\n * If not, path is returned as is, but with any trailing / removed for consistency.\n *\n */\nexport function addCurrentOrgToPath(path: string, skipIfInDomain: boolean = false) {\n  if (typeof window === 'undefined' || !window) { return path; }\n  return addOrgToPath(path, window.location.href, skipIfInDomain);\n}\n\n/**\n *\n * Adds /o/ORG to the supplied path, with ORG extracted from the page URL if possible.\n * If not, path is returned as is, but with any trailing / removed for consistency.\n *\n */\nexport function addOrgToPath(path: string, page: string, skipIfInDomain: boolean = false) {\n  if (typeof window === 'undefined' || !window) { return path; }\n  if (path.includes('/o/')) { return path; }\n  const src = new URL(page);\n  const srcParts = extractOrgParts(src.host, src.pathname);\n  if (srcParts.mismatch) {\n    throw new Error('Cannot figure out what organization the URL is for.');\n  }\n  path = path.replace(/\\/$/, '');\n  if (!srcParts.subdomain) {\n    return path;\n  }\n  if (skipIfInDomain && srcParts.orgFromHost) {\n    return path;\n  }\n  return `${path}/o/${srcParts.subdomain}`;\n}\n\n/**\n * Expands an endpoint path to a full url anchored to the given doc worker base url.\n */\nexport function docUrl(docWorkerUrl: string|null|undefined, path?: string) {\n  const base = document.querySelector('base');\n  const baseHref = base && base.href;\n  const baseUrl = new URL(docWorkerUrl || baseHref || window.location.origin);\n  return baseUrl.toString().replace(/\\/$/, '') + (path ? `/${path}` : '');\n}\n\n// Get a url on the same webserver as the current page, adding a prefix to encode\n// the current organization if necessary.\nexport function getOriginUrl(path: string) {\n  return `${window.location.origin}${addCurrentOrgToPath('/', true)}${path}`;\n}\n\n// Return a string docId if server has provided one (as in hosted Grist), otherwise null\n// (as in classic Grist).\nexport function getInitialDocAssignment(): string|null {\n  return getGristConfig().assignmentId || null;\n}\n\n// Return true if we are on a page that can supply a doc list.\n// TODO: the doclist object isn't relevant to hosted grist and should be factored out.\nexport function pageHasDocList(): boolean {\n  // No doc list support on hosted grist.\n  return !getGristConfig().homeUrl;\n}\n\n// Return true if we are on a page that has access to home api.\nexport function pageHasHome(): boolean {\n  return Boolean(getGristConfig().homeUrl);\n}\n\n// Construct a url by adding `path` to the home url (adding in the part to the current\n// org if needed), and fetch from it.\nexport function fetchFromHome(path: string, opts: RequestInit): Promise<Response> {\n  const baseUrl = addCurrentOrgToPath(getGristConfig().homeUrl!);\n  return window.fetch(`${baseUrl}${path}`, opts);\n}\n","import constant = require('lodash/constant');\nimport times = require('lodash/times');\n\n/**\n * Returns a new array of length count, filled with the given value.\n */\nexport function arrayRepeat<T>(count: number, value: T): T[] {\n  return times(count, constant(value));\n}\n","/**\n * This file adds some includes tweaks to the behavior of Mousetrap.js, the keyboard bindings\n * library. It exports the mousetrap library itself, so you may use it in mousetrap's place.\n */\n\n\n/* global document */\n\nif (typeof window === 'undefined') {\n  // We can't require('mousetrap') in a browserless environment (specifically for unittests)\n  // because it uses global variables right on require, which are not available with jsdom.\n  // So to use mousetrap in unittests, we need to stub it out.\n  module.exports = {\n    bind: function() {},\n    unbind: function() {},\n  };\n} else {\n\n  var Mousetrap = require('mousetrap');\n\n  // Minus is different on Gecko:\n  // see https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode\n  // and https://github.com/ccampbell/mousetrap/pull/215\n  Mousetrap.addKeycodes({173: '-'});\n\n  var customStopCallbacks = new WeakMap();\n\n  var MousetrapProtype = Mousetrap.prototype;\n  var origStopCallback = MousetrapProtype.stopCallback;\n\n  /**\n   * Enhances Mousetrap's stopCallback filter. Normally, mousetrap ignores key events in input\n   * fields and textareas. This replacement allows individual CommandGroups to be activated in such\n   * elements. See also 'attach' method of commands.CommandGroup.\n   */\n  MousetrapProtype.stopCallback = function(e, element, combo, sequence) {\n    if (mousetrapBindingsPaused) {\n      return true;\n    }\n    // If we have a custom stopCallback, use it now.\n    const custom = customStopCallbacks.get(element);\n    if (custom) {\n      return custom(combo);\n    }\n    try {\n      return origStopCallback.call(this, e, element, combo, sequence);\n    } catch (err) {\n      if (!document.body.contains(element)) {\n        // Mousetrap throws a pointless error in this case, which we ignore. It happens when\n        // element gets removed by a non-mousetrap keyboard handler.\n        return;\n      }\n      throw err;\n    }\n  };\n\n\n  var mousetrapBindingsPaused = false;\n\n  /**\n   * Globally pause or unpause mousetrap bindings. This is useful e.g. while a context menu is being\n   * shown, which has its own keyboard handling.\n   */\n  Mousetrap.setPaused = function(yesNo) {\n    mousetrapBindingsPaused = yesNo;\n  };\n\n  /**\n   * Set a custom stopCallback for an element. When a key combo is pressed for this element,\n   * callback(combo) is called. If it returns true, Mousetrap should NOT process the combo.\n   */\n  Mousetrap.setCustomStopCallback = function(element, callback) {\n    customStopCallbacks.set(element, callback);\n  };\n\n  module.exports = Mousetrap;\n}\n","/**\n * Module that allows client-side code to use browser globals (such as `document` or `Node`) in a\n * way that allows those globals to be replaced by mocks in browser-less tests.\n *\n * E.g. test/client/clientUtil.js can replace globals with those provided by jsdom.\n */\n\n\nvar allGlobals = [];\n\n/* global window */\nvar globalVars = (typeof window !== 'undefined' ? window : {});\n\n/**\n * Usage: to get access to global variables `foo` and `bar`, call:\n *    var G = require('browserGlobals').get('foo', 'bar');\n * and use G.foo and G.bar.\n *\n * This modules stores a reference to G, so that setGlobals() call can replace the values to which\n * G.foo and G.bar refer.\n */\nfunction get(varArgNames) {\n  var obj = {\n    neededNames: Array.prototype.slice.call(arguments),\n    globals: {}\n  };\n  updateGlobals(obj);\n  allGlobals.push(obj);\n  return obj.globals;\n}\nexports.get = get;\n\n/**\n * Internal helper which updates properties of all globals objects created with get().\n */\nfunction updateGlobals(obj) {\n  obj.neededNames.forEach(function(key) {\n    obj.globals[key] = globalVars[key];\n  });\n}\n\n/**\n * Replace globals with those from the given object. The previous mapping of global values is\n * returned, so that it can be restored later.\n */\nfunction setGlobals(globals) {\n  var oldVars = globalVars;\n  globalVars = globals;\n  allGlobals.forEach(function(obj) {\n    updateGlobals(obj);\n  });\n  return oldVars;\n}\nexports.setGlobals = setGlobals;\n","// Builds a DOM tree or document fragment, easily.\n//\n// Usage:\n//  dom('a#link.c1.c2', {href:url}, 'Hello ', dom('span', 'world'));\n//      creates Node <a id=\"link\" class=\"c1 c2\" href={{url}}>Hello <span>world</span></a>.\n//  dom.frag(dom('span', 'Hello'), ['blah', dom('div', 'world')])\n//      creates document fragment with <span>Hello</span>blah<div>world</div>.\n//\n// Arrays among child arguments get flattened. Objects are turned into attributes.\n//\n// If an argument is a function it will be called with elem as the argument,\n// which may be a convenient way to modify elements, set styles, or attach events.\n\n\n\nvar ko = require('knockout');\n\n/**\n * Use the browser globals in a way that allows replacing them with mocks in tests.\n */\nvar G = require('./browserGlobals').get('document', 'Node', '$', 'window');\n\n/**\n * dom('tag#id.class1.class2' | Node, other args)\n *  The first argument is typically a string consisting of a tag name, with optional #foo suffix\n *  to add the ID 'foo', and zero or more .bar suffixes to add a css class 'bar'. If the first\n *  argument is a Node, that node is used for subsequent changes without creating a new one.\n *\n *  The rest of the arguments are optional and may be:\n *\n *    Nodes - which become children of the created element;\n *    strings - which become text node children;\n *    objects - of the form {attr: val} to set additional attributes on the element;\n *    Arrays of Nodes - which are flattened out and become children of the created element;\n *    functions - which are called with elem as the argument, for a chance to modify the\n *        element as it's being created. When functions return values (other than undefined),\n *        these return values get applied to the containing element recursively.\n */\nfunction dom(firstArg, ...args) {\n  let elem;\n  if (firstArg instanceof G.Node) {\n    elem = firstArg;\n  } else {\n    elem = createElemFromString(firstArg, createDOMElement);\n  }\n\n  return handleChildren(elem, arguments, 1);\n}\n\n/**\n * dom.svg('tag#id.class1.class2', other args) behaves much like `dom`, but does not accept Node\n * as a first argument--only a tag string. Because SVG elements are created in a different\n * namespace, `dom.svg` should be used for creating SVG elements such as `polygon`.\n */\ndom.svg = function (firstArg, ...args) {\n  let elem = createElemFromString(firstArg, createSVGElement);\n  return handleChildren(elem, arguments, 1);\n};\n\n/**\n * Given a tag string of the form 'tag#id.class1.class2' and an element creator function, returns\n * a new tag element with the id and classes properly set.\n */\nfunction createElemFromString(tagString, elemCreator) {\n  // We do careful hand-written parsing rather than use a regexp for speed. Using a regexp is\n  // significantly more expensive.\n  let tag, id, classes;\n  let dotPos = tagString.indexOf(\".\");\n  let hashPos = tagString.indexOf('#');\n  if (dotPos === -1) {\n    dotPos = tagString.length;\n  } else {\n    classes = tagString.substring(dotPos + 1).replace(/\\./g, ' ');\n  }\n  if (hashPos === -1) {\n    tag = tagString.substring(0, dotPos);\n  } else if (hashPos > dotPos) {\n    throw new Error('ID must come before classes in dom(\"' + tagString + '\")');\n  } else {\n    tag = tagString.substring(0, hashPos);\n    id = tagString.substring(hashPos + 1, dotPos);\n  }\n\n  let elem = elemCreator(tag);\n  if (id)      { elem.setAttribute('id',    id); }\n  if (classes) { elem.setAttribute('class', classes); }\n\n  return elem;\n}\n\nfunction createDOMElement(tagName) {\n  return G.document.createElement(tagName);\n}\n\nfunction createSVGElement(tagName) {\n  return G.document.createElementNS('http://www.w3.org/2000/svg', tagName);\n}\n\n// Append the rest of the arguments as children, flattening arrays\nfunction handleChildren(elem, children, index) {\n  for (var i = index, len = children.length; i < len; i++) {\n    var child = children[i];\n    if (Array.isArray(child)) {\n      child = handleChildren(elem, child, 0);\n    } else if (typeof child == 'function') {\n      child = child(elem);\n      if (typeof child !== 'undefined') {\n        handleChildren(elem, [child], 0);\n      }\n    } else if (child === null || child === void 0) {\n      // nothing\n    } else if (child instanceof G.Node) {\n      elem.appendChild(child);\n    } else if (typeof child === 'object') {\n      for (var key in child) {\n        elem.setAttribute(key, child[key]);\n      }\n    } else {\n      elem.appendChild(G.document.createTextNode(child));\n    }\n  }\n  return elem;\n}\n\n/**\n * Creates a DocumentFragment consisting of all arguments, flattening any arguments that are\n * arrays. If any arguments or array elements are strings, those are turned into text nodes.\n * All argument types supported by the dom() function are supported by dom.frag() as well.\n */\ndom.frag = function(varArgNodes) {\n  var elem = G.document.createDocumentFragment();\n  return handleChildren(elem, arguments, 0);\n};\n\n\n/**\n * Forward all or some arguments to the dom() call. E.g.\n *\n *    dom(a, b, c, dom.fwdArgs(arguments, 2));\n *\n *      is equivalent to:\n *\n *    dom(a, b, c, arguments[2], arguments[3], arguments[4], ...)\n *\n * It is very convenient to use in other functions which want to accept arbitrary arguments for\n * dom() and forward them. See koForm.js for many examples.\n *\n *  @param {Array|Arguments} args: Array or Arguments object containing arguments to forward.\n *  @param {Number} startIndex: The index of the first element to forward.\n */\ndom.fwdArgs = function(args, startIndex) {\n  return function(elem) {\n    handleChildren(elem, args, startIndex);\n  };\n};\n\n\n/**\n * Wraps the given function to make it easy to use as an argument to dom(). The passed-in function\n * must take a DOM Node as the first argument, and the returned wrapped function may be called\n * without this argument when used as an argument to dom(), in which case the original function\n * will be called with the element being constructed.\n *\n * For example, if we define:\n *    foo.method = dom.inlinable(function(elem, a, b) { ... });\n * then the call\n *    dom('div', foo.method(1, 2))\n * translates to\n *    dom('div', function(elem) { foo.method(elem, 1, 2); })\n * which causes foo.method(elem, 1, 2) to be called with elem set to the DIV being constructed.\n *\n * When the first argument is a DOM Node, calls to the wrapped function proceed as usual. In both\n * cases, `this` context is passed along to the wrapped function as expected.\n */\ndom.inlinable = dom.inlineable = function inlinable(func) {\n  return function(optElem) {\n    if (optElem instanceof G.Node) {\n      return func.apply(this, arguments);\n    } else {\n      return wrapInlinable(func, this, arguments);\n    }\n  };\n};\n\nfunction wrapInlinable(func, context, args) {\n  // The switch is an optimization which speeds things up substantially.\n  switch (args.length) {\n    case 0: return function(elem) { return func.call(context, elem); };\n    case 1: return function(elem) { return func.call(context, elem, args[0]); };\n    case 2: return function(elem) { return func.call(context, elem, args[0], args[1]); };\n    case 3: return function(elem) { return func.call(context, elem, args[0], args[1], args[2]); };\n  }\n  return function(elem) {\n    Array.prototype.unshift.call(args, elem);\n    return func.apply(context, args);\n  };\n}\n\n\n/**\n * Shortcut for document.getElementById.\n */\ndom.id = function(id) {\n  return G.document.getElementById(id);\n};\n\n/**\n * Hides the given element. Can be passed into dom(), e.g. dom('div', dom.hide, ...).\n */\ndom.hide = function(elem) {\n  elem.style.display = 'none';\n};\n\n/**\n * Shows the given element, assuming that it's not hidden by a class.\n */\ndom.show = function(elem) {\n  elem.style.display = '';\n};\n\n/**\n * Toggles the given element, assuming that it's not hidden by a class. The second argument is\n * optional, and if provided will make toggle() behave as either show() or hide().\n * @returns {Boolean} Whether the element is visible after toggle.\n */\ndom.toggle = function(elem, optYesNo) {\n  if (optYesNo === undefined)\n    optYesNo = (elem.style.display === 'none');\n  elem.style.display = optYesNo ? '' : 'none';\n  return elem.style.display !== 'none';\n};\n\n\n/**\n * Set the given className on the element while it is being dragged over.\n * Can be used inlined as in `dom(..., dom.dragOverClass('foo'))`.\n * @param {String} className: Class name to set while a drag-over is in progress.\n */\ndom.dragOverClass = dom.inlinable(function(elem, className) {\n  // Note: This is hard to get correct on both FF and Chrome because of dragenter/dragleave events that\n  // occur for contained elements. See\n  // http://stackoverflow.com/questions/7110353/html5-dragleave-fired-when-hovering-a-child-element.\n  // Here we use a reference count, and filter out duplicate dragenter events on the same target.\n  let counter = 0;\n  let lastTarget = null;\n\n  dom.on(elem, 'dragenter', ev => {\n    if (Array.from(ev.originalEvent.dataTransfer.types).includes('text/html')) {\n      // This would not be present when dragging in an actual file. We return undefined, to avoid\n      // suppressing normal behavior (which is suppressed below when we return false).\n      return;\n    }\n    if (ev.target !== lastTarget) {\n      lastTarget = ev.target;\n      ev.originalEvent.dataTransfer.dropEffect = 'copy';\n      if (!counter) { elem.classList.add(className); }\n      counter++;\n    }\n    return false;\n  });\n\n  dom.on(elem, 'dragleave', () => {\n    lastTarget = null;\n    counter = Math.max(0, counter - 1);\n    if (!counter) { elem.classList.remove(className); }\n  });\n\n  dom.on(elem, 'drop', () => {\n    lastTarget = null;\n    counter = 0;\n    elem.classList.remove(className);\n  });\n});\n\n\n/**\n * Change a Node's childNodes similarly to Array splice. This allows removing and adding nodes.\n * It translates to calls to replaceChild, insertBefore, removeChild, and appendChild, as\n * appropriate.\n * @param {Number} index Index at which to start changing the array.\n * @param {Number} howMany Number of old array elements to remove or replace.\n * @param {Node} optNewChildren This is an optional parameter specifying a new node to insert,\n *    and may be repeated to insert multiple nodes. Null values are ignored.\n * @returns {Array[Node]} array of removed nodes.\n * TODO: this desperately needs a unittest.\n */\ndom.splice = function(node, index, howMany, optNewChildren) {\n  var end = Math.min(index + howMany, node.childNodes.length);\n  for (var i = 3; i < arguments.length; i++) {\n    if (arguments[i] !== null) {\n      if (index < end) {\n        node.replaceChild(arguments[i], node.childNodes[index]);\n        index++;\n      } else if (index < node.childNodes.length) {\n        node.insertBefore(arguments[i], node.childNodes[index]);\n      } else {\n        node.appendChild(arguments[i]);\n      }\n    }\n  }\n  var ret = Array.prototype.slice.call(node.childNodes, index, end);\n  while (end > index) {\n    node.removeChild(node.childNodes[--end]);\n  }\n  return ret;\n};\n\n/**\n * Returns the index of the given node among its parent's children (i.e. its siblings).\n */\ndom.childIndex = function(node) {\n  return Array.prototype.indexOf.call(node.parentNode.childNodes, node);\n};\n\n\nfunction makeFilterFunc(selectorOrFunc) {\n  if (typeof selectorOrFunc === 'string') {\n    return function(elem) { return elem.matches && elem.matches(selectorOrFunc); };\n  }\n  return selectorOrFunc;\n}\n\n/**\n * Iterates backwards through the children of `parent`, returning the first one matching the given\n * selector or filter function. Returns null if no matching node is found.\n */\ndom.findLastChild = function(parent, selectorOrFunc) {\n  var filterFunc = makeFilterFunc(selectorOrFunc);\n  for (var c = parent.lastChild; c; c = c.previousSibling) {\n    if (filterFunc(c)) {\n      return c;\n    }\n  }\n  return null;\n};\n\n\n/**\n * Iterates up the DOM tree from `child` to `container`, returning the first Node matching the\n * given selector or filter function. Returns null for no match.\n * If `container` is given, the returned node will be non-null only if contained in it.\n * If `container` is omitted, the search will go all the way up.\n */\ndom.findAncestor = function(child, optContainer, selectorOrFunc) {\n  if (arguments.length === 2) {\n    selectorOrFunc = optContainer;\n    optContainer = null;\n  }\n  var filterFunc = makeFilterFunc(selectorOrFunc);\n  var match = null;\n  while (child) {\n    if (!match && filterFunc(child)) {\n      match = child;\n      if (!optContainer) {\n        return match;\n      }\n    }\n    if (child === optContainer) {\n      return match;\n    }\n    child = child.parentNode;\n  }\n  return null;\n};\n\n\n/**\n * Detaches a Node from its parent, and returns the Node passed in.\n */\ndom.detachNode = function(node) {\n  if (node.parentNode) {\n    node.parentNode.removeChild(node);\n  }\n  return node;\n};\n\n\n/**\n * Use JQuery to attach an event handler to the given element. For documentation, see\n * http://api.jquery.com/on/. You may use this inline while building dom, as:\n *    dom(..., dom.on(events, args...))\n * E.g.\n *    dom('div',\n *      dom.on('click', function(ev) {\n *        console.log(ev);\n *      })\n *    );\n */\ndom.on = dom.inlinable(function(elem, events, optSelector, optData, handler) {\n  G.$(elem).on(events, optSelector, optData, handler);\n});\n\ndom.once = dom.inlinable(function(elem, events, optSelector, optData, handler) {\n  G.$(elem).one(events, optSelector, optData, handler);\n});\n\n/**\n * Helper to do some processing on a DOM element after the current call stack has cleared. E.g.\n *    dom('input',\n *      dom.defer(function(elem) {\n *        elem.focus();\n *      })\n *    );\n * will cause elem.focus() to be called for the INPUT element after a setTimeout of 0.\n *\n * This is often useful for dealing with focusing and selection.\n */\ndom.defer = function(func, optContext) {\n  return function(elem) {\n    setTimeout(func.bind(optContext, elem), 0);\n  };\n};\n\n\n/**\n * Call the given function with the given context when the element is cleaned up using\n * ko.removeNode or ko.cleanNode. This may be used inline as an argument to dom(), without the\n * first argument, to apply to the element being constructed. The function called will receive the\n * element as the sole argument.\n * @param {Node} elem Element whose destruction should trigger a call to func. It\n *    should be omitted when used as an argument to dom().\n * @param {Function} func Function to call, with elem as an argument, when elem is cleaned up.\n * @param {Object} optContext Optionally `this` context to call the function with.\n */\ndom.onDispose = dom.inlinable(function(elem, func, optContext) {\n  ko.utils.domNodeDisposal.addDisposeCallback(elem, func.bind(optContext));\n});\n\n\n/**\n * Tie the disposal of the given value to the given element, so that value.dispose() gets called\n * when the element is cleaned up using ko.removeNode or ko.cleanNode. This may be used inline as\n * an argument to dom(), without the first argument, to apply to the element being constructed.\n * @param {Node} elem Element whose destruction should trigger the disposal of the value. It\n *    should be omitted when used as an argument to dom().\n * @param {Object} disposableValue A value with a dispose() method, such as a computed observable.\n */\ndom.autoDispose = dom.inlinable(function(elem, disposableValue) {\n  ko.utils.domNodeDisposal.addDisposeCallback(elem, function() {\n    disposableValue.dispose();\n  });\n});\n\n\n/**\n * Set an identifier for the given element for identifying the element in automated browser tests.\n * @param {String} ident: Arbitrary string; convention is to name it as \"ModuleName.nameInModule\".\n */\ndom.testId = dom.inlinable(function(elem, ident) {\n  elem.setAttribute('data-test-id', ident);\n});\n\nmodule.exports = dom;\n","/**\n *\n * Dynamic imports from js work fine with webpack; from typescript we need to upgrade\n * our \"module\" setting, which has a lot of knock-on effects.  To work around that for\n * the moment, importing can be done from this js file.\n *\n */\n\nexports.loadAccountPage = () => import('app/client/ui/AccountPage' /* webpackChunkName: \"AccountPage\" */);\nexports.loadActivationPage = () => import('app/client/ui/ActivationPage' /* webpackChunkName: \"ActivationPage\" */);\nexports.loadBillingPage = () => import('app/client/ui/BillingPage' /* webpackChunkName: \"BillingModule\" */);\nexports.loadSupportGristPage = () => import('app/client/ui/SupportGristPage' /* webpackChunkName: \"SupportGristPage\" */);\nexports.loadGristDoc = () => import('app/client/components/GristDoc' /* webpackChunkName: \"GristDoc\" */);\n// When importing this way, the module is under the \"default\" member, not sure why (maybe\n// esbuild-loader's doing).\nexports.loadMomentTimezone = () => import('moment-timezone').then(m => m.default);\nexports.loadPlotly = () => import('plotly.js-basic-dist' /* webpackChunkName: \"plotly\" */);\nexports.loadSearch = () => import('app/client/ui2018/search' /* webpackChunkName: \"search\" */);\nexports.loadUserManager = () => import('app/client/ui/UserManager' /* webpackChunkName: \"usermanager\" */);\nexports.loadViewPane = () => import('app/client/components/ViewPane' /* webpackChunkName: \"viewpane\" */);\n","import * as packageJson from 'package.json';\n\nexport const version = packageJson.version;\nexport const channel = \"core\";\nexport const gitcommit = \"unknown\";\n","import { defaultHooks, IHooks } from 'app/client/DefaultHooks';\nimport { IGristUrlState } from 'app/common/gristUrls';\nimport { gristOverrides } from 'app/pipe/GristOverrides';\n\nexport const hooks: IHooks = {\n  ...defaultHooks,\n  iframeAttributes: {\n    credentialless: true,\n  },\n  fetch: fetcher,\n  baseURI: gristOverrides.bootstrapGristPrefix,\n  urlTweaks: {\n    postEncode,\n    preDecode,\n  },\n};\nconsole.log({hooks});\n\nfunction fetcher(...args: any[]) {\n  if ((window as any).fetchHook) {\n    return (window as any).fetchHook(...args);\n  }\n  return (fetch as any)(args);\n}\n\nfunction preDecode(options: {\n  url: URL,\n}) {\n  const fakeUrl = gristOverrides.fakeUrl;\n  if (!fakeUrl) {\n    return;\n  }\n  const at = new URL(options.url.href);\n  let extra = at.searchParams.get('part');\n  if (!extra) {\n    const p = at.searchParams.get('p');\n    if (p) {\n      extra = `/p/${p}`;\n    }\n  }\n  const location = new URL(fakeUrl + (extra || ''));\n  location.search = at.search;\n  if (gristOverrides.singlePage) {\n    location.searchParams.set('embed', 'true');\n    location.searchParams.set('style', 'light');\n  }\n  location.hash = at.hash;\n  options.url.href = location.href;\n  console.log({options});\n}\n\nfunction postEncode(options: {\n  url: URL,\n  parts: string[],\n  state: IGristUrlState,\n  baseLocation: Location | URL,\n}): void {\n  const {url, parts} = options;\n  const fakeUrl = gristOverrides.fakeUrl;\n  if (!fakeUrl) {\n    return;\n  }\n  const at = new URL(location.href);\n  const queryStr = url.search;\n  at.search = queryStr;\n  if (parts[0] === '/') {\n    parts.shift();\n  }\n  if (parts[0] === 'o/docs/') {\n    parts.shift();\n  }\n  if (parts[0]?.startsWith('doc/')) {\n    parts.shift();\n  }\n  if (parts.length === 1 && parts[0].startsWith('/p/')) {\n    at.searchParams.set('p', parts[0].slice(3));\n  } else {\n    at.searchParams.set('part',\n                        parts.join(''));\n  }\n  at.hash = url.hash;\n  url.href = at.href;\n}\n","/**\n * grist-static passes around some global state in a hacky way.\n * Here we at least try to shepherd the state into a single place.\n */\n\n\nexport interface GristOverrides {\n  bootstrapGristPrefix?: string;\n  staticGristOptions?: {\n    name?: string;\n  };\n  /**\n   * .grist doc URL.\n   */\n  seedFile?: string;\n  /**\n   * .csv file URL.\n   */\n  initialData?: string;\n  /**\n   * .csv file content to load. Not used when initialData is set.\n   */\n  initialContent?: string;\n  fakeUrl?: string;\n  fakeDocId?: string;\n  singlePage?: boolean;\n}\n\nexport function getGristOverrides(): GristOverrides {\n  if (typeof window === 'undefined') { return {}; }\n  return (window as any).gristOverrides || {};\n}\n\nexport const gristOverrides = getGristOverrides();\n","export default function contains(parent, child) {\n  // $FlowFixMe: hasOwnProperty doesn't seem to work in tests\n  var isShadow = Boolean(child.getRootNode && child.getRootNode().host); // First, attempt with faster native method\n\n  if (parent.contains(child)) {\n    return true;\n  } // then fallback to custom implementation with Shadow DOM support\n  else if (isShadow) {\n      var next = child;\n\n      do {\n        if (next && parent.isSameNode(next)) {\n          return true;\n        } // $FlowFixMe: need a better way to handle this...\n\n\n        next = next.parentNode || next.host;\n      } while (next);\n    } // Give up, the result is false\n\n\n  return false;\n}","import getComputedStyle from \"./getComputedStyle.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\n\nfunction toNumber(cssValue) {\n  return parseFloat(cssValue) || 0;\n}\n\nexport default function getBorders(element) {\n  var computedStyle = isHTMLElement(element) ? getComputedStyle(element) : {};\n  return {\n    top: toNumber(computedStyle.borderTopWidth),\n    right: toNumber(computedStyle.borderRightWidth),\n    bottom: toNumber(computedStyle.borderBottomWidth),\n    left: toNumber(computedStyle.borderLeftWidth)\n  };\n}","export default function getBoundingClientRect(element) {\n  var rect = element.getBoundingClientRect();\n  return {\n    width: rect.width,\n    height: rect.height,\n    top: rect.top,\n    right: rect.right,\n    bottom: rect.bottom,\n    left: rect.left,\n    x: rect.left,\n    y: rect.top\n  };\n}","import { viewport } from \"../enums.js\";\nimport getViewportRect from \"./getViewportRect.js\";\nimport getDocumentRect from \"./getDocumentRect.js\";\nimport listScrollParents from \"./listScrollParents.js\";\nimport getOffsetParent from \"./getOffsetParent.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getDecorations from \"./getDecorations.js\";\nimport contains from \"./contains.js\";\nimport rectToClientRect from \"../utils/rectToClientRect.js\";\n\nfunction getClientRectFromMixedType(element, clippingParent) {\n  return clippingParent === viewport ? rectToClientRect(getViewportRect(element)) : isHTMLElement(clippingParent) ? getBoundingClientRect(clippingParent) : rectToClientRect(getDocumentRect(getDocumentElement(element)));\n} // A \"clipping parent\" is an overflowable container with the characteristic of\n// clipping (or hiding) overflowing elements with a position different from\n// `initial`\n\n\nfunction getClippingParents(element) {\n  var clippingParents = listScrollParents(element);\n  var canEscapeClipping = ['absolute', 'fixed'].indexOf(getComputedStyle(element).position) >= 0;\n  var clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;\n\n  if (!isElement(clipperElement)) {\n    return [];\n  } // $FlowFixMe: https://github.com/facebook/flow/issues/1414\n\n\n  return clippingParents.filter(function (clippingParent) {\n    return isElement(clippingParent) && contains(clippingParent, clipperElement);\n  });\n} // Gets the maximum area that the element is visible in due to any number of\n// clipping parents\n\n\nexport default function getClippingRect(element, boundary, rootBoundary) {\n  var mainClippingParents = boundary === 'clippingParents' ? getClippingParents(element) : [].concat(boundary);\n  var clippingParents = [].concat(mainClippingParents, [rootBoundary]);\n  var firstClippingParent = clippingParents[0];\n  var clippingRect = clippingParents.reduce(function (accRect, clippingParent) {\n    var rect = getClientRectFromMixedType(element, clippingParent);\n    var decorations = getDecorations(isHTMLElement(clippingParent) ? clippingParent : getDocumentElement(element));\n    accRect.top = Math.max(rect.top + decorations.top, accRect.top);\n    accRect.right = Math.min(rect.right - decorations.right, accRect.right);\n    accRect.bottom = Math.min(rect.bottom - decorations.bottom, accRect.bottom);\n    accRect.left = Math.max(rect.left + decorations.left, accRect.left);\n    return accRect;\n  }, getClientRectFromMixedType(element, firstClippingParent));\n  clippingRect.width = clippingRect.right - clippingRect.left;\n  clippingRect.height = clippingRect.bottom - clippingRect.top;\n  clippingRect.x = clippingRect.left;\n  clippingRect.y = clippingRect.top;\n  return clippingRect;\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getNodeScroll from \"./getNodeScroll.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getDocumentElement from \"./getDocumentElement.js\"; // Returns the composite rect of an element relative to its offsetParent.\n// Composite means it takes into account transforms as well as layout.\n\nexport default function getCompositeRect(elementOrVirtualElement, offsetParent, isFixed) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n\n  var documentElement;\n  var rect = getBoundingClientRect(elementOrVirtualElement);\n  var scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  var offsets = {\n    x: 0,\n    y: 0\n  };\n\n  if (!isFixed) {\n    if (getNodeName(offsetParent) !== 'body') {\n      scroll = getNodeScroll(offsetParent);\n    }\n\n    if (isHTMLElement(offsetParent)) {\n      offsets = getBoundingClientRect(offsetParent);\n      offsets.x += offsetParent.clientLeft;\n      offsets.y += offsetParent.clientTop;\n    } else if (documentElement = getDocumentElement(offsetParent)) {\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n\n  return {\n    x: rect.left + scroll.scrollLeft - offsets.x,\n    y: rect.top + scroll.scrollTop - offsets.y,\n    width: rect.width,\n    height: rect.height\n  };\n}","import getWindow from \"./getWindow.js\";\nexport default function getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}","import getBorders from \"./getBorders.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport getWindow from \"./getWindow.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\"; // Borders + scrollbars\n\nexport default function getDecorations(element) {\n  var win = getWindow(element);\n  var borders = getBorders(element);\n  var isHTML = getNodeName(element) === 'html';\n  var winScrollBarX = getWindowScrollBarX(element);\n  var x = element.clientWidth + borders.right;\n  var y = element.clientHeight + borders.bottom; // HACK:\n  // document.documentElement.clientHeight on iOS reports the height of the\n  // viewport including the bottom bar, even if the bottom bar isn't visible.\n  // If the difference between window innerHeight and html clientHeight is more\n  // than 50, we assume it's a mobile bottom bar and ignore scrollbars.\n  // * A 50px thick scrollbar is likely non-existent (macOS is 15px and Windows\n  //   is about 17px)\n  // * The mobile bar is 114px tall\n\n  if (isHTML && win.innerHeight - element.clientHeight > 50) {\n    y = win.innerHeight - borders.bottom;\n  }\n\n  return {\n    top: isHTML ? 0 : element.clientTop,\n    right: // RTL scrollbar (scrolling containers only)\n    element.clientLeft > borders.left ? borders.right : // LTR scrollbar\n    isHTML ? win.innerWidth - x - winScrollBarX : element.offsetWidth - x,\n    bottom: isHTML ? win.innerHeight - y : element.offsetHeight - y,\n    left: isHTML ? winScrollBarX : element.clientLeft\n  };\n}","import { isElement } from \"./instanceOf.js\";\nexport default function getDocumentElement(element) {\n  // $FlowFixMe: assume body is always available\n  return (isElement(element) ? element.ownerDocument : element.document).documentElement;\n}","import getCompositeRect from \"./getCompositeRect.js\";\nimport getWindow from \"./getWindow.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nexport default function getDocumentRect(element) {\n  var win = getWindow(element);\n  var winScroll = getWindowScroll(element);\n  var documentRect = getCompositeRect(getDocumentElement(element), win);\n  documentRect.height = Math.max(documentRect.height, win.innerHeight);\n  documentRect.width = Math.max(documentRect.width, win.innerWidth);\n  documentRect.x = -winScroll.scrollLeft;\n  documentRect.y = -winScroll.scrollTop;\n  return documentRect;\n}","export default function getHTMLElementScroll(element) {\n  return {\n    scrollLeft: element.scrollLeft,\n    scrollTop: element.scrollTop\n  };\n}","export default function getNodeName(element) {\n  return element ? (element.nodeName || '').toLowerCase() : null;\n}","import getWindowScroll from \"./getWindowScroll.js\";\nimport getWindow from \"./getWindow.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getHTMLElementScroll from \"./getHTMLElementScroll.js\";\nexport default function getNodeScroll(node) {\n  if (node === getWindow(node) || !isHTMLElement(node)) {\n    return getWindowScroll(node);\n  } else {\n    return getHTMLElementScroll(node);\n  }\n}","import getWindow from \"./getWindow.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport isTableElement from \"./isTableElement.js\";\n\nfunction getTrueOffsetParent(element) {\n  if (!isHTMLElement(element) || // https://github.com/popperjs/popper-core/issues/837\n  getComputedStyle(element).position === 'fixed') {\n    return null;\n  }\n\n  return element.offsetParent;\n}\n\nexport default function getOffsetParent(element) {\n  var window = getWindow(element);\n  var offsetParent = getTrueOffsetParent(element); // Find the nearest non-table offsetParent\n\n  while (offsetParent && isTableElement(offsetParent)) {\n    offsetParent = getTrueOffsetParent(offsetParent);\n  }\n\n  if (offsetParent && getNodeName(offsetParent) === 'body' && getComputedStyle(offsetParent).position === 'static') {\n    return window;\n  }\n\n  return offsetParent || window;\n}","import getNodeName from \"./getNodeName.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nexport default function getParentNode(element) {\n  if (getNodeName(element) === 'html') {\n    return element;\n  }\n\n  return (// $FlowFixMe: this is a quicker (but less type safe) way to save quite some bytes from the bundle\n    element.assignedSlot || // step into the shadow DOM of the parent of a slotted node\n    element.parentNode || // DOM Element detected\n    // $FlowFixMe: need a better way to handle this...\n    element.host || // ShadowRoot detected\n    // $FlowFixMe: HTMLElement is a Node\n    getDocumentElement(element) // fallback\n\n  );\n}","import getParentNode from \"./getParentNode.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nexport default function getScrollParent(node) {\n  if (['html', 'body', '#document'].indexOf(getNodeName(node)) >= 0) {\n    // $FlowFixMe: assume body is always available\n    return node.ownerDocument.body;\n  }\n\n  if (isHTMLElement(node)) {\n    // Firefox wants us to check `-x` and `-y` variations as well\n    var _getComputedStyle = getComputedStyle(node),\n        overflow = _getComputedStyle.overflow,\n        overflowX = _getComputedStyle.overflowX,\n        overflowY = _getComputedStyle.overflowY;\n\n    if (/auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX)) {\n      return node;\n    }\n  }\n\n  return getScrollParent(getParentNode(node));\n}","import getWindow from \"./getWindow.js\";\nexport default function getViewportRect(element) {\n  var win = getWindow(element);\n  var visualViewport = win.visualViewport;\n  var width = win.innerWidth;\n  var height = win.innerHeight; // We don't know which browsers have buggy or odd implementations of this, so\n  // for now we're only applying it to iOS to fix the keyboard issue.\n  // Investigation required\n\n  if (visualViewport && /iPhone|iPod|iPad/.test(navigator.platform)) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: 0,\n    y: 0\n  };\n}","/*:: import type { Window } from '../types'; */\n\n/*:: declare function getWindow(node: Node | Window): Window; */\nexport default function getWindow(node) {\n  if (node.toString() !== '[object Window]') {\n    var ownerDocument = node.ownerDocument;\n    return ownerDocument ? ownerDocument.defaultView : window;\n  }\n\n  return node;\n}","import getWindow from \"./getWindow.js\";\nexport default function getWindowScroll(node) {\n  var win = getWindow(node);\n  var scrollLeft = win.pageXOffset;\n  var scrollTop = win.pageYOffset;\n  return {\n    scrollLeft: scrollLeft,\n    scrollTop: scrollTop\n  };\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nexport default function getWindowScrollBarX(element) {\n  // If <html> has a CSS width greater than the viewport, then this will be\n  // incorrect for RTL.\n  // Popper 1 is broken in this case and never had a bug report so let's assume\n  // it's not an issue. I don't think anyone ever specifies width on <html>\n  // anyway.\n  // Browsers where the left scrollbar doesn't cause an issue report `0` for\n  // this (e.g. Edge 2019, IE11, Safari)\n  return getBoundingClientRect(getDocumentElement(element)).left + getWindowScroll(element).scrollLeft;\n}","import getWindow from \"./getWindow.js\";\n/*:: declare function isElement(node: mixed): boolean %checks(node instanceof\n  Element); */\n\nfunction isElement(node) {\n  var OwnElement = getWindow(node).Element;\n  return node instanceof OwnElement || node instanceof Element;\n}\n/*:: declare function isHTMLElement(node: mixed): boolean %checks(node instanceof\n  HTMLElement); */\n\n\nfunction isHTMLElement(node) {\n  var OwnElement = getWindow(node).HTMLElement;\n  return node instanceof OwnElement || node instanceof HTMLElement;\n}\n\nexport { isElement, isHTMLElement };","import getNodeName from \"./getNodeName.js\";\nexport default function isTableElement(element) {\n  return ['table', 'td', 'th'].indexOf(getNodeName(element)) >= 0;\n}","import getScrollParent from \"./getScrollParent.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport getWindow from \"./getWindow.js\";\nexport default function listScrollParents(element, list) {\n  if (list === void 0) {\n    list = [];\n  }\n\n  var scrollParent = getScrollParent(element);\n  var isBody = getNodeName(scrollParent) === 'body';\n  var win = getWindow(scrollParent);\n  var target = isBody ? [win].concat(win.visualViewport || []) : scrollParent;\n  var updatedList = list.concat(target);\n  return isBody ? updatedList : // $FlowFixMe: isBody tells us target will be an HTMLElement here\n  updatedList.concat(listScrollParents(getParentNode(target)));\n}","export var top = 'top';\nexport var bottom = 'bottom';\nexport var right = 'right';\nexport var left = 'left';\nexport var auto = 'auto';\nexport var basePlacements = [top, bottom, right, left];\nexport var start = 'start';\nexport var end = 'end';\nexport var clippingParents = 'clippingParents';\nexport var viewport = 'viewport';\nexport var popper = 'popper';\nexport var reference = 'reference';\nexport var variationPlacements = /*#__PURE__*/basePlacements.reduce(function (acc, placement) {\n  return acc.concat([placement + \"-\" + start, placement + \"-\" + end]);\n}, []);\nexport var placements = /*#__PURE__*/[].concat(basePlacements, [auto]).reduce(function (acc, placement) {\n  return acc.concat([placement, placement + \"-\" + start, placement + \"-\" + end]);\n}, []); // modifiers that need to read the DOM\n\nexport var beforeRead = 'beforeRead';\nexport var read = 'read';\nexport var afterRead = 'afterRead'; // pure-logic modifiers\n\nexport var beforeMain = 'beforeMain';\nexport var main = 'main';\nexport var afterMain = 'afterMain'; // modifier with the purpose to write to the DOM (or write into a framework state)\n\nexport var beforeWrite = 'beforeWrite';\nexport var write = 'write';\nexport var afterWrite = 'afterWrite';\nexport var modifierPhases = [beforeRead, read, afterRead, beforeMain, main, afterMain, beforeWrite, write, afterWrite];","// Returns the layout rect of an element relative to its offsetParent. Layout\n// means it doesn't take into account transforms.\nexport default function getLayoutRect(element) {\n  return {\n    x: element.offsetLeft,\n    y: element.offsetTop,\n    width: element.offsetWidth,\n    height: element.offsetHeight\n  };\n}","import { modifierPhases } from \"../enums.js\"; // source: https://stackoverflow.com/questions/49875255\n\nfunction order(modifiers) {\n  var map = new Map();\n  var visited = new Set();\n  var result = [];\n  modifiers.forEach(function (modifier) {\n    map.set(modifier.name, modifier);\n  }); // On visiting object, check for its dependencies and visit them recursively\n\n  function sort(modifier) {\n    visited.add(modifier.name);\n    var requires = [].concat(modifier.requires || [], modifier.requiresIfExists || []);\n    requires.forEach(function (dep) {\n      if (!visited.has(dep)) {\n        var depModifier = map.get(dep);\n\n        if (depModifier) {\n          sort(depModifier);\n        }\n      }\n    });\n    result.push(modifier);\n  }\n\n  modifiers.forEach(function (modifier) {\n    if (!visited.has(modifier.name)) {\n      // check for visited object\n      sort(modifier);\n    }\n  });\n  return result;\n}\n\nexport default function orderModifiers(modifiers) {\n  // order based on dependencies\n  var orderedModifiers = order(modifiers); // order based on phase\n\n  return modifierPhases.reduce(function (acc, phase) {\n    return acc.concat(orderedModifiers.filter(function (modifier) {\n      return modifier.phase === phase;\n    }));\n  }, []);\n}","import getCompositeRect from \"./dom-utils/getCompositeRect.js\";\nimport getLayoutRect from \"./dom-utils/getLayoutRect.js\";\nimport listScrollParents from \"./dom-utils/listScrollParents.js\";\nimport getOffsetParent from \"./dom-utils/getOffsetParent.js\";\nimport getComputedStyle from \"./dom-utils/getComputedStyle.js\";\nimport orderModifiers from \"./utils/orderModifiers.js\";\nimport debounce from \"./utils/debounce.js\";\nimport validateModifiers from \"./utils/validateModifiers.js\";\nimport uniqueBy from \"./utils/uniqueBy.js\";\nimport getBasePlacement from \"./utils/getBasePlacement.js\";\nimport mergeByName from \"./utils/mergeByName.js\";\nimport { isElement } from \"./dom-utils/instanceOf.js\";\nimport { auto } from \"./enums.js\";\nexport * from \"./enums.js\";\nvar INVALID_ELEMENT_ERROR = 'Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.';\nvar INFINITE_LOOP_ERROR = 'Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.';\nvar DEFAULT_OPTIONS = {\n  placement: 'bottom',\n  modifiers: [],\n  strategy: 'absolute'\n};\n\nfunction areValidElements() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return !args.some(function (element) {\n    return !(element && typeof element.getBoundingClientRect === 'function');\n  });\n}\n\nexport function popperGenerator(generatorOptions) {\n  if (generatorOptions === void 0) {\n    generatorOptions = {};\n  }\n\n  var _generatorOptions = generatorOptions,\n      _generatorOptions$def = _generatorOptions.defaultModifiers,\n      defaultModifiers = _generatorOptions$def === void 0 ? [] : _generatorOptions$def,\n      _generatorOptions$def2 = _generatorOptions.defaultOptions,\n      defaultOptions = _generatorOptions$def2 === void 0 ? DEFAULT_OPTIONS : _generatorOptions$def2;\n  return function createPopper(reference, popper, options) {\n    if (options === void 0) {\n      options = defaultOptions;\n    }\n\n    var state = {\n      placement: 'bottom',\n      orderedModifiers: [],\n      options: Object.assign({}, DEFAULT_OPTIONS, {}, defaultOptions),\n      modifiersData: {},\n      elements: {\n        reference: reference,\n        popper: popper\n      },\n      attributes: {},\n      styles: {}\n    };\n    var effectCleanupFns = [];\n    var isDestroyed = false;\n    var instance = {\n      state: state,\n      setOptions: function setOptions(options) {\n        cleanupModifierEffects();\n        state.options = Object.assign({}, defaultOptions, {}, state.options, {}, options);\n        state.scrollParents = {\n          reference: isElement(reference) ? listScrollParents(reference) : reference.contextElement ? listScrollParents(reference.contextElement) : [],\n          popper: listScrollParents(popper)\n        }; // Orders the modifiers based on their dependencies and `phase`\n        // properties\n\n        var orderedModifiers = orderModifiers(mergeByName([].concat(defaultModifiers, state.options.modifiers))); // Strip out disabled modifiers\n\n        state.orderedModifiers = orderedModifiers.filter(function (m) {\n          return m.enabled;\n        }); // Validate the provided modifiers so that the consumer will get warned\n        // if one of the modifiers is invalid for any reason\n\n        if (process.env.NODE_ENV !== \"production\") {\n          var modifiers = uniqueBy([].concat(orderedModifiers, state.options.modifiers), function (_ref) {\n            var name = _ref.name;\n            return name;\n          });\n          validateModifiers(modifiers);\n\n          if (getBasePlacement(state.options.placement) === auto) {\n            var flipModifier = state.orderedModifiers.find(function (_ref2) {\n              var name = _ref2.name;\n              return name === 'flip';\n            });\n\n            if (!flipModifier) {\n              console.error(['Popper: \"auto\" placements require the \"flip\" modifier be', 'present and enabled to work.'].join(' '));\n            }\n          }\n\n          var _getComputedStyle = getComputedStyle(popper),\n              marginTop = _getComputedStyle.marginTop,\n              marginRight = _getComputedStyle.marginRight,\n              marginBottom = _getComputedStyle.marginBottom,\n              marginLeft = _getComputedStyle.marginLeft; // We no longer take into account `margins` on the popper, and it can\n          // cause bugs with positioning, so we'll warn the consumer\n\n\n          if ([marginTop, marginRight, marginBottom, marginLeft].some(function (margin) {\n            return parseFloat(margin);\n          })) {\n            console.warn(['Popper: CSS \"margin\" styles cannot be used to apply padding', 'between the popper and its reference element or boundary.', 'To replicate margin, use the `offset` modifier, as well as', 'the `padding` option in the `preventOverflow` and `flip`', 'modifiers.'].join(' '));\n          }\n        }\n\n        runModifierEffects();\n        return instance.update();\n      },\n      // Sync update – it will always be executed, even if not necessary. This\n      // is useful for low frequency updates where sync behavior simplifies the\n      // logic.\n      // For high frequency updates (e.g. `resize` and `scroll` events), always\n      // prefer the async Popper#update method\n      forceUpdate: function forceUpdate() {\n        if (isDestroyed) {\n          return;\n        }\n\n        var _state$elements = state.elements,\n            reference = _state$elements.reference,\n            popper = _state$elements.popper; // Don't proceed if `reference` or `popper` are not valid elements\n        // anymore\n\n        if (!areValidElements(reference, popper)) {\n          if (process.env.NODE_ENV !== \"production\") {\n            console.error(INVALID_ELEMENT_ERROR);\n          }\n\n          return;\n        } // Store the reference and popper rects to be read by modifiers\n\n\n        state.rects = {\n          reference: getCompositeRect(reference, getOffsetParent(popper), state.options.strategy === 'fixed'),\n          popper: getLayoutRect(popper)\n        }; // Modifiers have the ability to reset the current update cycle. The\n        // most common use case for this is the `flip` modifier changing the\n        // placement, which then needs to re-run all the modifiers, because the\n        // logic was previously ran for the previous placement and is therefore\n        // stale/incorrect\n\n        state.reset = false;\n        state.placement = state.options.placement; // On each update cycle, the `modifiersData` property for each modifier\n        // is filled with the initial data specified by the modifier. This means\n        // it doesn't persist and is fresh on each update.\n        // To ensure persistent data, use `${name}#persistent`\n\n        state.orderedModifiers.forEach(function (modifier) {\n          return state.modifiersData[modifier.name] = Object.assign({}, modifier.data);\n        });\n        var __debug_loops__ = 0;\n\n        for (var index = 0; index < state.orderedModifiers.length; index++) {\n          if (process.env.NODE_ENV !== \"production\") {\n            __debug_loops__ += 1;\n\n            if (__debug_loops__ > 100) {\n              console.error(INFINITE_LOOP_ERROR);\n              break;\n            }\n          }\n\n          if (state.reset === true) {\n            state.reset = false;\n            index = -1;\n            continue;\n          }\n\n          var _state$orderedModifie = state.orderedModifiers[index],\n              fn = _state$orderedModifie.fn,\n              _state$orderedModifie2 = _state$orderedModifie.options,\n              _options = _state$orderedModifie2 === void 0 ? {} : _state$orderedModifie2,\n              name = _state$orderedModifie.name;\n\n          if (typeof fn === 'function') {\n            state = fn({\n              state: state,\n              options: _options,\n              name: name,\n              instance: instance\n            }) || state;\n          }\n        }\n      },\n      // Async and optimistically optimized update – it will not be executed if\n      // not necessary (debounced to run at most once-per-tick)\n      update: debounce(function () {\n        return new Promise(function (resolve) {\n          instance.forceUpdate();\n          resolve(state);\n        });\n      }),\n      destroy: function destroy() {\n        cleanupModifierEffects();\n        isDestroyed = true;\n      }\n    };\n\n    if (!areValidElements(reference, popper)) {\n      if (process.env.NODE_ENV !== \"production\") {\n        console.error(INVALID_ELEMENT_ERROR);\n      }\n\n      return instance;\n    }\n\n    instance.setOptions(options).then(function (state) {\n      if (!isDestroyed && options.onFirstUpdate) {\n        options.onFirstUpdate(state);\n      }\n    }); // Modifiers have the ability to execute arbitrary code before the first\n    // update cycle runs. They will be executed in the same order as the update\n    // cycle. This is useful when a modifier adds some persistent data that\n    // other modifiers need to use, but the modifier is run after the dependent\n    // one.\n\n    function runModifierEffects() {\n      state.orderedModifiers.forEach(function (_ref3) {\n        var name = _ref3.name,\n            _ref3$options = _ref3.options,\n            options = _ref3$options === void 0 ? {} : _ref3$options,\n            effect = _ref3.effect;\n\n        if (typeof effect === 'function') {\n          var cleanupFn = effect({\n            state: state,\n            name: name,\n            instance: instance,\n            options: options\n          });\n\n          var noopFn = function noopFn() {};\n\n          effectCleanupFns.push(cleanupFn || noopFn);\n        }\n      });\n    }\n\n    function cleanupModifierEffects() {\n      effectCleanupFns.forEach(function (fn) {\n        return fn();\n      });\n      effectCleanupFns = [];\n    }\n\n    return instance;\n  };\n}\nexport var createPopper = /*#__PURE__*/popperGenerator();","export default function debounce(fn) {\n  var pending;\n  return function () {\n    if (!pending) {\n      pending = new Promise(function (resolve) {\n        Promise.resolve().then(function () {\n          pending = undefined;\n          resolve(fn());\n        });\n      });\n    }\n\n    return pending;\n  };\n}","export default function mergeByName(modifiers) {\n  var merged = modifiers.reduce(function (merged, current) {\n    var existing = merged[current.name];\n    merged[current.name] = existing ? Object.assign({}, existing, {}, current, {\n      options: Object.assign({}, existing.options, {}, current.options),\n      data: Object.assign({}, existing.data, {}, current.data)\n    }) : current;\n    return merged;\n  }, {}); // IE11 does not support Object.values\n\n  return Object.keys(merged).map(function (key) {\n    return merged[key];\n  });\n}","import getWindow from \"../dom-utils/getWindow.js\";\nvar passive = {\n  passive: true\n};\n\nfunction effect(_ref) {\n  var state = _ref.state,\n      instance = _ref.instance,\n      options = _ref.options;\n  var _options$scroll = options.scroll,\n      scroll = _options$scroll === void 0 ? true : _options$scroll,\n      _options$resize = options.resize,\n      resize = _options$resize === void 0 ? true : _options$resize;\n  var window = getWindow(state.elements.popper);\n  var scrollParents = [].concat(state.scrollParents.reference, state.scrollParents.popper);\n\n  if (scroll) {\n    scrollParents.forEach(function (scrollParent) {\n      scrollParent.addEventListener('scroll', instance.update, passive);\n    });\n  }\n\n  if (resize) {\n    window.addEventListener('resize', instance.update, passive);\n  }\n\n  return function () {\n    if (scroll) {\n      scrollParents.forEach(function (scrollParent) {\n        scrollParent.removeEventListener('scroll', instance.update, passive);\n      });\n    }\n\n    if (resize) {\n      window.removeEventListener('resize', instance.update, passive);\n    }\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'eventListeners',\n  enabled: true,\n  phase: 'write',\n  fn: function fn() {},\n  effect: effect,\n  data: {}\n};","import computeOffsets from \"../utils/computeOffsets.js\";\n\nfunction popperOffsets(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  // Offsets are the actual position the popper needs to have to be\n  // properly positioned near its reference element\n  // This is the most basic placement, and will be adjusted by\n  // the modifiers in the next step\n  state.modifiersData[name] = computeOffsets({\n    reference: state.rects.reference,\n    element: state.rects.popper,\n    strategy: 'absolute',\n    placement: state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'popperOffsets',\n  enabled: true,\n  phase: 'read',\n  fn: popperOffsets,\n  data: {}\n};","import { top, left, right, bottom } from \"../enums.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getWindow from \"../dom-utils/getWindow.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getComputedStyle from \"../dom-utils/getComputedStyle.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nvar unsetSides = {\n  top: 'auto',\n  right: 'auto',\n  bottom: 'auto',\n  left: 'auto'\n}; // Round the offsets to the nearest suitable subpixel based on the DPR.\n// Zooming can change the DPR, but it seems to report a value that will\n// cleanly divide the values into the appropriate subpixels.\n\nfunction roundOffsets(_ref) {\n  var x = _ref.x,\n      y = _ref.y;\n  var win = window;\n  var dpr = win.devicePixelRatio || 1;\n  return {\n    x: Math.round(x * dpr) / dpr || 0,\n    y: Math.round(y * dpr) / dpr || 0\n  };\n}\n\nexport function mapToStyles(_ref2) {\n  var _Object$assign2;\n\n  var popper = _ref2.popper,\n      popperRect = _ref2.popperRect,\n      placement = _ref2.placement,\n      offsets = _ref2.offsets,\n      position = _ref2.position,\n      gpuAcceleration = _ref2.gpuAcceleration,\n      adaptive = _ref2.adaptive;\n\n  var _roundOffsets = roundOffsets(offsets),\n      x = _roundOffsets.x,\n      y = _roundOffsets.y;\n\n  var hasX = offsets.hasOwnProperty('x');\n  var hasY = offsets.hasOwnProperty('y');\n  var sideX = left;\n  var sideY = top;\n  var win = window;\n\n  if (adaptive) {\n    var offsetParent = getOffsetParent(popper);\n\n    if (offsetParent === getWindow(popper)) {\n      offsetParent = getDocumentElement(popper);\n    } // $FlowFixMe: force type refinement, we compare offsetParent with window above, but Flow doesn't detect it\n\n    /*:: offsetParent = (offsetParent: Element); */\n\n\n    if (placement === top) {\n      sideY = bottom;\n      y -= offsetParent.clientHeight - popperRect.height;\n      y *= gpuAcceleration ? 1 : -1;\n    }\n\n    if (placement === left) {\n      sideX = right;\n      x -= offsetParent.clientWidth - popperRect.width;\n      x *= gpuAcceleration ? 1 : -1;\n    }\n  }\n\n  var commonStyles = Object.assign({\n    position: position\n  }, adaptive && unsetSides);\n\n  if (gpuAcceleration) {\n    var _Object$assign;\n\n    return Object.assign({}, commonStyles, (_Object$assign = {}, _Object$assign[sideY] = hasY ? '0' : '', _Object$assign[sideX] = hasX ? '0' : '', _Object$assign.transform = (win.devicePixelRatio || 1) < 2 ? \"translate(\" + x + \"px, \" + y + \"px)\" : \"translate3d(\" + x + \"px, \" + y + \"px, 0)\", _Object$assign));\n  }\n\n  return Object.assign({}, commonStyles, (_Object$assign2 = {}, _Object$assign2[sideY] = hasY ? y + \"px\" : '', _Object$assign2[sideX] = hasX ? x + \"px\" : '', _Object$assign2.transform = '', _Object$assign2));\n}\n\nfunction computeStyles(_ref3) {\n  var state = _ref3.state,\n      options = _ref3.options;\n  var _options$gpuAccelerat = options.gpuAcceleration,\n      gpuAcceleration = _options$gpuAccelerat === void 0 ? true : _options$gpuAccelerat,\n      _options$adaptive = options.adaptive,\n      adaptive = _options$adaptive === void 0 ? true : _options$adaptive;\n\n  if (process.env.NODE_ENV !== \"production\") {\n    var transitionProperty = getComputedStyle(state.elements.popper).transitionProperty || '';\n\n    if (adaptive && ['transform', 'top', 'right', 'bottom', 'left'].some(function (property) {\n      return transitionProperty.indexOf(property) >= 0;\n    })) {\n      console.warn(['Popper: Detected CSS transitions on at least one of the following', 'CSS properties: \"transform\", \"top\", \"right\", \"bottom\", \"left\".', '\\n\\n', 'Disable the \"computeStyles\" modifier\\'s `adaptive` option to allow', 'for smooth transitions, or remove these properties from the CSS', 'transition declaration on the popper element if only transitioning', 'opacity or background-color for example.', '\\n\\n', 'We recommend using the popper element as a wrapper around an inner', 'element that can have any CSS property transitioned for animations.'].join(' '));\n    }\n  }\n\n  var commonStyles = {\n    placement: getBasePlacement(state.placement),\n    popper: state.elements.popper,\n    popperRect: state.rects.popper,\n    gpuAcceleration: gpuAcceleration\n  };\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.styles.popper = Object.assign({}, state.styles.popper, {}, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.popperOffsets,\n      position: state.options.strategy,\n      adaptive: adaptive\n    })));\n  }\n\n  if (state.modifiersData.arrow != null) {\n    state.styles.arrow = Object.assign({}, state.styles.arrow, {}, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.arrow,\n      position: 'absolute',\n      adaptive: false\n    })));\n  }\n\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-placement': state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'computeStyles',\n  enabled: true,\n  phase: 'beforeWrite',\n  fn: computeStyles,\n  data: {}\n};","import getNodeName from \"../dom-utils/getNodeName.js\";\nimport { isHTMLElement } from \"../dom-utils/instanceOf.js\"; // This modifier takes the styles prepared by the `computeStyles` modifier\n// and applies them to the HTMLElements such as popper and arrow\n\nfunction applyStyles(_ref) {\n  var state = _ref.state;\n  Object.keys(state.elements).forEach(function (name) {\n    var style = state.styles[name] || {};\n    var attributes = state.attributes[name] || {};\n    var element = state.elements[name]; // arrow is optional + virtual elements\n\n    if (!isHTMLElement(element) || !getNodeName(element)) {\n      return;\n    } // Flow doesn't support to extend this property, but it's the most\n    // effective way to apply styles to an HTMLElement\n    // $FlowFixMe\n\n\n    Object.assign(element.style, style);\n    Object.keys(attributes).forEach(function (name) {\n      var value = attributes[name];\n\n      if (value === false) {\n        element.removeAttribute(name);\n      } else {\n        element.setAttribute(name, value === true ? '' : value);\n      }\n    });\n  });\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state;\n  var initialStyles = {\n    popper: {\n      position: state.options.strategy,\n      left: '0',\n      top: '0',\n      margin: '0'\n    },\n    arrow: {\n      position: 'absolute'\n    },\n    reference: {}\n  };\n  Object.assign(state.elements.popper.style, initialStyles.popper);\n\n  if (state.elements.arrow) {\n    Object.assign(state.elements.arrow.style, initialStyles.arrow);\n  }\n\n  return function () {\n    Object.keys(state.elements).forEach(function (name) {\n      var element = state.elements[name];\n      var attributes = state.attributes[name] || {};\n      var styleProperties = Object.keys(state.styles.hasOwnProperty(name) ? state.styles[name] : initialStyles[name]); // Set all values to an empty string to unset them\n\n      var style = styleProperties.reduce(function (style, property) {\n        style[property] = '';\n        return style;\n      }, {}); // arrow is optional + virtual elements\n\n      if (!isHTMLElement(element) || !getNodeName(element)) {\n        return;\n      } // Flow doesn't support to extend this property, but it's the most\n      // effective way to apply styles to an HTMLElement\n      // $FlowFixMe\n\n\n      Object.assign(element.style, style);\n      Object.keys(attributes).forEach(function (attribute) {\n        element.removeAttribute(attribute);\n      });\n    });\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'applyStyles',\n  enabled: true,\n  phase: 'write',\n  fn: applyStyles,\n  effect: effect,\n  requires: ['computeStyles']\n};","import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport { top, left, right, placements } from \"../enums.js\";\nexport function distanceAndSkiddingToXY(placement, rects, offset) {\n  var basePlacement = getBasePlacement(placement);\n  var invertDistance = [left, top].indexOf(basePlacement) >= 0 ? -1 : 1;\n\n  var _ref = typeof offset === 'function' ? offset(Object.assign({}, rects, {\n    placement: placement\n  })) : offset,\n      skidding = _ref[0],\n      distance = _ref[1];\n\n  skidding = skidding || 0;\n  distance = (distance || 0) * invertDistance;\n  return [left, right].indexOf(basePlacement) >= 0 ? {\n    x: distance,\n    y: skidding\n  } : {\n    x: skidding,\n    y: distance\n  };\n}\n\nfunction offset(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options,\n      name = _ref2.name;\n  var _options$offset = options.offset,\n      offset = _options$offset === void 0 ? [0, 0] : _options$offset;\n  var data = placements.reduce(function (acc, placement) {\n    acc[placement] = distanceAndSkiddingToXY(placement, state.rects, offset);\n    return acc;\n  }, {});\n  var _data$state$placement = data[state.placement],\n      x = _data$state$placement.x,\n      y = _data$state$placement.y;\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.modifiersData.popperOffsets.x += x;\n    state.modifiersData.popperOffsets.y += y;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'offset',\n  enabled: true,\n  phase: 'main',\n  requires: ['popperOffsets'],\n  fn: offset\n};","var hash = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nexport default function getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, function (matched) {\n    return hash[matched];\n  });\n}","var hash = {\n  start: 'end',\n  end: 'start'\n};\nexport default function getOppositeVariationPlacement(placement) {\n  return placement.replace(/start|end/g, function (matched) {\n    return hash[matched];\n  });\n}","import getOppositePlacement from \"../utils/getOppositePlacement.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getOppositeVariationPlacement from \"../utils/getOppositeVariationPlacement.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport computeAutoPlacement from \"../utils/computeAutoPlacement.js\";\nimport { bottom, top, start, right, left, auto } from \"../enums.js\";\nimport getVariation from \"../utils/getVariation.js\";\n\nfunction getExpandedFallbackPlacements(placement) {\n  if (getBasePlacement(placement) === auto) {\n    return [];\n  }\n\n  var oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeVariationPlacement(placement), oppositePlacement, getOppositeVariationPlacement(oppositePlacement)];\n}\n\nfunction flip(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n\n  if (state.modifiersData[name]._skip) {\n    return;\n  }\n\n  var specifiedFallbackPlacements = options.fallbackPlacements,\n      padding = options.padding,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      _options$flipVariatio = options.flipVariations,\n      flipVariations = _options$flipVariatio === void 0 ? true : _options$flipVariatio,\n      allowedAutoPlacements = options.allowedAutoPlacements;\n  var preferredPlacement = state.options.placement;\n  var basePlacement = getBasePlacement(preferredPlacement);\n  var isBasePlacement = basePlacement === preferredPlacement;\n  var fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipVariations ? [getOppositePlacement(preferredPlacement)] : getExpandedFallbackPlacements(preferredPlacement));\n  var placements = [preferredPlacement].concat(fallbackPlacements).reduce(function (acc, placement) {\n    return acc.concat(getBasePlacement(placement) === auto ? computeAutoPlacement(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding,\n      flipVariations: flipVariations,\n      allowedAutoPlacements: allowedAutoPlacements\n    }) : placement);\n  }, []);\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var checksMap = new Map();\n  var makeFallbackChecks = true;\n  var firstFittingPlacement = placements[0];\n\n  for (var i = 0; i < placements.length; i++) {\n    var placement = placements[i];\n\n    var _basePlacement = getBasePlacement(placement);\n\n    var isStartVariation = getVariation(placement) === start;\n    var isVertical = [top, bottom].indexOf(_basePlacement) >= 0;\n    var len = isVertical ? 'width' : 'height';\n    var overflow = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      altBoundary: altBoundary,\n      padding: padding\n    });\n    var mainVariationSide = isVertical ? isStartVariation ? right : left : isStartVariation ? bottom : top;\n\n    if (referenceRect[len] > popperRect[len]) {\n      mainVariationSide = getOppositePlacement(mainVariationSide);\n    }\n\n    var altVariationSide = getOppositePlacement(mainVariationSide);\n    var checks = [overflow[_basePlacement] <= 0, overflow[mainVariationSide] <= 0, overflow[altVariationSide] <= 0];\n\n    if (checks.every(function (check) {\n      return check;\n    })) {\n      firstFittingPlacement = placement;\n      makeFallbackChecks = false;\n      break;\n    }\n\n    checksMap.set(placement, checks);\n  }\n\n  if (makeFallbackChecks) {\n    // `2` may be desired in some cases – research later\n    var numberOfChecks = flipVariations ? 3 : 1;\n\n    var _loop = function _loop(_i) {\n      var fittingPlacement = placements.find(function (placement) {\n        var checks = checksMap.get(placement);\n\n        if (checks) {\n          return checks.slice(0, _i).every(function (check) {\n            return check;\n          });\n        }\n      });\n\n      if (fittingPlacement) {\n        firstFittingPlacement = fittingPlacement;\n        return \"break\";\n      }\n    };\n\n    for (var _i = numberOfChecks; _i > 0; _i--) {\n      var _ret = _loop(_i);\n\n      if (_ret === \"break\") break;\n    }\n  }\n\n  if (state.placement !== firstFittingPlacement) {\n    state.modifiersData[name]._skip = true;\n    state.placement = firstFittingPlacement;\n    state.reset = true;\n  }\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'flip',\n  enabled: true,\n  phase: 'main',\n  fn: flip,\n  requiresIfExists: ['offset'],\n  data: {\n    _skip: false\n  }\n};","import getVariation from \"./getVariation.js\";\nimport { variationPlacements, basePlacements, placements as allPlacements } from \"../enums.js\";\nimport detectOverflow from \"./detectOverflow.js\";\nimport getBasePlacement from \"./getBasePlacement.js\";\n\n/*:: type OverflowsMap = { [ComputedPlacement]: number }; */\n\n/*;; type OverflowsMap = { [key in ComputedPlacement]: number }; */\nexport default function computeAutoPlacement(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      placement = _options.placement,\n      boundary = _options.boundary,\n      rootBoundary = _options.rootBoundary,\n      padding = _options.padding,\n      flipVariations = _options.flipVariations,\n      _options$allowedAutoP = _options.allowedAutoPlacements,\n      allowedAutoPlacements = _options$allowedAutoP === void 0 ? allPlacements : _options$allowedAutoP;\n  var variation = getVariation(placement);\n  var placements = (variation ? flipVariations ? variationPlacements : variationPlacements.filter(function (placement) {\n    return getVariation(placement) === variation;\n  }) : basePlacements).filter(function (placement) {\n    return allowedAutoPlacements.indexOf(placement) >= 0;\n  }); // $FlowFixMe: Flow seems to have problems with two array unions...\n\n  var overflows = placements.reduce(function (acc, placement) {\n    acc[placement] = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding\n    })[getBasePlacement(placement)];\n    return acc;\n  }, {});\n  return Object.keys(overflows).sort(function (a, b) {\n    return overflows[a] - overflows[b];\n  });\n}","export default function within(min, value, max) {\n  return Math.max(min, Math.min(value, max));\n}","import { top, left, right, bottom, start } from \"../enums.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport getAltAxis from \"../utils/getAltAxis.js\";\nimport within from \"../utils/within.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport getFreshSideObject from \"../utils/getFreshSideObject.js\";\n\nfunction preventOverflow(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? false : _options$altAxis,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      padding = options.padding,\n      _options$tether = options.tether,\n      tether = _options$tether === void 0 ? true : _options$tether,\n      _options$tetherOffset = options.tetherOffset,\n      tetherOffset = _options$tetherOffset === void 0 ? 0 : _options$tetherOffset;\n  var overflow = detectOverflow(state, {\n    boundary: boundary,\n    rootBoundary: rootBoundary,\n    padding: padding,\n    altBoundary: altBoundary\n  });\n  var basePlacement = getBasePlacement(state.placement);\n  var variation = getVariation(state.placement);\n  var isBasePlacement = !variation;\n  var mainAxis = getMainAxisFromPlacement(basePlacement);\n  var altAxis = getAltAxis(mainAxis);\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var tetherOffsetValue = typeof tetherOffset === 'function' ? tetherOffset(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : tetherOffset;\n  var data = {\n    x: 0,\n    y: 0\n  };\n\n  if (!popperOffsets) {\n    return;\n  }\n\n  if (checkMainAxis) {\n    var mainSide = mainAxis === 'y' ? top : left;\n    var altSide = mainAxis === 'y' ? bottom : right;\n    var len = mainAxis === 'y' ? 'height' : 'width';\n    var offset = popperOffsets[mainAxis];\n    var min = popperOffsets[mainAxis] + overflow[mainSide];\n    var max = popperOffsets[mainAxis] - overflow[altSide];\n    var additive = tether ? -popperRect[len] / 2 : 0;\n    var minLen = variation === start ? referenceRect[len] : popperRect[len];\n    var maxLen = variation === start ? -popperRect[len] : -referenceRect[len]; // We need to include the arrow in the calculation so the arrow doesn't go\n    // outside the reference bounds\n\n    var arrowElement = state.elements.arrow;\n    var arrowRect = tether && arrowElement ? getLayoutRect(arrowElement) : {\n      width: 0,\n      height: 0\n    };\n    var arrowPaddingObject = state.modifiersData['arrow#persistent'] ? state.modifiersData['arrow#persistent'].padding : getFreshSideObject();\n    var arrowPaddingMin = arrowPaddingObject[mainSide];\n    var arrowPaddingMax = arrowPaddingObject[altSide]; // If the reference length is smaller than the arrow length, we don't want\n    // to include its full size in the calculation. If the reference is small\n    // and near the edge of a boundary, the popper can overflow even if the\n    // reference is not overflowing as well (e.g. virtual elements with no\n    // width or height)\n\n    var arrowLen = within(0, referenceRect[len], arrowRect[len]);\n    var minOffset = isBasePlacement ? referenceRect[len] / 2 - additive - arrowLen - arrowPaddingMin - tetherOffsetValue : minLen - arrowLen - arrowPaddingMin - tetherOffsetValue;\n    var maxOffset = isBasePlacement ? -referenceRect[len] / 2 + additive + arrowLen + arrowPaddingMax + tetherOffsetValue : maxLen + arrowLen + arrowPaddingMax + tetherOffsetValue;\n    var arrowOffsetParent = state.elements.arrow && getOffsetParent(state.elements.arrow);\n    var clientOffset = arrowOffsetParent ? mainAxis === 'y' ? arrowOffsetParent.clientTop || 0 : arrowOffsetParent.clientLeft || 0 : 0;\n    var offsetModifierValue = state.modifiersData.offset ? state.modifiersData.offset[state.placement][mainAxis] : 0;\n    var tetherMin = popperOffsets[mainAxis] + minOffset - offsetModifierValue - clientOffset;\n    var tetherMax = popperOffsets[mainAxis] + maxOffset - offsetModifierValue;\n    var preventedOffset = within(tether ? Math.min(min, tetherMin) : min, offset, tether ? Math.max(max, tetherMax) : max);\n    popperOffsets[mainAxis] = preventedOffset;\n    data[mainAxis] = preventedOffset - offset;\n  }\n\n  if (checkAltAxis) {\n    var _mainSide = mainAxis === 'x' ? top : left;\n\n    var _altSide = mainAxis === 'x' ? bottom : right;\n\n    var _offset = popperOffsets[altAxis];\n\n    var _min = _offset + overflow[_mainSide];\n\n    var _max = _offset - overflow[_altSide];\n\n    var _preventedOffset = within(_min, _offset, _max);\n\n    popperOffsets[altAxis] = _preventedOffset;\n    data[altAxis] = _preventedOffset - _offset;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'preventOverflow',\n  enabled: true,\n  phase: 'main',\n  fn: preventOverflow,\n  requiresIfExists: ['offset']\n};","export default function getAltAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}","import { top, bottom, left, right } from \"../enums.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\n\nfunction getSideOffsets(overflow, rect, preventedOffsets) {\n  if (preventedOffsets === void 0) {\n    preventedOffsets = {\n      x: 0,\n      y: 0\n    };\n  }\n\n  return {\n    top: overflow.top - rect.height - preventedOffsets.y,\n    right: overflow.right - rect.width + preventedOffsets.x,\n    bottom: overflow.bottom - rect.height + preventedOffsets.y,\n    left: overflow.left - rect.width - preventedOffsets.x\n  };\n}\n\nfunction isAnySideFullyClipped(overflow) {\n  return [top, right, bottom, left].some(function (side) {\n    return overflow[side] >= 0;\n  });\n}\n\nfunction hide(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var preventedOffsets = state.modifiersData.preventOverflow;\n  var referenceOverflow = detectOverflow(state, {\n    elementContext: 'reference'\n  });\n  var popperAltOverflow = detectOverflow(state, {\n    altBoundary: true\n  });\n  var referenceClippingOffsets = getSideOffsets(referenceOverflow, referenceRect);\n  var popperEscapeOffsets = getSideOffsets(popperAltOverflow, popperRect, preventedOffsets);\n  var isReferenceHidden = isAnySideFullyClipped(referenceClippingOffsets);\n  var hasPopperEscaped = isAnySideFullyClipped(popperEscapeOffsets);\n  state.modifiersData[name] = {\n    referenceClippingOffsets: referenceClippingOffsets,\n    popperEscapeOffsets: popperEscapeOffsets,\n    isReferenceHidden: isReferenceHidden,\n    hasPopperEscaped: hasPopperEscaped\n  };\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-reference-hidden': isReferenceHidden,\n    'data-popper-escaped': hasPopperEscaped\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'hide',\n  enabled: true,\n  phase: 'main',\n  requiresIfExists: ['preventOverflow'],\n  fn: hide\n};","import { popperGenerator } from \"./index.js\";\nimport eventListeners from \"./modifiers/eventListeners.js\";\nimport popperOffsets from \"./modifiers/popperOffsets.js\";\nimport computeStyles from \"./modifiers/computeStyles.js\";\nimport applyStyles from \"./modifiers/applyStyles.js\";\nimport offset from \"./modifiers/offset.js\";\nimport flip from \"./modifiers/flip.js\";\nimport preventOverflow from \"./modifiers/preventOverflow.js\";\nimport arrow from \"./modifiers/arrow.js\";\nimport hide from \"./modifiers/hide.js\";\nimport detectOverflow from \"./utils/detectOverflow.js\";\nvar defaultModifiers = [eventListeners, popperOffsets, computeStyles, applyStyles, offset, flip, preventOverflow, arrow, hide];\nvar createPopper = /*#__PURE__*/popperGenerator({\n  defaultModifiers: defaultModifiers\n}); // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper, popperGenerator, defaultModifiers, detectOverflow };","import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport contains from \"../dom-utils/contains.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport within from \"../utils/within.js\";\nimport mergePaddingObject from \"../utils/mergePaddingObject.js\";\nimport expandToHashMap from \"../utils/expandToHashMap.js\";\nimport { left, right, basePlacements, top, bottom } from \"../enums.js\";\n\nfunction arrow(_ref) {\n  var _state$modifiersData$;\n\n  var state = _ref.state,\n      name = _ref.name;\n  var arrowElement = state.elements.arrow;\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var basePlacement = getBasePlacement(state.placement);\n  var axis = getMainAxisFromPlacement(basePlacement);\n  var isVertical = [left, right].indexOf(basePlacement) >= 0;\n  var len = isVertical ? 'height' : 'width';\n\n  if (!arrowElement || !popperOffsets) {\n    return;\n  }\n\n  var paddingObject = state.modifiersData[name + \"#persistent\"].padding;\n  var arrowRect = getLayoutRect(arrowElement);\n  var minProp = axis === 'y' ? top : left;\n  var maxProp = axis === 'y' ? bottom : right;\n  var endDiff = state.rects.reference[len] + state.rects.reference[axis] - popperOffsets[axis] - state.rects.popper[len];\n  var startDiff = popperOffsets[axis] - state.rects.reference[axis];\n  var arrowOffsetParent = state.elements.arrow && getOffsetParent(state.elements.arrow);\n  var clientSize = arrowOffsetParent ? axis === 'y' ? arrowOffsetParent.clientHeight || 0 : arrowOffsetParent.clientWidth || 0 : 0;\n  var centerToReference = endDiff / 2 - startDiff / 2; // Make sure the arrow doesn't overflow the popper if the center point is\n  // outside of the popper bounds\n\n  var min = paddingObject[minProp];\n  var max = clientSize - arrowRect[len] - paddingObject[maxProp];\n  var center = clientSize / 2 - arrowRect[len] / 2 + centerToReference;\n  var offset = within(min, center, max); // Prevents breaking syntax highlighting...\n\n  var axisProp = axis;\n  state.modifiersData[name] = (_state$modifiersData$ = {}, _state$modifiersData$[axisProp] = offset, _state$modifiersData$.centerOffset = offset - center, _state$modifiersData$);\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options,\n      name = _ref2.name;\n  var _options$element = options.element,\n      arrowElement = _options$element === void 0 ? '[data-popper-arrow]' : _options$element,\n      _options$padding = options.padding,\n      padding = _options$padding === void 0 ? 0 : _options$padding;\n\n  if (arrowElement == null) {\n    return;\n  } // CSS selector\n\n\n  if (typeof arrowElement === 'string') {\n    arrowElement = state.elements.popper.querySelector(arrowElement);\n\n    if (!arrowElement) {\n      return;\n    }\n  }\n\n  if (!contains(state.elements.popper, arrowElement)) {\n    if (process.env.NODE_ENV !== \"production\") {\n      console.error(['Popper: \"arrow\" modifier\\'s `element` must be a child of the popper', 'element.'].join(' '));\n    }\n\n    return;\n  }\n\n  state.elements.arrow = arrowElement;\n  state.modifiersData[name + \"#persistent\"] = {\n    padding: mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements))\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'arrow',\n  enabled: true,\n  phase: 'main',\n  fn: arrow,\n  effect: effect,\n  requires: ['popperOffsets'],\n  requiresIfExists: ['preventOverflow']\n};","import getBasePlacement from \"./getBasePlacement.js\";\nimport getVariation from \"./getVariation.js\";\nimport getMainAxisFromPlacement from \"./getMainAxisFromPlacement.js\";\nimport { top, right, bottom, left, start, end } from \"../enums.js\";\nexport default function computeOffsets(_ref) {\n  var reference = _ref.reference,\n      element = _ref.element,\n      placement = _ref.placement;\n  var basePlacement = placement ? getBasePlacement(placement) : null;\n  var variation = placement ? getVariation(placement) : null;\n  var commonX = reference.x + reference.width / 2 - element.width / 2;\n  var commonY = reference.y + reference.height / 2 - element.height / 2;\n  var offsets;\n\n  switch (basePlacement) {\n    case top:\n      offsets = {\n        x: commonX,\n        y: reference.y - element.height\n      };\n      break;\n\n    case bottom:\n      offsets = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n\n    case right:\n      offsets = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n\n    case left:\n      offsets = {\n        x: reference.x - element.width,\n        y: commonY\n      };\n      break;\n\n    default:\n      offsets = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n\n  var mainAxis = basePlacement ? getMainAxisFromPlacement(basePlacement) : null;\n\n  if (mainAxis != null) {\n    var len = mainAxis === 'y' ? 'height' : 'width';\n\n    switch (variation) {\n      case start:\n        offsets[mainAxis] = Math.floor(offsets[mainAxis]) - Math.floor(reference[len] / 2 - element[len] / 2);\n        break;\n\n      case end:\n        offsets[mainAxis] = Math.floor(offsets[mainAxis]) + Math.ceil(reference[len] / 2 - element[len] / 2);\n        break;\n\n      default:\n    }\n  }\n\n  return offsets;\n}","import getBoundingClientRect from \"../dom-utils/getBoundingClientRect.js\";\nimport getClippingRect from \"../dom-utils/getClippingRect.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport computeOffsets from \"./computeOffsets.js\";\nimport rectToClientRect from \"./rectToClientRect.js\";\nimport { clippingParents, reference, popper, bottom, top, right, basePlacements, viewport } from \"../enums.js\";\nimport { isElement } from \"../dom-utils/instanceOf.js\";\nimport mergePaddingObject from \"./mergePaddingObject.js\";\nimport expandToHashMap from \"./expandToHashMap.js\";\nexport default function detectOverflow(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      _options$placement = _options.placement,\n      placement = _options$placement === void 0 ? state.placement : _options$placement,\n      _options$boundary = _options.boundary,\n      boundary = _options$boundary === void 0 ? clippingParents : _options$boundary,\n      _options$rootBoundary = _options.rootBoundary,\n      rootBoundary = _options$rootBoundary === void 0 ? viewport : _options$rootBoundary,\n      _options$elementConte = _options.elementContext,\n      elementContext = _options$elementConte === void 0 ? popper : _options$elementConte,\n      _options$altBoundary = _options.altBoundary,\n      altBoundary = _options$altBoundary === void 0 ? false : _options$altBoundary,\n      _options$padding = _options.padding,\n      padding = _options$padding === void 0 ? 0 : _options$padding;\n  var paddingObject = mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n  var altContext = elementContext === popper ? reference : popper;\n  var referenceElement = state.elements.reference;\n  var popperRect = state.rects.popper;\n  var element = state.elements[altBoundary ? altContext : elementContext];\n  var clippingClientRect = getClippingRect(isElement(element) ? element : element.contextElement || getDocumentElement(state.elements.popper), boundary, rootBoundary);\n  var referenceClientRect = getBoundingClientRect(referenceElement);\n  var popperOffsets = computeOffsets({\n    reference: referenceClientRect,\n    element: popperRect,\n    strategy: 'absolute',\n    placement: placement\n  });\n  var popperClientRect = rectToClientRect(Object.assign({}, popperRect, {}, popperOffsets));\n  var elementClientRect = elementContext === popper ? popperClientRect : referenceClientRect; // positive = overflowing the clipping rect\n  // 0 or negative = within the clipping rect\n\n  var overflowOffsets = {\n    top: clippingClientRect.top - elementClientRect.top + paddingObject.top,\n    bottom: elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom,\n    left: clippingClientRect.left - elementClientRect.left + paddingObject.left,\n    right: elementClientRect.right - clippingClientRect.right + paddingObject.right\n  };\n  var offsetData = state.modifiersData.offset; // Offsets can be applied only to the popper element\n\n  if (elementContext === popper && offsetData) {\n    var offset = offsetData[placement];\n    Object.keys(overflowOffsets).forEach(function (key) {\n      var multiply = [right, bottom].indexOf(key) >= 0 ? 1 : -1;\n      var axis = [top, bottom].indexOf(key) >= 0 ? 'y' : 'x';\n      overflowOffsets[key] += offset[axis] * multiply;\n    });\n  }\n\n  return overflowOffsets;\n}","export default function expandToHashMap(value, keys) {\n  return keys.reduce(function (hashMap, key) {\n    hashMap[key] = value;\n    return hashMap;\n  }, {});\n}","import { auto } from \"../enums.js\";\nexport default function getBasePlacement(placement) {\n  return placement.split('-')[0];\n}","export default function getFreshSideObject() {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  };\n}","export default function getMainAxisFromPlacement(placement) {\n  return ['top', 'bottom'].indexOf(placement) >= 0 ? 'x' : 'y';\n}","export default function getVariation(placement) {\n  return placement.split('-')[1];\n}","import getFreshSideObject from \"./getFreshSideObject.js\";\nexport default function mergePaddingObject(paddingObject) {\n  return Object.assign({}, getFreshSideObject(), {}, paddingObject);\n}","export default function rectToClientRect(rect) {\n  return Object.assign({}, rect, {\n    left: rect.x,\n    top: rect.y,\n    right: rect.x + rect.width,\n    bottom: rect.y + rect.height\n  });\n}","module.exports = require('./lib/axios');","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar cookies = require('./../helpers/cookies');\nvar buildURL = require('./../helpers/buildURL');\nvar buildFullPath = require('../core/buildFullPath');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n    var responseType = config.responseType;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password ? unescape(encodeURIComponent(config.auth.password)) : '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    var fullPath = buildFullPath(config.baseURL, config.url);\n    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    function onloadend() {\n      if (!request) {\n        return;\n      }\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !responseType || responseType === 'text' ||  responseType === 'json' ?\n        request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    }\n\n    if ('onloadend' in request) {\n      // Use onloadend if available\n      request.onloadend = onloadend;\n    } else {\n      // Listen for ready state to emulate onloadend\n      request.onreadystatechange = function handleLoad() {\n        if (!request || request.readyState !== 4) {\n          return;\n        }\n\n        // The request errored out and we didn't get a response, this will be\n        // handled by onerror instead\n        // With one exception: request that using file: protocol, most browsers\n        // will return status as 0 even though it's a successful request\n        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n          return;\n        }\n        // readystate handler is calling before onerror or ontimeout handlers,\n        // so we should call onloadend on the next 'tick'\n        setTimeout(onloadend);\n      };\n    }\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(createError('Request aborted', config, 'ECONNABORTED', request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      var timeoutErrorMessage = 'timeout of ' + config.timeout + 'ms exceeded';\n      if (config.timeoutErrorMessage) {\n        timeoutErrorMessage = config.timeoutErrorMessage;\n      }\n      reject(createError(\n        timeoutErrorMessage,\n        config,\n        config.transitional && config.transitional.clarifyTimeoutError ? 'ETIMEDOUT' : 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ?\n        cookies.read(config.xsrfCookieName) :\n        undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(config.withCredentials)) {\n      request.withCredentials = !!config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (responseType && responseType !== 'json') {\n      request.responseType = config.responseType;\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (!requestData) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar mergeConfig = require('./core/mergeConfig');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(mergeConfig(axios.defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\n// Expose isAxiosError\naxios.isAxiosError = require('./helpers/isAxiosError');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n","'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n","'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar buildURL = require('../helpers/buildURL');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\nvar mergeConfig = require('./mergeConfig');\nvar validator = require('../helpers/validator');\n\nvar validators = validator.validators;\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = arguments[1] || {};\n    config.url = arguments[0];\n  } else {\n    config = config || {};\n  }\n\n  config = mergeConfig(this.defaults, config);\n\n  // Set config.method\n  if (config.method) {\n    config.method = config.method.toLowerCase();\n  } else if (this.defaults.method) {\n    config.method = this.defaults.method.toLowerCase();\n  } else {\n    config.method = 'get';\n  }\n\n  var transitional = config.transitional;\n\n  if (transitional !== undefined) {\n    validator.assertOptions(transitional, {\n      silentJSONParsing: validators.transitional(validators.boolean, '1.0.0'),\n      forcedJSONParsing: validators.transitional(validators.boolean, '1.0.0'),\n      clarifyTimeoutError: validators.transitional(validators.boolean, '1.0.0')\n    }, false);\n  }\n\n  // filter out skipped interceptors\n  var requestInterceptorChain = [];\n  var synchronousRequestInterceptors = true;\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    if (typeof interceptor.runWhen === 'function' && interceptor.runWhen(config) === false) {\n      return;\n    }\n\n    synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;\n\n    requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  var responseInterceptorChain = [];\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  var promise;\n\n  if (!synchronousRequestInterceptors) {\n    var chain = [dispatchRequest, undefined];\n\n    Array.prototype.unshift.apply(chain, requestInterceptorChain);\n    chain.concat(responseInterceptorChain);\n\n    promise = Promise.resolve(config);\n    while (chain.length) {\n      promise = promise.then(chain.shift(), chain.shift());\n    }\n\n    return promise;\n  }\n\n\n  var newConfig = config;\n  while (requestInterceptorChain.length) {\n    var onFulfilled = requestInterceptorChain.shift();\n    var onRejected = requestInterceptorChain.shift();\n    try {\n      newConfig = onFulfilled(newConfig);\n    } catch (error) {\n      onRejected(error);\n      break;\n    }\n  }\n\n  try {\n    promise = dispatchRequest(newConfig);\n  } catch (error) {\n    return Promise.reject(error);\n  }\n\n  while (responseInterceptorChain.length) {\n    promise = promise.then(responseInterceptorChain.shift(), responseInterceptorChain.shift());\n  }\n\n  return promise;\n};\n\nAxios.prototype.getUri = function getUri(config) {\n  config = mergeConfig(this.defaults, config);\n  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\\?/, '');\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(mergeConfig(config || {}, {\n      method: method,\n      url: url,\n      data: (config || {}).data\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(mergeConfig(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected, options) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected,\n    synchronous: options ? options.synchronous : false,\n    runWhen: options ? options.runWhen : null\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n","'use strict';\n\nvar isAbsoluteURL = require('../helpers/isAbsoluteURL');\nvar combineURLs = require('../helpers/combineURLs');\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n * @returns {string} The combined full path\n */\nmodule.exports = function buildFullPath(baseURL, requestedURL) {\n  if (baseURL && !isAbsoluteURL(requestedURL)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n};\n","'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData.call(\n    config,\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData.call(\n      config,\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData.call(\n          config,\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n","'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n\n  error.request = request;\n  error.response = response;\n  error.isAxiosError = true;\n\n  error.toJSON = function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: this.config,\n      code: this.code\n    };\n  };\n  return error;\n};\n","'use strict';\n\nvar utils = require('../utils');\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n * @returns {Object} New object resulting from merging config2 to config1\n */\nmodule.exports = function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  var config = {};\n\n  var valueFromConfig2Keys = ['url', 'method', 'data'];\n  var mergeDeepPropertiesKeys = ['headers', 'auth', 'proxy', 'params'];\n  var defaultToConfig2Keys = [\n    'baseURL', 'transformRequest', 'transformResponse', 'paramsSerializer',\n    'timeout', 'timeoutMessage', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName',\n    'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress', 'decompress',\n    'maxContentLength', 'maxBodyLength', 'maxRedirects', 'transport', 'httpAgent',\n    'httpsAgent', 'cancelToken', 'socketPath', 'responseEncoding'\n  ];\n  var directMergeKeys = ['validateStatus'];\n\n  function getMergedValue(target, source) {\n    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {\n      return utils.merge(target, source);\n    } else if (utils.isPlainObject(source)) {\n      return utils.merge({}, source);\n    } else if (utils.isArray(source)) {\n      return source.slice();\n    }\n    return source;\n  }\n\n  function mergeDeepProperties(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(config1[prop], config2[prop]);\n    } else if (!utils.isUndefined(config1[prop])) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  }\n\n  utils.forEach(valueFromConfig2Keys, function valueFromConfig2(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(undefined, config2[prop]);\n    }\n  });\n\n  utils.forEach(mergeDeepPropertiesKeys, mergeDeepProperties);\n\n  utils.forEach(defaultToConfig2Keys, function defaultToConfig2(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(undefined, config2[prop]);\n    } else if (!utils.isUndefined(config1[prop])) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  });\n\n  utils.forEach(directMergeKeys, function merge(prop) {\n    if (prop in config2) {\n      config[prop] = getMergedValue(config1[prop], config2[prop]);\n    } else if (prop in config1) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  });\n\n  var axiosKeys = valueFromConfig2Keys\n    .concat(mergeDeepPropertiesKeys)\n    .concat(defaultToConfig2Keys)\n    .concat(directMergeKeys);\n\n  var otherKeys = Object\n    .keys(config1)\n    .concat(Object.keys(config2))\n    .filter(function filterAxiosKeys(key) {\n      return axiosKeys.indexOf(key) === -1;\n    });\n\n  utils.forEach(otherKeys, mergeDeepProperties);\n\n  return config;\n};\n","'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar defaults = require('./../defaults');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  var context = this || defaults;\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn.call(context, data, headers);\n  });\n\n  return data;\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\nvar enhanceError = require('./core/enhanceError');\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  } else if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  }\n  return adapter;\n}\n\nvar defaults = {\n\n  transitional: {\n    silentJSONParsing: true,\n    forcedJSONParsing: true,\n    clarifyTimeoutError: false\n  },\n\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Accept');\n    normalizeHeaderName(headers, 'Content-Type');\n\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data) || (headers && headers['Content-Type'] === 'application/json')) {\n      setContentTypeIfUnset(headers, 'application/json');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    var transitional = this.transitional;\n    var silentJSONParsing = transitional && transitional.silentJSONParsing;\n    var forcedJSONParsing = transitional && transitional.forcedJSONParsing;\n    var strictJSONParsing = !silentJSONParsing && this.responseType === 'json';\n\n    if (strictJSONParsing || (forcedJSONParsing && utils.isString(data) && data.length)) {\n      try {\n        return JSON.parse(data);\n      } catch (e) {\n        if (strictJSONParsing) {\n          if (e.name === 'SyntaxError') {\n            throw enhanceError(e, this, 'E_JSON_PARSE');\n          }\n          throw e;\n        }\n      }\n    }\n\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n  maxBodyLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    var hashmarkIndex = url.indexOf('#');\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n    (function standardBrowserEnv() {\n      return {\n        write: function write(name, value, expires, path, domain, secure) {\n          var cookie = [];\n          cookie.push(name + '=' + encodeURIComponent(value));\n\n          if (utils.isNumber(expires)) {\n            cookie.push('expires=' + new Date(expires).toGMTString());\n          }\n\n          if (utils.isString(path)) {\n            cookie.push('path=' + path);\n          }\n\n          if (utils.isString(domain)) {\n            cookie.push('domain=' + domain);\n          }\n\n          if (secure === true) {\n            cookie.push('secure');\n          }\n\n          document.cookie = cookie.join('; ');\n        },\n\n        read: function read(name) {\n          var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n          return (match ? decodeURIComponent(match[3]) : null);\n        },\n\n        remove: function remove(name) {\n          this.write(name, '', Date.now() - 86400000);\n        }\n      };\n    })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return {\n        write: function write() {},\n        read: function read() { return null; },\n        remove: function remove() {}\n      };\n    })()\n);\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n","'use strict';\n\n/**\n * Determines whether the payload is an error thrown by Axios\n *\n * @param {*} payload The value to test\n * @returns {boolean} True if the payload is an error thrown by Axios, otherwise false\n */\nmodule.exports = function isAxiosError(payload) {\n  return (typeof payload === 'object') && (payload.isAxiosError === true);\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n    (function standardBrowserEnv() {\n      var msie = /(msie|trident)/i.test(navigator.userAgent);\n      var urlParsingNode = document.createElement('a');\n      var originURL;\n\n      /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n      function resolveURL(url) {\n        var href = url;\n\n        if (msie) {\n        // IE needs attribute set twice to normalize properties\n          urlParsingNode.setAttribute('href', href);\n          href = urlParsingNode.href;\n        }\n\n        urlParsingNode.setAttribute('href', href);\n\n        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n        return {\n          href: urlParsingNode.href,\n          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n          host: urlParsingNode.host,\n          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n          hostname: urlParsingNode.hostname,\n          port: urlParsingNode.port,\n          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n            urlParsingNode.pathname :\n            '/' + urlParsingNode.pathname\n        };\n      }\n\n      originURL = resolveURL(window.location.href);\n\n      /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n      return function isURLSameOrigin(requestURL) {\n        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n        return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n      };\n    })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return function isURLSameOrigin() {\n        return true;\n      };\n    })()\n);\n","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n","'use strict';\n\nvar pkg = require('./../../package.json');\n\nvar validators = {};\n\n// eslint-disable-next-line func-names\n['object', 'boolean', 'number', 'function', 'string', 'symbol'].forEach(function(type, i) {\n  validators[type] = function validator(thing) {\n    return typeof thing === type || 'a' + (i < 1 ? 'n ' : ' ') + type;\n  };\n});\n\nvar deprecatedWarnings = {};\nvar currentVerArr = pkg.version.split('.');\n\n/**\n * Compare package versions\n * @param {string} version\n * @param {string?} thanVersion\n * @returns {boolean}\n */\nfunction isOlderVersion(version, thanVersion) {\n  var pkgVersionArr = thanVersion ? thanVersion.split('.') : currentVerArr;\n  var destVer = version.split('.');\n  for (var i = 0; i < 3; i++) {\n    if (pkgVersionArr[i] > destVer[i]) {\n      return true;\n    } else if (pkgVersionArr[i] < destVer[i]) {\n      return false;\n    }\n  }\n  return false;\n}\n\n/**\n * Transitional option validator\n * @param {function|boolean?} validator\n * @param {string?} version\n * @param {string} message\n * @returns {function}\n */\nvalidators.transitional = function transitional(validator, version, message) {\n  var isDeprecated = version && isOlderVersion(version);\n\n  function formatMessage(opt, desc) {\n    return '[Axios v' + pkg.version + '] Transitional option \\'' + opt + '\\'' + desc + (message ? '. ' + message : '');\n  }\n\n  // eslint-disable-next-line func-names\n  return function(value, opt, opts) {\n    if (validator === false) {\n      throw new Error(formatMessage(opt, ' has been removed in ' + version));\n    }\n\n    if (isDeprecated && !deprecatedWarnings[opt]) {\n      deprecatedWarnings[opt] = true;\n      // eslint-disable-next-line no-console\n      console.warn(\n        formatMessage(\n          opt,\n          ' has been deprecated since v' + version + ' and will be removed in the near future'\n        )\n      );\n    }\n\n    return validator ? validator(value, opt, opts) : true;\n  };\n};\n\n/**\n * Assert object's properties type\n * @param {object} options\n * @param {object} schema\n * @param {boolean?} allowUnknown\n */\n\nfunction assertOptions(options, schema, allowUnknown) {\n  if (typeof options !== 'object') {\n    throw new TypeError('options must be an object');\n  }\n  var keys = Object.keys(options);\n  var i = keys.length;\n  while (i-- > 0) {\n    var opt = keys[i];\n    var validator = schema[opt];\n    if (validator) {\n      var value = options[opt];\n      var result = value === undefined || validator(value, opt, options);\n      if (result !== true) {\n        throw new TypeError('option ' + opt + ' must be ' + result);\n      }\n      continue;\n    }\n    if (allowUnknown !== true) {\n      throw Error('Unknown option ' + opt);\n    }\n  }\n}\n\nmodule.exports = {\n  isOlderVersion: isOlderVersion,\n  assertOptions: assertOptions,\n  validators: validators\n};\n","'use strict';\n\nvar bind = require('./helpers/bind');\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a plain Object\n *\n * @param {Object} val The value to test\n * @return {boolean} True if value is a plain Object, otherwise false\n */\nfunction isPlainObject(val) {\n  if (toString.call(val) !== '[object Object]') {\n    return false;\n  }\n\n  var prototype = Object.getPrototypeOf(val);\n  return prototype === null || prototype === Object.prototype;\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' ||\n                                           navigator.product === 'NativeScript' ||\n                                           navigator.product === 'NS')) {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (isPlainObject(result[key]) && isPlainObject(val)) {\n      result[key] = merge(result[key], val);\n    } else if (isPlainObject(val)) {\n      result[key] = merge({}, val);\n    } else if (isArray(val)) {\n      result[key] = val.slice();\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\n/**\n * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n *\n * @param {string} content with BOM\n * @return {string} content value without BOM\n */\nfunction stripBOM(content) {\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isPlainObject: isPlainObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  extend: extend,\n  trim: trim,\n  stripBOM: stripBOM\n};\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.bowser=t():e.bowser=t()}(this,(function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=90)}({17:function(e,t,r){\"use strict\";t.__esModule=!0,t.default=void 0;var i=r(18),n=function(){function e(){}return e.getFirstMatch=function(e,t){var r=t.match(e);return r&&r.length>0&&r[1]||\"\"},e.getSecondMatch=function(e,t){var r=t.match(e);return r&&r.length>1&&r[2]||\"\"},e.matchAndReturnConst=function(e,t,r){if(e.test(t))return r},e.getWindowsVersionName=function(e){switch(e){case\"NT\":return\"NT\";case\"XP\":return\"XP\";case\"NT 5.0\":return\"2000\";case\"NT 5.1\":return\"XP\";case\"NT 5.2\":return\"2003\";case\"NT 6.0\":return\"Vista\";case\"NT 6.1\":return\"7\";case\"NT 6.2\":return\"8\";case\"NT 6.3\":return\"8.1\";case\"NT 10.0\":return\"10\";default:return}},e.getMacOSVersionName=function(e){var t=e.split(\".\").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return\"Leopard\";case 6:return\"Snow Leopard\";case 7:return\"Lion\";case 8:return\"Mountain Lion\";case 9:return\"Mavericks\";case 10:return\"Yosemite\";case 11:return\"El Capitan\";case 12:return\"Sierra\";case 13:return\"High Sierra\";case 14:return\"Mojave\";case 15:return\"Catalina\";default:return}},e.getAndroidVersionName=function(e){var t=e.split(\".\").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?\"Cupcake\":1===t[0]&&t[1]>=6?\"Donut\":2===t[0]&&t[1]<2?\"Eclair\":2===t[0]&&2===t[1]?\"Froyo\":2===t[0]&&t[1]>2?\"Gingerbread\":3===t[0]?\"Honeycomb\":4===t[0]&&t[1]<1?\"Ice Cream Sandwich\":4===t[0]&&t[1]<4?\"Jelly Bean\":4===t[0]&&t[1]>=4?\"KitKat\":5===t[0]?\"Lollipop\":6===t[0]?\"Marshmallow\":7===t[0]?\"Nougat\":8===t[0]?\"Oreo\":9===t[0]?\"Pie\":void 0},e.getVersionPrecision=function(e){return e.split(\".\").length},e.compareVersions=function(t,r,i){void 0===i&&(i=!1);var n=e.getVersionPrecision(t),s=e.getVersionPrecision(r),o=Math.max(n,s),a=0,u=e.map([t,r],(function(t){var r=o-e.getVersionPrecision(t),i=t+new Array(r+1).join(\".0\");return e.map(i.split(\".\"),(function(e){return new Array(20-e.length).join(\"0\")+e})).reverse()}));for(i&&(a=o-Math.min(n,s)),o-=1;o>=a;){if(u[0][o]>u[1][o])return 1;if(u[0][o]===u[1][o]){if(o===a)return 0;o-=1}else if(u[0][o]<u[1][o])return-1}},e.map=function(e,t){var r,i=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)i.push(t(e[r]));return i},e.getBrowserAlias=function(e){return i.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return i.BROWSER_MAP[e]||\"\"},e}();t.default=n,e.exports=t.default},18:function(e,t,r){\"use strict\";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0;t.BROWSER_ALIASES_MAP={\"Amazon Silk\":\"amazon_silk\",\"Android Browser\":\"android\",Bada:\"bada\",BlackBerry:\"blackberry\",Chrome:\"chrome\",Chromium:\"chromium\",Epiphany:\"epiphany\",Firefox:\"firefox\",Focus:\"focus\",Generic:\"generic\",\"Google Search\":\"google_search\",Googlebot:\"googlebot\",\"Internet Explorer\":\"ie\",\"K-Meleon\":\"k_meleon\",Maxthon:\"maxthon\",\"Microsoft Edge\":\"edge\",\"MZ Browser\":\"mz\",\"NAVER Whale Browser\":\"naver\",Opera:\"opera\",\"Opera Coast\":\"opera_coast\",PhantomJS:\"phantomjs\",Puffin:\"puffin\",QupZilla:\"qupzilla\",QQ:\"qq\",QQLite:\"qqlite\",Safari:\"safari\",Sailfish:\"sailfish\",\"Samsung Internet for Android\":\"samsung_internet\",SeaMonkey:\"seamonkey\",Sleipnir:\"sleipnir\",Swing:\"swing\",Tizen:\"tizen\",\"UC Browser\":\"uc\",Vivaldi:\"vivaldi\",\"WebOS Browser\":\"webos\",WeChat:\"wechat\",\"Yandex Browser\":\"yandex\",Roku:\"roku\"};t.BROWSER_MAP={amazon_silk:\"Amazon Silk\",android:\"Android Browser\",bada:\"Bada\",blackberry:\"BlackBerry\",chrome:\"Chrome\",chromium:\"Chromium\",epiphany:\"Epiphany\",firefox:\"Firefox\",focus:\"Focus\",generic:\"Generic\",googlebot:\"Googlebot\",google_search:\"Google Search\",ie:\"Internet Explorer\",k_meleon:\"K-Meleon\",maxthon:\"Maxthon\",edge:\"Microsoft Edge\",mz:\"MZ Browser\",naver:\"NAVER Whale Browser\",opera:\"Opera\",opera_coast:\"Opera Coast\",phantomjs:\"PhantomJS\",puffin:\"Puffin\",qupzilla:\"QupZilla\",qq:\"QQ Browser\",qqlite:\"QQ Browser Lite\",safari:\"Safari\",sailfish:\"Sailfish\",samsung_internet:\"Samsung Internet for Android\",seamonkey:\"SeaMonkey\",sleipnir:\"Sleipnir\",swing:\"Swing\",tizen:\"Tizen\",uc:\"UC Browser\",vivaldi:\"Vivaldi\",webos:\"WebOS Browser\",wechat:\"WeChat\",yandex:\"Yandex Browser\"};t.PLATFORMS_MAP={tablet:\"tablet\",mobile:\"mobile\",desktop:\"desktop\",tv:\"tv\"};t.OS_MAP={WindowsPhone:\"Windows Phone\",Windows:\"Windows\",MacOS:\"macOS\",iOS:\"iOS\",Android:\"Android\",WebOS:\"WebOS\",BlackBerry:\"BlackBerry\",Bada:\"Bada\",Tizen:\"Tizen\",Linux:\"Linux\",ChromeOS:\"Chrome OS\",PlayStation4:\"PlayStation 4\",Roku:\"Roku\"};t.ENGINE_MAP={EdgeHTML:\"EdgeHTML\",Blink:\"Blink\",Trident:\"Trident\",Presto:\"Presto\",Gecko:\"Gecko\",WebKit:\"WebKit\"}},90:function(e,t,r){\"use strict\";t.__esModule=!0,t.default=void 0;var i,n=(i=r(91))&&i.__esModule?i:{default:i},s=r(18);function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(){function e(){}var t,r,i;return e.getParser=function(e,t){if(void 0===t&&(t=!1),\"string\"!=typeof e)throw new Error(\"UserAgent should be a string\");return new n.default(e,t)},e.parse=function(e){return new n.default(e).getResult()},t=e,i=[{key:\"BROWSER_MAP\",get:function(){return s.BROWSER_MAP}},{key:\"ENGINE_MAP\",get:function(){return s.ENGINE_MAP}},{key:\"OS_MAP\",get:function(){return s.OS_MAP}},{key:\"PLATFORMS_MAP\",get:function(){return s.PLATFORMS_MAP}}],(r=null)&&o(t.prototype,r),i&&o(t,i),e}();t.default=a,e.exports=t.default},91:function(e,t,r){\"use strict\";t.__esModule=!0,t.default=void 0;var i=u(r(92)),n=u(r(93)),s=u(r(94)),o=u(r(95)),a=u(r(17));function u(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||\"\"===e)throw new Error(\"UserAgent parameter can't be empty\");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=i.default.find((function(t){if(\"function\"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error(\"Browser's test function is not valid\")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||\"\":this.getBrowser().name||\"\"},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=n.default.find((function(t){if(\"function\"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error(\"Browser's test function is not valid\")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||\"\":t||\"\"},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||\"\":t||\"\"},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=s.default.find((function(t){if(\"function\"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error(\"Browser's test function is not valid\")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||\"\":this.getEngine().name||\"\"},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=o.default.find((function(t){if(\"function\"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error(\"Browser's test function is not valid\")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return Object.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,r={},i=0,n={},s=0;if(Object.keys(e).forEach((function(t){var o=e[t];\"string\"==typeof o?(n[t]=o,s+=1):\"object\"==typeof o&&(r[t]=o,i+=1)})),i>0){var o=Object.keys(r),a=o.find((function(e){return t.isOS(e)}));if(a){var u=this.satisfies(r[a]);if(void 0!==u)return u}var d=o.find((function(e){return t.isPlatform(e)}));if(d){var c=this.satisfies(r[d]);if(void 0!==c)return c}}if(s>0){var f=Object.keys(n).find((function(e){return t.isBrowser(e,!0)}));if(void 0!==f)return this.compareVersion(n[f])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var r=this.getBrowserName().toLowerCase(),i=e.toLowerCase(),n=a.default.getBrowserTypeByAlias(i);return t&&n&&(i=n.toLowerCase()),i===r},t.compareVersion=function(e){var t=[0],r=e,i=!1,n=this.getBrowserVersion();if(\"string\"==typeof n)return\">\"===e[0]||\"<\"===e[0]?(r=e.substr(1),\"=\"===e[1]?(i=!0,r=e.substr(2)):t=[],\">\"===e[0]?t.push(1):t.push(-1)):\"=\"===e[0]?r=e.substr(1):\"~\"===e[0]&&(i=!0,r=e.substr(1)),t.indexOf(a.default.compareVersions(n,r,i))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e){return this.isBrowser(e)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=d,e.exports=t.default},92:function(e,t,r){\"use strict\";t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i};var s=/version\\/(\\d+(\\.?_?\\d+)+)/i,o=[{test:[/googlebot/i],describe:function(e){var t={name:\"Googlebot\"},r=n.default.getFirstMatch(/googlebot\\/(\\d+(\\.\\d+))/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/opera/i],describe:function(e){var t={name:\"Opera\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:opera)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\\/|opios/i],describe:function(e){var t={name:\"Opera\"},r=n.default.getFirstMatch(/(?:opr|opios)[\\s/](\\S+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:\"Samsung Internet for Android\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:SamsungBrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe:function(e){var t={name:\"NAVER Whale Browser\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:whale)[\\s/](\\d+(?:\\.\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:\"MZ Browser\"},r=n.default.getFirstMatch(/(?:MZBrowser)[\\s/](\\d+(?:\\.\\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/focus/i],describe:function(e){var t={name:\"Focus\"},r=n.default.getFirstMatch(/(?:focus)[\\s/](\\d+(?:\\.\\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/swing/i],describe:function(e){var t={name:\"Swing\"},r=n.default.getFirstMatch(/(?:swing)[\\s/](\\d+(?:\\.\\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/coast/i],describe:function(e){var t={name:\"Opera Coast\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:coast)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe:function(e){var t={name:\"Yandex Browser\"},r=n.default.getFirstMatch(/(?:yabrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:\"UC Browser\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:ucbrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:\"Maxthon\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:Maxthon|mxios)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe:function(e){var t={name:\"Epiphany\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:epiphany)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe:function(e){var t={name:\"Puffin\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:puffin)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe:function(e){var t={name:\"Sleipnir\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:sleipnir)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe:function(e){var t={name:\"K-Meleon\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:k-meleon)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe:function(e){var t={name:\"WeChat\"},r=n.default.getFirstMatch(/(?:micromessenger)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?\"QQ Browser Lite\":\"QQ Browser\"},r=n.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\\d+(\\.?_?\\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe:function(e){var t={name:\"Internet Explorer\"},r=n.default.getFirstMatch(/(?:msie |rv:)(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\\sedg\\//i],describe:function(e){var t={name:\"Microsoft Edge\"},r=n.default.getFirstMatch(/\\sedg\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:\"Microsoft Edge\"},r=n.default.getSecondMatch(/edg([ea]|ios)\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe:function(e){var t={name:\"Vivaldi\"},r=n.default.getFirstMatch(/vivaldi\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe:function(e){var t={name:\"SeaMonkey\"},r=n.default.getFirstMatch(/seamonkey\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe:function(e){var t={name:\"Sailfish\"},r=n.default.getFirstMatch(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe:function(e){var t={name:\"Amazon Silk\"},r=n.default.getFirstMatch(/silk\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe:function(e){var t={name:\"PhantomJS\"},r=n.default.getFirstMatch(/phantomjs\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe:function(e){var t={name:\"SlimerJS\"},r=n.default.getFirstMatch(/slimerjs\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\\bbb\\d+/i,/rim\\stablet/i],describe:function(e){var t={name:\"BlackBerry\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/blackberry[\\d]+\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:\"WebOS Browser\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe:function(e){var t={name:\"Bada\"},r=n.default.getFirstMatch(/dolfin\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe:function(e){var t={name:\"Tizen\"},r=n.default.getFirstMatch(/(?:tizen\\s?)?browser\\/(\\d+(\\.?_?\\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe:function(e){var t={name:\"QupZilla\"},r=n.default.getFirstMatch(/(?:qupzilla)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:\"Firefox\"},r=n.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe:function(e){var t={name:\"Chromium\"},r=n.default.getFirstMatch(/(?:chromium)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:\"Chrome\"},r=n.default.getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe:function(e){var t={name:\"Google Search\"},r=n.default.getFirstMatch(/(?:GSA)\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t={name:\"Android Browser\"},r=n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe:function(e){var t={name:\"PlayStation 4\"},r=n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:\"Safari\"},r=n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search(\"\\\\(\")?/^(.*)\\/(.*)[ \\t]\\((.*)/:/^(.*)\\/(.*) /;return{name:n.default.getFirstMatch(t,e),version:n.default.getSecondMatch(t,e)}}}];t.default=o,e.exports=t.default},93:function(e,t,r){\"use strict\";t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i},s=r(18);var o=[{test:[/Roku\\/DVP/],describe:function(e){var t=n.default.getFirstMatch(/Roku\\/DVP-(\\d+\\.\\d+)/i,e);return{name:s.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=n.default.getFirstMatch(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i,e);return{name:s.OS_MAP.WindowsPhone,version:t}}},{test:[/windows/i],describe:function(e){var t=n.default.getFirstMatch(/Windows ((NT|XP)( \\d\\d?.\\d)?)/i,e),r=n.default.getWindowsVersionName(t);return{name:s.OS_MAP.Windows,version:t,versionName:r}}},{test:[/macintosh/i],describe:function(e){var t=n.default.getFirstMatch(/mac os x (\\d+(\\.?_?\\d+)+)/i,e).replace(/[_\\s]/g,\".\"),r=n.default.getMacOSVersionName(t),i={name:s.OS_MAP.MacOS,version:t};return r&&(i.versionName=r),i}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=n.default.getFirstMatch(/os (\\d+([_\\s]\\d+)*) like mac os x/i,e).replace(/[_\\s]/g,\".\");return{name:s.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t=n.default.getFirstMatch(/android[\\s/-](\\d+(\\.\\d+)*)/i,e),r=n.default.getAndroidVersionName(t),i={name:s.OS_MAP.Android,version:t};return r&&(i.versionName=r),i}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=n.default.getFirstMatch(/(?:web|hpw)[o0]s\\/(\\d+(\\.\\d+)*)/i,e),r={name:s.OS_MAP.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\\bbb\\d+/i,/rim\\stablet/i],describe:function(e){var t=n.default.getFirstMatch(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i,e)||n.default.getFirstMatch(/blackberry\\d+\\/(\\d+([_\\s]\\d+)*)/i,e)||n.default.getFirstMatch(/\\bbb(\\d+)/i,e);return{name:s.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=n.default.getFirstMatch(/bada\\/(\\d+(\\.\\d+)*)/i,e);return{name:s.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=n.default.getFirstMatch(/tizen[/\\s](\\d+(\\.\\d+)*)/i,e);return{name:s.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=n.default.getFirstMatch(/PlayStation 4[/\\s](\\d+(\\.\\d+)*)/i,e);return{name:s.OS_MAP.PlayStation4,version:t}}}];t.default=o,e.exports=t.default},94:function(e,t,r){\"use strict\";t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i},s=r(18);var o=[{test:[/googlebot/i],describe:function(){return{type:\"bot\",vendor:\"Google\"}}},{test:[/huawei/i],describe:function(e){var t=n.default.getFirstMatch(/(can-l01)/i,e)&&\"Nova\",r={type:s.PLATFORMS_MAP.mobile,vendor:\"Huawei\"};return t&&(r.model=t),r}},{test:[/nexus\\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:\"Nexus\"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:\"Apple\",model:\"iPad\"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:\"Amazon\",model:\"Kindle Fire HD 7\"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:\"Amazon\"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe:function(e){var t=n.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:s.PLATFORMS_MAP.mobile,vendor:\"Apple\",model:t}}},{test:[/nexus\\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:\"Nexus\"}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return\"blackberry\"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:\"BlackBerry\"}}},{test:function(e){return\"bada\"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return\"windows phone\"===e.getBrowserName()},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:\"Microsoft\"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(\".\")[0]);return\"android\"===e.getOSName(!0)&&t>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){return\"android\"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return\"macos\"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:\"Apple\"}}},{test:function(e){return\"windows\"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return\"linux\"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return\"playstation 4\"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(e){return\"roku\"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];t.default=o,e.exports=t.default},95:function(e,t,r){\"use strict\";t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i},s=r(18);var o=[{test:function(e){return\"microsoft edge\"===e.getBrowserName(!0)},describe:function(e){if(/\\sedg\\//i.test(e))return{name:s.ENGINE_MAP.Blink};var t=n.default.getFirstMatch(/edge\\/(\\d+(\\.?_?\\d+)+)/i,e);return{name:s.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:s.ENGINE_MAP.Trident},r=n.default.getFirstMatch(/trident\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:s.ENGINE_MAP.Presto},r=n.default.getFirstMatch(/presto\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe:function(e){var t={name:s.ENGINE_MAP.Gecko},r=n.default.getFirstMatch(/gecko\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\\/537\\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:s.ENGINE_MAP.WebKit},r=n.default.getFirstMatch(/webkit\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}}];t.default=o,e.exports=t.default}})}));","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nvar K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    var arr = new Uint8Array(1)\n    var proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  var buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  var valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  var b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(\n      value[Symbol.toPrimitive]('string'), encodingOrOffset, length\n    )\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  var length = byteLength(string, encoding) | 0\n  var buf = createBuffer(length)\n\n  var actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  var buf = createBuffer(length)\n  for (var i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    var copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  var buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    var buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        Buffer.from(buf).copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  var len = string.length\n  var mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  var strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (var i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    var len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nvar hexSliceLookupTable = (function () {\n  var alphabet = '0123456789abcdef'\n  var table = new Array(256)\n  for (var i = 0; i < 16; ++i) {\n    var i16 = i * 16\n    for (var j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n","/**\n * Module that allows client-side code to use browser globals (such as `document` or `Node`) in a\n * way that allows those globals to be replaced by mocks in browser-less tests.\n *\n *    import {G} from 'browserGlobals';\n *    ... use G.document\n *    ... use G.Node\n *\n * Initially, the global `window` object, is the source of the global values.\n *\n * To use a mock of globals in a test, use:\n *\n *    import {pushGlobals, popGlobals} as G from 'browserGlobals';\n *    before(function() {\n *      pushGlobals(mockWindow);    // e.g. jsdom.jsdom(...).defaultView\n *    });\n *    after(function() {\n *      popGlobals();\n *    });\n */\n\nexport interface IBrowserGlobals {\n  DocumentFragment: typeof DocumentFragment;\n  Element: typeof Element;\n  Node: typeof Node;\n  document: typeof document;\n  window: typeof window;\n}\n\nexport interface IBrowserGlobalsLax extends IBrowserGlobals {window: any};\n\nfunction _updateGlobals(dest: IBrowserGlobals, source: IBrowserGlobals): void {\n  dest.DocumentFragment  = source.DocumentFragment;\n  dest.Element           = source.Element;\n  dest.Node              = source.Node;\n  dest.document          = source.document;\n  dest.window            = source.window;\n}\n\n// The initial IBrowserGlobals object.\nconst initial: IBrowserGlobals = {} as IBrowserGlobals;\n_updateGlobals(initial, (typeof window !== 'undefined' ? window as any : {}));\n\n// The globals G object strats out with a copy of `initial`.\nexport const G: IBrowserGlobals = { ...initial };\n\n// The stack of globals that always has the intial object, but which may be overridden.\nconst _globalsStack: IBrowserGlobals[] = [initial];\n\n/**\n * Replace globals with those from the given object. Use popGlobals() to restore previous values.\n */\nexport function pushGlobals(globals: IBrowserGlobalsLax): void {\n  _globalsStack.push(globals);\n  _updateGlobals(G, globals);\n}\n\n/**\n * Restore the values of globals to undo the preceding pushGlobals() call.\n */\nexport function popGlobals(): void {\n  if (_globalsStack.length > 1) {\n    _globalsStack.pop();\n  }\n  _updateGlobals(G, _globalsStack[_globalsStack.length - 1]);\n}\n","/**\n * dispose.js provides tools to objects that needs to dispose resources, such as destroy DOM, and\n * unsubscribe from events. The motivation with examples is presented here:\n *\n *    https://phab.getgrist.com/w/disposal/\n *\n * Disposable is a class for components that need cleanup (e.g. maintain DOM, listen to events,\n * subscribe to anything). It provides a .dispose() method that should be called to destroy the\n * component, and .onDispose()/.autoDispose() methods that the component should use to take\n * responsibility for other pieces that require cleanup.\n *\n * To define a disposable class:\n *    class Foo extends Disposable { ... }\n *\n * To create Foo:\n *    const foo = Foo.create(owner, ...args);\n * This is better than `new Foo` for two reasons:\n *    1. If Foo's constructor throws an exception, any disposals registered in that constructor\n *       before the exception are honored.\n *    2. It ensures you specify the owner of the new instance (but you can use null to skip it).\n *\n * In Foo's constructor (or rarely methods), take ownership of other Disposable objects:\n *    this.bar = Bar.create(this, ...);\n *\n * For objects that are not instances of Disposable but have a .dispose() methods, use:\n *    this.bar = this.autoDispose(createSomethingDisposable());\n *\n * To call a function on disposal (e.g. to add custom disposal logic):\n *    this.onDispose(() => this.myUnsubscribeAllMethod());\n *    this.onDispose(this.myUnsubscribeAllMethod, this);    // slightly more efficient\n *\n * To mark this object to be wiped out on disposal (i.e. set all properties to null):\n *    this.wipeOnDispose();\n * See the documentation of that method for more info.\n *\n * To dispose Foo directly:\n *    foo.dispose();\n * To determine if an object has already been disposed:\n *    foo.isDisposed()\n *\n * If you need to replace an owned object, or release, or dispose it early, use a Holder:\n *    this._holder = Holder.create(this);\n *    Bar.create(this._holder, 1);      // creates new Bar(1)\n *    Bar.create(this._holder, 2);      // creates new Bar(2) and disposes previous object\n *    this._holder.clear();             // disposes contained object\n *    this._holder.release();           // releases contained object\n *\n * If you need a container for multiple objects and dispose them all together, use a MultiHolder:\n *    this._mholder = MultiHolder.create(null);\n *    Bar.create(this._mholder, 1);     // create new Bar(1)\n *    Bar.create(this._mholder, 2);     // create new Bar(2)\n *    this._mholder.dispose();          // disposes both objects\n *\n * If creating your own class with a dispose() method, do NOT throw exceptions from dispose().\n * These cannot be handled properly in all cases. Read here about the same issue in C++:\n *    http://bin-login.name/ftp/pub/docs/programming_languages/cpp/cffective_cpp/MAGAZINE/SU_FRAME.HTM#destruct\n *\n * Using a parametrized (generic) class as a Disposable is tricky. E.g.\n *    class Bar<T> extends Disposable { ... }\n *    // Bar<T>.create(...)   <-- doesn't work\n *    // Bar.create<T>(...)   <-- doesn't work\n *    // Bar.create(...)      <-- works, but with {} for Bar's type parameters\n *\n * The solution is to expose the constructor type using a helper method:\n *    class Bar<T> extends Disposable {\n *      // Note the tuple below which must match the constructor parameters of Bar<U>.\n *      public static ctor<U>(): IDisposableCtor<Bar<U>, [U, boolean]> { return this; }\n *      constructor(a: T, b: boolean) { ... }\n *    }\n *    Bar.ctor<T>().create(...)   // <-- works, creates Bar<T>, and does type-checking!\n */\n\nimport {LLink} from './emit';\n\n/**\n * Anything with a .dispose() method is a disposable object, and implements the IDisposable interface.\n */\nexport interface IDisposable {\n  dispose(): void;\n}\n\n/**\n * Anything with .autoDispose() can be the owner of a disposable object. This is a type-specific\n * class that can only own a disposable object of type T.\n */\nexport interface IDisposableOwnerT<T extends IDisposable> {\n  autoDispose(obj: T): void;\n}\n\n/**\n * Type that can own an object of any disposable type.\n */\nexport interface IDisposableOwner {\n  autoDispose(obj: IDisposable): void;\n}\n\n// Internal \"owner\" of disposable objects which doesn't actually dispose or keep track of them. It\n// is the effective owner when creating a Disposable with `new Foo()` rather than `Foo.create()`.\nconst _noopOwner: IDisposableOwner = {\n  autoDispose(obj: IDisposable): void { /* noop */ },\n};\n\n// Newly-created Disposable instances will have this as their owner. This is not a constant, it\n// is used by create() for the safe creation of Disposables.\nlet _defaultDisposableOwner = _noopOwner;\n\n/**\n * The static portion of class Disposable.\n */\nexport interface IDisposableCtor<Derived, CtorArgs extends any[]> {\n  new(...args: CtorArgs): Derived;\n  create<T extends new(...args: any[]) => any>(\n    this: T, owner: IDisposableOwnerT<InstanceType<T>>|null, ...args: ConstructorParameters<T>): InstanceType<T>;\n}\n\n/**\n * Base class for disposable objects that can own other objects. See the module documentation.\n */\nexport abstract class Disposable implements IDisposable, IDisposableOwner {\n  /**\n   * Create Disposable instances using `Class.create(owner, ...)` rather than `new Class(...)`.\n   *\n   * This reminds you to provide an owner, and ensures that if the constructor throws an\n   * exception, dispose() gets called to clean up the partially-constructed object.\n   *\n   * Owner may be null if intend to ensure disposal some other way.\n   */\n  public static create<T extends new (...args: any[]) => any>(\n    this: T, owner: IDisposableOwnerT<InstanceType<T>>|null, ...args: ConstructorParameters<T>): InstanceType<T> {\n\n    const origDefaultOwner = _defaultDisposableOwner;\n    const holder = new Holder();\n    try {\n      // The newly-created object will have holder as its owner.\n      _defaultDisposableOwner = holder;\n      return setDisposeOwner(owner, new this(...args));\n    } catch (e) {\n      try {\n        // This calls dispose on the partially-constructed object\n        holder.clear();\n      } catch (e2) {\n        // tslint:disable-next-line:no-console\n        console.error(\"Error disposing partially constructed %s:\", this.name, e2);\n      }\n      throw e;\n    } finally {\n      // On success, the new object has a new owner, and we release it from holder.\n      // On error, the holder has been cleared, and the release() is a no-op.\n      holder.release();\n      _defaultDisposableOwner = origDefaultOwner;\n    }\n  }\n\n  private _disposalList: DisposalList = new DisposalList();\n\n  constructor() {\n    // This registers with a temp Holder when using create(), and is a no-op when using `new Foo`.\n    _defaultDisposableOwner.autoDispose(this);\n    // Be sure to reset to no-op, so that a (non-recommended) direct call like 'new Bar()', from\n    // inside Foo's constructor doesn't use the same Holder that's temporarily holding Foo.\n    _defaultDisposableOwner = _noopOwner;\n  }\n\n  /** Take ownership of obj, and dispose it when this.dispose() is called. */\n  public autoDispose<T extends IDisposable>(obj: T): T {\n    this.onDispose(obj.dispose, obj);\n    return obj;\n  }\n\n  /** Call the given callback when this.dispose() is called. */\n  public onDispose<T>(callback: (this: T) => void, context?: T): DisposeListener {\n    return this._disposalList.addListener(callback, context);\n  }\n\n  /**\n   * Wipe out this object when it is disposed, i.e. set all its properties to null. It is\n   * recommended to call this early in the constructor.\n   *\n   * This makes disposal more costly, but has certain benefits:\n   * - If anything still refers to the object and uses it, we'll get an early error, rather than\n   *   silently keep going, potentially doing useless work (or worse) and wasting resources.\n   * - If anything still refers to the object (even without using it), the fields of the object\n   *   can still be garbage-collected.\n   * - If there are circular references involving this object, they get broken, making the job\n   *   easier for the garbage collector.\n   *\n   * The recommendation is to use it for complex, longer-lived objects, but to skip for objects\n   * which are numerous and short-lived (and less likely to be referenced from unexpected places).\n   */\n  public wipeOnDispose(): void {\n    this.onDispose(this._wipeOutObject, this);\n  }\n\n  /**\n   * Returns whether this object has already been disposed.\n   */\n  public isDisposed(): boolean {\n    return this._disposalList === null;\n  }\n\n  /**\n   * Clean up `this` by disposing all owned objects, and calling onDispose() callbacks, in reverse\n   * order to that in which they were added.\n   */\n  public dispose(): void {\n    const disposalList = this._disposalList;\n    if (!disposalList) {\n        // tslint:disable-next-line:no-console\n      console.error(\"Error disposing %s which is already disposed\", _describe(this));\n    } else {\n      this._disposalList = null!;\n      disposalList.callAndDispose(this);\n    }\n  }\n\n  /**\n   * Wipe out this object by setting each property to null. This is helpful for objects that are\n   * disposed and should be ready to be garbage-collected.\n   */\n  private _wipeOutObject(): void {\n    // The sentinel value doesn't have to be null, but some values cause more helpful errors than\n    // others. E.g. if a.x = \"disposed\", then a.x.foo() throws \"undefined is not a function\", but\n    // when a.x = null, a.x.foo() throws a more helpful \"Cannot read property 'foo' of null\".\n    for (const k of Object.keys(this)) {\n      (this as any)[k] = null;\n    }\n  }\n}\n\n/**\n * Holder keeps a single disposable object. If given responsibility for another object using\n * holder.autoDispose() or Foo.create(holder, ...), it automatically disposes the currently held\n * object. It also disposes it when the holder itself is disposed.\n *\n * If the object is an instance of Disposable, the holder will also notice when the object gets\n * disposed from outside of it, in which case the holder will become empty again.\n */\nexport class Holder<T extends IDisposable> implements IDisposable, IDisposableOwner {\n  public static create<T extends IDisposable>(owner: IDisposableOwnerT<Holder<T>>|null): Holder<T> {\n    return setDisposeOwner(owner, new Holder<T>());\n  }\n\n  protected _owned: T|null = null;\n  private _disposalListener: DisposeListener|undefined = undefined;\n\n  /** Take ownership of a new object, disposing the previously held one. */\n  public autoDispose(obj: T): T {\n    this.clear();\n    this._owned = obj;\n    if (obj instanceof Disposable) {\n      this._disposalListener = obj.onDispose(this._onOutsideDispose, this);\n    }\n    return obj;\n  }\n\n  /** Releases the held object without disposing it, emptying the holder. */\n  public release(): IDisposable|null {\n    this._unlisten();\n    const ret = this._owned;\n    this._owned = null;\n    return ret;\n  }\n\n  /** Disposes the held object and empties the holder. */\n  public clear(): void {\n    this._unlisten();\n    const owned = this._owned;\n    if (owned) {\n      this._owned = null;\n      owned.dispose();\n    }\n  }\n\n  /** Returns the held object, or null if the Holder is empty. */\n  public get(): T|null { return this._owned; }\n\n  /** Returns whether the Holder is empty. */\n  public isEmpty(): boolean { return !this._owned; }\n\n  /** When the holder is disposed, it disposes the held object if any. */\n  public dispose(): void { this.clear(); }\n\n  /** Stop listening for the disposal of this._owned. */\n  private _unlisten() {\n    const disposalListener = this._disposalListener;\n    if (disposalListener) {\n      this._disposalListener = undefined;\n      disposalListener.dispose();\n    }\n  }\n\n  private _onOutsideDispose() {\n    this._disposalListener = undefined;\n    this._owned = null;\n  }\n}\n\n/**\n * MultiHolder keeps multiple disposable object. It disposes all held object when the holder\n * itself is disposed. It's actually nothing more than the Disposable base class itself, just\n * exposed with a clearer name that describes its purpose.\n */\nexport class MultiHolder extends Disposable {}\n\n/**\n * Sets owner of obj (i.e. calls owner.autoDispose(obj)) unless owner is null. Returns obj.\n */\nexport function setDisposeOwner<T extends IDisposable>(owner: IDisposableOwnerT<T>|null, obj: T): T {\n  if (owner) { owner.autoDispose(obj); }\n  return obj;\n}\n\n/**\n * Helper for reporting errors during disposal. Try to report the type of the object.\n */\nfunction _describe(obj: any) {\n  return (obj && obj.constructor && obj.constructor.name ? obj.constructor.name : '' + obj);\n}\n\n/**\n * DisposalList is an internal class mimicking emit.Emitter. The difference is that callbacks are\n * called in reverse order, and exceptions in callbacks are reported and swallowed.\n */\nclass DisposalList extends LLink {\n  constructor() { super(); }\n\n  public addListener<T>(callback: (this: T) => void, optContext?: T): DisposeListener {\n    const lis = new DisposeListener(callback, optContext);\n    this._insertBefore(this._next!, lis);\n    return lis;\n  }\n\n  /**\n   * Call all callbacks and dispose this object. The owner is required for better reporting of\n   * errors if any callback throws.\n   */\n  public callAndDispose(owner: Disposable): void {\n    try {\n      DisposeListener.callAll(this._next!, this, owner);\n    } finally {\n      this._disposeList();\n    }\n  }\n}\n\n/**\n * Internal class that keeps track of one item of the DisposalList. It mimicks emit.Listener, but\n * reports and swallows erros when it calls the callbacks in the list.\n */\nclass DisposeListener extends LLink implements IDisposable {\n  public static callAll(begin: LLink, end: LLink, owner: Disposable): void {\n    while (begin !== end) {\n      const lis = begin as DisposeListener;\n      try {\n        lis.callback.call(lis.context);\n      } catch (e) {\n        // tslint:disable-next-line:no-console\n        console.error(\"While disposing %s, error disposing %s: %s\", _describe(owner), _describe(this), e);\n      }\n      begin = lis._next!;\n    }\n  }\n\n  constructor(private callback: () => void, private context?: any) { super(); }\n\n  public dispose(): void {\n    if (this.isDisposed()) { return; }\n    this._removeNode(this);\n  }\n}\n","/**\n * This module supports computed observables, organizing them into a priority queue, so that\n * computeds can be updated just once after multiple bundled changes.\n *\n * This module is for internal use only (hence the leading underscore in the name). The only\n * function useful outside is exposed via the `observable` module as `observable.bundleChanges()`.\n *\n * Changes may come together because multiple observables are changed synchronously, or because\n * multiple computeds depend on a single changed observable. In either case, if a computed depends\n * on multiple observables that are being changed, we want it to just get updated once when the\n * changes are complete.\n *\n * This is done by maintaining a _priority in each computed, where greater values get evaluated\n * later (computed with greater values depend on those with smaller values). When a computed needs\n * updating, it adds itself to the queue using enqueue() method. At the end of an observable.set()\n * call, or of bundleChanges() call, the queue gets processed in order of _priority.\n */\n\nimport {PriorityQueue} from './PriorityQueue';\n\n/**\n * DepItem is an item in a dependency relationship. It may depend on other DepItems. It is used\n * for subscriptions and computed observables.\n */\nexport class DepItem {\n  public static isPrioritySmaller(a: DepItem, b: DepItem): boolean {\n    return a._priority < b._priority || (a._priority === b._priority && a._creation < b._creation);\n  }\n\n  private _priority: number = 0;\n  private _enqueued: boolean = false;\n  private _callback: () => void;\n  private _context?: object;\n\n  // Order of creation, used for ordering items at same priority.\n  private _creation: number = ++_nextCreationNum;\n\n  /**\n   * Callback should call depItem.useDep(dep) for each DepInput it depends on.\n   */\n  constructor(callback: () => void, optContext?: object) {\n    this._callback = callback;\n    this._context = optContext;\n  }\n\n  /**\n   * Mark depItem as a dependency of this DepItem. The argument may be null to indicate a leaf (an\n   * item such as a plain observable, which does not itself depend on anything else).\n   */\n  public useDep(depItem: DepItem|null): void {\n    const p = depItem ? depItem._priority : 0;\n    if (p >= this._priority) {\n      this._priority = p + 1;\n    }\n  }\n\n  /**\n   * Recompute this DepItem, calling the callback given in the constructor.\n   */\n  public recompute(): void {\n    this._priority = 0;\n    this._callback.call(this._context);\n  }\n\n  /**\n   * Add this DepItem to the queue, to be recomputed when the time is right.\n   */\n  public enqueue(): void {\n    if (!this._enqueued) {\n      this._enqueued = true;\n      queue.push(this);\n    }\n  }\n}\n\n// The main compute queue.\nconst queue = new PriorityQueue<DepItem>(DepItem.isPrioritySmaller);\n\n// Counter for creation order, used to create a stable ordering of DepItems at same priority.\nlet _nextCreationNum = 0;\n\n// Array to keep track of items recomputed during this call to compute(). It could be a local\n// variable in compute(), but is made global to minimize allocations.\nconst _seen: any[] = [];\n\n// Counter used for bundling multiple calls to compute() into one.\nlet bundleDepth = 0;\n\n/**\n * Exposed for unittests. Returns the internal priority value of an observable.\n */\nexport function _getPriority(obs: any): number {\n  const depItem = obs._getDepItem();\n  return depItem ? depItem._priority : 0;\n}\n\n/**\n * Update any computed observables that need updating. The update is deferred if we are currently\n * in the middle of a bundle. This is called automatically whenever you set an observable, and\n * there should be no need to ever call this by users of the library.\n */\nexport function compute(): void {\n  if (bundleDepth === 0 && queue.size > 0) {\n    // Prevent nested compute() calls, which are unnecessary and can cause deep recursion stack.\n    bundleDepth++;\n    try {\n      // We reuse _seen array to minimize allocations, but always leave it empty.\n      do {\n        const item = queue.pop()!;\n        _seen.push(item);\n        item.recompute();\n      } while (queue.size > 0);\n    } finally {\n      // We delay the unsetting of _enqueued flag to here, to protect against infinite loops when\n      // a change to a computed causes it to get enqueued again.\n      for (const item of _seen) {\n        item._enqueued = false;\n      }\n      _seen.length = 0;\n      bundleDepth--;\n    }\n  }\n}\n\n/**\n * Defer recomputations of all computed observables and subscriptions until func() returns. This\n * is useful to avoid unnecessary recomputation if you are making several changes to observables\n * together. This function is exposed as `observable.bundleChanges()`.\n *\n * Note that this intentionally does not wait for promises to be resolved, since that would block\n * all updates to all computeds while waiting.\n */\nexport function bundleChanges<T>(func: () => T): T {\n  try {\n    bundleDepth++;\n    return func();\n  } finally {\n    bundleDepth--;\n    compute();\n  }\n}\n","/**\n * A simple and fast priority queue with a limited interface to push, pop, peek, and get size. It\n * is essentially equivalent to both npm modules 'fastpriorityqueue' and 'qheap', but is in\n * TypeScript and is a bit cleaner and simpler.\n *\n * It is constructed with a function that returns which of two items is \"prior\"; the pop() method\n * returns the most-prior element.\n */\n\nexport type IsPriorFunc<T> = (a: T, b: T) => boolean;\n\nexport class PriorityQueue<T> {\n  // Items form a binary tree packed into an array. Root is items[0]; children of items[i] are\n  // items[2*i+1] and items[2*i+2]; parent of items[i] is items[(i - 1) >> 1]. For all children,\n  // the invariant isPrior(parent, child) holds.\n  private _items: T[] = [];\n\n  constructor(private _isPrior: IsPriorFunc<T>) {}\n\n  public get size(): number { return this._items.length; }\n\n  public push(item: T): void {\n    const items = this._items;\n    const isPrior = this._isPrior;\n\n    let curIdx = this._items.length;\n    while (curIdx > 0) {\n      // While we have a parent that is not prior to us, bubble up the \"hole\" at items.length.\n      const parIdx = (curIdx - 1) >> 1;   // tslint:disable-line:no-bitwise\n      const parItem = items[parIdx];\n      if (isPrior(parItem, item)) {\n        break;\n      }\n      items[curIdx] = parItem;\n      curIdx = parIdx;\n    }\n    items[curIdx] = item;\n  }\n\n  public peek(): T|undefined {\n    return this._items[0];\n  }\n\n  public pop(): T|undefined {\n    if (this._items.length <= 1) { return this._items.pop(); }\n    const items = this._items;\n    const isPrior = this._isPrior;\n    const result = items[0];\n\n    // Bubble the last item downwards from the root.\n    const item = items.pop()!;\n    const size = this._items.length;\n    let curIdx = 0;\n    let leftIdx = 1;\n    while (leftIdx < size) {\n      const rightIdx = leftIdx + 1;\n      const bestIdx = (rightIdx < size && isPrior(items[rightIdx], items[leftIdx])) ?\n        rightIdx : leftIdx;\n      if (isPrior(item, items[bestIdx])) {\n        break;\n      }\n      items[curIdx] = items[bestIdx];\n      curIdx = bestIdx;\n      leftIdx = curIdx + curIdx + 1;\n    }\n    items[curIdx] = item;\n    return result;\n  }\n}\n","/**\n * observable.js implements an observable value, which lets other code subscribe to changes.\n *\n * E.g.\n *  let o = observable(17);\n *  o.get();          // 17\n *  o.addListener(foo);\n *  o.set(\"asdf\");    // foo(\"asdf\", 17) gets called.\n *  o.get();          // \"asdf\"\n *\n * To subscribe to changes, use obs.addListener(callback, context). The callback will get called\n * with (newValue, oldValue) as arguments.\n *\n * When you use observables within the body of a computed(), you can automatically create\n * subscriptions to them with the use(obs) function. E.g.\n *    let obs3 = computed(use => use(obs1) + use(obs2));\n * creates a computed observable `obs3` which is subscribed to changes to `obs1` and `obs2`.\n *\n * Note that unlike with knockout, use(obs) method requires an explicit `use` function, which is\n * always passed to a computed's read() callback for this purpose. This makes it explicit when a\n * dependency is created, and which observables the dependency connects.\n */\n\nimport {compute, DepItem} from './_computed_queue';\nimport {IDisposable, IDisposableOwnerT, setDisposeOwner} from './dispose';\nimport {Emitter, Listener} from './emit';\n\nexport {bundleChanges} from './_computed_queue';\n\nexport class BaseObservable<T> {\n  private _onChange: Emitter;\n  private _value: T;\n\n  /**\n   * Internal constructor for an Observable. You should use observable() function instead.\n   */\n  constructor(value: T) {\n    this._onChange = new Emitter();\n    this._value = value;\n  }\n\n  /**\n   * Returns the value of the observable. It is fast and does not create a subscription.\n   * (It is similar to knockout's peek()).\n   * @returns {Object} The current value of the observable.\n   */\n  public get(): T { return this._value; }\n\n  /**\n   * Sets the value of the observable. If the value differs from the previously set one, then\n   * listeners to this observable will get called with (newValue, oldValue) as arguments.\n   * @param {Object} value: The new value to set.\n   */\n  public set(value: T): void {\n    if (value !== this._value) {\n      this.setAndTrigger(value);\n    }\n  }\n\n  /**\n   * Sets the value of the observable AND calls listeners even if the value is unchanged.\n   */\n  public setAndTrigger(value: T) {\n    const prev = this._value;\n    this._value = value;\n    this._onChange.emit(value, prev);\n    this._disposeOwned();\n    compute();\n  }\n\n  /**\n   * Adds a callback to listen to changes in the observable.\n   * @param {Function} callback: Function, called on changes with (newValue, oldValue) arguments.\n   * @param {Object} optContext: Context for the function.\n   * @returns {Listener} Listener object. Its dispose() method removes the callback.\n   */\n  public addListener(callback: (val: T, prev: T) => void, optContext?: object): Listener {\n    return this._onChange.addListener(callback, optContext);\n  }\n\n  /**\n   * Returns whether this observable has any listeners.\n   */\n  public hasListeners(): boolean {\n    return this._onChange.hasListeners();\n  }\n\n  /**\n   * Sets a single callback to be called when a listener is added or removed. It overwrites any\n   * previously-set such callback.\n   * @param {Function} changeCB(hasListeners): Function to call after a listener is added or\n   *    removed. It's called with a boolean indicating whether this observable has any listeners.\n   *    Pass in `null` to unset the callback. Note that it can be called multiple times in a row\n   *    with hasListeners `true`.\n   */\n  public setListenerChangeCB(changeCB: (hasListeners: boolean) => void, optContext?: any): void {\n    this._onChange.setChangeCB(changeCB, optContext);\n  }\n\n  /**\n   * Used by subscriptions to keep track of dependencies. An observable that has dependnecies,\n   * such as a computed observable, would override this method.\n   */\n  public _getDepItem(): DepItem|null {\n    return null;\n  }\n\n  /**\n   * Disposes the observable.\n   */\n  public dispose(): void {\n    this._disposeOwned();\n    this._onChange.dispose();\n    (this._value as any) = undefined;\n  }\n\n  /**\n   * Returns whether this observable is disposed.\n   */\n  public isDisposed(): boolean {\n    return this._onChange.isDisposed();\n  }\n\n  protected _disposeOwned(arg?: any) { /* noop */ }\n\n  /**\n   * Allow derived classes to emit change events with an additional third argument describing the\n   * change. It always emits the event without checking for value equality.\n   */\n  protected _setWithArg(value: T, arg: any) {\n    const prev = this._value;\n    this._value = value;\n    this._onChange.emit(value, prev, arg);\n    this._disposeOwned(arg);\n    compute();\n  }\n}\n\nexport class Observable<T> extends BaseObservable<T> implements IDisposableOwnerT<T & IDisposable> {\n  // See module-level holder() function below for documentation.\n  public static holder<T>(value: T & IDisposable): Observable<T> {\n    const obs = new Observable<T>(value);\n    obs._owned = value;\n    return obs;\n  }\n\n  /**\n   * Creates a new Observable with the given initial value, and owned by owner.\n   */\n  public static create<T>(owner: IDisposableOwnerT<Observable<T>>|null, value: T): Observable<T> {\n    return setDisposeOwner(owner, new Observable<T>(value));\n  }\n\n  private _owned?: T & IDisposable = undefined;\n\n  /**\n   * The use an observable for a disposable object, use it a DisposableOwner:\n   *\n   *    D.create(obs, ...args)                      // Preferred\n   *    obs.autoDispose(D.create(null, ...args))    // Equivalent\n   *\n   * Either of these usages will set the observable to the newly created value. The observable\n   * will dispose the owned value when it's set to another value, or when it itself is disposed.\n   */\n  public autoDispose(value: T & IDisposable): T & IDisposable {\n    this.setAndTrigger(value);\n    this._owned = value;\n    return value;\n  }\n\n  protected _disposeOwned() {\n    if (this._owned) {\n      this._owned.dispose();\n      this._owned = undefined;\n    }\n  }\n}\n\n/**\n * Creates a new Observable with the initial value of optValue if given or undefined if omitted.\n * @param {Object} optValue: The initial value to set.\n * @returns {Observable} The newly created observable.\n */\nexport function observable<T>(value: T): Observable<T> {\n  return new Observable<T>(value);\n}\n\n/**\n * Creates a new Observable with an initial disposable value owned by this observable, e.g.\n *\n *    const obs = obsHolder<D>(D.create(null, ...args));\n *\n * This is needed because using simply observable<D>(value) would not cause the observable to take\n * ownership of value (i.e. to dispose it later). This function is a less hacky equivalent to:\n *\n *    const obs = observable<D>(null as any);\n *    D.create(obs, ...args);\n *\n * To allow nulls, use observable<D|null>(null); then the obsHolder() constructor is not needed.\n */\nexport function obsHolder<T>(value: T & IDisposable): Observable<T> {\n  return Observable.holder<T>(value);\n}\n","import {IDisposable} from './dispose';\n\n/**\n * Private global disposal map. It maintains the association between DOM nodes and cleanup\n * functions added with dom.onDispose(). To support multiple disposers on one element, we use a\n * WeakMap-based linked list:\n *\n *    _disposeMap[elem] = disposer2;\n *    _disposeMap[disposer2] = disposer1;\n *    etc.\n *\n * This avoids allocating arrays or using undeclared properties for a different linked list.\n */\nconst _disposeMap: WeakMap<Node|INodeFunc, INodeFunc> = new WeakMap();\n\nexport type INodeFunc = (node: Node) => void;\n\n// Internal helper to walk the DOM tree, calling visitFunc(elem) on all descendants of elem.\n// Descendants are processed first.\nfunction _walkDom(elem: Node, visitFunc: INodeFunc): void {\n  let c: Node|null = elem.firstChild;\n  while (c) {\n    // Note: this might be better done using an explicit stack, but in practice DOM trees aren't\n    // so deep as to cause problems.\n    _walkDom(c, visitFunc);\n    c = c.nextSibling;\n  }\n  visitFunc(elem);\n}\n\n// Internal helper to run all disposers for a single element.\nexport function _disposeNode(node: Node): void {\n  let disposer = _disposeMap.get(node);\n  if (disposer) {\n    let key: Node|INodeFunc = node;\n    do {\n      _disposeMap.delete(key);\n      disposer(node);\n      // Find the next disposer; these are chained when there are multiple.\n      key = disposer;\n      disposer = _disposeMap.get(key);\n    } while (disposer);\n  }\n}\n\nfunction _disposeNodeRecursive(node: Node): void {\n  _walkDom(node, domDisposeHooks.disposeNode);\n}\n\nexport interface IDomDisposeHooks {\n  disposeRecursive: (node: Node) => void;\n  disposeNode: (node: Node) => void;\n}\n\n/**\n * Support for extending dom disposal. This is very low-level, and needs utmost care. Any\n * disposers set should take care of calling the original versions of the disposers.\n */\nexport const domDisposeHooks: IDomDisposeHooks = {\n  disposeNode: _disposeNode,\n  disposeRecursive: _disposeNodeRecursive,\n};\n\n/**\n * Run disposers associated with any descendant of elem or with elem itself. Disposers get\n * associated with elements using dom.onDispose(). Descendants are processed first.\n *\n * It is automatically called if one of the function arguments to dom() throws an exception during\n * element creation. This way any onDispose() handlers set on the unfinished element get called.\n *\n * @param {Node} node: The element to run disposers on.\n */\nexport function domDispose(node: Node): void {\n  domDisposeHooks.disposeRecursive(node);\n}\n\n/**\n * Associate a disposerFunc with a DOM element. It will be called when the element is disposed\n * using domDispose() on it or any of its parents. If onDispose is called multiple times, all\n * disposerFuncs will be called in reverse order.\n * @param {Element} elem: The element to associate the disposer with.\n * @param {Function} disposerFunc(elem): Will be called when domDispose() is called on the\n *    element or its ancestor.\n * Note that it is not necessary usually to dispose event listeners attached to an element (e.g.\n * with dom.on()) since their lifetime is naturally limited to the lifetime of the element.\n */\nexport function onDisposeElem(elem: Node, disposerFunc: INodeFunc): void {\n  const prevDisposer = _disposeMap.get(elem);\n  _disposeMap.set(elem, disposerFunc);\n  if (prevDisposer) {\n    _disposeMap.set(disposerFunc, prevDisposer);\n  }\n}\nexport function onDispose(disposerFunc: INodeFunc) {\n  return (elem: Node) => onDisposeElem(elem, disposerFunc);\n}\n\n/**\n * Make the given element own the disposable, and call its dispose method when domDispose() is\n * called on the element or any of its parents.\n * @param {Element} elem: The element to own the disposable.\n * @param {Disposable} disposable: Anything with a .dispose() method.\n */\nexport function autoDisposeElem(elem: Node, disposable: IDisposable|null) {\n  if (disposable) {\n    onDisposeElem(elem, () => disposable.dispose());\n  }\n}\nexport function autoDispose(disposable: IDisposable|null) {\n  if (disposable) {\n    return (elem: Node) => autoDisposeElem(elem, disposable);\n  }\n}\n","/**\n * Grain.js observables and computeds are similar to (and mostly inspired by) those in\n * Knockout.js. In fact, they can work together.\n *\n *  import {fromKo} from 'kowrap'\n *\n *  fromKo(koObservable)\n *\n * returns a Grain.js observable that mirrors the passed-in Knockout observable (which may be a\n * computed as well). Similarly,\n *\n *  import {toKo} from 'kowrap';\n *  import * as ko from 'knockout';\n *\n *  toKo(ko, observable)\n *\n * returns a Knockout.js observable that mirrows the passed-in Grain observable or computed. Note\n * that toKo() mus tbe called with the knockout module as an argument. This is to avoid adding\n * knockout as a dependency of grainjs.\n *\n * In both cases, calling fromKo/toKo twice on the same observable will return the same wrapper,\n * and subscriptions and disposal are appropriately set up to make usage seamless. In particular,\n * the returned wrapper should not be disposed; it's tied to the lifetime of the wrapped object.\n */\n\nimport {domDisposeHooks} from './domDispose';\nimport {bundleChanges, Observable} from './observable';\n\n// Implementation note. Both wrappers are implemented in the same way.\n//\n// Regarding disposal: the wrapper is always subscribed to the underlying observable. The\n// underlying has a reference to the wrapper. So does any listener to the wrapper. The wrapper can\n// be garbage-collected once it has no listeners AND the underlying observable is disposed or\n// unreferenced.\n\nexport interface IKnockoutObservable<T> extends IKnockoutReadObservable<T> {\n  (val: T): void;\n}\n\nexport interface IKnockoutReadObservable<T> {\n  (): T;\n  peek(): T;\n  subscribe(callback: (newValue: T) => void, target?: any, event?: \"change\"): any;\n  getSubscriptionsCount(): number;\n}\n\n// Inference from Knockout observable gets very tricky because ko.Observable includes the function\n// signature `(val: T) => any` from which type `any` gets inferred. We can infer the correct type\n// with this helper.\nexport type InferKoType<KObs extends IKnockoutReadObservable<any>> =\n  KObs extends {peek(): infer T} ? T : never;\n\nconst fromKoWrappers: WeakMap<IKnockoutObservable<any>, Observable<any>> = new WeakMap();\nconst toKoWrappers: WeakMap<Observable<any>, IKnockoutObservable<any>> = new WeakMap();\n\n/**\n * Returns a Grain.js observable which mirrors a Knockout observable.\n *\n * Do not dispose this wrapper, as it is shared by all code using koObs, and its lifetime is tied\n * to the lifetime of koObs. If unused, it consumes minimal resources, and should get garbage\n * collected along with koObs.\n */\nexport function fromKo<KObs extends IKnockoutObservable<any>>(koObs: KObs): Observable<InferKoType<KObs>> {\n  return fromKoWrappers.get(koObs) || fromKoWrappers.set(koObs, new KoWrapObs(koObs)).get(koObs)!;\n}\n\n/**\n * An Observable that wraps a Knockout observable, created via fromKo(). It keeps minimal overhead\n * when unused by only subscribing to the wrapped observable while it itself has subscriptions.\n *\n * This way, when unused, the only reference is from the wrapper to the wrapped object. KoWrapObs\n * should not be disposed; its lifetime is tied to that of the wrapped object.\n */\nexport class KoWrapObs<T> extends Observable<T> {\n  private _koSub: any = null;\n\n  constructor(private _koObs: IKnockoutObservable<T>) {\n    super(_koObs.peek());\n    this.setListenerChangeCB((hasListeners) => {\n      if (!hasListeners) {\n        this._koSub.dispose();\n        this._koSub = null;\n      } else if (!this._koSub) {\n        // TODO this is a little hack, really, BaseObservable should expose a way to set the value\n        // directly by derived classes, i.e. a protected setter.\n        (this as any)._value = this._koObs.peek();\n        this._koSub = this._koObs.subscribe((val) => this.setAndTrigger(val));\n      }\n    });\n  }\n  public get(): T { return this._koObs.peek(); }\n  public set(value: T): void { bundleChanges(() => this._koObs(value)); }\n  public dispose(): void { throw new Error(\"KoWrapObs should not be disposed\"); }\n}\n\nexport interface IKnockoutModule {\n  observable<T>(value: T): IKnockoutObservable<T>;\n  cleanNode(node: Node): void;\n}\n\n/**\n * Returns a Knockout observable which mirrors a Grain.js observable.\n */\nexport function toKo<T>(knockout: IKnockoutModule, grainObs: Observable<T>): IKnockoutObservable<T> {\n  const prevKoObs = toKoWrappers.get(grainObs);\n  if (prevKoObs) {\n    return prevKoObs;\n  }\n  const newKoObs = knockout.observable(grainObs.get());\n  toKoWrappers.set(grainObs, newKoObs);\n  grainObs.addListener((val) => newKoObs(val));\n  return newKoObs;\n}\n\n// Marker for when knockout-disposal integration has already been setup.\nlet koDisposalIsSetup = false;\n\n/**\n * Set up integration between grainjs and knockout disposal. Knockout does cleanup using\n * ko.removeNode / ko.cleanNode (it also takes care of JQuery cleanup if needed). GrainJS does\n * cleanup using dom.domDispose(). By default these don't know about each other.\n *\n * If you mix the two libraries, however, disposing an element may need to trigger disposers\n * registered by either library.\n *\n * This method ensures that this happens.\n *\n * Note: grainjs disposes text nodes too, but nothing relies on it. When disposal is triggered via\n * knockout, we are forced to rely on knockout's node traversal which ignores text nodes.\n */\nexport function setupKoDisposal(ko: IKnockoutModule) {\n  // Ensure we don't do the setup more than once, or things will get called multiple times.\n  if (koDisposalIsSetup) { return; }\n  koDisposalIsSetup = true;\n\n  const koDomNodeDisposal = (ko as any).utils.domNodeDisposal;\n\n  // Knockout by default has an external-data-cleanup func set to cleanup JQuery. Whatever it is\n  // set to, we will continue calling it, and also will call grainjs domDisposeNode.\n  const origKoCleanExternalData = koDomNodeDisposal.cleanExternalData;\n\n  // The original function called by grainjs to clean nodes recursively. We'll override it.\n  const origGrainDisposeRecursive = domDisposeHooks.disposeRecursive;\n\n  // New function called by knockout to do extra cleanup. Now calls grainjs single-node cleanup.\n  // (In knockout, we can only override single-node cleanup.)\n  function newKoCleanExternalData(node: Node) {\n    origKoCleanExternalData(node);\n    domDisposeHooks.disposeNode(node);\n  }\n\n  // Function called by grainjs to clean nodes recursively. We override the recursive cleanup\n  // function to call the recursive knockout cleanup (letting knockout do the dom traversal it\n  // normally does).\n  function newGrainDisposeRecursive(node: Node) {\n    origGrainDisposeRecursive(node);\n\n    // While doing knockout cleanup, do NOT have it call grainjs cleanup too, as that would cause\n    // multiple unnecessary traversals of DOM.\n    koDomNodeDisposal.cleanExternalData = origKoCleanExternalData;\n    try {\n      ko.cleanNode(node);\n    } finally {\n      koDomNodeDisposal.cleanExternalData = newKoCleanExternalData;\n    }\n  }\n\n  // Use knockout and grainjs hooks to actually set the new cleanup functions.\n  koDomNodeDisposal.cleanExternalData = newKoCleanExternalData;\n  domDisposeHooks.disposeRecursive = newGrainDisposeRecursive;\n}\n","/**\n * subscribe.js implements subscriptions to several observables at once.\n *\n * E.g. if we have some existing observables (which may be instances of `computed`),\n * we can subscribe to them explicitly:\n *    let obs1 = observable(5), obs2 = observable(12);\n *    subscribe(obs1, obs2, (use, v1, v2) => console.log(v1, v2));\n *\n * or implicitly by using `use(obs)` function, which allows dynamic subscriptions:\n *    subscribe(use => console.log(use(obs1), use(obs2)));\n *\n * In either case, if obs1 or obs2 is changed, the callbacks will get called automatically.\n *\n * Creating a subscription allows any number of dependencies to be specified explicitly, and their\n * values will be passed to the callback(). These may be combined with automatic dependencies\n * detected using use(). Note that constructor dependencies have less overhead.\n *\n *    subscribe(...deps, ((use, ...depValues) => READ_CALLBACK));\n */\n\nimport {DepItem} from './_computed_queue';\nimport {IDisposableOwner} from './dispose';\nimport {Listener} from './emit';\nimport {fromKo, IKnockoutReadObservable} from './kowrap';\nimport {BaseObservable as Obs} from './observable';\n\nexport interface ISubscribableObs {\n  _getDepItem(): DepItem|null;\n  addListener(callback: (val: any, prev: any) => void, optContext?: object): Listener;\n  get(): any;\n}\n\nexport type ISubscribable = ISubscribableObs | IKnockoutReadObservable<any>;\n\n// Type inference from the simpler Obs<T>|IKnockoutReadObservable<T> does not always produce\n// correct T for ko.Observable. The formula below is a workaround. See also InferKoType in kowrap.\nexport type InferUseType<TObs extends Obs<any>|IKnockoutReadObservable<any>> =\n  TObs extends Obs<infer T> ? T :\n  TObs extends {peek(): infer U} ? U : never;\n\n// The generic type for the use() function that callbacks get.\nexport type UseCB = <TObs extends Obs<any>|IKnockoutReadObservable<any>>(obs: TObs) => InferUseType<TObs>;\n\nexport interface UseCBOwner extends UseCB {    // tslint:disable-line:interface-name\n  owner: IDisposableOwner;\n}\n\ninterface IListenerWithInUse extends Listener {\n  _inUse: boolean;\n}\n\n// Constant empty array, which we use to avoid allocating new read-only empty arrays.\nconst emptyArray: ReadonlyArray<any> = [];\n\nexport class Subscription {\n  private readonly _depItem: DepItem;\n  private readonly _dependencies: ReadonlyArray<ISubscribableObs>;\n  private readonly _depListeners: ReadonlyArray<Listener>;\n  private _dynDeps: Map<ISubscribableObs, IListenerWithInUse>;\n  private _callback: (use: UseCB, ...args: any[]) => void;\n  private _useFunc: UseCB;\n\n  /**\n   * Internal constructor for a Subscription. You should use subscribe() function instead.\n   * The last owner argument is used by computed() to make itself available as the .owner property\n   * of the 'use' function that gets passed to the callback.\n   */\n  constructor(callback: (use: UseCB, ...args: any[]) => void, dependencies: ReadonlyArray<ISubscribable>, owner?: any) {\n    this._depItem = new DepItem(this._evaluate, this);\n    this._dependencies = dependencies.length > 0 ? dependencies : emptyArray;\n    this._depListeners = dependencies.length > 0 ? dependencies.map((obs) => this._subscribeTo(obs)) : emptyArray;\n    this._dynDeps = new Map();   // Maps dependent observable to its Listener object.\n    this._callback = callback;\n    this._useFunc = this._useDependency.bind(this);\n    if (owner) {\n      (this._useFunc as UseCBOwner).owner = owner;\n    }\n\n    this._evaluate();\n  }\n\n  /**\n   * Disposes the computed, unsubscribing it from all observables it depends on.\n   */\n  public dispose() {\n    this._callback = null as any;\n    for (const lis of this._depListeners) { lis.dispose(); }\n    for (const lis of this._dynDeps.values()) { lis.dispose(); }\n  }\n\n  /**\n   * For use by computed(): returns this subscription's hook into the _computed_queue.\n   */\n  public _getDepItem(): DepItem { return this._depItem; }\n\n  /**\n   * @private\n   * Gets called when the callback calls `use(obs)` for an observable. It creates a\n   * subscription to `obs` if one doesn't yet exist.\n   * @param {Observable} obs: The observable being used as a dependency.\n   */\n  private _useDependency(_obs: ISubscribable) {\n    const obs = ('_getDepItem' in _obs) ? _obs : fromKo(_obs);\n    let listener = this._dynDeps.get(obs);\n    if (!listener) {\n      listener = this._subscribeTo(obs) as IListenerWithInUse;\n      this._dynDeps.set(obs, listener);\n    }\n    listener._inUse = true;\n    this._depItem.useDep(obs._getDepItem());\n    return obs.get();\n  }\n\n  /**\n   * @private\n   * Calls the callback() with appropriate args, and updates subscriptions when it is done.\n   * I.e. adds dynamic subscriptions created via `use(obs)`, and disposes those no longer used.\n   */\n  private _evaluate() {\n    if (this._callback === null) { return; }      // Means this Subscription has been disposed.\n    try {\n      // Note that this is faster than using .map().\n      const readArgs: [UseCB, ...any[]] = [this._useFunc];\n      for (let i = 0, len = this._dependencies.length; i < len; i++) {\n        readArgs[i + 1] = this._dependencies[i].get();\n        this._depItem.useDep(this._dependencies[i]._getDepItem());\n      }\n      return this._callback.apply(undefined, readArgs);\n\n    } finally {\n      this._dynDeps.forEach((listener, obs) => {\n        if (listener._inUse) {\n          listener._inUse = false;\n        } else {\n          this._dynDeps.delete(obs);\n          listener.dispose();\n        }\n      });\n    }\n  }\n\n  /**\n   * @private\n   * Subscribes this computed to another observable that it depends on.\n   * @param {Observable} obs: The observable to subscribe to.\n   * @returns {Listener} Listener object.\n   */\n  private _subscribeTo(_obs: ISubscribable) {\n    const obs = ('_getDepItem' in _obs) ? _obs : fromKo(_obs);\n    return obs.addListener(this._enqueue, this);\n  }\n\n  /**\n   * @private\n   * Adds this item to the recompute queue.\n   */\n  private _enqueue() {\n    this._depItem.enqueue();\n  }\n}\n\n/**\n * This is the type-checking interface for subscribe(), which allows TypeScript to do helpful\n * type-checking when using it. We can only support a fixed number of argumnets (explicit\n * dependencies), but 5 should almost always be enough.\n */\nexport function subscribe(cb: (use: UseCB) => void): Subscription;\n\nexport function subscribe<A>(\n    a: Obs<A>,\n    cb: (use: UseCB, a: A) => void): Subscription;\n\nexport function subscribe<A, B>(\n    a: Obs<A>, b: Obs<B>,\n    cb: (use: UseCB, a: A, b: B) => void): Subscription;\n\nexport function subscribe<A, B, C>(\n    a: Obs<A>, b: Obs<B>, c: Obs<C>,\n    cb: (use: UseCB, a: A, b: B, c: C) => void): Subscription;\n\nexport function subscribe<A, B, C, D>(\n    a: Obs<A>, b: Obs<B>, c: Obs<C>, d: Obs<D>,\n    cb: (use: UseCB, a: A, b: B, c: C, d: D) => void): Subscription;\n\nexport function subscribe<A, B, C, D, E>(\n    a: Obs<A>, b: Obs<B>, c: Obs<C>, d: Obs<D>, e: Obs<E>,\n    cb: (use: UseCB, a: A, b: B, c: C, d: D, e: E) => void): Subscription;\n\n/**\n * Creates a new Subscription.\n * @param {Observable} ...observables: The initial params, of which there may be zero or more, are\n *    observables on which this computed depends. When any of them change, the callback()\n *    will be called with the values of these observables as arguments.\n * @param {Function} callback: will be called with arguments (use, ...values), i.e. the\n *    `use` function and values for all of the ...observables that precede this argument.\n *    This callback is called immediately, and whenever any dependency changes.\n * @returns {Subscription} The new subscription which may be disposed to unsubscribe.\n */\nexport function subscribe(...args: any[]): Subscription {\n  const cb = args.pop();\n  // The cast helps ensure that Observable is compatible with ISubscribable abstraction that we use.\n  return new Subscription(cb, args as Array<Obs<any>>);\n}\n","/**\n * computed.js implements a computed observable, whose value depends on other observables and gets\n * recalculated automatically when they change.\n *\n * E.g. if we have some existing observables (which may themselves be instances of `computed`),\n * we can create a computed that subscribes to them explicitly:\n *  let obs1 = observable(5), obs2 = observable(12);\n *  let computed1 = computed(obs1, obs2, (use, v1, v2) => v1 + v2);\n *\n * or implicitly by using `use(obs)` function:\n *  let computed2 = computed(use => use(obs1) + use(obs2));\n *\n * In either case, computed1.get() and computed2.get() will have the value 17. If obs1 or obs2 is\n * changed, computed1 and computed2 will get recomputed automatically.\n *\n * Creating a computed allows any number of dependencies to be specified explicitly, and their\n * values will be passed to the read() callback. These may be combined with automatic dependencies\n * detected using use(). Note that constructor dependencies have less overhead.\n *\n *  let val = computed(...deps, ((use, ...depValues) => READ_CALLBACK));\n *\n * You may specify a `write` callback by calling `onWrite(WRITE_CALLBACK)`, which will be called\n * whenever set() is called on the computed by its user. If a `write` bacllback is not specified,\n * calling `set` on a computed observable will throw an exception.\n *\n * Note that pureComputed.js offers a variation of computed() with the same interface, but which\n * stays unsubscribed from dependencies while it itself has no subscribers.\n *\n * A computed may be used with a disposable value using `use.owner` as the value's owner. E.g.\n *    let val = computed((use) => Foo.create(use.owner, use(a), use(b)));\n *\n * When the computed() is re-evaluated, and when it itself is disposed, it disposes the previously\n * owned value. Note that only the pattern above works, i.e. use.owner may only be used to take\n * ownership of the same disposable that the callback returns.\n */\n\nimport {DepItem} from './_computed_queue';\nimport {IDisposableOwnerT, setDisposeOwner} from './dispose';\nimport {BaseObservable as Obs, Observable} from './observable';\nimport {ISubscribable, Subscription, UseCBOwner as UseCB} from './subscribe';\n\nfunction _noWrite(): never {\n  throw new Error(\"Can't write to non-writable computed\");\n}\n\ntype Owner<T> = IDisposableOwnerT<Computed<T>>|null;\n\nexport class Computed<T> extends Observable<T> {\n  // Still need repetitive declarations to support varargs that are not the final argument.\n  public static create<T>(\n    owner: Owner<T>, cb: (use: UseCB) => T): Computed<T>;\n  public static create<T, A>(\n    owner: Owner<T>, a: Obs<A>,\n    cb: (use: UseCB, a: A) => T): Computed<T>;\n  public static create<T, A, B>(\n    owner: Owner<T>, a: Obs<A>, b: Obs<B>,\n    cb: (use: UseCB, a: A, b: B) => T): Computed<T>;\n  public static create<T, A, B, C>(\n    owner: Owner<T>, a: Obs<A>, b: Obs<B>, c: Obs<C>,\n    cb: (use: UseCB, a: A, b: B, c: C) => T): Computed<T>;\n  public static create<T, A, B, C, D>(\n    owner: Owner<T>, a: Obs<A>, b: Obs<B>, c: Obs<C>, d: Obs<D>,\n    cb: (use: UseCB, a: A, b: B, c: C, d: D) => T): Computed<T>;\n  public static create<T, A, B, C, D, E>(\n    owner: Owner<T>, a: Obs<A>, b: Obs<B>, c: Obs<C>, d: Obs<D>, e: Obs<E>,\n    cb: (use: UseCB, a: A, b: B, c: C, d: D, e: E) => T): Computed<T>;\n\n  /**\n   * Creates a new Computed, owned by the given owner.\n   * @param owner: Object to own this Computed, or null to handle disposal manually.\n   * @param ...observables: Zero or more observables on which this computes depends. The callback\n   *        will get called when any of these changes.\n   * @param callback: Read callback that will be called with (use, ...values),\n   *    i.e. the `use` function and values for all of the ...observables. The callback is called\n   *    immediately and whenever any dependency changes.\n   * @returns {Computed} The newly created computed observable.\n   */\n  public static create<T>(owner: IDisposableOwnerT<Computed<T>>|null, ...args: any[]): Computed<T> {\n    const readCb = args.pop();\n    return setDisposeOwner(owner, new Computed<T>(readCb, args));\n  }\n\n  private _callback: (use: UseCB, ...args: any[]) => T;\n  private _write: (value: T) => void;\n  private _sub: Subscription;\n\n  /**\n   * Internal constructor for a Computed observable. You should use computed() function instead.\n   */\n  constructor(callback: (use: UseCB, ...args: any[]) => T, dependencies: ISubscribable[]) {\n    // At initialization we force an undefined value even though it's not of type T: it gets set\n    // to a proper value during the creation of new Subscription, which calls this._read.\n    super(undefined as any);\n    this._callback = callback;\n    this._write = _noWrite;\n    this._sub = new Subscription(this._read.bind(this), dependencies, this);\n  }\n\n  /**\n   * Used by subscriptions to keep track of dependencies.\n   */\n  public _getDepItem(): DepItem {\n    return this._sub._getDepItem();\n  }\n\n  /**\n   * \"Sets\" the value of the computed by calling the write() callback if one was provided in the\n   * constructor. Throws an error if there was no such callback (not a \"writable\" computed).\n   * @param {Object} value: The value to pass to the write() callback.\n   */\n  public set(value: T): void { this._write(value); }\n\n  /**\n   * Set callback to call when this.set(value) is called, to make it a writable computed. If not\n   * set, attempting to write to this computed will throw an exception.\n   */\n  public onWrite(writeFunc: (value: T) => void): Computed<T> {\n    this._write = writeFunc;\n    return this;\n  }\n\n  /**\n   * Disposes the computed, unsubscribing it from all observables it depends on.\n   */\n  public dispose() {\n    this._sub.dispose();\n    super.dispose();\n  }\n\n  private _read(use: any, ...args: any[]): void {\n    super.set(this._callback(use as UseCB, ...args));\n  }\n}\n\n/**\n * This is the type-checking interface for computed(), which allows TypeScript to do helpful\n * type-checking when using it. We can only support a fixed number of argumnets (explicit\n * dependencies), but 5 should almost always be enough.\n */\nexport function computed<T>(cb: (use: UseCB) => T): Computed<T>;\n\nexport function computed<T, A>(\n  a: Obs<A>,\n  cb: (use: UseCB, a: A) => T): Computed<T>;\n\nexport function computed<T, A, B>(\n  a: Obs<A>, b: Obs<B>,\n  cb: (use: UseCB, a: A, b: B) => T): Computed<T>;\n\nexport function computed<T, A, B, C>(\n  a: Obs<A>, b: Obs<B>, c: Obs<C>,\n  cb: (use: UseCB, a: A, b: B, c: C) => T): Computed<T>;\n\nexport function computed<T, A, B, C, D>(\n  a: Obs<A>, b: Obs<B>, c: Obs<C>, d: Obs<D>,\n  cb: (use: UseCB, a: A, b: B, c: C, d: D) => T): Computed<T>;\n\nexport function computed<T, A, B, C, D, E>(\n  a: Obs<A>, b: Obs<B>, c: Obs<C>, d: Obs<D>, e: Obs<E>,\n  cb: (use: UseCB, a: A, b: B, c: C, d: D, e: E) => T): Computed<T>;\n\n/**\n * Creates a new Computed.\n * @param {Observable} ...observables: The initial params, of which there may be zero or more, are\n *    observables on which this computed depends. When any of them change, the read() callback\n *    will be called with the values of these observables as arguments.\n * @param {Function} readCallback: Read callback that will be called with (use, ...values),\n *    i.e. the `use` function and values for all of the ...observables. The callback is called\n *    immediately and whenever any dependency changes.\n * @returns {Computed} The newly created computed observable.\n */\nexport function computed(...args: any[]): Computed<any> {\n  const readCb = args.pop();\n  return new Computed<any>(readCb, args);\n}\n\n// TODO Consider implementing .singleUse() method.\n// An open question is in how to pass e.g. kd.hide(computed(x, x => !x)) in such a way that\n// the temporary computed can be disposed when temporary, but not otherwise. A function-only\n// syntax is kd.hide(use => !use(x)), but prevents use of static subscriptions.\n//\n// (a) function-only use of computeds is fine and useful.\n// (b) pureComputed is another option, and doesn't technically require getting disposed.\n// (c) kd.hide(compObs), kd.autoDispose(compObs) is more general and\n//     can be replaced more concisely by kd.hide(compObs.singleUse())\n// .singleUse() automatically disposes a computed (or an observable?) once there are no\n// subscriptions to it. If there are no subscriptions at the time of this call, waits for the next\n// tick, and possibly disposes then.\n","/**\n * binding.ts offers a convenient subscribe() function that creates a binding to an observable, a\n * a plain value, or a function from which it builds a computed.\n */\n\nimport {computed} from './computed';\nimport {IDisposable} from './dispose';\nimport {autoDisposeElem} from './domDispose';\nimport {IKnockoutReadObservable, InferKoType} from './kowrap';\nimport {BaseObservable} from './observable';\nimport {subscribe, UseCBOwner} from './subscribe';\n\nexport type BindableValue<T> = BaseObservable<T> | ComputedCallback<T> | T | IKnockoutReadObservable<T>;\n\nexport type ComputedCallback<T> = (use: UseCBOwner, ...args: any[]) => T;\n\n/**\n * Subscribes a callback to valueObs, which may be one a plain value, an observable, a knockout\n * observable, or a function. If a function, it's used to create a computed() and will be called\n * with a context function `use`, allowing it to depend on other observable values (see\n * documentation for `computed`).\n *\n * In all cases, `callback(newValue, oldValue)` is called immediately and whenever the value\n * changes. On the initial call, oldValue is undefined.\n *\n * Returns an object which should be disposed to remove the created subscriptions, or null.\n */\n// The overload below is annoying, but needed for correct type inference; see test/types/kowrap.ts.\nexport function subscribeBindable<KObs extends IKnockoutReadObservable<any>>(\n    valueObs: KObs, callback: (val: InferKoType<KObs>) => void): IDisposable|null;\nexport function subscribeBindable<T>(\n    valueObs: BindableValue<T>, callback: (val: T) => void): IDisposable|null;\nexport function subscribeBindable<T>(\n    valueObs: BindableValue<T>, callback: (val: T) => void): IDisposable|null {\n  // A plain function (to make a computed from), or a knockout observable.\n  if (typeof valueObs === 'function') {\n    // Knockout observable.\n    const koValue = valueObs as IKnockoutReadObservable<T>;\n    if (typeof koValue.peek === 'function') {\n      const sub = koValue.subscribe((val) => callback(val));\n      callback(koValue.peek());\n      return sub;\n    }\n\n    // Function from which to make a computed. Note that this is also reasonable:\n    //    let sub = subscribe(use => callback(valueObs(use)));\n    // The difference is that when valueObs() evaluates to unchanged value, callback would be\n    // called in the version above, but not in the version below.\n    const comp = computed(valueObs as ComputedCallback<T>);\n    comp.addListener((val) => callback(val));\n    callback(comp.get());\n    return comp;      // Disposing this will dispose its one listener.\n  }\n\n  // An observable.\n  if (valueObs instanceof BaseObservable) {\n    // Use subscribe() rather than addListener(), so that bundling of changes (implicit and with\n    // bundleChanges()) is respected. This matters when callback also uses observables.\n    return subscribe(valueObs, (use, val) => callback(val));\n  }\n\n  callback(valueObs);\n  return null;\n}\n\n/**\n * Subscribes a callback to valueObs (which may be a value, observable, or function) using\n * subscribe(), and disposes the subscription with the passed-in element.\n */\nexport function subscribeElem<T>(elem: Node, valueObs: BindableValue<T>,\n                                 callback: (newVal: T, oldVal?: T) => void): void {\n  autoDisposeElem(elem, subscribeBindable(valueObs, callback));\n}\n","import {BindableValue, subscribeElem as _subscribe} from './binding';\nimport {onDisposeElem} from './domDispose';\nimport {DomElementMethod, DomMethod, IAttrObj} from './domImpl';\n\n// Use the browser globals in a way that allows replacing them with mocks in tests.\nimport {G} from './browserGlobals';\n\n/**\n * Private global map for associating arbitrary data with DOM. It's a WeakMap, so does not prevent\n * values from being garbage collected when the owning DOM elements are no longer used.\n */\nconst _dataMap: WeakMap<Node, {[key: string]: any}> = new WeakMap();\n\n/**\n * Sets multiple attributes of a DOM element. The `attrs()` variant takes no `elem` argument.\n * Null and undefined values are omitted, and booleans are either omitted or set to empty string.\n * @param {Object} attrsObj: Object mapping attribute names to attribute values.\n */\nexport function attrsElem(elem: Element, attrsObj: IAttrObj): void {\n  for (const key of Object.keys(attrsObj)) {\n    const val = attrsObj[key];\n    if (val != null && val !== false) {\n      elem.setAttribute(key, val === true ? '' : val);\n    }\n  }\n}\nexport function attrs(attrsObj: IAttrObj): DomElementMethod {\n  return (elem) => attrsElem(elem, attrsObj);\n}\n\n/**\n * Sets an attribute of a DOM element to the given value. Removes the attribute when the value is\n * null or undefined. The `attr()` variant takes no `elem` argument, and `attrValue` may be an\n * observable or function.\n * @param {Element} elem: The element to update.\n * @param {String} attrName: The name of the attribute to bind, e.g. 'href'.\n * @param {String|null} attrValue: The string value or null to remove the attribute.\n */\nexport function attrElem(elem: Element, attrName: string, attrValue: string|null): void {\n  if (attrValue === null || attrValue === undefined) {\n    elem.removeAttribute(attrName);\n  } else {\n    elem.setAttribute(attrName, attrValue);\n  }\n}\nexport function attr(attrName: string, attrValueObs: BindableValue<string>): DomElementMethod {\n  return (elem) => _subscribe(elem, attrValueObs, (val) => attrElem(elem, attrName, val));\n}\n\n/**\n * Sets or removes a boolean attribute of a DOM element. According to the spec, empty string is a\n * valid true value for the attribute, and the false value is indicated by the attribute's absence.\n * The `boolAttr()` variant takes no `elem`, and `boolValue` may be an observable or function.\n * @param {Element} elem: The element to update.\n * @param {String} attrName: The name of the attribute to bind, e.g. 'checked'.\n * @param {Boolean} boolValue: Boolean value whether to set or unset the attribute.\n */\nexport function boolAttrElem(elem: Element, attrName: string, boolValue: boolean): void {\n  attrElem(elem, attrName, boolValue ? '' : null);\n}\nexport function boolAttr(attrName: string, boolValueObs: BindableValue<boolean>): DomElementMethod {\n  return (elem) => _subscribe(elem, boolValueObs, (val) => boolAttrElem(elem, attrName, val));\n}\n\n/**\n * Adds a text node to the element. The `text()` variant takes no `elem`, and `value` may be an\n * observable or function.\n * @param {Element} elem: The element to update.\n * @param {String} value: The text value to add.\n */\nexport function textElem(elem: Node, value: string): void {\n  elem.appendChild(G.document.createTextNode(value));\n}\nexport function text(valueObs: BindableValue<string>): DomMethod {\n  return (elem) => {\n    const textNode = G.document.createTextNode('');\n    _subscribe(elem, valueObs, (val) => { textNode.nodeValue = val; });\n    elem.appendChild(textNode);\n  };\n}\n\n/**\n * Sets a style property of a DOM element to the given value. The `style()` variant takes no\n * `elem`, and `value` may be an observable or function.\n * @param {Element} elem: The element to update.\n * @param {String} property: The name of the style property to update, e.g. 'fontWeight'.\n * @param {String} value: The value for the property.\n */\nexport function styleElem(elem: Element, property: string, value: string): void {\n  (elem as any).style[property] = value;\n}\nexport function style(property: string, valueObs: BindableValue<string>): DomElementMethod {\n  return (elem) =>\n    _subscribe(elem, valueObs, (val) => styleElem(elem, property, val));\n}\n\n/**\n * Sets the property of a DOM element to the given value.\n * The `prop()` variant takes no `elem`, and `value` may be an observable or function.\n * @param {Element} elem: The element to update.\n * @param {String} property: The name of the property to update, e.g. 'disabled'.\n * @param {Object} value: The value for the property.\n */\nexport function propElem<T>(elem: Node, property: string, value: T): void {\n  (elem as any)[property] = value;\n}\nexport function prop<T>(property: string, valueObs: BindableValue<T>): DomMethod {\n  return (elem) => _subscribe(elem, valueObs, (val) => propElem(elem, property, val));\n}\n\n/**\n * Shows or hides the element depending on a boolean value. Note that the element must be visible\n * initially (i.e. unsetting style.display should show it).\n * The `show()` variant takes no `elem`, and `boolValue` may be an observable or function.\n * @param {Element} elem: The element to update.\n * @param {Boolean} boolValue: True to show the element, false to hide it.\n */\nexport function showElem(elem: HTMLElement, boolValue: boolean): void {\n  elem.style.display = boolValue ? '' : 'none';\n}\nexport function show(boolValueObs: BindableValue<boolean>): DomElementMethod {\n  return (elem) =>\n    _subscribe(elem, boolValueObs, (val) => showElem(elem, val));\n}\n\n/**\n * The opposite of show, hiding the element when boolValue is true.\n * The `hide()` variant takes no `elem`, and `boolValue` may be an observable or function.\n * @param {Element} elem: The element to update.\n * @param {Boolean} boolValue: True to hide the element, false to show it.\n */\nexport function hideElem(elem: HTMLElement, boolValue: boolean): void {\n  elem.style.display = boolValue ? 'none' : '';\n}\nexport function hide(boolValueObs: BindableValue<boolean>): DomElementMethod {\n  return (elem) =>\n    _subscribe(elem, boolValueObs, (val) => hideElem(elem, val));\n}\n\n/**\n * Sets or toggles the given css class className.\n */\nexport function clsElem(elem: Element, className: string, boolValue: boolean = true): void {\n  elem.classList.toggle(className, Boolean(boolValue));\n}\n\n/**\n * Sets or toggles a css class className. If className is an observable, it will be replaced when\n * the observable changes. If a plain string, then an optional second boolean observable may be\n * given, which will toggle it.\n *\n *    dom.cls('foo')                                // Sets className 'foo'\n *    dom.cls('foo', isFoo);                        // Toggles 'foo' className according to observable.\n *    dom.cls('foo', (use) => use(isFoo));          // Toggles 'foo' className according to observable.\n *    dom.cls(fooClass);                            // Sets className to the value of fooClass observable\n *    dom.cls((use) => `prefix-${use(fooClass)}`);  // Sets className to prefix- plus fooClass observable.\n */\nexport function cls(className: string, boolValue?: BindableValue<boolean>): DomElementMethod;\nexport function cls(className: BindableValue<string>): DomElementMethod;\nexport function cls(className: string|BindableValue<string>, boolValue?: BindableValue<boolean>): DomElementMethod {\n  if (typeof className !== 'string') {\n    return _clsDynamicPrefix('', className);\n  } else if (!boolValue || typeof boolValue === 'boolean') {\n    return (elem) => clsElem(elem, className, boolValue);\n  } else {\n    return (elem) => _subscribe(elem, boolValue, (val) => clsElem(elem, className, val));\n  }\n}\n\n/**\n * Just like cls() but prepends a prefix to className, including when it is an observable.\n */\nexport function clsPrefix(prefix: string, className: string, boolValue?: BindableValue<boolean>): DomElementMethod;\nexport function clsPrefix(prefix: string, className: BindableValue<string>): DomElementMethod;\nexport function clsPrefix(prefix: string, className: string|BindableValue<string>,\n                          boolValue?: BindableValue<boolean>): DomElementMethod {\n  if (typeof className !== 'string') {\n    return _clsDynamicPrefix(prefix, className);\n  } else {\n    return cls(prefix + className, boolValue);\n  }\n}\n\nfunction _clsDynamicPrefix(prefix: string, className: BindableValue<string>): DomElementMethod {\n  return (elem) => {\n    let prevClass: string|null = null;\n    _subscribe(elem, className, (name: string) => {\n      if (prevClass) { elem.classList.remove(prevClass); }\n      prevClass = name ? prefix + name : null;\n      if (prevClass) { elem.classList.add(prevClass); }\n    });\n  };\n}\n\n/**\n * Associate arbitrary data with a DOM element. The `data()` variant takes no `elem`, and `value`\n * may be an observable or function.\n * @param {Element} elem: The element with which to associate data.\n * @param {String} key: Key to identify this piece of data among others attached to elem.\n * @param {Object} value: Arbitrary value to associate with elem.\n */\nexport function dataElem(elem: Node, key: string, value: any): void {\n  const obj = _dataMap.get(elem);\n  if (obj) {\n    obj[key] = value;\n  } else {\n    onDisposeElem(elem, () => _dataMap.delete(elem));\n    _dataMap.set(elem, {[key]: value});\n  }\n}\nexport function data(key: string, valueObs: BindableValue<any>): DomMethod {\n  return (elem) => _subscribe(elem, valueObs, (val) => dataElem(elem, key, val));\n}\nexport function getData(elem: Node, key: string) {\n  const obj = _dataMap.get(elem);\n  return obj && obj[key];\n}\n\n/**\n * A very simple setup to identify DOM elements for testing purposes. Here's the recommended\n * usage.\n *\n *   // In the component to be tested.\n *   import {noTestId, TestId} from 'grainjs';\n *\n *   function myComponent(myArgs, testId: TestId = noTestId) {\n *     return dom(..., testId(\"some-name\"),\n *       dom(..., testId(\"another-name\"), ...),\n *     );\n *   }\n *\n * In the fixture code using this component:\n *\n *   import {makeTestId} from 'grainjs';\n *\n *   dom(..., myComponent(myArgs, makeTestId('test-mycomp-'), ...)\n *\n * In the webdriver test code:\n *\n *   driver.find('.test-my-comp-some-name')\n *   driver.find('.test-my-comp-another-name')\n *\n * When myComponent() is created with testId argument omitted, the testId() calls are no-ops. When\n * makeTestId('test-foo-') is passed in, testId() calls simply add a css class with that prefix.\n */\nexport type TestId = (name: string) => DomElementMethod|null;\n\n/**\n * See documentation for TestId above.\n */\nexport function makeTestId(prefix: string): TestId {\n  return clsPrefix.bind(null, prefix);\n}\n\n/**\n * See documentation for TestId above.\n */\nexport const noTestId: TestId = (name: string) => null;\n","import {domDispose} from './domDispose';\nimport {attrsElem} from './domMethods';\n\n// Use the browser globals in a way that allows replacing them with mocks in tests.\nimport {G} from './browserGlobals';\n\n// For inline modifications, some other options were considered:\n// (1) Chainable methods (to use e.g. `dom('div').attr('href', url).value()`). This approach is\n//     criticized here:\n//     https://medium.com/making-internets/why-using-chain-is-a-mistake-9bc1f80d51ba\n// (2) Adding methods to DOM (to use e.g. `dom('div').attr('href', url)`. This is criticized here:\n//     http://perfectionkills.com/whats-wrong-with-extending-the-dom/\n// The approach chosen (inline modifications using functions that are typically bound on the fly)\n// is more flexible and robust, and only suffers from slightly more verbosity. E.g.\n// `dom('div', dom.attr('href', url))`.\n\nexport type DomMethod<T = Node> = (elem: T) => DomArg<T>|void;\nexport type DomElementMethod = DomMethod<HTMLElement>;\n\nexport interface IAttrObj {\n  [attrName: string]: string|boolean|null|undefined;\n}\n\n// Type of argument to dom-building functions. Allows IAttrObj when applied to an Element.\n//\n// Note that DomArg<A> differs from DomArg<B> in what callbacks are accepted, so DomArg<Element>\n// can be assigned to DomArg<HTMLInputElement>, but not vice versa. When writing a function that\n// accepts DomArgs and applies them to an element, use the most specific DomArg type that works\n// for that element, e.g. DomArg<HTMLInputElement> if possible, then DomElementArg, then DomArg.\nexport type DomArg<T = Node> = Node | string | void | null | undefined |\n  IDomArgs<T> | DomMethod<T> | (T extends Element ? IAttrObj : never);\n\nexport interface IDomArgs<T = Node> extends Array<DomArg<T>> {}\n\n// Alias for backward compatibility.\nexport type DomElementArg = DomArg<HTMLElement>;\n\n// The goal of the above declarations is to get help from TypeScript in detecting incorrect usage:\n// (See test/types/dom.ts for a test of this.)\n//  import {text, hide} from './domMethods';\n//  dom('div', text('hello'));        // OK\n//  dom('div', hide(true));           // OK\n//  dom('div', {title: 'hello'});     // OK\n//  frag(text('hello'));              // OK\n//  frag(hide(true));                 // Bad: DocumentFragment is not an Element\n//  frag({title: 'hello'});           // Bad: DocumentFragment is not an Element\n\n/**\n * dom('tag#id.class1.class2', ...args)\n *   The first argument is a string consisting of a tag name, with optional #foo suffix\n *   to add the ID 'foo', and zero or more .bar suffixes to add a CSS class 'bar'.\n *\n *   NOTE that better typings are available when a tag is used directly, e.g.\n *      dom('input', {id: 'foo'}, (elem) => ...) --> elem has type HTMLInputElement\n *      dom('input#foo',          (elem) => ...) --> elem has type HTMLElement\n *\n * The rest of the arguments are optional and may be:\n *\n *   Nodes - which become children of the created element;\n *   strings - which become text node children;\n *   objects - of the form {attr: val} to set additional attributes on the element;\n *   Arrays - which are flattened with each item processed recursively;\n *   functions - which are called with elem as the argument, for a chance to modify the\n *       element as it's being created. Return values are processed recursively.\n *   \"dom methods\" - expressions such as `dom.attr('href', url)` or `dom.hide(obs)`, which\n *       are actually special cases of the \"functions\" category.\n */\nexport function dom<Tag extends TagName>(tagString: Tag, ...args: IDomArgs<TagElem<Tag>>): TagElem<Tag> {\n  return _updateWithArgsOrDispose(_createFromTagString(_createElementHtml, tagString) as TagElem<Tag>, args);\n}\n\nexport type TagName = keyof HTMLElementTagNameMap|string;\nexport type TagElem<T extends TagName> = T extends keyof HTMLElementTagNameMap ? HTMLElementTagNameMap[T] : HTMLElement;\n\n/**\n * svg('tag#id.class1.class2', ...args)\n *  Same as dom(...), but creates an SVG element.\n */\nexport function svg(tagString: string, ...args: IDomArgs<SVGElement>): SVGElement {\n  return _updateWithArgsOrDispose(_createFromTagString(_createElementSvg, tagString), args);\n}\n\n// Internal helper used to create HTML elements.\nfunction _createElementHtml(tag: string): HTMLElement {\n  return G.document.createElement(tag);\n}\n\n// Internal helper used to create SVG elements.\nfunction _createElementSvg(tag: string): SVGElement {\n  return G.document.createElementNS(\"http://www.w3.org/2000/svg\", tag);\n}\n\n/**\n * Internal helper to parse tagString, create an element using createFunc with the given tag, and\n * set its id and classes from the tagString.\n * @param {Funtion} createFunc(tag): Function that should create an element given a tag name.\n *    It is passed in to allow creating elements in different namespaces (e.g. plain HTML vs SVG).\n * @param {String} tagString: String of the form \"tag#id.class1.class2\" where id and classes are\n *    optional.\n * @return {Element} The result of createFunc(), possibly with id and class attributes also set.\n */\nfunction _createFromTagString<E extends Element>(createFunc: (tag: string) => E, tagString: string): E {\n  // We do careful hand-written parsing rather than use a regexp for speed. Using a regexp is\n  // significantly more expensive.\n  let tag: string;\n  let id: string|undefined;\n  let classes: string|undefined;\n  let dotPos: number = tagString.indexOf(\".\");\n  const hashPos: number = tagString.indexOf('#');\n  if (dotPos === -1) {\n    dotPos = tagString.length;\n  } else {\n    classes = tagString.substring(dotPos + 1).replace(/\\./g, ' ');\n  }\n  if (hashPos === -1) {\n    tag = tagString.substring(0, dotPos);\n  } else if (hashPos > dotPos) {\n    throw new Error(`ID must come before classes in dom(\"${tagString}\")`);\n  } else {\n    tag = tagString.substring(0, hashPos);\n    id = tagString.substring(hashPos + 1, dotPos);\n  }\n\n  const elem: E = createFunc(tag);\n  if (id) { elem.setAttribute('id', id); }\n  if (classes) { elem.setAttribute('class', classes); }\n  return elem;\n}\n\n/**\n * Update an element with any number of arguments, as documented in dom().\n */\nexport function update<T extends Node, Args extends IDomArgs<T>>(elem: T, ...args: Args): T {\n  return _updateWithArgs(elem, args);\n}\n\n/**\n * Update an element with an array of arguments.\n */\nfunction _updateWithArgs<T extends Node>(elem: T, args: IDomArgs<T>): T {\n  for (const arg of args) {\n    _updateWithArg(elem, arg);\n  }\n  return elem;\n}\n\n/**\n * Update an element with an array of arguments, calling disposers in case of an exception. It is\n * an internal helper to be used whenever elem is a newly-created element. If elem is an existing\n * element which the user already knows about, then _updateWithArgs should be called.\n */\nfunction _updateWithArgsOrDispose<T extends Node>(elem: T, args: IDomArgs<T>): T {\n  try {\n    return _updateWithArgs(elem, args);\n  } catch (e) {\n    domDispose(elem);\n    throw e;\n  }\n}\n\nfunction _updateWithArg<T extends Node>(elem: T, arg: DomArg<T>): void {\n  if (typeof arg === 'function') {\n    const value: DomArg<T> = arg(elem);\n    // Skip the recursive call in the common case when the function returns nothing.\n    if (value !== undefined && value !== null) {\n      _updateWithArg(elem, value);\n    }\n  } else if (Array.isArray(arg)) {\n    _updateWithArgs(elem, arg);\n  } else if (arg === undefined || arg === null) {\n    // Nothing to do.\n  } else if (arg instanceof G.Node) {\n    elem.appendChild(arg);\n  } else if (typeof arg === 'object') {\n    attrsElem(elem as any, arg);\n  } else {\n    elem.appendChild(G.document.createTextNode(arg));\n  }\n}\n\n/**\n * Creates a DocumentFragment processing arguments the same way as the dom() function.\n */\nexport function frag(...args: IDomArgs<DocumentFragment>): DocumentFragment {\n  const elem = G.document.createDocumentFragment();\n  return _updateWithArgsOrDispose<DocumentFragment>(elem, args);\n}\n\n/**\n * Find the first element matching a selector; just an abbreviation for document.querySelector().\n */\nexport function find(selector: string) { return G.document.querySelector(selector); }\n\n/**\n * Find all elements matching a selector; just an abbreviation for document.querySelectorAll().\n */\nexport function findAll(selector: string) { return G.document.querySelectorAll(selector); }\n","import {BindableValue, subscribeElem} from './binding';\nimport {Holder, MultiHolder} from './dispose';\nimport {autoDisposeElem, domDispose} from './domDispose';\nimport {DomArg, DomMethod, frag} from './domImpl';\n\n// Use the browser globals in a way that allows replacing them with mocks in tests.\nimport {G} from './browserGlobals';\n\n// The type returned by domComputed(). It's actually an example of DomArg, but is given its own\n// name for use in places where a DomComputed is suitable but a general DomArg is not.\nexport type DomComputed = [Node, Node, DomMethod];\n\nexport type DomContents = Node | string | DomComputed | void | null | undefined | IDomContentsArray;\nexport interface IDomContentsArray extends Array<DomContents> {}\n\n\n/**\n * Replaces the content between nodeBefore and nodeAfter, which should be two siblings within the\n * same parent node. New content may be anything allowed as an argument to dom(), including null\n * to insert nothing. Runs disposers, if any, on all removed content.\n */\nexport function replaceContent(nodeBefore: Node, nodeAfter: Node, content: DomContents): void {\n  const elem = nodeBefore.parentNode;\n  if (elem) {\n    let next;\n    for (let n = nodeBefore.nextSibling; n && n !== nodeAfter; n = next) {\n      next = n.nextSibling;\n      domDispose(n);\n      elem.removeChild(n);\n    }\n    if (content) {\n      elem.insertBefore(content instanceof G.Node ? content : frag(content), nodeAfter);\n    }\n  }\n}\n\n/**\n * Appends dynamic DOM content to an element. The value may be an observable or function (from\n * which a computed is created), whose value will be passed to `contentFunc` which should return\n * DOM content. If the contentFunc is omitted, it defaults to identity, i.e. it's OK for the\n * observable or function to return DOM directly.\n *\n * The DOM content returned may be an element, string, array, or null. Whenever the observable\n * changes, previous content is disposed and removed, and new content added in its place.\n *\n * The following are roughly equivalent:\n *  (A) domComputed(nlinesObs, nlines => nlines > 1 ? dom('textarea') : dom('input'));\n *  (B) domComputed(use => use(nlinesObs) > 1 ? dom('textarea') : dom('input'));\n *  (C) domComputed(use => use(nlinesObs) > 1, isTall => isTall ? dom('textarea') : dom('input'));\n *\n * Here, (C) is best. Both (A) and (B) would rebuild DOM for any change in nlinesObs, but (C)\n * encapsulates meaningful changes in the observable, and only recreates DOM when necessary.\n *\n * Syntax (B), without the second argument, may be useful in cases of DOM depending on several\n * observables, e.g.\n *\n *    domComputed(use => use(readonlyObs) ? dom('div') :\n *                          (use(nlinesObs) > 1 ? dom('textarea') : dom('input')));\n *\n * If the argument is not an observable, domComputed() may but should not be used. The following\n * are equivalent:\n *\n *    dom(..., domComputed(listValue, list => `Have ${list.length} items`), ...)\n *    dom(..., `Have ${listValue.length} items`, ...)\n *\n * In this case, the latter is preferred as the clearly simpler one.\n *\n * @param valueObs: Observable or function for a computed.\n * @param contentFunc: Function called with the result of valueObs as the input, and\n *    returning DOM as output. If omitted, defaults to the identity function.\n */\n// Note that DomMethod is excluded because it prevents typescript from inferring the type of\n// the first argument when it's a function (and it's not useful).\nexport function domComputed(valueObs: BindableValue<Exclude<DomArg, DomMethod>>): DomComputed;\nexport function domComputed<T>(valueObs: BindableValue<T>, contentFunc: (val: T) => DomContents): DomComputed;\nexport function domComputed<T>(\n  valueObs: BindableValue<T>, contentFunc: (val: T) => DomContents = identity as any,\n): DomComputed {\n  const markerPre = G.document.createComment('a');\n  const markerPost = G.document.createComment('b');\n\n  // Function is added after markerPre and markerPost, so that it runs once they have already been\n  // attached to elem (the parent element).\n  return [markerPre, markerPost, (elem: Node) => {\n    subscribeElem(markerPost, valueObs,\n      (value) => replaceContent(markerPre, markerPost, contentFunc(value)));\n  }];\n}\n\n/**\n * Like domComputed(), but the callback gets an additional first argument, owner, which may be\n * used to take ownership of objects created by the callback. These will be disposed before each\n * new call to the callback, and when the containing DOM is disposed.\n *\n *    domComputedOwned(valueObs, (owner, value) => Editor.create(owner, value).renderSomething());\n */\nexport function domComputedOwned<T>(\n  valueObs: BindableValue<T>, contentFunc: (owner: MultiHolder, val: T) => DomContents\n): DomComputed {\n  const holder = Holder.create(null);\n  const [markerPre, markerPost, func] = domComputed(valueObs,\n    (val: T) => contentFunc(MultiHolder.create(holder), val));\n  autoDisposeElem(markerPost, holder);\n  return [markerPre, markerPost, func];\n}\n\nfunction identity<T>(arg: T): T { return arg; }\n\n/**\n * Conditionally appends DOM to an element. The value may be an observable or function (from which\n * a computed is created), whose value -- if truthy -- will be passed to `contentFunc` which\n * should return DOM content. If the value is falsy, DOM content is removed.\n *\n * Note that if the observable changes between different truthy values, contentFunc gets called\n * for each value, and previous content gets destroyed. To consider all truthy values the same,\n * use an observable that returns a proper boolean, e.g.\n *\n *    dom.maybe(use => Boolean(use(fooObs)), () => dom(...));\n *\n * As with domComputed(), dom.maybe() may but should not be used when the argument is not an\n * observable or function. The following are equivalent:\n *\n *    dom(..., dom.maybe(myValue, () => dom(...)));\n *    dom(..., myValue ? dom(...) : null);\n *\n * The latter is preferred for being simpler.\n *\n * @param boolValueObs: Observable or function for a computed.\n * @param contentFunc: Called with the result of boolValueObs when it is truthy. Should return DOM.\n */\nexport function maybe<T>(boolValueObs: BindableValue<T>,\n    contentFunc: (val: NonNullable<T>) => DomContents): DomComputed {\n  return domComputed(boolValueObs, (value) => value ? contentFunc(value!) : null);\n}\n\n/**\n * Like maybe(), but the callback gets an additional first argument, owner, which may be used to\n * take ownership of objects created by the callback. These will be disposed before each new call\n * to the callback, and when the condition becomes false or the containing DOM gets disposed.\n *\n *    maybeOwned(showEditor, (owner) => Editor.create(owner).renderSomething());\n */\nexport function maybeOwned<T>(boolValueObs: BindableValue<T>,\n    contentFunc: (owner: MultiHolder, val: NonNullable<T>) => DomContents): DomComputed {\n  return domComputedOwned(boolValueObs, (owner, value) => value ? contentFunc(owner, value!) : null);\n}\n","/**\n * UI components that can be inserted into dom().\n *\n * Components are created and inserted using dom.create():\n *\n *    dom('div',\n *      dom.create(MyWidget, ...myArgs),        // Calls MyWidget.create(owner, ...myArgs)\n *      dom.create(createMyWidget, ...myArgs),  // Calls createMyWidget(owner, ...myArgs)\n *    )\n *\n * The first argument may be a function, which is called directly, or a class with a .create()\n * static method, in which case that's what gets called.\n *\n * In both cases, the call gets a first argument of `owner` followed by the rest of the arguments\n * to dom.create(). The `owner` is a MultiHolder that will own this component. This works\n * naturally with any class that derives from Disposable, since it then has a suitable static\n * create() method.\n *\n * Function-based components may use owner to easily handle disposal. For example:\n *\n *    dom.create(createMyWidget)\n *    function createMyWidget(owner) {\n *      const foo = Foo.create(owner);\n *      return dom('div', foo.getTitle());\n *    }\n *\n * The `owner` argument is the main benefit of dom.create(). Logically, the owner is the DOM where\n * the component is attached. When the parent DOM element is disposed, so is the component.\n *\n *    [Explanation] To understand why the syntax is such, consider a potential alternative such as:\n *\n *       dom('div', _insert_(new Comp1()), _insert_(new Comp2(...args)))\n *\n *    In both cases, the constructor for Comp1 runs before the constructor for Comp2. What happens\n *    when Comp2's constructor throws an exception? In the second case, nothing yet owns the\n *    created Comp1 component, and it will never get cleaned up. With dom.create(), the DOM\n *    gets ownership of Comp1 early enough and will dispose it.\n *\n * A function component may return DOM directly. A class component returns the class instance,\n * which must have a .buildDom() method which will be called right after the constructor to get\n * the DOM. Note that buildDom is only called once.\n *\n * A function component may also return an object with .buildDom(). So these are equivalent:\n *\n *    dom.create(MyWidget)\n *    dom.create((owner) => MyWidget.create(owner))\n *\n * Note that ownership should be handled using the `owner` argument. Don't do this:\n *\n *    // NON-EXAMPLE: Nothing will dispose the created object:\n *    // dom.create(() => new MyWidget());\n *\n * The returned DOM may includes Nodes, strings, and domComputed() values, as well as arrays of\n * any of these. In other words, any DomArg goes except DomMethods. All the DOM returned will be\n * disposed when the containing element is disposed, followed by the `owner` itself.\n */\nimport {MultiHolder} from './dispose';\nimport {domComputedOwned, DomContents} from './domComputed';\n\nexport interface IDomComponent {\n  buildDom(): DomContents;\n}\n\nexport type DomComponentReturn = DomContents | IDomComponent;\n\nexport type IDomCreateFunc<Args extends any[]> = (owner: MultiHolder, ...args: Args) => DomComponentReturn;\n\n// It's not that we must have a constructor matching create(), but specifying type of new allows\n// type checking of classes that derive from Disposable, whereas matching only create() does not\n// (presumably because of the too much magic that Disposable does for the type of create()).\nexport interface IDomCreateClass<Args extends any[]> {\n  create: IDomCreateFunc<Args>;\n  new (...args: Args): DomComponentReturn;\n}\nexport type IDomCreator<Args extends any[]> = IDomCreateFunc<Args> | IDomCreateClass<Args>;\n\ntype DomCreatorArgs<T> =\n  T extends (owner: MultiHolder, ...args: infer P) => any ? P :\n  (T extends new (...args: infer P) => any ? P : never);\n\nexport function create<Fn extends IDomCreator<any[]>>(fn: Fn, ...args: DomCreatorArgs<Fn>): DomContents {\n  return domComputedOwned(null, (owner) => {\n    const value: DomComponentReturn = ('create' in fn) ?\n      (fn as IDomCreateClass<any[]>).create(owner, ...args) :\n      (fn as IDomCreateFunc<any[]>)(owner, ...args);\n    return (value && typeof value === 'object' && 'buildDom' in value) ?\n      value.buildDom() : value;\n  });\n}\n","/**\n * ObsArray extends a plain Observable to allow for more efficient observation of array changes.\n *\n * As for any array-valued Observable, when the contents of the observed array changes, the\n * listeners get called with new and previous values which are the same array. For simple changes,\n * such as those made with .push() and .splice() methods, ObsArray allows for more efficient\n * handling of the change by calling listeners with splice info in the third argument.\n *\n * This module also provides computedArray(), which allows mapping each item of an ObsArray\n * through a function, passing through splice info for efficient handling of small changes. It\n * also allows mapping an observable or a computed whose value is an ObsArray.\n *\n * There is no need or benefit in using computedArray() if you have a computed() that returns a\n * plain array. It is specifically for the case when you want to preserve the efficiency of\n * ObsArray when you map its values.\n *\n * Both ObsArray and ComputedArray may be used with disposable elements as their owners. E.g.\n *\n *    const arr = obsArray<D>();\n *    arr.push(D.create(arr, \"x\"), D.create(arr, \"y\"));\n *    arr.pop();      // Element \"y\" gets disposed.\n *    arr.dispose();  // Element \"x\" gets disposed.\n *\n *    const values = obsArray<string>();\n *    const compArr = computedArray<D>(values, (val, i, compArr) => D.create(compArr, val));\n *    values.push(\"foo\", \"bar\");      // D(\"foo\") and D(\"bar\") get created\n *    values.pop();                   // D(\"bar\") gets disposed.\n *    compArr.dispose();              // D(\"foo\") gets disposed.\n *\n * Note that only the pattern above works: obsArray (or compArray) may only be used to take\n * ownership of those disposables that are added to it as array elements.\n */\n\nimport {IDisposable, IDisposableOwnerT, setDisposeOwner} from './dispose';\nimport {Listener} from './emit';\nimport {BaseObservable, Observable} from './observable';\nimport {subscribe, Subscription} from './subscribe';\n\n/**\n * Either an observable or a plain array of T. This is useful for functions like dom.forEach()\n * which are convenient to have available for both.\n */\nexport type MaybeObsArray<T> = BaseObservable<T[]> | T[];\n\n/**\n * Info about a modification to ObsArray contents. It is included as a third argument to change\n * listeners when available. When not available, listeners should assume that the array changed\n * completely.\n */\nexport interface IObsArraySplice<T> {\n  start: number;\n  numAdded: number;\n  deleted: T[];\n}\n\nexport type ISpliceListener<T, C>  = (this: C, val: T[], prev: T[], change?: IObsArraySplice<T>) => void;\n\n/**\n * ObsArray<T> is essentially an array-valued observable. The main difference is that it may be\n * used as an owner for disposable array elements.\n */\nexport class ObsArray<T> extends BaseObservable<T[]> {\n  private _ownedItems?: Set<T & IDisposable> = undefined;\n\n  public addListener(callback: ISpliceListener<T, void>): Listener;\n  public addListener<C>(callback: ISpliceListener<T, C>, context: C): Listener;\n  public addListener(callback: ISpliceListener<T, any>, optContext?: any): Listener {\n    return super.addListener(callback, optContext);\n  }\n\n  public autoDispose(value: T & IDisposable): T & IDisposable {\n    if (!this._ownedItems) { this._ownedItems = new Set<T & IDisposable>(); }\n    this._ownedItems.add(value);\n    return value;\n  }\n\n  public dispose(): void {\n    if (this._ownedItems) {\n      for (const item of this.get() as Array<T & IDisposable>) {\n        if (this._ownedItems.delete(item)) {\n          item.dispose();\n        }\n      }\n      this._ownedItems = undefined;\n    }\n    super.dispose();\n  }\n\n  protected _setWithSplice(value: T[], splice: IObsArraySplice<T>): void {\n    return this._setWithArg(value, splice);\n  }\n\n  protected _disposeOwned(splice?: IObsArraySplice<T>): void {\n    if (!this._ownedItems) { return; }\n    if (splice) {\n      for (const item of splice.deleted as Array<T & IDisposable>) {\n        if (this._ownedItems.delete(item)) {\n          item.dispose();\n        }\n      }\n    } else {\n      const oldOwnedItems = this._ownedItems;\n\n      // Rebuild the _ownedItems array to have only the current items that were owned from before.\n      this._ownedItems = new Set<T & IDisposable>();\n      for (const item of this.get() as Array<T & IDisposable>) {\n        if (oldOwnedItems.delete(item)) {\n          this._ownedItems.add(item);\n        }\n      }\n      // After removing current items, dispose any remaining owned items.\n      for (const item of oldOwnedItems) {\n        item.dispose();\n      }\n    }\n  }\n}\n\n/**\n * MutableObsArray<T> adds array-like mutation methods which emit events with splice info, to\n * allow more efficient processing of such changes. It is created with obsArray<T>().\n */\nexport class MutableObsArray<T> extends ObsArray<T> {\n  public push(...args: T[]): number {\n    const value = this.get();\n    const start = value.length;\n    const newLen = value.push(...args);\n    this._setWithSplice(value, {start, numAdded: args.length, deleted: []});\n    return newLen;\n  }\n\n  public pop(): T|undefined {\n    const value = this.get();\n    if (value.length === 0) { return undefined; }\n    const ret = value.pop()!;\n    this._setWithSplice(value, {start: value.length, numAdded: 0, deleted: [ret]});\n    return ret;\n  }\n\n  public unshift(...args: T[]) {\n    const value = this.get();\n    const newLen = value.unshift(...args);\n    this._setWithSplice(value, {start: 0, numAdded: args.length, deleted: []});\n    return newLen;\n  }\n\n  public shift(): T|undefined {\n    const value = this.get();\n    if (value.length === 0) { return undefined; }\n    const ret = value.shift()!;\n    this._setWithSplice(value, {start: 0, numAdded: 0, deleted: [ret]});\n    return ret;\n  }\n\n  public splice(start: number, deleteCount: number = Infinity, ...newValues: T[]) {\n    const value = this.get();\n    const len = value.length;\n    start = Math.min(len, Math.max(0, start < 0 ? len + start : start));\n    const deleted = value.splice(start, deleteCount, ...newValues);\n    this._setWithSplice(value, {start, numAdded: newValues.length, deleted});\n    return deleted;\n  }\n}\n\n/**\n * Creates a new MutableObsArray with an optional initial value, defaulting to the empty array.\n * It is essentially the same as observable<T[]>, but with array-like mutation methods.\n */\nexport function obsArray<T>(value: T[] = []): MutableObsArray<T> {\n  return new MutableObsArray<T>(value);\n}\n\n/**\n * Returns true if val is an array-valued observable.\n */\nfunction isObsArray(val: BaseObservable<any>): val is BaseObservable<any[]> {\n  return Array.isArray(val.get());\n}\n\n/**\n * See computedArray() below for documentation.\n */\nexport class ComputedArray<T, U> extends ObsArray<U> {\n  private _sub: Subscription;\n  private _source?: BaseObservable<T[]>;\n  private _listener?: Listener;\n  private _lastSplice?: IObsArraySplice<T>|false;     // false is a marker that full rebuild is needed\n\n  constructor(\n    obsArr: BaseObservable<T[]> | Observable<BaseObservable<T[]>>,\n    private _mapper: (item: T, index: number, arr: ComputedArray<T, U>) => U,\n  ) {\n    super([]);\n    this._sub = isObsArray(obsArr) ?\n      subscribe(obsArr, (use) => this._syncMap(obsArr)) :\n      subscribe(obsArr, (use, obsArrayValue) => { use(obsArrayValue); return this._syncMap(obsArrayValue); });\n  }\n\n  public dispose() {\n    this._unsync();\n    this._sub.dispose();\n    super.dispose();\n  }\n\n  private _syncMap(obsArr: BaseObservable<T[]>): void {\n    if (this._source !== obsArr) {\n      this._unsync();\n      this._listener = obsArr.addListener(this._recordChange, this);\n      this._source = obsArr;\n      this._rebuild(obsArr);\n    } else if (this._lastSplice) {\n      // If we are syncing to the same array as before and recorded a single splice, apply it now.\n      this._applySplice(obsArr, this._lastSplice);\n    } else {\n      // If the full array changed or we had multiple splices, give up and rebuild.\n      this._rebuild(obsArr);\n    }\n    this._lastSplice = undefined;\n  }\n\n  private _unsync() {\n    if (this._listener) {\n      this._listener.dispose();\n      this._listener = undefined;\n      this._source = undefined;\n    }\n  }\n\n  private _rebuild(obsArr: BaseObservable<T[]>) {\n    this.set(obsArr.get().map((item: T, i: number) => this._mapper.call(undefined, item, i, this)));\n  }\n\n  private _applySplice(obsArr: BaseObservable<T[]>, change: IObsArraySplice<T>) {\n    const sourceArray: T[] = obsArr.get();\n    const newItems: U[] = [];\n    for (let i = change.start, n = 0; n < change.numAdded; i++, n++) {\n      newItems.push(this._mapper.call(undefined, sourceArray[i], i, this));\n    }\n    const items: U[] = this.get();\n    const deleted = items.splice(change.start, change.deleted.length, ...newItems);\n    this._setWithSplice(items, {start: change.start, numAdded: newItems.length, deleted});\n  }\n\n  private _recordChange(newItems: T[], oldItems: T[], change?: IObsArraySplice<T>): void {\n    // We don't attempt to handle efficiency multiple splices (it's quite hard in general, and\n    // even harder to know that it's more efficient than rebuilding), so if _lastSplice is set, we\n    // set it to a marker to mark the array for rebuilding.\n    if (change && this._lastSplice === undefined) {\n      this._lastSplice = change;\n    } else {\n      this._lastSplice = false;     // This is a marker that a full rebuild is needed.\n    }\n  }\n}\n\n/**\n * Returns an ObsArray that maps all elements of the passed-in ObsArray through a mapper function.\n * Also accepts an observable (e.g. a computed) whose value is an ObsArray. Usage:\n *\n *    computedArray(obsArray, mapper)\n *\n * The result is entirely analogous to:\n *\n *     computed((use) => use(obsArray).map(mapper))       // for ObsArray\n *     computed((use) => use(use(obsArray)).map(mapper))  // for Observable<ObsArray>\n *\n * The benefit of computedArray() is that a small change to the source array (e.g. one item\n * added or removed), causes a small change to the mapped array, rather than a full rebuild.\n *\n * This is useful with an ObsArray or with an observable whose value is an ObsArray, and also\n * when the computed array owns its disposable items.\n *\n * Note that the mapper function is called with (item, index, array) as for a standard\n * array.map(), but that the index is only accurate at the time of the call, and will stop\n * reflecting the true index if more items are inserted into the array later.\n */\nexport function computedArray<T, U>(\n  obsArr: BaseObservable<T[]> | Observable<BaseObservable<T[]>>,\n  mapper: (item: T, index: number, arr: ComputedArray<T, U>) => U,\n): ObsArray<U> {\n  return new ComputedArray<T, U>(obsArr, mapper);\n}\n\n/**\n * Returns a new observable representing an index into this array. It can be read and written, and\n * its value is clamped to be a valid index. The index is only null if the array is empty.\n *\n * As the array changes, the index is adjusted to continue pointing to the same element. If the\n * pointed element is deleted, the index is adjusted to after the deletion point.\n *\n * The returned observable has an additional .setLive(bool) method. While set to false, the\n * observable will not be adjusted as the array changes, except to keep it valid.\n */\nexport function makeLiveIndex<T>(owner: IDisposableOwnerT<LiveIndex>|null, obsArr: ObsArray<T>,\n                                 initialIndex: number = 0): LiveIndex {\n  return setDisposeOwner(owner, new LiveIndex(obsArr, initialIndex));\n}\n\nexport class LiveIndex extends Observable<number|null> {\n  private _listener: Listener;\n  private _isLive: boolean = true;\n\n  constructor(private _obsArray: ObsArray<any>, initialIndex: number = 0) {\n    super(null);\n    this.set(initialIndex);\n    this._listener = _obsArray.addListener(this._onArrayChange, this);\n  }\n\n  public set(index: number|null) {\n    // Clamp to [0, len) range of the observable array.\n    const len = this._obsArray.get().length;\n    super.set(len === 0 ? null : Math.max(0, Math.min(len - 1, index || 0)));\n  }\n\n  // Note that this feature comes from a rather obscure need, and it would be better if something\n  // similar were possible without making it an explicit feature.\n  public setLive(value: boolean): void {\n    this._isLive = value;\n  }\n\n  public dispose() {\n    this._listener.dispose();\n    super.dispose();\n  }\n\n  private _onArrayChange<T>(newItems: T[], oldItems: T[], change?: IObsArraySplice<T>) {\n    const idx = this.get();\n    this.set(\n      idx === null || !change ? 0 :\n      // Adjust the index if it was beyond the deleted region.\n      this._isLive && idx >= change.start + change.deleted.length ? idx + change.numAdded - change.deleted.length :\n      // Adjust the index if it was inside the deleted region (and not replaced).\n      this._isLive && idx >= change.start + change.numAdded ? change.start + change.numAdded :\n      idx);\n  }\n}\n","import {DomContents, replaceContent} from './domComputed';\nimport {autoDisposeElem, domDispose} from './domDispose';\nimport {frag} from './domImpl';\nimport {computedArray, MaybeObsArray, ObsArray} from './obsArray';\n\n// Use the browser globals in a way that allows replacing them with mocks in tests.\nimport {G} from './browserGlobals';\n\n/**\n * Creates DOM elements for each element of an observable array. As the array is changed, children\n * are added or removed. This works for any array-valued observable, and for obsArray() and\n * computedArray() it works more efficiently for simple changes.\n *\n * The given itemCreateFunc() should return a single DOM node for each item, or null to skip that\n * item. It is called for new items whenever they are spliced in, or the array replaced. The\n * forEach() owns the created nodes, and runs domDispose() on them when they are spliced out.\n *\n * If the created nodes are removed from their parent externally, forEach() will cope with it, but\n * will consider these elements as no longer owned, and will not run domDispose() on them.\n *\n * Note that itemCreateFunc() does not receive an index: an index would only be correct at the\n * time the item is created, and would not reflect further changes to the array.\n *\n * If you'd like to map the DOM node back to its source item, use dom.data() and dom.getData() in\n * itemCreateFunc().\n */\nexport function forEach<T>(obsArray: MaybeObsArray<T>, itemCreateFunc: (item: T) => Node|null): DomContents {\n  const markerPre = G.document.createComment('a');\n  const markerPost = G.document.createComment('b');\n  return [markerPre, markerPost, (elem: Node) => {\n    if (Array.isArray(obsArray)) {\n      replaceContent(markerPre, markerPost, obsArray.map(itemCreateFunc));\n      return;\n    }\n\n    const nodes: ObsArray<Node|null> = computedArray(obsArray, itemCreateFunc);\n\n    // Be sure to dispose the newly-created array when the DOM it's associated with is gone.\n    autoDisposeElem(markerPost, nodes);\n\n    nodes.addListener((newArr: Array<Node|null>, oldArr: Array<Node|null>, splice?) => {\n      if (splice) {\n        // Remove the elements that are gone.\n        for (const node of splice.deleted) {\n          if (node && node.parentNode === elem) {\n            domDispose(node);\n            elem.removeChild(node);\n          }\n        }\n\n        if (splice.numAdded > 0) {\n          // Find a valid child immediately following the spliced out portion, for DOM insertion.\n          const endIndex: number = splice.start + splice.numAdded;\n          let nextElem: Node = markerPost;\n          for (let i = endIndex; i < newArr.length; i++) {\n            const node = newArr[i];\n            if (node && node.parentNode === elem) {\n              nextElem = node;\n              break;\n            }\n          }\n\n          // Insert the new elements.\n          const content = frag(newArr.slice(splice.start, endIndex));\n          elem.insertBefore(content, nextElem);\n        }\n      } else {\n        replaceContent(markerPre, markerPost, newArr);\n      }\n    });\n    replaceContent(markerPre, markerPost, nodes.get());\n  }];\n}\n","/**\n * domevent provides a way to listen to DOM events, similar to JQuery's `on()` function. Its\n * methods are also exposed via the dom.js module, as `dom.on()`, etc.\n *\n * It is typically used as an argument to the dom() function:\n *\n *    dom('div', dom.on('click', (event, elem) => { ... }));\n *\n * When the div is disposed, the listener is automatically removed.\n *\n * The underlying interface to listen to an event is this:\n *\n *    let listener = dom.onElem(elem, 'click', (event, elem) => { ... });\n *\n * The callback is called with the event and the element to which it was attached. Unlike in\n * JQuery, the callback's return value is ignored. Use event.stopPropagation() and\n * event.preventDefault() explicitly if needed.\n *\n * To stop listening:\n *\n *    listener.dispose();\n *\n * Disposing the listener returned by .onElem() is the only way to stop listening to an event. You\n * can use autoDispose to stop listening automatically when subscribing in a Disposable object:\n *\n *    this.autoDispose(domevent.onElem(document, 'mouseup', callback));\n *\n * To listen to descendants of an element matching the given selector (what JQuery calls\n * \"delegated events\", see http://api.jquery.com/on/):\n *\n *    dom('div', dom.onMatch('.selector', 'click', (event, elem) => { ... }));\n * or\n *    let lis = domevent.onMatchElem(elem, '.selector', 'click', (event, el) => { ... });\n *\n * In this usage, the element passed to the callback will be a DOM element matching the given\n * selector. If there are multiple matches, the callback is only called for the innermost one.\n *\n * If you need to remove the callback on first call, here's a useful pattern:\n *    let lis = domevent.onElem(elem, 'mouseup', e => { lis.dispose(); other_work(); });\n */\n\nimport {IDisposable} from './dispose';\nimport {DomElementMethod, DomMethod} from './domImpl';\n\nexport type EventName = keyof HTMLElementEventMap;\nexport type EventType<E extends EventName|string> = E extends EventName ? HTMLElementEventMap[E] : Event;\n\nexport type EventCB<E extends Event = Event, T extends EventTarget = EventTarget> =\n  (this: void, event: E, elem: T) => void;\n\nfunction _findMatch(inner: Element, outer: Element, selector: string): Element|null {\n  for (let el: Element|null = inner; el && el !== outer; el = el.parentElement) {\n    if (el.matches(selector)) {\n      return el;\n    }\n  }\n  return null;\n}\n\nclass DomEventListener<E extends Event, T extends EventTarget> implements EventListenerObject, IDisposable {\n  constructor(protected elem: T,\n              protected eventType: string,\n              protected callback: EventCB<E, T>,\n              protected useCapture: boolean,\n              protected selector?: string) {\n    this.elem.addEventListener(this.eventType, this, this.useCapture);\n  }\n\n  public handleEvent(event: E) {\n    const cb = this.callback;\n    cb(event, this.elem);\n  }\n\n  public dispose() {\n    this.elem.removeEventListener(this.eventType, this, this.useCapture);\n  }\n}\n\nclass DomEventMatchListener<E extends Event> extends DomEventListener<E, EventTarget> {\n  public handleEvent(event: E) {\n    const elem = _findMatch(event.target as Element, this.elem as Element, this.selector!);\n    if (elem) {\n      const cb = this.callback;\n      cb(event, elem);\n    }\n  }\n}\n\n/**\n * Listen to a DOM event. The `on()` variant takes no `elem` argument, and may be used as an\n * argument to dom() function.\n * @param {DOMElement} elem: DOM Element to listen to.\n * @param {String} eventType: Event type to listen for (e.g. 'click').\n * @param {Function} callback: Callback to call as `callback(event, elem)`, where elem is `elem`.\n * @param [Boolean] options.useCapture: Add the listener in the capture phase. This should very\n *    rarely be useful (e.g. JQuery doesn't even offer it as an option).\n * @returns {Object} Listener object whose .dispose() method will remove the event listener.\n */\nexport function onElem<E extends EventName|string, T extends EventTarget>(\n  elem: T, eventType: E, callback: EventCB<EventType<E>, T>, {useCapture = false} = {}): IDisposable {\n  return new DomEventListener(elem, eventType, callback, useCapture);\n}\n\nexport function on<E extends EventName|string, T extends EventTarget>(\n  eventType: E, callback: EventCB<EventType<E>, T>, {useCapture = false} = {}): DomMethod<T> {\n  // tslint:disable-next-line:no-unused-expression\n  return (elem) => { new DomEventListener(elem, eventType, callback, useCapture); };\n}\n\n/**\n * Listen to a DOM event on descendants of the given elem matching the given selector. The\n * `onMatch()` variant takes no `elem` argument, and may be used as an argument to dom().\n * @param {DOMElement} elem: DOM Element to whose descendants to listen.\n * @param {String} selector: CSS selector string to filter elements that trigger this event.\n *    JQuery calls it \"delegated events\" (http://api.jquery.com/on/). The callback will only be\n *    called when the event occurs for an element matching the given selector. If there are\n *    multiple elements matching the selector, the callback is only called for the innermost one.\n * @param {String} eventType: Event type to listen for (e.g. 'click').\n * @param {Function} callback: Callback to call as `callback(event, elem)`, where elem is a\n *    descendent of `elem` which matches `selector`.\n * @param [Boolean] options.useCapture: Add the listener in the capture phase. This should very\n *    rarely be useful (e.g. JQuery doesn't even offer it as an option).\n * @returns {Object} Listener object whose .dispose() method will remove the event listener.\n */\nexport function onMatchElem(elem: EventTarget, selector: string, eventType: string,\n                            callback: EventCB, {useCapture = false} = {}): IDisposable {\n  return new DomEventMatchListener(elem, eventType, callback, useCapture, selector);\n}\nexport function onMatch(selector: string, eventType: string, callback: EventCB,\n                        {useCapture = false} = {}): DomElementMethod {\n  // tslint:disable-next-line:no-unused-expression\n  return (elem) => { new DomEventMatchListener(elem, eventType, callback, useCapture, selector); };\n}\n\nexport type KeyEventType = 'keypress' | 'keyup' | 'keydown';\n\nexport interface IKeyHandlers<T extends HTMLElement = HTMLElement> {\n  [key: string]: (this: void, ev: KeyboardEvent, elem: T) => void;\n}\n\n/**\n * Listen to key events (typically 'keydown' or 'keypress'), with specified per-key callbacks.\n * Key names are listed at https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values\n *\n * Methods onKeyPress() and onKeyDown() are intended to be used as arguments to dom().\n *\n * By default, handled events are stopped from bubbling with stopPropagation() and\n * preventDefault(). If, however, you register a key with a \"$\" suffix (i.e. \"Enter$\" instead of\n * \"Enter\"), then the event is allowed to bubble normally.\n *\n * When this handler is set on an element, we automatically ensure that tabindex attribute is set,\n * to allow this element to receive keyboard events.\n *\n * For example:\n *\n *    dom('input', ...\n *      dom.onKeyDown({\n *        Enter: (e, elem) => console.log(\"Enter pressed\"),\n *        Escape: (e, elem) => console.log(\"Escape pressed\"),\n *        Delete$: (e, elem) => console.log(\"Delete pressed, will bubble\"),\n *      })\n *    )\n */\nexport function onKeyElem<T extends HTMLElement>(\n  elem: T, evType: KeyEventType, keyHandlers: IKeyHandlers<T>,\n): IDisposable {\n  if (!(elem.tabIndex >= 0)) {                    // If tabIndex property is undefined or -1,\n    elem.setAttribute('tabindex', '-1');          // Set tabIndex attribute to make the element focusable.\n  }\n  return onElem(elem, evType, (ev, _elem) => {\n    const plainHandler = keyHandlers[ev.key];\n    const handler = plainHandler || keyHandlers[ev.key + '$'];\n    if (handler) {\n      if (plainHandler!) {\n        ev.stopPropagation();\n        ev.preventDefault();\n      }\n      handler(ev, _elem);\n    }\n  });\n}\n\nexport function onKeyPress<T extends HTMLElement>(keyHandlers: IKeyHandlers<T>): DomMethod<T> {\n  return (elem) => { onKeyElem(elem, 'keypress', keyHandlers); };\n}\n\nexport function onKeyDown<T extends HTMLElement>(keyHandlers: IKeyHandlers<T>): DomMethod<T> {\n  return (elem) => { onKeyElem(elem, 'keydown', keyHandlers); };\n}\n","/**\n * dom.js provides a way to build a DOM tree easily.\n *\n * E.g.\n *  import {dom} from 'grainjs';\n *  dom('a#link.c1.c2', {'href': url}, 'Hello ', dom('span', 'world'));\n *    creates Node <a id=\"link\" class=\"c1 c2\" href={{url}}Hello <span>world</span></a>.\n *\n *  dom.frag(dom('span', 'Hello'), ['blah', dom('div', 'world')])\n *    creates document fragment with <span>Hello</span>blah<div>world</div>.\n *\n * DOM can also be created and modified inline during creation:\n *  dom('a#id.c1',\n *      dom.cls('c2'), dom.attr('href', url),\n *      dom.text('Hello '), dom('span', dom.text('world')))\n *    creates Node <a id=\"link\" class=\"c1 c2\" href={{url}}Hello <span>world</span></a>,\n *    identical to the first example above.\n */\n\n// We keep various dom-related functions organized in private modules, but they are exposed here.\nexport * from './domImpl';\nexport * from './domComponent';\nexport * from './domComputed';\nexport * from './domDispose';\nexport * from './domForEach';\nexport * from './domMethods';\nexport * from './domevent';\n\nimport * as _domComponent from './domComponent';\nimport * as _domComputed from './domComputed';\nimport * as _domDispose from './domDispose';\nimport * as _domForEach from './domForEach';\nimport * as _domImpl from './domImpl';\nimport * as _domMethods from './domMethods';\n\nimport * as domevent from './domevent';\n\nimport {dom as _dom, IDomArgs, TagElem, TagName} from './domImpl';\n\n// We just want to re-export _domImpl.dom, but to allow adding methods to it in a typesafe way,\n// TypeScript wants us to declare a real function in the same file.\nexport function dom<Tag extends TagName>(tagString: Tag, ...args: IDomArgs<TagElem<Tag>>): TagElem<Tag> {\n  return _dom(tagString, ...args);\n}\n\n// Additionally export all methods as properties of dom() function.\nexport namespace dom {      // tslint:disable-line:no-namespace\n  export const svg             = _domImpl.svg;\n  export const frag            = _domImpl.frag;\n  export const update          = _domImpl.update;\n  export const find            = _domImpl.find;\n  export const findAll         = _domImpl.findAll;\n\n  export const domDispose      = _domDispose.domDispose;\n  export const onDisposeElem   = _domDispose.onDisposeElem;\n  export const onDispose       = _domDispose.onDispose;\n  export const autoDisposeElem = _domDispose.autoDisposeElem;\n  export const autoDispose     = _domDispose.autoDispose;\n\n  export const attrsElem       = _domMethods.attrsElem;\n  export const attrs           = _domMethods.attrs;\n  export const attrElem        = _domMethods.attrElem;\n  export const attr            = _domMethods.attr;\n  export const boolAttrElem    = _domMethods.boolAttrElem;\n  export const boolAttr        = _domMethods.boolAttr;\n  export const textElem        = _domMethods.textElem;\n  export const text            = _domMethods.text;\n  export const styleElem       = _domMethods.styleElem;\n  export const style           = _domMethods.style;\n  export const propElem        = _domMethods.propElem;\n  export const prop            = _domMethods.prop;\n  export const showElem        = _domMethods.showElem;\n  export const show            = _domMethods.show;\n  export const hideElem        = _domMethods.hideElem;\n  export const hide            = _domMethods.hide;\n  export const clsElem         = _domMethods.clsElem;\n  export const cls             = _domMethods.cls;\n  export const clsPrefix       = _domMethods.clsPrefix;\n  export const dataElem        = _domMethods.dataElem;\n  export const data            = _domMethods.data;\n  export const getData         = _domMethods.getData;\n  export const replaceContent  = _domComputed.replaceContent;\n  export const domComputed     = _domComputed.domComputed;\n  export const domComputedOwned = _domComputed.domComputedOwned;\n  export const maybe           = _domComputed.maybe;\n  export const maybeOwned      = _domComputed.maybeOwned;\n\n  export const forEach         = _domForEach.forEach;\n\n  export const create          = _domComponent.create;\n\n  export const onElem          = domevent.onElem;\n  export const on              = domevent.on;\n  export const onMatchElem     = domevent.onMatchElem;\n  export const onMatch         = domevent.onMatch;\n  export const onKeyElem       = domevent.onKeyElem;\n  export const onKeyPress      = domevent.onKeyPress;\n  export const onKeyDown       = domevent.onKeyDown;\n}\n","/**\n * pureComputed.js implements a variant of computed() suitable for use with a pure read function\n * (free of side-effects). A pureComputed is only subscribed to its dependencies when something is\n * subscribed to it. At other times, it is not subscribed to anything, and calls to `get()` will\n * recompute its value each time by calling its read() function.\n *\n * Its syntax and usage are otherwise exactly as for a computed.\n *\n * In addition to being cheaper when unused, a pureComputed() also avoids leaking memory when\n * unused (since it's not registered with dependencies), so it is not necessary to dispose it.\n */\n\nimport {DepItem} from './_computed_queue';\nimport {IKnockoutReadObservable} from './kowrap';\nimport {BaseObservable, Observable} from './observable';\nimport {ISubscribable, ISubscribableObs, Subscription, UseCB} from './subscribe';\n\nfunction _noWrite(): never {\n  throw new Error(\"Can't write to non-writable pureComputed\");\n}\n\nfunction _useFunc<T>(obs: BaseObservable<T>|IKnockoutReadObservable<T>): T {\n  return ('get' in obs) ? obs.get() : obs.peek();\n}\n\n// Constant empty array, which we use to avoid allocating new read-only empty arrays.\nconst emptyArray: ReadonlyArray<any> = [];\n\nexport class PureComputed<T> extends Observable<T> {\n  private _callback: (use: UseCB, ...args: any[]) => T;\n  private _write: (value: T) => void;\n  private _sub: Subscription|null;\n  private readonly _dependencies: ReadonlyArray<ISubscribableObs>;\n  private _inCall: boolean;\n\n  /**\n   * Internal constructor for a PureComputed. You should use pureComputed() function instead.\n   */\n  constructor(callback: (use: UseCB, ...args: any[]) => T, dependencies: ReadonlyArray<ISubscribable>) {\n    // At initialization we force an undefined value even though it's not of type T: it's not\n    // actually used as get() is overridden.\n    super(undefined as any);\n    this._callback = callback;\n    this._write = _noWrite;\n    this._dependencies = dependencies.length > 0 ? dependencies : emptyArray;\n    this._sub = null;\n    this._inCall = false;\n    this.setListenerChangeCB(this._onListenerChange, this);\n  }\n\n  public _getDepItem(): DepItem {\n    this._activate();\n    return this._sub!._getDepItem();\n  }\n\n  public get(): T {\n    if (!this._sub && !this._inCall) {\n      // _inCall member prevents infinite recursion.\n      this._inCall = true;\n      try {\n        const readArgs: [UseCB, ...any[]] = [_useFunc];\n        // Note that this attempts to optimize for speed.\n        for (let i = 0, len = this._dependencies.length; i < len; i++) {\n          readArgs[i + 1] = this._dependencies[i].get();\n        }\n        super.set(this._callback.apply(undefined, readArgs));\n      } finally {\n        this._inCall = false;\n      }\n    }\n    return super.get();\n  }\n\n  /**\n   * \"Sets\" the value of the pure computed by calling the write() callback if one was provided in\n   * the constructor. Throws an error if there was no such callback (not a \"writable\" computed).\n   * @param {Object} value: The value to pass to the write() callback.\n   */\n  public set(value: T): void { this._write(value); }\n\n  /**\n   * Set callback to call when this.set(value) is called, to make it a writable computed. If not\n   * set, attempting to write to this computed will throw an exception.\n   */\n  public onWrite(writeFunc: (value: T) => void): PureComputed<T> {\n    this._write = writeFunc;\n    return this;\n  }\n\n  /**\n   * Disposes the pureComputed, unsubscribing it from all observables it depends on.\n   */\n  public dispose() {\n    if (this._sub) {\n      this._sub.dispose();\n    }\n    // Truthy value for _sub prevents some errors after disposal, by avoiding activation or\n    // _directRead calls.\n    this._sub = true as any;\n    super.dispose();\n  }\n\n  private _activate(): void {\n    if (!this._sub) {\n      this._sub = new Subscription(this._read.bind(this), this._dependencies);\n    }\n  }\n\n  private _onListenerChange(hasListeners: boolean): void {\n    if (hasListeners) {\n      this._activate();\n    } else if (this._sub) {\n      this._sub.dispose();\n      this._sub = null;\n    }\n  }\n\n  private _read(use: any, ...args: any[]): void {\n    super.set(this._callback(use, ...args));\n  }\n}\n\n/**\n * This is the type-checking interface for pureComputed(), which allows TypeScript to do helpful\n * type-checking when using it. We can only support a fixed number of argumnets (explicit\n * dependencies), but 5 should almost always be enough.\n */\nexport function pureComputed<T>(cb: (use: UseCB) => T): PureComputed<T>;\n\nexport function pureComputed<A, T>(\n    a: Observable<A>,\n    cb: (use: UseCB, a: A) => T): PureComputed<T>;\n\nexport function pureComputed<A, B, T>(\n    a: Observable<A>, b: Observable<B>,\n    cb: (use: UseCB, a: A, b: B) => T): PureComputed<T>;\n\nexport function pureComputed<A, B, C, T>(\n    a: Observable<A>, b: Observable<B>, c: Observable<C>,\n    cb: (use: UseCB, a: A, b: B, c: C) => T): PureComputed<T>;\n\nexport function pureComputed<A, B, C, D, T>(\n    a: Observable<A>, b: Observable<B>, c: Observable<C>, d: Observable<D>,\n    cb: (use: UseCB, a: A, b: B, c: C, d: D) => T): PureComputed<T>;\n\nexport function pureComputed<A, B, C, D, E, T>(\n    a: Observable<A>, b: Observable<B>, c: Observable<C>, d: Observable<D>, e: Observable<E>,\n    cb: (use: UseCB, a: A, b: B, c: C, d: D, e: E) => T): PureComputed<T>;\n\n/**\n * Creates and returns a new PureComputed. The interface is identical to that of a Computed.\n */\nexport function pureComputed(...args: any[]): PureComputed<any> {\n  const readCb = args.pop();\n  // The cast helps ensure that Observable is compatible with ISubscribable abstraction that we use.\n  return new PureComputed<any>(readCb, args);\n}\n","/**\n * In-code styling for DOM components, inspired by Reacts Styled Components.\n *\n * Usage:\n *    const title = styled('h1', `\n *      font-size: 1.5em;\n *      text-align: center;\n *      color: palevioletred;\n *    `);\n *\n *    const wrapper = styled('section', `\n *      padding: 4em;\n *      background: papayawhip;\n *    `);\n *\n *    wrapper(title('Hello world'))\n *\n * This generates class names for title and wrapper, adds the styles to the document on first use,\n * and the result is equivalent to:\n *\n *    dom(`section.${wrapper.className}`, dom(`h1.${title.className}`, 'Hello world'));\n *\n * Calls to styled() should happen at the top level, at import time, in order to register all\n * styles upfront. Actual work happens the first time a style is needed to create an element.\n * Calling styled() elsewhere than at top level is wasteful and bad for performance.\n *\n * You may create a style that modifies an existing styled() or other component, e.g.\n *\n *    const title2 = styled(title, `font-size: 1rem; color: red;`);\n *\n * Calling title2('Foo') becomes equivalent to dom(`h1.${title.className}.${title2.className}`).\n *\n * Styles may incorporate other related styles by nesting them under the main one as follows:\n *\n *     const myButton = styled('button', `\n *       border-radius: 0.5rem;\n *       border: 1px solid grey;\n *       font-size: 1rem;\n *\n *       &:active {\n *         background: lightblue;\n *       }\n *       &-small {\n *         font-size: 0.6rem;\n *       }\n *     `);\n *\n * In nested styles, ampersand (&) gets replaced with the generated .className of the main element.\n *\n * The resulting styled component provides a .cls() helper to simplify using prefixed classes. It\n * behaves as dom.cls(), but prefixes the class names with the generated className of the main\n * element. E.g. for the example above,\n *\n *      myButton(myButton.cls('-small'), 'Test')\n *\n * creates a button with both the myButton style above, and the style specified under \"&-small\".\n *\n * Animations with @keyframes may be created with a unique name by using the keyframes() helper:\n *\n *    const rotate360 = keyframes(`\n *      from { transform: rotate(0deg); }\n *      to { transform: rotate(360deg); }\n *    `);\n *\n *    const Rotate = styled('div', `\n *      display: inline-block;\n *      animation: ${rotate360} 2s linear infinite;\n *    `);\n */\n\n// Use the browser globals in a way that allows replacing them with mocks in tests.\nimport {G} from './browserGlobals';\nimport {dom, IDomArgs, TagElem, TagName} from './domImpl';\nimport {cls, clsPrefix} from './domMethods';\n\n// The value returned by styled() matches the input (first argument), and also implements IClsName\n// interface.\nexport interface IClsName {\n  className: string;      // Name of the generated class.\n  cls: typeof cls;        // Helper like dom.cls(), but which prefixes classes by className.\n}\n\nexport type DomCreateFunc<R, Args extends IDomArgs<R> = IDomArgs<R>> = (...args: Args) => R;\n\n// See module documentation for details.\nexport function styled<Tag extends TagName>(tag: Tag, styles: string): DomCreateFunc<TagElem<Tag>> & IClsName;\nexport function styled<Args extends any[], R extends Element>(\n  creator: (...args: Args) => R, styles: string): typeof creator & IClsName;\nexport function styled(creator: any, styles: string): IClsName {\n  // Note that we intentionally minimize the work done when styled() is called; it's better to do\n  // any needed work on first use. That's when we will actually build the css rules.\n  const style = new StylePiece(styles);\n\n  // Creator function reflects the input, with only the addition of style.use() at the end. Note\n  // that it needs to be at the end because creator() might take special initial arguments.\n  const newCreator = (typeof creator === 'string') ?\n    (...args: any[]) => style.addToElem(dom(creator, ...args)) :\n    (...args: any[]) => style.addToElem(creator(...args));\n  return Object.assign(newCreator, {\n    className: style.className,\n    cls: clsPrefix.bind(null, style.className),\n  });\n}\n\n// Keyframes produces simply a string with the generated name. Note that these does not support\n// nesting or ampersand (&) handling, since these would be difficult and are entirely unneeded.\nexport function keyframes(styles: string): string {\n  return (new KeyframePiece(styles)).className;\n}\n\nfunction createCssRules(className: string, styles: string) {\n  // The first time we encounter a nested section, we know which are the \"main\" rules, and can\n  // wrap them appropriately.\n  const nestedStart = styles.search(/[^;]*\\{/);\n  const mainRules = nestedStart < 0 ? styles : styles.slice(0, nestedStart);\n  const nestedRules = nestedStart < 0 ? \"\" : styles.slice(nestedStart);\n\n  // At the end, replace all occurrences of & with \".className\".\n  return `& {${mainRules}\\n}\\n${nestedRules}`.replace(/&/g, className);\n}\n\n// Used by getNextStyleNum when running without a global window object (e.g. in tests).\nconst _global = {};\n\n// Keep the counter for next class attached to the global window object rather than be a library\n// global. This way if by some chance multiple instance of grainjs are loaded into the page, it\n// still works without overwriting class names (which would be extremely confusing).\nfunction getNextStyleNum() {\n  const g: any = G.window || _global;\n  return g._grainNextStyleNum = (g._grainNextStyleNum || 0) + 1;\n}\n\nclass StylePiece {\n  // Set of all StylePieces created but not yet mounted.\n  private static _unmounted = new Set<StylePiece>();\n\n  // Generate a new css class name. The suffix ensures that names like \"&2\" can't cause a conflict.\n  private static _nextClassName() { return `_grain${getNextStyleNum()}_`; }\n\n  // Mount all unmounted StylePieces, and clear the _unmounted map.\n  private static _mountAll(): void {\n    const sheet: string = Array.from(this._unmounted, (p) => p._createRules()).join(\"\\n\\n\");\n\n    G.document.head!.appendChild(dom('style', sheet));\n    for (const piece of this._unmounted) {\n      piece._mounted = true;\n    }\n    this._unmounted.clear();\n  }\n\n  public readonly className: string;\n  private _mounted: boolean = false;\n\n  constructor(protected _styles: string) {\n    this.className = StylePiece._nextClassName();\n    StylePiece._unmounted.add(this);\n  }\n\n  public addToElem<T extends Element>(elem: T): T {\n    if (!this._mounted) { StylePiece._mountAll(); }\n    elem.classList.add(this.className);\n    return elem;\n  }\n\n  protected _createRules(): string {\n    return createCssRules('.' + this.className, this._styles);\n  }\n}\n\nclass KeyframePiece extends StylePiece {\n  protected _createRules(): string {\n    return `@keyframes ${this.className} {${this._styles}}`;\n  }\n}\n","/**\n * General INPUT widget.\n */\nimport {bundleChanges, dom, IDomArgs, Observable, subscribe} from '../../index';\n\nexport interface IInputOptions {\n  onInput?: boolean;      // If set, update the observable on every keystroke.\n\n  // If given, this observable will be set whenever email is set, to elem.validity.valid boolean;\n  // see https://developer.mozilla.org/en-US/docs/Web/API/ValidityState.\n  isValid?: Observable<boolean>;\n}\n\n/**\n * Creates a input element tied to the given observable. The required options argument allows\n * controlling the behavior, see IInputOptions for details.\n *\n * This is intended for string input elements, with \"type\" such as text, email, url, password,\n * number, tel.\n *\n * Note that every change to the observable will affect the input element, but not every change to\n * the input element will affect the observable. Specifically, unless {onInput: true} is set, the\n * visible content may differ from the observable until the element loses focus or Enter is hit.\n *\n * Example usage:\n *    input(obs, {}, {type: 'text', placeholder: 'Your name...'});\n *    input(obs, {isValid: isValidObs}, {type: 'email', placeholder: 'Your email...'});\n *    input(obs, {onInput: true}, {type: 'text'});\n */\nexport function input(\n  obs: Observable<string>, options: IInputOptions, ...args: IDomArgs<HTMLInputElement>\n): HTMLInputElement {\n\n  const isValid = options.isValid;\n\n  function setValue(elem: HTMLInputElement) {\n    bundleChanges(() => {\n      obs.set(elem.value);\n      if (isValid) { isValid.set(elem.validity.valid); }\n    });\n  }\n\n  return dom('input', ...args,\n    dom.prop('value', obs),\n    (isValid ?\n      (elem) => dom.autoDisposeElem(elem,\n        subscribe(obs, (use) => isValid.set(elem.checkValidity()))) :\n      null),\n    options.onInput ? dom.on('input', (e, elem) => setValue(elem)) : null,\n    dom.on('change', (e, elem) => setValue(elem)),\n    dom.onKeyPress({Enter: (e, elem) => setValue(elem)}),\n  );\n}\n","/**\n * Select dropdown widget.\n */\nimport {dom, MaybeObsArray, Observable, subscribe} from '../../index';\n\nexport interface IOptionFull<T> {\n  value: T;\n  label: string;\n  disabled?: boolean;\n}\n\n// For string options, we can use a string for label and value, without wrapping into an object.\nexport type IOption<T> = (T & string) | IOptionFull<T>;\n\nfunction unwrapMaybeObsArray<T>(array: MaybeObsArray<T>): T[] {\n  return Array.isArray(array) ? array : array.get();\n}\n\nfunction getOptionValue<T>(option: IOption<T>): T {\n  return (typeof option === \"string\") ?\n    option : (option as IOptionFull<T>).value;\n}\n\n/**\n * Creates a select dropdown widget. The observable `obs` reflects the value of the selected\n * option, and `optionArray` is an array (regular or observable) of option values and labels.\n * These may be either strings, or {label, value, disabled} objects.\n *\n * The type of value may be any type at all; it is opaque to this widget.\n *\n * If obs is set to an invalid or disabled value, then defLabel option is used to determine the\n * label that the select box will show, blank by default.\n *\n * Usage:\n *    const fruit = observable(\"apple\");\n *    select(fruit, [\"apple\", \"banana\", \"mango\"]);\n *\n *    const employee = observable(17);\n *    const employees = obsArray<IOption<number>>([\n *      {value: 12, label: \"Bob\", disabled: true},\n *      {value: 17, label: \"Alice\"},\n *      {value: 21, label: \"Eve\"},\n *    ]);\n *    select(employee, employees, {defLabel: \"Select employee:\"});\n */\nexport function select<T>(obs: Observable<T>, optionArray: MaybeObsArray<IOption<T>>,\n                          options: {defLabel?: string} = {}) {\n  const {defLabel = \"\"} = options;\n  return dom('select',\n    // Include a hidden option to represent a default value. This one gets shown when none of the\n    // options are selected. This is more consistent when showing the first valid option.\n    dom('option', dom.hide(true), defLabel),\n\n    // Create all the option elements.\n    dom.forEach(optionArray, (option) => {\n      const obj: IOptionFull<T> = (typeof option === \"string\") ?\n        {value: option, label: option} : (option as IOptionFull<T>);\n      // Note we only set 'selected' when an <option> is created; we are not subscribing to obs.\n      // This is to reduce the amount of subscriptions, esp. when number of options is large.\n      return dom('option', {\n        disabled: obj.disabled,\n        selected: obj.value === obs.get(),\n      }, obj.label);\n    }),\n\n    // When obs changes, update select's value; we do it after <options> have been created.\n    // Note that autoDisposeElem ensures the subscription is disposed with the 'select' element.\n    (elem) => dom.autoDisposeElem(elem, subscribe(obs, (use, obsValue) => {\n      const arr = unwrapMaybeObsArray(optionArray);\n      const index = arr.findIndex((item) => getOptionValue(item) === obsValue);\n      elem.selectedIndex = index + 1;    // +1 for default option\n    })),\n\n    // When user picks a new item, use its value to update the observable.\n    dom.on('change', (e, elem) => {\n      const index = elem.selectedIndex;\n      const item = unwrapMaybeObsArray(optionArray)[index - 1];   // -1 for default option\n      // It should be impossible for the user to select an invalid option, but check just in case.\n      if (item !== undefined) {\n        obs.set(getOptionValue(item));\n      }\n    }),\n  );\n}\n","/**\n * emit.js implements an Emitter class which emits events to a list of listeners. Listeners are\n * simply functions to call, and \"emitting an event\" just calls those functions.\n *\n * This is similar to Backbone events, with more focus on efficiency. Both inserting and removing\n * listeners is constant time.\n *\n * To create an emitter:\n *    let emitter = new Emitter();\n *\n * To add a listener:\n *    let listener = fooEmitter.addListener(callback);\n * To remove a listener:\n *    listener.dispose();\n *\n * The only way to remove a listener is to dispose the Listener object returned by addListener().\n * You can often use autoDispose to do this automatically when subscribing in a constructor:\n *    this.autoDispose(fooEmitter.addListener(this.onFoo, this));\n *\n * To emit an event, call emit() with any number of arguments:\n *    emitter.emit(\"hello\", \"world\");\n */\n\n// Note about a possible alternative implementation.\n//\n// We could implement the same interface using an array of listeners. Certain issues apply, in\n// particular with removing listeners from inside emit(), and in ensuring that removals are\n// constant time on average. Such an implementation was attempted and timed. The result is that\n// compared to the linked-list implementation here, add/remove combination could be made nearly\n// twice faster (on average), while emit and add/remove/emit are consistently slightly slower.\n//\n// The implementation here was chosen based on those timings, and as the simpler one. For example,\n// on one setup (macbook, node4, 5-listener queue), add+remove take 0.1us, while add+remove+emit\n// take 3.82us. (In array-based implementation with same set up, add+remove is 0.06us, while\n// add+remove+emit is 4.80us.)\n\n// The private property name to hold next/prev pointers.\n\nfunction _noop() { /* noop */}\n\nexport type ListenerCB<T> = (this: T, ...args: any[]) => void;\nexport type ChangeCB = (hasListeners: boolean) => void;\n\n/**\n * This is an implementation of a doubly-linked list, with just the minimal functionality we need.\n */\nexport class LLink {\n  protected _next: LLink|null = null;\n  protected _prev: LLink|null = null;\n\n  constructor() {\n    // This immediate circular reference might be undesirable for GC, but might not matter, and\n    // makes the linked list implementation simpler and faster.\n    this._next = this;\n    this._prev = this;\n  }\n\n  public isDisposed(): boolean {\n    return !this._next;\n  }\n\n  protected _insertBefore(next: LLink, node: LLink): void {\n    const last = next._prev!;\n    last._next = node;\n    next._prev = node;\n    node._prev = last;\n    node._next = next;\n  }\n\n  protected _removeNode(node: LLink): void {\n    if (node._prev) {\n      node._prev._next = node._next;\n      node._next!._prev = node._prev;\n    }\n    node._prev = node._next = null;\n  }\n\n  protected _disposeList(): void {\n    let node: LLink = this;\n    let next = node._next;\n    while (next !== null) {\n      node._next = node._prev = null;\n      node = next;\n      next = node._next;\n    }\n  }\n}\n\nexport class Emitter extends LLink {\n  private _changeCB: ChangeCB = _noop;\n  private _changeCBContext: any = undefined;\n\n  /**\n   * Constructs an Emitter object.\n   */\n  constructor() { super(); }\n\n  /**\n   * Adds a listening callback to the list of functions to call on emit().\n   * @param {Function} callback: Function to call.\n   * @param {Object} optContext: Context for the function.\n   * @returns {Listener} Listener object. Its dispose() method removes the callback from the list.\n   */\n  public addListener<T>(callback: ListenerCB<T>, optContext?: T): Listener {\n    return new Listener(this, callback, optContext);\n  }\n\n  /**\n   * Calls all listener callbacks, passing all arguments to each of them.\n   */\n  public emit(...args: any[]): void {\n    Listener.callAll(this._next!, this, args);\n  }\n\n  /**\n   * Sets the single callback that would get called when a listener is added or removed.\n   * @param {Function} changeCB(hasListeners): Function to call after a listener is added or\n   *    removed. It's called with a boolean indicating whether this Emitter has any listeners.\n   *    Pass in `null` to unset the callback. Note that it can be called multiple times in a row\n   *    with hasListeners `true`.\n   */\n  public setChangeCB(changeCB: ChangeCB, optContext?: any): void {\n    this._changeCB = changeCB || _noop;\n    this._changeCBContext = optContext;\n  }\n\n  /**\n   * Helper used by Listener class, but not intended for public usage.\n   */\n  public _triggerChangeCB(): void {\n    this._changeCB.call(this._changeCBContext, this.hasListeners());\n  }\n\n  /**\n   * Returns whether this Emitter has any listeners.\n   */\n  public hasListeners(): boolean {\n    return this._next !== this;\n  }\n\n  /**\n   * Disposes the Emitter. It breaks references between the emitter and all the items, allowing\n   * for better garbage collection. It effectively disposes all current listeners.\n   */\n  public dispose(): void {\n    this._disposeList();\n    this._changeCB = _noop;\n    this._changeCBContext = undefined;\n  }\n}\n\n/**\n * Listener object wraps a callback added to an Emitter, allowing for O(1) removal when the\n * listener is disposed.\n */\nexport class Listener extends LLink {\n  public static callAll(begin: LLink, end: LLink, args: any[]): void {\n    while (begin !== end) {\n      const lis = begin as Listener;\n      lis.callback.call(lis.context, ...args);\n      begin = lis._next!;\n    }\n  }\n\n  constructor(private emitter: Emitter,\n              private callback: ListenerCB<any>,\n              private context?: any) {\n    super();\n    this._insertBefore(emitter, this);\n    emitter._triggerChangeCB();\n  }\n\n  public dispose(): void {\n    if (this.isDisposed()) { return; }\n    this._removeNode(this);\n    this.emitter._triggerChangeCB();\n  }\n}\n","\n/**\n * Returns f such that f() calls func(...boundArgs), i.e. optimizes `() => func(...boundArgs)`.\n * It is faster on node6 by 57-92%.\n */\nexport function bindB<R>(func: (...args: any[]) => R, b: any[]): () => R {\n  switch (b.length) {\n    case 0: return () => func();\n    case 1: return () => func(b[0]);\n    case 2: return () => func(b[0], b[1]);\n    case 3: return () => func(b[0], b[1], b[2]);\n    case 4: return () => func(b[0], b[1], b[2], b[3]);\n    case 5: return () => func(b[0], b[1], b[2], b[3], b[4]);\n    case 6: return () => func(b[0], b[1], b[2], b[3], b[4], b[5]);\n    case 7: return () => func(b[0], b[1], b[2], b[3], b[4], b[5], b[6]);\n    case 8: return () => func(b[0], b[1], b[2], b[3], b[4], b[5], b[6], b[7]);\n    default: return () => func.apply(undefined, b);\n  }\n}\n\n/**\n * Returns f such that f(unboundArg) calls func(unboundArg, ...boundArgs).\n * I.e. optimizes `(arg) => func(arg, ...boundArgs)`.\n * It is faster on node6 by 0-92%.\n */\nexport function bindUB<U, R>(func: (arg: U, ...args: any[]) => R, b: any[]): (arg: U) => R {\n  switch (b.length) {\n    case 0: return (arg) => func(arg);\n    case 1: return (arg) => func(arg, b[0]);\n    case 2: return (arg) => func(arg, b[0], b[1]);\n    case 3: return (arg) => func(arg, b[0], b[1], b[2]);\n    case 4: return (arg) => func(arg, b[0], b[1], b[2], b[3]);\n    case 5: return (arg) => func(arg, b[0], b[1], b[2], b[3], b[4]);\n    case 6: return (arg) => func(arg, b[0], b[1], b[2], b[3], b[4], b[5]);\n    case 7: return (arg) => func(arg, b[0], b[1], b[2], b[3], b[4], b[5], b[6]);\n    case 8: return (arg) => func(arg, b[0], b[1], b[2], b[3], b[4], b[5], b[6], b[7]);\n    default: return (arg) => func(arg, ...b);\n  }\n}\n\n/**\n * Returns f such that f(unboundArg) calls func(...boundArgs, unboundArg).\n * I.e. optimizes `(arg) => func(...boundArgs, arg)`.\n * It is faster on node6 by 0-92%.\n */\nexport function bindBU<R>(func: (...args: any[]) => R, b: any[]): (arg: any) => R {\n  switch (b.length) {\n    case 0: return (arg) => func(arg);\n    case 1: return (arg) => func(b[0], arg);\n    case 2: return (arg) => func(b[0], b[1], arg);\n    case 3: return (arg) => func(b[0], b[1], b[2], arg);\n    case 4: return (arg) => func(b[0], b[1], b[2], b[3], arg);\n    case 5: return (arg) => func(b[0], b[1], b[2], b[3], b[4], arg);\n    case 6: return (arg) => func(b[0], b[1], b[2], b[3], b[4], b[5], arg);\n    case 7: return (arg) => func(b[0], b[1], b[2], b[3], b[4], b[5], b[6], arg);\n    case 8: return (arg) => func(b[0], b[1], b[2], b[3], b[4], b[5], b[6], b[7], arg);\n    default: return (arg) => func(...b, arg);\n  }\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","/*!\n * Knockout JavaScript library v3.5.0\n * (c) The Knockout.js team - http://knockoutjs.com/\n * License: MIT (http://www.opensource.org/licenses/mit-license.php)\n */\n\n(function() {(function(p){var z=this||(0,eval)(\"this\"),w=z.document,R=z.navigator,v=z.jQuery,H=z.JSON;v||\"undefined\"===typeof jQuery||(v=jQuery);(function(p){\"function\"===typeof define&&define.amd?define([\"exports\",\"require\"],p):\"object\"===typeof exports&&\"object\"===typeof module?p(module.exports||exports):p(z.ko={})})(function(S,T){function K(a,c){return null===a||typeof a in W?a===c:!1}function X(b,c){var d;return function(){d||(d=a.a.setTimeout(function(){d=p;b()},c))}}function Y(b,c){var d;return function(){clearTimeout(d);\nd=a.a.setTimeout(b,c)}}function Z(a,c){c&&\"change\"!==c?\"beforeChange\"===c?this.oc(a):this.bb(a,c):this.pc(a)}function aa(a,c){null!==c&&c.s&&c.s()}function ba(a,c){var d=this.pd,e=d[t];e.qa||(this.Pb&&this.kb[c]?(d.tc(c,a,this.kb[c]),this.kb[c]=null,--this.Pb):e.F[c]||d.tc(c,a,e.G?{da:a}:d.Zc(a)),a.Ka&&a.fd())}var a=\"undefined\"!==typeof S?S:{};a.b=function(b,c){for(var d=b.split(\".\"),e=a,f=0;f<d.length-1;f++)e=e[d[f]];e[d[d.length-1]]=c};a.J=function(a,c,d){a[c]=d};a.version=\"3.5.0\";a.b(\"version\",\na.version);a.options={deferUpdates:!1,useOnlyNativeEvents:!1,foreachHidesDestroyed:!1};a.a=function(){function b(a,b){for(var c in a)f.call(a,c)&&b(c,a[c])}function c(a,b){if(b)for(var c in b)f.call(b,c)&&(a[c]=b[c]);return a}function d(a,b){a.__proto__=b;return a}function e(b,c,d,e){var k=b[c].match(n)||[];a.a.C(d.match(n),function(b){a.a.Oa(k,b,e)});b[c]=k.join(\" \")}var f=Object.prototype.hasOwnProperty,g={__proto__:[]}instanceof Array,h=\"function\"===typeof Symbol,m={},l={};m[R&&/Firefox\\/2/i.test(R.userAgent)?\n\"KeyboardEvent\":\"UIEvents\"]=[\"keyup\",\"keydown\",\"keypress\"];m.MouseEvents=\"click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave\".split(\" \");b(m,function(a,b){if(b.length)for(var c=0,d=b.length;c<d;c++)l[b[c]]=a});var k={propertychange:!0},q=w&&function(){for(var a=3,b=w.createElement(\"div\"),c=b.getElementsByTagName(\"i\");b.innerHTML=\"\\x3c!--[if gt IE \"+ ++a+\"]><i></i><![endif]--\\x3e\",c[0];);return 4<a?a:p}(),n=/\\S+/g,r;return{Ic:[\"authenticity_token\",/^__RequestVerificationToken(_.*)?$/],\nC:function(a,b,c){for(var d=0,e=a.length;d<e;d++)b.call(c,a[d],d,a)},A:\"function\"==typeof Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b)}:function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},Lb:function(a,b,c){for(var d=0,e=a.length;d<e;d++)if(b.call(c,a[d],d,a))return a[d];return p},hb:function(b,c){var d=a.a.A(b,c);0<d?b.splice(d,1):0===d&&b.shift()},vc:function(b){var c=[];b&&a.a.C(b,function(b){0>a.a.A(c,b)&&c.push(b)});return c},Mb:function(a,\nb,c){var d=[];if(a)for(var e=0,k=a.length;e<k;e++)d.push(b.call(c,a[e],e));return d},fb:function(a,b,c){var d=[];if(a)for(var e=0,k=a.length;e<k;e++)b.call(c,a[e],e)&&d.push(a[e]);return d},gb:function(a,b){if(b instanceof Array)a.push.apply(a,b);else for(var c=0,d=b.length;c<d;c++)a.push(b[c]);return a},Oa:function(b,c,d){var e=a.a.A(a.a.$b(b),c);0>e?d&&b.push(c):d||b.splice(e,1)},Ba:g,extend:c,setPrototypeOf:d,zb:g?d:c,O:b,Ha:function(a,b,c){if(!a)return a;var d={},e;for(e in a)f.call(a,e)&&(d[e]=\nb.call(c,a[e],e,a));return d},Sb:function(b){for(;b.firstChild;)a.removeNode(b.firstChild)},Xb:function(b){b=a.a.la(b);for(var c=(b[0]&&b[0].ownerDocument||w).createElement(\"div\"),d=0,e=b.length;d<e;d++)c.appendChild(a.na(b[d]));return c},Ca:function(b,c){for(var d=0,e=b.length,k=[];d<e;d++){var f=b[d].cloneNode(!0);k.push(c?a.na(f):f)}return k},ua:function(b,c){a.a.Sb(b);if(c)for(var d=0,e=c.length;d<e;d++)b.appendChild(c[d])},Wc:function(b,c){var d=b.nodeType?[b]:b;if(0<d.length){for(var e=d[0],\nk=e.parentNode,f=0,l=c.length;f<l;f++)k.insertBefore(c[f],e);f=0;for(l=d.length;f<l;f++)a.removeNode(d[f])}},Ua:function(a,b){if(a.length){for(b=8===b.nodeType&&b.parentNode||b;a.length&&a[0].parentNode!==b;)a.splice(0,1);for(;1<a.length&&a[a.length-1].parentNode!==b;)a.length--;if(1<a.length){var c=a[0],d=a[a.length-1];for(a.length=0;c!==d;)a.push(c),c=c.nextSibling;a.push(d)}}return a},Yc:function(a,b){7>q?a.setAttribute(\"selected\",b):a.selected=b},Cb:function(a){return null===a||a===p?\"\":a.trim?\na.trim():a.toString().replace(/^[\\s\\xa0]+|[\\s\\xa0]+$/g,\"\")},Td:function(a,b){a=a||\"\";return b.length>a.length?!1:a.substring(0,b.length)===b},ud:function(a,b){if(a===b)return!0;if(11===a.nodeType)return!1;if(b.contains)return b.contains(1!==a.nodeType?a.parentNode:a);if(b.compareDocumentPosition)return 16==(b.compareDocumentPosition(a)&16);for(;a&&a!=b;)a=a.parentNode;return!!a},Rb:function(b){return a.a.ud(b,b.ownerDocument.documentElement)},jd:function(b){return!!a.a.Lb(b,a.a.Rb)},P:function(a){return a&&\na.tagName&&a.tagName.toLowerCase()},zc:function(b){return a.onError?function(){try{return b.apply(this,arguments)}catch(c){throw a.onError&&a.onError(c),c;}}:b},setTimeout:function(b,c){return setTimeout(a.a.zc(b),c)},Fc:function(b){setTimeout(function(){a.onError&&a.onError(b);throw b;},0)},H:function(b,c,d){var e=a.a.zc(d);d=k[c];if(a.options.useOnlyNativeEvents||d||!v)if(d||\"function\"!=typeof b.addEventListener)if(\"undefined\"!=typeof b.attachEvent){var f=function(a){e.call(b,a)},l=\"on\"+c;b.attachEvent(l,\nf);a.a.I.za(b,function(){b.detachEvent(l,f)})}else throw Error(\"Browser doesn't support addEventListener or attachEvent\");else b.addEventListener(c,e,!1);else r||(r=\"function\"==typeof v(b).on?\"on\":\"bind\"),v(b)[r](c,e)},Fb:function(b,c){if(!b||!b.nodeType)throw Error(\"element must be a DOM node when calling triggerEvent\");var d;\"input\"===a.a.P(b)&&b.type&&\"click\"==c.toLowerCase()?(d=b.type,d=\"checkbox\"==d||\"radio\"==d):d=!1;if(a.options.useOnlyNativeEvents||!v||d)if(\"function\"==typeof w.createEvent)if(\"function\"==\ntypeof b.dispatchEvent)d=w.createEvent(l[c]||\"HTMLEvents\"),d.initEvent(c,!0,!0,z,0,0,0,0,0,!1,!1,!1,!1,0,b),b.dispatchEvent(d);else throw Error(\"The supplied element doesn't support dispatchEvent\");else if(d&&b.click)b.click();else if(\"undefined\"!=typeof b.fireEvent)b.fireEvent(\"on\"+c);else throw Error(\"Browser doesn't support triggering events\");else v(b).trigger(c)},c:function(b){return a.N(b)?b():b},$b:function(b){return a.N(b)?b.w():b},Eb:function(b,c,d){var k;c&&(\"object\"===typeof b.classList?\n(k=b.classList[d?\"add\":\"remove\"],a.a.C(c.match(n),function(a){k.call(b.classList,a)})):\"string\"===typeof b.className.baseVal?e(b.className,\"baseVal\",c,d):e(b,\"className\",c,d))},Ab:function(b,c){var d=a.a.c(c);if(null===d||d===p)d=\"\";var e=a.h.firstChild(b);!e||3!=e.nodeType||a.h.nextSibling(e)?a.h.ua(b,[b.ownerDocument.createTextNode(d)]):e.data=d;a.a.zd(b)},Xc:function(a,b){a.name=b;if(7>=q)try{var c=a.name.replace(/[&<>'\"]/g,function(a){return\"&#\"+a.charCodeAt(0)+\";\"});a.mergeAttributes(w.createElement(\"<input name='\"+\nc+\"'/>\"),!1)}catch(d){}},zd:function(a){9<=q&&(a=1==a.nodeType?a:a.parentNode,a.style&&(a.style.zoom=a.style.zoom))},vd:function(a){if(q){var b=a.style.width;a.style.width=0;a.style.width=b}},Od:function(b,c){b=a.a.c(b);c=a.a.c(c);for(var d=[],e=b;e<=c;e++)d.push(e);return d},la:function(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b},Da:function(a){return h?Symbol(a):a},Xd:6===q,Yd:7===q,W:q,Kc:function(b,c){for(var d=a.a.la(b.getElementsByTagName(\"input\")).concat(a.a.la(b.getElementsByTagName(\"textarea\"))),\ne=\"string\"==typeof c?function(a){return a.name===c}:function(a){return c.test(a.name)},k=[],f=d.length-1;0<=f;f--)e(d[f])&&k.push(d[f]);return k},Md:function(b){return\"string\"==typeof b&&(b=a.a.Cb(b))?H&&H.parse?H.parse(b):(new Function(\"return \"+b))():null},fc:function(b,c,d){if(!H||!H.stringify)throw Error(\"Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js\");\nreturn H.stringify(a.a.c(b),c,d)},Nd:function(c,d,e){e=e||{};var k=e.params||{},f=e.includeFields||this.Ic,l=c;if(\"object\"==typeof c&&\"form\"===a.a.P(c))for(var l=c.action,h=f.length-1;0<=h;h--)for(var g=a.a.Kc(c,f[h]),m=g.length-1;0<=m;m--)k[g[m].name]=g[m].value;d=a.a.c(d);var n=w.createElement(\"form\");n.style.display=\"none\";n.action=l;n.method=\"post\";for(var q in d)c=w.createElement(\"input\"),c.type=\"hidden\",c.name=q,c.value=a.a.fc(a.a.c(d[q])),n.appendChild(c);b(k,function(a,b){var c=w.createElement(\"input\");\nc.type=\"hidden\";c.name=a;c.value=b;n.appendChild(c)});w.body.appendChild(n);e.submitter?e.submitter(n):n.submit();setTimeout(function(){n.parentNode.removeChild(n)},0)}}}();a.b(\"utils\",a.a);a.b(\"utils.arrayForEach\",a.a.C);a.b(\"utils.arrayFirst\",a.a.Lb);a.b(\"utils.arrayFilter\",a.a.fb);a.b(\"utils.arrayGetDistinctValues\",a.a.vc);a.b(\"utils.arrayIndexOf\",a.a.A);a.b(\"utils.arrayMap\",a.a.Mb);a.b(\"utils.arrayPushAll\",a.a.gb);a.b(\"utils.arrayRemoveItem\",a.a.hb);a.b(\"utils.cloneNodes\",a.a.Ca);a.b(\"utils.createSymbolOrString\",\na.a.Da);a.b(\"utils.extend\",a.a.extend);a.b(\"utils.fieldsIncludedWithJsonPost\",a.a.Ic);a.b(\"utils.getFormFields\",a.a.Kc);a.b(\"utils.objectMap\",a.a.Ha);a.b(\"utils.peekObservable\",a.a.$b);a.b(\"utils.postJson\",a.a.Nd);a.b(\"utils.parseJson\",a.a.Md);a.b(\"utils.registerEventHandler\",a.a.H);a.b(\"utils.stringifyJson\",a.a.fc);a.b(\"utils.range\",a.a.Od);a.b(\"utils.toggleDomNodeCssClass\",a.a.Eb);a.b(\"utils.triggerEvent\",a.a.Fb);a.b(\"utils.unwrapObservable\",a.a.c);a.b(\"utils.objectForEach\",a.a.O);a.b(\"utils.addOrRemoveItem\",\na.a.Oa);a.b(\"utils.setTextContent\",a.a.Ab);a.b(\"unwrap\",a.a.c);Function.prototype.bind||(Function.prototype.bind=function(a){var c=this;if(1===arguments.length)return function(){return c.apply(a,arguments)};var d=Array.prototype.slice.call(arguments,1);return function(){var e=d.slice(0);e.push.apply(e,arguments);return c.apply(a,e)}});a.a.g=new function(){var b=0,c=\"__ko__\"+(new Date).getTime(),d={},e,f;a.a.W?(e=function(a,e){var f=a[c];if(!f||\"null\"===f||!d[f]){if(!e)return p;f=a[c]=\"ko\"+b++;d[f]=\n{}}return d[f]},f=function(a){var b=a[c];return b?(delete d[b],a[c]=null,!0):!1}):(e=function(a,b){var d=a[c];!d&&b&&(d=a[c]={});return d},f=function(a){return a[c]?(delete a[c],!0):!1});return{get:function(a,b){var c=e(a,!1);return c&&c[b]},set:function(a,b,c){(a=e(a,c!==p))&&(a[b]=c)},Tb:function(a,b,c){a=e(a,!0);return a[b]||(a[b]=c)},clear:f,Z:function(){return b++ +c}}};a.b(\"utils.domData\",a.a.g);a.b(\"utils.domData.clear\",a.a.g.clear);a.a.I=new function(){function b(b,c){var d=a.a.g.get(b,e);\nd===p&&c&&(d=[],a.a.g.set(b,e,d));return d}function c(c){var e=b(c,!1);if(e)for(var e=e.slice(0),f=0;f<e.length;f++)e[f](c);a.a.g.clear(c);a.a.I.cleanExternalData(c);g[c.nodeType]&&d(c.childNodes,!0)}function d(b,d){for(var e=[],k,f=0;f<b.length;f++)if(!d||8===b[f].nodeType)if(c(e[e.length]=k=b[f]),b[f]!==k)for(;f--&&-1==a.a.A(e,b[f]););}var e=a.a.g.Z(),f={1:!0,8:!0,9:!0},g={1:!0,9:!0};return{za:function(a,c){if(\"function\"!=typeof c)throw Error(\"Callback must be a function\");b(a,!0).push(c)},xb:function(c,\nd){var f=b(c,!1);f&&(a.a.hb(f,d),0==f.length&&a.a.g.set(c,e,p))},na:function(a){f[a.nodeType]&&(c(a),g[a.nodeType]&&d(a.getElementsByTagName(\"*\")));return a},removeNode:function(b){a.na(b);b.parentNode&&b.parentNode.removeChild(b)},cleanExternalData:function(a){v&&\"function\"==typeof v.cleanData&&v.cleanData([a])}}};a.na=a.a.I.na;a.removeNode=a.a.I.removeNode;a.b(\"cleanNode\",a.na);a.b(\"removeNode\",a.removeNode);a.b(\"utils.domNodeDisposal\",a.a.I);a.b(\"utils.domNodeDisposal.addDisposeCallback\",a.a.I.za);\na.b(\"utils.domNodeDisposal.removeDisposeCallback\",a.a.I.xb);(function(){var b=[0,\"\",\"\"],c=[1,\"<table>\",\"</table>\"],d=[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],e=[1,\"<select multiple='multiple'>\",\"</select>\"],f={thead:c,tbody:c,tfoot:c,tr:[2,\"<table><tbody>\",\"</tbody></table>\"],td:d,th:d,option:e,optgroup:e},g=8>=a.a.W;a.a.ta=function(c,d){var e;if(v)if(v.parseHTML)e=v.parseHTML(c,d)||[];else{if((e=v.clean([c],d))&&e[0]){for(var k=e[0];k.parentNode&&11!==k.parentNode.nodeType;)k=k.parentNode;\nk.parentNode&&k.parentNode.removeChild(k)}}else{(e=d)||(e=w);var k=e.parentWindow||e.defaultView||z,q=a.a.Cb(c).toLowerCase(),n=e.createElement(\"div\"),r;r=(q=q.match(/^(?:\\x3c!--.*?--\\x3e\\s*?)*?<([a-z]+)[\\s>]/))&&f[q[1]]||b;q=r[0];r=\"ignored<div>\"+r[1]+c+r[2]+\"</div>\";\"function\"==typeof k.innerShiv?n.appendChild(k.innerShiv(r)):(g&&e.body.appendChild(n),n.innerHTML=r,g&&n.parentNode.removeChild(n));for(;q--;)n=n.lastChild;e=a.a.la(n.lastChild.childNodes)}return e};a.a.Ld=function(b,c){var d=a.a.ta(b,\nc);return d.length&&d[0].parentElement||a.a.Xb(d)};a.a.dc=function(b,c){a.a.Sb(b);c=a.a.c(c);if(null!==c&&c!==p)if(\"string\"!=typeof c&&(c=c.toString()),v)v(b).html(c);else for(var d=a.a.ta(c,b.ownerDocument),e=0;e<d.length;e++)b.appendChild(d[e])}})();a.b(\"utils.parseHtmlFragment\",a.a.ta);a.b(\"utils.setHtml\",a.a.dc);a.aa=function(){function b(c,e){if(c)if(8==c.nodeType){var f=a.aa.Tc(c.nodeValue);null!=f&&e.push({sd:c,Jd:f})}else if(1==c.nodeType)for(var f=0,g=c.childNodes,h=g.length;f<h;f++)b(g[f],\ne)}var c={};return{Wb:function(a){if(\"function\"!=typeof a)throw Error(\"You can only pass a function to ko.memoization.memoize()\");var b=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);c[b]=a;return\"\\x3c!--[ko_memo:\"+b+\"]--\\x3e\"},ad:function(a,b){var f=c[a];if(f===p)throw Error(\"Couldn't find any memo with ID \"+a+\". Perhaps it's already been unmemoized.\");try{return f.apply(null,b||[]),!0}finally{delete c[a]}},bd:function(c,e){var f=\n[];b(c,f);for(var g=0,h=f.length;g<h;g++){var m=f[g].sd,l=[m];e&&a.a.gb(l,e);a.aa.ad(f[g].Jd,l);m.nodeValue=\"\";m.parentNode&&m.parentNode.removeChild(m)}},Tc:function(a){return(a=a.match(/^\\[ko_memo\\:(.*?)\\]$/))?a[1]:null}}}();a.b(\"memoization\",a.aa);a.b(\"memoization.memoize\",a.aa.Wb);a.b(\"memoization.unmemoize\",a.aa.ad);a.b(\"memoization.parseMemoText\",a.aa.Tc);a.b(\"memoization.unmemoizeDomNodeAndDescendants\",a.aa.bd);a.ma=function(){function b(){if(f)for(var b=f,c=0,d;h<f;)if(d=e[h++]){if(h>b){if(5E3<=\n++c){h=f;a.a.Fc(Error(\"'Too much recursion' after processing \"+c+\" task groups.\"));break}b=f}try{d()}catch(g){a.a.Fc(g)}}}function c(){b();h=f=e.length=0}var d,e=[],f=0,g=1,h=0;z.MutationObserver?d=function(a){var b=w.createElement(\"div\");(new MutationObserver(a)).observe(b,{attributes:!0});return function(){b.classList.toggle(\"foo\")}}(c):d=w&&\"onreadystatechange\"in w.createElement(\"script\")?function(a){var b=w.createElement(\"script\");b.onreadystatechange=function(){b.onreadystatechange=null;w.documentElement.removeChild(b);\nb=null;a()};w.documentElement.appendChild(b)}:function(a){setTimeout(a,0)};return{scheduler:d,yb:function(b){f||a.ma.scheduler(c);e[f++]=b;return g++},cancel:function(a){a=a-(g-f);a>=h&&a<f&&(e[a]=null)},resetForTesting:function(){var a=f-h;h=f=e.length=0;return a},Rd:b}}();a.b(\"tasks\",a.ma);a.b(\"tasks.schedule\",a.ma.yb);a.b(\"tasks.runEarly\",a.ma.Rd);a.Ta={throttle:function(b,c){b.throttleEvaluation=c;var d=null;return a.$({read:b,write:function(e){clearTimeout(d);d=a.a.setTimeout(function(){b(e)},\nc)}})},rateLimit:function(a,c){var d,e,f;\"number\"==typeof c?d=c:(d=c.timeout,e=c.method);a.Hb=!1;f=\"function\"==typeof e?e:\"notifyWhenChangesStop\"==e?Y:X;a.tb(function(a){return f(a,d,c)})},deferred:function(b,c){if(!0!==c)throw Error(\"The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.\");b.Hb||(b.Hb=!0,b.tb(function(c){var e,f=!1;return function(){if(!f){a.ma.cancel(e);e=a.ma.yb(c);try{f=!0,b.notifySubscribers(p,\"dirty\")}finally{f=\n!1}}}}))},notify:function(a,c){a.equalityComparer=\"always\"==c?null:K}};var W={undefined:1,\"boolean\":1,number:1,string:1};a.b(\"extenders\",a.Ta);a.gc=function(b,c,d){this.da=b;this.kc=c;this.lc=d;this.Ib=!1;this.ab=this.Jb=null;a.J(this,\"dispose\",this.s);a.J(this,\"disposeWhenNodeIsRemoved\",this.l)};a.gc.prototype.s=function(){this.Ib||(this.ab&&a.a.I.xb(this.Jb,this.ab),this.Ib=!0,this.lc(),this.da=this.kc=this.lc=this.Jb=this.ab=null)};a.gc.prototype.l=function(b){this.Jb=b;a.a.I.za(b,this.ab=this.s.bind(this))};\na.R=function(){a.a.zb(this,D);D.ob(this)};var D={ob:function(a){a.S={change:[]};a.rc=1},subscribe:function(b,c,d){var e=this;d=d||\"change\";var f=new a.gc(e,c?b.bind(c):b,function(){a.a.hb(e.S[d],f);e.cb&&e.cb(d)});e.Qa&&e.Qa(d);e.S[d]||(e.S[d]=[]);e.S[d].push(f);return f},notifySubscribers:function(b,c){c=c||\"change\";\"change\"===c&&this.Gb();if(this.Wa(c)){var d=\"change\"===c&&this.dd||this.S[c].slice(0);try{a.v.wc();for(var e=0,f;f=d[e];++e)f.Ib||f.kc(b)}finally{a.v.end()}}},mb:function(){return this.rc},\nCd:function(a){return this.mb()!==a},Gb:function(){++this.rc},tb:function(b){var c=this,d=a.N(c),e,f,g,h,m;c.bb||(c.bb=c.notifySubscribers,c.notifySubscribers=Z);var l=b(function(){c.Ka=!1;d&&h===c&&(h=c.mc?c.mc():c());var a=f||m&&c.qb(g,h);m=f=e=!1;a&&c.bb(g=h)});c.pc=function(a,b){b&&c.Ka||(m=!b);c.dd=c.S.change.slice(0);c.Ka=e=!0;h=a;l()};c.oc=function(a){e||(g=a,c.bb(a,\"beforeChange\"))};c.qc=function(){m=!0};c.fd=function(){c.qb(g,c.w(!0))&&(f=!0)}},Wa:function(a){return this.S[a]&&this.S[a].length},\nAd:function(b){if(b)return this.S[b]&&this.S[b].length||0;var c=0;a.a.O(this.S,function(a,b){\"dirty\"!==a&&(c+=b.length)});return c},qb:function(a,c){return!this.equalityComparer||!this.equalityComparer(a,c)},toString:function(){return\"[object Object]\"},extend:function(b){var c=this;b&&a.a.O(b,function(b,e){var f=a.Ta[b];\"function\"==typeof f&&(c=f(c,e)||c)});return c}};a.J(D,\"init\",D.ob);a.J(D,\"subscribe\",D.subscribe);a.J(D,\"extend\",D.extend);a.J(D,\"getSubscriptionsCount\",D.Ad);a.a.Ba&&a.a.setPrototypeOf(D,\nFunction.prototype);a.R.fn=D;a.Pc=function(a){return null!=a&&\"function\"==typeof a.subscribe&&\"function\"==typeof a.notifySubscribers};a.b(\"subscribable\",a.R);a.b(\"isSubscribable\",a.Pc);a.U=a.v=function(){function b(a){d.push(e);e=a}function c(){e=d.pop()}var d=[],e,f=0;return{wc:b,end:c,ac:function(b){if(e){if(!a.Pc(b))throw Error(\"Only subscribable things can act as dependencies\");e.nd.call(e.od,b,b.ed||(b.ed=++f))}},K:function(a,d,e){try{return b(),a.apply(d,e||[])}finally{c()}},pa:function(){if(e)return e.o.pa()},\nVa:function(){if(e)return e.o.Va()},rb:function(){if(e)return e.rb},o:function(){if(e)return e.o}}}();a.b(\"computedContext\",a.U);a.b(\"computedContext.getDependenciesCount\",a.U.pa);a.b(\"computedContext.getDependencies\",a.U.Va);a.b(\"computedContext.isInitial\",a.U.rb);a.b(\"computedContext.registerDependency\",a.U.ac);a.b(\"ignoreDependencies\",a.Wd=a.v.K);var I=a.a.Da(\"_latestValue\");a.sa=function(b){function c(){if(0<arguments.length)return c.qb(c[I],arguments[0])&&(c.xa(),c[I]=arguments[0],c.wa()),this;\na.v.ac(c);return c[I]}c[I]=b;a.a.Ba||a.a.extend(c,a.R.fn);a.R.fn.ob(c);a.a.zb(c,F);a.options.deferUpdates&&a.Ta.deferred(c,!0);return c};var F={equalityComparer:K,w:function(){return this[I]},wa:function(){this.notifySubscribers(this[I],\"spectate\");this.notifySubscribers(this[I])},xa:function(){this.notifySubscribers(this[I],\"beforeChange\")}};a.a.Ba&&a.a.setPrototypeOf(F,a.R.fn);var G=a.sa.Na=\"__ko_proto__\";F[G]=a.sa;a.N=function(b){if((b=\"function\"==typeof b&&b[G])&&b!==F[G]&&b!==a.o.fn[G])throw Error(\"Invalid object that looks like an observable; possibly from another Knockout instance\");\nreturn!!b};a.Ya=function(b){return\"function\"==typeof b&&(b[G]===F[G]||b[G]===a.o.fn[G]&&b.Mc)};a.b(\"observable\",a.sa);a.b(\"isObservable\",a.N);a.b(\"isWriteableObservable\",a.Ya);a.b(\"isWritableObservable\",a.Ya);a.b(\"observable.fn\",F);a.J(F,\"peek\",F.w);a.J(F,\"valueHasMutated\",F.wa);a.J(F,\"valueWillMutate\",F.xa);a.Ia=function(b){b=b||[];if(\"object\"!=typeof b||!(\"length\"in b))throw Error(\"The argument passed when initializing an observable array must be an array, or null, or undefined.\");b=a.sa(b);a.a.zb(b,\na.Ia.fn);return b.extend({trackArrayChanges:!0})};a.Ia.fn={remove:function(b){for(var c=this.w(),d=[],e=\"function\"!=typeof b||a.N(b)?function(a){return a===b}:b,f=0;f<c.length;f++){var g=c[f];if(e(g)){0===d.length&&this.xa();if(c[f]!==g)throw Error(\"Array modified during remove; cannot remove item\");d.push(g);c.splice(f,1);f--}}d.length&&this.wa();return d},removeAll:function(b){if(b===p){var c=this.w(),d=c.slice(0);this.xa();c.splice(0,c.length);this.wa();return d}return b?this.remove(function(c){return 0<=\na.a.A(b,c)}):[]},destroy:function(b){var c=this.w(),d=\"function\"!=typeof b||a.N(b)?function(a){return a===b}:b;this.xa();for(var e=c.length-1;0<=e;e--){var f=c[e];d(f)&&(f._destroy=!0)}this.wa()},destroyAll:function(b){return b===p?this.destroy(function(){return!0}):b?this.destroy(function(c){return 0<=a.a.A(b,c)}):[]},indexOf:function(b){var c=this();return a.a.A(c,b)},replace:function(a,c){var d=this.indexOf(a);0<=d&&(this.xa(),this.w()[d]=c,this.wa())},sorted:function(a){var c=this().slice(0);\nreturn a?c.sort(a):c.sort()},reversed:function(){return this().slice(0).reverse()}};a.a.Ba&&a.a.setPrototypeOf(a.Ia.fn,a.sa.fn);a.a.C(\"pop push reverse shift sort splice unshift\".split(\" \"),function(b){a.Ia.fn[b]=function(){var a=this.w();this.xa();this.yc(a,b,arguments);var d=a[b].apply(a,arguments);this.wa();return d===a?this:d}});a.a.C([\"slice\"],function(b){a.Ia.fn[b]=function(){var a=this();return a[b].apply(a,arguments)}});a.Oc=function(b){return a.N(b)&&\"function\"==typeof b.remove&&\"function\"==\ntypeof b.push};a.b(\"observableArray\",a.Ia);a.b(\"isObservableArray\",a.Oc);a.Ta.trackArrayChanges=function(b,c){function d(){function c(){if(h){var d=[].concat(b.w()||[]);if(b.Wa(\"arrayChange\")){var e;if(!f||1<h)f=a.a.Ob(m,d,b.Nb);e=f}m=d;f=null;h=0;e&&e.length&&b.notifySubscribers(e,\"arrayChange\")}}e?c():(e=!0,l=b.notifySubscribers,b.notifySubscribers=function(a,b){b&&\"change\"!==b||++h;return l.apply(this,arguments)},m=[].concat(b.w()||[]),f=null,g=b.subscribe(c))}b.Nb={};c&&\"object\"==typeof c&&a.a.extend(b.Nb,\nc);b.Nb.sparse=!0;if(!b.yc){var e=!1,f=null,g,h=0,m,l,k=b.Qa,q=b.cb;b.Qa=function(a){k&&k.call(b,a);\"arrayChange\"===a&&d()};b.cb=function(a){q&&q.call(b,a);\"arrayChange\"!==a||b.Wa(\"arrayChange\")||(l&&(b.notifySubscribers=l,l=p),g&&g.s(),g=null,e=!1,m=p)};b.yc=function(b,c,d){function k(a,b,c){return l[l.length]={status:a,value:b,index:c}}if(e&&!h){var l=[],g=b.length,q=d.length,m=0;switch(c){case \"push\":m=g;case \"unshift\":for(c=0;c<q;c++)k(\"added\",d[c],m+c);break;case \"pop\":m=g-1;case \"shift\":g&&\nk(\"deleted\",b[m],m);break;case \"splice\":c=Math.min(Math.max(0,0>d[0]?g+d[0]:d[0]),g);for(var g=1===q?g:Math.min(c+(d[1]||0),g),q=c+q-2,m=Math.max(g,q),U=[],L=[],p=2;c<m;++c,++p)c<g&&L.push(k(\"deleted\",b[c],c)),c<q&&U.push(k(\"added\",d[p],c));a.a.Jc(L,U);break;default:return}f=l}}}};var t=a.a.Da(\"_state\");a.o=a.$=function(b,c,d){function e(){if(0<arguments.length){if(\"function\"===typeof f)f.apply(g.lb,arguments);else throw Error(\"Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.\");\nreturn this}g.qa||a.v.ac(e);(g.ka||g.G&&e.Xa())&&e.ha();return g.X}\"object\"===typeof b?d=b:(d=d||{},b&&(d.read=b));if(\"function\"!=typeof d.read)throw Error(\"Pass a function that returns the value of the ko.computed\");var f=d.write,g={X:p,ra:!0,ka:!0,pb:!1,hc:!1,qa:!1,vb:!1,G:!1,Vc:d.read,lb:c||d.owner,l:d.disposeWhenNodeIsRemoved||d.l||null,Sa:d.disposeWhen||d.Sa,Qb:null,F:{},V:0,Hc:null};e[t]=g;e.Mc=\"function\"===typeof f;a.a.Ba||a.a.extend(e,a.R.fn);a.R.fn.ob(e);a.a.zb(e,C);d.pure?(g.vb=!0,g.G=!0,\na.a.extend(e,da)):d.deferEvaluation&&a.a.extend(e,ea);a.options.deferUpdates&&a.Ta.deferred(e,!0);g.l&&(g.hc=!0,g.l.nodeType||(g.l=null));g.G||d.deferEvaluation||e.ha();g.l&&e.ja()&&a.a.I.za(g.l,g.Qb=function(){e.s()});return e};var C={equalityComparer:K,pa:function(){return this[t].V},Va:function(){var b=[];a.a.O(this[t].F,function(a,d){b[d.La]=d.da});return b},Ub:function(b){if(!this[t].V)return!1;var c=this.Va();return-1!==a.a.A(c,b)?!0:!!a.a.Lb(c,function(a){return a.Ub&&a.Ub(b)})},tc:function(a,\nc,d){if(this[t].vb&&c===this)throw Error(\"A 'pure' computed must not be called recursively\");this[t].F[a]=d;d.La=this[t].V++;d.Ma=c.mb()},Xa:function(){var a,c,d=this[t].F;for(a in d)if(Object.prototype.hasOwnProperty.call(d,a)&&(c=d[a],this.Ja&&c.da.Ka||c.da.Cd(c.Ma)))return!0},Id:function(){this.Ja&&!this[t].pb&&this.Ja(!1)},ja:function(){var a=this[t];return a.ka||0<a.V},Qd:function(){this.Ka?this[t].ka&&(this[t].ra=!0):this.Gc()},Zc:function(a){if(a.Hb){var c=a.subscribe(this.Id,this,\"dirty\"),\nd=a.subscribe(this.Qd,this);return{da:a,s:function(){c.s();d.s()}}}return a.subscribe(this.Gc,this)},Gc:function(){var b=this,c=b.throttleEvaluation;c&&0<=c?(clearTimeout(this[t].Hc),this[t].Hc=a.a.setTimeout(function(){b.ha(!0)},c)):b.Ja?b.Ja(!0):b.ha(!0)},ha:function(b){var c=this[t],d=c.Sa,e=!1;if(!c.pb&&!c.qa){if(c.l&&!a.a.Rb(c.l)||d&&d()){if(!c.hc){this.s();return}}else c.hc=!1;c.pb=!0;try{e=this.yd(b)}finally{c.pb=!1}return e}},yd:function(b){var c=this[t],d=!1,e=c.vb?p:!c.V,d={pd:this,kb:c.F,\nPb:c.V};a.v.wc({od:d,nd:ba,o:this,rb:e});c.F={};c.V=0;var f=this.xd(c,d);c.V?d=this.qb(c.X,f):(this.s(),d=!0);d&&(c.G?this.Gb():this.notifySubscribers(c.X,\"beforeChange\"),c.X=f,this.notifySubscribers(c.X,\"spectate\"),!c.G&&b&&this.notifySubscribers(c.X),this.qc&&this.qc());e&&this.notifySubscribers(c.X,\"awake\");return d},xd:function(b,c){try{var d=b.Vc;return b.lb?d.call(b.lb):d()}finally{a.v.end(),c.Pb&&!b.G&&a.a.O(c.kb,aa),b.ra=b.ka=!1}},w:function(a){var c=this[t];(c.ka&&(a||!c.V)||c.G&&this.Xa())&&\nthis.ha();return c.X},tb:function(b){a.R.fn.tb.call(this,b);this.mc=function(){this[t].G||(this[t].ra?this.ha():this[t].ka=!1);return this[t].X};this.Ja=function(a){this.oc(this[t].X);this[t].ka=!0;a&&(this[t].ra=!0);this.pc(this,!a)}},s:function(){var b=this[t];!b.G&&b.F&&a.a.O(b.F,function(a,b){b.s&&b.s()});b.l&&b.Qb&&a.a.I.xb(b.l,b.Qb);b.F=p;b.V=0;b.qa=!0;b.ra=!1;b.ka=!1;b.G=!1;b.l=p;b.Sa=p;b.Vc=p;this.Mc||(b.lb=p)}},da={Qa:function(b){var c=this,d=c[t];if(!d.qa&&d.G&&\"change\"==b){d.G=!1;if(d.ra||\nc.Xa())d.F=null,d.V=0,c.ha()&&c.Gb();else{var e=[];a.a.O(d.F,function(a,b){e[b.La]=a});a.a.C(e,function(a,b){var e=d.F[a],m=c.Zc(e.da);m.La=b;m.Ma=e.Ma;d.F[a]=m});c.Xa()&&c.ha()&&c.Gb()}d.qa||c.notifySubscribers(d.X,\"awake\")}},cb:function(b){var c=this[t];c.qa||\"change\"!=b||this.Wa(\"change\")||(a.a.O(c.F,function(a,b){b.s&&(c.F[a]={da:b.da,La:b.La,Ma:b.Ma},b.s())}),c.G=!0,this.notifySubscribers(p,\"asleep\"))},mb:function(){var b=this[t];b.G&&(b.ra||this.Xa())&&this.ha();return a.R.fn.mb.call(this)}},\nea={Qa:function(a){\"change\"!=a&&\"beforeChange\"!=a||this.w()}};a.a.Ba&&a.a.setPrototypeOf(C,a.R.fn);var N=a.sa.Na;C[N]=a.o;a.Nc=function(a){return\"function\"==typeof a&&a[N]===C[N]};a.Ed=function(b){return a.Nc(b)&&b[t]&&b[t].vb};a.b(\"computed\",a.o);a.b(\"dependentObservable\",a.o);a.b(\"isComputed\",a.Nc);a.b(\"isPureComputed\",a.Ed);a.b(\"computed.fn\",C);a.J(C,\"peek\",C.w);a.J(C,\"dispose\",C.s);a.J(C,\"isActive\",C.ja);a.J(C,\"getDependenciesCount\",C.pa);a.J(C,\"getDependencies\",C.Va);a.wb=function(b,c){if(\"function\"===\ntypeof b)return a.o(b,c,{pure:!0});b=a.a.extend({},b);b.pure=!0;return a.o(b,c)};a.b(\"pureComputed\",a.wb);(function(){function b(a,f,g){g=g||new d;a=f(a);if(\"object\"!=typeof a||null===a||a===p||a instanceof RegExp||a instanceof Date||a instanceof String||a instanceof Number||a instanceof Boolean)return a;var h=a instanceof Array?[]:{};g.save(a,h);c(a,function(c){var d=f(a[c]);switch(typeof d){case \"boolean\":case \"number\":case \"string\":case \"function\":h[c]=d;break;case \"object\":case \"undefined\":var k=\ng.get(d);h[c]=k!==p?k:b(d,f,g)}});return h}function c(a,b){if(a instanceof Array){for(var c=0;c<a.length;c++)b(c);\"function\"==typeof a.toJSON&&b(\"toJSON\")}else for(c in a)b(c)}function d(){this.keys=[];this.values=[]}a.$c=function(c){if(0==arguments.length)throw Error(\"When calling ko.toJS, pass the object you want to convert.\");return b(c,function(b){for(var c=0;a.N(b)&&10>c;c++)b=b();return b})};a.toJSON=function(b,c,d){b=a.$c(b);return a.a.fc(b,c,d)};d.prototype={constructor:d,save:function(b,\nc){var d=a.a.A(this.keys,b);0<=d?this.values[d]=c:(this.keys.push(b),this.values.push(c))},get:function(b){b=a.a.A(this.keys,b);return 0<=b?this.values[b]:p}}})();a.b(\"toJS\",a.$c);a.b(\"toJSON\",a.toJSON);a.Vd=function(b,c,d){function e(c){var e=a.wb(b,d).extend({Ga:\"always\"}),h=e.subscribe(function(a){a&&(h.s(),c(a))});e.notifySubscribers(e.w());return h}return\"function\"!==typeof Promise||c?e(c.bind(d)):new Promise(e)};a.b(\"when\",a.Vd);(function(){a.u={L:function(b){switch(a.a.P(b)){case \"option\":return!0===\nb.__ko__hasDomDataOptionValue__?a.a.g.get(b,a.f.options.Yb):7>=a.a.W?b.getAttributeNode(\"value\")&&b.getAttributeNode(\"value\").specified?b.value:b.text:b.value;case \"select\":return 0<=b.selectedIndex?a.u.L(b.options[b.selectedIndex]):p;default:return b.value}},ya:function(b,c,d){switch(a.a.P(b)){case \"option\":\"string\"===typeof c?(a.a.g.set(b,a.f.options.Yb,p),\"__ko__hasDomDataOptionValue__\"in b&&delete b.__ko__hasDomDataOptionValue__,b.value=c):(a.a.g.set(b,a.f.options.Yb,c),b.__ko__hasDomDataOptionValue__=\n!0,b.value=\"number\"===typeof c?c:\"\");break;case \"select\":if(\"\"===c||null===c)c=p;for(var e=-1,f=0,g=b.options.length,h;f<g;++f)if(h=a.u.L(b.options[f]),h==c||\"\"===h&&c===p){e=f;break}if(d||0<=e||c===p&&1<b.size)b.selectedIndex=e,6===a.a.W&&a.a.setTimeout(function(){b.selectedIndex=e},0);break;default:if(null===c||c===p)c=\"\";b.value=c}}}})();a.b(\"selectExtensions\",a.u);a.b(\"selectExtensions.readValue\",a.u.L);a.b(\"selectExtensions.writeValue\",a.u.ya);a.m=function(){function b(b){b=a.a.Cb(b);123===b.charCodeAt(0)&&\n(b=b.slice(1,-1));b+=\"\\n,\";var c=[],d=b.match(e),q,n=[],h=0;if(1<d.length){for(var y=0,A;A=d[y];++y){var u=A.charCodeAt(0);if(44===u){if(0>=h){c.push(q&&n.length?{key:q,value:n.join(\"\")}:{unknown:q||n.join(\"\")});q=h=0;n=[];continue}}else if(58===u){if(!h&&!q&&1===n.length){q=n.pop();continue}}else if(47===u&&1<A.length&&(47===A.charCodeAt(1)||42===A.charCodeAt(1)))continue;else 47===u&&y&&1<A.length?(u=d[y-1].match(f))&&!g[u[0]]&&(b=b.substr(b.indexOf(A)+1),d=b.match(e),y=-1,A=\"/\"):40===u||123===\nu||91===u?++h:41===u||125===u||93===u?--h:q||n.length||34!==u&&39!==u||(A=A.slice(1,-1));n.push(A)}if(0<h)throw Error(\"Unbalanced parentheses, braces, or brackets\");}return c}var c=[\"true\",\"false\",\"null\",\"undefined\"],d=/^(?:[$_a-z][$\\w]*|(.+)(\\.\\s*[$_a-z][$\\w]*|\\[.+\\]))$/i,e=RegExp(\"\\\"(?:\\\\\\\\.|[^\\\"])*\\\"|'(?:\\\\\\\\.|[^'])*'|`(?:\\\\\\\\.|[^`])*`|/\\\\*(?:[^*]|\\\\*+[^*/])*\\\\*+/|//.*\\n|/(?:\\\\\\\\.|[^/])+/w*|[^\\\\s:,/][^,\\\"'`{}()/:[\\\\]]*[^\\\\s,\\\"'`{}()/:[\\\\]]|[^\\\\s]\",\"g\"),f=/[\\])\"'A-Za-z0-9_$]+$/,g={\"in\":1,\"return\":1,\n\"typeof\":1},h={};return{Ra:[],va:h,Zb:b,ub:function(e,f){function k(b,e){var f;if(!y){var l=a.getBindingHandler(b);if(l&&l.preprocess&&!(e=l.preprocess(e,b,k)))return;if(l=h[b])f=e,0<=a.a.A(c,f)?f=!1:(l=f.match(d),f=null===l?!1:l[1]?\"Object(\"+l[1]+\")\"+l[2]:f),l=f;l&&n.push(\"'\"+(\"string\"==typeof h[b]?h[b]:b)+\"':function(_z){\"+f+\"=_z}\")}g&&(e=\"function(){return \"+e+\" }\");q.push(\"'\"+b+\"':\"+e)}f=f||{};var q=[],n=[],g=f.valueAccessors,y=f.bindingParams,A=\"string\"===typeof e?b(e):e;a.a.C(A,function(a){k(a.key||\na.unknown,a.value)});n.length&&k(\"_ko_property_writers\",\"{\"+n.join(\",\")+\" }\");return q.join(\",\")},Hd:function(a,b){for(var c=0;c<a.length;c++)if(a[c].key==b)return!0;return!1},$a:function(b,c,d,e,f){if(b&&a.N(b))!a.Ya(b)||f&&b.w()===e||b(e);else if((b=c.get(\"_ko_property_writers\"))&&b[d])b[d](e)}}}();a.b(\"expressionRewriting\",a.m);a.b(\"expressionRewriting.bindingRewriteValidators\",a.m.Ra);a.b(\"expressionRewriting.parseObjectLiteral\",a.m.Zb);a.b(\"expressionRewriting.preProcessBindings\",a.m.ub);a.b(\"expressionRewriting._twoWayBindings\",\na.m.va);a.b(\"jsonExpressionRewriting\",a.m);a.b(\"jsonExpressionRewriting.insertPropertyAccessorsIntoJson\",a.m.ub);(function(){function b(a){return 8==a.nodeType&&g.test(f?a.text:a.nodeValue)}function c(a){return 8==a.nodeType&&h.test(f?a.text:a.nodeValue)}function d(d,e){for(var f=d,g=1,h=[];f=f.nextSibling;){if(c(f)&&(a.a.g.set(f,l,!0),g--,0===g))return h;h.push(f);b(f)&&g++}if(!e)throw Error(\"Cannot find closing comment tag to match: \"+d.nodeValue);return null}function e(a,b){var c=d(a,b);return c?\n0<c.length?c[c.length-1].nextSibling:a.nextSibling:null}var f=w&&\"\\x3c!--test--\\x3e\"===w.createComment(\"test\").text,g=f?/^\\x3c!--\\s*ko(?:\\s+([\\s\\S]+))?\\s*--\\x3e$/:/^\\s*ko(?:\\s+([\\s\\S]+))?\\s*$/,h=f?/^\\x3c!--\\s*\\/ko\\s*--\\x3e$/:/^\\s*\\/ko\\s*$/,m={ul:!0,ol:!0},l=\"__ko_matchedEndComment__\";a.h={ea:{},childNodes:function(a){return b(a)?d(a):a.childNodes},Ea:function(c){if(b(c)){c=a.h.childNodes(c);for(var d=0,e=c.length;d<e;d++)a.removeNode(c[d])}else a.a.Sb(c)},ua:function(c,d){if(b(c)){a.h.Ea(c);for(var e=\nc.nextSibling,f=0,l=d.length;f<l;f++)e.parentNode.insertBefore(d[f],e)}else a.a.ua(c,d)},Uc:function(a,c){b(a)?a.parentNode.insertBefore(c,a.nextSibling):a.firstChild?a.insertBefore(c,a.firstChild):a.appendChild(c)},Vb:function(c,d,e){e?b(c)?c.parentNode.insertBefore(d,e.nextSibling):e.nextSibling?c.insertBefore(d,e.nextSibling):c.appendChild(d):a.h.Uc(c,d)},firstChild:function(a){if(b(a))return!a.nextSibling||c(a.nextSibling)?null:a.nextSibling;if(a.firstChild&&c(a.firstChild))throw Error(\"Found invalid end comment, as the first child of \"+\na);return a.firstChild},nextSibling:function(d){b(d)&&(d=e(d));if(d.nextSibling&&c(d.nextSibling)){var f=d.nextSibling;if(c(f)&&!a.a.g.get(f,l))throw Error(\"Found end comment without a matching opening comment, as child of \"+d);return null}return d.nextSibling},Bd:b,Ud:function(a){return(a=(f?a.text:a.nodeValue).match(g))?a[1]:null},Rc:function(d){if(m[a.a.P(d)]){var f=d.firstChild;if(f){do if(1===f.nodeType){var l;l=f.firstChild;var g=null;if(l){do if(g)g.push(l);else if(b(l)){var h=e(l,!0);h?l=\nh:g=[l]}else c(l)&&(g=[l]);while(l=l.nextSibling)}if(l=g)for(g=f.nextSibling,h=0;h<l.length;h++)g?d.insertBefore(l[h],g):d.appendChild(l[h])}while(f=f.nextSibling)}}}}})();a.b(\"virtualElements\",a.h);a.b(\"virtualElements.allowedBindings\",a.h.ea);a.b(\"virtualElements.emptyNode\",a.h.Ea);a.b(\"virtualElements.insertAfter\",a.h.Vb);a.b(\"virtualElements.prepend\",a.h.Uc);a.b(\"virtualElements.setDomNodeChildren\",a.h.ua);(function(){a.ga=function(){this.md={}};a.a.extend(a.ga.prototype,{nodeHasBindings:function(b){switch(b.nodeType){case 1:return null!=\nb.getAttribute(\"data-bind\")||a.i.getComponentNameForNode(b);case 8:return a.h.Bd(b);default:return!1}},getBindings:function(b,c){var d=this.getBindingsString(b,c),d=d?this.parseBindingsString(d,c,b):null;return a.i.sc(d,b,c,!1)},getBindingAccessors:function(b,c){var d=this.getBindingsString(b,c),d=d?this.parseBindingsString(d,c,b,{valueAccessors:!0}):null;return a.i.sc(d,b,c,!0)},getBindingsString:function(b){switch(b.nodeType){case 1:return b.getAttribute(\"data-bind\");case 8:return a.h.Ud(b);default:return null}},\nparseBindingsString:function(b,c,d,e){try{var f=this.md,g=b+(e&&e.valueAccessors||\"\"),h;if(!(h=f[g])){var m,l=\"with($context){with($data||{}){return{\"+a.m.ub(b,e)+\"}}}\";m=new Function(\"$context\",\"$element\",l);h=f[g]=m}return h(c,d)}catch(k){throw k.message=\"Unable to parse bindings.\\nBindings value: \"+b+\"\\nMessage: \"+k.message,k;}}});a.ga.instance=new a.ga})();a.b(\"bindingProvider\",a.ga);(function(){function b(b){var c=(b=a.a.g.get(b,B))&&b.M;c&&(b.M=null,c.Sc())}function c(c,d,e){this.node=c;this.xc=\nd;this.ib=[];this.T=!1;d.M||a.a.I.za(c,b);e&&e.M&&(e.M.ib.push(c),this.Kb=e)}function d(a){return function(){return a}}function e(a){return a()}function f(b){return a.a.Ha(a.v.K(b),function(a,c){return function(){return b()[c]}})}function g(b,c,e){return\"function\"===typeof b?f(b.bind(null,c,e)):a.a.Ha(b,d)}function h(a,b){return f(this.getBindings.bind(this,a,b))}function m(b,c){var d=a.h.firstChild(c);if(d){var e,f=a.ga.instance,k=f.preprocessNode;if(k){for(;e=d;)d=a.h.nextSibling(e),k.call(f,e);\nd=a.h.firstChild(c)}for(;e=d;)d=a.h.nextSibling(e),l(b,e)}a.j.Ga(c,a.j.T)}function l(b,c){var d=b,e=1===c.nodeType;e&&a.h.Rc(c);if(e||a.ga.instance.nodeHasBindings(c))d=q(c,null,b).bindingContextForDescendants;d&&!u[a.a.P(c)]&&m(d,c)}function k(b){var c=[],d={},e=[];a.a.O(b,function ca(f){if(!d[f]){var l=a.getBindingHandler(f);l&&(l.after&&(e.push(f),a.a.C(l.after,function(c){if(b[c]){if(-1!==a.a.A(e,c))throw Error(\"Cannot combine the following bindings, because they have a cyclic dependency: \"+e.join(\", \"));\nca(c)}}),e.length--),c.push({key:f,Lc:l}));d[f]=!0}});return c}function q(b,c,d){var f=a.a.g.Tb(b,B,{}),l=f.gd;if(!c){if(l)throw Error(\"You cannot apply bindings multiple times to the same element.\");f.gd=!0}l||(f.context=d);var g;if(c&&\"function\"!==typeof c)g=c;else{var q=a.ga.instance,n=q.getBindingAccessors||h,m=a.$(function(){if(g=c?c(d,b):n.call(q,b,d)){if(d[r])d[r]();if(d[A])d[A]()}return g},null,{l:b});g&&m.ja()||(m=null)}var y=d,u;if(g){var J=function(){return a.a.Ha(m?m():g,e)},t=m?function(a){return function(){return e(m()[a])}}:\nfunction(a){return g[a]};J.get=function(a){return g[a]&&e(t(a))};J.has=function(a){return a in g};a.j.T in g&&a.j.subscribe(b,a.j.T,function(){var c=(0,g[a.j.T])();if(c){var d=a.h.childNodes(b);d.length&&c(d,a.Dc(d[0]))}});a.j.oa in g&&(y=a.j.Bb(b,d),a.j.subscribe(b,a.j.oa,function(){var c=(0,g[a.j.oa])();c&&a.h.firstChild(b)&&c(b)}));f=k(g);a.a.C(f,function(c){var d=c.Lc.init,e=c.Lc.update,f=c.key;if(8===b.nodeType&&!a.h.ea[f])throw Error(\"The binding '\"+f+\"' cannot be used with virtual elements\");\ntry{\"function\"==typeof d&&a.v.K(function(){var a=d(b,t(f),J,y.$data,y);if(a&&a.controlsDescendantBindings){if(u!==p)throw Error(\"Multiple bindings (\"+u+\" and \"+f+\") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.\");u=f}}),\"function\"==typeof e&&a.$(function(){e(b,t(f),J,y.$data,y)},null,{l:b})}catch(l){throw l.message='Unable to process binding \"'+f+\": \"+g[f]+'\"\\nMessage: '+l.message,l;}})}f=u===p;return{shouldBindDescendants:f,\nbindingContextForDescendants:f&&y}}function n(b,c){return b&&b instanceof a.fa?b:new a.fa(b,p,p,c)}var r=a.a.Da(\"_subscribable\"),y=a.a.Da(\"_ancestorBindingInfo\"),A=a.a.Da(\"_dataDependency\");a.f={};var u={script:!0,textarea:!0,template:!0};a.getBindingHandler=function(b){return a.f[b]};var J={};a.fa=function(b,c,d,e,f){function l(){var b=q?h():h,f=a.a.c(b);c?(a.a.extend(k,c),y in c&&(k[y]=c[y])):(k.$parents=[],k.$root=f,k.ko=a);k[r]=n;g?f=k.$data:(k.$rawData=b,k.$data=f);d&&(k[d]=f);e&&e(k,c,f);if(c&&\nc[r]&&!a.U.o().Ub(c[r]))c[r]();m&&(k[A]=m);return k.$data}var k=this,g=b===J,h=g?p:b,q=\"function\"==typeof h&&!a.N(h),n,m=f&&f.dataDependency;f&&f.exportDependencies?l():(n=a.wb(l),n.w(),n.ja()?n.equalityComparer=null:k[r]=p)};a.fa.prototype.createChildContext=function(b,c,d,e){!e&&c&&\"object\"==typeof c&&(e=c,c=e.as,d=e.extend);if(c&&e&&e.noChildContext){var f=\"function\"==typeof b&&!a.N(b);return new a.fa(J,this,null,function(a){d&&d(a);a[c]=f?b():b},e)}return new a.fa(b,this,c,function(a,b){a.$parentContext=\nb;a.$parent=b.$data;a.$parents=(b.$parents||[]).slice(0);a.$parents.unshift(a.$parent);d&&d(a)},e)};a.fa.prototype.extend=function(b,c){return new a.fa(J,this,null,function(c){a.a.extend(c,\"function\"==typeof b?b(c):b)},c)};var B=a.a.g.Z();c.prototype.Sc=function(){this.Kb&&this.Kb.M&&this.Kb.M.rd(this.node)};c.prototype.rd=function(b){a.a.hb(this.ib,b);!this.ib.length&&this.T&&this.Bc()};c.prototype.Bc=function(){this.T=!0;this.xc.M&&!this.ib.length&&(this.xc.M=null,a.a.I.xb(this.node,b),a.j.Ga(this.node,\na.j.oa),this.Sc())};a.j={T:\"childrenComplete\",oa:\"descendantsComplete\",subscribe:function(b,c,d,e){b=a.a.g.Tb(b,B,{});b.Fa||(b.Fa=new a.R);return b.Fa.subscribe(d,e,c)},Ga:function(b,c){var d=a.a.g.get(b,B);if(d&&(d.Fa&&d.Fa.notifySubscribers(b,c),c==a.j.T))if(d.M)d.M.Bc();else if(d.M===p&&d.Fa&&d.Fa.Wa(a.j.oa))throw Error(\"descendantsComplete event not supported for bindings on this node\");},Bb:function(b,d){var e=a.a.g.Tb(b,B,{});e.M||(e.M=new c(b,e,d[y]));return d[y]==e?d:d.extend(function(a){a[y]=\ne})}};a.Sd=function(b){return(b=a.a.g.get(b,B))&&b.context};a.eb=function(b,c,d){1===b.nodeType&&a.h.Rc(b);return q(b,c,n(d))};a.kd=function(b,c,d){d=n(d);return a.eb(b,g(c,d,b),d)};a.Pa=function(a,b){1!==b.nodeType&&8!==b.nodeType||m(n(a),b)};a.uc=function(a,b,c){!v&&z.jQuery&&(v=z.jQuery);if(2>arguments.length){if(b=w.body,!b)throw Error(\"ko.applyBindings: could not find document.body; has the document been loaded?\");}else if(!b||1!==b.nodeType&&8!==b.nodeType)throw Error(\"ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node\");\nl(n(a,c),b)};a.Cc=function(b){return!b||1!==b.nodeType&&8!==b.nodeType?p:a.Sd(b)};a.Dc=function(b){return(b=a.Cc(b))?b.$data:p};a.b(\"bindingHandlers\",a.f);a.b(\"bindingEvent\",a.j);a.b(\"bindingEvent.subscribe\",a.j.subscribe);a.b(\"bindingEvent.startPossiblyAsyncContentBinding\",a.j.Bb);a.b(\"applyBindings\",a.uc);a.b(\"applyBindingsToDescendants\",a.Pa);a.b(\"applyBindingAccessorsToNode\",a.eb);a.b(\"applyBindingsToNode\",a.kd);a.b(\"contextFor\",a.Cc);a.b(\"dataFor\",a.Dc)})();(function(b){function c(c,e){var l=\nObject.prototype.hasOwnProperty.call(f,c)?f[c]:b,k;l?l.subscribe(e):(l=f[c]=new a.R,l.subscribe(e),d(c,function(b,d){var e=!(!d||!d.synchronous);g[c]={definition:b,Fd:e};delete f[c];k||e?l.notifySubscribers(b):a.ma.yb(function(){l.notifySubscribers(b)})}),k=!0)}function d(a,b){e(\"getConfig\",[a],function(c){c?e(\"loadComponent\",[a,c],function(a){b(a,c)}):b(null,null)})}function e(c,d,f,k){k||(k=a.i.loaders.slice(0));var g=k.shift();if(g){var n=g[c];if(n){var r=!1;if(n.apply(g,d.concat(function(a){r?\nf(null):null!==a?f(a):e(c,d,f,k)}))!==b&&(r=!0,!g.suppressLoaderExceptions))throw Error(\"Component loaders must supply values by invoking the callback, not by returning values synchronously.\");}else e(c,d,f,k)}else f(null)}var f={},g={};a.i={get:function(d,e){var f=Object.prototype.hasOwnProperty.call(g,d)?g[d]:b;f?f.Fd?a.v.K(function(){e(f.definition)}):a.ma.yb(function(){e(f.definition)}):c(d,e)},Ac:function(a){delete g[a]},nc:e};a.i.loaders=[];a.b(\"components\",a.i);a.b(\"components.get\",a.i.get);\na.b(\"components.clearCachedDefinition\",a.i.Ac)})();(function(){function b(b,c,d,e){function g(){0===--A&&e(h)}var h={},A=2,u=d.template;d=d.viewModel;u?f(c,u,function(c){a.i.nc(\"loadTemplate\",[b,c],function(a){h.template=a;g()})}):g();d?f(c,d,function(c){a.i.nc(\"loadViewModel\",[b,c],function(a){h[m]=a;g()})}):g()}function c(a,b,d){if(\"function\"===typeof b)d(function(a){return new b(a)});else if(\"function\"===typeof b[m])d(b[m]);else if(\"instance\"in b){var e=b.instance;d(function(){return e})}else\"viewModel\"in\nb?c(a,b.viewModel,d):a(\"Unknown viewModel value: \"+b)}function d(b){switch(a.a.P(b)){case \"script\":return a.a.ta(b.text);case \"textarea\":return a.a.ta(b.value);case \"template\":if(e(b.content))return a.a.Ca(b.content.childNodes)}return a.a.Ca(b.childNodes)}function e(a){return z.DocumentFragment?a instanceof DocumentFragment:a&&11===a.nodeType}function f(a,b,c){\"string\"===typeof b.require?T||z.require?(T||z.require)([b.require],c):a(\"Uses require, but no AMD loader is present\"):c(b)}function g(a){return function(b){throw Error(\"Component '\"+\na+\"': \"+b);}}var h={};a.i.register=function(b,c){if(!c)throw Error(\"Invalid configuration for \"+b);if(a.i.sb(b))throw Error(\"Component \"+b+\" is already registered\");h[b]=c};a.i.sb=function(a){return Object.prototype.hasOwnProperty.call(h,a)};a.i.unregister=function(b){delete h[b];a.i.Ac(b)};a.i.Ec={getConfig:function(b,c){c(a.i.sb(b)?h[b]:null)},loadComponent:function(a,c,d){var e=g(a);f(e,c,function(c){b(a,e,c,d)})},loadTemplate:function(b,c,f){b=g(b);if(\"string\"===typeof c)f(a.a.ta(c));else if(c instanceof\nArray)f(c);else if(e(c))f(a.a.la(c.childNodes));else if(c.element)if(c=c.element,z.HTMLElement?c instanceof HTMLElement:c&&c.tagName&&1===c.nodeType)f(d(c));else if(\"string\"===typeof c){var h=w.getElementById(c);h?f(d(h)):b(\"Cannot find element with ID \"+c)}else b(\"Unknown element type: \"+c);else b(\"Unknown template value: \"+c)},loadViewModel:function(a,b,d){c(g(a),b,d)}};var m=\"createViewModel\";a.b(\"components.register\",a.i.register);a.b(\"components.isRegistered\",a.i.sb);a.b(\"components.unregister\",\na.i.unregister);a.b(\"components.defaultLoader\",a.i.Ec);a.i.loaders.push(a.i.Ec);a.i.cd=h})();(function(){function b(b,e){var f=b.getAttribute(\"params\");if(f){var f=c.parseBindingsString(f,e,b,{valueAccessors:!0,bindingParams:!0}),f=a.a.Ha(f,function(c){return a.o(c,null,{l:b})}),g=a.a.Ha(f,function(c){var e=c.w();return c.ja()?a.o({read:function(){return a.a.c(c())},write:a.Ya(e)&&function(a){c()(a)},l:b}):e});Object.prototype.hasOwnProperty.call(g,\"$raw\")||(g.$raw=f);return g}return{$raw:{}}}a.i.getComponentNameForNode=\nfunction(b){var c=a.a.P(b);if(a.i.sb(c)&&(-1!=c.indexOf(\"-\")||\"[object HTMLUnknownElement]\"==\"\"+b||8>=a.a.W&&b.tagName===c))return c};a.i.sc=function(c,e,f,g){if(1===e.nodeType){var h=a.i.getComponentNameForNode(e);if(h){c=c||{};if(c.component)throw Error('Cannot use the \"component\" binding on a custom element matching a component');var m={name:h,params:b(e,f)};c.component=g?function(){return m}:m}}return c};var c=new a.ga;9>a.a.W&&(a.i.register=function(a){return function(b){return a.apply(this,\narguments)}}(a.i.register),w.createDocumentFragment=function(b){return function(){var c=b(),f=a.i.cd,g;for(g in f);return c}}(w.createDocumentFragment))})();(function(){function b(b,c,d){c=c.template;if(!c)throw Error(\"Component '\"+b+\"' has no template\");b=a.a.Ca(c);a.h.ua(d,b)}function c(a,b,c){var d=a.createViewModel;return d?d.call(a,b,c):b}var d=0;a.f.component={init:function(e,f,g,h,m){function l(){var a=k&&k.dispose;\"function\"===typeof a&&a.call(k);n&&n.s();q=k=n=null}var k,q,n,r=a.a.la(a.h.childNodes(e));\na.h.Ea(e);a.a.I.za(e,l);a.o(function(){var g=a.a.c(f()),h,u;\"string\"===typeof g?h=g:(h=a.a.c(g.name),u=a.a.c(g.params));if(!h)throw Error(\"No component name specified\");var p=a.j.Bb(e,m),B=q=++d;a.i.get(h,function(d){if(q===B){l();if(!d)throw Error(\"Unknown component '\"+h+\"'\");b(h,d,e);var f=c(d,u,{element:e,templateNodes:r});d=p.createChildContext(f,{extend:function(a){a.$component=f;a.$componentTemplateNodes=r}});f&&f.koDescendantsComplete&&(n=a.j.subscribe(e,a.j.oa,f.koDescendantsComplete,f));\nk=f;a.Pa(d,e)}})},null,{l:e});return{controlsDescendantBindings:!0}}};a.h.ea.component=!0})();var V={\"class\":\"className\",\"for\":\"htmlFor\"};a.f.attr={update:function(b,c){var d=a.a.c(c())||{};a.a.O(d,function(c,d){d=a.a.c(d);var g=c.indexOf(\":\"),g=\"lookupNamespaceURI\"in b&&0<g&&b.lookupNamespaceURI(c.substr(0,g)),h=!1===d||null===d||d===p;h?g?b.removeAttributeNS(g,c):b.removeAttribute(c):d=d.toString();8>=a.a.W&&c in V?(c=V[c],h?b.removeAttribute(c):b[c]=d):h||(g?b.setAttributeNS(g,c,d):b.setAttribute(c,\nd));\"name\"===c&&a.a.Xc(b,h?\"\":d)})}};(function(){a.f.checked={after:[\"value\",\"attr\"],init:function(b,c,d){function e(){var e=b.checked,f=g();if(!a.U.rb()&&(e||!m&&!a.U.pa())){var l=a.v.K(c);if(k){var n=q?l.w():l,B=r;r=f;B!==f?e&&(a.a.Oa(n,f,!0),a.a.Oa(n,B,!1)):a.a.Oa(n,f,e);q&&a.Ya(l)&&l(n)}else h&&(f===p?f=e:e||(f=p)),a.m.$a(l,d,\"checked\",f,!0)}}function f(){var d=a.a.c(c()),e=g();k?(b.checked=0<=a.a.A(d,e),r=e):b.checked=h&&e===p?!!d:g()===d}var g=a.wb(function(){if(d.has(\"checkedValue\"))return a.a.c(d.get(\"checkedValue\"));\nif(n)return d.has(\"value\")?a.a.c(d.get(\"value\")):b.value}),h=\"checkbox\"==b.type,m=\"radio\"==b.type;if(h||m){var l=c(),k=h&&a.a.c(l)instanceof Array,q=!(k&&l.push&&l.splice),n=m||k,r=k?g():p;m&&!b.name&&a.f.uniqueName.init(b,function(){return!0});a.o(e,null,{l:b});a.a.H(b,\"click\",e);a.o(f,null,{l:b});l=p}}};a.m.va.checked=!0;a.f.checkedValue={update:function(b,c){b.value=a.a.c(c())}}})();a.f[\"class\"]={update:function(b,c){var d=a.a.Cb(a.a.c(c()));a.a.Eb(b,b.__ko__cssValue,!1);b.__ko__cssValue=d;a.a.Eb(b,\nd,!0)}};a.f.css={update:function(b,c){var d=a.a.c(c());null!==d&&\"object\"==typeof d?a.a.O(d,function(c,d){d=a.a.c(d);a.a.Eb(b,c,d)}):a.f[\"class\"].update(b,c)}};a.f.enable={update:function(b,c){var d=a.a.c(c());d&&b.disabled?b.removeAttribute(\"disabled\"):d||b.disabled||(b.disabled=!0)}};a.f.disable={update:function(b,c){a.f.enable.update(b,function(){return!a.a.c(c())})}};a.f.event={init:function(b,c,d,e,f){var g=c()||{};a.a.O(g,function(g){\"string\"==typeof g&&a.a.H(b,g,function(b){var l,k=c()[g];\nif(k){try{var q=a.a.la(arguments);e=f.$data;q.unshift(e);l=k.apply(e,q)}finally{!0!==l&&(b.preventDefault?b.preventDefault():b.returnValue=!1)}!1===d.get(g+\"Bubble\")&&(b.cancelBubble=!0,b.stopPropagation&&b.stopPropagation())}})})}};a.f.foreach={Qc:function(b){return function(){var c=b(),d=a.a.$b(c);if(!d||\"number\"==typeof d.length)return{foreach:c,templateEngine:a.ba.Na};a.a.c(c);return{foreach:d.data,as:d.as,noChildContext:d.noChildContext,includeDestroyed:d.includeDestroyed,afterAdd:d.afterAdd,\nbeforeRemove:d.beforeRemove,afterRender:d.afterRender,beforeMove:d.beforeMove,afterMove:d.afterMove,templateEngine:a.ba.Na}}},init:function(b,c){return a.f.template.init(b,a.f.foreach.Qc(c))},update:function(b,c,d,e,f){return a.f.template.update(b,a.f.foreach.Qc(c),d,e,f)}};a.m.Ra.foreach=!1;a.h.ea.foreach=!0;a.f.hasfocus={init:function(b,c,d){function e(e){b.__ko_hasfocusUpdating=!0;var f=b.ownerDocument;if(\"activeElement\"in f){var g;try{g=f.activeElement}catch(k){g=f.body}e=g===b}f=c();a.m.$a(f,\nd,\"hasfocus\",e,!0);b.__ko_hasfocusLastValue=e;b.__ko_hasfocusUpdating=!1}var f=e.bind(null,!0),g=e.bind(null,!1);a.a.H(b,\"focus\",f);a.a.H(b,\"focusin\",f);a.a.H(b,\"blur\",g);a.a.H(b,\"focusout\",g);b.__ko_hasfocusLastValue=!1},update:function(b,c){var d=!!a.a.c(c());b.__ko_hasfocusUpdating||b.__ko_hasfocusLastValue===d||(d?b.focus():b.blur(),!d&&b.__ko_hasfocusLastValue&&b.ownerDocument.body.focus(),a.v.K(a.a.Fb,null,[b,d?\"focusin\":\"focusout\"]))}};a.m.va.hasfocus=!0;a.f.hasFocus=a.f.hasfocus;a.m.va.hasFocus=\n\"hasfocus\";a.f.html={init:function(){return{controlsDescendantBindings:!0}},update:function(b,c){a.a.dc(b,c())}};(function(){function b(b,d,e){a.f[b]={init:function(b,c,h,m,l){var k,q,n={},r,p,A;if(d){m=h.get(\"as\");var u=h.get(\"noChildContext\");A=!(m&&u);n={as:m,noChildContext:u,exportDependencies:A}}p=(r=\"render\"==h.get(\"completeOn\"))||h.has(a.j.oa);a.o(function(){var h=a.a.c(c()),m=!e!==!h,u=!q,t;if(A||m!==k){p&&(l=a.j.Bb(b,l));if(m){if(!d||A)n.dataDependency=a.U.o();t=d?l.createChildContext(\"function\"==\ntypeof h?h:c,n):a.U.pa()?l.extend(null,n):l}u&&a.U.pa()&&(q=a.a.Ca(a.h.childNodes(b),!0));m?(u||a.h.ua(b,a.a.Ca(q)),a.Pa(t,b)):(a.h.Ea(b),r||a.j.Ga(b,a.j.T));k=m}},null,{l:b});return{controlsDescendantBindings:!0}}};a.m.Ra[b]=!1;a.h.ea[b]=!0}b(\"if\");b(\"ifnot\",!1,!0);b(\"with\",!0)})();a.f.let={init:function(b,c,d,e,f){c=f.extend(c);a.Pa(c,b);return{controlsDescendantBindings:!0}}};a.h.ea.let=!0;var Q={};a.f.options={init:function(b){if(\"select\"!==a.a.P(b))throw Error(\"options binding applies only to SELECT elements\");\nfor(;0<b.length;)b.remove(0);return{controlsDescendantBindings:!0}},update:function(b,c,d){function e(){return a.a.fb(b.options,function(a){return a.selected})}function f(a,b,c){var d=typeof b;return\"function\"==d?b(a):\"string\"==d?a[b]:c}function g(c,e){if(y&&k)a.u.ya(b,a.a.c(d.get(\"value\")),!0);else if(r.length){var f=0<=a.a.A(r,a.u.L(e[0]));a.a.Yc(e[0],f);y&&!f&&a.v.K(a.a.Fb,null,[b,\"change\"])}}var h=b.multiple,m=0!=b.length&&h?b.scrollTop:null,l=a.a.c(c()),k=d.get(\"valueAllowUnset\")&&d.has(\"value\"),\nq=d.get(\"optionsIncludeDestroyed\");c={};var n,r=[];k||(h?r=a.a.Mb(e(),a.u.L):0<=b.selectedIndex&&r.push(a.u.L(b.options[b.selectedIndex])));l&&(\"undefined\"==typeof l.length&&(l=[l]),n=a.a.fb(l,function(b){return q||b===p||null===b||!a.a.c(b._destroy)}),d.has(\"optionsCaption\")&&(l=a.a.c(d.get(\"optionsCaption\")),null!==l&&l!==p&&n.unshift(Q)));var y=!1;c.beforeRemove=function(a){b.removeChild(a)};l=g;d.has(\"optionsAfterRender\")&&\"function\"==typeof d.get(\"optionsAfterRender\")&&(l=function(b,c){g(0,c);\na.v.K(d.get(\"optionsAfterRender\"),null,[c[0],b!==Q?b:p])});a.a.cc(b,n,function(c,e,g){g.length&&(r=!k&&g[0].selected?[a.u.L(g[0])]:[],y=!0);e=b.ownerDocument.createElement(\"option\");c===Q?(a.a.Ab(e,d.get(\"optionsCaption\")),a.u.ya(e,p)):(g=f(c,d.get(\"optionsValue\"),c),a.u.ya(e,a.a.c(g)),c=f(c,d.get(\"optionsText\"),g),a.a.Ab(e,c));return[e]},c,l);a.v.K(function(){if(k)a.u.ya(b,a.a.c(d.get(\"value\")),!0);else{var c;h?c=r.length&&e().length<r.length:c=r.length&&0<=b.selectedIndex?a.u.L(b.options[b.selectedIndex])!==\nr[0]:r.length||0<=b.selectedIndex;c&&a.a.Fb(b,\"change\")}});a.a.vd(b);m&&20<Math.abs(m-b.scrollTop)&&(b.scrollTop=m)}};a.f.options.Yb=a.a.g.Z();a.f.selectedOptions={after:[\"options\",\"foreach\"],init:function(b,c,d){a.a.H(b,\"change\",function(){var e=c(),f=[];a.a.C(b.getElementsByTagName(\"option\"),function(b){b.selected&&f.push(a.u.L(b))});a.m.$a(e,d,\"selectedOptions\",f)})},update:function(b,c){if(\"select\"!=a.a.P(b))throw Error(\"values binding applies only to SELECT elements\");var d=a.a.c(c()),e=b.scrollTop;\nd&&\"number\"==typeof d.length&&a.a.C(b.getElementsByTagName(\"option\"),function(b){var c=0<=a.a.A(d,a.u.L(b));b.selected!=c&&a.a.Yc(b,c)});b.scrollTop=e}};a.m.va.selectedOptions=!0;a.f.style={update:function(b,c){var d=a.a.c(c()||{});a.a.O(d,function(c,d){d=a.a.c(d);if(null===d||d===p||!1===d)d=\"\";if(v)v(b).css(c,d);else if(/^--/.test(c))b.style.setProperty(c,d);else{c=c.replace(/-(\\w)/g,function(a,b){return b.toUpperCase()});var g=b.style[c];b.style[c]=d;d===g||b.style[c]!=g||isNaN(d)||(b.style[c]=\nd+\"px\")}})}};a.f.submit={init:function(b,c,d,e,f){if(\"function\"!=typeof c())throw Error(\"The value for a submit binding must be a function\");a.a.H(b,\"submit\",function(a){var d,e=c();try{d=e.call(f.$data,b)}finally{!0!==d&&(a.preventDefault?a.preventDefault():a.returnValue=!1)}})}};a.f.text={init:function(){return{controlsDescendantBindings:!0}},update:function(b,c){a.a.Ab(b,c())}};a.h.ea.text=!0;(function(){if(z&&z.navigator){var b=function(a){if(a)return parseFloat(a[1])},c=z.navigator.userAgent,\nd,e,f,g,h;(d=z.opera&&z.opera.version&&parseInt(z.opera.version()))||(h=b(c.match(/Edge\\/([^ ]+)$/)))||b(c.match(/Chrome\\/([^ ]+)/))||(e=b(c.match(/Version\\/([^ ]+) Safari/)))||(f=b(c.match(/Firefox\\/([^ ]+)/)))||(g=a.a.W||b(c.match(/MSIE ([^ ]+)/)))||(g=b(c.match(/rv:([^ )]+)/)))}if(8<=g&&10>g)var m=a.a.g.Z(),l=a.a.g.Z(),k=function(b){var c=this.activeElement;(c=c&&a.a.g.get(c,l))&&c(b)},q=function(b,c){var d=b.ownerDocument;a.a.g.get(d,m)||(a.a.g.set(d,m,!0),a.a.H(d,\"selectionchange\",k));a.a.g.set(b,\nl,c)};a.f.textInput={init:function(b,c,l){function k(c,d){a.a.H(b,c,d)}function m(){var d=a.a.c(c());if(null===d||d===p)d=\"\";L!==p&&d===L?a.a.setTimeout(m,4):b.value!==d&&(x=!0,b.value=d,x=!1,v=b.value)}function t(){w||(L=b.value,w=a.a.setTimeout(B,4))}function B(){clearTimeout(w);L=w=p;var d=b.value;v!==d&&(v=d,a.m.$a(c(),l,\"textInput\",d))}var v=b.value,w,L,z=9==a.a.W?t:B,x=!1;g&&k(\"keypress\",B);11>g&&k(\"propertychange\",function(a){x||\"value\"!==a.propertyName||z(a)});8==g&&(k(\"keyup\",B),k(\"keydown\",\nB));q&&(q(b,z),k(\"dragend\",t));(!g||9<=g)&&k(\"input\",z);5>e&&\"textarea\"===a.a.P(b)?(k(\"keydown\",t),k(\"paste\",t),k(\"cut\",t)):11>d?k(\"keydown\",t):4>f?(k(\"DOMAutoComplete\",B),k(\"dragdrop\",B),k(\"drop\",B)):h&&\"number\"===b.type&&k(\"keydown\",t);k(\"change\",B);k(\"blur\",B);a.o(m,null,{l:b})}};a.m.va.textInput=!0;a.f.textinput={preprocess:function(a,b,c){c(\"textInput\",a)}}})();a.f.uniqueName={init:function(b,c){if(c()){var d=\"ko_unique_\"+ ++a.f.uniqueName.qd;a.a.Xc(b,d)}}};a.f.uniqueName.qd=0;a.f.using={init:function(b,\nc,d,e,f){var g;d.has(\"as\")&&(g={as:d.get(\"as\"),noChildContext:d.get(\"noChildContext\")});c=f.createChildContext(c,g);a.Pa(c,b);return{controlsDescendantBindings:!0}}};a.h.ea.using=!0;a.f.value={after:[\"options\",\"foreach\"],init:function(b,c,d){var e=a.a.P(b),f=\"input\"==e;if(!f||\"checkbox\"!=b.type&&\"radio\"!=b.type){var g=[\"change\"],h=d.get(\"valueUpdate\"),m=!1,l=null;h&&(\"string\"==typeof h&&(h=[h]),a.a.gb(g,h),g=a.a.vc(g));var k=function(){l=null;m=!1;var e=c(),f=a.u.L(b);a.m.$a(e,d,\"value\",f)};!a.a.W||\n!f||\"text\"!=b.type||\"off\"==b.autocomplete||b.form&&\"off\"==b.form.autocomplete||-1!=a.a.A(g,\"propertychange\")||(a.a.H(b,\"propertychange\",function(){m=!0}),a.a.H(b,\"focus\",function(){m=!1}),a.a.H(b,\"blur\",function(){m&&k()}));a.a.C(g,function(c){var d=k;a.a.Td(c,\"after\")&&(d=function(){l=a.u.L(b);a.a.setTimeout(k,0)},c=c.substring(5));a.a.H(b,c,d)});var q;q=f&&\"file\"==b.type?function(){var d=a.a.c(c());null===d||d===p||\"\"===d?b.value=\"\":a.v.K(k)}:function(){var f=a.a.c(c()),g=a.u.L(b);if(null!==l&&\nf===l)a.a.setTimeout(q,0);else if(f!==g||g===p)\"select\"===e?(g=d.get(\"valueAllowUnset\"),a.u.ya(b,f,g),g||f===a.u.L(b)||a.v.K(k)):a.u.ya(b,f)};a.o(q,null,{l:b})}else a.eb(b,{checkedValue:c})},update:function(){}};a.m.va.value=!0;a.f.visible={update:function(b,c){var d=a.a.c(c()),e=\"none\"!=b.style.display;d&&!e?b.style.display=\"\":!d&&e&&(b.style.display=\"none\")}};a.f.hidden={update:function(b,c){a.f.visible.update(b,function(){return!a.a.c(c())})}};(function(b){a.f[b]={init:function(c,d,e,f,g){return a.f.event.init.call(this,\nc,function(){var a={};a[b]=d();return a},e,f,g)}}})(\"click\");a.ca=function(){};a.ca.prototype.renderTemplateSource=function(){throw Error(\"Override renderTemplateSource\");};a.ca.prototype.createJavaScriptEvaluatorBlock=function(){throw Error(\"Override createJavaScriptEvaluatorBlock\");};a.ca.prototype.makeTemplateSource=function(b,c){if(\"string\"==typeof b){c=c||w;var d=c.getElementById(b);if(!d)throw Error(\"Cannot find template with ID \"+b);return new a.B.D(d)}if(1==b.nodeType||8==b.nodeType)return new a.B.ia(b);\nthrow Error(\"Unknown template type: \"+b);};a.ca.prototype.renderTemplate=function(a,c,d,e){a=this.makeTemplateSource(a,e);return this.renderTemplateSource(a,c,d,e)};a.ca.prototype.isTemplateRewritten=function(a,c){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(a,c).data(\"isRewritten\")};a.ca.prototype.rewriteTemplate=function(a,c,d){a=this.makeTemplateSource(a,d);c=c(a.text());a.text(c);a.data(\"isRewritten\",!0)};a.b(\"templateEngine\",a.ca);a.ic=function(){function b(b,c,d,h){b=a.m.Zb(b);\nfor(var m=a.m.Ra,l=0;l<b.length;l++){var k=b[l].key;if(Object.prototype.hasOwnProperty.call(m,k)){var q=m[k];if(\"function\"===typeof q){if(k=q(b[l].value))throw Error(k);}else if(!q)throw Error(\"This template engine does not support the '\"+k+\"' binding within its templates\");}}d=\"ko.__tr_ambtns(function($context,$element){return(function(){return{ \"+a.m.ub(b,{valueAccessors:!0})+\" } })()},'\"+d.toLowerCase()+\"')\";return h.createJavaScriptEvaluatorBlock(d)+c}var c=/(<([a-z]+\\d*)(?:\\s+(?!data-bind\\s*=\\s*)[a-z0-9\\-]+(?:=(?:\\\"[^\\\"]*\\\"|\\'[^\\']*\\'|[^>]*))?)*\\s+)data-bind\\s*=\\s*([\"'])([\\s\\S]*?)\\3/gi,\nd=/\\x3c!--\\s*ko\\b\\s*([\\s\\S]*?)\\s*--\\x3e/g;return{wd:function(b,c,d){c.isTemplateRewritten(b,d)||c.rewriteTemplate(b,function(b){return a.ic.Kd(b,c)},d)},Kd:function(a,f){return a.replace(c,function(a,c,d,e,k){return b(k,c,d,f)}).replace(d,function(a,c){return b(c,\"\\x3c!-- ko --\\x3e\",\"#comment\",f)})},ld:function(b,c){return a.aa.Wb(function(d,h){var m=d.nextSibling;m&&m.nodeName.toLowerCase()===c&&a.eb(m,b,h)})}}}();a.b(\"__tr_ambtns\",a.ic.ld);(function(){a.B={};a.B.D=function(b){if(this.D=b){var c=\na.a.P(b);this.Db=\"script\"===c?1:\"textarea\"===c?2:\"template\"==c&&b.content&&11===b.content.nodeType?3:4}};a.B.D.prototype.text=function(){var b=1===this.Db?\"text\":2===this.Db?\"value\":\"innerHTML\";if(0==arguments.length)return this.D[b];var c=arguments[0];\"innerHTML\"===b?a.a.dc(this.D,c):this.D[b]=c};var b=a.a.g.Z()+\"_\";a.B.D.prototype.data=function(c){if(1===arguments.length)return a.a.g.get(this.D,b+c);a.a.g.set(this.D,b+c,arguments[1])};var c=a.a.g.Z();a.B.D.prototype.nodes=function(){var b=this.D;\nif(0==arguments.length){var e=a.a.g.get(b,c)||{},f=e.jb||(3===this.Db?b.content:4===this.Db?b:p);if(!f||e.hd)if(e=this.text())f=a.a.Ld(e,b.ownerDocument),this.text(\"\"),a.a.g.set(b,c,{jb:f,hd:!0});return f}a.a.g.set(b,c,{jb:arguments[0]})};a.B.ia=function(a){this.D=a};a.B.ia.prototype=new a.B.D;a.B.ia.prototype.constructor=a.B.ia;a.B.ia.prototype.text=function(){if(0==arguments.length){var b=a.a.g.get(this.D,c)||{};b.jc===p&&b.jb&&(b.jc=b.jb.innerHTML);return b.jc}a.a.g.set(this.D,c,{jc:arguments[0]})};\na.b(\"templateSources\",a.B);a.b(\"templateSources.domElement\",a.B.D);a.b(\"templateSources.anonymousTemplate\",a.B.ia)})();(function(){function b(b,c,d){var e;for(c=a.h.nextSibling(c);b&&(e=b)!==c;)b=a.h.nextSibling(e),d(e,b)}function c(c,d){if(c.length){var e=c[0],f=c[c.length-1],g=e.parentNode,h=a.ga.instance,m=h.preprocessNode;if(m){b(e,f,function(a,b){var c=a.previousSibling,d=m.call(h,a);d&&(a===e&&(e=d[0]||b),a===f&&(f=d[d.length-1]||c))});c.length=0;if(!e)return;e===f?c.push(e):(c.push(e,f),a.a.Ua(c,\ng))}b(e,f,function(b){1!==b.nodeType&&8!==b.nodeType||a.uc(d,b)});b(e,f,function(b){1!==b.nodeType&&8!==b.nodeType||a.aa.bd(b,[d])});a.a.Ua(c,g)}}function d(a){return a.nodeType?a:0<a.length?a[0]:null}function e(b,e,f,h,m){m=m||{};var p=(b&&d(b)||f||{}).ownerDocument,A=m.templateEngine||g;a.ic.wd(f,A,p);f=A.renderTemplate(f,h,m,p);if(\"number\"!=typeof f.length||0<f.length&&\"number\"!=typeof f[0].nodeType)throw Error(\"Template engine must return an array of DOM nodes\");p=!1;switch(e){case \"replaceChildren\":a.h.ua(b,\nf);p=!0;break;case \"replaceNode\":a.a.Wc(b,f);p=!0;break;case \"ignoreTargetNode\":break;default:throw Error(\"Unknown renderMode: \"+e);}p&&(c(f,h),m.afterRender&&a.v.K(m.afterRender,null,[f,h[m.as||\"$data\"]]),\"replaceChildren\"==e&&a.j.Ga(b,a.j.T));return f}function f(b,c,d){return a.N(b)?b():\"function\"===typeof b?b(c,d):b}var g;a.ec=function(b){if(b!=p&&!(b instanceof a.ca))throw Error(\"templateEngine must inherit from ko.templateEngine\");g=b};a.bc=function(b,c,h,m,r){h=h||{};if((h.templateEngine||g)==\np)throw Error(\"Set a template engine before calling renderTemplate\");r=r||\"replaceChildren\";if(m){var y=d(m);return a.$(function(){var g=c&&c instanceof a.fa?c:new a.fa(c,null,null,null,{exportDependencies:!0}),p=f(b,g.$data,g),g=e(m,r,p,g,h);\"replaceNode\"==r&&(m=g,y=d(m))},null,{Sa:function(){return!y||!a.a.Rb(y)},l:y&&\"replaceNode\"==r?y.parentNode:y})}return a.aa.Wb(function(d){a.bc(b,c,h,d,\"replaceNode\")})};a.Pd=function(b,d,g,h,m){function y(b,c){a.v.K(a.a.cc,null,[h,b,u,g,t,c]);a.j.Ga(h,a.j.T)}\nfunction t(a,b){c(b,v);g.afterRender&&g.afterRender(b,a);v=null}function u(a,c){v=m.createChildContext(a,{as:B,noChildContext:g.noChildContext,extend:function(a){a.$index=c;B&&(a[B+\"Index\"]=c)}});var d=f(b,a,v);return e(h,\"ignoreTargetNode\",d,v,g)}var v,B=g.as,w=!1===g.includeDestroyed||a.options.foreachHidesDestroyed&&!g.includeDestroyed;if(w||g.beforeRemove||!a.Oc(d))return a.$(function(){var b=a.a.c(d)||[];\"undefined\"==typeof b.length&&(b=[b]);w&&(b=a.a.fb(b,function(b){return b===p||null===b||\n!a.a.c(b._destroy)}));y(b)},null,{l:h});y(d.w());var z=d.subscribe(function(a){y(d(),a)},null,\"arrayChange\");z.l(h);return z};var h=a.a.g.Z(),m=a.a.g.Z();a.f.template={init:function(b,c){var d=a.a.c(c());if(\"string\"==typeof d||d.name)a.h.Ea(b);else if(\"nodes\"in d){d=d.nodes||[];if(a.N(d))throw Error('The \"nodes\" option must be a plain, non-observable array.');var e=d[0]&&d[0].parentNode;e&&a.a.g.get(e,m)||(e=a.a.Xb(d),a.a.g.set(e,m,!0));(new a.B.ia(b)).nodes(e)}else if(d=a.h.childNodes(b),0<d.length)e=\na.a.Xb(d),(new a.B.ia(b)).nodes(e);else throw Error(\"Anonymous template defined, but no template content was provided\");return{controlsDescendantBindings:!0}},update:function(b,c,d,e,f){var g=c();c=a.a.c(g);d=!0;e=null;\"string\"==typeof c?c={}:(g=c.name,\"if\"in c&&(d=a.a.c(c[\"if\"])),d&&\"ifnot\"in c&&(d=!a.a.c(c.ifnot)));\"foreach\"in c?e=a.Pd(g||b,d&&c.foreach||[],c,b,f):d?(d=f,\"data\"in c&&(d=f.createChildContext(c.data,{as:c.as,noChildContext:c.noChildContext,exportDependencies:!0})),e=a.bc(g||b,d,c,\nb)):a.h.Ea(b);f=e;(c=a.a.g.get(b,h))&&\"function\"==typeof c.s&&c.s();a.a.g.set(b,h,!f||f.ja&&!f.ja()?p:f)}};a.m.Ra.template=function(b){b=a.m.Zb(b);return 1==b.length&&b[0].unknown||a.m.Hd(b,\"name\")?null:\"This template engine does not support anonymous templates nested within its templates\"};a.h.ea.template=!0})();a.b(\"setTemplateEngine\",a.ec);a.b(\"renderTemplate\",a.bc);a.a.Jc=function(a,c,d){if(a.length&&c.length){var e,f,g,h,m;for(e=f=0;(!d||e<d)&&(h=a[f]);++f){for(g=0;m=c[g];++g)if(h.value===m.value){h.moved=\nm.index;m.moved=h.index;c.splice(g,1);e=g=0;break}e+=g}}};a.a.Ob=function(){function b(b,d,e,f,g){var h=Math.min,m=Math.max,l=[],k,p=b.length,n,r=d.length,t=r-p||1,A=p+r+1,u,v,w;for(k=0;k<=p;k++)for(v=u,l.push(u=[]),w=h(r,k+t),n=m(0,k-1);n<=w;n++)u[n]=n?k?b[k-1]===d[n-1]?v[n-1]:h(v[n]||A,u[n-1]||A)+1:n+1:k+1;h=[];m=[];t=[];k=p;for(n=r;k||n;)r=l[k][n]-1,n&&r===l[k][n-1]?m.push(h[h.length]={status:e,value:d[--n],index:n}):k&&r===l[k-1][n]?t.push(h[h.length]={status:f,value:b[--k],index:k}):(--n,--k,\ng.sparse||h.push({status:\"retained\",value:d[n]}));a.a.Jc(t,m,!g.dontLimitMoves&&10*p);return h.reverse()}return function(a,d,e){e=\"boolean\"===typeof e?{dontLimitMoves:e}:e||{};a=a||[];d=d||[];return a.length<d.length?b(a,d,\"added\",\"deleted\",e):b(d,a,\"deleted\",\"added\",e)}}();a.b(\"utils.compareArrays\",a.a.Ob);(function(){function b(b,c,d,h,m){var l=[],k=a.$(function(){var k=c(d,m,a.a.Ua(l,b))||[];0<l.length&&(a.a.Wc(l,k),h&&a.v.K(h,null,[d,k,m]));l.length=0;a.a.gb(l,k)},null,{l:b,Sa:function(){return!a.a.jd(l)}});\nreturn{Y:l,$:k.ja()?k:p}}var c=a.a.g.Z(),d=a.a.g.Z();a.a.cc=function(e,f,g,h,m,l){function k(b){x={Aa:b,nb:a.sa(w++)};v.push(x);t||F.push(x)}function q(b){x=r[b];w!==x.nb.w()&&D.push(x);x.nb(w++);a.a.Ua(x.Y,e);v.push(x)}function n(b,c){if(b)for(var d=0,e=c.length;d<e;d++)a.a.C(c[d].Y,function(a){b(a,d,c[d].Aa)})}f=f||[];\"undefined\"==typeof f.length&&(f=[f]);h=h||{};var r=a.a.g.get(e,c),t=!r,v=[],u=0,w=0,B=[],z=[],C=[],D=[],F=[],x,I=0;if(t)a.a.C(f,k);else{if(!l||r&&r._countWaitingForRemove){var E=\na.a.Mb(r,function(a){return a.Aa});l=a.a.Ob(E,f,{dontLimitMoves:h.dontLimitMoves,sparse:!0})}for(var E=0,G,H,K;G=l[E];E++)switch(H=G.moved,K=G.index,G.status){case \"deleted\":for(;u<K;)q(u++);H===p&&(x=r[u],x.$&&(x.$.s(),x.$=p),a.a.Ua(x.Y,e).length&&(h.beforeRemove&&(v.push(x),I++,x.Aa===d?x=null:C.push(x)),x&&B.push.apply(B,x.Y)));u++;break;case \"added\":for(;w<K;)q(u++);H!==p?(z.push(v.length),q(H)):k(G.value)}for(;w<f.length;)q(u++);v._countWaitingForRemove=I}a.a.g.set(e,c,v);n(h.beforeMove,D);a.a.C(B,\nh.beforeRemove?a.na:a.removeNode);var M,O,P;try{P=e.ownerDocument.activeElement}catch(N){}if(z.length)for(;(E=z.shift())!=p;){x=v[E];for(M=p;E;)if((O=v[--E].Y)&&O.length){M=O[O.length-1];break}for(f=0;u=x.Y[f];M=u,f++)a.h.Vb(e,u,M)}E=0;for(z=a.h.firstChild(e);x=v[E];E++){x.Y||a.a.extend(x,b(e,g,x.Aa,m,x.nb));for(f=0;u=x.Y[f];z=u.nextSibling,M=u,f++)u!==z&&a.h.Vb(e,u,M);!x.Dd&&m&&(m(x.Aa,x.Y,x.nb),x.Dd=!0,M=x.Y[x.Y.length-1])}P&&e.ownerDocument.activeElement!=P&&P.focus();n(h.beforeRemove,C);for(E=\n0;E<C.length;++E)C[E].Aa=d;n(h.afterMove,D);n(h.afterAdd,F)}})();a.b(\"utils.setDomNodeChildrenFromArrayMapping\",a.a.cc);a.ba=function(){this.allowTemplateRewriting=!1};a.ba.prototype=new a.ca;a.ba.prototype.constructor=a.ba;a.ba.prototype.renderTemplateSource=function(b,c,d,e){if(c=(9>a.a.W?0:b.nodes)?b.nodes():null)return a.a.la(c.cloneNode(!0).childNodes);b=b.text();return a.a.ta(b,e)};a.ba.Na=new a.ba;a.ec(a.ba.Na);a.b(\"nativeTemplateEngine\",a.ba);(function(){a.Za=function(){var a=this.Gd=function(){if(!v||\n!v.tmpl)return 0;try{if(0<=v.tmpl.tag.tmpl.open.toString().indexOf(\"__\"))return 2}catch(a){}return 1}();this.renderTemplateSource=function(b,e,f,g){g=g||w;f=f||{};if(2>a)throw Error(\"Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.\");var h=b.data(\"precompiled\");h||(h=b.text()||\"\",h=v.template(null,\"{{ko_with $item.koBindingContext}}\"+h+\"{{/ko_with}}\"),b.data(\"precompiled\",h));b=[e.$data];e=v.extend({koBindingContext:e},f.templateOptions);e=v.tmpl(h,b,e);e.appendTo(g.createElement(\"div\"));\nv.fragments={};return e};this.createJavaScriptEvaluatorBlock=function(a){return\"{{ko_code ((function() { return \"+a+\" })()) }}\"};this.addTemplate=function(a,b){w.write(\"<script type='text/html' id='\"+a+\"'>\"+b+\"\\x3c/script>\")};0<a&&(v.tmpl.tag.ko_code={open:\"__.push($1 || '');\"},v.tmpl.tag.ko_with={open:\"with($1) {\",close:\"} \"})};a.Za.prototype=new a.ca;a.Za.prototype.constructor=a.Za;var b=new a.Za;0<b.Gd&&a.ec(b);a.b(\"jqueryTmplTemplateEngine\",a.Za)})()})})();})();\n","var map = require(\"./map\");\n\nvar getCountryCode = function(localeString) {\n    var components = localeString.split(\"_\");\n    if (components.length == 2) {\n        return components.pop();\n    }\n    components = localeString.split(\"-\");\n    if (components.length == 2) {\n        return components.pop();\n    }\n    return localeString;\n}\n\nexports.getCurrency = function(locale) {\n    var countryCode = getCountryCode(locale).toUpperCase();\n    if (countryCode in map) {\n        return map[countryCode];\n    }\n    return null;\n}\n\nexports.getLocales = function(currencyCode) {\n    currencyCode = currencyCode.toUpperCase();\n    var locales = [];\n    for (countryCode in map) {\n        if (map[countryCode] === currencyCode) {\n            locales.push(countryCode);\n        }\n    }\n    return locales;\n}","// Generated using ShowCurrencies.java\nvar map = {\nAD: 'EUR',\nAE: 'AED',\nAF: 'AFN',\nAG: 'XCD',\nAI: 'XCD',\nAL: 'ALL',\nAM: 'AMD',\nAN: 'ANG',\nAO: 'AOA',\nAR: 'ARS',\nAS: 'USD',\nAT: 'EUR',\nAU: 'AUD',\nAW: 'AWG',\nAX: 'EUR',\nAZ: 'AZN',\nBA: 'BAM',\nBB: 'BBD',\nBD: 'BDT',\nBE: 'EUR',\nBF: 'XOF',\nBG: 'BGN',\nBH: 'BHD',\nBI: 'BIF',\nBJ: 'XOF',\nBL: 'EUR',\nBM: 'BMD',\nBN: 'BND',\nBO: 'BOB',\nBQ: 'USD',\nBR: 'BRL',\nBS: 'BSD',\nBT: 'BTN',\nBV: 'NOK',\nBW: 'BWP',\nBY: 'BYR',\nBZ: 'BZD',\nCA: 'CAD',\nCC: 'AUD',\nCD: 'CDF',\nCF: 'XAF',\nCG: 'XAF',\nCH: 'CHF',\nCI: 'XOF',\nCK: 'NZD',\nCL: 'CLP',\nCM: 'XAF',\nCN: 'CNY',\nCO: 'COP',\nCR: 'CRC',\nCU: 'CUP',\nCV: 'CVE',\nCW: 'ANG',\nCX: 'AUD',\nCY: 'EUR',\nCZ: 'CZK',\nDE: 'EUR',\nDJ: 'DJF',\nDK: 'DKK',\nDM: 'XCD',\nDO: 'DOP',\nDZ: 'DZD',\nEC: 'USD',\nEE: 'EUR',\nEG: 'EGP',\nEH: 'MAD',\nER: 'ERN',\nES: 'EUR',\nET: 'ETB',\nFI: 'EUR',\nFJ: 'FJD',\nFK: 'FKP',\nFM: 'USD',\nFO: 'DKK',\nFR: 'EUR',\nGA: 'XAF',\nGB: 'GBP',\nGD: 'XCD',\nGE: 'GEL',\nGF: 'EUR',\nGG: 'GBP',\nGH: 'GHS',\nGI: 'GIP',\nGL: 'DKK',\nGM: 'GMD',\nGN: 'GNF',\nGP: 'EUR',\nGQ: 'XAF',\nGR: 'EUR',\nGS: 'GBP',\nGT: 'GTQ',\nGU: 'USD',\nGW: 'XOF',\nGY: 'GYD',\nHK: 'HKD',\nHM: 'AUD',\nHN: 'HNL',\nHR: 'HRK',\nHT: 'HTG',\nHU: 'HUF',\nID: 'IDR',\nIE: 'EUR',\nIL: 'ILS',\nIM: 'GBP',\nIN: 'INR',\nIO: 'USD',\nIQ: 'IQD',\nIR: 'IRR',\nIS: 'ISK',\nIT: 'EUR',\nJE: 'GBP',\nJM: 'JMD',\nJO: 'JOD',\nJP: 'JPY',\nKE: 'KES',\nKG: 'KGS',\nKH: 'KHR',\nKI: 'AUD',\nKM: 'KMF',\nKN: 'XCD',\nKP: 'KPW',\nKR: 'KRW',\nKW: 'KWD',\nKY: 'KYD',\nKZ: 'KZT',\nLA: 'LAK',\nLB: 'LBP',\nLC: 'XCD',\nLI: 'CHF',\nLK: 'LKR',\nLR: 'LRD',\nLS: 'LSL',\nLT: 'LTL',\nLU: 'EUR',\nLV: 'LVL',\nLY: 'LYD',\nMA: 'MAD',\nMC: 'EUR',\nMD: 'MDL',\nME: 'EUR',\nMF: 'EUR',\nMG: 'MGA',\nMH: 'USD',\nMK: 'MKD',\nML: 'XOF',\nMM: 'MMK',\nMN: 'MNT',\nMO: 'MOP',\nMP: 'USD',\nMQ: 'EUR',\nMR: 'MRO',\nMS: 'XCD',\nMT: 'EUR',\nMU: 'MUR',\nMV: 'MVR',\nMW: 'MWK',\nMX: 'MXN',\nMY: 'MYR',\nMZ: 'MZN',\nNA: 'NAD',\nNC: 'XPF',\nNE: 'XOF',\nNF: 'AUD',\nNG: 'NGN',\nNI: 'NIO',\nNL: 'EUR',\nNO: 'NOK',\nNP: 'NPR',\nNR: 'AUD',\nNU: 'NZD',\nNZ: 'NZD',\nOM: 'OMR',\nPA: 'PAB',\nPE: 'PEN',\nPF: 'XPF',\nPG: 'PGK',\nPH: 'PHP',\nPK: 'PKR',\nPL: 'PLN',\nPM: 'EUR',\nPN: 'NZD',\nPR: 'USD',\nPS: 'ILS',\nPT: 'EUR',\nPW: 'USD',\nPY: 'PYG',\nQA: 'QAR',\nRE: 'EUR',\nRO: 'RON',\nRS: 'RSD',\nRU: 'RUB',\nRW: 'RWF',\nSA: 'SAR',\nSB: 'SBD',\nSC: 'SCR',\nSD: 'SDG',\nSE: 'SEK',\nSG: 'SGD',\nSH: 'SHP',\nSI: 'EUR',\nSJ: 'NOK',\nSK: 'EUR',\nSL: 'SLL',\nSM: 'EUR',\nSN: 'XOF',\nSO: 'SOS',\nSR: 'SRD',\nST: 'STD',\nSV: 'SVC',\nSX: 'ANG',\nSY: 'SYP',\nSZ: 'SZL',\nTC: 'USD',\nTD: 'XAF',\nTF: 'EUR',\nTG: 'XOF',\nTH: 'THB',\nTJ: 'TJS',\nTK: 'NZD',\nTL: 'USD',\nTM: 'TMT',\nTN: 'TND',\nTO: 'TOP',\nTR: 'TRY',\nTT: 'TTD',\nTV: 'AUD',\nTW: 'TWD',\nTZ: 'TZS',\nUA: 'UAH',\nUG: 'UGX',\nUM: 'USD',\nUS: 'USD',\nUY: 'UYU',\nUZ: 'UZS',\nVA: 'EUR',\nVC: 'XCD',\nVE: 'VEF',\nVG: 'USD',\nVI: 'USD',\nVN: 'VND',\nVU: 'VUV',\nWF: 'XPF',\nWS: 'WST',\nYE: 'YER',\nYT: 'EUR',\nZA: 'ZAR',\nZM: 'ZMK',\nZW: 'ZWL'\n};\n\nmodule.exports = map;","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","var MapCache = require('./_MapCache'),\n    setCacheAdd = require('./_setCacheAdd'),\n    setCacheHas = require('./_setCacheHas');\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nmodule.exports = SetCache;\n","var ListCache = require('./_ListCache'),\n    stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nmodule.exports = apply;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEach;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignMergeValue;\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignValue;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var copyObject = require('./_copyObject'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nmodule.exports = baseAssign;\n","var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nmodule.exports = baseAssignIn;\n","var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n","/**\n * The base implementation of `_.clamp` which doesn't coerce arguments.\n *\n * @private\n * @param {number} number The number to clamp.\n * @param {number} [lower] The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the clamped number.\n */\nfunction baseClamp(number, lower, upper) {\n  if (number === number) {\n    if (upper !== undefined) {\n      number = number <= upper ? number : upper;\n    }\n    if (lower !== undefined) {\n      number = number >= lower ? number : lower;\n    }\n  }\n  return number;\n}\n\nmodule.exports = baseClamp;\n","var Stack = require('./_Stack'),\n    arrayEach = require('./_arrayEach'),\n    assignValue = require('./_assignValue'),\n    baseAssign = require('./_baseAssign'),\n    baseAssignIn = require('./_baseAssignIn'),\n    cloneBuffer = require('./_cloneBuffer'),\n    copyArray = require('./_copyArray'),\n    copySymbols = require('./_copySymbols'),\n    copySymbolsIn = require('./_copySymbolsIn'),\n    getAllKeys = require('./_getAllKeys'),\n    getAllKeysIn = require('./_getAllKeysIn'),\n    getTag = require('./_getTag'),\n    initCloneArray = require('./_initCloneArray'),\n    initCloneByTag = require('./_initCloneByTag'),\n    initCloneObject = require('./_initCloneObject'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isMap = require('./isMap'),\n    isObject = require('./isObject'),\n    isSet = require('./isSet'),\n    keys = require('./keys'),\n    keysIn = require('./keysIn');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nmodule.exports = baseClone;\n","var isObject = require('./isObject');\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nmodule.exports = baseCreate;\n","var baseForOwn = require('./_baseForOwn'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n","var arrayPush = require('./_arrayPush'),\n    isFlattenable = require('./_isFlattenable');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","var createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n","var baseFor = require('./_baseFor'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n","var castPath = require('./_castPath'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n","var arrayPush = require('./_arrayPush'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nmodule.exports = baseGetAllKeys;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nmodule.exports = baseHasIn;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","var baseIsEqualDeep = require('./_baseIsEqualDeep'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nmodule.exports = baseIsEqual;\n","var Stack = require('./_Stack'),\n    equalArrays = require('./_equalArrays'),\n    equalByTag = require('./_equalByTag'),\n    equalObjects = require('./_equalObjects'),\n    getTag = require('./_getTag'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nmodule.exports = baseIsEqualDeep;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nmodule.exports = baseIsMap;\n","var Stack = require('./_Stack'),\n    baseIsEqual = require('./_baseIsEqual');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nmodule.exports = baseIsMatch;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nmodule.exports = baseIsSet;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","var baseMatches = require('./_baseMatches'),\n    baseMatchesProperty = require('./_baseMatchesProperty'),\n    identity = require('./identity'),\n    isArray = require('./isArray'),\n    property = require('./property');\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nmodule.exports = baseIteratee;\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","var isObject = require('./isObject'),\n    isPrototype = require('./_isPrototype'),\n    nativeKeysIn = require('./_nativeKeysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeysIn;\n","var baseEach = require('./_baseEach'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nmodule.exports = baseMap;\n","var baseIsMatch = require('./_baseIsMatch'),\n    getMatchData = require('./_getMatchData'),\n    matchesStrictComparable = require('./_matchesStrictComparable');\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nmodule.exports = baseMatches;\n","var baseIsEqual = require('./_baseIsEqual'),\n    get = require('./get'),\n    hasIn = require('./hasIn'),\n    isKey = require('./_isKey'),\n    isStrictComparable = require('./_isStrictComparable'),\n    matchesStrictComparable = require('./_matchesStrictComparable'),\n    toKey = require('./_toKey');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nmodule.exports = baseMatchesProperty;\n","var Stack = require('./_Stack'),\n    assignMergeValue = require('./_assignMergeValue'),\n    baseFor = require('./_baseFor'),\n    baseMergeDeep = require('./_baseMergeDeep'),\n    isObject = require('./isObject'),\n    keysIn = require('./keysIn'),\n    safeGet = require('./_safeGet');\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\nmodule.exports = baseMerge;\n","var assignMergeValue = require('./_assignMergeValue'),\n    cloneBuffer = require('./_cloneBuffer'),\n    cloneTypedArray = require('./_cloneTypedArray'),\n    copyArray = require('./_copyArray'),\n    initCloneObject = require('./_initCloneObject'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLikeObject = require('./isArrayLikeObject'),\n    isBuffer = require('./isBuffer'),\n    isFunction = require('./isFunction'),\n    isObject = require('./isObject'),\n    isPlainObject = require('./isPlainObject'),\n    isTypedArray = require('./isTypedArray'),\n    safeGet = require('./_safeGet'),\n    toPlainObject = require('./toPlainObject');\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\nmodule.exports = baseMergeDeep;\n","var arrayMap = require('./_arrayMap'),\n    baseGet = require('./_baseGet'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    baseSortBy = require('./_baseSortBy'),\n    baseUnary = require('./_baseUnary'),\n    compareMultiple = require('./_compareMultiple'),\n    identity = require('./identity'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `_.orderBy` without param guards.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n * @param {string[]} orders The sort orders of `iteratees`.\n * @returns {Array} Returns the new sorted array.\n */\nfunction baseOrderBy(collection, iteratees, orders) {\n  if (iteratees.length) {\n    iteratees = arrayMap(iteratees, function(iteratee) {\n      if (isArray(iteratee)) {\n        return function(value) {\n          return baseGet(value, iteratee.length === 1 ? iteratee[0] : iteratee);\n        }\n      }\n      return iteratee;\n    });\n  } else {\n    iteratees = [identity];\n  }\n\n  var index = -1;\n  iteratees = arrayMap(iteratees, baseUnary(baseIteratee));\n\n  var result = baseMap(collection, function(value, key, collection) {\n    var criteria = arrayMap(iteratees, function(iteratee) {\n      return iteratee(value);\n    });\n    return { 'criteria': criteria, 'index': ++index, 'value': value };\n  });\n\n  return baseSortBy(result, function(object, other) {\n    return compareMultiple(object, other, orders);\n  });\n}\n\nmodule.exports = baseOrderBy;\n","var basePickBy = require('./_basePickBy'),\n    hasIn = require('./hasIn');\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, paths) {\n  return basePickBy(object, paths, function(value, path) {\n    return hasIn(object, path);\n  });\n}\n\nmodule.exports = basePick;\n","var baseGet = require('./_baseGet'),\n    baseSet = require('./_baseSet'),\n    castPath = require('./_castPath');\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, paths, predicate) {\n  var index = -1,\n      length = paths.length,\n      result = {};\n\n  while (++index < length) {\n    var path = paths[index],\n        value = baseGet(object, path);\n\n    if (predicate(value, path)) {\n      baseSet(result, castPath(path, object), value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = basePickBy;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n","var baseGet = require('./_baseGet');\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nmodule.exports = basePropertyDeep;\n","var identity = require('./identity'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nmodule.exports = baseRest;\n","var assignValue = require('./_assignValue'),\n    castPath = require('./_castPath'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n      return object;\n    }\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nmodule.exports = baseSet;\n","var constant = require('./constant'),\n    defineProperty = require('./_defineProperty'),\n    identity = require('./identity');\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nmodule.exports = baseSetToString;\n","/**\n * The base implementation of `_.sortBy` which uses `comparer` to define the\n * sort order of `array` and replaces criteria objects with their corresponding\n * values.\n *\n * @private\n * @param {Array} array The array to sort.\n * @param {Function} comparer The function to define sort order.\n * @returns {Array} Returns `array`.\n */\nfunction baseSortBy(array, comparer) {\n  var length = array.length;\n\n  array.sort(comparer);\n  while (length--) {\n    array[length] = array[length].value;\n  }\n  return array;\n}\n\nmodule.exports = baseSortBy;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var arrayMap = require('./_arrayMap');\n\n/**\n * The base implementation of `_.values` and `_.valuesIn` which creates an\n * array of `object` property values corresponding to the property names\n * of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the array of property values.\n */\nfunction baseValues(object, props) {\n  return arrayMap(props, function(key) {\n    return object[key];\n  });\n}\n\nmodule.exports = baseValues;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nmodule.exports = cacheHas;\n","var identity = require('./identity');\n\n/**\n * Casts `value` to `identity` if it's not a function.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Function} Returns cast function.\n */\nfunction castFunction(value) {\n  return typeof value == 'function' ? value : identity;\n}\n\nmodule.exports = castFunction;\n","var isArray = require('./isArray'),\n    isKey = require('./_isKey'),\n    stringToPath = require('./_stringToPath'),\n    toString = require('./toString');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nmodule.exports = castPath;\n","var Uint8Array = require('./_Uint8Array');\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nmodule.exports = cloneArrayBuffer;\n","var root = require('./_root');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nmodule.exports = cloneBuffer;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nmodule.exports = cloneDataView;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nmodule.exports = cloneRegExp;\n","var Symbol = require('./_Symbol');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nmodule.exports = cloneSymbol;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nmodule.exports = cloneTypedArray;\n","var isSymbol = require('./isSymbol');\n\n/**\n * Compares values to sort them in ascending order.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {number} Returns the sort order indicator for `value`.\n */\nfunction compareAscending(value, other) {\n  if (value !== other) {\n    var valIsDefined = value !== undefined,\n        valIsNull = value === null,\n        valIsReflexive = value === value,\n        valIsSymbol = isSymbol(value);\n\n    var othIsDefined = other !== undefined,\n        othIsNull = other === null,\n        othIsReflexive = other === other,\n        othIsSymbol = isSymbol(other);\n\n    if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n        (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n        (valIsNull && othIsDefined && othIsReflexive) ||\n        (!valIsDefined && othIsReflexive) ||\n        !valIsReflexive) {\n      return 1;\n    }\n    if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n        (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n        (othIsNull && valIsDefined && valIsReflexive) ||\n        (!othIsDefined && valIsReflexive) ||\n        !othIsReflexive) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\nmodule.exports = compareAscending;\n","var compareAscending = require('./_compareAscending');\n\n/**\n * Used by `_.orderBy` to compare multiple properties of a value to another\n * and stable sort them.\n *\n * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n * of corresponding values.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {boolean[]|string[]} orders The order to sort by for each property.\n * @returns {number} Returns the sort order indicator for `object`.\n */\nfunction compareMultiple(object, other, orders) {\n  var index = -1,\n      objCriteria = object.criteria,\n      othCriteria = other.criteria,\n      length = objCriteria.length,\n      ordersLength = orders.length;\n\n  while (++index < length) {\n    var result = compareAscending(objCriteria[index], othCriteria[index]);\n    if (result) {\n      if (index >= ordersLength) {\n        return result;\n      }\n      var order = orders[index];\n      return result * (order == 'desc' ? -1 : 1);\n    }\n  }\n  // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n  // that causes it, under certain circumstances, to provide the same value for\n  // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n  // for more details.\n  //\n  // This also ensures a stable sort in V8 and other engines.\n  // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n  return object.index - other.index;\n}\n\nmodule.exports = compareMultiple;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = copyArray;\n","var assignValue = require('./_assignValue'),\n    baseAssignValue = require('./_baseAssignValue');\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nmodule.exports = copyObject;\n","var copyObject = require('./_copyObject'),\n    getSymbols = require('./_getSymbols');\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nmodule.exports = copySymbols;\n","var copyObject = require('./_copyObject'),\n    getSymbolsIn = require('./_getSymbolsIn');\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nmodule.exports = copySymbolsIn;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","var baseRest = require('./_baseRest'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nmodule.exports = createAssigner;\n","var isArrayLike = require('./isArrayLike');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n","var baseMerge = require('./_baseMerge'),\n    isObject = require('./isObject');\n\n/**\n * Used by `_.defaultsDeep` to customize its `_.merge` use to merge source\n * objects into destination objects that are passed thru.\n *\n * @private\n * @param {*} objValue The destination value.\n * @param {*} srcValue The source value.\n * @param {string} key The key of the property to merge.\n * @param {Object} object The parent object of `objValue`.\n * @param {Object} source The parent object of `srcValue`.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n * @returns {*} Returns the value to assign.\n */\nfunction customDefaultsMerge(objValue, srcValue, key, object, source, stack) {\n  if (isObject(objValue) && isObject(srcValue)) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, objValue);\n    baseMerge(objValue, srcValue, undefined, customDefaultsMerge, stack);\n    stack['delete'](srcValue);\n  }\n  return objValue;\n}\n\nmodule.exports = customDefaultsMerge;\n","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","var SetCache = require('./_SetCache'),\n    arraySome = require('./_arraySome'),\n    cacheHas = require('./_cacheHas');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalArrays;\n","var Symbol = require('./_Symbol'),\n    Uint8Array = require('./_Uint8Array'),\n    eq = require('./eq'),\n    equalArrays = require('./_equalArrays'),\n    mapToArray = require('./_mapToArray'),\n    setToArray = require('./_setToArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nmodule.exports = equalByTag;\n","var getAllKeys = require('./_getAllKeys');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalObjects;\n","var flatten = require('./flatten'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * A specialized version of `baseRest` which flattens the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @returns {Function} Returns the new function.\n */\nfunction flatRest(func) {\n  return setToString(overRest(func, undefined, flatten), func + '');\n}\n\nmodule.exports = flatRest;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbols = require('./_getSymbols'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nmodule.exports = getAllKeys;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbolsIn = require('./_getSymbolsIn'),\n    keysIn = require('./keysIn');\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nmodule.exports = getAllKeysIn;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","var isStrictComparable = require('./_isStrictComparable'),\n    keys = require('./keys');\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nmodule.exports = getMatchData;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var overArg = require('./_overArg');\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nmodule.exports = getPrototype;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","var arrayFilter = require('./_arrayFilter'),\n    stubArray = require('./stubArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nmodule.exports = getSymbols;\n","var arrayPush = require('./_arrayPush'),\n    getPrototype = require('./_getPrototype'),\n    getSymbols = require('./_getSymbols'),\n    stubArray = require('./stubArray');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nmodule.exports = getSymbolsIn;\n","var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var castPath = require('./_castPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isLength = require('./isLength'),\n    toKey = require('./_toKey');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nmodule.exports = hasPath;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nmodule.exports = initCloneArray;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer'),\n    cloneDataView = require('./_cloneDataView'),\n    cloneRegExp = require('./_cloneRegExp'),\n    cloneSymbol = require('./_cloneSymbol'),\n    cloneTypedArray = require('./_cloneTypedArray');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nmodule.exports = initCloneByTag;\n","var baseCreate = require('./_baseCreate'),\n    getPrototype = require('./_getPrototype'),\n    isPrototype = require('./_isPrototype');\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nmodule.exports = initCloneObject;\n","var Symbol = require('./_Symbol'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray');\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","var eq = require('./eq'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject');\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n","var isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nmodule.exports = isKey;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","var isObject = require('./isObject');\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nmodule.exports = isStrictComparable;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nmodule.exports = mapToArray;\n","/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nmodule.exports = matchesStrictComparable;\n","var memoize = require('./memoize');\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nmodule.exports = memoizeCapped;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = nativeKeysIn;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","var apply = require('./_apply');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nmodule.exports = overRest;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\nmodule.exports = safeGet;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nmodule.exports = setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nmodule.exports = setCacheHas;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nmodule.exports = setToArray;\n","var baseSetToString = require('./_baseSetToString'),\n    shortOut = require('./_shortOut');\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nmodule.exports = setToString;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nmodule.exports = shortOut;\n","var ListCache = require('./_ListCache');\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nmodule.exports = stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nmodule.exports = stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nmodule.exports = stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nmodule.exports = stackHas;\n","var ListCache = require('./_ListCache'),\n    Map = require('./_Map'),\n    MapCache = require('./_MapCache');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nmodule.exports = stackSet;\n","var memoizeCapped = require('./_memoizeCapped');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nmodule.exports = stringToPath;\n","var isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toKey;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n","var toInteger = require('./toInteger');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that invokes `func`, with the `this` binding and arguments\n * of the created function, while it's called less than `n` times. Subsequent\n * calls to the created function return the result of the last `func` invocation.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Function\n * @param {number} n The number of calls at which `func` is no longer invoked.\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new restricted function.\n * @example\n *\n * jQuery(element).on('click', _.before(5, addContactToList));\n * // => Allows adding up to 4 contacts to the list.\n */\nfunction before(n, func) {\n  var result;\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  n = toInteger(n);\n  return function() {\n    if (--n > 0) {\n      result = func.apply(this, arguments);\n    }\n    if (n <= 1) {\n      func = undefined;\n    }\n    return result;\n  };\n}\n\nmodule.exports = before;\n","var baseClamp = require('./_baseClamp'),\n    toNumber = require('./toNumber');\n\n/**\n * Clamps `number` within the inclusive `lower` and `upper` bounds.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Number\n * @param {number} number The number to clamp.\n * @param {number} [lower] The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the clamped number.\n * @example\n *\n * _.clamp(-10, -5, 5);\n * // => -5\n *\n * _.clamp(10, -5, 5);\n * // => 5\n */\nfunction clamp(number, lower, upper) {\n  if (upper === undefined) {\n    upper = lower;\n    lower = undefined;\n  }\n  if (upper !== undefined) {\n    upper = toNumber(upper);\n    upper = upper === upper ? upper : 0;\n  }\n  if (lower !== undefined) {\n    lower = toNumber(lower);\n    lower = lower === lower ? lower : 0;\n  }\n  return baseClamp(toNumber(number), lower, upper);\n}\n\nmodule.exports = clamp;\n","var baseClone = require('./_baseClone');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * Creates a shallow clone of `value`.\n *\n * **Note:** This method is loosely based on the\n * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n * and supports cloning arrays, array buffers, booleans, date objects, maps,\n * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n * arrays. The own enumerable properties of `arguments` objects are cloned\n * as plain objects. An empty object is returned for uncloneable values such\n * as error objects, functions, DOM nodes, and WeakMaps.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to clone.\n * @returns {*} Returns the cloned value.\n * @see _.cloneDeep\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var shallow = _.clone(objects);\n * console.log(shallow[0] === objects[0]);\n * // => true\n */\nfunction clone(value) {\n  return baseClone(value, CLONE_SYMBOLS_FLAG);\n}\n\nmodule.exports = clone;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","/**\n * Checks `value` to determine whether a default value should be returned in\n * its place. The `defaultValue` is returned if `value` is `NaN`, `null`,\n * or `undefined`.\n *\n * @static\n * @memberOf _\n * @since 4.14.0\n * @category Util\n * @param {*} value The value to check.\n * @param {*} defaultValue The default value.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * _.defaultTo(1, 10);\n * // => 1\n *\n * _.defaultTo(undefined, 10);\n * // => 10\n */\nfunction defaultTo(value, defaultValue) {\n  return (value == null || value !== value) ? defaultValue : value;\n}\n\nmodule.exports = defaultTo;\n","var baseRest = require('./_baseRest'),\n    eq = require('./eq'),\n    isIterateeCall = require('./_isIterateeCall'),\n    keysIn = require('./keysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns own and inherited enumerable string keyed properties of source\n * objects to the destination object for all destination properties that\n * resolve to `undefined`. Source objects are applied from left to right.\n * Once a property is set, additional values of the same property are ignored.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.defaultsDeep\n * @example\n *\n * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n * // => { 'a': 1, 'b': 2 }\n */\nvar defaults = baseRest(function(object, sources) {\n  object = Object(object);\n\n  var index = -1;\n  var length = sources.length;\n  var guard = length > 2 ? sources[2] : undefined;\n\n  if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n    length = 1;\n  }\n\n  while (++index < length) {\n    var source = sources[index];\n    var props = keysIn(source);\n    var propsIndex = -1;\n    var propsLength = props.length;\n\n    while (++propsIndex < propsLength) {\n      var key = props[propsIndex];\n      var value = object[key];\n\n      if (value === undefined ||\n          (eq(value, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n        object[key] = source[key];\n      }\n    }\n  }\n\n  return object;\n});\n\nmodule.exports = defaults;\n","var apply = require('./_apply'),\n    baseRest = require('./_baseRest'),\n    customDefaultsMerge = require('./_customDefaultsMerge'),\n    mergeWith = require('./mergeWith');\n\n/**\n * This method is like `_.defaults` except that it recursively assigns\n * default properties.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 3.10.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.defaults\n * @example\n *\n * _.defaultsDeep({ 'a': { 'b': 2 } }, { 'a': { 'b': 1, 'c': 3 } });\n * // => { 'a': { 'b': 2, 'c': 3 } }\n */\nvar defaultsDeep = baseRest(function(args) {\n  args.push(undefined, customDefaultsMerge);\n  return apply(mergeWith, undefined, args);\n});\n\nmodule.exports = defaultsDeep;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var baseFlatten = require('./_baseFlatten');\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nmodule.exports = flatten;\n","var baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","var baseHasIn = require('./_baseHasIn'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nmodule.exports = hasIn;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","var isArrayLike = require('./isArrayLike'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nmodule.exports = isArrayLikeObject;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","var baseKeys = require('./_baseKeys'),\n    getTag = require('./_getTag'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLike = require('./isArrayLike'),\n    isBuffer = require('./isBuffer'),\n    isPrototype = require('./_isPrototype'),\n    isTypedArray = require('./isTypedArray');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    setTag = '[object Set]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if `value` is an empty object, collection, map, or set.\n *\n * Objects are considered empty if they have no own enumerable string keyed\n * properties.\n *\n * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n * jQuery-like collections are considered empty if they have a `length` of `0`.\n * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (value == null) {\n    return true;\n  }\n  if (isArrayLike(value) &&\n      (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n        isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n    return !value.length;\n  }\n  var tag = getTag(value);\n  if (tag == mapTag || tag == setTag) {\n    return !value.size;\n  }\n  if (isPrototype(value)) {\n    return !baseKeys(value).length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = isEmpty;\n","var baseIsEqual = require('./_baseIsEqual');\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nmodule.exports = isEqual;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike'),\n    isPlainObject = require('./isPlainObject');\n\n/** `Object#toString` result references. */\nvar domExcTag = '[object DOMException]',\n    errorTag = '[object Error]';\n\n/**\n * Checks if `value` is an `Error`, `EvalError`, `RangeError`, `ReferenceError`,\n * `SyntaxError`, `TypeError`, or `URIError` object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an error object, else `false`.\n * @example\n *\n * _.isError(new Error);\n * // => true\n *\n * _.isError(Error);\n * // => false\n */\nfunction isError(value) {\n  if (!isObjectLike(value)) {\n    return false;\n  }\n  var tag = baseGetTag(value);\n  return tag == errorTag || tag == domExcTag ||\n    (typeof value.message == 'string' && typeof value.name == 'string' && !isPlainObject(value));\n}\n\nmodule.exports = isError;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","var baseIsMap = require('./_baseIsMap'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nmodule.exports = isMap;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    getPrototype = require('./_getPrototype'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nmodule.exports = isPlainObject;\n","var baseIsSet = require('./_baseIsSet'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nmodule.exports = isSet;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeysIn = require('./_baseKeysIn'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nmodule.exports = keysIn;\n","var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n","var baseMerge = require('./_baseMerge'),\n    createAssigner = require('./_createAssigner');\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nmodule.exports = merge;\n","var baseMerge = require('./_baseMerge'),\n    createAssigner = require('./_createAssigner');\n\n/**\n * This method is like `_.merge` except that it accepts `customizer` which\n * is invoked to produce the merged values of the destination and source\n * properties. If `customizer` returns `undefined`, merging is handled by the\n * method instead. The `customizer` is invoked with six arguments:\n * (objValue, srcValue, key, object, source, stack).\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} sources The source objects.\n * @param {Function} customizer The function to customize assigned values.\n * @returns {Object} Returns `object`.\n * @example\n *\n * function customizer(objValue, srcValue) {\n *   if (_.isArray(objValue)) {\n *     return objValue.concat(srcValue);\n *   }\n * }\n *\n * var object = { 'a': [1], 'b': [2] };\n * var other = { 'a': [3], 'b': [4] };\n *\n * _.mergeWith(object, other, customizer);\n * // => { 'a': [1, 3], 'b': [2, 4] }\n */\nvar mergeWith = createAssigner(function(object, source, srcIndex, customizer) {\n  baseMerge(object, source, srcIndex, customizer);\n});\n\nmodule.exports = mergeWith;\n","/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that negates the result of the predicate `func`. The\n * `func` predicate is invoked with the `this` binding and arguments of the\n * created function.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Function\n * @param {Function} predicate The predicate to negate.\n * @returns {Function} Returns the new negated function.\n * @example\n *\n * function isEven(n) {\n *   return n % 2 == 0;\n * }\n *\n * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));\n * // => [1, 3, 5]\n */\nfunction negate(predicate) {\n  if (typeof predicate != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  return function() {\n    var args = arguments;\n    switch (args.length) {\n      case 0: return !predicate.call(this);\n      case 1: return !predicate.call(this, args[0]);\n      case 2: return !predicate.call(this, args[0], args[1]);\n      case 3: return !predicate.call(this, args[0], args[1], args[2]);\n    }\n    return !predicate.apply(this, args);\n  };\n}\n\nmodule.exports = negate;\n","/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nmodule.exports = noop;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var baseIteratee = require('./_baseIteratee'),\n    negate = require('./negate'),\n    pickBy = require('./pickBy');\n\n/**\n * The opposite of `_.pickBy`; this method creates an object composed of\n * the own and inherited enumerable string keyed properties of `object` that\n * `predicate` doesn't return truthy for. The predicate is invoked with two\n * arguments: (value, key).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The source object.\n * @param {Function} [predicate=_.identity] The function invoked per property.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.omitBy(object, _.isNumber);\n * // => { 'b': '2' }\n */\nfunction omitBy(object, predicate) {\n  return pickBy(object, negate(baseIteratee(predicate)));\n}\n\nmodule.exports = omitBy;\n","var before = require('./before');\n\n/**\n * Creates a function that is restricted to invoking `func` once. Repeat calls\n * to the function return the value of the first invocation. The `func` is\n * invoked with the `this` binding and arguments of the created function.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new restricted function.\n * @example\n *\n * var initialize = _.once(createApplication);\n * initialize();\n * initialize();\n * // => `createApplication` is invoked once\n */\nfunction once(func) {\n  return before(2, func);\n}\n\nmodule.exports = once;\n","var basePick = require('./_basePick'),\n    flatRest = require('./_flatRest');\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to pick.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pick(object, ['a', 'c']);\n * // => { 'a': 1, 'c': 3 }\n */\nvar pick = flatRest(function(object, paths) {\n  return object == null ? {} : basePick(object, paths);\n});\n\nmodule.exports = pick;\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    basePickBy = require('./_basePickBy'),\n    getAllKeysIn = require('./_getAllKeysIn');\n\n/**\n * Creates an object composed of the `object` properties `predicate` returns\n * truthy for. The predicate is invoked with two arguments: (value, key).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The source object.\n * @param {Function} [predicate=_.identity] The function invoked per property.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pickBy(object, _.isNumber);\n * // => { 'a': 1, 'c': 3 }\n */\nfunction pickBy(object, predicate) {\n  if (object == null) {\n    return {};\n  }\n  var props = arrayMap(getAllKeysIn(object), function(prop) {\n    return [prop];\n  });\n  predicate = baseIteratee(predicate);\n  return basePickBy(object, props, function(value, path) {\n    return predicate(value, path[0]);\n  });\n}\n\nmodule.exports = pickBy;\n","var baseProperty = require('./_baseProperty'),\n    basePropertyDeep = require('./_basePropertyDeep'),\n    isKey = require('./_isKey'),\n    toKey = require('./_toKey');\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nmodule.exports = property;\n","var baseFlatten = require('./_baseFlatten'),\n    baseOrderBy = require('./_baseOrderBy'),\n    baseRest = require('./_baseRest'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Creates an array of elements, sorted in ascending order by the results of\n * running each element in a collection thru each iteratee. This method\n * performs a stable sort, that is, it preserves the original sort order of\n * equal elements. The iteratees are invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {...(Function|Function[])} [iteratees=[_.identity]]\n *  The iteratees to sort by.\n * @returns {Array} Returns the new sorted array.\n * @example\n *\n * var users = [\n *   { 'user': 'fred',   'age': 48 },\n *   { 'user': 'barney', 'age': 36 },\n *   { 'user': 'fred',   'age': 30 },\n *   { 'user': 'barney', 'age': 34 }\n * ];\n *\n * _.sortBy(users, [function(o) { return o.user; }]);\n * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 30]]\n *\n * _.sortBy(users, ['user', 'age']);\n * // => objects for [['barney', 34], ['barney', 36], ['fred', 30], ['fred', 48]]\n */\nvar sortBy = baseRest(function(collection, iteratees) {\n  if (collection == null) {\n    return [];\n  }\n  var length = iteratees.length;\n  if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n    iteratees = [];\n  } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n    iteratees = [iteratees[0]];\n  }\n  return baseOrderBy(collection, baseFlatten(iteratees, 1), []);\n});\n\nmodule.exports = sortBy;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","var baseTimes = require('./_baseTimes'),\n    castFunction = require('./_castFunction'),\n    toInteger = require('./toInteger');\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * Invokes the iteratee `n` times, returning an array of the results of\n * each invocation. The iteratee is invoked with one argument; (index).\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n * @example\n *\n * _.times(3, String);\n * // => ['0', '1', '2']\n *\n *  _.times(4, _.constant(0));\n * // => [0, 0, 0, 0]\n */\nfunction times(n, iteratee) {\n  n = toInteger(n);\n  if (n < 1 || n > MAX_SAFE_INTEGER) {\n    return [];\n  }\n  var index = MAX_ARRAY_LENGTH,\n      length = nativeMin(n, MAX_ARRAY_LENGTH);\n\n  iteratee = castFunction(iteratee);\n  n -= MAX_ARRAY_LENGTH;\n\n  var result = baseTimes(length, iteratee);\n  while (++index < n) {\n    iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = times;\n","var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nmodule.exports = toFinite;\n","var toFinite = require('./toFinite');\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nmodule.exports = toInteger;\n","var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nmodule.exports = toPlainObject;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","var baseValues = require('./_baseValues'),\n    keys = require('./keys');\n\n/**\n * Creates an array of the own enumerable string keyed property values of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property values.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.values(new Foo);\n * // => [1, 2] (iteration order is not guaranteed)\n *\n * _.values('hi');\n * // => ['h', 'i']\n */\nfunction values(object) {\n  return object == null ? [] : baseValues(object, keys(object));\n}\n\nmodule.exports = values;\n","/*global define:false */\n/**\n * Copyright 2012-2017 Craig Campbell\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * Mousetrap is a simple keyboard shortcut library for Javascript with\n * no external dependencies\n *\n * @version 1.6.2\n * @url craig.is/killing/mice\n */\n(function(window, document, undefined) {\n\n    // Check if mousetrap is used inside browser, if not, return\n    if (!window) {\n        return;\n    }\n\n    /**\n     * mapping of special keycodes to their corresponding keys\n     *\n     * everything in this dictionary cannot use keypress events\n     * so it has to be here to map to the correct keycodes for\n     * keyup/keydown events\n     *\n     * @type {Object}\n     */\n    var _MAP = {\n        8: 'backspace',\n        9: 'tab',\n        13: 'enter',\n        16: 'shift',\n        17: 'ctrl',\n        18: 'alt',\n        20: 'capslock',\n        27: 'esc',\n        32: 'space',\n        33: 'pageup',\n        34: 'pagedown',\n        35: 'end',\n        36: 'home',\n        37: 'left',\n        38: 'up',\n        39: 'right',\n        40: 'down',\n        45: 'ins',\n        46: 'del',\n        91: 'meta',\n        93: 'meta',\n        224: 'meta'\n    };\n\n    /**\n     * mapping for special characters so they can support\n     *\n     * this dictionary is only used incase you want to bind a\n     * keyup or keydown event to one of these keys\n     *\n     * @type {Object}\n     */\n    var _KEYCODE_MAP = {\n        106: '*',\n        107: '+',\n        109: '-',\n        110: '.',\n        111 : '/',\n        186: ';',\n        187: '=',\n        188: ',',\n        189: '-',\n        190: '.',\n        191: '/',\n        192: '`',\n        219: '[',\n        220: '\\\\',\n        221: ']',\n        222: '\\''\n    };\n\n    /**\n     * this is a mapping of keys that require shift on a US keypad\n     * back to the non shift equivelents\n     *\n     * this is so you can use keyup events with these keys\n     *\n     * note that this will only work reliably on US keyboards\n     *\n     * @type {Object}\n     */\n    var _SHIFT_MAP = {\n        '~': '`',\n        '!': '1',\n        '@': '2',\n        '#': '3',\n        '$': '4',\n        '%': '5',\n        '^': '6',\n        '&': '7',\n        '*': '8',\n        '(': '9',\n        ')': '0',\n        '_': '-',\n        '+': '=',\n        ':': ';',\n        '\\\"': '\\'',\n        '<': ',',\n        '>': '.',\n        '?': '/',\n        '|': '\\\\'\n    };\n\n    /**\n     * this is a list of special strings you can use to map\n     * to modifier keys when you specify your keyboard shortcuts\n     *\n     * @type {Object}\n     */\n    var _SPECIAL_ALIASES = {\n        'option': 'alt',\n        'command': 'meta',\n        'return': 'enter',\n        'escape': 'esc',\n        'plus': '+',\n        'mod': /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? 'meta' : 'ctrl'\n    };\n\n    /**\n     * variable to store the flipped version of _MAP from above\n     * needed to check if we should use keypress or not when no action\n     * is specified\n     *\n     * @type {Object|undefined}\n     */\n    var _REVERSE_MAP;\n\n    /**\n     * loop through the f keys, f1 to f19 and add them to the map\n     * programatically\n     */\n    for (var i = 1; i < 20; ++i) {\n        _MAP[111 + i] = 'f' + i;\n    }\n\n    /**\n     * loop through to map numbers on the numeric keypad\n     */\n    for (i = 0; i <= 9; ++i) {\n\n        // This needs to use a string cause otherwise since 0 is falsey\n        // mousetrap will never fire for numpad 0 pressed as part of a keydown\n        // event.\n        //\n        // @see https://github.com/ccampbell/mousetrap/pull/258\n        _MAP[i + 96] = i.toString();\n    }\n\n    /**\n     * cross browser add event method\n     *\n     * @param {Element|HTMLDocument} object\n     * @param {string} type\n     * @param {Function} callback\n     * @returns void\n     */\n    function _addEvent(object, type, callback) {\n        if (object.addEventListener) {\n            object.addEventListener(type, callback, false);\n            return;\n        }\n\n        object.attachEvent('on' + type, callback);\n    }\n\n    /**\n     * takes the event and returns the key character\n     *\n     * @param {Event} e\n     * @return {string}\n     */\n    function _characterFromEvent(e) {\n\n        // for keypress events we should return the character as is\n        if (e.type == 'keypress') {\n            var character = String.fromCharCode(e.which);\n\n            // if the shift key is not pressed then it is safe to assume\n            // that we want the character to be lowercase.  this means if\n            // you accidentally have caps lock on then your key bindings\n            // will continue to work\n            //\n            // the only side effect that might not be desired is if you\n            // bind something like 'A' cause you want to trigger an\n            // event when capital A is pressed caps lock will no longer\n            // trigger the event.  shift+a will though.\n            if (!e.shiftKey) {\n                character = character.toLowerCase();\n            }\n\n            return character;\n        }\n\n        // for non keypress events the special maps are needed\n        if (_MAP[e.which]) {\n            return _MAP[e.which];\n        }\n\n        if (_KEYCODE_MAP[e.which]) {\n            return _KEYCODE_MAP[e.which];\n        }\n\n        // if it is not in the special map\n\n        // with keydown and keyup events the character seems to always\n        // come in as an uppercase character whether you are pressing shift\n        // or not.  we should make sure it is always lowercase for comparisons\n        return String.fromCharCode(e.which).toLowerCase();\n    }\n\n    /**\n     * checks if two arrays are equal\n     *\n     * @param {Array} modifiers1\n     * @param {Array} modifiers2\n     * @returns {boolean}\n     */\n    function _modifiersMatch(modifiers1, modifiers2) {\n        return modifiers1.sort().join(',') === modifiers2.sort().join(',');\n    }\n\n    /**\n     * takes a key event and figures out what the modifiers are\n     *\n     * @param {Event} e\n     * @returns {Array}\n     */\n    function _eventModifiers(e) {\n        var modifiers = [];\n\n        if (e.shiftKey) {\n            modifiers.push('shift');\n        }\n\n        if (e.altKey) {\n            modifiers.push('alt');\n        }\n\n        if (e.ctrlKey) {\n            modifiers.push('ctrl');\n        }\n\n        if (e.metaKey) {\n            modifiers.push('meta');\n        }\n\n        return modifiers;\n    }\n\n    /**\n     * prevents default for this event\n     *\n     * @param {Event} e\n     * @returns void\n     */\n    function _preventDefault(e) {\n        if (e.preventDefault) {\n            e.preventDefault();\n            return;\n        }\n\n        e.returnValue = false;\n    }\n\n    /**\n     * stops propogation for this event\n     *\n     * @param {Event} e\n     * @returns void\n     */\n    function _stopPropagation(e) {\n        if (e.stopPropagation) {\n            e.stopPropagation();\n            return;\n        }\n\n        e.cancelBubble = true;\n    }\n\n    /**\n     * determines if the keycode specified is a modifier key or not\n     *\n     * @param {string} key\n     * @returns {boolean}\n     */\n    function _isModifier(key) {\n        return key == 'shift' || key == 'ctrl' || key == 'alt' || key == 'meta';\n    }\n\n    /**\n     * reverses the map lookup so that we can look for specific keys\n     * to see what can and can't use keypress\n     *\n     * @return {Object}\n     */\n    function _getReverseMap() {\n        if (!_REVERSE_MAP) {\n            _REVERSE_MAP = {};\n            for (var key in _MAP) {\n\n                // pull out the numeric keypad from here cause keypress should\n                // be able to detect the keys from the character\n                if (key > 95 && key < 112) {\n                    continue;\n                }\n\n                if (_MAP.hasOwnProperty(key)) {\n                    _REVERSE_MAP[_MAP[key]] = key;\n                }\n            }\n        }\n        return _REVERSE_MAP;\n    }\n\n    /**\n     * picks the best action based on the key combination\n     *\n     * @param {string} key - character for key\n     * @param {Array} modifiers\n     * @param {string=} action passed in\n     */\n    function _pickBestAction(key, modifiers, action) {\n\n        // if no action was picked in we should try to pick the one\n        // that we think would work best for this key\n        if (!action) {\n            action = _getReverseMap()[key] ? 'keydown' : 'keypress';\n        }\n\n        // modifier keys don't work as expected with keypress,\n        // switch to keydown\n        if (action == 'keypress' && modifiers.length) {\n            action = 'keydown';\n        }\n\n        return action;\n    }\n\n    /**\n     * Converts from a string key combination to an array\n     *\n     * @param  {string} combination like \"command+shift+l\"\n     * @return {Array}\n     */\n    function _keysFromString(combination) {\n        if (combination === '+') {\n            return ['+'];\n        }\n\n        combination = combination.replace(/\\+{2}/g, '+plus');\n        return combination.split('+');\n    }\n\n    /**\n     * Gets info for a specific key combination\n     *\n     * @param  {string} combination key combination (\"command+s\" or \"a\" or \"*\")\n     * @param  {string=} action\n     * @returns {Object}\n     */\n    function _getKeyInfo(combination, action) {\n        var keys;\n        var key;\n        var i;\n        var modifiers = [];\n\n        // take the keys from this pattern and figure out what the actual\n        // pattern is all about\n        keys = _keysFromString(combination);\n\n        for (i = 0; i < keys.length; ++i) {\n            key = keys[i];\n\n            // normalize key names\n            if (_SPECIAL_ALIASES[key]) {\n                key = _SPECIAL_ALIASES[key];\n            }\n\n            // if this is not a keypress event then we should\n            // be smart about using shift keys\n            // this will only work for US keyboards however\n            if (action && action != 'keypress' && _SHIFT_MAP[key]) {\n                key = _SHIFT_MAP[key];\n                modifiers.push('shift');\n            }\n\n            // if this key is a modifier then add it to the list of modifiers\n            if (_isModifier(key)) {\n                modifiers.push(key);\n            }\n        }\n\n        // depending on what the key combination is\n        // we will try to pick the best event for it\n        action = _pickBestAction(key, modifiers, action);\n\n        return {\n            key: key,\n            modifiers: modifiers,\n            action: action\n        };\n    }\n\n    function _belongsTo(element, ancestor) {\n        if (element === null || element === document) {\n            return false;\n        }\n\n        if (element === ancestor) {\n            return true;\n        }\n\n        return _belongsTo(element.parentNode, ancestor);\n    }\n\n    function Mousetrap(targetElement) {\n        var self = this;\n\n        targetElement = targetElement || document;\n\n        if (!(self instanceof Mousetrap)) {\n            return new Mousetrap(targetElement);\n        }\n\n        /**\n         * element to attach key events to\n         *\n         * @type {Element}\n         */\n        self.target = targetElement;\n\n        /**\n         * a list of all the callbacks setup via Mousetrap.bind()\n         *\n         * @type {Object}\n         */\n        self._callbacks = {};\n\n        /**\n         * direct map of string combinations to callbacks used for trigger()\n         *\n         * @type {Object}\n         */\n        self._directMap = {};\n\n        /**\n         * keeps track of what level each sequence is at since multiple\n         * sequences can start out with the same sequence\n         *\n         * @type {Object}\n         */\n        var _sequenceLevels = {};\n\n        /**\n         * variable to store the setTimeout call\n         *\n         * @type {null|number}\n         */\n        var _resetTimer;\n\n        /**\n         * temporary state where we will ignore the next keyup\n         *\n         * @type {boolean|string}\n         */\n        var _ignoreNextKeyup = false;\n\n        /**\n         * temporary state where we will ignore the next keypress\n         *\n         * @type {boolean}\n         */\n        var _ignoreNextKeypress = false;\n\n        /**\n         * are we currently inside of a sequence?\n         * type of action (\"keyup\" or \"keydown\" or \"keypress\") or false\n         *\n         * @type {boolean|string}\n         */\n        var _nextExpectedAction = false;\n\n        /**\n         * resets all sequence counters except for the ones passed in\n         *\n         * @param {Object} doNotReset\n         * @returns void\n         */\n        function _resetSequences(doNotReset) {\n            doNotReset = doNotReset || {};\n\n            var activeSequences = false,\n                key;\n\n            for (key in _sequenceLevels) {\n                if (doNotReset[key]) {\n                    activeSequences = true;\n                    continue;\n                }\n                _sequenceLevels[key] = 0;\n            }\n\n            if (!activeSequences) {\n                _nextExpectedAction = false;\n            }\n        }\n\n        /**\n         * finds all callbacks that match based on the keycode, modifiers,\n         * and action\n         *\n         * @param {string} character\n         * @param {Array} modifiers\n         * @param {Event|Object} e\n         * @param {string=} sequenceName - name of the sequence we are looking for\n         * @param {string=} combination\n         * @param {number=} level\n         * @returns {Array}\n         */\n        function _getMatches(character, modifiers, e, sequenceName, combination, level) {\n            var i;\n            var callback;\n            var matches = [];\n            var action = e.type;\n\n            // if there are no events related to this keycode\n            if (!self._callbacks[character]) {\n                return [];\n            }\n\n            // if a modifier key is coming up on its own we should allow it\n            if (action == 'keyup' && _isModifier(character)) {\n                modifiers = [character];\n            }\n\n            // loop through all callbacks for the key that was pressed\n            // and see if any of them match\n            for (i = 0; i < self._callbacks[character].length; ++i) {\n                callback = self._callbacks[character][i];\n\n                // if a sequence name is not specified, but this is a sequence at\n                // the wrong level then move onto the next match\n                if (!sequenceName && callback.seq && _sequenceLevels[callback.seq] != callback.level) {\n                    continue;\n                }\n\n                // if the action we are looking for doesn't match the action we got\n                // then we should keep going\n                if (action != callback.action) {\n                    continue;\n                }\n\n                // if this is a keypress event and the meta key and control key\n                // are not pressed that means that we need to only look at the\n                // character, otherwise check the modifiers as well\n                //\n                // chrome will not fire a keypress if meta or control is down\n                // safari will fire a keypress if meta or meta+shift is down\n                // firefox will fire a keypress if meta or control is down\n                if ((action == 'keypress' && !e.metaKey && !e.ctrlKey) || _modifiersMatch(modifiers, callback.modifiers)) {\n\n                    // when you bind a combination or sequence a second time it\n                    // should overwrite the first one.  if a sequenceName or\n                    // combination is specified in this call it does just that\n                    //\n                    // @todo make deleting its own method?\n                    var deleteCombo = !sequenceName && callback.combo == combination;\n                    var deleteSequence = sequenceName && callback.seq == sequenceName && callback.level == level;\n                    if (deleteCombo || deleteSequence) {\n                        self._callbacks[character].splice(i, 1);\n                    }\n\n                    matches.push(callback);\n                }\n            }\n\n            return matches;\n        }\n\n        /**\n         * actually calls the callback function\n         *\n         * if your callback function returns false this will use the jquery\n         * convention - prevent default and stop propogation on the event\n         *\n         * @param {Function} callback\n         * @param {Event} e\n         * @returns void\n         */\n        function _fireCallback(callback, e, combo, sequence) {\n\n            // if this event should not happen stop here\n            if (self.stopCallback(e, e.target || e.srcElement, combo, sequence)) {\n                return;\n            }\n\n            if (callback(e, combo) === false) {\n                _preventDefault(e);\n                _stopPropagation(e);\n            }\n        }\n\n        /**\n         * handles a character key event\n         *\n         * @param {string} character\n         * @param {Array} modifiers\n         * @param {Event} e\n         * @returns void\n         */\n        self._handleKey = function(character, modifiers, e) {\n            var callbacks = _getMatches(character, modifiers, e);\n            var i;\n            var doNotReset = {};\n            var maxLevel = 0;\n            var processedSequenceCallback = false;\n\n            // Calculate the maxLevel for sequences so we can only execute the longest callback sequence\n            for (i = 0; i < callbacks.length; ++i) {\n                if (callbacks[i].seq) {\n                    maxLevel = Math.max(maxLevel, callbacks[i].level);\n                }\n            }\n\n            // loop through matching callbacks for this key event\n            for (i = 0; i < callbacks.length; ++i) {\n\n                // fire for all sequence callbacks\n                // this is because if for example you have multiple sequences\n                // bound such as \"g i\" and \"g t\" they both need to fire the\n                // callback for matching g cause otherwise you can only ever\n                // match the first one\n                if (callbacks[i].seq) {\n\n                    // only fire callbacks for the maxLevel to prevent\n                    // subsequences from also firing\n                    //\n                    // for example 'a option b' should not cause 'option b' to fire\n                    // even though 'option b' is part of the other sequence\n                    //\n                    // any sequences that do not match here will be discarded\n                    // below by the _resetSequences call\n                    if (callbacks[i].level != maxLevel) {\n                        continue;\n                    }\n\n                    processedSequenceCallback = true;\n\n                    // keep a list of which sequences were matches for later\n                    doNotReset[callbacks[i].seq] = 1;\n                    _fireCallback(callbacks[i].callback, e, callbacks[i].combo, callbacks[i].seq);\n                    continue;\n                }\n\n                // if there were no sequence matches but we are still here\n                // that means this is a regular match so we should fire that\n                if (!processedSequenceCallback) {\n                    _fireCallback(callbacks[i].callback, e, callbacks[i].combo);\n                }\n            }\n\n            // if the key you pressed matches the type of sequence without\n            // being a modifier (ie \"keyup\" or \"keypress\") then we should\n            // reset all sequences that were not matched by this event\n            //\n            // this is so, for example, if you have the sequence \"h a t\" and you\n            // type \"h e a r t\" it does not match.  in this case the \"e\" will\n            // cause the sequence to reset\n            //\n            // modifier keys are ignored because you can have a sequence\n            // that contains modifiers such as \"enter ctrl+space\" and in most\n            // cases the modifier key will be pressed before the next key\n            //\n            // also if you have a sequence such as \"ctrl+b a\" then pressing the\n            // \"b\" key will trigger a \"keypress\" and a \"keydown\"\n            //\n            // the \"keydown\" is expected when there is a modifier, but the\n            // \"keypress\" ends up matching the _nextExpectedAction since it occurs\n            // after and that causes the sequence to reset\n            //\n            // we ignore keypresses in a sequence that directly follow a keydown\n            // for the same character\n            var ignoreThisKeypress = e.type == 'keypress' && _ignoreNextKeypress;\n            if (e.type == _nextExpectedAction && !_isModifier(character) && !ignoreThisKeypress) {\n                _resetSequences(doNotReset);\n            }\n\n            _ignoreNextKeypress = processedSequenceCallback && e.type == 'keydown';\n        };\n\n        /**\n         * handles a keydown event\n         *\n         * @param {Event} e\n         * @returns void\n         */\n        function _handleKeyEvent(e) {\n\n            // normalize e.which for key events\n            // @see http://stackoverflow.com/questions/4285627/javascript-keycode-vs-charcode-utter-confusion\n            if (typeof e.which !== 'number') {\n                e.which = e.keyCode;\n            }\n\n            var character = _characterFromEvent(e);\n\n            // no character found then stop\n            if (!character) {\n                return;\n            }\n\n            // need to use === for the character check because the character can be 0\n            if (e.type == 'keyup' && _ignoreNextKeyup === character) {\n                _ignoreNextKeyup = false;\n                return;\n            }\n\n            self.handleKey(character, _eventModifiers(e), e);\n        }\n\n        /**\n         * called to set a 1 second timeout on the specified sequence\n         *\n         * this is so after each key press in the sequence you have 1 second\n         * to press the next key before you have to start over\n         *\n         * @returns void\n         */\n        function _resetSequenceTimer() {\n            clearTimeout(_resetTimer);\n            _resetTimer = setTimeout(_resetSequences, 1000);\n        }\n\n        /**\n         * binds a key sequence to an event\n         *\n         * @param {string} combo - combo specified in bind call\n         * @param {Array} keys\n         * @param {Function} callback\n         * @param {string=} action\n         * @returns void\n         */\n        function _bindSequence(combo, keys, callback, action) {\n\n            // start off by adding a sequence level record for this combination\n            // and setting the level to 0\n            _sequenceLevels[combo] = 0;\n\n            /**\n             * callback to increase the sequence level for this sequence and reset\n             * all other sequences that were active\n             *\n             * @param {string} nextAction\n             * @returns {Function}\n             */\n            function _increaseSequence(nextAction) {\n                return function() {\n                    _nextExpectedAction = nextAction;\n                    ++_sequenceLevels[combo];\n                    _resetSequenceTimer();\n                };\n            }\n\n            /**\n             * wraps the specified callback inside of another function in order\n             * to reset all sequence counters as soon as this sequence is done\n             *\n             * @param {Event} e\n             * @returns void\n             */\n            function _callbackAndReset(e) {\n                _fireCallback(callback, e, combo);\n\n                // we should ignore the next key up if the action is key down\n                // or keypress.  this is so if you finish a sequence and\n                // release the key the final key will not trigger a keyup\n                if (action !== 'keyup') {\n                    _ignoreNextKeyup = _characterFromEvent(e);\n                }\n\n                // weird race condition if a sequence ends with the key\n                // another sequence begins with\n                setTimeout(_resetSequences, 10);\n            }\n\n            // loop through keys one at a time and bind the appropriate callback\n            // function.  for any key leading up to the final one it should\n            // increase the sequence. after the final, it should reset all sequences\n            //\n            // if an action is specified in the original bind call then that will\n            // be used throughout.  otherwise we will pass the action that the\n            // next key in the sequence should match.  this allows a sequence\n            // to mix and match keypress and keydown events depending on which\n            // ones are better suited to the key provided\n            for (var i = 0; i < keys.length; ++i) {\n                var isFinal = i + 1 === keys.length;\n                var wrappedCallback = isFinal ? _callbackAndReset : _increaseSequence(action || _getKeyInfo(keys[i + 1]).action);\n                _bindSingle(keys[i], wrappedCallback, action, combo, i);\n            }\n        }\n\n        /**\n         * binds a single keyboard combination\n         *\n         * @param {string} combination\n         * @param {Function} callback\n         * @param {string=} action\n         * @param {string=} sequenceName - name of sequence if part of sequence\n         * @param {number=} level - what part of the sequence the command is\n         * @returns void\n         */\n        function _bindSingle(combination, callback, action, sequenceName, level) {\n\n            // store a direct mapped reference for use with Mousetrap.trigger\n            self._directMap[combination + ':' + action] = callback;\n\n            // make sure multiple spaces in a row become a single space\n            combination = combination.replace(/\\s+/g, ' ');\n\n            var sequence = combination.split(' ');\n            var info;\n\n            // if this pattern is a sequence of keys then run through this method\n            // to reprocess each pattern one key at a time\n            if (sequence.length > 1) {\n                _bindSequence(combination, sequence, callback, action);\n                return;\n            }\n\n            info = _getKeyInfo(combination, action);\n\n            // make sure to initialize array if this is the first time\n            // a callback is added for this key\n            self._callbacks[info.key] = self._callbacks[info.key] || [];\n\n            // remove an existing match if there is one\n            _getMatches(info.key, info.modifiers, {type: info.action}, sequenceName, combination, level);\n\n            // add this call back to the array\n            // if it is a sequence put it at the beginning\n            // if not put it at the end\n            //\n            // this is important because the way these are processed expects\n            // the sequence ones to come first\n            self._callbacks[info.key][sequenceName ? 'unshift' : 'push']({\n                callback: callback,\n                modifiers: info.modifiers,\n                action: info.action,\n                seq: sequenceName,\n                level: level,\n                combo: combination\n            });\n        }\n\n        /**\n         * binds multiple combinations to the same callback\n         *\n         * @param {Array} combinations\n         * @param {Function} callback\n         * @param {string|undefined} action\n         * @returns void\n         */\n        self._bindMultiple = function(combinations, callback, action) {\n            for (var i = 0; i < combinations.length; ++i) {\n                _bindSingle(combinations[i], callback, action);\n            }\n        };\n\n        // start!\n        _addEvent(targetElement, 'keypress', _handleKeyEvent);\n        _addEvent(targetElement, 'keydown', _handleKeyEvent);\n        _addEvent(targetElement, 'keyup', _handleKeyEvent);\n    }\n\n    /**\n     * binds an event to mousetrap\n     *\n     * can be a single key, a combination of keys separated with +,\n     * an array of keys, or a sequence of keys separated by spaces\n     *\n     * be sure to list the modifier keys first to make sure that the\n     * correct key ends up getting bound (the last key in the pattern)\n     *\n     * @param {string|Array} keys\n     * @param {Function} callback\n     * @param {string=} action - 'keypress', 'keydown', or 'keyup'\n     * @returns void\n     */\n    Mousetrap.prototype.bind = function(keys, callback, action) {\n        var self = this;\n        keys = keys instanceof Array ? keys : [keys];\n        self._bindMultiple.call(self, keys, callback, action);\n        return self;\n    };\n\n    /**\n     * unbinds an event to mousetrap\n     *\n     * the unbinding sets the callback function of the specified key combo\n     * to an empty function and deletes the corresponding key in the\n     * _directMap dict.\n     *\n     * TODO: actually remove this from the _callbacks dictionary instead\n     * of binding an empty function\n     *\n     * the keycombo+action has to be exactly the same as\n     * it was defined in the bind method\n     *\n     * @param {string|Array} keys\n     * @param {string} action\n     * @returns void\n     */\n    Mousetrap.prototype.unbind = function(keys, action) {\n        var self = this;\n        return self.bind.call(self, keys, function() {}, action);\n    };\n\n    /**\n     * triggers an event that has already been bound\n     *\n     * @param {string} keys\n     * @param {string=} action\n     * @returns void\n     */\n    Mousetrap.prototype.trigger = function(keys, action) {\n        var self = this;\n        if (self._directMap[keys + ':' + action]) {\n            self._directMap[keys + ':' + action]({}, keys);\n        }\n        return self;\n    };\n\n    /**\n     * resets the library back to its initial state.  this is useful\n     * if you want to clear out the current keyboard shortcuts and bind\n     * new ones - for example if you switch to another page\n     *\n     * @returns void\n     */\n    Mousetrap.prototype.reset = function() {\n        var self = this;\n        self._callbacks = {};\n        self._directMap = {};\n        return self;\n    };\n\n    /**\n     * should we stop this event before firing off callbacks\n     *\n     * @param {Event} e\n     * @param {Element} element\n     * @return {boolean}\n     */\n    Mousetrap.prototype.stopCallback = function(e, element) {\n        var self = this;\n\n        // if the element has the class \"mousetrap\" then no need to stop\n        if ((' ' + element.className + ' ').indexOf(' mousetrap ') > -1) {\n            return false;\n        }\n\n        if (_belongsTo(element, self.target)) {\n            return false;\n        }\n\n        // stop for input, select, and textarea\n        return element.tagName == 'INPUT' || element.tagName == 'SELECT' || element.tagName == 'TEXTAREA' || element.isContentEditable;\n    };\n\n    /**\n     * exposes _handleKey publicly so it can be overwritten by extensions\n     */\n    Mousetrap.prototype.handleKey = function() {\n        var self = this;\n        return self._handleKey.apply(self, arguments);\n    };\n\n    /**\n     * allow custom key mappings\n     */\n    Mousetrap.addKeycodes = function(object) {\n        for (var key in object) {\n            if (object.hasOwnProperty(key)) {\n                _MAP[key] = object[key];\n            }\n        }\n        _REVERSE_MAP = null;\n    };\n\n    /**\n     * Init the global mousetrap functions\n     *\n     * This method is needed to allow the global mousetrap functions to work\n     * now that mousetrap is a constructor function.\n     */\n    Mousetrap.init = function() {\n        var documentMousetrap = Mousetrap(document);\n        for (var method in documentMousetrap) {\n            if (method.charAt(0) !== '_') {\n                Mousetrap[method] = (function(method) {\n                    return function() {\n                        return documentMousetrap[method].apply(documentMousetrap, arguments);\n                    };\n                } (method));\n            }\n        }\n    };\n\n    Mousetrap.init();\n\n    // expose mousetrap to the global object\n    window.Mousetrap = Mousetrap;\n\n    // expose as a common js module\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = Mousetrap;\n    }\n\n    // expose mousetrap as an AMD module\n    if (typeof define === 'function' && define.amd) {\n        define(function() {\n            return Mousetrap;\n        });\n    }\n}) (typeof window !== 'undefined' ? window : null, typeof  window !== 'undefined' ? document : null);\n","import { detectOverflow } from '@popperjs/core';\n\nvar maxSize = {\n  name: 'maxSize',\n  enabled: true,\n  phase: 'main',\n  requiresIfExists: ['offset', 'preventOverflow', 'flip'],\n  fn: function fn(_ref) {\n    var state = _ref.state,\n        name = _ref.name,\n        options = _ref.options;\n    var overflow = detectOverflow(state, options);\n\n    var _ref2 = state.modifiersData.preventOverflow || {\n      x: 0,\n      y: 0\n    },\n        x = _ref2.x,\n        y = _ref2.y;\n\n    var _state$rects$popper = state.rects.popper,\n        width = _state$rects$popper.width,\n        height = _state$rects$popper.height;\n\n    var _state$placement$spli = state.placement.split('-'),\n        basePlacement = _state$placement$spli[0];\n\n    var widthProp = basePlacement === 'left' ? 'left' : 'right';\n    var heightProp = basePlacement === 'top' ? 'top' : 'bottom';\n    state.modifiersData[name] = {\n      width: width - overflow[widthProp] - x,\n      height: height - overflow[heightProp] - y\n    };\n  }\n};\n\nexport default maxSize;\n","import isBrowser from './isBrowser';\n\nconst longerTimeoutBrowsers = ['Edge', 'Trident', 'Firefox'];\nlet timeoutDuration = 0;\nfor (let i = 0; i < longerTimeoutBrowsers.length; i += 1) {\n  if (isBrowser && navigator.userAgent.indexOf(longerTimeoutBrowsers[i]) >= 0) {\n    timeoutDuration = 1;\n    break;\n  }\n}\n\nexport function microtaskDebounce(fn) {\n  let called = false\n  return () => {\n    if (called) {\n      return\n    }\n    called = true\n    window.Promise.resolve().then(() => {\n      called = false\n      fn()\n    })\n  }\n}\n\nexport function taskDebounce(fn) {\n  let scheduled = false;\n  return () => {\n    if (!scheduled) {\n      scheduled = true;\n      setTimeout(() => {\n        scheduled = false;\n        fn();\n      }, timeoutDuration);\n    }\n  };\n}\n\nconst supportsMicroTasks = isBrowser && window.Promise\n\n\n/**\n* Create a debounced version of a method, that's asynchronously deferred\n* but called in the minimum time possible.\n*\n* @method\n* @memberof Popper.Utils\n* @argument {Function} fn\n* @returns {Function}\n*/\nexport default (supportsMicroTasks\n  ? microtaskDebounce\n  : taskDebounce);\n","export default typeof window !== 'undefined' && typeof document !== 'undefined';\n","/**\n * Check if the given variable is a function\n * @method\n * @memberof Popper.Utils\n * @argument {Any} functionToCheck - variable to check\n * @returns {Boolean} answer to: is a function?\n */\nexport default function isFunction(functionToCheck) {\n  const getType = {};\n  return (\n    functionToCheck &&\n    getType.toString.call(functionToCheck) === '[object Function]'\n  );\n}\n","/**\n * Get CSS computed property of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Eement} element\n * @argument {String} property\n */\nexport default function getStyleComputedProperty(element, property) {\n  if (element.nodeType !== 1) {\n    return [];\n  }\n  // NOTE: 1 DOM access here\n  const window = element.ownerDocument.defaultView;\n  const css = window.getComputedStyle(element, null);\n  return property ? css[property] : css;\n}\n","/**\n * Returns the parentNode or the host of the element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} parent\n */\nexport default function getParentNode(element) {\n  if (element.nodeName === 'HTML') {\n    return element;\n  }\n  return element.parentNode || element.host;\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport getParentNode from './getParentNode';\n\n/**\n * Returns the scrolling parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} scroll parent\n */\nexport default function getScrollParent(element) {\n  // Return body, `getScroll` will take care to get the correct `scrollTop` from it\n  if (!element) {\n    return document.body\n  }\n\n  switch (element.nodeName) {\n    case 'HTML':\n    case 'BODY':\n      return element.ownerDocument.body\n    case '#document':\n      return element.body\n  }\n\n  // Firefox want us to check `-x` and `-y` variations as well\n  const { overflow, overflowX, overflowY } = getStyleComputedProperty(element);\n  if (/(auto|scroll|overlay)/.test(overflow + overflowY + overflowX)) {\n    return element;\n  }\n\n  return getScrollParent(getParentNode(element));\n}\n","import isBrowser from './isBrowser';\n\nconst isIE11 = isBrowser && !!(window.MSInputMethodContext && document.documentMode);\nconst isIE10 = isBrowser && /MSIE 10/.test(navigator.userAgent);\n\n/**\n * Determines if the browser is Internet Explorer\n * @method\n * @memberof Popper.Utils\n * @param {Number} version to check\n * @returns {Boolean} isIE\n */\nexport default function isIE(version) {\n  if (version === 11) {\n    return isIE11;\n  }\n  if (version === 10) {\n    return isIE10;\n  }\n  return isIE11 || isIE10;\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport isIE from './isIE';\n/**\n * Returns the offset parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} offset parent\n */\nexport default function getOffsetParent(element) {\n  if (!element) {\n    return document.documentElement;\n  }\n\n  const noOffsetParent = isIE(10) ? document.body : null;\n\n  // NOTE: 1 DOM access here\n  let offsetParent = element.offsetParent || null;\n  // Skip hidden elements which don't have an offsetParent\n  while (offsetParent === noOffsetParent && element.nextElementSibling) {\n    offsetParent = (element = element.nextElementSibling).offsetParent;\n  }\n\n  const nodeName = offsetParent && offsetParent.nodeName;\n\n  if (!nodeName || nodeName === 'BODY' || nodeName === 'HTML') {\n    return element ? element.ownerDocument.documentElement : document.documentElement;\n  }\n\n  // .offsetParent will return the closest TH, TD or TABLE in case\n  // no offsetParent is present, I hate this job...\n  if (\n    ['TH', 'TD', 'TABLE'].indexOf(offsetParent.nodeName) !== -1 &&\n    getStyleComputedProperty(offsetParent, 'position') === 'static'\n  ) {\n    return getOffsetParent(offsetParent);\n  }\n\n  return offsetParent;\n}\n","/**\n * Finds the root node (document, shadowDOM root) of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} node\n * @returns {Element} root node\n */\nexport default function getRoot(node) {\n  if (node.parentNode !== null) {\n    return getRoot(node.parentNode);\n  }\n\n  return node;\n}\n","import isOffsetContainer from './isOffsetContainer';\nimport getRoot from './getRoot';\nimport getOffsetParent from './getOffsetParent';\n\n/**\n * Finds the offset parent common to the two provided nodes\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element1\n * @argument {Element} element2\n * @returns {Element} common offset parent\n */\nexport default function findCommonOffsetParent(element1, element2) {\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\n  if (!element1 || !element1.nodeType || !element2 || !element2.nodeType) {\n    return document.documentElement;\n  }\n\n  // Here we make sure to give as \"start\" the element that comes first in the DOM\n  const order =\n    element1.compareDocumentPosition(element2) &\n    Node.DOCUMENT_POSITION_FOLLOWING;\n  const start = order ? element1 : element2;\n  const end = order ? element2 : element1;\n\n  // Get common ancestor container\n  const range = document.createRange();\n  range.setStart(start, 0);\n  range.setEnd(end, 0);\n  const { commonAncestorContainer } = range;\n\n  // Both nodes are inside #document\n  if (\n    (element1 !== commonAncestorContainer &&\n      element2 !== commonAncestorContainer) ||\n    start.contains(end)\n  ) {\n    if (isOffsetContainer(commonAncestorContainer)) {\n      return commonAncestorContainer;\n    }\n\n    return getOffsetParent(commonAncestorContainer);\n  }\n\n  // one of the nodes is inside shadowDOM, find which one\n  const element1root = getRoot(element1);\n  if (element1root.host) {\n    return findCommonOffsetParent(element1root.host, element2);\n  } else {\n    return findCommonOffsetParent(element1, getRoot(element2).host);\n  }\n}\n","import getOffsetParent from './getOffsetParent';\n\nexport default function isOffsetContainer(element) {\n  const { nodeName } = element;\n  if (nodeName === 'BODY') {\n    return false;\n  }\n  return (\n    nodeName === 'HTML' || getOffsetParent(element.firstElementChild) === element\n  );\n}\n","/**\n * Gets the scroll value of the given element in the given side (top and left)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {String} side `top` or `left`\n * @returns {number} amount of scrolled pixels\n */\nexport default function getScroll(element, side = 'top') {\n  const upperSide = side === 'top' ? 'scrollTop' : 'scrollLeft';\n  const nodeName = element.nodeName;\n\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    const html = element.ownerDocument.documentElement;\n    const scrollingElement = element.ownerDocument.scrollingElement || html;\n    return scrollingElement[upperSide];\n  }\n\n  return element[upperSide];\n}\n","import getScroll from './getScroll';\n\n/*\n * Sum or subtract the element scroll values (left and top) from a given rect object\n * @method\n * @memberof Popper.Utils\n * @param {Object} rect - Rect object you want to change\n * @param {HTMLElement} element - The element from the function reads the scroll values\n * @param {Boolean} subtract - set to true if you want to subtract the scroll values\n * @return {Object} rect - The modifier rect object\n */\nexport default function includeScroll(rect, element, subtract = false) {\n  const scrollTop = getScroll(element, 'top');\n  const scrollLeft = getScroll(element, 'left');\n  const modifier = subtract ? -1 : 1;\n  rect.top += scrollTop * modifier;\n  rect.bottom += scrollTop * modifier;\n  rect.left += scrollLeft * modifier;\n  rect.right += scrollLeft * modifier;\n  return rect;\n}\n","/*\n * Helper to detect borders of a given element\n * @method\n * @memberof Popper.Utils\n * @param {CSSStyleDeclaration} styles\n * Result of `getStyleComputedProperty` on the given element\n * @param {String} axis - `x` or `y`\n * @return {number} borders - The borders size of the given axis\n */\n\nexport default function getBordersSize(styles, axis) {\n  const sideA = axis === 'x' ? 'Left' : 'Top';\n  const sideB = sideA === 'Left' ? 'Right' : 'Bottom';\n\n  return (\n    parseFloat(styles[`border${sideA}Width`], 10) +\n    parseFloat(styles[`border${sideB}Width`], 10)\n  );\n}\n","import isIE from './isIE';\n\nfunction getSize(axis, body, html, computedStyle) {\n  return Math.max(\n    body[`offset${axis}`],\n    body[`scroll${axis}`],\n    html[`client${axis}`],\n    html[`offset${axis}`],\n    html[`scroll${axis}`],\n    isIE(10)\n      ? (parseInt(html[`offset${axis}`]) + \n      parseInt(computedStyle[`margin${axis === 'Height' ? 'Top' : 'Left'}`]) + \n      parseInt(computedStyle[`margin${axis === 'Height' ? 'Bottom' : 'Right'}`]))\n    : 0 \n  );\n}\n\nexport default function getWindowSizes(document) {\n  const body = document.body;\n  const html = document.documentElement;\n  const computedStyle = isIE(10) && getComputedStyle(html);\n\n  return {\n    height: getSize('Height', body, html, computedStyle),\n    width: getSize('Width', body, html, computedStyle),\n  };\n}\n","/**\n * Given element offsets, generate an output similar to getBoundingClientRect\n * @method\n * @memberof Popper.Utils\n * @argument {Object} offsets\n * @returns {Object} ClientRect like output\n */\nexport default function getClientRect(offsets) {\n  return {\n    ...offsets,\n    right: offsets.left + offsets.width,\n    bottom: offsets.top + offsets.height,\n  };\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport getBordersSize from './getBordersSize';\nimport getWindowSizes from './getWindowSizes';\nimport getScroll from './getScroll';\nimport getClientRect from './getClientRect';\nimport isIE from './isIE';\n\n/**\n * Get bounding client rect of given element\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} element\n * @return {Object} client rect\n */\nexport default function getBoundingClientRect(element) {\n  let rect = {};\n\n  // IE10 10 FIX: Please, don't ask, the element isn't\n  // considered in DOM in some circumstances...\n  // This isn't reproducible in IE10 compatibility mode of IE11\n  try {\n    if (isIE(10)) {\n      rect = element.getBoundingClientRect();\n      const scrollTop = getScroll(element, 'top');\n      const scrollLeft = getScroll(element, 'left');\n      rect.top += scrollTop;\n      rect.left += scrollLeft;\n      rect.bottom += scrollTop;\n      rect.right += scrollLeft;\n    }\n    else {\n      rect = element.getBoundingClientRect();\n    }\n  }\n  catch(e){}\n\n  const result = {\n    left: rect.left,\n    top: rect.top,\n    width: rect.right - rect.left,\n    height: rect.bottom - rect.top,\n  };\n\n  // subtract scrollbar size from sizes\n  const sizes = element.nodeName === 'HTML' ? getWindowSizes(element.ownerDocument) : {};\n  const width =\n    sizes.width || element.clientWidth || result.right - result.left;\n  const height =\n    sizes.height || element.clientHeight || result.bottom - result.top;\n\n  let horizScrollbar = element.offsetWidth - width;\n  let vertScrollbar = element.offsetHeight - height;\n\n  // if an hypothetical scrollbar is detected, we must be sure it's not a `border`\n  // we make this check conditional for performance reasons\n  if (horizScrollbar || vertScrollbar) {\n    const styles = getStyleComputedProperty(element);\n    horizScrollbar -= getBordersSize(styles, 'x');\n    vertScrollbar -= getBordersSize(styles, 'y');\n\n    result.width -= horizScrollbar;\n    result.height -= vertScrollbar;\n  }\n\n  return getClientRect(result);\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport includeScroll from './includeScroll';\nimport getScrollParent from './getScrollParent';\nimport getBoundingClientRect from './getBoundingClientRect';\nimport runIsIE from './isIE';\nimport getClientRect from './getClientRect';\n\nexport default function getOffsetRectRelativeToArbitraryNode(children, parent, fixedPosition = false) {\n  const isIE10 = runIsIE(10);\n  const isHTML = parent.nodeName === 'HTML';\n  const childrenRect = getBoundingClientRect(children);\n  const parentRect = getBoundingClientRect(parent);\n  const scrollParent = getScrollParent(children);\n\n  const styles = getStyleComputedProperty(parent);\n  const borderTopWidth = parseFloat(styles.borderTopWidth, 10);\n  const borderLeftWidth = parseFloat(styles.borderLeftWidth, 10);\n\n  // In cases where the parent is fixed, we must ignore negative scroll in offset calc\n  if(fixedPosition && isHTML) {\n    parentRect.top = Math.max(parentRect.top, 0);\n    parentRect.left = Math.max(parentRect.left, 0);\n  }\n  let offsets = getClientRect({\n    top: childrenRect.top - parentRect.top - borderTopWidth,\n    left: childrenRect.left - parentRect.left - borderLeftWidth,\n    width: childrenRect.width,\n    height: childrenRect.height,\n  });\n  offsets.marginTop = 0;\n  offsets.marginLeft = 0;\n\n  // Subtract margins of documentElement in case it's being used as parent\n  // we do this only on HTML because it's the only element that behaves\n  // differently when margins are applied to it. The margins are included in\n  // the box of the documentElement, in the other cases not.\n  if (!isIE10 && isHTML) {\n    const marginTop = parseFloat(styles.marginTop, 10);\n    const marginLeft = parseFloat(styles.marginLeft, 10);\n\n    offsets.top -= borderTopWidth - marginTop;\n    offsets.bottom -= borderTopWidth - marginTop;\n    offsets.left -= borderLeftWidth - marginLeft;\n    offsets.right -= borderLeftWidth - marginLeft;\n\n    // Attach marginTop and marginLeft because in some circumstances we may need them\n    offsets.marginTop = marginTop;\n    offsets.marginLeft = marginLeft;\n  }\n\n  if (\n    isIE10 && !fixedPosition\n      ? parent.contains(scrollParent)\n      : parent === scrollParent && scrollParent.nodeName !== 'BODY'\n  ) {\n    offsets = includeScroll(offsets, parent);\n  }\n\n  return offsets;\n}\n","import getOffsetRectRelativeToArbitraryNode from './getOffsetRectRelativeToArbitraryNode';\nimport getScroll from './getScroll';\nimport getClientRect from './getClientRect';\n\nexport default function getViewportOffsetRectRelativeToArtbitraryNode(element, excludeScroll = false) {\n  const html = element.ownerDocument.documentElement;\n  const relativeOffset = getOffsetRectRelativeToArbitraryNode(element, html);\n  const width = Math.max(html.clientWidth, window.innerWidth || 0);\n  const height = Math.max(html.clientHeight, window.innerHeight || 0);\n\n  const scrollTop = !excludeScroll ? getScroll(html) : 0;\n  const scrollLeft = !excludeScroll ? getScroll(html, 'left') : 0;\n\n  const offset = {\n    top: scrollTop - relativeOffset.top + relativeOffset.marginTop,\n    left: scrollLeft - relativeOffset.left + relativeOffset.marginLeft,\n    width,\n    height,\n  };\n\n  return getClientRect(offset);\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport getParentNode from './getParentNode';\n\n/**\n * Check if the given element is fixed or is inside a fixed parent\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {Element} customContainer\n * @returns {Boolean} answer to \"isFixed?\"\n */\nexport default function isFixed(element) {\n  const nodeName = element.nodeName;\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    return false;\n  }\n  if (getStyleComputedProperty(element, 'position') === 'fixed') {\n    return true;\n  }\n  const parentNode = getParentNode(element);\n  if (!parentNode) {\n    return false;\n  }\n  return isFixed(parentNode);\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport isIE from './isIE';\n/**\n * Finds the first parent of an element that has a transformed property defined\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} first transformed parent or documentElement\n */\n\nexport default function getFixedPositionOffsetParent(element) {\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\n   if (!element || !element.parentElement || isIE()) {\n    return document.documentElement;\n  }\n  let el = element.parentElement;\n  while (el && getStyleComputedProperty(el, 'transform') === 'none') {\n    el = el.parentElement;\n  }\n  return el || document.documentElement;\n\n}\n","import getScrollParent from './getScrollParent';\nimport getParentNode from './getParentNode';\nimport findCommonOffsetParent from './findCommonOffsetParent';\nimport getOffsetRectRelativeToArbitraryNode from './getOffsetRectRelativeToArbitraryNode';\nimport getViewportOffsetRectRelativeToArtbitraryNode from './getViewportOffsetRectRelativeToArtbitraryNode';\nimport getWindowSizes from './getWindowSizes';\nimport isFixed from './isFixed';\nimport getFixedPositionOffsetParent from './getFixedPositionOffsetParent';\n\n/**\n * Computed the boundaries limits and return them\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} popper\n * @param {HTMLElement} reference\n * @param {number} padding\n * @param {HTMLElement} boundariesElement - Element used to define the boundaries\n * @param {Boolean} fixedPosition - Is in fixed position mode\n * @returns {Object} Coordinates of the boundaries\n */\nexport default function getBoundaries(\n  popper,\n  reference,\n  padding,\n  boundariesElement,\n  fixedPosition = false\n) {\n  // NOTE: 1 DOM access here\n\n  let boundaries = { top: 0, left: 0 };\n  const offsetParent = fixedPosition ? getFixedPositionOffsetParent(popper) : findCommonOffsetParent(popper, reference);\n\n  // Handle viewport case\n  if (boundariesElement === 'viewport' ) {\n    boundaries = getViewportOffsetRectRelativeToArtbitraryNode(offsetParent, fixedPosition);\n  }\n\n  else {\n    // Handle other cases based on DOM element used as boundaries\n    let boundariesNode;\n    if (boundariesElement === 'scrollParent') {\n      boundariesNode = getScrollParent(getParentNode(reference));\n      if (boundariesNode.nodeName === 'BODY') {\n        boundariesNode = popper.ownerDocument.documentElement;\n      }\n    } else if (boundariesElement === 'window') {\n      boundariesNode = popper.ownerDocument.documentElement;\n    } else {\n      boundariesNode = boundariesElement;\n    }\n\n    const offsets = getOffsetRectRelativeToArbitraryNode(\n      boundariesNode,\n      offsetParent,\n      fixedPosition\n    );\n\n    // In case of HTML, we need a different computation\n    if (boundariesNode.nodeName === 'HTML' && !isFixed(offsetParent)) {\n      const { height, width } = getWindowSizes(popper.ownerDocument);\n      boundaries.top += offsets.top - offsets.marginTop;\n      boundaries.bottom = height + offsets.top;\n      boundaries.left += offsets.left - offsets.marginLeft;\n      boundaries.right = width + offsets.left;\n    } else {\n      // for all the other DOM elements, this one is good\n      boundaries = offsets;\n    }\n  }\n\n  // Add paddings\n  padding = padding || 0;\n  const isPaddingNumber = typeof padding === 'number';\n  boundaries.left += isPaddingNumber ? padding : padding.left || 0; \n  boundaries.top += isPaddingNumber ? padding : padding.top || 0; \n  boundaries.right -= isPaddingNumber ? padding : padding.right || 0; \n  boundaries.bottom -= isPaddingNumber ? padding : padding.bottom || 0; \n\n  return boundaries;\n}\n","import getBoundaries from '../utils/getBoundaries';\n\nfunction getArea({ width, height }) {\n  return width * height;\n}\n\n/**\n * Utility used to transform the `auto` placement to the placement with more\n * available space.\n * @method\n * @memberof Popper.Utils\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function computeAutoPlacement(\n  placement,\n  refRect,\n  popper,\n  reference,\n  boundariesElement,\n  padding = 0\n) {\n  if (placement.indexOf('auto') === -1) {\n    return placement;\n  }\n\n  const boundaries = getBoundaries(\n    popper,\n    reference,\n    padding,\n    boundariesElement\n  );\n\n  const rects = {\n    top: {\n      width: boundaries.width,\n      height: refRect.top - boundaries.top,\n    },\n    right: {\n      width: boundaries.right - refRect.right,\n      height: boundaries.height,\n    },\n    bottom: {\n      width: boundaries.width,\n      height: boundaries.bottom - refRect.bottom,\n    },\n    left: {\n      width: refRect.left - boundaries.left,\n      height: boundaries.height,\n    },\n  };\n\n  const sortedAreas = Object.keys(rects)\n    .map(key => ({\n      key,\n      ...rects[key],\n      area: getArea(rects[key]),\n    }))\n    .sort((a, b) => b.area - a.area);\n\n  const filteredAreas = sortedAreas.filter(\n    ({ width, height }) =>\n      width >= popper.clientWidth && height >= popper.clientHeight\n  );\n\n  const computedPlacement = filteredAreas.length > 0\n    ? filteredAreas[0].key\n    : sortedAreas[0].key;\n\n  const variation = placement.split('-')[1];\n\n  return computedPlacement + (variation ? `-${variation}` : '');\n}\n","import findCommonOffsetParent from './findCommonOffsetParent';\nimport getOffsetRectRelativeToArbitraryNode from './getOffsetRectRelativeToArbitraryNode';\nimport getFixedPositionOffsetParent from './getFixedPositionOffsetParent';\n\n/**\n * Get offsets to the reference element\n * @method\n * @memberof Popper.Utils\n * @param {Object} state\n * @param {Element} popper - the popper element\n * @param {Element} reference - the reference element (the popper will be relative to this)\n * @param {Element} fixedPosition - is in fixed position mode\n * @returns {Object} An object containing the offsets which will be applied to the popper\n */\nexport default function getReferenceOffsets(state, popper, reference, fixedPosition = null) {\n  const commonOffsetParent = fixedPosition ? getFixedPositionOffsetParent(popper) : findCommonOffsetParent(popper, reference);\n  return getOffsetRectRelativeToArbitraryNode(reference, commonOffsetParent, fixedPosition);\n}\n","/**\n * Get the outer sizes of the given element (offset size + margins)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Object} object containing width and height properties\n */\nexport default function getOuterSizes(element) {\n  const window = element.ownerDocument.defaultView;\n  const styles = window.getComputedStyle(element);\n  const x = parseFloat(styles.marginTop || 0) + parseFloat(styles.marginBottom || 0);\n  const y = parseFloat(styles.marginLeft || 0) + parseFloat(styles.marginRight || 0);\n  const result = {\n    width: element.offsetWidth + y,\n    height: element.offsetHeight + x,\n  };\n  return result;\n}\n","/**\n * Get the opposite placement of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement\n * @returns {String} flipped placement\n */\nexport default function getOppositePlacement(placement) {\n  const hash = { left: 'right', right: 'left', bottom: 'top', top: 'bottom' };\n  return placement.replace(/left|right|bottom|top/g, matched => hash[matched]);\n}\n","import getOuterSizes from './getOuterSizes';\nimport getOppositePlacement from './getOppositePlacement';\n\n/**\n * Get offsets to the popper\n * @method\n * @memberof Popper.Utils\n * @param {Object} position - CSS position the Popper will get applied\n * @param {HTMLElement} popper - the popper element\n * @param {Object} referenceOffsets - the reference offsets (the popper will be relative to this)\n * @param {String} placement - one of the valid placement options\n * @returns {Object} popperOffsets - An object containing the offsets which will be applied to the popper\n */\nexport default function getPopperOffsets(popper, referenceOffsets, placement) {\n  placement = placement.split('-')[0];\n\n  // Get popper node sizes\n  const popperRect = getOuterSizes(popper);\n\n  // Add position, width and height to our offsets object\n  const popperOffsets = {\n    width: popperRect.width,\n    height: popperRect.height,\n  };\n\n  // depending by the popper placement we have to compute its offsets slightly differently\n  const isHoriz = ['right', 'left'].indexOf(placement) !== -1;\n  const mainSide = isHoriz ? 'top' : 'left';\n  const secondarySide = isHoriz ? 'left' : 'top';\n  const measurement = isHoriz ? 'height' : 'width';\n  const secondaryMeasurement = !isHoriz ? 'height' : 'width';\n\n  popperOffsets[mainSide] =\n    referenceOffsets[mainSide] +\n    referenceOffsets[measurement] / 2 -\n    popperRect[measurement] / 2;\n  if (placement === secondarySide) {\n    popperOffsets[secondarySide] =\n      referenceOffsets[secondarySide] - popperRect[secondaryMeasurement];\n  } else {\n    popperOffsets[secondarySide] =\n      referenceOffsets[getOppositePlacement(secondarySide)];\n  }\n\n  return popperOffsets;\n}\n","/**\n * Mimics the `find` method of Array\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nexport default function find(arr, check) {\n  // use native find if supported\n  if (Array.prototype.find) {\n    return arr.find(check);\n  }\n\n  // use `filter` to obtain the same behavior of `find`\n  return arr.filter(check)[0];\n}\n","import isFunction from './isFunction';\nimport findIndex from './findIndex';\nimport getClientRect from '../utils/getClientRect';\n\n/**\n * Loop trough the list of modifiers and run them in order,\n * each of them will then edit the data object.\n * @method\n * @memberof Popper.Utils\n * @param {dataObject} data\n * @param {Array} modifiers\n * @param {String} ends - Optional modifier name used as stopper\n * @returns {dataObject}\n */\nexport default function runModifiers(modifiers, data, ends) {\n  const modifiersToRun = ends === undefined\n    ? modifiers\n    : modifiers.slice(0, findIndex(modifiers, 'name', ends));\n\n  modifiersToRun.forEach(modifier => {\n    if (modifier['function']) { // eslint-disable-line dot-notation\n      console.warn('`modifier.function` is deprecated, use `modifier.fn`!');\n    }\n    const fn = modifier['function'] || modifier.fn; // eslint-disable-line dot-notation\n    if (modifier.enabled && isFunction(fn)) {\n      // Add properties to offsets to make them a complete clientRect object\n      // we do this before each modifier to make sure the previous one doesn't\n      // mess with these values\n      data.offsets.popper = getClientRect(data.offsets.popper);\n      data.offsets.reference = getClientRect(data.offsets.reference);\n\n      data = fn(data, modifier);\n    }\n  });\n\n  return data;\n}\n","import find from './find';\n\n/**\n * Return the index of the matching object\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nexport default function findIndex(arr, prop, value) {\n  // use native findIndex if supported\n  if (Array.prototype.findIndex) {\n    return arr.findIndex(cur => cur[prop] === value);\n  }\n\n  // use `find` + `indexOf` if `findIndex` isn't supported\n  const match = find(arr, obj => obj[prop] === value);\n  return arr.indexOf(match);\n}\n","import computeAutoPlacement from '../utils/computeAutoPlacement';\nimport getReferenceOffsets from '../utils/getReferenceOffsets';\nimport getPopperOffsets from '../utils/getPopperOffsets';\nimport runModifiers from '../utils/runModifiers';\n\n/**\n * Updates the position of the popper, computing the new offsets and applying\n * the new style.<br />\n * Prefer `scheduleUpdate` over `update` because of performance reasons.\n * @method\n * @memberof Popper\n */\nexport default function update() {\n  // if popper is destroyed, don't perform any further update\n  if (this.state.isDestroyed) {\n    return;\n  }\n\n  let data = {\n    instance: this,\n    styles: {},\n    arrowStyles: {},\n    attributes: {},\n    flipped: false,\n    offsets: {},\n  };\n\n  // compute reference element offsets\n  data.offsets.reference = getReferenceOffsets(\n    this.state,\n    this.popper,\n    this.reference,\n    this.options.positionFixed\n  );\n\n  // compute auto placement, store placement inside the data object,\n  // modifiers will be able to edit `placement` if needed\n  // and refer to originalPlacement to know the original value\n  data.placement = computeAutoPlacement(\n    this.options.placement,\n    data.offsets.reference,\n    this.popper,\n    this.reference,\n    this.options.modifiers.flip.boundariesElement,\n    this.options.modifiers.flip.padding\n  );\n\n  // store the computed placement inside `originalPlacement`\n  data.originalPlacement = data.placement;\n\n  data.positionFixed = this.options.positionFixed;\n\n  // compute the popper offsets\n  data.offsets.popper = getPopperOffsets(\n    this.popper,\n    data.offsets.reference,\n    data.placement\n  );\n\n  data.offsets.popper.position = this.options.positionFixed\n    ? 'fixed'\n    : 'absolute';\n\n  // run the modifiers\n  data = runModifiers(this.modifiers, data);\n\n  // the first `update` will call `onCreate` callback\n  // the other ones will call `onUpdate` callback\n  if (!this.state.isCreated) {\n    this.state.isCreated = true;\n    this.options.onCreate(data);\n  } else {\n    this.options.onUpdate(data);\n  }\n}\n","/**\n * Helper used to know if the given modifier is enabled.\n * @method\n * @memberof Popper.Utils\n * @returns {Boolean}\n */\nexport default function isModifierEnabled(modifiers, modifierName) {\n  return modifiers.some(\n    ({ name, enabled }) => enabled && name === modifierName\n  );\n}\n","/**\n * Get the prefixed supported property name\n * @method\n * @memberof Popper.Utils\n * @argument {String} property (camelCase)\n * @returns {String} prefixed property (camelCase or PascalCase, depending on the vendor prefix)\n */\nexport default function getSupportedPropertyName(property) {\n  const prefixes = [false, 'ms', 'Webkit', 'Moz', 'O'];\n  const upperProp = property.charAt(0).toUpperCase() + property.slice(1);\n\n  for (let i = 0; i < prefixes.length; i++) {\n    const prefix = prefixes[i];\n    const toCheck = prefix ? `${prefix}${upperProp}` : property;\n    if (typeof document.body.style[toCheck] !== 'undefined') {\n      return toCheck;\n    }\n  }\n  return null;\n}\n","import isModifierEnabled from '../utils/isModifierEnabled';\nimport getSupportedPropertyName from '../utils/getSupportedPropertyName';\n\n/**\n * Destroys the popper.\n * @method\n * @memberof Popper\n */\nexport default function destroy() {\n  this.state.isDestroyed = true;\n\n  // touch DOM only if `applyStyle` modifier is enabled\n  if (isModifierEnabled(this.modifiers, 'applyStyle')) {\n    this.popper.removeAttribute('x-placement');\n    this.popper.style.position = '';\n    this.popper.style.top = '';\n    this.popper.style.left = '';\n    this.popper.style.right = '';\n    this.popper.style.bottom = '';\n    this.popper.style.willChange = '';\n    this.popper.style[getSupportedPropertyName('transform')] = '';\n  }\n\n  this.disableEventListeners();\n\n  // remove the popper if user explicity asked for the deletion on destroy\n  // do not use `remove` because IE11 doesn't support it\n  if (this.options.removeOnDestroy) {\n    this.popper.parentNode.removeChild(this.popper);\n  }\n  return this;\n}\n","/**\n * Get the window associated with the element\n * @argument {Element} element\n * @returns {Window}\n */\nexport default function getWindow(element) {\n  const ownerDocument = element.ownerDocument;\n  return ownerDocument ? ownerDocument.defaultView : window;\n}\n","import getScrollParent from './getScrollParent';\nimport getWindow from './getWindow';\n\nfunction attachToScrollParents(scrollParent, event, callback, scrollParents) {\n  const isBody = scrollParent.nodeName === 'BODY';\n  const target = isBody ? scrollParent.ownerDocument.defaultView : scrollParent;\n  target.addEventListener(event, callback, { passive: true });\n\n  if (!isBody) {\n    attachToScrollParents(\n      getScrollParent(target.parentNode),\n      event,\n      callback,\n      scrollParents\n    );\n  }\n  scrollParents.push(target);\n}\n\n/**\n * Setup needed event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nexport default function setupEventListeners(\n  reference,\n  options,\n  state,\n  updateBound\n) {\n  // Resize event listener on window\n  state.updateBound = updateBound;\n  getWindow(reference).addEventListener('resize', state.updateBound, { passive: true });\n\n  // Scroll event listener on scroll parents\n  const scrollElement = getScrollParent(reference);\n  attachToScrollParents(\n    scrollElement,\n    'scroll',\n    state.updateBound,\n    state.scrollParents\n  );\n  state.scrollElement = scrollElement;\n  state.eventsEnabled = true;\n\n  return state;\n}\n","import setupEventListeners from '../utils/setupEventListeners';\n\n/**\n * It will add resize/scroll events and start recalculating\n * position of the popper element when they are triggered.\n * @method\n * @memberof Popper\n */\nexport default function enableEventListeners() {\n  if (!this.state.eventsEnabled) {\n    this.state = setupEventListeners(\n      this.reference,\n      this.options,\n      this.state,\n      this.scheduleUpdate\n    );\n  }\n}\n","import removeEventListeners from '../utils/removeEventListeners';\n\n/**\n * It will remove resize/scroll events and won't recalculate popper position\n * when they are triggered. It also won't trigger `onUpdate` callback anymore,\n * unless you call `update` method manually.\n * @method\n * @memberof Popper\n */\nexport default function disableEventListeners() {\n  if (this.state.eventsEnabled) {\n    cancelAnimationFrame(this.scheduleUpdate);\n    this.state = removeEventListeners(this.reference, this.state);\n  }\n}\n","import getWindow from './getWindow';\n\n/**\n * Remove event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nexport default function removeEventListeners(reference, state) {\n  // Remove resize event listener on window\n  getWindow(reference).removeEventListener('resize', state.updateBound);\n\n  // Remove scroll event listener on scroll parents\n  state.scrollParents.forEach(target => {\n    target.removeEventListener('scroll', state.updateBound);\n  });\n\n  // Reset state\n  state.updateBound = null;\n  state.scrollParents = [];\n  state.scrollElement = null;\n  state.eventsEnabled = false;\n  return state;\n}\n","/**\n * Tells if a given input is a number\n * @method\n * @memberof Popper.Utils\n * @param {*} input to check\n * @return {Boolean}\n */\nexport default function isNumeric(n) {\n  return n !== '' && !isNaN(parseFloat(n)) && isFinite(n);\n}\n","import isNumeric from './isNumeric';\n\n/**\n * Set the style to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the style to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nexport default function setStyles(element, styles) {\n  Object.keys(styles).forEach(prop => {\n    let unit = '';\n    // add unit if the value is numeric and is one of the following\n    if (\n      ['width', 'height', 'top', 'right', 'bottom', 'left'].indexOf(prop) !==\n        -1 &&\n      isNumeric(styles[prop])\n    ) {\n      unit = 'px';\n    }\n    element.style[prop] = styles[prop] + unit;\n  });\n}\n","import getSupportedPropertyName from '../utils/getSupportedPropertyName';\nimport find from '../utils/find';\nimport getOffsetParent from '../utils/getOffsetParent';\nimport getBoundingClientRect from '../utils/getBoundingClientRect';\nimport getRoundedOffsets from '../utils/getRoundedOffsets';\nimport isBrowser from '../utils/isBrowser';\n\nconst isFirefox = isBrowser && /Firefox/i.test(navigator.userAgent);\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function computeStyle(data, options) {\n  const { x, y } = options;\n  const { popper } = data.offsets;\n\n  // Remove this legacy support in Popper.js v2\n  const legacyGpuAccelerationOption = find(\n    data.instance.modifiers,\n    modifier => modifier.name === 'applyStyle'\n  ).gpuAcceleration;\n  if (legacyGpuAccelerationOption !== undefined) {\n    console.warn(\n      'WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!'\n    );\n  }\n  const gpuAcceleration =\n    legacyGpuAccelerationOption !== undefined\n      ? legacyGpuAccelerationOption\n      : options.gpuAcceleration;\n\n  const offsetParent = getOffsetParent(data.instance.popper);\n  const offsetParentRect = getBoundingClientRect(offsetParent);\n\n  // Styles\n  const styles = {\n    position: popper.position,\n  };\n\n  const offsets = getRoundedOffsets(\n    data,\n    window.devicePixelRatio < 2 || !isFirefox\n  );\n\n  const sideA = x === 'bottom' ? 'top' : 'bottom';\n  const sideB = y === 'right' ? 'left' : 'right';\n\n  // if gpuAcceleration is set to `true` and transform is supported,\n  //  we use `translate3d` to apply the position to the popper we\n  // automatically use the supported prefixed version if needed\n  const prefixedProperty = getSupportedPropertyName('transform');\n\n  // now, let's make a step back and look at this code closely (wtf?)\n  // If the content of the popper grows once it's been positioned, it\n  // may happen that the popper gets misplaced because of the new content\n  // overflowing its reference element\n  // To avoid this problem, we provide two options (x and y), which allow\n  // the consumer to define the offset origin.\n  // If we position a popper on top of a reference element, we can set\n  // `x` to `top` to make the popper grow towards its top instead of\n  // its bottom.\n  let left, top;\n  if (sideA === 'bottom') {\n    // when offsetParent is <html> the positioning is relative to the bottom of the screen (excluding the scrollbar)\n    // and not the bottom of the html element\n    if (offsetParent.nodeName === 'HTML') {\n      top = -offsetParent.clientHeight + offsets.bottom;\n    } else {\n      top = -offsetParentRect.height + offsets.bottom;\n    }\n  } else {\n    top = offsets.top;\n  }\n  if (sideB === 'right') {\n    if (offsetParent.nodeName === 'HTML') {\n      left = -offsetParent.clientWidth + offsets.right;\n    } else {\n      left = -offsetParentRect.width + offsets.right;\n    }\n  } else {\n    left = offsets.left;\n  }\n  if (gpuAcceleration && prefixedProperty) {\n    styles[prefixedProperty] = `translate3d(${left}px, ${top}px, 0)`;\n    styles[sideA] = 0;\n    styles[sideB] = 0;\n    styles.willChange = 'transform';\n  } else {\n    // othwerise, we use the standard `top`, `left`, `bottom` and `right` properties\n    const invertTop = sideA === 'bottom' ? -1 : 1;\n    const invertLeft = sideB === 'right' ? -1 : 1;\n    styles[sideA] = top * invertTop;\n    styles[sideB] = left * invertLeft;\n    styles.willChange = `${sideA}, ${sideB}`;\n  }\n\n  // Attributes\n  const attributes = {\n    'x-placement': data.placement,\n  };\n\n  // Update `data` attributes, styles and arrowStyles\n  data.attributes = { ...attributes, ...data.attributes };\n  data.styles = { ...styles, ...data.styles };\n  data.arrowStyles = { ...data.offsets.arrow, ...data.arrowStyles };\n\n  return data;\n}\n","import find from './find';\n\n/**\n * Helper used to know if the given modifier depends from another one.<br />\n * It checks if the needed modifier is listed and enabled.\n * @method\n * @memberof Popper.Utils\n * @param {Array} modifiers - list of modifiers\n * @param {String} requestingName - name of requesting modifier\n * @param {String} requestedName - name of requested modifier\n * @returns {Boolean}\n */\nexport default function isModifierRequired(\n  modifiers,\n  requestingName,\n  requestedName\n) {\n  const requesting = find(modifiers, ({ name }) => name === requestingName);\n\n  const isRequired =\n    !!requesting &&\n    modifiers.some(modifier => {\n      return (\n        modifier.name === requestedName &&\n        modifier.enabled &&\n        modifier.order < requesting.order\n      );\n    });\n\n  if (!isRequired) {\n    const requesting = `\\`${requestingName}\\``;\n    const requested = `\\`${requestedName}\\``;\n    console.warn(\n      `${requested} modifier is required by ${requesting} modifier in order to work, be sure to include it before ${requesting}!`\n    );\n  }\n  return isRequired;\n}\n","/**\n * List of accepted placements to use as values of the `placement` option.<br />\n * Valid placements are:\n * - `auto`\n * - `top`\n * - `right`\n * - `bottom`\n * - `left`\n *\n * Each placement can have a variation from this list:\n * - `-start`\n * - `-end`\n *\n * Variations are interpreted easily if you think of them as the left to right\n * written languages. Horizontally (`top` and `bottom`), `start` is left and `end`\n * is right.<br />\n * Vertically (`left` and `right`), `start` is top and `end` is bottom.\n *\n * Some valid examples are:\n * - `top-end` (on top of reference, right aligned)\n * - `right-start` (on right of reference, top aligned)\n * - `bottom` (on bottom, centered)\n * - `auto-end` (on the side with more space available, alignment depends by placement)\n *\n * @static\n * @type {Array}\n * @enum {String}\n * @readonly\n * @method placements\n * @memberof Popper\n */\nexport default [\n  'auto-start',\n  'auto',\n  'auto-end',\n  'top-start',\n  'top',\n  'top-end',\n  'right-start',\n  'right',\n  'right-end',\n  'bottom-end',\n  'bottom',\n  'bottom-start',\n  'left-end',\n  'left',\n  'left-start',\n];\n","import placements from '../methods/placements';\n\n// Get rid of `auto` `auto-start` and `auto-end`\nconst validPlacements = placements.slice(3);\n\n/**\n * Given an initial placement, returns all the subsequent placements\n * clockwise (or counter-clockwise).\n *\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement - A valid placement (it accepts variations)\n * @argument {Boolean} counter - Set to true to walk the placements counterclockwise\n * @returns {Array} placements including their variations\n */\nexport default function clockwise(placement, counter = false) {\n  const index = validPlacements.indexOf(placement);\n  const arr = validPlacements\n    .slice(index + 1)\n    .concat(validPlacements.slice(0, index));\n  return counter ? arr.reverse() : arr;\n}\n","import applyStyle, { applyStyleOnLoad } from './applyStyle';\nimport computeStyle from './computeStyle';\nimport arrow from './arrow';\nimport flip from './flip';\nimport keepTogether from './keepTogether';\nimport offset from './offset';\nimport preventOverflow from './preventOverflow';\nimport shift from './shift';\nimport hide from './hide';\nimport inner from './inner';\n\n/**\n * Modifier function, each modifier can have a function of this type assigned\n * to its `fn` property.<br />\n * These functions will be called on each update, this means that you must\n * make sure they are performant enough to avoid performance bottlenecks.\n *\n * @function ModifierFn\n * @argument {dataObject} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {dataObject} The data object, properly modified\n */\n\n/**\n * Modifiers are plugins used to alter the behavior of your poppers.<br />\n * Popper.js uses a set of 9 modifiers to provide all the basic functionalities\n * needed by the library.\n *\n * Usually you don't want to override the `order`, `fn` and `onLoad` props.\n * All the other properties are configurations that could be tweaked.\n * @namespace modifiers\n */\nexport default {\n  /**\n   * Modifier used to shift the popper on the start or end of its reference\n   * element.<br />\n   * It will read the variation of the `placement` property.<br />\n   * It can be one either `-end` or `-start`.\n   * @memberof modifiers\n   * @inner\n   */\n  shift: {\n    /** @prop {number} order=100 - Index used to define the order of execution */\n    order: 100,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: shift,\n  },\n\n  /**\n   * The `offset` modifier can shift your popper on both its axis.\n   *\n   * It accepts the following units:\n   * - `px` or unit-less, interpreted as pixels\n   * - `%` or `%r`, percentage relative to the length of the reference element\n   * - `%p`, percentage relative to the length of the popper element\n   * - `vw`, CSS viewport width unit\n   * - `vh`, CSS viewport height unit\n   *\n   * For length is intended the main axis relative to the placement of the popper.<br />\n   * This means that if the placement is `top` or `bottom`, the length will be the\n   * `width`. In case of `left` or `right`, it will be the `height`.\n   *\n   * You can provide a single value (as `Number` or `String`), or a pair of values\n   * as `String` divided by a comma or one (or more) white spaces.<br />\n   * The latter is a deprecated method because it leads to confusion and will be\n   * removed in v2.<br />\n   * Additionally, it accepts additions and subtractions between different units.\n   * Note that multiplications and divisions aren't supported.\n   *\n   * Valid examples are:\n   * ```\n   * 10\n   * '10%'\n   * '10, 10'\n   * '10%, 10'\n   * '10 + 10%'\n   * '10 - 5vh + 3%'\n   * '-10px + 5vh, 5px - 6%'\n   * ```\n   * > **NB**: If you desire to apply offsets to your poppers in a way that may make them overlap\n   * > with their reference element, unfortunately, you will have to disable the `flip` modifier.\n   * > You can read more on this at this [issue](https://github.com/FezVrasta/popper.js/issues/373).\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  offset: {\n    /** @prop {number} order=200 - Index used to define the order of execution */\n    order: 200,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: offset,\n    /** @prop {Number|String} offset=0\n     * The offset value as described in the modifier description\n     */\n    offset: 0,\n  },\n\n  /**\n   * Modifier used to prevent the popper from being positioned outside the boundary.\n   *\n   * A scenario exists where the reference itself is not within the boundaries.<br />\n   * We can say it has \"escaped the boundaries\" — or just \"escaped\".<br />\n   * In this case we need to decide whether the popper should either:\n   *\n   * - detach from the reference and remain \"trapped\" in the boundaries, or\n   * - if it should ignore the boundary and \"escape with its reference\"\n   *\n   * When `escapeWithReference` is set to`true` and reference is completely\n   * outside its boundaries, the popper will overflow (or completely leave)\n   * the boundaries in order to remain attached to the edge of the reference.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  preventOverflow: {\n    /** @prop {number} order=300 - Index used to define the order of execution */\n    order: 300,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: preventOverflow,\n    /**\n     * @prop {Array} [priority=['left','right','top','bottom']]\n     * Popper will try to prevent overflow following these priorities by default,\n     * then, it could overflow on the left and on top of the `boundariesElement`\n     */\n    priority: ['left', 'right', 'top', 'bottom'],\n    /**\n     * @prop {number} padding=5\n     * Amount of pixel used to define a minimum distance between the boundaries\n     * and the popper. This makes sure the popper always has a little padding\n     * between the edges of its container\n     */\n    padding: 5,\n    /**\n     * @prop {String|HTMLElement} boundariesElement='scrollParent'\n     * Boundaries used by the modifier. Can be `scrollParent`, `window`,\n     * `viewport` or any DOM element.\n     */\n    boundariesElement: 'scrollParent',\n  },\n\n  /**\n   * Modifier used to make sure the reference and its popper stay near each other\n   * without leaving any gap between the two. Especially useful when the arrow is\n   * enabled and you want to ensure that it points to its reference element.\n   * It cares only about the first axis. You can still have poppers with margin\n   * between the popper and its reference element.\n   * @memberof modifiers\n   * @inner\n   */\n  keepTogether: {\n    /** @prop {number} order=400 - Index used to define the order of execution */\n    order: 400,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: keepTogether,\n  },\n\n  /**\n   * This modifier is used to move the `arrowElement` of the popper to make\n   * sure it is positioned between the reference element and its popper element.\n   * It will read the outer size of the `arrowElement` node to detect how many\n   * pixels of conjunction are needed.\n   *\n   * It has no effect if no `arrowElement` is provided.\n   * @memberof modifiers\n   * @inner\n   */\n  arrow: {\n    /** @prop {number} order=500 - Index used to define the order of execution */\n    order: 500,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: arrow,\n    /** @prop {String|HTMLElement} element='[x-arrow]' - Selector or node used as arrow */\n    element: '[x-arrow]',\n  },\n\n  /**\n   * Modifier used to flip the popper's placement when it starts to overlap its\n   * reference element.\n   *\n   * Requires the `preventOverflow` modifier before it in order to work.\n   *\n   * **NOTE:** this modifier will interrupt the current update cycle and will\n   * restart it if it detects the need to flip the placement.\n   * @memberof modifiers\n   * @inner\n   */\n  flip: {\n    /** @prop {number} order=600 - Index used to define the order of execution */\n    order: 600,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: flip,\n    /**\n     * @prop {String|Array} behavior='flip'\n     * The behavior used to change the popper's placement. It can be one of\n     * `flip`, `clockwise`, `counterclockwise` or an array with a list of valid\n     * placements (with optional variations)\n     */\n    behavior: 'flip',\n    /**\n     * @prop {number} padding=5\n     * The popper will flip if it hits the edges of the `boundariesElement`\n     */\n    padding: 5,\n    /**\n     * @prop {String|HTMLElement} boundariesElement='viewport'\n     * The element which will define the boundaries of the popper position.\n     * The popper will never be placed outside of the defined boundaries\n     * (except if `keepTogether` is enabled)\n     */\n    boundariesElement: 'viewport',\n    /**\n     * @prop {Boolean} flipVariations=false\n     * The popper will switch placement variation between `-start` and `-end` when\n     * the reference element overlaps its boundaries.\n     *\n     * The original placement should have a set variation.\n     */\n    flipVariations: false,\n    /**\n     * @prop {Boolean} flipVariationsByContent=false\n     * The popper will switch placement variation between `-start` and `-end` when\n     * the popper element overlaps its reference boundaries.\n     *\n     * The original placement should have a set variation.\n     */\n    flipVariationsByContent: false,\n  },\n\n  /**\n   * Modifier used to make the popper flow toward the inner of the reference element.\n   * By default, when this modifier is disabled, the popper will be placed outside\n   * the reference element.\n   * @memberof modifiers\n   * @inner\n   */\n  inner: {\n    /** @prop {number} order=700 - Index used to define the order of execution */\n    order: 700,\n    /** @prop {Boolean} enabled=false - Whether the modifier is enabled or not */\n    enabled: false,\n    /** @prop {ModifierFn} */\n    fn: inner,\n  },\n\n  /**\n   * Modifier used to hide the popper when its reference element is outside of the\n   * popper boundaries. It will set a `x-out-of-boundaries` attribute which can\n   * be used to hide with a CSS selector the popper when its reference is\n   * out of boundaries.\n   *\n   * Requires the `preventOverflow` modifier before it in order to work.\n   * @memberof modifiers\n   * @inner\n   */\n  hide: {\n    /** @prop {number} order=800 - Index used to define the order of execution */\n    order: 800,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: hide,\n  },\n\n  /**\n   * Computes the style that will be applied to the popper element to gets\n   * properly positioned.\n   *\n   * Note that this modifier will not touch the DOM, it just prepares the styles\n   * so that `applyStyle` modifier can apply it. This separation is useful\n   * in case you need to replace `applyStyle` with a custom implementation.\n   *\n   * This modifier has `850` as `order` value to maintain backward compatibility\n   * with previous versions of Popper.js. Expect the modifiers ordering method\n   * to change in future major versions of the library.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  computeStyle: {\n    /** @prop {number} order=850 - Index used to define the order of execution */\n    order: 850,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: computeStyle,\n    /**\n     * @prop {Boolean} gpuAcceleration=true\n     * If true, it uses the CSS 3D transformation to position the popper.\n     * Otherwise, it will use the `top` and `left` properties\n     */\n    gpuAcceleration: true,\n    /**\n     * @prop {string} [x='bottom']\n     * Where to anchor the X axis (`bottom` or `top`). AKA X offset origin.\n     * Change this if your popper should grow in a direction different from `bottom`\n     */\n    x: 'bottom',\n    /**\n     * @prop {string} [x='left']\n     * Where to anchor the Y axis (`left` or `right`). AKA Y offset origin.\n     * Change this if your popper should grow in a direction different from `right`\n     */\n    y: 'right',\n  },\n\n  /**\n   * Applies the computed styles to the popper element.\n   *\n   * All the DOM manipulations are limited to this modifier. This is useful in case\n   * you want to integrate Popper.js inside a framework or view library and you\n   * want to delegate all the DOM manipulations to it.\n   *\n   * Note that if you disable this modifier, you must make sure the popper element\n   * has its position set to `absolute` before Popper.js can do its work!\n   *\n   * Just disable this modifier and define your own to achieve the desired effect.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  applyStyle: {\n    /** @prop {number} order=900 - Index used to define the order of execution */\n    order: 900,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: applyStyle,\n    /** @prop {Function} */\n    onLoad: applyStyleOnLoad,\n    /**\n     * @deprecated since version 1.10.0, the property moved to `computeStyle` modifier\n     * @prop {Boolean} gpuAcceleration=true\n     * If true, it uses the CSS 3D transformation to position the popper.\n     * Otherwise, it will use the `top` and `left` properties\n     */\n    gpuAcceleration: undefined,\n  },\n};\n\n/**\n * The `dataObject` is an object containing all the information used by Popper.js.\n * This object is passed to modifiers and to the `onCreate` and `onUpdate` callbacks.\n * @name dataObject\n * @property {Object} data.instance The Popper.js instance\n * @property {String} data.placement Placement applied to popper\n * @property {String} data.originalPlacement Placement originally defined on init\n * @property {Boolean} data.flipped True if popper has been flipped by flip modifier\n * @property {Boolean} data.hide True if the reference element is out of boundaries, useful to know when to hide the popper\n * @property {HTMLElement} data.arrowElement Node used as arrow by arrow modifier\n * @property {Object} data.styles Any CSS property defined here will be applied to the popper. It expects the JavaScript nomenclature (eg. `marginBottom`)\n * @property {Object} data.arrowStyles Any CSS property defined here will be applied to the popper arrow. It expects the JavaScript nomenclature (eg. `marginBottom`)\n * @property {Object} data.boundaries Offsets of the popper boundaries\n * @property {Object} data.offsets The measurements of popper, reference and arrow elements\n * @property {Object} data.offsets.popper `top`, `left`, `width`, `height` values\n * @property {Object} data.offsets.reference `top`, `left`, `width`, `height` values\n * @property {Object} data.offsets.arrow] `top` and `left` offsets, only one of them will be different from 0\n */\n","import modifiers from '../modifiers/index';\n\n/**\n * Default options provided to Popper.js constructor.<br />\n * These can be overridden using the `options` argument of Popper.js.<br />\n * To override an option, simply pass an object with the same\n * structure of the `options` object, as the 3rd argument. For example:\n * ```\n * new Popper(ref, pop, {\n *   modifiers: {\n *     preventOverflow: { enabled: false }\n *   }\n * })\n * ```\n * @type {Object}\n * @static\n * @memberof Popper\n */\nexport default {\n  /**\n   * Popper's placement.\n   * @prop {Popper.placements} placement='bottom'\n   */\n  placement: 'bottom',\n\n  /**\n   * Set this to true if you want popper to position it self in 'fixed' mode\n   * @prop {Boolean} positionFixed=false\n   */\n  positionFixed: false,\n\n  /**\n   * Whether events (resize, scroll) are initially enabled.\n   * @prop {Boolean} eventsEnabled=true\n   */\n  eventsEnabled: true,\n\n  /**\n   * Set to true if you want to automatically remove the popper when\n   * you call the `destroy` method.\n   * @prop {Boolean} removeOnDestroy=false\n   */\n  removeOnDestroy: false,\n\n  /**\n   * Callback called when the popper is created.<br />\n   * By default, it is set to no-op.<br />\n   * Access Popper.js instance with `data.instance`.\n   * @prop {onCreate}\n   */\n  onCreate: () => {},\n\n  /**\n   * Callback called when the popper is updated. This callback is not called\n   * on the initialization/creation of the popper, but only on subsequent\n   * updates.<br />\n   * By default, it is set to no-op.<br />\n   * Access Popper.js instance with `data.instance`.\n   * @prop {onUpdate}\n   */\n  onUpdate: () => {},\n\n  /**\n   * List of modifiers used to modify the offsets before they are applied to the popper.\n   * They provide most of the functionalities of Popper.js.\n   * @prop {modifiers}\n   */\n  modifiers,\n};\n\n/**\n * @callback onCreate\n * @param {dataObject} data\n */\n\n/**\n * @callback onUpdate\n * @param {dataObject} data\n */\n","/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function shift(data) {\n  const placement = data.placement;\n  const basePlacement = placement.split('-')[0];\n  const shiftvariation = placement.split('-')[1];\n\n  // if shift shiftvariation is specified, run the modifier\n  if (shiftvariation) {\n    const { reference, popper } = data.offsets;\n    const isVertical = ['bottom', 'top'].indexOf(basePlacement) !== -1;\n    const side = isVertical ? 'left' : 'top';\n    const measurement = isVertical ? 'width' : 'height';\n\n    const shiftOffsets = {\n      start: { [side]: reference[side] },\n      end: {\n        [side]: reference[side] + reference[measurement] - popper[measurement],\n      },\n    };\n\n    data.offsets.popper = { ...popper, ...shiftOffsets[shiftvariation] };\n  }\n\n  return data;\n}\n","import isNumeric from '../utils/isNumeric';\nimport getClientRect from '../utils/getClientRect';\nimport find from '../utils/find';\n\n/**\n * Converts a string containing value + unit into a px value number\n * @function\n * @memberof {modifiers~offset}\n * @private\n * @argument {String} str - Value + unit string\n * @argument {String} measurement - `height` or `width`\n * @argument {Object} popperOffsets\n * @argument {Object} referenceOffsets\n * @returns {Number|String}\n * Value in pixels, or original string if no values were extracted\n */\nexport function toValue(str, measurement, popperOffsets, referenceOffsets) {\n  // separate value from unit\n  const split = str.match(/((?:\\-|\\+)?\\d*\\.?\\d*)(.*)/);\n  const value = +split[1];\n  const unit = split[2];\n\n  // If it's not a number it's an operator, I guess\n  if (!value) {\n    return str;\n  }\n\n  if (unit.indexOf('%') === 0) {\n    let element;\n    switch (unit) {\n      case '%p':\n        element = popperOffsets;\n        break;\n      case '%':\n      case '%r':\n      default:\n        element = referenceOffsets;\n    }\n\n    const rect = getClientRect(element);\n    return rect[measurement] / 100 * value;\n  } else if (unit === 'vh' || unit === 'vw') {\n    // if is a vh or vw, we calculate the size based on the viewport\n    let size;\n    if (unit === 'vh') {\n      size = Math.max(\n        document.documentElement.clientHeight,\n        window.innerHeight || 0\n      );\n    } else {\n      size = Math.max(\n        document.documentElement.clientWidth,\n        window.innerWidth || 0\n      );\n    }\n    return size / 100 * value;\n  } else {\n    // if is an explicit pixel unit, we get rid of the unit and keep the value\n    // if is an implicit unit, it's px, and we return just the value\n    return value;\n  }\n}\n\n/**\n * Parse an `offset` string to extrapolate `x` and `y` numeric offsets.\n * @function\n * @memberof {modifiers~offset}\n * @private\n * @argument {String} offset\n * @argument {Object} popperOffsets\n * @argument {Object} referenceOffsets\n * @argument {String} basePlacement\n * @returns {Array} a two cells array with x and y offsets in numbers\n */\nexport function parseOffset(\n  offset,\n  popperOffsets,\n  referenceOffsets,\n  basePlacement\n) {\n  const offsets = [0, 0];\n\n  // Use height if placement is left or right and index is 0 otherwise use width\n  // in this way the first offset will use an axis and the second one\n  // will use the other one\n  const useHeight = ['right', 'left'].indexOf(basePlacement) !== -1;\n\n  // Split the offset string to obtain a list of values and operands\n  // The regex addresses values with the plus or minus sign in front (+10, -20, etc)\n  const fragments = offset.split(/(\\+|\\-)/).map(frag => frag.trim());\n\n  // Detect if the offset string contains a pair of values or a single one\n  // they could be separated by comma or space\n  const divider = fragments.indexOf(\n    find(fragments, frag => frag.search(/,|\\s/) !== -1)\n  );\n\n  if (fragments[divider] && fragments[divider].indexOf(',') === -1) {\n    console.warn(\n      'Offsets separated by white space(s) are deprecated, use a comma (,) instead.'\n    );\n  }\n\n  // If divider is found, we divide the list of values and operands to divide\n  // them by ofset X and Y.\n  const splitRegex = /\\s*,\\s*|\\s+/;\n  let ops = divider !== -1\n    ? [\n        fragments\n          .slice(0, divider)\n          .concat([fragments[divider].split(splitRegex)[0]]),\n        [fragments[divider].split(splitRegex)[1]].concat(\n          fragments.slice(divider + 1)\n        ),\n      ]\n    : [fragments];\n\n  // Convert the values with units to absolute pixels to allow our computations\n  ops = ops.map((op, index) => {\n    // Most of the units rely on the orientation of the popper\n    const measurement = (index === 1 ? !useHeight : useHeight)\n      ? 'height'\n      : 'width';\n    let mergeWithPrevious = false;\n    return (\n      op\n        // This aggregates any `+` or `-` sign that aren't considered operators\n        // e.g.: 10 + +5 => [10, +, +5]\n        .reduce((a, b) => {\n          if (a[a.length - 1] === '' && ['+', '-'].indexOf(b) !== -1) {\n            a[a.length - 1] = b;\n            mergeWithPrevious = true;\n            return a;\n          } else if (mergeWithPrevious) {\n            a[a.length - 1] += b;\n            mergeWithPrevious = false;\n            return a;\n          } else {\n            return a.concat(b);\n          }\n        }, [])\n        // Here we convert the string values into number values (in px)\n        .map(str => toValue(str, measurement, popperOffsets, referenceOffsets))\n    );\n  });\n\n  // Loop trough the offsets arrays and execute the operations\n  ops.forEach((op, index) => {\n    op.forEach((frag, index2) => {\n      if (isNumeric(frag)) {\n        offsets[index] += frag * (op[index2 - 1] === '-' ? -1 : 1);\n      }\n    });\n  });\n  return offsets;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @argument {Number|String} options.offset=0\n * The offset value as described in the modifier description\n * @returns {Object} The data object, properly modified\n */\nexport default function offset(data, { offset }) {\n  const { placement, offsets: { popper, reference } } = data;\n  const basePlacement = placement.split('-')[0];\n\n  let offsets;\n  if (isNumeric(+offset)) {\n    offsets = [+offset, 0];\n  } else {\n    offsets = parseOffset(offset, popper, reference, basePlacement);\n  }\n\n  if (basePlacement === 'left') {\n    popper.top += offsets[0];\n    popper.left -= offsets[1];\n  } else if (basePlacement === 'right') {\n    popper.top += offsets[0];\n    popper.left += offsets[1];\n  } else if (basePlacement === 'top') {\n    popper.left += offsets[0];\n    popper.top -= offsets[1];\n  } else if (basePlacement === 'bottom') {\n    popper.left += offsets[0];\n    popper.top += offsets[1];\n  }\n\n  data.popper = popper;\n  return data;\n}\n","import getOffsetParent from '../utils/getOffsetParent';\nimport getBoundaries from '../utils/getBoundaries';\nimport getSupportedPropertyName from '../utils/getSupportedPropertyName';\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function preventOverflow(data, options) {\n  let boundariesElement =\n    options.boundariesElement || getOffsetParent(data.instance.popper);\n\n  // If offsetParent is the reference element, we really want to\n  // go one step up and use the next offsetParent as reference to\n  // avoid to make this modifier completely useless and look like broken\n  if (data.instance.reference === boundariesElement) {\n    boundariesElement = getOffsetParent(boundariesElement);\n  }\n\n  // NOTE: DOM access here\n  // resets the popper's position so that the document size can be calculated excluding\n  // the size of the popper element itself\n  const transformProp = getSupportedPropertyName('transform');\n  const popperStyles = data.instance.popper.style; // assignment to help minification\n  const { top, left, [transformProp]: transform } = popperStyles;\n  popperStyles.top = '';\n  popperStyles.left = '';\n  popperStyles[transformProp] = '';\n\n  const boundaries = getBoundaries(\n    data.instance.popper,\n    data.instance.reference,\n    options.padding,\n    boundariesElement,\n    data.positionFixed\n  );\n\n  // NOTE: DOM access here\n  // restores the original style properties after the offsets have been computed\n  popperStyles.top = top;\n  popperStyles.left = left;\n  popperStyles[transformProp] = transform;\n\n  options.boundaries = boundaries;\n\n  const order = options.priority;\n  let popper = data.offsets.popper;\n\n  const check = {\n    primary(placement) {\n      let value = popper[placement];\n      if (\n        popper[placement] < boundaries[placement] &&\n        !options.escapeWithReference\n      ) {\n        value = Math.max(popper[placement], boundaries[placement]);\n      }\n      return { [placement]: value };\n    },\n    secondary(placement) {\n      const mainSide = placement === 'right' ? 'left' : 'top';\n      let value = popper[mainSide];\n      if (\n        popper[placement] > boundaries[placement] &&\n        !options.escapeWithReference\n      ) {\n        value = Math.min(\n          popper[mainSide],\n          boundaries[placement] -\n            (placement === 'right' ? popper.width : popper.height)\n        );\n      }\n      return { [mainSide]: value };\n    },\n  };\n\n  order.forEach(placement => {\n    const side =\n      ['left', 'top'].indexOf(placement) !== -1 ? 'primary' : 'secondary';\n    popper = { ...popper, ...check[side](placement) };\n  });\n\n  data.offsets.popper = popper;\n\n  return data;\n}\n","/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function keepTogether(data) {\n  const { popper, reference } = data.offsets;\n  const placement = data.placement.split('-')[0];\n  const floor = Math.floor;\n  const isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\n  const side = isVertical ? 'right' : 'bottom';\n  const opSide = isVertical ? 'left' : 'top';\n  const measurement = isVertical ? 'width' : 'height';\n\n  if (popper[side] < floor(reference[opSide])) {\n    data.offsets.popper[opSide] =\n      floor(reference[opSide]) - popper[measurement];\n  }\n  if (popper[opSide] > floor(reference[side])) {\n    data.offsets.popper[opSide] = floor(reference[side]);\n  }\n\n  return data;\n}\n","import getClientRect from '../utils/getClientRect';\nimport getOuterSizes from '../utils/getOuterSizes';\nimport isModifierRequired from '../utils/isModifierRequired';\nimport getStyleComputedProperty from '../utils/getStyleComputedProperty';\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function arrow(data, options) {\n  // arrow depends on keepTogether in order to work\n  if (!isModifierRequired(data.instance.modifiers, 'arrow', 'keepTogether')) {\n    return data;\n  }\n\n  let arrowElement = options.element;\n\n  // if arrowElement is a string, suppose it's a CSS selector\n  if (typeof arrowElement === 'string') {\n    arrowElement = data.instance.popper.querySelector(arrowElement);\n\n    // if arrowElement is not found, don't run the modifier\n    if (!arrowElement) {\n      return data;\n    }\n  } else {\n    // if the arrowElement isn't a query selector we must check that the\n    // provided DOM node is child of its popper node\n    if (!data.instance.popper.contains(arrowElement)) {\n      console.warn(\n        'WARNING: `arrow.element` must be child of its popper element!'\n      );\n      return data;\n    }\n  }\n\n  const placement = data.placement.split('-')[0];\n  const { popper, reference } = data.offsets;\n  const isVertical = ['left', 'right'].indexOf(placement) !== -1;\n\n  const len = isVertical ? 'height' : 'width';\n  const sideCapitalized = isVertical ? 'Top' : 'Left';\n  const side = sideCapitalized.toLowerCase();\n  const altSide = isVertical ? 'left' : 'top';\n  const opSide = isVertical ? 'bottom' : 'right';\n  const arrowElementSize = getOuterSizes(arrowElement)[len];\n\n  //\n  // extends keepTogether behavior making sure the popper and its\n  // reference have enough pixels in conjunction\n  //\n\n  // top/left side\n  if (reference[opSide] - arrowElementSize < popper[side]) {\n    data.offsets.popper[side] -=\n      popper[side] - (reference[opSide] - arrowElementSize);\n  }\n  // bottom/right side\n  if (reference[side] + arrowElementSize > popper[opSide]) {\n    data.offsets.popper[side] +=\n      reference[side] + arrowElementSize - popper[opSide];\n  }\n  data.offsets.popper = getClientRect(data.offsets.popper);\n\n  // compute center of the popper\n  const center = reference[side] + reference[len] / 2 - arrowElementSize / 2;\n\n  // Compute the sideValue using the updated popper offsets\n  // take popper margin in account because we don't have this info available\n  const css = getStyleComputedProperty(data.instance.popper);\n  const popperMarginSide = parseFloat(css[`margin${sideCapitalized}`], 10);\n  const popperBorderSide = parseFloat(css[`border${sideCapitalized}Width`], 10);\n  let sideValue =\n    center - data.offsets.popper[side] - popperMarginSide - popperBorderSide;\n\n  // prevent arrowElement from being placed not contiguously to its popper\n  sideValue = Math.max(Math.min(popper[len] - arrowElementSize, sideValue), 0);\n\n  data.arrowElement = arrowElement;\n  data.offsets.arrow = {\n    [side]: Math.round(sideValue),\n    [altSide]: '', // make sure to unset any eventual altSide value from the DOM node\n  };\n\n  return data;\n}\n","import getOppositePlacement from '../utils/getOppositePlacement';\nimport getOppositeVariation from '../utils/getOppositeVariation';\nimport getPopperOffsets from '../utils/getPopperOffsets';\nimport runModifiers from '../utils/runModifiers';\nimport getBoundaries from '../utils/getBoundaries';\nimport isModifierEnabled from '../utils/isModifierEnabled';\nimport clockwise from '../utils/clockwise';\n\nconst BEHAVIORS = {\n  FLIP: 'flip',\n  CLOCKWISE: 'clockwise',\n  COUNTERCLOCKWISE: 'counterclockwise',\n};\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function flip(data, options) {\n  // if `inner` modifier is enabled, we can't use the `flip` modifier\n  if (isModifierEnabled(data.instance.modifiers, 'inner')) {\n    return data;\n  }\n\n  if (data.flipped && data.placement === data.originalPlacement) {\n    // seems like flip is trying to loop, probably there's not enough space on any of the flippable sides\n    return data;\n  }\n\n  const boundaries = getBoundaries(\n    data.instance.popper,\n    data.instance.reference,\n    options.padding,\n    options.boundariesElement,\n    data.positionFixed\n  );\n\n  let placement = data.placement.split('-')[0];\n  let placementOpposite = getOppositePlacement(placement);\n  let variation = data.placement.split('-')[1] || '';\n\n  let flipOrder = [];\n\n  switch (options.behavior) {\n    case BEHAVIORS.FLIP:\n      flipOrder = [placement, placementOpposite];\n      break;\n    case BEHAVIORS.CLOCKWISE:\n      flipOrder = clockwise(placement);\n      break;\n    case BEHAVIORS.COUNTERCLOCKWISE:\n      flipOrder = clockwise(placement, true);\n      break;\n    default:\n      flipOrder = options.behavior;\n  }\n\n  flipOrder.forEach((step, index) => {\n    if (placement !== step || flipOrder.length === index + 1) {\n      return data;\n    }\n\n    placement = data.placement.split('-')[0];\n    placementOpposite = getOppositePlacement(placement);\n\n    const popperOffsets = data.offsets.popper;\n    const refOffsets = data.offsets.reference;\n\n    // using floor because the reference offsets may contain decimals we are not going to consider here\n    const floor = Math.floor;\n    const overlapsRef =\n      (placement === 'left' &&\n        floor(popperOffsets.right) > floor(refOffsets.left)) ||\n      (placement === 'right' &&\n        floor(popperOffsets.left) < floor(refOffsets.right)) ||\n      (placement === 'top' &&\n        floor(popperOffsets.bottom) > floor(refOffsets.top)) ||\n      (placement === 'bottom' &&\n        floor(popperOffsets.top) < floor(refOffsets.bottom));\n\n    const overflowsLeft = floor(popperOffsets.left) < floor(boundaries.left);\n    const overflowsRight = floor(popperOffsets.right) > floor(boundaries.right);\n    const overflowsTop = floor(popperOffsets.top) < floor(boundaries.top);\n    const overflowsBottom =\n      floor(popperOffsets.bottom) > floor(boundaries.bottom);\n\n    const overflowsBoundaries =\n      (placement === 'left' && overflowsLeft) ||\n      (placement === 'right' && overflowsRight) ||\n      (placement === 'top' && overflowsTop) ||\n      (placement === 'bottom' && overflowsBottom);\n\n    // flip the variation if required\n    const isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\n\n    // flips variation if reference element overflows boundaries\n    const flippedVariationByRef =\n      !!options.flipVariations &&\n      ((isVertical && variation === 'start' && overflowsLeft) ||\n        (isVertical && variation === 'end' && overflowsRight) ||\n        (!isVertical && variation === 'start' && overflowsTop) ||\n        (!isVertical && variation === 'end' && overflowsBottom));\n\n    // flips variation if popper content overflows boundaries\n    const flippedVariationByContent =\n      !!options.flipVariationsByContent &&\n      ((isVertical && variation === 'start' && overflowsRight) ||\n        (isVertical && variation === 'end' && overflowsLeft) ||\n        (!isVertical && variation === 'start' && overflowsBottom) ||\n        (!isVertical && variation === 'end' && overflowsTop));\n\n    const flippedVariation = flippedVariationByRef || flippedVariationByContent;\n\n    if (overlapsRef || overflowsBoundaries || flippedVariation) {\n      // this boolean to detect any flip loop\n      data.flipped = true;\n\n      if (overlapsRef || overflowsBoundaries) {\n        placement = flipOrder[index + 1];\n      }\n\n      if (flippedVariation) {\n        variation = getOppositeVariation(variation);\n      }\n\n      data.placement = placement + (variation ? '-' + variation : '');\n\n      // this object contains `position`, we want to preserve it along with\n      // any additional property we may add in the future\n      data.offsets.popper = {\n        ...data.offsets.popper,\n        ...getPopperOffsets(\n          data.instance.popper,\n          data.offsets.reference,\n          data.placement\n        ),\n      };\n\n      data = runModifiers(data.instance.modifiers, data, 'flip');\n    }\n  });\n  return data;\n}\n","/**\n * Get the opposite placement variation of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement variation\n * @returns {String} flipped placement variation\n */\nexport default function getOppositeVariation(variation) {\n  if (variation === 'end') {\n    return 'start';\n  } else if (variation === 'start') {\n    return 'end';\n  }\n  return variation;\n}\n","import getClientRect from '../utils/getClientRect';\nimport getOppositePlacement from '../utils/getOppositePlacement';\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function inner(data) {\n  const placement = data.placement;\n  const basePlacement = placement.split('-')[0];\n  const { popper, reference } = data.offsets;\n  const isHoriz = ['left', 'right'].indexOf(basePlacement) !== -1;\n\n  const subtractLength = ['top', 'left'].indexOf(basePlacement) === -1;\n\n  popper[isHoriz ? 'left' : 'top'] =\n    reference[basePlacement] -\n    (subtractLength ? popper[isHoriz ? 'width' : 'height'] : 0);\n\n  data.placement = getOppositePlacement(placement);\n  data.offsets.popper = getClientRect(popper);\n\n  return data;\n}\n","import isModifierRequired from '../utils/isModifierRequired';\nimport find from '../utils/find';\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function hide(data) {\n  if (!isModifierRequired(data.instance.modifiers, 'hide', 'preventOverflow')) {\n    return data;\n  }\n\n  const refRect = data.offsets.reference;\n  const bound = find(\n    data.instance.modifiers,\n    modifier => modifier.name === 'preventOverflow'\n  ).boundaries;\n\n  if (\n    refRect.bottom < bound.top ||\n    refRect.left > bound.right ||\n    refRect.top > bound.bottom ||\n    refRect.right < bound.left\n  ) {\n    // Avoid unnecessary DOM access if visibility hasn't changed\n    if (data.hide === true) {\n      return data;\n    }\n\n    data.hide = true;\n    data.attributes['x-out-of-boundaries'] = '';\n  } else {\n    // Avoid unnecessary DOM access if visibility hasn't changed\n    if (data.hide === false) {\n      return data;\n    }\n\n    data.hide = false;\n    data.attributes['x-out-of-boundaries'] = false;\n  }\n\n  return data;\n}\n","/**\n * @function\n * @memberof Popper.Utils\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Boolean} shouldRound - If the offsets should be rounded at all\n * @returns {Object} The popper's position offsets rounded\n *\n * The tale of pixel-perfect positioning. It's still not 100% perfect, but as\n * good as it can be within reason.\n * Discussion here: https://github.com/FezVrasta/popper.js/pull/715\n *\n * Low DPI screens cause a popper to be blurry if not using full pixels (Safari\n * as well on High DPI screens).\n *\n * Firefox prefers no rounding for positioning and does not have blurriness on\n * high DPI screens.\n *\n * Only horizontal placement and left/right values need to be considered.\n */\nexport default function getRoundedOffsets(data, shouldRound) {\n  const { popper, reference } = data.offsets;\n  const { round, floor } = Math;\n  const noRound = v => v;\n  \n  const referenceWidth = round(reference.width);\n  const popperWidth = round(popper.width);\n  \n  const isVertical = ['left', 'right'].indexOf(data.placement) !== -1;\n  const isVariation = data.placement.indexOf('-') !== -1;\n  const sameWidthParity = referenceWidth % 2 === popperWidth % 2;\n  const bothOddWidth = referenceWidth % 2 === 1 && popperWidth % 2 === 1;\n\n  const horizontalToInteger = !shouldRound\n    ? noRound\n    : isVertical || isVariation || sameWidthParity\n    ? round\n    : floor;\n  const verticalToInteger = !shouldRound ? noRound : round;\n\n  return {\n    left: horizontalToInteger(\n      bothOddWidth && !isVariation && shouldRound\n        ? popper.left - 1\n        : popper.left\n    ),\n    top: verticalToInteger(popper.top),\n    bottom: verticalToInteger(popper.bottom),\n    right: horizontalToInteger(popper.right),\n  };\n}\n","import setStyles from '../utils/setStyles';\nimport setAttributes from '../utils/setAttributes';\nimport getReferenceOffsets from '../utils/getReferenceOffsets';\nimport computeAutoPlacement from '../utils/computeAutoPlacement';\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} data.styles - List of style properties - values to apply to popper element\n * @argument {Object} data.attributes - List of attribute properties - values to apply to popper element\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The same data object\n */\nexport default function applyStyle(data) {\n  // any property present in `data.styles` will be applied to the popper,\n  // in this way we can make the 3rd party modifiers add custom styles to it\n  // Be aware, modifiers could override the properties defined in the previous\n  // lines of this modifier!\n  setStyles(data.instance.popper, data.styles);\n\n  // any property present in `data.attributes` will be applied to the popper,\n  // they will be set as HTML attributes of the element\n  setAttributes(data.instance.popper, data.attributes);\n\n  // if arrowElement is defined and arrowStyles has some properties\n  if (data.arrowElement && Object.keys(data.arrowStyles).length) {\n    setStyles(data.arrowElement, data.arrowStyles);\n  }\n\n  return data;\n}\n\n/**\n * Set the x-placement attribute before everything else because it could be used\n * to add margins to the popper margins needs to be calculated to get the\n * correct popper offsets.\n * @method\n * @memberof Popper.modifiers\n * @param {HTMLElement} reference - The reference element used to position the popper\n * @param {HTMLElement} popper - The HTML element used as popper\n * @param {Object} options - Popper.js options\n */\nexport function applyStyleOnLoad(\n  reference,\n  popper,\n  options,\n  modifierOptions,\n  state\n) {\n  // compute reference element offsets\n  const referenceOffsets = getReferenceOffsets(state, popper, reference, options.positionFixed);\n\n  // compute auto placement, store placement inside the data object,\n  // modifiers will be able to edit `placement` if needed\n  // and refer to originalPlacement to know the original value\n  const placement = computeAutoPlacement(\n    options.placement,\n    referenceOffsets,\n    popper,\n    reference,\n    options.modifiers.flip.boundariesElement,\n    options.modifiers.flip.padding\n  );\n\n  popper.setAttribute('x-placement', placement);\n\n  // Apply `position` to popper before anything else because\n  // without the position applied we can't guarantee correct computations\n  setStyles(popper, { position: options.positionFixed ? 'fixed' : 'absolute' });\n\n  return options;\n}\n","/**\n * Set the attributes to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the attributes to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nexport default function setAttributes(element, attributes) {\n  Object.keys(attributes).forEach(function(prop) {\n    const value = attributes[prop];\n    if (value !== false) {\n      element.setAttribute(prop, attributes[prop]);\n    } else {\n      element.removeAttribute(prop);\n    }\n  });\n}\n","// Utils\nimport debounce from './utils/debounce';\nimport isFunction from './utils/isFunction';\n\n// Methods\nimport update from './methods/update';\nimport destroy from './methods/destroy';\nimport enableEventListeners from './methods/enableEventListeners';\nimport disableEventListeners from './methods/disableEventListeners';\nimport Defaults from './methods/defaults';\nimport placements from './methods/placements';\n\nexport default class Popper {\n  /**\n   * Creates a new Popper.js instance.\n   * @class Popper\n   * @param {Element|referenceObject} reference - The reference element used to position the popper\n   * @param {Element} popper - The HTML / XML element used as the popper\n   * @param {Object} options - Your custom options to override the ones defined in [Defaults](#defaults)\n   * @return {Object} instance - The generated Popper.js instance\n   */\n  constructor(reference, popper, options = {}) {\n    // make update() debounced, so that it only runs at most once-per-tick\n    this.update = debounce(this.update.bind(this));\n\n    // with {} we create a new object with the options inside it\n    this.options = { ...Popper.Defaults, ...options };\n\n    // init state\n    this.state = {\n      isDestroyed: false,\n      isCreated: false,\n      scrollParents: [],\n    };\n\n    // get reference and popper elements (allow jQuery wrappers)\n    this.reference = reference && reference.jquery ? reference[0] : reference;\n    this.popper = popper && popper.jquery ? popper[0] : popper;\n\n    // Deep merge modifiers options\n    this.options.modifiers = {};\n    Object.keys({\n      ...Popper.Defaults.modifiers,\n      ...options.modifiers,\n    }).forEach(name => {\n      this.options.modifiers[name] = {\n        // If it's a built-in modifier, use it as base\n        ...(Popper.Defaults.modifiers[name] || {}),\n        // If there are custom options, override and merge with default ones\n        ...(options.modifiers ? options.modifiers[name] : {}),\n      };\n    });\n\n    // Refactoring modifiers' list (Object => Array)\n    this.modifiers = Object.keys(this.options.modifiers)\n      .map(name => ({\n        name,\n        ...this.options.modifiers[name],\n      }))\n      // sort the modifiers by order\n      .sort((a, b) => a.order - b.order);\n\n    // modifiers have the ability to execute arbitrary code when Popper.js get inited\n    // such code is executed in the same order of its modifier\n    // they could add new properties to their options configuration\n    // BE AWARE: don't add options to `options.modifiers.name` but to `modifierOptions`!\n    this.modifiers.forEach(modifierOptions => {\n      if (modifierOptions.enabled && isFunction(modifierOptions.onLoad)) {\n        modifierOptions.onLoad(\n          this.reference,\n          this.popper,\n          this.options,\n          modifierOptions,\n          this.state\n        );\n      }\n    });\n\n    // fire the first update to position the popper in the right place\n    this.update();\n\n    const eventsEnabled = this.options.eventsEnabled;\n    if (eventsEnabled) {\n      // setup event listeners, they will take care of update the position in specific situations\n      this.enableEventListeners();\n    }\n\n    this.state.eventsEnabled = eventsEnabled;\n  }\n\n  // We can't use class properties because they don't get listed in the\n  // class prototype and break stuff like Sinon stubs\n  update() {\n    return update.call(this);\n  }\n  destroy() {\n    return destroy.call(this);\n  }\n  enableEventListeners() {\n    return enableEventListeners.call(this);\n  }\n  disableEventListeners() {\n    return disableEventListeners.call(this);\n  }\n\n  /**\n   * Schedules an update. It will run on the next UI update available.\n   * @method scheduleUpdate\n   * @memberof Popper\n   */\n  scheduleUpdate = () => requestAnimationFrame(this.update);\n\n  /**\n   * Collection of utilities useful when writing custom modifiers.\n   * Starting from version 1.7, this method is available only if you\n   * include `popper-utils.js` before `popper.js`.\n   *\n   * **DEPRECATION**: This way to access PopperUtils is deprecated\n   * and will be removed in v2! Use the PopperUtils module directly instead.\n   * Due to the high instability of the methods contained in Utils, we can't\n   * guarantee them to follow semver. Use them at your own risk!\n   * @static\n   * @private\n   * @type {Object}\n   * @deprecated since version 1.8\n   * @member Utils\n   * @memberof Popper\n   */\n  static Utils = (typeof window !== 'undefined' ? window : global).PopperUtils;\n\n  static placements = placements;\n\n  static Defaults = Defaults;\n}\n\n/**\n * The `referenceObject` is an object that provides an interface compatible with Popper.js\n * and lets you use it as replacement of a real DOM node.<br />\n * You can use this method to position a popper relatively to a set of coordinates\n * in case you don't have a DOM node to use as reference.\n *\n * ```\n * new Popper(referenceObject, popperNode);\n * ```\n *\n * NB: This feature isn't supported in Internet Explorer 10.\n * @name referenceObject\n * @property {Function} data.getBoundingClientRect\n * A function that returns a set of coordinates compatible with the native `getBoundingClientRect` method.\n * @property {number} data.clientWidth\n * An ES6 getter that will return the width of the virtual reference element.\n * @property {number} data.clientHeight\n * An ES6 getter that will return the height of the virtual reference element.\n */\n","export * from './lib/autocomplete';\nexport * from './lib/menu';\nexport * from './lib/popup';\nexport * from './lib/select';\nexport * from './lib/tooltip';\n","import {dom, DomElementArg, MaybeObsArray, onElem, onKeyElem} from 'grainjs';\nimport {BaseMenu, defaultMenuOptions, IMenuOptions, menuItem} from './menu';\nimport {IOpenController, IPopupContent, PopupControl, setPopupToFunc} from './popup';\n\n/**\n * IAutocomplete options adds some properties to IMenuOptions to customize autocomplete behavior:\n */\nexport interface IAutocompleteOptions extends IMenuOptions {\n\n  // Overrides default case-insensitive row select behavior.\n  findMatch?: (content: HTMLElement[], value: string) => HTMLElement|null;\n\n  // A callback triggered when user clicks one of the choices.\n  onClick?: (choice: string) => void;\n\n}\n\nconst defaultFindMatch = (content: HTMLElement[], val: string) => {\n  if (!val) { return null; } // Empty string match nothing\n  val = val.toLowerCase();\n  return content.find((el: any) => el.textContent.toLowerCase().startsWith(val)) || null;\n};\n\n/**\n * User interface for creating a weasel autocomplete element in DOM.\n *\n * Usage:\n *      const employees = ['Thomas', 'June', 'Bethany', 'Mark', 'Marjorey', 'Zachary'];\n *      const inputElem = input(...);\n *      autocomplete(inputElem, employees);\n */\nexport function autocomplete(\n  inputElem: HTMLInputElement,\n  choices: MaybeObsArray<string>,\n  options: IAutocompleteOptions = {}\n): HTMLInputElement {\n\n  // Options to pass into the Autocomplete class.\n  const menuOptions: IAutocompleteOptions = {\n    ...defaultMenuOptions,\n    trigger: [(triggerElem: Element, ctl: PopupControl) => {\n      dom.onElem(triggerElem, 'focus', () => ctl.open());\n      dom.onKeyElem(triggerElem as HTMLElement, 'keydown', {\n        ArrowDown: () => ctl.open(),\n        ArrowUp: () => ctl.open()\n      });\n    }],\n    stretchToSelector: 'input, textarea',\n    ...options\n  };\n\n  const contentFunc = () => [\n    dom.forEach(choices, (opt) => (\n      menuItem(\n        () => { inputElem.value = opt; if (options.onClick) { options.onClick(opt); }},\n        opt,\n      )\n    ))\n  ];\n\n  setPopupToFunc(inputElem,\n    (ctl) => Autocomplete.create(null, ctl, contentFunc(), menuOptions),\n    menuOptions);\n\n  return inputElem;\n}\n\n/**\n * Creates an instance of Menu meant to be attached to an input and used as an autocomplete.\n *\n * Should always be created using autocomplete(), which accepts as an argument the input element.\n */\nclass Autocomplete extends BaseMenu implements IPopupContent {\n  private readonly _rows: HTMLElement[] = Array.from(this._menuContent.children) as HTMLElement[];\n  private readonly _findMatch: (content: HTMLElement[], value: string) => HTMLElement|null;\n  private _lastAsTyped: string;\n\n  constructor(ctl: IOpenController, items: DomElementArg[], options: IAutocompleteOptions) {\n    super(ctl, items, options);\n    this.focusOnSelected = false;\n\n    this._findMatch = options.findMatch || defaultFindMatch;\n\n    const trigger = ctl.getTriggerElem() as HTMLInputElement;\n\n    // Keeps track of the last value as typed by the user.\n    this._lastAsTyped = trigger.value;\n    this.autoDispose(dom.onElem(trigger, 'input', () => { this._lastAsTyped = trigger.value; }));\n\n    // Add key handlers to the trigger element as well as the menu if it is an input.\n    this.autoDispose(onKeyElem(trigger, 'keydown', {\n      ArrowDown: () => {\n        this.nextIndex();\n        this._updateValue(trigger);\n      },\n      ArrowUp: () => {\n        this.prevIndex();\n        this._updateValue(trigger);\n      },\n      // On Enter (and Tab) key, we update the trigger's value and close the dropdown. We always let\n      // event propagate (notice the '$' at the end of 'Enter$') because the user may want to handle\n      // these events independently as well. Note that the menu items' action does not run on Enter\n      // because the focus remains on the trigger element at all time.\n      Enter$: (ev) => {\n        this._updateValue(trigger);\n        ctl.close();\n      },\n      Tab$: (ev) => {\n        this._updateValue(trigger);\n        ctl.close();\n      },\n      Escape$: () => ctl.close(),\n    }));\n\n    this.autoDispose(onElem(trigger, 'input', () => {\n      this._selectRow(trigger.value);\n    }));\n\n    if (trigger.value) {\n      this._selectRow(trigger.value);\n    }\n\n    // Prevent trigger element from being blurred on click.\n    dom.onElem(this._menuContent, 'mousedown', (ev) => ev.preventDefault());\n  }\n\n  private _selectRow(inputVal: string): void {\n    const match: HTMLElement|null = this._findMatch(this._rows, inputVal);\n    this.setSelected(match);\n  }\n\n  // Update trigger's value with the currently selected choice. Or with the last typed value, if\n  // nothing is selected.\n  private _updateValue(trigger: HTMLInputElement) {\n    trigger.value = this._selected ? this._selected.textContent! : this._lastAsTyped;\n  }\n}\n","/**\n * A menu is a collection of menu items. Besides holding the items, it also knows which item is\n * selected, and allows selection via the keyboard.\n *\n * The standard menu item offers enough flexibility to suffice for many needs, and may be replaced\n * entirely by a custom item. For an item to be a selectable menu item, it needs `tabindex=-1`\n * attribute set. If unset, or if the \"disabled\" class is set, the item will not be selectable.\n *\n * Further, if `dom.dataElem(elem, 'menuItemSelected', (yesNo: boolean, elem) => {})` is set, that\n * callback will be called whenever the item is selected and unselected. In addition, the selected\n * item gets a css class. A callback should be seldom needed, but it is use for nested menus.\n *\n * Clicks on items will normally propagate to the menu, where they get caught and close the menu.\n * If a click on an item should not close the menu, the item should stop the click's propagation.\n */\nimport {dom, domDispose, DomElementArg, DomElementMethod, DomMethod, EventCB, styled} from 'grainjs';\nimport {Disposable, onKeyDown, onKeyElem} from 'grainjs';\nimport defaultsDeep = require('lodash/defaultsDeep');\nimport mergeWith = require('lodash/mergeWith');\nimport {IOpenController, IPopupContent, IPopupOptions, PopupControl, setPopupToFunc} from './popup';\nimport {ISelectOptions} from './select';\n\nexport type MenuCreateFunc = (ctl: IOpenController) => DomElementArg[];\n\ntype MenuClassCons = (context: any, ctl: IOpenController, items: DomElementArg[], options?: IMenuOptions) => BaseMenu;\n\nexport interface IMenuOptions extends IPopupOptions {\n  isSubMenu?: boolean;\n  selectOnOpen?: boolean;\n  menuCssClass?: string;    // If provided, applies the css class to the menu container.\n\n  // If given, the menu will set the `weasel-popup-open` css class on the matching ancestor of the\n  // trigger element (in addition to setting it on the trigger element itself). Useful to keep an\n  // element highlighted while an associated menu is open.\n  parentSelectorToMark?: string;\n\n  // If given, sets the width of the opened menu to equal that of the matching ancestor of the\n  // trigger element.\n  stretchToSelector?: string;\n\n  // If set to true, users can move to nothing selected with arrow keys. Otherwise, pressing arrow\n  // down on the last item selects the first one, and pressing the arrow up on the first item\n  // selects the last one.\n  allowNothingSelected?: boolean;\n}\n\nexport interface ISubMenuOptions {\n  menuCssClass?: string;    // If provided, applies the css class to the menu container.\n}\n\n/**\n * Attaches a menu to its trigger element, for example:\n *    dom('div', 'Open menu', menu((ctl) => [\n *      menuItem(...),\n *      menuItem(...),\n *    ]))\n */\nexport function menu(createFunc: MenuCreateFunc, options?: IMenuOptions): DomElementMethod {\n  return (elem) => menuElem(elem, createFunc, options);\n}\nexport function menuElem(triggerElem: Element, createFunc: MenuCreateFunc, options: IMenuOptions = {}) {\n  return baseElem((...args) => Menu.create(...args), triggerElem, createFunc, options);\n}\n\n/**\n * Attaches an inputMenu to its trigger element, for example:\n *    dom('input', select((ctl) => [\n *      menuItem(...),\n *      menuItem(...),\n *    ]))\n * The inputMenu menu differs from a normal menu in that focus is maintained on the triggerElem\n * when the menu is open. This makes it ideal for input trigger elements.\n */\nexport function inputMenu(createFunc: MenuCreateFunc, options?: IMenuOptions): DomElementMethod {\n  return (elem) => inputMenuElem(elem, createFunc, options);\n}\nexport function inputMenuElem(triggerElem: Element, createFunc: MenuCreateFunc, options: IMenuOptions = {}) {\n  return baseElem((...args) => InputMenu.create(...args), triggerElem, createFunc, options);\n}\n\n// Helper for menuElem and selectElem.\nfunction baseElem(createFn: MenuClassCons, triggerElem: Element, createFunc: MenuCreateFunc,\n                  options: ISelectOptions = {}) {\n  // This is similar to defaultsDeep but avoids merging arrays, since options.trigger should have\n  // the exact value from options if present.\n  options = mergeWith({}, defaultMenuOptions, options,\n    (objValue: any, srcValue: any) => Array.isArray(srcValue) ? srcValue : undefined);\n  setPopupToFunc(triggerElem,\n    (ctl, opts) => createFn(null, ctl, createFunc(ctl), defaultsDeep(opts, options)),\n    options);\n}\n\n/**\n * Implements a single menu item.\n *\n * The appearance of the menuItem components can be changed by setting the followingcss variables\n * in the parent project:\n *    --weaseljs-selected-background-color\n *    --weaseljs-selected-color\n *    --weaseljs-menu-item-padding\n */\nexport function menuItem(action: (item: HTMLElement) => void, ...args: DomElementArg[]): Element {\n  return cssMenuItem(\n    ...args,\n    dom.on('click', (ev, elem) => elem.classList.contains('disabled') || action(elem)),\n    onKeyDown({Enter$: (ev, elem) => action(elem)})\n  );\n}\n\n/**\n * A version of menuItem that's an <a> link element.\n */\nexport function menuItemLink(...args: DomElementArg[]): Element {\n  return cssMenuItemLink({tabindex: '-1'}, cssMenuItem.cls(''), ...args,\n    // This prevents propagation, but NOT the default action, which is to open the link.\n    onKeyDown({Enter$: (ev) => ev.stopPropagation()})\n  );\n}\n\nexport const defaultMenuOptions: IMenuOptions = {\n  attach: 'body',\n  boundaries: 'viewport',\n  placement: 'bottom-start',\n  showDelay: 0,\n  trigger: ['click'],\n  modifiers: {\n    // gpuAcceleration (true by default) causes a tiny UI artifact: attempting to drag a link, at\n    // least in Firefox, causes it to be dragged from a different location on the screen where it\n    // actually is, which looks strange. Disabling has no noticeable downsides.\n    computeStyle: {gpuAcceleration: false}\n  },\n};\n\n/**\n * Implementation of the BaseMenu. Extended by Menu and Select.\n */\nexport class BaseMenu extends Disposable implements IPopupContent {\n  // The outer element (required by IPopupContent), which contains _menuContent.\n  public readonly content: HTMLElement;\n\n  // The UL element containing the actual menu items.\n  protected _menuContent: HTMLElement;\n\n  protected _selected: HTMLElement|null = null;\n\n  // Indicates whether menu rows should be given browser focus when selected.\n  // Modified by extending classes to prevent trigger element from losing focus.\n  private _focusOnSelected: boolean = true;\n\n  private _allowNothingSelected: boolean;\n\n  constructor(private ctl: IOpenController, items: DomElementArg[], options: IMenuOptions = {}) {\n    super();\n    const stretchContainer: Element|null = options.stretchToSelector ?\n      ctl.getTriggerElem().closest(options.stretchToSelector) : null;\n\n    // Set `weasel-popup-open` class on the ancestor of trigger that matches parentSelectorToMark.\n    if (options && options.parentSelectorToMark) {\n      const parent = ctl.getTriggerElem().closest(options.parentSelectorToMark);\n      if (parent) {\n        ctl.setOpenClass(parent);\n      }\n    }\n\n    this._allowNothingSelected = Boolean(options.allowNothingSelected);\n\n    this.content = cssMenuWrap(\n      this._menuContent = cssMenu({class: options.menuCssClass || ''},\n        items,\n        stretchContainer ? (elem) => stretchMenuToContainer(elem, stretchContainer) : null,\n        mouseOverOnMove((ev) => this._onMouseOver(ev)),\n        dom.on('mouseleave', (ev) => this._onMouseLeave(ev)),\n        onKeyDown({\n          ArrowDown: () => this.nextIndex(),\n          ArrowUp: () => this.prevIndex(),\n          ...options.isSubMenu ? {\n            ArrowLeft: () => ctl.close(0),\n          } : {},\n        }),\n      ),\n      // Events set on the parent of _menuContent receive events bubbled up from submenus.\n      dom.on('click', (ev) => isInSelectableItem(ev.target as Element) ? ctl.close(0) : ev.stopPropagation()),\n      options.isSubMenu ? null :\n        onKeyDown({\n          Escape: () => ctl.close(0),\n          Enter: () => ctl.close(0),    // gets bubbled key after action is taken.\n        }),\n    );\n    this.onDispose(() => domDispose(this.content));\n  }\n\n  public onRemove() {\n    // The focus restoration is mainly needed for the sake of submenus. When focus has already\n    // moved elsewhere, don't restore it. We need to check it before the menu is removed from DOM.\n    if (this.content.contains(document.activeElement)) {\n      (this.ctl.getTriggerElem() as HTMLElement).focus();\n    }\n  }\n\n  protected nextIndex(): void {\n    const next = this._getNextSelectable(\n      this._selected, (elem) => elem.nextElementSibling, this._menuContent.firstElementChild\n    );\n    this.setSelected(next);\n  }\n\n  protected prevIndex(): void {\n    const next = this._getNextSelectable(\n      this._selected, (elem) => elem.previousElementSibling, this._menuContent.lastElementChild\n    );\n    this.setSelected(next);\n  }\n\n  // When the selected element changes, update the classes of the formerly and newly-selected\n  // elements and call any callbacks bound to selection stored on the elements.\n  // Also focus the newly-selected element for keyboard events.\n  protected setSelected(elem: HTMLElement|null) {\n    const prev = this._selected;\n    if (elem === prev) { return; }\n    if (prev) {\n      const callback = dom.getData(prev, 'menuItemSelected');\n      if (callback) { callback(false, prev); }\n      prev.classList.remove(cssMenuItem.className + '-sel');\n    }\n    if (elem) {\n      const callback = dom.getData(elem, 'menuItemSelected');\n      if (callback) { callback(true, elem); }\n      elem.classList.add(cssMenuItem.className + '-sel');\n    }\n    this._selected = elem;\n    // Focus the item if available, or the parent menu container otherwise.\n    if (this._focusOnSelected) { (elem || this._menuContent).focus(); }\n  }\n\n  protected set focusOnSelected(bool: boolean) {\n    this._focusOnSelected = bool;\n  }\n\n  private _onMouseOver(ev: MouseEvent) {\n    if (!isMenuContainer(ev.target as Element)) {\n      const elem = this._findTargetItem(ev);\n      this.setSelected(elem);     // If elem is null, intentionally deselect.\n    }\n  }\n\n  private _onMouseLeave(ev: MouseEvent) {\n    const elem = this._selected;\n    if (elem && !elem.classList.contains('weasel-popup-open')) {\n      // Don't deselect if there is an open submenu.\n      this.setSelected(null);\n    }\n  }\n\n  private _findTargetItem(ev: MouseEvent): HTMLElement|null {\n    // Find immediate child of this._menuContent which is an ancestor of ev.target.\n    const elem = findAncestorChild(this._menuContent, ev.target as Element);\n    return elem && isSelectable(elem) ? elem : null;\n  }\n\n  /**\n   * Given a starting Element, a function to retrieve the next Element and the element to start over\n   * after reaching the last sibling, returns the next selectable Element (based on\n   * isSelectable). Returns null if the function to retrieve the next Element returns null. Always\n   * returns startElem if returned by getNext function, to prevent an infinite loop.\n   */\n  private _getNextSelectable(startElem: Element|null,\n                             getNext: (elem: Element) => Element|null,\n                             firstElem: Element|null): HTMLElement|null {\n    let next = this._getNext(startElem, getNext, firstElem);\n    while (next && next !== startElem && !isSelectable(next)) { next = this._getNext(next, getNext, firstElem); }\n    return next as HTMLElement|null;\n  }\n\n  private _getNext(elem: Element|null,\n                   getNext: (elem: Element) => Element|null,\n                   firstElem: Element|null): Element|null {\n    if (!elem) { return firstElem; }\n    return getNext(elem) || (this._allowNothingSelected ? null : firstElem);\n  }\n}\n\n/**\n * Implementation of the Menu. See menu() documentation for usage.\n */\nexport class Menu extends BaseMenu implements IPopupContent {\n  constructor(ctl: IOpenController, items: DomElementArg[], options: IMenuOptions = {}) {\n    super(ctl, items, options);\n\n    setTimeout(() =>\n      (options.selectOnOpen ? this.nextIndex() : this._menuContent.focus()), 0);\n  }\n}\n\n/**\n * Implementation of the InputMenu. See inputMenu() documentation for usage.\n */\nexport class InputMenu extends BaseMenu implements IPopupContent {\n  constructor(ctl: IOpenController, items: DomElementArg[], options: IMenuOptions = {}) {\n    super(ctl, items, options);\n\n    // Add key handlers to the trigger element as well as the menu if it is an input.\n    this.autoDispose(onKeyElem(ctl.getTriggerElem() as HTMLElement, 'keydown', {\n      ArrowDown: () => this.nextIndex(),\n      ArrowUp: () => this.prevIndex(),\n      Escape: () => ctl.close(0)\n    }));\n  }\n}\n\n/**\n * Returns true if elem is a menu (or submenu) div.\n */\nfunction isMenuContainer(elem: Element|null) {\n  return elem && elem.classList.contains(cssMenu.className);\n}\n\n/**\n * Returns a boolean indicating whether the Element is selectable in the menu.\n */\nfunction isSelectable(elem: Element): elem is HTMLElement {\n  // Offset height > 0 is used to determine if the element is visible.\n  return elem.hasAttribute('tabIndex') && !elem.classList.contains('disabled') &&\n    (elem as HTMLElement).offsetHeight > 0;\n}\n\n/**\n * Whether the given element is part of a selectable item. A click on it will close menus.\n */\nfunction isInSelectableItem(elem: Element): boolean {\n  // Similar to _findTargetItem, but finds the menu item (direct child of cssMenu) containing\n  // elem, regardless of which menu or submenu it's in, and returns whether it's selectable.\n  const item = findAncestorChild(elem.closest('.' + cssMenu.className)!, elem);\n  return item ? isSelectable(item) : false;\n}\n\n/**\n * Helper function which returns the direct child of ancestor which is an ancestor of elem, or\n * null if elem is not a descendant of ancestor.\n */\nfunction findAncestorChild(ancestor: Element, elem: Element|null): Element|null {\n  while (elem && elem.parentElement !== ancestor) {\n    elem = elem.parentElement;\n  }\n  return elem;\n}\n\n/**\n * Sets the width of the given menu element to match the given container element. Used by\n * IMenuOptions setting 'stretchToSelector'.\n */\nfunction stretchMenuToContainer(menuEl: HTMLElement, containerElem: Element): void {\n  const style = menuEl.style;\n  style.minWidth = containerElem.getBoundingClientRect().width + 'px';\n  style.marginLeft = style.marginRight = '0';\n}\n\n/**\n * A version of dom.on('mouseover') that doesn't start firing until there is first a 'mousemove'.\n * This way if an element is created under the mouse cursor (triggered by the keyboard, for\n * instance) it's not immediately highlighted, but only when a user moves the mouse.\n */\nfunction mouseOverOnMove<T extends EventTarget>(callback: EventCB<MouseEvent, T>): DomMethod<T> {\n  return (elem) => {\n    const lis = dom.onElem(elem, 'mousemove', (...args) => {\n      lis.dispose();\n      dom.onElem(elem, 'mouseover', callback);\n      callback(...args);\n    });\n  };\n}\n\n/**\n * Implements a menu item which opens a submenu.\n */\nexport function menuItemSubmenu(\n  submenu: MenuCreateFunc,\n  options: ISubMenuOptions,\n  ...args: DomElementArg[]\n): Element {\n  const ctl: PopupControl<IMenuOptions> = PopupControl.create(null);\n\n  const popupOptions: IMenuOptions = {\n    placement: 'right-start',\n    trigger: [],    // no \"click\": don't toggle this menu on click.\n    modifiers: {preventOverflow: {padding: 10}},\n    boundaries: 'viewport',\n    controller: ctl,\n    attach: '.' + cssMenuWrap.className,\n    isSubMenu: true,\n    ...options\n  };\n\n  return cssMenuItem(...args,\n    dom('div', '\\u25B6'),     // A right-pointing triangle\n\n    dom.autoDispose(ctl),\n\n    // Set the submenu to be attached as a child of this element rather than as a sibling.\n    menu(submenu, popupOptions),\n\n    // On mouseover, open the submenu. Add a delay to avoid it on transient mouseovers.\n    dom.on('mouseenter', () => ctl.open({showDelay: 200})),\n\n    // On right-arrow, open the submenu immediately, and select the first item automatically.\n    onKeyDown({\n      ArrowRight: () => ctl.open({selectOnOpen: true}),\n      Enter: () => ctl.open({selectOnOpen: true}),\n    }),\n\n    // When selection changes, use default behavior and also close the popup.\n    (elem: Element) => dom.dataElem(elem, 'menuItemSelected',\n      (yesNo: boolean) => yesNo || ctl.close()),\n\n    // Clicks that open a submenu should not cause parent menu to close.\n    dom.on('click', (ev) => { ev.stopPropagation(); }),\n  );\n}\n\nexport const cssMenuWrap = styled('div', `\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  outline: none;\n`);\n\nexport const cssMenu = styled('ul', `\n  max-height: calc(95vh - 10px);\n  box-sizing: border-box;\n  overflow: auto;\n  outline: none;\n  list-style: none;\n  margin: 2px;\n  text-align: left;\n  font-size: 13px;\n  font-family: sans-serif;\n  background-color: white;\n  color: #1D1729;\n  min-width: 160px;\n  border: none;\n  border-radius: 2px;\n  box-shadow: 0 0 2px rgba(0,0,0,0.5);\n  padding: 6px 0;\n`);\n\nexport const cssMenuItem = styled('li', `\n  display: flex;\n  justify-content: space-between;\n  outline: none;\n  padding: var(--weaseljs-menu-item-padding, 8px 24px);\n\n  &-sel {\n    cursor: pointer;\n    background-color: var(--weaseljs-selected-background-color, #5AC09C);\n    color:            var(--weaseljs-selected-color, white);\n  }\n  &.disabled {\n    color: grey;\n  }\n`);\n\nexport const cssMenuItemLink = styled('a', `\n  display: flex;\n  justify-content: space-between;\n  outline: none;\n  padding: var(--weaseljs-menu-item-padding, 8px 24px);\n  user-select: none;\n  -moz-user-select: none;\n\n  &, &:hover, &:focus {\n    color: inherit;\n    text-decoration: none;\n    outline: none;\n  }\n  &.${cssMenuItem.className}-sel {\n    color: var(--weaseljs-selected-color, white);\n  }\n`);\n\nexport const cssMenuDivider = styled('div', `\n  height: 1px;\n  width: 100%;\n  margin: 4px 0;\n  background-color: #D9D9D9;\n`);\n","import {Disposable, dom, domDispose, Holder, IDisposable} from 'grainjs';\nimport defaultsDeep = require('lodash/defaultsDeep');\nimport defaultTo = require('lodash/defaultTo');\nimport noop = require('lodash/noop');\nimport Popper from 'popper.js';\n\n/**\n * On what event the trigger element opens the popup. E.g. 'hover' is suitable for a tooltip,\n * while 'click' is suitable for a dropdown menu.\n */\ntype Trigger  = 'click' | 'contextmenu' |  'hover' | 'focus' | {keys: string[]} | AttachTriggerFunc;\n\n/**\n * AttachTriggerFunc allows setting custom trigger events in a callback function to toggle the\n * menu open state.\n */\ntype AttachTriggerFunc = (triggerElem: Element, ctl: PopupControl) => void;\n\n/**\n * Options available to setPopup* methods.\n */\nexport interface IPopupOptions {\n  // Placement of popup, as for Popper options, e.g. \"top\", \"bottom-end\" or \"right-start\".\n  placement?: Popper.Placement;\n\n  // To which element to append the popup content. Null means triggerElem.parentNode and is the\n  // default; string is a selector for the closest matching ancestor of triggerElem, e.g. 'body'.\n  attach?: Element|string|null;\n\n  // Boundaries for the placement of the popup. This determines the values of\n  // modifiers.flip.boundariesElement and modifiers.preventOverflow.boundariesElement. Use null to\n  // use the defaults from popper.js. These may be set individually via modifiers.\n  boundaries?: Element|'scrollParent'|'window'|'viewport'|null;\n\n  // On what events, the popup is triggered.\n  trigger?: Trigger[];\n\n  showDelay?: number;       // Default delay to show the popup. Defaults to 0.\n  hideDelay?: number;       // Default delay to hide the popup. Defaults to 0.\n\n  // Modifiers passed directly to the underlying Popper library.\n  // See https://popper.js.org/popper-documentation.html#Popper.Defaults\n  // Some useful ones include:\n  //  .offset.offset: Offset of popup relative to trigger. Default 0 (but affected by arrow).\n  modifiers?: Popper.Modifiers;\n\n  // The popup controller is normally created automatically, but may be created separately in\n  // order to keep a reference to it; in that case it may be passed in with the options, and it is\n  // the caller's responsibility to ensure it gets disposed.\n  controller?: PopupControl;\n}\n\n/**\n * Helper passed to IPopupFunc which represents a currently-open popup. User may use\n * .autoDispose() and .onDispose() methods which will trigger when the popup is closed.\n */\nexport interface IOpenController extends Disposable {\n  /**\n   * Closes the popup. Uses a default delay if delayMs is omitted.\n   */\n  close(delayMs?: number): void;\n\n  /**\n   * Sets css class `cls` on elem while this popup is open, defaulting to \"weasel-popup-open\".\n   * Removes the class on close.\n   */\n  setOpenClass(elem: Element, cls?: string): void;\n\n  /**\n   * Returns the trigger element that opened this popup.\n   */\n  getTriggerElem(): Element;\n\n  /**\n   * Schedules an UI update for the popup's position.\n   */\n  update(): void;\n\n  // Note that .autoDispose() and .onDispose() methods from grainjs Disposable are available,\n  // and triggered when the popup is closed.\n}\n\n/**\n * Type for the basic function which gets called to open a generic popup. The parameter allows\n * extending IPopupOptions with extra parameters specific to a given popup.\n */\nexport type IPopupFunc<T extends IPopupOptions = IPopupOptions> =\n  (ctl: IOpenController, options: T) => IPopupContent;\n\n/**\n * Return value of IPopupFunc: a popup is a disposable object, whose .content property contains\n * the element to show. This object gets disposed when the popup is closed.\n *\n * The first element in content matching the '[x-arrow]' selector will be used as the arrow.\n */\nexport interface IPopupContent extends IDisposable {\n  readonly content: Element;\n\n  // Called before content is removed from DOM. (Note that disposers run after.)\n  onRemove?(): void;\n}\n\n/**\n * Type for a function to create a popup as a DOM element; usable with setPopupToCreateDom().\n * This is a somewhat simpler interface than IPopupFunc.\n */\nexport type IPopupDomCreator = (ctl: IOpenController) => Element;\n\n/**\n * The basic interface to attach popup behavior to a trigger element. According to options.trigger\n * events events on triggerElem, calls openFunc(ctl, options) to open a popup, and disposes the\n * returned value to close it. Returns the same controller that's passed to openFunc.\n *\n * Note that there is no default for options.trigger: if it's not specified, no events will\n * trigger this popup.\n */\nexport function setPopupToFunc<T extends IPopupOptions = IPopupOptions>(\n    triggerElem: Element, openFunc: IPopupFunc<T>, options: T): PopupControl<T> {\n  let ctl = options.controller as PopupControl<T>;\n  if (!ctl) {\n    ctl = PopupControl.create(null) as PopupControl<T>;\n    dom.autoDisposeElem(triggerElem, ctl);\n  }\n  ctl.attachElem(triggerElem, openFunc, options);\n  return ctl;\n}\n\n/**\n * Attaches the given element on open, detaches it on close. Useful e.g. for a static tooltip.\n */\nexport function setPopupToAttach(triggerElem: Element, content: Element,\n                                 options: IPopupOptions): PopupControl {\n  const openResult: IPopupContent = {content, dispose: noop};\n  return setPopupToFunc(triggerElem, () => openResult, options);\n}\n\n/**\n * Attaches the element returned by the given func on open, detaches and disposes it on close.\n */\nexport function setPopupToCreateDom(triggerElem: Element, domCreator: IPopupDomCreator,\n                                    options: IPopupOptions): PopupControl {\n  function openFunc(ctl: IOpenController) {\n    const content = domCreator(ctl);\n    function dispose() { domDispose(content); }\n    return {content, dispose};\n  }\n  return setPopupToFunc(triggerElem, openFunc, options);\n}\n\n/**\n * Open a popup using as content the element returned by the given func. Note that the `trigger`\n * option is ignored by this function and that the default of the `attach` option is `body` instead of `null`.\n *\n * It allows you to bind the creation of the popup to a menu item as follow:\n *   menuItem(elem => popupOpen(elem, (ctl) => buildDom(ctl)))\n *\n */\nexport function popupOpen(reference: Element, domCreator: IPopupDomCreator, options: IPopupOptions): PopupControl {\n  function openFunc(openCtl: IOpenController) {\n    const content = domCreator(openCtl);\n    function dispose() { domDispose(content); ctl.dispose(); }\n    return {content, dispose};\n  }\n  const ctl = PopupControl.create(null) as PopupControl;\n\n  ctl.attachElem(reference, openFunc, {\n\n    // Set the default for the attach option to `body`. Because otherwise the default 'null' would\n    // causes the popup to be attached to reference.parentNode. This does make little sense when used\n    // as follow `menuItem((elem) => popupOpen(elem, ...` because it would close the popup just after\n    // the click.\n    attach: 'body',\n\n    // The Popper's default of 'scrollParent' for modifiers.preventOverflow.boundariesElement causes\n    // the popup to be placed incorrectly when the reference element gets disposed after the\n    // click. Setting boundaries to 'viewport' solves that issue\n    boundaries: 'viewport',\n\n    ...options,\n\n    // Overrides '.trigger' to avoid attaching listeners to reference.\n    trigger: undefined\n  });\n  ctl.open();\n  return ctl;\n}\n\n// Helper type for maintaining setTimeout() timers.\ntype TimerId = ReturnType<typeof setTimeout>;\n\n/**\n * PopupControl allows the popup instances to open/close/update the popup as needed. The\n * parameter T allows popups to understand extra options and receive them via the open() call.\n */\nexport class PopupControl<T extends IPopupOptions = IPopupOptions> extends Disposable {\n  private _holder = Holder.create<OpenPopupHelper>(this);\n  private _closeTimer?: TimerId;\n  private _openTimer?: TimerId;\n  private _open: (opts: IPopupOptions) => void = noop;    // Only set once mounted.\n  private _close: () => void = noop;\n  private _showDelay: number = 0;\n  private _hideDelay: number = 0;\n\n  constructor() {\n    super();\n    // Clear timeouts on disposal, which might still be scheduled and cause JS errors in case of\n    // quick open/close/open interactions\n    this.onDispose(() => {\n      if (this._openTimer) { clearTimeout(this._openTimer); }\n      if (this._closeTimer) { clearTimeout(this._closeTimer); }\n    });\n  }\n\n  public attachElem(triggerElem: Element, openFunc: IPopupFunc<T>, options: T): void {\n    this._showDelay = options.showDelay || 0;\n    this._hideDelay = options.hideDelay || 0;\n\n    this._open = (openOptions: IPopupOptions) => {\n      this._openTimer = undefined;\n      defaultsDeep(openOptions, options);\n      OpenPopupHelper.create(this._holder, triggerElem, openFunc as IPopupFunc, openOptions, this);\n    };\n    this._close = () => {\n      this._closeTimer = undefined;\n      this._holder.clear();\n    };\n\n    if (options.trigger) {\n      for (const trigger of options.trigger) {\n        if (typeof trigger === 'function') {\n          // Call instances of AttachTriggerFunc to attach any custom trigger events.\n          trigger(triggerElem, this);\n        } else if (typeof trigger === \"object\" && \"keys\" in trigger) {\n          dom.onElem(triggerElem, 'keydown', (ev) => trigger.keys.includes(ev.key) && this.toggle());\n        } else {\n          switch (trigger) {\n            case 'click':\n              dom.onElem(triggerElem, 'click', () => this.toggle());\n              break;\n            case 'contextmenu':\n              dom.onElem(triggerElem, 'contextmenu', (ev) => {\n                ev.preventDefault(); // Prevent the default browser contextmenu behavior\n                this.open();\n              });\n              // Popups are usually closed by a click outside of triggerElem and popup content,\n              // but in this case we want clicks on triggerElem to close as well.\n              dom.onElem(triggerElem, 'click', () => this.close());\n              break;\n            case 'focus':\n              dom.onElem(triggerElem, 'focus', () => this.open());\n              dom.onElem(triggerElem, 'blur', () => this.close());\n              break;\n            case 'hover':\n              dom.onElem(triggerElem, 'mouseenter', () => this.open());\n              dom.onElem(triggerElem, 'mouseleave', () => this.close());\n              break;\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Open the popup. If reopen is true, it would replace a current open popup; otherwise if\n   * this popup is already opened, the call is ignored.\n   */\n  public open(options: Partial<T> = {}, reopen: boolean = false) {\n    const showDelay: number = defaultTo(options.showDelay, this._showDelay);\n\n    // Ensure open() call cancels a delayed close() call.\n    if (this._closeTimer) {\n      clearTimeout(this._closeTimer);\n      this._closeTimer = undefined;\n    }\n    if (reopen || (this._holder.isEmpty() && !this._openTimer)) {\n      this._openTimer = setTimeout(() => this._open(options), showDelay);\n    }\n  }\n\n  /**\n   * Close the popup, if it is open.\n   */\n  public close(delayMs: number = this._hideDelay) {\n    // Ensure closing cancels a delayed opening and vice versa.\n    if (this._openTimer) {\n      clearTimeout(this._openTimer);\n      this._openTimer = undefined;\n    }\n    this._closeTimer = setTimeout(this._close, delayMs);\n  }\n\n  /**\n   * Close the popup if it's open, open it otherwise.\n   */\n  public toggle() {\n    this._holder.isEmpty() ? this.open({}, true) : this.close();\n  }\n\n  /**\n   * Returns whether the popup is currently open.\n   */\n  public isOpen(): boolean {\n    return !this._holder.isEmpty();\n  }\n\n  /**\n   * Schedules a UI update for the popup's position.\n   */\n  public update() {\n    const helper = this._holder.get();\n    if (helper) { helper.update(); }\n  }\n}\n\n/**\n * An internal class representing a single instance of the OPEN popup. This light-weight object is\n * created to open a popup and is disposed to close it.\n */\nclass OpenPopupHelper extends Disposable {\n  private _popper: Popper;\n\n  constructor(private _triggerElem: Element, openFunc: IPopupFunc, options: IPopupOptions, private _ctl: PopupControl) {\n    super();\n\n    // Once this object is disposed, unset all fields for easier detection of bugs.\n    this.wipeOnDispose();\n\n    // Call the opener function, and dispose the result when closed.\n    const popupContent: IPopupContent = this.autoDispose(openFunc(this, options));\n    const {content, onRemove = noop} = popupContent;\n\n    // Find the requested attachment container.\n    const containerElem = _getContainer(_triggerElem, options.attach || null);\n    if (containerElem) {\n      containerElem.appendChild(content);\n      this.onDispose(() => { onRemove.call(popupContent); content.remove(); });\n    }\n\n    // Prepare and create the Popper instance, which places the content according to the options.\n    const popperOptions: Popper.PopperOptions = {\n      placement: options.placement || 'bottom',\n      modifiers: (options.boundaries ?\n        defaultsDeep(options.modifiers, {\n          flip: {boundariesElement: options.boundaries},\n          preventOverflow: {boundariesElement: options.boundaries},\n        }) :\n        options.modifiers\n      ),\n    };\n    this._popper = new Popper(_triggerElem, content, popperOptions);\n    this.onDispose(() => this._popper.destroy());\n    this.setOpenClass(_triggerElem);\n\n    // On click anywhere on the page (outside triggerElem or popup content), close it.\n    const onClick = (evt: MouseEvent) => {\n      const target: Node|null = evt.target as Node;\n      if (target && !content.contains(target) && !_triggerElem.contains(target)) {\n        this.dispose();\n      }\n    };\n    this.autoDispose(dom.onElem(document, 'click', onClick, {useCapture: true}));\n    this.autoDispose(dom.onElem(document, 'contextmenu', onClick, {useCapture: true}));\n  }\n\n  /**\n   * Closes the popup. Uses a default delay if delayMs is omitted.\n   */\n  public close(delayMs?: number) {\n    if (!this.isDisposed()) { this._ctl.close(delayMs); }\n  }\n\n  /**\n   * Sets css class `cls` on elem while this popup is open, defaulting to \"weasel-popup-open\".\n   * Removes the class on close. This is set automatically on triggerElem for styling convenience.\n   */\n  public setOpenClass(elem: Element, cls: string = 'weasel-popup-open') {\n    elem.classList.add(cls);\n    this.onDispose(() => elem.classList.remove(cls));\n  }\n\n  /**\n   * Returns the trigger element that opened this popup.\n   */\n  public getTriggerElem(): Element {\n    return this._triggerElem;\n  }\n\n  public update() { this._popper.scheduleUpdate(); }\n}\n\n/**\n * Helper that finds the container according to IPopupOptions.container. Null means\n * elem.parentNode; string is a selector for the closest matching ancestor, e.g. 'body'.\n */\nfunction _getContainer(elem: Element, attachElem: Element|string|null): Node|null {\n  return (typeof attachElem === 'string') ? elem.closest(attachElem) :\n    (attachElem || elem.parentNode);\n}\n","import {dom, DomArg, DomElementArg, onElem, styled} from 'grainjs';\nimport {BindableValue, Computed, MaybeObsArray, Observable} from 'grainjs';\nimport {BaseMenu, defaultMenuOptions, IMenuOptions, menuItem} from './menu';\nimport {IOpenController, PopupControl, setPopupToFunc} from './popup';\n\nexport interface IOptionFull<T> {\n  value: T;\n  label: string;\n  disabled?: boolean;\n  // Note that additional properties may be used for storing per-row info such as icon names.\n  // The additional property is accessible in each row's renderOption callback.\n  [addl: string]: any;\n};\n\n// For string options, we can use a string for label and value without wrapping into an object.\nexport type IOption<T> = (T & string) | IOptionFull<T>;\n\nexport interface ISelectUserOptions {\n  defaultLabel?: string,   // Button label displayed when no value is selected.\n  buttonArrow?: DomArg,    // DOM for what is typically the chevron on the select button.\n  menuCssClass?: string,   // If provided, applies the css class to the menu container.\n  buttonCssClass?: string  // If provided, applies the css class to the select button.\n  // If disabled, adds the .disabled class to the select button and prevents opening.\n  disabled?: BindableValue<boolean>;\n}\n\nexport interface ISelectOptions extends IMenuOptions {\n  // Selects the items with the given label on open - intended for internal use.\n  selectLabelOnOpen?: () => string;\n}\n\n/**\n * User interface for creating a weasel select element in DOM.\n *\n * Usage:\n *    const fruit = observable(\"apple\");\n *    select(fruit, () => [\"apple\", \"banana\", \"mango\"]);\n *\n *    const employee = observable(17);\n *    const employeesCB = () => [\n *      {value: 12, label: \"Bob\", disabled: true},\n *      {value: 17, label: \"Alice\"},\n *      {value: 21, label: \"Eve\"},\n *    ];\n *    select(employee, employeesCB, {defaultLabel: \"Select employee:\"});\n *\n * NOTE that a MaybeObsArray is accepted for the select options. We do not accept a callback to be\n * called when the dropdown menu is opened, since the active options also determine what is\n * displayed as the selected value on the button when the dropdown menu is closed.\n */\nexport function select<T>(\n  obs: Observable<T>,\n  optionArray: MaybeObsArray<IOption<T>>,\n  options: ISelectUserOptions = {},\n  renderOption: (option: IOptionFull<T|null>) => DomArg = (option) => option.label\n): Element {\n  // Create SelectKeyState to manage user value search inputs.\n  const keyState = new SelectKeyState<T>(optionArray);\n\n  // Computed contains the IOptionFull of the obs value.\n  const selected = Computed.create(null, obs, (use, val) => {\n    const array = Array.isArray(optionArray) ? optionArray : use(optionArray);\n    const option = array.find(_op => val === getOptionFull(_op).value);\n    return option ? getOptionFull(option) : ({value: null, label: options.defaultLabel || \"\"} as IOptionFull<null>);\n  });\n\n  // Select button and associated event/disposal DOM.\n  const selectBtn: Element = cssSelectBtn({tabIndex: '0', class: options.buttonCssClass || ''},\n    dom.autoDispose(selected),\n    options.disabled ? dom.cls('disabled', options.disabled) : null,\n    cssBtnText(\n      dom.domComputed(selected, sel => renderOption(sel))\n    ),\n    dom('div', {style: 'flex: none;'},\n      options.buttonArrow\n    ),\n    dom.on('keydown', (ev) => {\n      if (isDisabled()) { return; }\n      const sel = keyState.add(ev.key);\n      if (sel) { obs.set(sel.value); }\n    })\n  );\n\n  // Options to pass into the Select class.\n  const isDisabled = () => selectBtn.classList.contains('disabled');\n  const selectOptions: ISelectOptions = {\n    ...defaultMenuOptions,\n    menuCssClass: options.menuCssClass,\n    trigger: [(triggerElem: Element, ctl: PopupControl) => {\n      dom.onElem(triggerElem, 'click', () => isDisabled() || ctl.toggle()),\n      dom.onKeyElem(triggerElem as HTMLElement, 'keydown', {\n        ArrowDown: () => isDisabled() || ctl.open(),\n        ArrowUp: () => isDisabled() || ctl.open()\n      })\n    }],\n    selectLabelOnOpen: () => selected.get().label,\n    stretchToSelector: `.${cssSelectBtn.className}`\n  };\n\n  // DOM content of the open select menu.\n  const selectContent = () => [\n    dom.forEach(optionArray, (option) => {\n      const obj: IOptionFull<T> = getOptionFull(option);\n      // Note we only set 'selected' when an <option> is created; we are not subscribing to obs.\n      // This is to reduce the amount of subscriptions, esp. when number of options is large.\n      return menuItem(() => { obs.set(obj.value); },\n        Object.assign({disabled: obj.disabled, selected: obj.value === obs.get()},\n          obj.disabled ? {class: 'disabled'} : {}),\n        renderOption(obj)\n      );\n    })\n  ];\n\n  setPopupToFunc(selectBtn,\n    (ctl) => Select.create(null, ctl, selectContent(), selectOptions),\n    selectOptions);\n\n  return selectBtn;\n}\n\n/**\n * Creates an instance of Menu intended to mimic the behavior of the select HTML element.\n *\n * Should always be created using select(), which adds the select button and associated logic.\n */\nclass Select<T> extends BaseMenu {\n  private readonly _selectRows: HTMLElement[] = Array.from(this._menuContent.children) as HTMLElement[];\n\n  // Create array of options on build to prevent rebuilding on each keystroke.\n  private readonly _selectOptions: IOption<string>[] = this._selectRows.map(_elem => ({\n    label: _elem.textContent || \"\",\n    value: _elem.textContent || \"\",\n    disabled: _elem.classList.contains('disabled')\n  }));\n\n  // The class Select handles key input separately from the function select() since the selected\n  // option is not maintained in the class, so the search callback is called on each keystroke.\n  private readonly _keyState: SelectKeyState<string> = new SelectKeyState(this._selectOptions);\n\n  constructor(ctl: IOpenController, items: DomElementArg[], options: ISelectOptions = {}) {\n    super(ctl, items, options);\n\n    // On keydown, search for the first element with a matching label.\n    onElem(this._menuContent, 'keydown', (ev) => {\n      const sel = this._keyState.add(ev.key);\n      if (sel) { this._selectRow(sel.label); }\n    });\n\n    // If an initial value is given, use it, otherwise select the first element.\n    const init = options.selectLabelOnOpen ? options.selectLabelOnOpen() : \"\";\n    setTimeout(() => this._selectRow(init, true), 0);\n  }\n\n  // If defaultToNext is set, the next index is selected when no element is found.\n  private _selectRow(label: string, defaultToNext: boolean = false): void {\n    const elem = this._selectRows.find(_elem => _elem.textContent === label);\n    return (elem || !defaultToNext) ? this.setSelected(elem || null) : this.nextIndex();\n  }\n}\n\n\n/**\n * Maintains the state of the user's keyed-in value when searching in the select element.\n */\nclass SelectKeyState<T> {\n  private _term: string = \"\";\n  private _cycleIndex: number = 0;\n  private _timeoutId: NodeJS.Timeout|null = null;\n\n  // Requires _itemCallback, a function that returns all IOptions in the select.\n  constructor(private _itemArray: MaybeObsArray<IOption<T>>) {}\n\n  // Adds a character to the search term. Returns the latest first match of the items, or null\n  // if no items match.\n  public add(char: string): IOptionFull<T>|null {\n    // Filter out any keys that are not a single character. Make all searching case-insensitive.\n    if (char.length > 1) { return null; }\n    char = char.toLowerCase();\n\n    // Clear the search term after a timeout. Any new entry should reset the timeout.\n    if (this._timeoutId) { clearTimeout(this._timeoutId); }\n    this._timeoutId = setTimeout(() => { this._term = \"\"; }, 1000);\n\n    // Add character to the search term and look for a match. If a match is found, update the\n    // observable value.\n    if (this._term.length === 1 && char === this._term[0]) {\n      // If the same character is pressed repeatedly, cycle through all options starting with\n      // that character.\n      this._cycleIndex += 1;\n    } else {\n      // Add character to the search term and reset the cycle search index.\n      this._term += char;\n      this._cycleIndex = 0;\n    }\n    const items = Array.isArray(this._itemArray) ? this._itemArray : this._itemArray.get();\n    const matches = items.filter(_item => {\n      _item = getOptionFull(_item);\n      return !_item.disabled && _item.label.toLowerCase().startsWith(this._term);\n    });\n    if (matches.length > 0) {\n      this._cycleIndex %= matches.length;\n      return getOptionFull(matches[this._cycleIndex]);\n    }\n    return null;\n  }\n}\n\nexport function getOptionFull<T>(option: IOption<T>): IOptionFull<T> {\n  return (typeof option === \"string\") ? {value: option, label: option} : (option as IOptionFull<T>);\n}\n\n// Prevents select button text overflow.\nconst cssBtnText = styled('div', `\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`);\n\nconst cssSelectBtn = styled('div', `\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  height: 30px;\n  line-height: 30px;\n  background-color: white;\n  color: black;\n  padding: 6px;\n  border: 1px solid grey;\n  border-radius: 3px;\n  cursor: pointer;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  user-select: none;\n  -moz-user-select: none;\n\n  &:focus {\n    outline: none;\n    box-shadow: 0px 0px 2px 2px #5E9ED6;\n  }\n\n  &.disabled {\n    color: grey;\n    cursor: pointer;\n  }\n`);\n","import {dom, DomCreateFunc, DomElementMethod, styled} from 'grainjs';\nimport defaults = require('lodash/defaults');\nimport {IPopupOptions, setPopupToCreateDom} from './popup';\n\n/**\n * Tooltip accepts all the options of other popup methods, plus a couple more.\n *\n * If both .content and .title options are omitted, it shows triggerElem's title attribute (but\n * note that browser's default behavior for showing title attribute remains; to avoid it, use the\n * .title option and don't set triggerElem's attribute).\n */\nexport interface ITooltipOptions extends IPopupOptions {\n  content?: DomElementMethod;   // Use this for tooltip content, overriding 'title' attr or option.\n  title?: string;               // Tooltip title to show, when triggerElem has no title attribute.\n  theme?: ITooltipTheme;        // Allow using a custom CSS theme for the tooltip.\n}\n\n/**\n * Theming the tooltip only requires theming the main element. It includes custom CSS properties\n * for customizing the arrow as well (see cssTooltip below).\n */\nexport interface ITooltipTheme {\n  tooltip: DomCreateFunc<Element>;\n}\n\nconst defaultTooltipOptions: ITooltipOptions = {\n  attach: 'body',\n  boundaries: 'viewport',\n  placement: 'top',\n  showDelay: 0,\n  trigger: ['hover', 'focus'],\n};\n\n/**\n * Usage:\n *    dom('div', tooltip({title: \"Hello\"}))\n *    dom('div', tooltip({content: () => dom('b', 'World'), placement: 'bottom'}))\n * It roughly replicates Popper's tooltip feautres from https://popper.js.org/tooltip-documentation.html\n *\n * Note that we do NOT turn off the element's title attribute (if present). Neither does the\n * popper-tooltip library. The recommendation is simply to avoid the title attribute, and pass\n * `title` (or `content`) as a tooltip option.\n */\nexport function tooltip(options?: ITooltipOptions): DomElementMethod {\n  return (elem) => tooltipElem(elem, options);\n}\nexport function tooltipElem(triggerElem: Element, options: ITooltipOptions = {}): void {\n  options = defaults({}, options, defaultTooltipOptions);\n  setPopupToCreateDom(triggerElem, () => _createDom(triggerElem, options), options);\n}\n\n/**\n * Helper that creates an actual tooltip, with some styles and a little arrow.\n */\nfunction _createDom(triggerElem: Element, options: ITooltipOptions) {\n  const title = triggerElem.getAttribute('title') || options.title || \"\";\n  const theme = options.theme || defaultTooltipTheme;\n  return theme.tooltip({role: 'tooltip'},\n    cssTooltipArrow({'x-arrow': true}),\n    dom('div', options.content || dom.text(title)),\n  );\n}\n\n/*\n * An alternative implementation could look like this. (This example is included to illustrate the\n * usage of a class for a popup.)\n *\n * function tooltipElem(triggerElem: Element, options: ITooltipOptions = {}): void {\n *   options = defaults({}, options, defaultTooltipOptions);\n *   return setPopupToFunc(triggerElem, () => Tooltip.create(null, triggerElem, options), options);\n * }\n *\n * class Tooltip extends Disposable {\n *   public readonly content: Element;\n *   constructor(triggerElem: Element, options: ITooltipOptions) {\n *     super();\n *     this.content = _createDom(triggerElem, options);\n *     this.onDispose(() => domDispose(this.content));\n *   }\n * }\n */\n\n// Note that we use two custom properties to make tooltips easier to customize:\n//    --tooltip-bg-color changes the background color for the tooltip and arrow.\n//    --tooltip-arrow-size sets the size of the tooltip arrow.\nconst cssTooltip = styled('div', `\n  --tooltip-bg-color: #FFC107;\n  --tooltip-arrow-size: 5px;\n  position: absolute;\n  background: var(--tooltip-bg-color);\n  color: black;\n  width: 100px;\n  border-radius: 3px;\n  box-shadow: 0 0 2px rgba(0,0,0,0.5);\n  padding: 10px;\n  text-align: center;\n\n  &[x-placement^=\"bottom\"] { margin-top: var(--tooltip-arrow-size); }\n  &[x-placement^=\"top\"] { margin-bottom: var(--tooltip-arrow-size); }\n  &[x-placement^=\"left\"] { margin-right: var(--tooltip-arrow-size); }\n  &[x-placement^=\"right\"] { margin-left: var(--tooltip-arrow-size); }\n`);\n\nconst cssTooltipArrow = styled('div', `\n  position: absolute;\n  width: 0;\n  height: 0;\n  border: solid transparent var(--tooltip-arrow-size);\n\n  .${cssTooltip.className}[x-placement^=\"bottom\"] & {\n    border-top-width: 0;\n    border-bottom-color: var(--tooltip-bg-color);\n    top: calc(var(--tooltip-arrow-size) * -1);\n    left: calc(50% - var(--tooltip-arrow-size));\n    margin: 0 var(--tooltip-arrow-size);\n  }\n  .${cssTooltip.className}[x-placement^=\"top\"] & {\n    border-bottom-width: 0;\n    border-top-color: var(--tooltip-bg-color);\n    bottom: calc(var(--tooltip-arrow-size) * -1);\n    left: calc(50% - var(--tooltip-arrow-size));\n    margin: 0 var(--tooltip-arrow-size);\n  }\n  .${cssTooltip.className}[x-placement^=\"left\"] & {\n    border-right-width: 0;\n    border-left-color: var(--tooltip-bg-color);\n    right: calc(var(--tooltip-arrow-size) * -1);\n    top: calc(50% - var(--tooltip-arrow-size));\n    margin: var(--tooltip-arrow-size) 0;\n  }\n  .${cssTooltip.className}[x-placement^=\"right\"] & {\n    border-left-width: 0;\n    border-right-color: var(--tooltip-bg-color);\n    left: calc(var(--tooltip-arrow-size) * -1);\n    top: calc(50% - var(--tooltip-arrow-size));\n    margin: var(--tooltip-arrow-size) 0;\n  }\n`);\n\n/**\n * The default tooltip style; this one matches popper.js tooltip library.\n */\nexport const defaultTooltipTheme: ITooltipTheme = {\n  tooltip: cssTooltip,\n};\n\nexport const cssDarkTooltip = styled(defaultTooltipTheme.tooltip, `\n  --tooltip-arrow-size: 6px;\n  --tooltip-bg-color: black;\n  color: white;\n  width: auto;\n  font-family: sans-serif;\n  font-size: 10pt;\n`);\n\n/**\n * Offer another tooltip style, usable by passing {theme: darkTooltipTheme} in tooltip options.\n */\nexport const darkTooltipTheme: ITooltipTheme = {\n  tooltip: cssDarkTooltip,\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","\"use strict\";\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Checker = exports.createCheckers = void 0;\nvar types_1 = require(\"./types\");\nvar util_1 = require(\"./util\");\n/**\n * Export functions used to define interfaces.\n */\nvar types_2 = require(\"./types\");\nObject.defineProperty(exports, \"TArray\", { enumerable: true, get: function () { return types_2.TArray; } });\nObject.defineProperty(exports, \"TEnumType\", { enumerable: true, get: function () { return types_2.TEnumType; } });\nObject.defineProperty(exports, \"TEnumLiteral\", { enumerable: true, get: function () { return types_2.TEnumLiteral; } });\nObject.defineProperty(exports, \"TFunc\", { enumerable: true, get: function () { return types_2.TFunc; } });\nObject.defineProperty(exports, \"TIface\", { enumerable: true, get: function () { return types_2.TIface; } });\nObject.defineProperty(exports, \"TLiteral\", { enumerable: true, get: function () { return types_2.TLiteral; } });\nObject.defineProperty(exports, \"TName\", { enumerable: true, get: function () { return types_2.TName; } });\nObject.defineProperty(exports, \"TOptional\", { enumerable: true, get: function () { return types_2.TOptional; } });\nObject.defineProperty(exports, \"TParam\", { enumerable: true, get: function () { return types_2.TParam; } });\nObject.defineProperty(exports, \"TParamList\", { enumerable: true, get: function () { return types_2.TParamList; } });\nObject.defineProperty(exports, \"TProp\", { enumerable: true, get: function () { return types_2.TProp; } });\nObject.defineProperty(exports, \"TTuple\", { enumerable: true, get: function () { return types_2.TTuple; } });\nObject.defineProperty(exports, \"TType\", { enumerable: true, get: function () { return types_2.TType; } });\nObject.defineProperty(exports, \"TUnion\", { enumerable: true, get: function () { return types_2.TUnion; } });\nObject.defineProperty(exports, \"TIntersection\", { enumerable: true, get: function () { return types_2.TIntersection; } });\nObject.defineProperty(exports, \"array\", { enumerable: true, get: function () { return types_2.array; } });\nObject.defineProperty(exports, \"enumlit\", { enumerable: true, get: function () { return types_2.enumlit; } });\nObject.defineProperty(exports, \"enumtype\", { enumerable: true, get: function () { return types_2.enumtype; } });\nObject.defineProperty(exports, \"func\", { enumerable: true, get: function () { return types_2.func; } });\nObject.defineProperty(exports, \"iface\", { enumerable: true, get: function () { return types_2.iface; } });\nObject.defineProperty(exports, \"lit\", { enumerable: true, get: function () { return types_2.lit; } });\nObject.defineProperty(exports, \"name\", { enumerable: true, get: function () { return types_2.name; } });\nObject.defineProperty(exports, \"opt\", { enumerable: true, get: function () { return types_2.opt; } });\nObject.defineProperty(exports, \"param\", { enumerable: true, get: function () { return types_2.param; } });\nObject.defineProperty(exports, \"tuple\", { enumerable: true, get: function () { return types_2.tuple; } });\nObject.defineProperty(exports, \"union\", { enumerable: true, get: function () { return types_2.union; } });\nObject.defineProperty(exports, \"intersection\", { enumerable: true, get: function () { return types_2.intersection; } });\nObject.defineProperty(exports, \"rest\", { enumerable: true, get: function () { return types_2.rest; } });\nObject.defineProperty(exports, \"indexKey\", { enumerable: true, get: function () { return types_2.indexKey; } });\nObject.defineProperty(exports, \"BasicType\", { enumerable: true, get: function () { return types_2.BasicType; } });\nvar util_2 = require(\"./util\");\nObject.defineProperty(exports, \"VError\", { enumerable: true, get: function () { return util_2.VError; } });\n/**\n * Takes one of more type suites (e.g. a module generated by `ts-interface-builder`), and combines\n * them into a suite of interface checkers. If a type is used by name, that name should be present\n * among the passed-in type suites.\n *\n * The returned object maps type names to Checker objects.\n */\nfunction createCheckers() {\n    var typeSuite = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        typeSuite[_i] = arguments[_i];\n    }\n    var fullSuite = Object.assign.apply(Object, __spreadArrays([{}, types_1.basicTypes], typeSuite));\n    var checkers = {};\n    for (var _a = 0, typeSuite_1 = typeSuite; _a < typeSuite_1.length; _a++) {\n        var suite_1 = typeSuite_1[_a];\n        for (var _b = 0, _c = Object.keys(suite_1); _b < _c.length; _b++) {\n            var name = _c[_b];\n            checkers[name] = new Checker(fullSuite, suite_1[name]);\n        }\n    }\n    return checkers;\n}\nexports.createCheckers = createCheckers;\n/**\n * Checker implements validation of objects, and also includes accessors to validate method calls.\n * Checkers should be created using `createCheckers()`.\n */\nvar Checker = /** @class */ (function () {\n    // Create checkers by using `createCheckers()` function.\n    function Checker(suite, ttype, _path) {\n        if (_path === void 0) { _path = 'value'; }\n        this.suite = suite;\n        this.ttype = ttype;\n        this._path = _path;\n        this.props = new Map();\n        if (ttype instanceof types_1.TIface) {\n            for (var _i = 0, _a = ttype.props; _i < _a.length; _i++) {\n                var p = _a[_i];\n                this.props.set(p.name, p.ttype);\n            }\n        }\n        this.checkerPlain = this.ttype.getChecker(suite, false);\n        this.checkerStrict = this.ttype.getChecker(suite, true);\n    }\n    /**\n     * Set the path to report in errors, instead of the default \"value\". (E.g. if the Checker is for\n     * a \"person\" interface, set path to \"person\" to report e.g. \"person.name is not a string\".)\n     */\n    Checker.prototype.setReportedPath = function (path) {\n        this._path = path;\n    };\n    /**\n     * Check that the given value satisfies this checker's type, or throw Error.\n     */\n    Checker.prototype.check = function (value) { return this._doCheck(this.checkerPlain, value); };\n    /**\n     * A fast check for whether or not the given value satisfies this Checker's type. This returns\n     * true or false, does not produce an error message, and is fast both on success and on failure.\n     */\n    Checker.prototype.test = function (value) {\n        return this.checkerPlain(value, new util_1.NoopContext());\n    };\n    /**\n     * Returns a non-empty array of error objects describing the errors if the given value does not satisfy this\n     * Checker's type, or null if it does.\n     */\n    Checker.prototype.validate = function (value) {\n        return this._doValidate(this.checkerPlain, value);\n    };\n    /**\n     * Check that the given value satisfies this checker's type strictly. This checks that objects\n     * and tuples have no extra members. Note that this prevents backward compatibility, so usually\n     * a plain check() is more appropriate.\n     */\n    Checker.prototype.strictCheck = function (value) { return this._doCheck(this.checkerStrict, value); };\n    /**\n     * A fast strict check for whether or not the given value satisfies this Checker's type. Returns\n     * true or false, does not produce an error message, and is fast both on success and on failure.\n     */\n    Checker.prototype.strictTest = function (value) {\n        return this.checkerStrict(value, new util_1.NoopContext());\n    };\n    /**\n     * Returns a non-empty array of error objects describing the errors if the given value does not satisfy this\n     * Checker's type strictly, or null if it does.\n     */\n    Checker.prototype.strictValidate = function (value) {\n        return this._doValidate(this.checkerStrict, value);\n    };\n    /**\n     * If this checker is for an interface, returns a Checker for the type required for the given\n     * property of this interface.\n     */\n    Checker.prototype.getProp = function (prop) {\n        var ttype = this.props.get(prop);\n        if (!ttype) {\n            throw new Error(\"Type has no property \" + prop);\n        }\n        return new Checker(this.suite, ttype, this._path + \".\" + prop);\n    };\n    /**\n     * If this checker is for an interface, returns a Checker for the argument-list required to call\n     * the given method of this interface. E.g. if this Checker is for the interface:\n     *    interface Foo {\n     *      find(s: string, pos?: number): number;\n     *    }\n     * Then methodArgs(\"find\").check(...) will succeed for [\"foo\"] and [\"foo\", 3], but not for [17].\n     */\n    Checker.prototype.methodArgs = function (methodName) {\n        var tfunc = this._getMethod(methodName);\n        return new Checker(this.suite, tfunc.paramList);\n    };\n    /**\n     * If this checker is for an interface, returns a Checker for the return value of the given\n     * method of this interface.\n     */\n    Checker.prototype.methodResult = function (methodName) {\n        var tfunc = this._getMethod(methodName);\n        return new Checker(this.suite, tfunc.result);\n    };\n    /**\n     * If this checker is for a function, returns a Checker for its argument-list.\n     */\n    Checker.prototype.getArgs = function () {\n        if (!(this.ttype instanceof types_1.TFunc)) {\n            throw new Error(\"getArgs() applied to non-function\");\n        }\n        return new Checker(this.suite, this.ttype.paramList);\n    };\n    /**\n     * If this checker is for a function, returns a Checker for its result.\n     */\n    Checker.prototype.getResult = function () {\n        if (!(this.ttype instanceof types_1.TFunc)) {\n            throw new Error(\"getResult() applied to non-function\");\n        }\n        return new Checker(this.suite, this.ttype.result);\n    };\n    /**\n     * Return the type for which this is a checker.\n     */\n    Checker.prototype.getType = function () {\n        return this.ttype;\n    };\n    /**\n     * Actual implementation of check() and strictCheck().\n     */\n    Checker.prototype._doCheck = function (checkerFunc, value) {\n        var noopCtx = new util_1.NoopContext();\n        if (!checkerFunc(value, noopCtx)) {\n            var detailCtx = new util_1.DetailContext();\n            checkerFunc(value, detailCtx);\n            throw detailCtx.getError(this._path);\n        }\n    };\n    Checker.prototype._doValidate = function (checkerFunc, value) {\n        var noopCtx = new util_1.NoopContext();\n        if (checkerFunc(value, noopCtx)) {\n            return null;\n        }\n        var detailCtx = new util_1.DetailContext();\n        checkerFunc(value, detailCtx);\n        return detailCtx.getErrorDetails(this._path);\n    };\n    Checker.prototype._getMethod = function (methodName) {\n        var ttype = this.props.get(methodName);\n        if (!ttype) {\n            throw new Error(\"Type has no property \" + methodName);\n        }\n        if (!(ttype instanceof types_1.TFunc)) {\n            throw new Error(\"Property \" + methodName + \" is not a method\");\n        }\n        return ttype;\n    };\n    return Checker;\n}());\nexports.Checker = Checker;\n","\"use strict\";\n/**\n * This module defines nodes used to define types and validations for objects and interfaces.\n */\n// tslint:disable:no-shadowed-variable prefer-for-of\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.basicTypes = exports.BasicType = exports.TParamList = exports.TParam = exports.param = exports.TFunc = exports.func = exports.TProp = exports.TOptional = exports.opt = exports.TIface = exports.iface = exports.indexKey = exports.TEnumLiteral = exports.enumlit = exports.TEnumType = exports.enumtype = exports.TIntersection = exports.intersection = exports.TUnion = exports.union = exports.TTuple = exports.tuple = exports.RestType = exports.rest = exports.TArray = exports.array = exports.TLiteral = exports.lit = exports.TName = exports.name = exports.TType = void 0;\nvar util_1 = require(\"./util\");\n/** Node that represents a type. */\nvar TType = /** @class */ (function () {\n    function TType() {\n    }\n    return TType;\n}());\nexports.TType = TType;\n/** Parses a type spec into a TType node. */\nfunction parseSpec(typeSpec) {\n    return typeof typeSpec === \"string\" ? name(typeSpec) : typeSpec;\n}\nfunction getNamedType(suite, name) {\n    var ttype = suite[name];\n    if (!ttype) {\n        throw new Error(\"Unknown type \" + name);\n    }\n    return ttype;\n}\n/**\n * Defines a type name, either built-in, or defined in this suite. It can typically be included in\n * the specs as just a plain string.\n */\nfunction name(value) { return new TName(value); }\nexports.name = name;\nvar TName = /** @class */ (function (_super) {\n    __extends(TName, _super);\n    function TName(name) {\n        var _this = _super.call(this) || this;\n        _this.name = name;\n        _this._failMsg = \"is not a \" + name;\n        return _this;\n    }\n    TName.prototype.getChecker = function (suite, strict, allowedProps) {\n        // Using names, we can reference a type recursively in its own definition. To avoid an\n        // infinite recursion in getChecker() calls, we cache and reuse the checker that's being built\n        // when it references its own TName node. Note that it's important to reuse the result only\n        // when getChecker() is called with the same arguments, but that's already guaranteed because\n        // we are caching only for the current call and only for the same TName object (not another\n        // instance of name() call for the same name).\n        //\n        // Note also that this is about handling recursive types; it does NOT help validating data\n        // with circular references.\n        var checkerFunc = this._checkerBeingBuilt;\n        if (!checkerFunc) {\n            this._checkerBeingBuilt = function (value, ctx) { return checkerFunc(value, ctx); };\n            try {\n                checkerFunc = this._getChecker(suite, strict, allowedProps);\n            }\n            finally {\n                this._checkerBeingBuilt = undefined;\n            }\n        }\n        return checkerFunc;\n    };\n    TName.prototype._getChecker = function (suite, strict, allowedProps) {\n        var _this = this;\n        var ttype = getNamedType(suite, this.name);\n        var checker = ttype.getChecker(suite, strict, allowedProps);\n        if (ttype instanceof BasicType || ttype instanceof TName) {\n            return checker;\n        }\n        // For complex types, add an additional \"is not a <Type>\" message on failure.\n        return function (value, ctx) { return checker(value, ctx) ? true : ctx.fail(null, _this._failMsg, 0); };\n    };\n    return TName;\n}(TType));\nexports.TName = TName;\n/**\n * Defines a literal value, e.g. lit('hello') or lit(123).\n */\nfunction lit(value) { return new TLiteral(value); }\nexports.lit = lit;\nvar TLiteral = /** @class */ (function (_super) {\n    __extends(TLiteral, _super);\n    function TLiteral(value) {\n        var _this = _super.call(this) || this;\n        _this.value = value;\n        _this.name = JSON.stringify(value);\n        _this._failMsg = \"is not \" + _this.name;\n        return _this;\n    }\n    TLiteral.prototype.getChecker = function (suite, strict) {\n        var _this = this;\n        return function (value, ctx) { return (value === _this.value) ? true : ctx.fail(null, _this._failMsg, -1); };\n    };\n    return TLiteral;\n}(TType));\nexports.TLiteral = TLiteral;\n/**\n * Defines an array type, e.g. array('number').\n */\nfunction array(typeSpec) { return new TArray(parseSpec(typeSpec)); }\nexports.array = array;\nvar TArray = /** @class */ (function (_super) {\n    __extends(TArray, _super);\n    function TArray(ttype) {\n        var _this = _super.call(this) || this;\n        _this.ttype = ttype;\n        var elementTypeName = getTypeName(ttype);\n        if (elementTypeName) {\n            _this.name = elementTypeName + \"[]\";\n        }\n        return _this;\n    }\n    TArray.prototype.getChecker = function (suite, strict) {\n        var itemChecker = this.ttype.getChecker(suite, strict);\n        return function (value, ctx) {\n            if (!Array.isArray(value)) {\n                return ctx.fail(null, \"is not an array\", 0);\n            }\n            for (var i = 0; i < value.length; i++) {\n                var ok = itemChecker(value[i], ctx);\n                if (!ok) {\n                    return ctx.fail(i, null, 1);\n                }\n            }\n            return true;\n        };\n    };\n    return TArray;\n}(TType));\nexports.TArray = TArray;\n/**\n * Defines a rest type, e.g. tuple('string', rest(array('number'))).\n */\nfunction rest(typeSpec) {\n    return new RestType(typeSpec);\n}\nexports.rest = rest;\nvar RestType = /** @class */ (function (_super) {\n    __extends(RestType, _super);\n    function RestType(typeSpec) {\n        var _this = _super.call(this) || this;\n        _this.typeSpec = typeSpec;\n        return _this;\n    }\n    RestType.prototype.setStart = function (start) {\n        this._start = start;\n    };\n    RestType.prototype.getChecker = function (suite, strict) {\n        var arrType = typeof this.typeSpec === \"string\" ? getNamedType(suite, this.typeSpec) : this.typeSpec;\n        if (!(arrType instanceof TArray)) {\n            throw new Error(\"Rest type must be an array\");\n        }\n        var itemChecker = arrType.ttype.getChecker(suite, strict);\n        var start = this._start;\n        return function (value, ctx) {\n            for (var i = start; i < value.length; i++) {\n                if (!itemChecker(value[i], ctx)) {\n                    return ctx.fail(i, null, 1);\n                }\n            }\n            return true;\n        };\n    };\n    return RestType;\n}(TType));\nexports.RestType = RestType;\n/**\n * Defines a tuple type, e.g. tuple('string', 'number').\n */\nfunction tuple() {\n    var typeSpec = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        typeSpec[_i] = arguments[_i];\n    }\n    return new TTuple(typeSpec.map(function (t) { return parseSpec(t); }));\n}\nexports.tuple = tuple;\nvar TTuple = /** @class */ (function (_super) {\n    __extends(TTuple, _super);\n    function TTuple(ttypes) {\n        var _this = _super.call(this) || this;\n        _this.ttypes = ttypes;\n        var last = ttypes[ttypes.length - 1];\n        if (last instanceof RestType) {\n            ttypes.pop();\n            _this._restType = last;\n            _this._restType.setStart(ttypes.length);\n        }\n        return _this;\n    }\n    TTuple.prototype.getChecker = function (suite, strict) {\n        var itemCheckers = this.ttypes.map(function (t) { return t.getChecker(suite, strict); });\n        var checker = function (value, ctx) {\n            if (!Array.isArray(value)) {\n                return ctx.fail(null, \"is not an array\", 0);\n            }\n            for (var i = 0; i < itemCheckers.length; i++) {\n                var ok = itemCheckers[i](value[i], ctx);\n                if (!ok) {\n                    return ctx.fail(i, null, 1);\n                }\n            }\n            return true;\n        };\n        if (this._restType) {\n            var restChecker_1 = this._restType.getChecker(suite, strict);\n            return function (value, ctx) {\n                return checker(value, ctx) && restChecker_1(value, ctx);\n            };\n        }\n        if (!strict) {\n            return checker;\n        }\n        return function (value, ctx) {\n            if (!checker(value, ctx)) {\n                return false;\n            }\n            return value.length <= itemCheckers.length ? true :\n                ctx.fail(itemCheckers.length, \"is extraneous\", 2);\n        };\n    };\n    return TTuple;\n}(TType));\nexports.TTuple = TTuple;\n/**\n * Defines a union type, e.g. union('number', 'null').\n */\nfunction union() {\n    var typeSpec = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        typeSpec[_i] = arguments[_i];\n    }\n    return new TUnion(typeSpec.map(function (t) { return parseSpec(t); }));\n}\nexports.union = union;\nvar TUnion = /** @class */ (function (_super) {\n    __extends(TUnion, _super);\n    function TUnion(ttypes) {\n        var _this = _super.call(this) || this;\n        _this.ttypes = ttypes;\n        var names = ttypes.map(getTypeName)\n            .filter(function (n) { return n; });\n        var otherTypes = ttypes.length - names.length;\n        if (names.length) {\n            if (otherTypes > 0) {\n                names.push(otherTypes + \" more\");\n            }\n            _this._failMsg = \"is none of \" + names.join(\", \");\n        }\n        else {\n            _this._failMsg = \"is none of \" + otherTypes + \" types\";\n        }\n        return _this;\n    }\n    TUnion.prototype.getChecker = function (suite, strict, allowedProps) {\n        var _this = this;\n        var itemCheckers = this.ttypes.map(function (t) { return t.getChecker(suite, strict, allowedProps); });\n        return function (value, ctx) {\n            var ur = ctx.unionResolver();\n            for (var i = 0; i < itemCheckers.length; i++) {\n                var ok = itemCheckers[i](value, ur.createContext());\n                if (ok) {\n                    return true;\n                }\n            }\n            ctx.resolveUnion(ur);\n            return ctx.fail(null, _this._failMsg, 0);\n        };\n    };\n    return TUnion;\n}(TType));\nexports.TUnion = TUnion;\n/**\n * Defines an intersection type, e.g. intersection('number', 'null').\n */\nfunction intersection() {\n    var typeSpec = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        typeSpec[_i] = arguments[_i];\n    }\n    return new TIntersection(typeSpec.map(function (t) { return parseSpec(t); }));\n}\nexports.intersection = intersection;\nvar TIntersection = /** @class */ (function (_super) {\n    __extends(TIntersection, _super);\n    function TIntersection(ttypes) {\n        var _this = _super.call(this) || this;\n        _this.ttypes = ttypes;\n        return _this;\n    }\n    TIntersection.prototype.getChecker = function (suite, strict, allowedProps) {\n        if (allowedProps === void 0) { allowedProps = new Set(); }\n        var itemCheckers = this.ttypes.map(function (t) { return t.getChecker(suite, strict, allowedProps); });\n        return function (value, ctx) {\n            return itemCheckers.every(function (checker) {\n                checker(value, ctx.fork());\n                return ctx.completeFork();\n            }) && !ctx.failed();\n        };\n    };\n    return TIntersection;\n}(TType));\nexports.TIntersection = TIntersection;\n/**\n * Defines an enum type, e.g. enum({'A': 1, 'B': 2}).\n */\nfunction enumtype(values) {\n    return new TEnumType(values);\n}\nexports.enumtype = enumtype;\nvar TEnumType = /** @class */ (function (_super) {\n    __extends(TEnumType, _super);\n    function TEnumType(members) {\n        var _this = _super.call(this) || this;\n        _this.members = members;\n        _this.validValues = new Set();\n        _this._failMsg = \"is not a valid enum value\";\n        _this.validValues = new Set(Object.keys(members).map(function (name) { return members[name]; }));\n        return _this;\n    }\n    TEnumType.prototype.getChecker = function (suite, strict) {\n        var _this = this;\n        return function (value, ctx) {\n            return (_this.validValues.has(value) ? true : ctx.fail(null, _this._failMsg, 0));\n        };\n    };\n    return TEnumType;\n}(TType));\nexports.TEnumType = TEnumType;\n/**\n * Defines a literal enum value, such as Direction.Up, specified as enumlit(\"Direction\", \"Up\").\n */\nfunction enumlit(name, prop) {\n    return new TEnumLiteral(name, prop);\n}\nexports.enumlit = enumlit;\nvar TEnumLiteral = /** @class */ (function (_super) {\n    __extends(TEnumLiteral, _super);\n    function TEnumLiteral(enumName, prop) {\n        var _this = _super.call(this) || this;\n        _this.enumName = enumName;\n        _this.prop = prop;\n        _this._failMsg = \"is not \" + enumName + \".\" + prop;\n        return _this;\n    }\n    TEnumLiteral.prototype.getChecker = function (suite, strict) {\n        var _this = this;\n        var ttype = getNamedType(suite, this.enumName);\n        if (!(ttype instanceof TEnumType)) {\n            throw new Error(\"Type \" + this.enumName + \" used in enumlit is not an enum type\");\n        }\n        var val = ttype.members[this.prop];\n        if (!ttype.members.hasOwnProperty(this.prop)) {\n            throw new Error(\"Unknown value \" + this.enumName + \".\" + this.prop + \" used in enumlit\");\n        }\n        return function (value, ctx) { return (value === val) ? true : ctx.fail(null, _this._failMsg, -1); };\n    };\n    return TEnumLiteral;\n}(TType));\nexports.TEnumLiteral = TEnumLiteral;\nfunction makeIfaceProps(props) {\n    return Object.keys(props)\n        .filter(function (name) { return (name !== exports.indexKey); })\n        .map(function (name) { return makeIfaceProp(name, props[name]); });\n}\nfunction makeIfaceProp(name, prop) {\n    return prop instanceof TOptional ?\n        new TProp(name, prop.ttype, true) :\n        new TProp(name, parseSpec(prop), false);\n}\n/**\n * indexKey is a special key that indicates an index signature when used as a key in an interface.\n * E.g. {[key: string]: number} becomes t.iface([], {[t.indexKey]: \"number\"}).\n *\n * We don't distinguish between string- and number-type index signatures, and don't support\n * multiple index signatures.\n */\nexports.indexKey = Symbol();\n/**\n * Defines an interface. The first argument is an array of interfaces that it extends, and the\n * second is an array of properties.\n */\nfunction iface(bases, props) {\n    return new TIface(bases, makeIfaceProps(props), props[exports.indexKey]);\n}\nexports.iface = iface;\nvar TIface = /** @class */ (function (_super) {\n    __extends(TIface, _super);\n    function TIface(bases, props, indexType) {\n        var _this = _super.call(this) || this;\n        _this.bases = bases;\n        _this.props = props;\n        _this.indexType = indexType ? parseSpec(indexType) : undefined;\n        _this.propSet = new Set(props.map(function (p) { return p.name; }));\n        return _this;\n    }\n    TIface.prototype.getChecker = function (suite, strict, allowedProps) {\n        var _this = this;\n        var _a;\n        if (allowedProps === void 0) { allowedProps = new Set(); }\n        this.propSet.forEach(function (prop) { return allowedProps.add(prop); });\n        var baseCheckers = this.bases.map(function (b) { return getNamedType(suite, b).getChecker(suite, strict, allowedProps); });\n        var propCheckers = this.props.map(function (prop) { return prop.ttype.getChecker(suite, strict); });\n        var indexTypeChecker = (_a = this.indexType) === null || _a === void 0 ? void 0 : _a.getChecker(suite, strict);\n        var testCtx = new util_1.NoopContext();\n        // Consider a prop required if it's not optional AND does not allow for undefined as a value.\n        var isPropRequired = this.props.map(function (prop, i) {\n            return !prop.isOpt && !propCheckers[i](undefined, testCtx);\n        });\n        return function (value, ctx) {\n            if (typeof value !== \"object\" || value === null) {\n                return ctx.fail(null, \"is not an object\", 0);\n            }\n            for (var i = 0; i < baseCheckers.length; i++) {\n                baseCheckers[i](value, ctx.fork());\n                if (!ctx.completeFork()) {\n                    return false;\n                }\n            }\n            for (var i = 0; i < propCheckers.length; i++) {\n                var name_1 = _this.props[i].name;\n                var v = value[name_1];\n                if (v === undefined) {\n                    if (isPropRequired[i]) {\n                        ctx.fork().fail(name_1, \"is missing\", 1);\n                        if (!ctx.completeFork()) {\n                            return false;\n                        }\n                    }\n                }\n                else {\n                    var fork = ctx.fork();\n                    var ok = propCheckers[i](v, fork);\n                    if (!ok) {\n                        fork.fail(name_1, null, 1);\n                    }\n                    if (!ctx.completeFork()) {\n                        return false;\n                    }\n                }\n            }\n            if (indexTypeChecker) {\n                for (var prop in value) {\n                    var fork = ctx.fork();\n                    if (!indexTypeChecker(value[prop], fork)) {\n                        fork.fail(prop, null, 1);\n                    }\n                    if (!ctx.completeFork()) {\n                        return false;\n                    }\n                }\n            }\n            else if (strict) {\n                // In strict mode, check also for unknown enumerable properties.\n                for (var prop in value) {\n                    if (!allowedProps.has(prop)) {\n                        ctx.fork().fail(prop, \"is extraneous\", 2);\n                        if (!ctx.completeFork()) {\n                            return false;\n                        }\n                    }\n                }\n            }\n            return !ctx.failed();\n        };\n    };\n    return TIface;\n}(TType));\nexports.TIface = TIface;\n/**\n * Defines an optional property on an interface.\n */\nfunction opt(typeSpec) { return new TOptional(parseSpec(typeSpec)); }\nexports.opt = opt;\nvar TOptional = /** @class */ (function (_super) {\n    __extends(TOptional, _super);\n    function TOptional(ttype) {\n        var _this = _super.call(this) || this;\n        _this.ttype = ttype;\n        return _this;\n    }\n    TOptional.prototype.getChecker = function (suite, strict) {\n        var itemChecker = this.ttype.getChecker(suite, strict);\n        return function (value, ctx) {\n            return value === undefined || itemChecker(value, ctx);\n        };\n    };\n    return TOptional;\n}(TType));\nexports.TOptional = TOptional;\n/**\n * Defines a property in an interface.\n */\nvar TProp = /** @class */ (function () {\n    function TProp(name, ttype, isOpt) {\n        this.name = name;\n        this.ttype = ttype;\n        this.isOpt = isOpt;\n    }\n    return TProp;\n}());\nexports.TProp = TProp;\n/**\n * Defines a function. The first argument declares the function's return type, the rest declare\n * its parameters.\n */\nfunction func(resultSpec) {\n    var params = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        params[_i - 1] = arguments[_i];\n    }\n    return new TFunc(new TParamList(params), parseSpec(resultSpec));\n}\nexports.func = func;\nvar TFunc = /** @class */ (function (_super) {\n    __extends(TFunc, _super);\n    function TFunc(paramList, result) {\n        var _this = _super.call(this) || this;\n        _this.paramList = paramList;\n        _this.result = result;\n        return _this;\n    }\n    TFunc.prototype.getChecker = function (suite, strict) {\n        return function (value, ctx) {\n            return typeof value === \"function\" ? true : ctx.fail(null, \"is not a function\", 0);\n        };\n    };\n    return TFunc;\n}(TType));\nexports.TFunc = TFunc;\n/**\n * Defines a function parameter.\n */\nfunction param(name, typeSpec, isOpt) {\n    return new TParam(name, parseSpec(typeSpec), Boolean(isOpt));\n}\nexports.param = param;\nvar TParam = /** @class */ (function () {\n    function TParam(name, ttype, isOpt) {\n        this.name = name;\n        this.ttype = ttype;\n        this.isOpt = isOpt;\n    }\n    return TParam;\n}());\nexports.TParam = TParam;\n/**\n * Defines a function parameter list.\n */\nvar TParamList = /** @class */ (function (_super) {\n    __extends(TParamList, _super);\n    function TParamList(params) {\n        var _this = _super.call(this) || this;\n        _this.params = params;\n        return _this;\n    }\n    TParamList.prototype.getChecker = function (suite, strict) {\n        var _this = this;\n        var itemCheckers = this.params.map(function (t) { return t.ttype.getChecker(suite, strict); });\n        var testCtx = new util_1.NoopContext();\n        var isParamRequired = this.params.map(function (param, i) {\n            return !param.isOpt && !itemCheckers[i](undefined, testCtx);\n        });\n        var checker = function (value, ctx) {\n            if (!Array.isArray(value)) {\n                return ctx.fail(null, \"is not an array\", 0);\n            }\n            for (var i = 0; i < itemCheckers.length; i++) {\n                var p = _this.params[i];\n                if (value[i] === undefined) {\n                    if (isParamRequired[i]) {\n                        return ctx.fail(p.name, \"is missing\", 1);\n                    }\n                }\n                else {\n                    var ok = itemCheckers[i](value[i], ctx);\n                    if (!ok) {\n                        return ctx.fail(p.name, null, 1);\n                    }\n                }\n            }\n            return true;\n        };\n        if (!strict) {\n            return checker;\n        }\n        return function (value, ctx) {\n            if (!checker(value, ctx)) {\n                return false;\n            }\n            return value.length <= itemCheckers.length ? true :\n                ctx.fail(itemCheckers.length, \"is extraneous\", 2);\n        };\n    };\n    return TParamList;\n}(TType));\nexports.TParamList = TParamList;\n/**\n * Single TType implementation for all basic built-in types.\n */\nvar BasicType = /** @class */ (function (_super) {\n    __extends(BasicType, _super);\n    function BasicType(validator, message) {\n        var _this = _super.call(this) || this;\n        _this.validator = validator;\n        _this.message = message;\n        return _this;\n    }\n    BasicType.prototype.getChecker = function (suite, strict) {\n        var _this = this;\n        return function (value, ctx) { return _this.validator(value) ? true : ctx.fail(null, _this.message, 0); };\n    };\n    return BasicType;\n}(TType));\nexports.BasicType = BasicType;\n/**\n * Defines the suite of basic types.\n */\nexports.basicTypes = {\n    any: new BasicType(function (v) { return true; }, \"is invalid\"),\n    unknown: new BasicType(function (v) { return true; }, \"is invalid\"),\n    number: new BasicType(function (v) { return (typeof v === \"number\"); }, \"is not a number\"),\n    object: new BasicType(function (v) { return (typeof v === \"object\" && v); }, \"is not an object\"),\n    boolean: new BasicType(function (v) { return (typeof v === \"boolean\"); }, \"is not a boolean\"),\n    string: new BasicType(function (v) { return (typeof v === \"string\"); }, \"is not a string\"),\n    symbol: new BasicType(function (v) { return (typeof v === \"symbol\"); }, \"is not a symbol\"),\n    void: new BasicType(function (v) { return (v == null); }, \"is not void\"),\n    undefined: new BasicType(function (v) { return (v === undefined); }, \"is not undefined\"),\n    null: new BasicType(function (v) { return (v === null); }, \"is not null\"),\n    never: new BasicType(function (v) { return false; }, \"is unexpected\"),\n    Date: new BasicType(getIsNativeChecker(\"[object Date]\"), \"is not a Date\"),\n    RegExp: new BasicType(getIsNativeChecker(\"[object RegExp]\"), \"is not a RegExp\"),\n};\n// This approach for checking native object types mirrors that of lodash. Its advantage over\n// `isinstance` is that it can still return true for native objects created in different JS\n// execution environments.\nvar nativeToString = Object.prototype.toString;\nfunction getIsNativeChecker(tag) {\n    return function (v) { return typeof v === \"object\" && v && nativeToString.call(v) === tag; };\n}\nif (typeof Buffer !== \"undefined\") {\n    exports.basicTypes.Buffer = new BasicType(function (v) { return Buffer.isBuffer(v); }, \"is not a Buffer\");\n}\nvar _loop_1 = function (array_1) {\n    exports.basicTypes[array_1.name] = new BasicType(function (v) { return (v instanceof array_1); }, \"is not a \" + array_1.name);\n};\n// Support typed arrays of various flavors\nfor (var _i = 0, _a = [Int8Array, Uint8Array, Uint8ClampedArray, Int16Array, Uint16Array,\n    Int32Array, Uint32Array, Float32Array, Float64Array, ArrayBuffer]; _i < _a.length; _i++) {\n    var array_1 = _a[_i];\n    _loop_1(array_1);\n}\nfunction getTypeName(t) {\n    if (t instanceof TName || t instanceof TLiteral || t instanceof TArray) {\n        return t.name;\n    }\n}\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DetailContext = exports.NoopContext = exports.VError = void 0;\n/**\n * Error thrown by validation. Besides an informative message, it includes the path to the\n * property which triggered the failure.\n */\nvar VError = /** @class */ (function (_super) {\n    __extends(VError, _super);\n    function VError(path, message) {\n        var _this = _super.call(this, message) || this;\n        _this.path = path;\n        // See https://github.com/Microsoft/TypeScript/wiki/Breaking-Changes#extending-built-ins-like-error-array-and-map-may-no-longer-work for info about this workaround.\n        Object.setPrototypeOf(_this, VError.prototype);\n        return _this;\n    }\n    return VError;\n}(Error));\nexports.VError = VError;\n/**\n * Fast implementation of IContext used for first-pass validation. If that fails, we can validate\n * using DetailContext to collect error messages. That's faster for the common case when messages\n * normally pass validation.\n */\nvar NoopContext = /** @class */ (function () {\n    function NoopContext() {\n        this._failed = false;\n    }\n    NoopContext.prototype.fail = function (relPath, message, score) {\n        this._failed = true;\n        return false;\n    };\n    NoopContext.prototype.fork = function () {\n        return this;\n    };\n    NoopContext.prototype.completeFork = function () {\n        return !this._failed;\n    };\n    NoopContext.prototype.failed = function () {\n        return this._failed;\n    };\n    NoopContext.prototype.unionResolver = function () { return this; };\n    NoopContext.prototype.createContext = function () {\n        this._failed = false;\n        return this;\n    };\n    NoopContext.prototype.resolveUnion = function (ur) { };\n    return NoopContext;\n}());\nexports.NoopContext = NoopContext;\n/**\n * Complete implementation of IContext that collects meaningfull errors.\n */\nvar DetailContext = /** @class */ (function () {\n    function DetailContext() {\n        // Stack of property names and associated messages for reporting helpful error messages.\n        this._propNames = [];\n        this._messages = [];\n        /** Contexts created by fork() which have completed and contain failures */\n        this._failedForks = [];\n        /**\n         * Contains the context returned by fork() which should be checked until\n         * completeFork() is called.\n         * Will be reused for the next fork() if there are no failures.\n         */\n        this._currentFork = null;\n        // Score is used to choose the best union member whose DetailContext to use for reporting.\n        // Higher score means better match (or rather less severe mismatch).\n        this._score = 0;\n    }\n    DetailContext.prototype.fail = function (relPath, message, score) {\n        this._propNames.push(relPath);\n        this._messages.push(message);\n        this._score += score;\n        return false;\n    };\n    DetailContext.prototype.unionResolver = function () {\n        return new DetailUnionResolver();\n    };\n    DetailContext.prototype.resolveUnion = function (unionResolver) {\n        var _a, _b, _c;\n        var u = unionResolver;\n        var best = null;\n        for (var _i = 0, _d = u.contexts; _i < _d.length; _i++) {\n            var ctx = _d[_i];\n            if (!best || ctx._score >= best._score) {\n                best = ctx;\n            }\n        }\n        if (best && best._score > 0) {\n            (_a = this._propNames).push.apply(_a, best._propNames);\n            (_b = this._messages).push.apply(_b, best._messages);\n            (_c = this._failedForks).push.apply(_c, best._failedForks);\n        }\n    };\n    DetailContext.prototype.getError = function (path) {\n        var fullMessage = flatten(this.getErrorDetails(path).map(errorLines))\n            .join(\"\\n\");\n        return new VError(path, fullMessage);\n    };\n    DetailContext.prototype.getErrorDetails = function (path) {\n        var detail = null;\n        var nested;\n        var details = [];\n        // As checkers call fail() and return to their parent checkers,\n        // the deepest failures are recorded first.\n        // Go through failures in reverse to start from the root type\n        for (var i = this._propNames.length - 1; i >= 0; i--) {\n            var p = this._propNames[i];\n            path += (typeof p === \"number\") ? \"[\" + p + \"]\" : (p ? \".\" + p : \"\");\n            var message = this._messages[i];\n            if (!message) {\n                continue;\n            }\n            nested = { path: path, message: message };\n            if (detail) {\n                detail.nested = [nested];\n            }\n            else {\n                // This is the root failure, so it will be returned\n                details.push(nested);\n            }\n            // Move into the deeper error\n            detail = nested;\n        }\n        var forkErrors = flatten(this._failedForks.map(function (fork) { return fork.getErrorDetails(path); }));\n        if (detail) {\n            // don't put an empty array in detail.nested\n            if (forkErrors.length) {\n                // detail is the deepest nested error, so detail.nested is null at this point\n                detail.nested = forkErrors;\n            }\n        }\n        else {\n            // There were no 'plain' failures, only fork failures\n            details = forkErrors;\n        }\n        return details;\n    };\n    DetailContext.prototype.fork = function () {\n        if (this._currentFork == null) {\n            this._currentFork = new DetailContext();\n        }\n        return this._currentFork;\n    };\n    DetailContext.prototype.completeFork = function () {\n        var fork = this._currentFork;\n        if (fork._failed()) {\n            this._failedForks.push(fork);\n            this._currentFork = null;\n            // To preserve old behaviour, use the score of the first failure\n            // Might want to revise this\n            if (this._failedForks.length === 1) {\n                this._score = fork._score;\n            }\n        }\n        return this._failedForks.length < DetailContext.maxForks;\n    };\n    // failed() is the public interface,\n    // it gets monkeypatched to ensure correct usage in checkers.\n    // _failed() may be called internally\n    // in ways which would fail the monkeypatched assertions.\n    DetailContext.prototype.failed = function () {\n        return this._failed();\n    };\n    DetailContext.prototype._failed = function () {\n        return this._propNames.length + this._failedForks.length > 0;\n    };\n    /**\n     * Maximum number of errors recorded at one level for an object,\n     * i.e. the maximum length of Checker.validate() or IErrorDetail.nested.\n     */\n    // If _failedForks has this length then completeFork() should return false\n    // so that the checker stops making more forks.\n    DetailContext.maxForks = 3;\n    return DetailContext;\n}());\nexports.DetailContext = DetailContext;\nvar DetailUnionResolver = /** @class */ (function () {\n    function DetailUnionResolver() {\n        this.contexts = [];\n    }\n    DetailUnionResolver.prototype.createContext = function () {\n        var ctx = new DetailContext();\n        this.contexts.push(ctx);\n        return ctx;\n    };\n    return DetailUnionResolver;\n}());\n/**\n * Returns lines of a message describing `error`.\n * The lines should be newline separated in the final message.\n * Only returns multiple lines if `error` or a descendant\n * has multiple errors in its `.nested` array.\n * Simple paths of nested errors anywhere in the tree\n * are collapsed into a single line until a branch is reached.\n */\nvar errorLines = function (error) {\n    var rootMessage = error.path + \" \" + error.message;\n    var nestedErrors = error.nested || [];\n    var nestedLines = flatten(nestedErrors.map(errorLines));\n    if (nestedErrors.length == 1) {\n        // Single nested errors are collapsed into the first line,\n        // but they may have branches deeper down leading to more lines\n        // which are already indented\n        var first = nestedLines[0], rest = nestedLines.slice(1);\n        return __spreadArrays([\n            rootMessage + \"; \" + first\n        ], rest);\n    }\n    else {\n        // Indent messages from nested errors\n        // or just return [rootMessage] if there are no nested errors\n        return __spreadArrays([\n            rootMessage\n        ], nestedLines.map(function (line) { return \"    \" + line; }));\n    }\n};\n/** Shallow flatten a 2D array into a 1D array */\nfunction flatten(arr) {\n    var _a;\n    return (_a = []).concat.apply(_a, arr);\n}\n","import isObject from './isObject.js';\nimport { nativeCreate } from './_setup.js';\n\n// Create a naked function reference for surrogate-prototype-swapping.\nfunction ctor() {\n  return function(){};\n}\n\n// An internal function for creating a new object that inherits from another.\nexport default function baseCreate(prototype) {\n  if (!isObject(prototype)) return {};\n  if (nativeCreate) return nativeCreate(prototype);\n  var Ctor = ctor();\n  Ctor.prototype = prototype;\n  var result = new Ctor;\n  Ctor.prototype = null;\n  return result;\n}\n","import identity from './identity.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isArray from './isArray.js';\nimport matcher from './matcher.js';\nimport property from './property.js';\nimport optimizeCb from './_optimizeCb.js';\n\n// An internal function to generate callbacks that can be applied to each\n// element in a collection, returning the desired result — either `_.identity`,\n// an arbitrary callback, a property matcher, or a property accessor.\nexport default function baseIteratee(value, context, argCount) {\n  if (value == null) return identity;\n  if (isFunction(value)) return optimizeCb(value, context, argCount);\n  if (isObject(value) && !isArray(value)) return matcher(value);\n  return property(value);\n}\n","import _ from './underscore.js';\nimport baseIteratee from './_baseIteratee.js';\nimport iteratee from './iteratee.js';\n\n// The function we call internally to generate a callback. It invokes\n// `_.iteratee` if overridden, otherwise `baseIteratee`.\nexport default function cb(value, context, argCount) {\n  if (_.iteratee !== iteratee) return _.iteratee(value, context);\n  return baseIteratee(value, context, argCount);\n}\n","import _ from './underscore.js';\n\n// Helper function to continue chaining intermediate results.\nexport default function chainResult(instance, obj) {\n  return instance._chain ? _(obj).chain() : obj;\n}\n","import { nonEnumerableProps, ObjProto } from './_setup.js';\nimport isFunction from './isFunction.js';\nimport has from './_has.js';\n\n// Internal helper to create a simple lookup structure.\n// `collectNonEnumProps` used to depend on `_.contains`, but this led to\n// circular imports. `emulatedSet` is a one-off solution that only works for\n// arrays of strings.\nfunction emulatedSet(keys) {\n  var hash = {};\n  for (var l = keys.length, i = 0; i < l; ++i) hash[keys[i]] = true;\n  return {\n    contains: function(key) { return hash[key]; },\n    push: function(key) {\n      hash[key] = true;\n      return keys.push(key);\n    }\n  };\n}\n\n// Internal helper. Checks `keys` for the presence of keys in IE < 9 that won't\n// be iterated by `for key in ...` and thus missed. Extends `keys` in place if\n// needed.\nexport default function collectNonEnumProps(obj, keys) {\n  keys = emulatedSet(keys);\n  var nonEnumIdx = nonEnumerableProps.length;\n  var constructor = obj.constructor;\n  var proto = isFunction(constructor) && constructor.prototype || ObjProto;\n\n  // Constructor is a special case.\n  var prop = 'constructor';\n  if (has(obj, prop) && !keys.contains(prop)) keys.push(prop);\n\n  while (nonEnumIdx--) {\n    prop = nonEnumerableProps[nonEnumIdx];\n    if (prop in obj && obj[prop] !== proto[prop] && !keys.contains(prop)) {\n      keys.push(prop);\n    }\n  }\n}\n","// An internal function for creating assigner functions.\nexport default function createAssigner(keysFunc, defaults) {\n  return function(obj) {\n    var length = arguments.length;\n    if (defaults) obj = Object(obj);\n    if (length < 2 || obj == null) return obj;\n    for (var index = 1; index < length; index++) {\n      var source = arguments[index],\n          keys = keysFunc(source),\n          l = keys.length;\n      for (var i = 0; i < l; i++) {\n        var key = keys[i];\n        if (!defaults || obj[key] === void 0) obj[key] = source[key];\n      }\n    }\n    return obj;\n  };\n}\n","import keys from './keys.js';\n\n// Internal helper to generate functions for escaping and unescaping strings\n// to/from HTML interpolation.\nexport default function createEscaper(map) {\n  var escaper = function(match) {\n    return map[match];\n  };\n  // Regexes for identifying a key that needs to be escaped.\n  var source = '(?:' + keys(map).join('|') + ')';\n  var testRegexp = RegExp(source);\n  var replaceRegexp = RegExp(source, 'g');\n  return function(string) {\n    string = string == null ? '' : '' + string;\n    return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n  };\n}\n","import getLength from './_getLength.js';\nimport { slice } from './_setup.js';\nimport isNaN from './isNaN.js';\n\n// Internal function to generate the `_.indexOf` and `_.lastIndexOf` functions.\nexport default function createIndexFinder(dir, predicateFind, sortedIndex) {\n  return function(array, item, idx) {\n    var i = 0, length = getLength(array);\n    if (typeof idx == 'number') {\n      if (dir > 0) {\n        i = idx >= 0 ? idx : Math.max(idx + length, i);\n      } else {\n        length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;\n      }\n    } else if (sortedIndex && idx && length) {\n      idx = sortedIndex(array, item);\n      return array[idx] === item ? idx : -1;\n    }\n    if (item !== item) {\n      idx = predicateFind(slice.call(array, i, length), isNaN);\n      return idx >= 0 ? idx + i : -1;\n    }\n    for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {\n      if (array[idx] === item) return idx;\n    }\n    return -1;\n  };\n}\n","import cb from './_cb.js';\nimport getLength from './_getLength.js';\n\n// Internal function to generate `_.findIndex` and `_.findLastIndex`.\nexport default function createPredicateIndexFinder(dir) {\n  return function(array, predicate, context) {\n    predicate = cb(predicate, context);\n    var length = getLength(array);\n    var index = dir > 0 ? 0 : length - 1;\n    for (; index >= 0 && index < length; index += dir) {\n      if (predicate(array[index], index, array)) return index;\n    }\n    return -1;\n  };\n}\n","import isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\nimport optimizeCb from './_optimizeCb.js';\n\n// Internal helper to create a reducing function, iterating left or right.\nexport default function createReduce(dir) {\n  // Wrap code that reassigns argument variables in a separate function than\n  // the one that accesses `arguments.length` to avoid a perf hit. (#1991)\n  var reducer = function(obj, iteratee, memo, initial) {\n    var _keys = !isArrayLike(obj) && keys(obj),\n        length = (_keys || obj).length,\n        index = dir > 0 ? 0 : length - 1;\n    if (!initial) {\n      memo = obj[_keys ? _keys[index] : index];\n      index += dir;\n    }\n    for (; index >= 0 && index < length; index += dir) {\n      var currentKey = _keys ? _keys[index] : index;\n      memo = iteratee(memo, obj[currentKey], currentKey, obj);\n    }\n    return memo;\n  };\n\n  return function(obj, iteratee, memo, context) {\n    var initial = arguments.length >= 3;\n    return reducer(obj, optimizeCb(iteratee, context, 4), memo, initial);\n  };\n}\n","import { MAX_ARRAY_INDEX } from './_setup.js';\n\n// Common internal logic for `isArrayLike` and `isBufferLike`.\nexport default function createSizePropertyCheck(getSizeProperty) {\n  return function(collection) {\n    var sizeProperty = getSizeProperty(collection);\n    return typeof sizeProperty == 'number' && sizeProperty >= 0 && sizeProperty <= MAX_ARRAY_INDEX;\n  }\n}\n","// Internal function to obtain a nested property in `obj` along `path`.\nexport default function deepGet(obj, path) {\n  var length = path.length;\n  for (var i = 0; i < length; i++) {\n    if (obj == null) return void 0;\n    obj = obj[path[i]];\n  }\n  return length ? obj : void 0;\n}\n","// Internal list of HTML entities for escaping.\nexport default {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#x27;',\n  '`': '&#x60;'\n};\n","import baseCreate from './_baseCreate.js';\nimport isObject from './isObject.js';\n\n// Internal function to execute `sourceFunc` bound to `context` with optional\n// `args`. Determines whether to execute a function as a constructor or as a\n// normal function.\nexport default function executeBound(sourceFunc, boundFunc, context, callingContext, args) {\n  if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\n  var self = baseCreate(sourceFunc.prototype);\n  var result = sourceFunc.apply(self, args);\n  if (isObject(result)) return result;\n  return self;\n}\n","import getLength from './_getLength.js';\nimport isArrayLike from './_isArrayLike.js';\nimport isArray from './isArray.js';\nimport isArguments from './isArguments.js';\n\n// Internal implementation of a recursive `flatten` function.\nexport default function flatten(input, depth, strict, output) {\n  output = output || [];\n  if (!depth && depth !== 0) {\n    depth = Infinity;\n  } else if (depth <= 0) {\n    return output.concat(input);\n  }\n  var idx = output.length;\n  for (var i = 0, length = getLength(input); i < length; i++) {\n    var value = input[i];\n    if (isArrayLike(value) && (isArray(value) || isArguments(value))) {\n      // Flatten current level of array or arguments object.\n      if (depth > 1) {\n        flatten(value, depth - 1, strict, output);\n        idx = output.length;\n      } else {\n        var j = 0, len = value.length;\n        while (j < len) output[idx++] = value[j++];\n      }\n    } else if (!strict) {\n      output[idx++] = value;\n    }\n  }\n  return output;\n}\n","import shallowProperty from './_shallowProperty.js';\n\n// Internal helper to obtain the `byteLength` property of an object.\nexport default shallowProperty('byteLength');\n","import shallowProperty from './_shallowProperty.js';\n\n// Internal helper to obtain the `length` property of an object.\nexport default shallowProperty('length');\n","import cb from './_cb.js';\nimport each from './each.js';\n\n// An internal function used for aggregate \"group by\" operations.\nexport default function group(behavior, partition) {\n  return function(obj, iteratee, context) {\n    var result = partition ? [[], []] : {};\n    iteratee = cb(iteratee, context);\n    each(obj, function(value, index) {\n      var key = iteratee(value, index, obj);\n      behavior(result, value, key);\n    });\n    return result;\n  };\n}\n","import { hasOwnProperty } from './_setup.js';\n\n// Internal function to check whether `key` is an own property name of `obj`.\nexport default function has(obj, key) {\n  return obj != null && hasOwnProperty.call(obj, key);\n}\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Object');\n","import createSizePropertyCheck from './_createSizePropertyCheck.js';\nimport getLength from './_getLength.js';\n\n// Internal helper for collection methods to determine whether a collection\n// should be iterated as an array or as an object.\n// Related: https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\n// Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094\nexport default createSizePropertyCheck(getLength);\n","import createSizePropertyCheck from './_createSizePropertyCheck.js';\nimport getByteLength from './_getByteLength.js';\n\n// Internal helper to determine whether we should spend extensive checks against\n// `ArrayBuffer` et al.\nexport default createSizePropertyCheck(getByteLength);\n","// Internal `_.pick` helper function to determine whether `key` is an enumerable\n// property name of `obj`.\nexport default function keyInObj(value, key, obj) {\n  return key in obj;\n}\n","import getLength from './_getLength.js';\nimport isFunction from './isFunction.js';\nimport allKeys from './allKeys.js';\n\n// Since the regular `Object.prototype.toString` type tests don't work for\n// some types in IE 11, we use a fingerprinting heuristic instead, based\n// on the methods. It's not great, but it's the best we got.\n// The fingerprint method lists are defined below.\nexport function ie11fingerprint(methods) {\n  var length = getLength(methods);\n  return function(obj) {\n    if (obj == null) return false;\n    // `Map`, `WeakMap` and `Set` have no enumerable keys.\n    var keys = allKeys(obj);\n    if (getLength(keys)) return false;\n    for (var i = 0; i < length; i++) {\n      if (!isFunction(obj[methods[i]])) return false;\n    }\n    // If we are testing against `WeakMap`, we need to ensure that\n    // `obj` doesn't have a `forEach` method in order to distinguish\n    // it from a regular `Map`.\n    return methods !== weakMapMethods || !isFunction(obj[forEachName]);\n  };\n}\n\n// In the interest of compact minification, we write\n// each string in the fingerprints only once.\nvar forEachName = 'forEach',\n    hasName = 'has',\n    commonInit = ['clear', 'delete'],\n    mapTail = ['get', hasName, 'set'];\n\n// `Map`, `WeakMap` and `Set` each have slightly different\n// combinations of the above sublists.\nexport var mapMethods = commonInit.concat(forEachName, mapTail),\n    weakMapMethods = commonInit.concat(mapTail),\n    setMethods = ['add'].concat(commonInit, forEachName, hasName);\n","// Internal function that returns an efficient (for current engines) version\n// of the passed-in callback, to be repeatedly applied in other Underscore\n// functions.\nexport default function optimizeCb(func, context, argCount) {\n  if (context === void 0) return func;\n  switch (argCount == null ? 3 : argCount) {\n    case 1: return function(value) {\n      return func.call(context, value);\n    };\n    // The 2-argument case is omitted because we’re not using it.\n    case 3: return function(value, index, collection) {\n      return func.call(context, value, index, collection);\n    };\n    case 4: return function(accumulator, value, index, collection) {\n      return func.call(context, accumulator, value, index, collection);\n    };\n  }\n  return function() {\n    return func.apply(context, arguments);\n  };\n}\n","// Current version.\nexport var VERSION = '1.12.1';\n\n// Establish the root object, `window` (`self`) in the browser, `global`\n// on the server, or `this` in some virtual machines. We use `self`\n// instead of `window` for `WebWorker` support.\nexport var root = typeof self == 'object' && self.self === self && self ||\n          typeof global == 'object' && global.global === global && global ||\n          Function('return this')() ||\n          {};\n\n// Save bytes in the minified (but not gzipped) version:\nexport var ArrayProto = Array.prototype, ObjProto = Object.prototype;\nexport var SymbolProto = typeof Symbol !== 'undefined' ? Symbol.prototype : null;\n\n// Create quick reference variables for speed access to core prototypes.\nexport var push = ArrayProto.push,\n    slice = ArrayProto.slice,\n    toString = ObjProto.toString,\n    hasOwnProperty = ObjProto.hasOwnProperty;\n\n// Modern feature detection.\nexport var supportsArrayBuffer = typeof ArrayBuffer !== 'undefined',\n    supportsDataView = typeof DataView !== 'undefined';\n\n// All **ECMAScript 5+** native function implementations that we hope to use\n// are declared here.\nexport var nativeIsArray = Array.isArray,\n    nativeKeys = Object.keys,\n    nativeCreate = Object.create,\n    nativeIsView = supportsArrayBuffer && ArrayBuffer.isView;\n\n// Create references to these builtin functions because we override them.\nexport var _isNaN = isNaN,\n    _isFinite = isFinite;\n\n// Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\nexport var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\nexport var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\n  'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n\n// The largest integer that can be represented exactly.\nexport var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\n","// Internal helper to generate a function to obtain property `key` from `obj`.\nexport default function shallowProperty(key) {\n  return function(obj) {\n    return obj == null ? void 0 : obj[key];\n  };\n}\n","import { supportsDataView } from './_setup.js';\nimport hasObjectTag from './_hasObjectTag.js';\n\n// In IE 10 - Edge 13, `DataView` has string tag `'[object Object]'`.\n// In IE 11, the most common among them, this problem also applies to\n// `Map`, `WeakMap` and `Set`.\nexport var hasStringTagBug = (\n      supportsDataView && hasObjectTag(new DataView(new ArrayBuffer(8)))\n    ),\n    isIE11 = (typeof Map !== 'undefined' && hasObjectTag(new Map));\n","import { toString } from './_setup.js';\n\n// Internal function for creating a `toString`-based type tester.\nexport default function tagTester(name) {\n  var tag = '[object ' + name + ']';\n  return function(obj) {\n    return toString.call(obj) === tag;\n  };\n}\n","import getByteLength from './_getByteLength.js';\n\n// Internal function to wrap or shallow-copy an ArrayBuffer,\n// typed array or DataView to a new view, reusing the buffer.\nexport default function toBufferView(bufferSource) {\n  return new Uint8Array(\n    bufferSource.buffer || bufferSource,\n    bufferSource.byteOffset || 0,\n    getByteLength(bufferSource)\n  );\n}\n","import _ from './underscore.js';\nimport './toPath.js';\n\n// Internal wrapper for `_.toPath` to enable minification.\n// Similar to `cb` for `_.iteratee`.\nexport default function toPath(path) {\n  return _.toPath(path);\n}\n","import invert from './invert.js';\nimport escapeMap from './_escapeMap.js';\n\n// Internal list of HTML entities for unescaping.\nexport default invert(escapeMap);\n","// Returns a function that will only be executed on and after the Nth call.\nexport default function after(times, func) {\n  return function() {\n    if (--times < 1) {\n      return func.apply(this, arguments);\n    }\n  };\n}\n","import isObject from './isObject.js';\nimport { hasEnumBug } from './_setup.js';\nimport collectNonEnumProps from './_collectNonEnumProps.js';\n\n// Retrieve all the enumerable property names of an object.\nexport default function allKeys(obj) {\n  if (!isObject(obj)) return [];\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  // Ahem, IE < 9.\n  if (hasEnumBug) collectNonEnumProps(obj, keys);\n  return keys;\n}\n","// Returns a function that will only be executed up to (but not including) the\n// Nth call.\nexport default function before(times, func) {\n  var memo;\n  return function() {\n    if (--times > 0) {\n      memo = func.apply(this, arguments);\n    }\n    if (times <= 1) func = null;\n    return memo;\n  };\n}\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport executeBound from './_executeBound.js';\n\n// Create a function bound to a given object (assigning `this`, and arguments,\n// optionally).\nexport default restArguments(function(func, context, args) {\n  if (!isFunction(func)) throw new TypeError('Bind must be called on a function');\n  var bound = restArguments(function(callArgs) {\n    return executeBound(func, bound, context, this, args.concat(callArgs));\n  });\n  return bound;\n});\n","import restArguments from './restArguments.js';\nimport flatten from './_flatten.js';\nimport bind from './bind.js';\n\n// Bind a number of an object's methods to that object. Remaining arguments\n// are the method names to be bound. Useful for ensuring that all callbacks\n// defined on an object belong to it.\nexport default restArguments(function(obj, keys) {\n  keys = flatten(keys, false, false);\n  var index = keys.length;\n  if (index < 1) throw new Error('bindAll must be passed function names');\n  while (index--) {\n    var key = keys[index];\n    obj[key] = bind(obj[key], obj);\n  }\n  return obj;\n});\n","import _ from './underscore.js';\n\n// Start chaining a wrapped Underscore object.\nexport default function chain(obj) {\n  var instance = _(obj);\n  instance._chain = true;\n  return instance;\n}\n","import { slice } from './_setup.js';\n\n// Chunk a single array into multiple arrays, each containing `count` or fewer\n// items.\nexport default function chunk(array, count) {\n  if (count == null || count < 1) return [];\n  var result = [];\n  var i = 0, length = array.length;\n  while (i < length) {\n    result.push(slice.call(array, i, i += count));\n  }\n  return result;\n}\n","import isObject from './isObject.js';\nimport isArray from './isArray.js';\nimport extend from './extend.js';\n\n// Create a (shallow-cloned) duplicate of an object.\nexport default function clone(obj) {\n  if (!isObject(obj)) return obj;\n  return isArray(obj) ? obj.slice() : extend({}, obj);\n}\n","import filter from './filter.js';\n\n// Trim out all falsy values from an array.\nexport default function compact(array) {\n  return filter(array, Boolean);\n}\n","// Returns a function that is the composition of a list of functions, each\n// consuming the return value of the function that follows.\nexport default function compose() {\n  var args = arguments;\n  var start = args.length - 1;\n  return function() {\n    var i = start;\n    var result = args[start].apply(this, arguments);\n    while (i--) result = args[i].call(this, result);\n    return result;\n  };\n}\n","// Predicate-generating function. Often useful outside of Underscore.\nexport default function constant(value) {\n  return function() {\n    return value;\n  };\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport indexOf from './indexOf.js';\n\n// Determine if the array or object contains a given item (using `===`).\nexport default function contains(obj, item, fromIndex, guard) {\n  if (!isArrayLike(obj)) obj = values(obj);\n  if (typeof fromIndex != 'number' || guard) fromIndex = 0;\n  return indexOf(obj, item, fromIndex) >= 0;\n}\n","import group from './_group.js';\nimport has from './_has.js';\n\n// Counts instances of an object that group by a certain criterion. Pass\n// either a string attribute to count by, or a function that returns the\n// criterion.\nexport default group(function(result, value, key) {\n  if (has(result, key)) result[key]++; else result[key] = 1;\n});\n","import baseCreate from './_baseCreate.js';\nimport extendOwn from './extendOwn.js';\n\n// Creates an object that inherits from the given prototype object.\n// If additional properties are provided then they will be added to the\n// created object.\nexport default function create(prototype, props) {\n  var result = baseCreate(prototype);\n  if (props) extendOwn(result, props);\n  return result;\n}\n","import restArguments from './restArguments.js';\nimport now from './now.js';\n\n// When a sequence of calls of the returned function ends, the argument\n// function is triggered. The end of a sequence is defined by the `wait`\n// parameter. If `immediate` is passed, the argument function will be\n// triggered at the beginning of the sequence instead of at the end.\nexport default function debounce(func, wait, immediate) {\n  var timeout, previous, args, result, context;\n\n  var later = function() {\n    var passed = now() - previous;\n    if (wait > passed) {\n      timeout = setTimeout(later, wait - passed);\n    } else {\n      timeout = null;\n      if (!immediate) result = func.apply(context, args);\n      // This check is needed because `func` can recursively invoke `debounced`.\n      if (!timeout) args = context = null;\n    }\n  };\n\n  var debounced = restArguments(function(_args) {\n    context = this;\n    args = _args;\n    previous = now();\n    if (!timeout) {\n      timeout = setTimeout(later, wait);\n      if (immediate) result = func.apply(context, args);\n    }\n    return result;\n  });\n\n  debounced.cancel = function() {\n    clearTimeout(timeout);\n    timeout = args = context = null;\n  };\n\n  return debounced;\n}\n","import createAssigner from './_createAssigner.js';\nimport allKeys from './allKeys.js';\n\n// Fill in a given object with default properties.\nexport default createAssigner(allKeys, true);\n","import partial from './partial.js';\nimport delay from './delay.js';\nimport _ from './underscore.js';\n\n// Defers a function, scheduling it to run after the current call stack has\n// cleared.\nexport default partial(delay, _, 1);\n","import restArguments from './restArguments.js';\n\n// Delays a function for the given number of milliseconds, and then calls\n// it with the arguments supplied.\nexport default restArguments(function(func, wait, args) {\n  return setTimeout(function() {\n    return func.apply(null, args);\n  }, wait);\n});\n","import restArguments from './restArguments.js';\nimport flatten from './_flatten.js';\nimport filter from './filter.js';\nimport contains from './contains.js';\n\n// Take the difference between one array and a number of other arrays.\n// Only the elements present in just the first array will remain.\nexport default restArguments(function(array, rest) {\n  rest = flatten(rest, true, true);\n  return filter(array, function(value){\n    return !contains(rest, value);\n  });\n});\n","import optimizeCb from './_optimizeCb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// The cornerstone for collection functions, an `each`\n// implementation, aka `forEach`.\n// Handles raw objects in addition to array-likes. Treats all\n// sparse array-likes as if they were dense.\nexport default function each(obj, iteratee, context) {\n  iteratee = optimizeCb(iteratee, context);\n  var i, length;\n  if (isArrayLike(obj)) {\n    for (i = 0, length = obj.length; i < length; i++) {\n      iteratee(obj[i], i, obj);\n    }\n  } else {\n    var _keys = keys(obj);\n    for (i = 0, length = _keys.length; i < length; i++) {\n      iteratee(obj[_keys[i]], _keys[i], obj);\n    }\n  }\n  return obj;\n}\n","import createEscaper from './_createEscaper.js';\nimport escapeMap from './_escapeMap.js';\n\n// Function for escaping strings to HTML interpolation.\nexport default createEscaper(escapeMap);\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Determine whether all of the elements pass a truth test.\nexport default function every(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length;\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    if (!predicate(obj[currentKey], currentKey, obj)) return false;\n  }\n  return true;\n}\n","import createAssigner from './_createAssigner.js';\nimport allKeys from './allKeys.js';\n\n// Extend a given object with all the properties in passed-in object(s).\nexport default createAssigner(allKeys);\n","import createAssigner from './_createAssigner.js';\nimport keys from './keys.js';\n\n// Assigns a given object with all the own properties in the passed-in\n// object(s).\n// (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\nexport default createAssigner(keys);\n","import cb from './_cb.js';\nimport each from './each.js';\n\n// Return all the elements that pass a truth test.\nexport default function filter(obj, predicate, context) {\n  var results = [];\n  predicate = cb(predicate, context);\n  each(obj, function(value, index, list) {\n    if (predicate(value, index, list)) results.push(value);\n  });\n  return results;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport findIndex from './findIndex.js';\nimport findKey from './findKey.js';\n\n// Return the first value which passes a truth test.\nexport default function find(obj, predicate, context) {\n  var keyFinder = isArrayLike(obj) ? findIndex : findKey;\n  var key = keyFinder(obj, predicate, context);\n  if (key !== void 0 && key !== -1) return obj[key];\n}\n","import createPredicateIndexFinder from './_createPredicateIndexFinder.js';\n\n// Returns the first index on an array-like that passes a truth test.\nexport default createPredicateIndexFinder(1);\n","import cb from './_cb.js';\nimport keys from './keys.js';\n\n// Returns the first key on an object that passes a truth test.\nexport default function findKey(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = keys(obj), key;\n  for (var i = 0, length = _keys.length; i < length; i++) {\n    key = _keys[i];\n    if (predicate(obj[key], key, obj)) return key;\n  }\n}\n","import createPredicateIndexFinder from './_createPredicateIndexFinder.js';\n\n// Returns the last index on an array-like that passes a truth test.\nexport default createPredicateIndexFinder(-1);\n","import find from './find.js';\nimport matcher from './matcher.js';\n\n// Convenience version of a common use case of `_.find`: getting the first\n// object containing specific `key:value` pairs.\nexport default function findWhere(obj, attrs) {\n  return find(obj, matcher(attrs));\n}\n","import initial from './initial.js';\n\n// Get the first element of an array. Passing **n** will return the first N\n// values in the array. The **guard** check allows it to work with `_.map`.\nexport default function first(array, n, guard) {\n  if (array == null || array.length < 1) return n == null || guard ? void 0 : [];\n  if (n == null || guard) return array[0];\n  return initial(array, array.length - n);\n}\n","import _flatten from './_flatten.js';\n\n// Flatten out an array, either recursively (by default), or up to `depth`.\n// Passing `true` or `false` as `depth` means `1` or `Infinity`, respectively.\nexport default function flatten(array, depth) {\n  return _flatten(array, depth, false);\n}\n","import isFunction from './isFunction.js';\n\n// Return a sorted list of the function names available on the object.\nexport default function functions(obj) {\n  var names = [];\n  for (var key in obj) {\n    if (isFunction(obj[key])) names.push(key);\n  }\n  return names.sort();\n}\n","import toPath from './_toPath.js';\nimport deepGet from './_deepGet.js';\nimport isUndefined from './isUndefined.js';\n\n// Get the value of the (deep) property on `path` from `object`.\n// If any property in `path` does not exist or if the value is\n// `undefined`, return `defaultValue` instead.\n// The `path` is normalized through `_.toPath`.\nexport default function get(object, path, defaultValue) {\n  var value = deepGet(object, toPath(path));\n  return isUndefined(value) ? defaultValue : value;\n}\n","import group from './_group.js';\nimport has from './_has.js';\n\n// Groups the object's values by a criterion. Pass either a string attribute\n// to group by, or a function that returns the criterion.\nexport default group(function(result, value, key) {\n  if (has(result, key)) result[key].push(value); else result[key] = [value];\n});\n","import _has from './_has.js';\nimport toPath from './_toPath.js';\n\n// Shortcut function for checking if an object has a given property directly on\n// itself (in other words, not on a prototype). Unlike the internal `has`\n// function, this public version can also traverse nested properties.\nexport default function has(obj, path) {\n  path = toPath(path);\n  var length = path.length;\n  for (var i = 0; i < length; i++) {\n    var key = path[i];\n    if (!_has(obj, key)) return false;\n    obj = obj[key];\n  }\n  return !!length;\n}\n","// Keep the identity function around for default iteratees.\nexport default function identity(value) {\n  return value;\n}\n","// Default Export\n// ==============\n// In this module, we mix our bundled exports into the `_` object and export\n// the result. This is analogous to setting `module.exports = _` in CommonJS.\n// Hence, this module is also the entry point of our UMD bundle and the package\n// entry point for CommonJS and AMD users. In other words, this is (the source\n// of) the module you are interfacing with when you do any of the following:\n//\n// ```js\n// // CommonJS\n// var _ = require('underscore');\n//\n// // AMD\n// define(['underscore'], function(_) {...});\n//\n// // UMD in the browser\n// // _ is available as a global variable\n// ```\nimport * as allExports from './index.js';\nimport { mixin } from './index.js';\n\n// Add all of the Underscore functions to the wrapper object.\nvar _ = mixin(allExports);\n// Legacy Node.js API.\n_._ = _;\n// Export the Underscore API.\nexport default _;\n","import group from './_group.js';\n\n// Indexes the object's values by a criterion, similar to `_.groupBy`, but for\n// when you know that your index values will be unique.\nexport default group(function(result, value, key) {\n  result[key] = value;\n});\n","import sortedIndex from './sortedIndex.js';\nimport findIndex from './findIndex.js';\nimport createIndexFinder from './_createIndexFinder.js';\n\n// Return the position of the first occurrence of an item in an array,\n// or -1 if the item is not included in the array.\n// If the array is large and already in sort order, pass `true`\n// for **isSorted** to use binary search.\nexport default createIndexFinder(1, findIndex, sortedIndex);\n","import { slice } from './_setup.js';\n\n// Returns everything but the last entry of the array. Especially useful on\n// the arguments object. Passing **n** will return all the values in\n// the array, excluding the last N.\nexport default function initial(array, n, guard) {\n  return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\n}\n","import getLength from './_getLength.js';\nimport contains from './contains.js';\n\n// Produce an array that contains every item shared between all the\n// passed-in arrays.\nexport default function intersection(array) {\n  var result = [];\n  var argsLength = arguments.length;\n  for (var i = 0, length = getLength(array); i < length; i++) {\n    var item = array[i];\n    if (contains(result, item)) continue;\n    var j;\n    for (j = 1; j < argsLength; j++) {\n      if (!contains(arguments[j], item)) break;\n    }\n    if (j === argsLength) result.push(item);\n  }\n  return result;\n}\n","import keys from './keys.js';\n\n// Invert the keys and values of an object. The values must be serializable.\nexport default function invert(obj) {\n  var result = {};\n  var _keys = keys(obj);\n  for (var i = 0, length = _keys.length; i < length; i++) {\n    result[obj[_keys[i]]] = _keys[i];\n  }\n  return result;\n}\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport map from './map.js';\nimport deepGet from './_deepGet.js';\nimport toPath from './_toPath.js';\n\n// Invoke a method (with arguments) on every item in a collection.\nexport default restArguments(function(obj, path, args) {\n  var contextPath, func;\n  if (isFunction(path)) {\n    func = path;\n  } else {\n    path = toPath(path);\n    contextPath = path.slice(0, -1);\n    path = path[path.length - 1];\n  }\n  return map(obj, function(context) {\n    var method = func;\n    if (!method) {\n      if (contextPath && contextPath.length) {\n        context = deepGet(context, contextPath);\n      }\n      if (context == null) return void 0;\n      method = context[path];\n    }\n    return method == null ? method : method.apply(context, args);\n  });\n});\n","import tagTester from './_tagTester.js';\nimport has from './_has.js';\n\nvar isArguments = tagTester('Arguments');\n\n// Define a fallback version of the method in browsers (ahem, IE < 9), where\n// there isn't any inspectable \"Arguments\" type.\n(function() {\n  if (!isArguments(arguments)) {\n    isArguments = function(obj) {\n      return has(obj, 'callee');\n    };\n  }\n}());\n\nexport default isArguments;\n","import { nativeIsArray } from './_setup.js';\nimport tagTester from './_tagTester.js';\n\n// Is a given value an array?\n// Delegates to ECMA5's native `Array.isArray`.\nexport default nativeIsArray || tagTester('Array');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('ArrayBuffer');\n","import { toString } from './_setup.js';\n\n// Is a given value a boolean?\nexport default function isBoolean(obj) {\n  return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\n}\n","import tagTester from './_tagTester.js';\nimport isFunction from './isFunction.js';\nimport isArrayBuffer from './isArrayBuffer.js';\nimport { hasStringTagBug } from './_stringTagBug.js';\n\nvar isDataView = tagTester('DataView');\n\n// In IE 10 - Edge 13, we need a different heuristic\n// to determine whether an object is a `DataView`.\nfunction ie10IsDataView(obj) {\n  return obj != null && isFunction(obj.getInt8) && isArrayBuffer(obj.buffer);\n}\n\nexport default (hasStringTagBug ? ie10IsDataView : isDataView);\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Date');\n","// Is a given value a DOM element?\nexport default function isElement(obj) {\n  return !!(obj && obj.nodeType === 1);\n}\n","import getLength from './_getLength.js';\nimport isArray from './isArray.js';\nimport isString from './isString.js';\nimport isArguments from './isArguments.js';\nimport keys from './keys.js';\n\n// Is a given array, string, or object empty?\n// An \"empty\" object has no enumerable own-properties.\nexport default function isEmpty(obj) {\n  if (obj == null) return true;\n  // Skip the more expensive `toString`-based type checks if `obj` has no\n  // `.length`.\n  var length = getLength(obj);\n  if (typeof length == 'number' && (\n    isArray(obj) || isString(obj) || isArguments(obj)\n  )) return length === 0;\n  return getLength(keys(obj)) === 0;\n}\n","import _ from './underscore.js';\nimport { toString, SymbolProto } from './_setup.js';\nimport getByteLength from './_getByteLength.js';\nimport isTypedArray from './isTypedArray.js';\nimport isFunction from './isFunction.js';\nimport { hasStringTagBug }  from './_stringTagBug.js';\nimport isDataView from './isDataView.js';\nimport keys from './keys.js';\nimport has from './_has.js';\nimport toBufferView from './_toBufferView.js';\n\n// We use this string twice, so give it a name for minification.\nvar tagDataView = '[object DataView]';\n\n// Internal recursive comparison function for `_.isEqual`.\nfunction eq(a, b, aStack, bStack) {\n  // Identical objects are equal. `0 === -0`, but they aren't identical.\n  // See the [Harmony `egal` proposal](https://wiki.ecmascript.org/doku.php?id=harmony:egal).\n  if (a === b) return a !== 0 || 1 / a === 1 / b;\n  // `null` or `undefined` only equal to itself (strict comparison).\n  if (a == null || b == null) return false;\n  // `NaN`s are equivalent, but non-reflexive.\n  if (a !== a) return b !== b;\n  // Exhaust primitive checks\n  var type = typeof a;\n  if (type !== 'function' && type !== 'object' && typeof b != 'object') return false;\n  return deepEq(a, b, aStack, bStack);\n}\n\n// Internal recursive comparison function for `_.isEqual`.\nfunction deepEq(a, b, aStack, bStack) {\n  // Unwrap any wrapped objects.\n  if (a instanceof _) a = a._wrapped;\n  if (b instanceof _) b = b._wrapped;\n  // Compare `[[Class]]` names.\n  var className = toString.call(a);\n  if (className !== toString.call(b)) return false;\n  // Work around a bug in IE 10 - Edge 13.\n  if (hasStringTagBug && className == '[object Object]' && isDataView(a)) {\n    if (!isDataView(b)) return false;\n    className = tagDataView;\n  }\n  switch (className) {\n    // These types are compared by value.\n    case '[object RegExp]':\n      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n    case '[object String]':\n      // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n      // equivalent to `new String(\"5\")`.\n      return '' + a === '' + b;\n    case '[object Number]':\n      // `NaN`s are equivalent, but non-reflexive.\n      // Object(NaN) is equivalent to NaN.\n      if (+a !== +a) return +b !== +b;\n      // An `egal` comparison is performed for other numeric values.\n      return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n    case '[object Date]':\n    case '[object Boolean]':\n      // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n      // millisecond representations. Note that invalid dates with millisecond representations\n      // of `NaN` are not equivalent.\n      return +a === +b;\n    case '[object Symbol]':\n      return SymbolProto.valueOf.call(a) === SymbolProto.valueOf.call(b);\n    case '[object ArrayBuffer]':\n    case tagDataView:\n      // Coerce to typed array so we can fall through.\n      return deepEq(toBufferView(a), toBufferView(b), aStack, bStack);\n  }\n\n  var areArrays = className === '[object Array]';\n  if (!areArrays && isTypedArray(a)) {\n      var byteLength = getByteLength(a);\n      if (byteLength !== getByteLength(b)) return false;\n      if (a.buffer === b.buffer && a.byteOffset === b.byteOffset) return true;\n      areArrays = true;\n  }\n  if (!areArrays) {\n    if (typeof a != 'object' || typeof b != 'object') return false;\n\n    // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n    // from different frames are.\n    var aCtor = a.constructor, bCtor = b.constructor;\n    if (aCtor !== bCtor && !(isFunction(aCtor) && aCtor instanceof aCtor &&\n                             isFunction(bCtor) && bCtor instanceof bCtor)\n                        && ('constructor' in a && 'constructor' in b)) {\n      return false;\n    }\n  }\n  // Assume equality for cyclic structures. The algorithm for detecting cyclic\n  // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n\n  // Initializing stack of traversed objects.\n  // It's done here since we only need them for objects and arrays comparison.\n  aStack = aStack || [];\n  bStack = bStack || [];\n  var length = aStack.length;\n  while (length--) {\n    // Linear search. Performance is inversely proportional to the number of\n    // unique nested structures.\n    if (aStack[length] === a) return bStack[length] === b;\n  }\n\n  // Add the first object to the stack of traversed objects.\n  aStack.push(a);\n  bStack.push(b);\n\n  // Recursively compare objects and arrays.\n  if (areArrays) {\n    // Compare array lengths to determine if a deep comparison is necessary.\n    length = a.length;\n    if (length !== b.length) return false;\n    // Deep compare the contents, ignoring non-numeric properties.\n    while (length--) {\n      if (!eq(a[length], b[length], aStack, bStack)) return false;\n    }\n  } else {\n    // Deep compare objects.\n    var _keys = keys(a), key;\n    length = _keys.length;\n    // Ensure that both objects contain the same number of properties before comparing deep equality.\n    if (keys(b).length !== length) return false;\n    while (length--) {\n      // Deep compare each member\n      key = _keys[length];\n      if (!(has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\n    }\n  }\n  // Remove the first object from the stack of traversed objects.\n  aStack.pop();\n  bStack.pop();\n  return true;\n}\n\n// Perform a deep comparison to check if two objects are equal.\nexport default function isEqual(a, b) {\n  return eq(a, b);\n}\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Error');\n","import { _isFinite } from './_setup.js';\nimport isSymbol from './isSymbol.js';\n\n// Is a given object a finite number?\nexport default function isFinite(obj) {\n  return !isSymbol(obj) && _isFinite(obj) && !isNaN(parseFloat(obj));\n}\n","import tagTester from './_tagTester.js';\nimport { root } from './_setup.js';\n\nvar isFunction = tagTester('Function');\n\n// Optimize `isFunction` if appropriate. Work around some `typeof` bugs in old\n// v8, IE 11 (#1621), Safari 8 (#1929), and PhantomJS (#2236).\nvar nodelist = root.document && root.document.childNodes;\nif (typeof /./ != 'function' && typeof Int8Array != 'object' && typeof nodelist != 'function') {\n  isFunction = function(obj) {\n    return typeof obj == 'function' || false;\n  };\n}\n\nexport default isFunction;\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, mapMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(mapMethods) : tagTester('Map');\n","import keys from './keys.js';\n\n// Returns whether an object has a given set of `key:value` pairs.\nexport default function isMatch(object, attrs) {\n  var _keys = keys(attrs), length = _keys.length;\n  if (object == null) return !length;\n  var obj = Object(object);\n  for (var i = 0; i < length; i++) {\n    var key = _keys[i];\n    if (attrs[key] !== obj[key] || !(key in obj)) return false;\n  }\n  return true;\n}\n","import { _isNaN } from './_setup.js';\nimport isNumber from './isNumber.js';\n\n// Is the given value `NaN`?\nexport default function isNaN(obj) {\n  return isNumber(obj) && _isNaN(obj);\n}\n","// Is a given value equal to null?\nexport default function isNull(obj) {\n  return obj === null;\n}\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Number');\n","// Is a given variable an object?\nexport default function isObject(obj) {\n  var type = typeof obj;\n  return type === 'function' || type === 'object' && !!obj;\n}\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('RegExp');\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, setMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(setMethods) : tagTester('Set');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('String');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Symbol');\n","import { supportsArrayBuffer, nativeIsView, toString } from './_setup.js';\nimport isDataView from './isDataView.js';\nimport constant from './constant.js';\nimport isBufferLike from './_isBufferLike.js';\n\n// Is a given value a typed array?\nvar typedArrayPattern = /\\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\\]/;\nfunction isTypedArray(obj) {\n  // `ArrayBuffer.isView` is the most future-proof, so use it when available.\n  // Otherwise, fall back on the above regular expression.\n  return nativeIsView ? (nativeIsView(obj) && !isDataView(obj)) :\n                isBufferLike(obj) && typedArrayPattern.test(toString.call(obj));\n}\n\nexport default supportsArrayBuffer ? isTypedArray : constant(false);\n","// Is a given variable undefined?\nexport default function isUndefined(obj) {\n  return obj === void 0;\n}\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, weakMapMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(weakMapMethods) : tagTester('WeakMap');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('WeakSet');\n","import _ from './underscore.js';\nimport baseIteratee from './_baseIteratee.js';\n\n// External wrapper for our callback generator. Users may customize\n// `_.iteratee` if they want additional predicate/iteratee shorthand styles.\n// This abstraction hides the internal-only `argCount` argument.\nexport default function iteratee(value, context) {\n  return baseIteratee(value, context, Infinity);\n}\n_.iteratee = iteratee;\n","import isObject from './isObject.js';\nimport { nativeKeys, hasEnumBug } from './_setup.js';\nimport has from './_has.js';\nimport collectNonEnumProps from './_collectNonEnumProps.js';\n\n// Retrieve the names of an object's own properties.\n// Delegates to **ECMAScript 5**'s native `Object.keys`.\nexport default function keys(obj) {\n  if (!isObject(obj)) return [];\n  if (nativeKeys) return nativeKeys(obj);\n  var keys = [];\n  for (var key in obj) if (has(obj, key)) keys.push(key);\n  // Ahem, IE < 9.\n  if (hasEnumBug) collectNonEnumProps(obj, keys);\n  return keys;\n}\n","import rest from './rest.js';\n\n// Get the last element of an array. Passing **n** will return the last N\n// values in the array.\nexport default function last(array, n, guard) {\n  if (array == null || array.length < 1) return n == null || guard ? void 0 : [];\n  if (n == null || guard) return array[array.length - 1];\n  return rest(array, Math.max(0, array.length - n));\n}\n","import findLastIndex from './findLastIndex.js';\nimport createIndexFinder from './_createIndexFinder.js';\n\n// Return the position of the last occurrence of an item in an array,\n// or -1 if the item is not included in the array.\nexport default createIndexFinder(-1, findLastIndex);\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Return the results of applying the iteratee to each element.\nexport default function map(obj, iteratee, context) {\n  iteratee = cb(iteratee, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length,\n      results = Array(length);\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    results[index] = iteratee(obj[currentKey], currentKey, obj);\n  }\n  return results;\n}\n","import cb from './_cb.js';\nimport keys from './keys.js';\n\n// Returns the results of applying the `iteratee` to each element of `obj`.\n// In contrast to `_.map` it returns an object.\nexport default function mapObject(obj, iteratee, context) {\n  iteratee = cb(iteratee, context);\n  var _keys = keys(obj),\n      length = _keys.length,\n      results = {};\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys[index];\n    results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\n  }\n  return results;\n}\n","import extendOwn from './extendOwn.js';\nimport isMatch from './isMatch.js';\n\n// Returns a predicate for checking whether an object has a given set of\n// `key:value` pairs.\nexport default function matcher(attrs) {\n  attrs = extendOwn({}, attrs);\n  return function(obj) {\n    return isMatch(obj, attrs);\n  };\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport cb from './_cb.js';\nimport each from './each.js';\n\n// Return the maximum element (or element-based computation).\nexport default function max(obj, iteratee, context) {\n  var result = -Infinity, lastComputed = -Infinity,\n      value, computed;\n  if (iteratee == null || typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null) {\n    obj = isArrayLike(obj) ? obj : values(obj);\n    for (var i = 0, length = obj.length; i < length; i++) {\n      value = obj[i];\n      if (value != null && value > result) {\n        result = value;\n      }\n    }\n  } else {\n    iteratee = cb(iteratee, context);\n    each(obj, function(v, index, list) {\n      computed = iteratee(v, index, list);\n      if (computed > lastComputed || computed === -Infinity && result === -Infinity) {\n        result = v;\n        lastComputed = computed;\n      }\n    });\n  }\n  return result;\n}\n","import has from './_has.js';\n\n// Memoize an expensive function by storing its results.\nexport default function memoize(func, hasher) {\n  var memoize = function(key) {\n    var cache = memoize.cache;\n    var address = '' + (hasher ? hasher.apply(this, arguments) : key);\n    if (!has(cache, address)) cache[address] = func.apply(this, arguments);\n    return cache[address];\n  };\n  memoize.cache = {};\n  return memoize;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport cb from './_cb.js';\nimport each from './each.js';\n\n// Return the minimum element (or element-based computation).\nexport default function min(obj, iteratee, context) {\n  var result = Infinity, lastComputed = Infinity,\n      value, computed;\n  if (iteratee == null || typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null) {\n    obj = isArrayLike(obj) ? obj : values(obj);\n    for (var i = 0, length = obj.length; i < length; i++) {\n      value = obj[i];\n      if (value != null && value < result) {\n        result = value;\n      }\n    }\n  } else {\n    iteratee = cb(iteratee, context);\n    each(obj, function(v, index, list) {\n      computed = iteratee(v, index, list);\n      if (computed < lastComputed || computed === Infinity && result === Infinity) {\n        result = v;\n        lastComputed = computed;\n      }\n    });\n  }\n  return result;\n}\n","import _ from './underscore.js';\nimport each from './each.js';\nimport functions from './functions.js';\nimport { push } from './_setup.js';\nimport chainResult from './_chainResult.js';\n\n// Add your own custom functions to the Underscore object.\nexport default function mixin(obj) {\n  each(functions(obj), function(name) {\n    var func = _[name] = obj[name];\n    _.prototype[name] = function() {\n      var args = [this._wrapped];\n      push.apply(args, arguments);\n      return chainResult(this, func.apply(_, args));\n    };\n  });\n  return _;\n}\n","// Returns a negated version of the passed-in predicate.\nexport default function negate(predicate) {\n  return function() {\n    return !predicate.apply(this, arguments);\n  };\n}\n","// Predicate-generating function. Often useful outside of Underscore.\nexport default function noop(){}\n","// A (possibly faster) way to get the current timestamp as an integer.\nexport default Date.now || function() {\n  return new Date().getTime();\n};\n","import getLength  from './_getLength.js';\n\n// Converts lists into objects. Pass either a single array of `[key, value]`\n// pairs, or two parallel arrays of the same length -- one of keys, and one of\n// the corresponding values. Passing by pairs is the reverse of `_.pairs`.\nexport default function object(list, values) {\n  var result = {};\n  for (var i = 0, length = getLength(list); i < length; i++) {\n    if (values) {\n      result[list[i]] = values[i];\n    } else {\n      result[list[i][0]] = list[i][1];\n    }\n  }\n  return result;\n}\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport negate from './negate.js';\nimport map from './map.js';\nimport flatten from './_flatten.js';\nimport contains from './contains.js';\nimport pick from './pick.js';\n\n// Return a copy of the object without the disallowed properties.\nexport default restArguments(function(obj, keys) {\n  var iteratee = keys[0], context;\n  if (isFunction(iteratee)) {\n    iteratee = negate(iteratee);\n    if (keys.length > 1) context = keys[1];\n  } else {\n    keys = map(flatten(keys, false, false), String);\n    iteratee = function(value, key) {\n      return !contains(keys, key);\n    };\n  }\n  return pick(obj, iteratee, context);\n});\n","import partial from './partial.js';\nimport before from './before.js';\n\n// Returns a function that will be executed at most one time, no matter how\n// often you call it. Useful for lazy initialization.\nexport default partial(before, 2);\n","import keys from './keys.js';\n\n// Convert an object into a list of `[key, value]` pairs.\n// The opposite of `_.object` with one argument.\nexport default function pairs(obj) {\n  var _keys = keys(obj);\n  var length = _keys.length;\n  var pairs = Array(length);\n  for (var i = 0; i < length; i++) {\n    pairs[i] = [_keys[i], obj[_keys[i]]];\n  }\n  return pairs;\n}\n","import restArguments from './restArguments.js';\nimport executeBound from './_executeBound.js';\nimport _ from './underscore.js';\n\n// Partially apply a function by creating a version that has had some of its\n// arguments pre-filled, without changing its dynamic `this` context. `_` acts\n// as a placeholder by default, allowing any combination of arguments to be\n// pre-filled. Set `_.partial.placeholder` for a custom placeholder argument.\nvar partial = restArguments(function(func, boundArgs) {\n  var placeholder = partial.placeholder;\n  var bound = function() {\n    var position = 0, length = boundArgs.length;\n    var args = Array(length);\n    for (var i = 0; i < length; i++) {\n      args[i] = boundArgs[i] === placeholder ? arguments[position++] : boundArgs[i];\n    }\n    while (position < arguments.length) args.push(arguments[position++]);\n    return executeBound(func, bound, this, this, args);\n  };\n  return bound;\n});\n\npartial.placeholder = _;\nexport default partial;\n","import group from './_group.js';\n\n// Split a collection into two arrays: one whose elements all pass the given\n// truth test, and one whose elements all do not pass the truth test.\nexport default group(function(result, value, pass) {\n  result[pass ? 0 : 1].push(value);\n}, true);\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport optimizeCb from './_optimizeCb.js';\nimport allKeys from './allKeys.js';\nimport keyInObj from './_keyInObj.js';\nimport flatten from './_flatten.js';\n\n// Return a copy of the object only containing the allowed properties.\nexport default restArguments(function(obj, keys) {\n  var result = {}, iteratee = keys[0];\n  if (obj == null) return result;\n  if (isFunction(iteratee)) {\n    if (keys.length > 1) iteratee = optimizeCb(iteratee, keys[1]);\n    keys = allKeys(obj);\n  } else {\n    iteratee = keyInObj;\n    keys = flatten(keys, false, false);\n    obj = Object(obj);\n  }\n  for (var i = 0, length = keys.length; i < length; i++) {\n    var key = keys[i];\n    var value = obj[key];\n    if (iteratee(value, key, obj)) result[key] = value;\n  }\n  return result;\n});\n","import map from './map.js';\nimport property from './property.js';\n\n// Convenience version of a common use case of `_.map`: fetching a property.\nexport default function pluck(obj, key) {\n  return map(obj, property(key));\n}\n","import deepGet from './_deepGet.js';\nimport toPath from './_toPath.js';\n\n// Creates a function that, when passed an object, will traverse that object’s\n// properties down the given `path`, specified as an array of keys or indices.\nexport default function property(path) {\n  path = toPath(path);\n  return function(obj) {\n    return deepGet(obj, path);\n  };\n}\n","import noop from './noop.js';\nimport get from './get.js';\n\n// Generates a function for a given object that returns a given property.\nexport default function propertyOf(obj) {\n  if (obj == null) return noop;\n  return function(path) {\n    return get(obj, path);\n  };\n}\n","// Return a random integer between `min` and `max` (inclusive).\nexport default function random(min, max) {\n  if (max == null) {\n    max = min;\n    min = 0;\n  }\n  return min + Math.floor(Math.random() * (max - min + 1));\n}\n","// Generate an integer Array containing an arithmetic progression. A port of\n// the native Python `range()` function. See\n// [the Python documentation](https://docs.python.org/library/functions.html#range).\nexport default function range(start, stop, step) {\n  if (stop == null) {\n    stop = start || 0;\n    start = 0;\n  }\n  if (!step) {\n    step = stop < start ? -1 : 1;\n  }\n\n  var length = Math.max(Math.ceil((stop - start) / step), 0);\n  var range = Array(length);\n\n  for (var idx = 0; idx < length; idx++, start += step) {\n    range[idx] = start;\n  }\n\n  return range;\n}\n","import createReduce from './_createReduce.js';\n\n// **Reduce** builds up a single result from a list of values, aka `inject`,\n// or `foldl`.\nexport default createReduce(1);\n","import createReduce from './_createReduce.js';\n\n// The right-associative version of reduce, also known as `foldr`.\nexport default createReduce(-1);\n","import filter from './filter.js';\nimport negate from './negate.js';\nimport cb from './_cb.js';\n\n// Return all the elements for which a truth test fails.\nexport default function reject(obj, predicate, context) {\n  return filter(obj, negate(cb(predicate)), context);\n}\n","import { slice } from './_setup.js';\n\n// Returns everything but the first entry of the `array`. Especially useful on\n// the `arguments` object. Passing an **n** will return the rest N values in the\n// `array`.\nexport default function rest(array, n, guard) {\n  return slice.call(array, n == null || guard ? 1 : n);\n}\n","// Some functions take a variable number of arguments, or a few expected\n// arguments at the beginning and then a variable number of values to operate\n// on. This helper accumulates all remaining arguments past the function’s\n// argument length (or an explicit `startIndex`), into an array that becomes\n// the last argument. Similar to ES6’s \"rest parameter\".\nexport default function restArguments(func, startIndex) {\n  startIndex = startIndex == null ? func.length - 1 : +startIndex;\n  return function() {\n    var length = Math.max(arguments.length - startIndex, 0),\n        rest = Array(length),\n        index = 0;\n    for (; index < length; index++) {\n      rest[index] = arguments[index + startIndex];\n    }\n    switch (startIndex) {\n      case 0: return func.call(this, rest);\n      case 1: return func.call(this, arguments[0], rest);\n      case 2: return func.call(this, arguments[0], arguments[1], rest);\n    }\n    var args = Array(startIndex + 1);\n    for (index = 0; index < startIndex; index++) {\n      args[index] = arguments[index];\n    }\n    args[startIndex] = rest;\n    return func.apply(this, args);\n  };\n}\n","import isFunction from './isFunction.js';\nimport toPath from './_toPath.js';\n\n// Traverses the children of `obj` along `path`. If a child is a function, it\n// is invoked with its parent as context. Returns the value of the final\n// child, or `fallback` if any child is undefined.\nexport default function result(obj, path, fallback) {\n  path = toPath(path);\n  var length = path.length;\n  if (!length) {\n    return isFunction(fallback) ? fallback.call(obj) : fallback;\n  }\n  for (var i = 0; i < length; i++) {\n    var prop = obj == null ? void 0 : obj[path[i]];\n    if (prop === void 0) {\n      prop = fallback;\n      i = length; // Ensure we don't continue iterating.\n    }\n    obj = isFunction(prop) ? prop.call(obj) : prop;\n  }\n  return obj;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport clone from './clone.js';\nimport values from './values.js';\nimport getLength from './_getLength.js';\nimport random from './random.js';\n\n// Sample **n** random values from a collection using the modern version of the\n// [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher–Yates_shuffle).\n// If **n** is not specified, returns a single random element.\n// The internal `guard` argument allows it to work with `_.map`.\nexport default function sample(obj, n, guard) {\n  if (n == null || guard) {\n    if (!isArrayLike(obj)) obj = values(obj);\n    return obj[random(obj.length - 1)];\n  }\n  var sample = isArrayLike(obj) ? clone(obj) : values(obj);\n  var length = getLength(sample);\n  n = Math.max(Math.min(n, length), 0);\n  var last = length - 1;\n  for (var index = 0; index < n; index++) {\n    var rand = random(index, last);\n    var temp = sample[index];\n    sample[index] = sample[rand];\n    sample[rand] = temp;\n  }\n  return sample.slice(0, n);\n}\n","import sample from './sample.js';\n\n// Shuffle a collection.\nexport default function shuffle(obj) {\n  return sample(obj, Infinity);\n}\n","import isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Return the number of elements in a collection.\nexport default function size(obj) {\n  if (obj == null) return 0;\n  return isArrayLike(obj) ? obj.length : keys(obj).length;\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Determine if at least one element in the object passes a truth test.\nexport default function some(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length;\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    if (predicate(obj[currentKey], currentKey, obj)) return true;\n  }\n  return false;\n}\n","import cb from './_cb.js';\nimport pluck from './pluck.js';\nimport map from './map.js';\n\n// Sort the object's values by a criterion produced by an iteratee.\nexport default function sortBy(obj, iteratee, context) {\n  var index = 0;\n  iteratee = cb(iteratee, context);\n  return pluck(map(obj, function(value, key, list) {\n    return {\n      value: value,\n      index: index++,\n      criteria: iteratee(value, key, list)\n    };\n  }).sort(function(left, right) {\n    var a = left.criteria;\n    var b = right.criteria;\n    if (a !== b) {\n      if (a > b || a === void 0) return 1;\n      if (a < b || b === void 0) return -1;\n    }\n    return left.index - right.index;\n  }), 'value');\n}\n","import cb from './_cb.js';\nimport getLength from './_getLength.js';\n\n// Use a comparator function to figure out the smallest index at which\n// an object should be inserted so as to maintain order. Uses binary search.\nexport default function sortedIndex(array, obj, iteratee, context) {\n  iteratee = cb(iteratee, context, 1);\n  var value = iteratee(obj);\n  var low = 0, high = getLength(array);\n  while (low < high) {\n    var mid = Math.floor((low + high) / 2);\n    if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\n  }\n  return low;\n}\n","// Invokes `interceptor` with the `obj` and then returns `obj`.\n// The primary purpose of this method is to \"tap into\" a method chain, in\n// order to perform operations on intermediate results within the chain.\nexport default function tap(obj, interceptor) {\n  interceptor(obj);\n  return obj;\n}\n","import defaults from './defaults.js';\nimport _ from './underscore.js';\nimport './templateSettings.js';\n\n// When customizing `_.templateSettings`, if you don't want to define an\n// interpolation, evaluation or escaping regex, we need one that is\n// guaranteed not to match.\nvar noMatch = /(.)^/;\n\n// Certain characters need to be escaped so that they can be put into a\n// string literal.\nvar escapes = {\n  \"'\": \"'\",\n  '\\\\': '\\\\',\n  '\\r': 'r',\n  '\\n': 'n',\n  '\\u2028': 'u2028',\n  '\\u2029': 'u2029'\n};\n\nvar escapeRegExp = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\n\nfunction escapeChar(match) {\n  return '\\\\' + escapes[match];\n}\n\nvar bareIdentifier = /^\\s*(\\w|\\$)+\\s*$/;\n\n// JavaScript micro-templating, similar to John Resig's implementation.\n// Underscore templating handles arbitrary delimiters, preserves whitespace,\n// and correctly escapes quotes within interpolated code.\n// NB: `oldSettings` only exists for backwards compatibility.\nexport default function template(text, settings, oldSettings) {\n  if (!settings && oldSettings) settings = oldSettings;\n  settings = defaults({}, settings, _.templateSettings);\n\n  // Combine delimiters into one regular expression via alternation.\n  var matcher = RegExp([\n    (settings.escape || noMatch).source,\n    (settings.interpolate || noMatch).source,\n    (settings.evaluate || noMatch).source\n  ].join('|') + '|$', 'g');\n\n  // Compile the template source, escaping string literals appropriately.\n  var index = 0;\n  var source = \"__p+='\";\n  text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n    source += text.slice(index, offset).replace(escapeRegExp, escapeChar);\n    index = offset + match.length;\n\n    if (escape) {\n      source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n    } else if (interpolate) {\n      source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n    } else if (evaluate) {\n      source += \"';\\n\" + evaluate + \"\\n__p+='\";\n    }\n\n    // Adobe VMs need the match returned to produce the correct offset.\n    return match;\n  });\n  source += \"';\\n\";\n\n  var argument = settings.variable;\n  if (argument) {\n    if (!bareIdentifier.test(argument)) throw new Error(argument);\n  } else {\n    // If a variable is not specified, place data values in local scope.\n    source = 'with(obj||{}){\\n' + source + '}\\n';\n    argument = 'obj';\n  }\n\n  source = \"var __t,__p='',__j=Array.prototype.join,\" +\n    \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n    source + 'return __p;\\n';\n\n  var render;\n  try {\n    render = new Function(argument, '_', source);\n  } catch (e) {\n    e.source = source;\n    throw e;\n  }\n\n  var template = function(data) {\n    return render.call(this, data, _);\n  };\n\n  // Provide the compiled source as a convenience for precompilation.\n  template.source = 'function(' + argument + '){\\n' + source + '}';\n\n  return template;\n}\n","import _ from './underscore.js';\n\n// By default, Underscore uses ERB-style template delimiters. Change the\n// following template settings to use alternative delimiters.\nexport default _.templateSettings = {\n  evaluate: /<%([\\s\\S]+?)%>/g,\n  interpolate: /<%=([\\s\\S]+?)%>/g,\n  escape: /<%-([\\s\\S]+?)%>/g\n};\n","import now from './now.js';\n\n// Returns a function, that, when invoked, will only be triggered at most once\n// during a given window of time. Normally, the throttled function will run\n// as much as it can, without ever going more than once per `wait` duration;\n// but if you'd like to disable the execution on the leading edge, pass\n// `{leading: false}`. To disable execution on the trailing edge, ditto.\nexport default function throttle(func, wait, options) {\n  var timeout, context, args, result;\n  var previous = 0;\n  if (!options) options = {};\n\n  var later = function() {\n    previous = options.leading === false ? 0 : now();\n    timeout = null;\n    result = func.apply(context, args);\n    if (!timeout) context = args = null;\n  };\n\n  var throttled = function() {\n    var _now = now();\n    if (!previous && options.leading === false) previous = _now;\n    var remaining = wait - (_now - previous);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      previous = _now;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(later, remaining);\n    }\n    return result;\n  };\n\n  throttled.cancel = function() {\n    clearTimeout(timeout);\n    previous = 0;\n    timeout = context = args = null;\n  };\n\n  return throttled;\n}\n","import optimizeCb from './_optimizeCb.js';\n\n// Run a function **n** times.\nexport default function times(n, iteratee, context) {\n  var accum = Array(Math.max(0, n));\n  iteratee = optimizeCb(iteratee, context, 1);\n  for (var i = 0; i < n; i++) accum[i] = iteratee(i);\n  return accum;\n}\n","import isArray from './isArray.js';\nimport { slice } from './_setup.js';\nimport isString from './isString.js';\nimport isArrayLike from './_isArrayLike.js';\nimport map from './map.js';\nimport identity from './identity.js';\nimport values from './values.js';\n\n// Safely create a real, live array from anything iterable.\nvar reStrSymbol = /[^\\ud800-\\udfff]|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff]/g;\nexport default function toArray(obj) {\n  if (!obj) return [];\n  if (isArray(obj)) return slice.call(obj);\n  if (isString(obj)) {\n    // Keep surrogate pair characters together.\n    return obj.match(reStrSymbol);\n  }\n  if (isArrayLike(obj)) return map(obj, identity);\n  return values(obj);\n}\n","import _ from './underscore.js';\nimport isArray from './isArray.js';\n\n// Normalize a (deep) property `path` to array.\n// Like `_.iteratee`, this function can be customized.\nexport default function toPath(path) {\n  return isArray(path) ? path : [path];\n}\n_.toPath = toPath;\n","import _ from './underscore.js';\nimport each from './each.js';\nimport { ArrayProto } from './_setup.js';\nimport chainResult from './_chainResult.js';\n\n// Add all mutator `Array` functions to the wrapper.\neach(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n  var method = ArrayProto[name];\n  _.prototype[name] = function() {\n    var obj = this._wrapped;\n    if (obj != null) {\n      method.apply(obj, arguments);\n      if ((name === 'shift' || name === 'splice') && obj.length === 0) {\n        delete obj[0];\n      }\n    }\n    return chainResult(this, obj);\n  };\n});\n\n// Add all accessor `Array` functions to the wrapper.\neach(['concat', 'join', 'slice'], function(name) {\n  var method = ArrayProto[name];\n  _.prototype[name] = function() {\n    var obj = this._wrapped;\n    if (obj != null) obj = method.apply(obj, arguments);\n    return chainResult(this, obj);\n  };\n});\n\nexport default _;\n","import { VERSION } from './_setup.js';\n\n// If Underscore is called as a function, it returns a wrapped object that can\n// be used OO-style. This wrapper holds altered versions of all functions added\n// through `_.mixin`. Wrapped objects may be chained.\nexport default function _(obj) {\n  if (obj instanceof _) return obj;\n  if (!(this instanceof _)) return new _(obj);\n  this._wrapped = obj;\n}\n\n_.VERSION = VERSION;\n\n// Extracts the result from a wrapped and chained object.\n_.prototype.value = function() {\n  return this._wrapped;\n};\n\n// Provide unwrapping proxies for some methods used in engine operations\n// such as arithmetic and JSON stringification.\n_.prototype.valueOf = _.prototype.toJSON = _.prototype.value;\n\n_.prototype.toString = function() {\n  return String(this._wrapped);\n};\n","import createEscaper from './_createEscaper.js';\nimport unescapeMap from './_unescapeMap.js';\n\n// Function for unescaping strings from HTML interpolation.\nexport default createEscaper(unescapeMap);\n","import restArguments from './restArguments.js';\nimport uniq from './uniq.js';\nimport flatten from './_flatten.js';\n\n// Produce an array that contains the union: each distinct element from all of\n// the passed-in arrays.\nexport default restArguments(function(arrays) {\n  return uniq(flatten(arrays, true, true));\n});\n","import isBoolean from './isBoolean.js';\nimport cb from './_cb.js';\nimport getLength from './_getLength.js';\nimport contains from './contains.js';\n\n// Produce a duplicate-free version of the array. If the array has already\n// been sorted, you have the option of using a faster algorithm.\n// The faster algorithm will not work with an iteratee if the iteratee\n// is not a one-to-one function, so providing an iteratee will disable\n// the faster algorithm.\nexport default function uniq(array, isSorted, iteratee, context) {\n  if (!isBoolean(isSorted)) {\n    context = iteratee;\n    iteratee = isSorted;\n    isSorted = false;\n  }\n  if (iteratee != null) iteratee = cb(iteratee, context);\n  var result = [];\n  var seen = [];\n  for (var i = 0, length = getLength(array); i < length; i++) {\n    var value = array[i],\n        computed = iteratee ? iteratee(value, i, array) : value;\n    if (isSorted && !iteratee) {\n      if (!i || seen !== computed) result.push(value);\n      seen = computed;\n    } else if (iteratee) {\n      if (!contains(seen, computed)) {\n        seen.push(computed);\n        result.push(value);\n      }\n    } else if (!contains(result, value)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n","// Generate a unique integer id (unique within the entire client session).\n// Useful for temporary DOM ids.\nvar idCounter = 0;\nexport default function uniqueId(prefix) {\n  var id = ++idCounter + '';\n  return prefix ? prefix + id : id;\n}\n","import max from './max.js';\nimport getLength from './_getLength.js';\nimport pluck from './pluck.js';\n\n// Complement of zip. Unzip accepts an array of arrays and groups\n// each array's elements on shared indices.\nexport default function unzip(array) {\n  var length = array && max(array, getLength).length || 0;\n  var result = Array(length);\n\n  for (var index = 0; index < length; index++) {\n    result[index] = pluck(array, index);\n  }\n  return result;\n}\n","import keys from './keys.js';\n\n// Retrieve the values of an object's properties.\nexport default function values(obj) {\n  var _keys = keys(obj);\n  var length = _keys.length;\n  var values = Array(length);\n  for (var i = 0; i < length; i++) {\n    values[i] = obj[_keys[i]];\n  }\n  return values;\n}\n","import filter from './filter.js';\nimport matcher from './matcher.js';\n\n// Convenience version of a common use case of `_.filter`: selecting only\n// objects containing specific `key:value` pairs.\nexport default function where(obj, attrs) {\n  return filter(obj, matcher(attrs));\n}\n","import restArguments from './restArguments.js';\nimport difference from './difference.js';\n\n// Return a version of the array that does not contain the specified value(s).\nexport default restArguments(function(array, otherArrays) {\n  return difference(array, otherArrays);\n});\n","import partial from './partial.js';\n\n// Returns the first function passed as an argument to the second,\n// allowing you to adjust arguments, run code before and after, and\n// conditionally execute the original function.\nexport default function wrap(func, wrapper) {\n  return partial(wrapper, func);\n}\n","import restArguments from './restArguments.js';\nimport unzip from './unzip.js';\n\n// Zip together multiple lists into a single array -- elements that share\n// an index go together.\nexport default restArguments(unzip);\n","module.exports = window[\"jQuery\"];","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableRest();\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import _typeof from '@babel/runtime/helpers/esm/typeof';\nimport _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inherits from '@babel/runtime/helpers/esm/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/esm/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/esm/getPrototypeOf';\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport _toArray from '@babel/runtime/helpers/esm/toArray';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar consoleLogger = {\n  type: 'logger',\n  log: function log(args) {\n    this.output('log', args);\n  },\n  warn: function warn(args) {\n    this.output('warn', args);\n  },\n  error: function error(args) {\n    this.output('error', args);\n  },\n  output: function output(type, args) {\n    if (console && console[type]) console[type].apply(console, args);\n  }\n};\n\nvar Logger = function () {\n  function Logger(concreteLogger) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Logger);\n\n    this.init(concreteLogger, options);\n  }\n\n  _createClass(Logger, [{\n    key: \"init\",\n    value: function init(concreteLogger) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this.prefix = options.prefix || 'i18next:';\n      this.logger = concreteLogger || consoleLogger;\n      this.options = options;\n      this.debug = options.debug;\n    }\n  }, {\n    key: \"setDebug\",\n    value: function setDebug(bool) {\n      this.debug = bool;\n    }\n  }, {\n    key: \"log\",\n    value: function log() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return this.forward(args, 'log', '', true);\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return this.forward(args, 'warn', '', true);\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      return this.forward(args, 'error', '');\n    }\n  }, {\n    key: \"deprecate\",\n    value: function deprecate() {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      return this.forward(args, 'warn', 'WARNING DEPRECATED: ', true);\n    }\n  }, {\n    key: \"forward\",\n    value: function forward(args, lvl, prefix, debugOnly) {\n      if (debugOnly && !this.debug) return null;\n      if (typeof args[0] === 'string') args[0] = \"\".concat(prefix).concat(this.prefix, \" \").concat(args[0]);\n      return this.logger[lvl](args);\n    }\n  }, {\n    key: \"create\",\n    value: function create(moduleName) {\n      return new Logger(this.logger, _objectSpread(_objectSpread({}, {\n        prefix: \"\".concat(this.prefix, \":\").concat(moduleName, \":\")\n      }), this.options));\n    }\n  }]);\n\n  return Logger;\n}();\n\nvar baseLogger = new Logger();\n\nvar EventEmitter = function () {\n  function EventEmitter() {\n    _classCallCheck(this, EventEmitter);\n\n    this.observers = {};\n  }\n\n  _createClass(EventEmitter, [{\n    key: \"on\",\n    value: function on(events, listener) {\n      var _this = this;\n\n      events.split(' ').forEach(function (event) {\n        _this.observers[event] = _this.observers[event] || [];\n\n        _this.observers[event].push(listener);\n      });\n      return this;\n    }\n  }, {\n    key: \"off\",\n    value: function off(event, listener) {\n      if (!this.observers[event]) return;\n\n      if (!listener) {\n        delete this.observers[event];\n        return;\n      }\n\n      this.observers[event] = this.observers[event].filter(function (l) {\n        return l !== listener;\n      });\n    }\n  }, {\n    key: \"emit\",\n    value: function emit(event) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      if (this.observers[event]) {\n        var cloned = [].concat(this.observers[event]);\n        cloned.forEach(function (observer) {\n          observer.apply(void 0, args);\n        });\n      }\n\n      if (this.observers['*']) {\n        var _cloned = [].concat(this.observers['*']);\n\n        _cloned.forEach(function (observer) {\n          observer.apply(observer, [event].concat(args));\n        });\n      }\n    }\n  }]);\n\n  return EventEmitter;\n}();\n\nfunction defer() {\n  var res;\n  var rej;\n  var promise = new Promise(function (resolve, reject) {\n    res = resolve;\n    rej = reject;\n  });\n  promise.resolve = res;\n  promise.reject = rej;\n  return promise;\n}\nfunction makeString(object) {\n  if (object == null) return '';\n  return '' + object;\n}\nfunction copy(a, s, t) {\n  a.forEach(function (m) {\n    if (s[m]) t[m] = s[m];\n  });\n}\n\nfunction getLastOfPath(object, path, Empty) {\n  function cleanKey(key) {\n    return key && key.indexOf('###') > -1 ? key.replace(/###/g, '.') : key;\n  }\n\n  function canNotTraverseDeeper() {\n    return !object || typeof object === 'string';\n  }\n\n  var stack = typeof path !== 'string' ? [].concat(path) : path.split('.');\n\n  while (stack.length > 1) {\n    if (canNotTraverseDeeper()) return {};\n    var key = cleanKey(stack.shift());\n    if (!object[key] && Empty) object[key] = new Empty();\n\n    if (Object.prototype.hasOwnProperty.call(object, key)) {\n      object = object[key];\n    } else {\n      object = {};\n    }\n  }\n\n  if (canNotTraverseDeeper()) return {};\n  return {\n    obj: object,\n    k: cleanKey(stack.shift())\n  };\n}\n\nfunction setPath(object, path, newValue) {\n  var _getLastOfPath = getLastOfPath(object, path, Object),\n      obj = _getLastOfPath.obj,\n      k = _getLastOfPath.k;\n\n  obj[k] = newValue;\n}\nfunction pushPath(object, path, newValue, concat) {\n  var _getLastOfPath2 = getLastOfPath(object, path, Object),\n      obj = _getLastOfPath2.obj,\n      k = _getLastOfPath2.k;\n\n  obj[k] = obj[k] || [];\n  if (concat) obj[k] = obj[k].concat(newValue);\n  if (!concat) obj[k].push(newValue);\n}\nfunction getPath(object, path) {\n  var _getLastOfPath3 = getLastOfPath(object, path),\n      obj = _getLastOfPath3.obj,\n      k = _getLastOfPath3.k;\n\n  if (!obj) return undefined;\n  return obj[k];\n}\nfunction getPathWithDefaults(data, defaultData, key) {\n  var value = getPath(data, key);\n\n  if (value !== undefined) {\n    return value;\n  }\n\n  return getPath(defaultData, key);\n}\nfunction deepExtend(target, source, overwrite) {\n  for (var prop in source) {\n    if (prop !== '__proto__' && prop !== 'constructor') {\n      if (prop in target) {\n        if (typeof target[prop] === 'string' || target[prop] instanceof String || typeof source[prop] === 'string' || source[prop] instanceof String) {\n          if (overwrite) target[prop] = source[prop];\n        } else {\n          deepExtend(target[prop], source[prop], overwrite);\n        }\n      } else {\n        target[prop] = source[prop];\n      }\n    }\n  }\n\n  return target;\n}\nfunction regexEscape(str) {\n  return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n}\nvar _entityMap = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n  '/': '&#x2F;'\n};\nfunction escape(data) {\n  if (typeof data === 'string') {\n    return data.replace(/[&<>\"'\\/]/g, function (s) {\n      return _entityMap[s];\n    });\n  }\n\n  return data;\n}\nvar isIE10 = typeof window !== 'undefined' && window.navigator && typeof window.navigator.userAgentData === 'undefined' && window.navigator.userAgent && window.navigator.userAgent.indexOf('MSIE') > -1;\nvar chars = [' ', ',', '?', '!', ';'];\nfunction looksLikeObjectPath(key, nsSeparator, keySeparator) {\n  nsSeparator = nsSeparator || '';\n  keySeparator = keySeparator || '';\n  var possibleChars = chars.filter(function (c) {\n    return nsSeparator.indexOf(c) < 0 && keySeparator.indexOf(c) < 0;\n  });\n  if (possibleChars.length === 0) return true;\n  var r = new RegExp(\"(\".concat(possibleChars.map(function (c) {\n    return c === '?' ? '\\\\?' : c;\n  }).join('|'), \")\"));\n  var matched = !r.test(key);\n\n  if (!matched) {\n    var ki = key.indexOf(keySeparator);\n\n    if (ki > 0 && !r.test(key.substring(0, ki))) {\n      matched = true;\n    }\n  }\n\n  return matched;\n}\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$1(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction deepFind(obj, path) {\n  var keySeparator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '.';\n  if (!obj) return undefined;\n  if (obj[path]) return obj[path];\n  var paths = path.split(keySeparator);\n  var current = obj;\n\n  for (var i = 0; i < paths.length; ++i) {\n    if (!current) return undefined;\n\n    if (typeof current[paths[i]] === 'string' && i + 1 < paths.length) {\n      return undefined;\n    }\n\n    if (current[paths[i]] === undefined) {\n      var j = 2;\n      var p = paths.slice(i, i + j).join(keySeparator);\n      var mix = current[p];\n\n      while (mix === undefined && paths.length > i + j) {\n        j++;\n        p = paths.slice(i, i + j).join(keySeparator);\n        mix = current[p];\n      }\n\n      if (mix === undefined) return undefined;\n      if (mix === null) return null;\n\n      if (path.endsWith(p)) {\n        if (typeof mix === 'string') return mix;\n        if (p && typeof mix[p] === 'string') return mix[p];\n      }\n\n      var joinedPath = paths.slice(i + j).join(keySeparator);\n      if (joinedPath) return deepFind(mix, joinedPath, keySeparator);\n      return undefined;\n    }\n\n    current = current[paths[i]];\n  }\n\n  return current;\n}\n\nvar ResourceStore = function (_EventEmitter) {\n  _inherits(ResourceStore, _EventEmitter);\n\n  var _super = _createSuper(ResourceStore);\n\n  function ResourceStore(data) {\n    var _this;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      ns: ['translation'],\n      defaultNS: 'translation'\n    };\n\n    _classCallCheck(this, ResourceStore);\n\n    _this = _super.call(this);\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n\n    _this.data = data || {};\n    _this.options = options;\n\n    if (_this.options.keySeparator === undefined) {\n      _this.options.keySeparator = '.';\n    }\n\n    if (_this.options.ignoreJSONStructure === undefined) {\n      _this.options.ignoreJSONStructure = true;\n    }\n\n    return _this;\n  }\n\n  _createClass(ResourceStore, [{\n    key: \"addNamespaces\",\n    value: function addNamespaces(ns) {\n      if (this.options.ns.indexOf(ns) < 0) {\n        this.options.ns.push(ns);\n      }\n    }\n  }, {\n    key: \"removeNamespaces\",\n    value: function removeNamespaces(ns) {\n      var index = this.options.ns.indexOf(ns);\n\n      if (index > -1) {\n        this.options.ns.splice(index, 1);\n      }\n    }\n  }, {\n    key: \"getResource\",\n    value: function getResource(lng, ns, key) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var ignoreJSONStructure = options.ignoreJSONStructure !== undefined ? options.ignoreJSONStructure : this.options.ignoreJSONStructure;\n      var path = [lng, ns];\n      if (key && typeof key !== 'string') path = path.concat(key);\n      if (key && typeof key === 'string') path = path.concat(keySeparator ? key.split(keySeparator) : key);\n\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n      }\n\n      var result = getPath(this.data, path);\n      if (result || !ignoreJSONStructure || typeof key !== 'string') return result;\n      return deepFind(this.data && this.data[lng] && this.data[lng][ns], key, keySeparator);\n    }\n  }, {\n    key: \"addResource\",\n    value: function addResource(lng, ns, key, value) {\n      var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {\n        silent: false\n      };\n      var keySeparator = this.options.keySeparator;\n      if (keySeparator === undefined) keySeparator = '.';\n      var path = [lng, ns];\n      if (key) path = path.concat(keySeparator ? key.split(keySeparator) : key);\n\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n        value = ns;\n        ns = path[1];\n      }\n\n      this.addNamespaces(ns);\n      setPath(this.data, path, value);\n      if (!options.silent) this.emit('added', lng, ns, key, value);\n    }\n  }, {\n    key: \"addResources\",\n    value: function addResources(lng, ns, resources) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {\n        silent: false\n      };\n\n      for (var m in resources) {\n        if (typeof resources[m] === 'string' || Object.prototype.toString.apply(resources[m]) === '[object Array]') this.addResource(lng, ns, m, resources[m], {\n          silent: true\n        });\n      }\n\n      if (!options.silent) this.emit('added', lng, ns, resources);\n    }\n  }, {\n    key: \"addResourceBundle\",\n    value: function addResourceBundle(lng, ns, resources, deep, overwrite) {\n      var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {\n        silent: false\n      };\n      var path = [lng, ns];\n\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n        deep = resources;\n        resources = ns;\n        ns = path[1];\n      }\n\n      this.addNamespaces(ns);\n      var pack = getPath(this.data, path) || {};\n\n      if (deep) {\n        deepExtend(pack, resources, overwrite);\n      } else {\n        pack = _objectSpread$1(_objectSpread$1({}, pack), resources);\n      }\n\n      setPath(this.data, path, pack);\n      if (!options.silent) this.emit('added', lng, ns, resources);\n    }\n  }, {\n    key: \"removeResourceBundle\",\n    value: function removeResourceBundle(lng, ns) {\n      if (this.hasResourceBundle(lng, ns)) {\n        delete this.data[lng][ns];\n      }\n\n      this.removeNamespaces(ns);\n      this.emit('removed', lng, ns);\n    }\n  }, {\n    key: \"hasResourceBundle\",\n    value: function hasResourceBundle(lng, ns) {\n      return this.getResource(lng, ns) !== undefined;\n    }\n  }, {\n    key: \"getResourceBundle\",\n    value: function getResourceBundle(lng, ns) {\n      if (!ns) ns = this.options.defaultNS;\n      if (this.options.compatibilityAPI === 'v1') return _objectSpread$1(_objectSpread$1({}, {}), this.getResource(lng, ns));\n      return this.getResource(lng, ns);\n    }\n  }, {\n    key: \"getDataByLanguage\",\n    value: function getDataByLanguage(lng) {\n      return this.data[lng];\n    }\n  }, {\n    key: \"hasLanguageSomeTranslations\",\n    value: function hasLanguageSomeTranslations(lng) {\n      var data = this.getDataByLanguage(lng);\n      var n = data && Object.keys(data) || [];\n      return !!n.find(function (v) {\n        return data[v] && Object.keys(data[v]).length > 0;\n      });\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return this.data;\n    }\n  }]);\n\n  return ResourceStore;\n}(EventEmitter);\n\nvar postProcessor = {\n  processors: {},\n  addPostProcessor: function addPostProcessor(module) {\n    this.processors[module.name] = module;\n  },\n  handle: function handle(processors, value, key, options, translator) {\n    var _this = this;\n\n    processors.forEach(function (processor) {\n      if (_this.processors[processor]) value = _this.processors[processor].process(value, key, options, translator);\n    });\n    return value;\n  }\n};\n\nfunction ownKeys$2(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$2(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$2(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$2(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper$1(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$1(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$1() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar checkedLoadedFor = {};\n\nvar Translator = function (_EventEmitter) {\n  _inherits(Translator, _EventEmitter);\n\n  var _super = _createSuper$1(Translator);\n\n  function Translator(services) {\n    var _this;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Translator);\n\n    _this = _super.call(this);\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n\n    copy(['resourceStore', 'languageUtils', 'pluralResolver', 'interpolator', 'backendConnector', 'i18nFormat', 'utils'], services, _assertThisInitialized(_this));\n    _this.options = options;\n\n    if (_this.options.keySeparator === undefined) {\n      _this.options.keySeparator = '.';\n    }\n\n    _this.logger = baseLogger.create('translator');\n    return _this;\n  }\n\n  _createClass(Translator, [{\n    key: \"changeLanguage\",\n    value: function changeLanguage(lng) {\n      if (lng) this.language = lng;\n    }\n  }, {\n    key: \"exists\",\n    value: function exists(key) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        interpolation: {}\n      };\n\n      if (key === undefined || key === null) {\n        return false;\n      }\n\n      var resolved = this.resolve(key, options);\n      return resolved && resolved.res !== undefined;\n    }\n  }, {\n    key: \"extractFromKey\",\n    value: function extractFromKey(key, options) {\n      var nsSeparator = options.nsSeparator !== undefined ? options.nsSeparator : this.options.nsSeparator;\n      if (nsSeparator === undefined) nsSeparator = ':';\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var namespaces = options.ns || this.options.defaultNS || [];\n      var wouldCheckForNsInKey = nsSeparator && key.indexOf(nsSeparator) > -1;\n      var seemsNaturalLanguage = !this.options.userDefinedKeySeparator && !options.keySeparator && !this.options.userDefinedNsSeparator && !options.nsSeparator && !looksLikeObjectPath(key, nsSeparator, keySeparator);\n\n      if (wouldCheckForNsInKey && !seemsNaturalLanguage) {\n        var m = key.match(this.interpolator.nestingRegexp);\n\n        if (m && m.length > 0) {\n          return {\n            key: key,\n            namespaces: namespaces\n          };\n        }\n\n        var parts = key.split(nsSeparator);\n        if (nsSeparator !== keySeparator || nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1) namespaces = parts.shift();\n        key = parts.join(keySeparator);\n      }\n\n      if (typeof namespaces === 'string') namespaces = [namespaces];\n      return {\n        key: key,\n        namespaces: namespaces\n      };\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(keys, options, lastKey) {\n      var _this2 = this;\n\n      if (_typeof(options) !== 'object' && this.options.overloadTranslationOptionHandler) {\n        options = this.options.overloadTranslationOptionHandler(arguments);\n      }\n\n      if (!options) options = {};\n      if (keys === undefined || keys === null) return '';\n      if (!Array.isArray(keys)) keys = [String(keys)];\n      var returnDetails = options.returnDetails !== undefined ? options.returnDetails : this.options.returnDetails;\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n\n      var _this$extractFromKey = this.extractFromKey(keys[keys.length - 1], options),\n          key = _this$extractFromKey.key,\n          namespaces = _this$extractFromKey.namespaces;\n\n      var namespace = namespaces[namespaces.length - 1];\n      var lng = options.lng || this.language;\n      var appendNamespaceToCIMode = options.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;\n\n      if (lng && lng.toLowerCase() === 'cimode') {\n        if (appendNamespaceToCIMode) {\n          var nsSeparator = options.nsSeparator || this.options.nsSeparator;\n\n          if (returnDetails) {\n            resolved.res = \"\".concat(namespace).concat(nsSeparator).concat(key);\n            return resolved;\n          }\n\n          return \"\".concat(namespace).concat(nsSeparator).concat(key);\n        }\n\n        if (returnDetails) {\n          resolved.res = key;\n          return resolved;\n        }\n\n        return key;\n      }\n\n      var resolved = this.resolve(keys, options);\n      var res = resolved && resolved.res;\n      var resUsedKey = resolved && resolved.usedKey || key;\n      var resExactUsedKey = resolved && resolved.exactUsedKey || key;\n      var resType = Object.prototype.toString.apply(res);\n      var noObject = ['[object Number]', '[object Function]', '[object RegExp]'];\n      var joinArrays = options.joinArrays !== undefined ? options.joinArrays : this.options.joinArrays;\n      var handleAsObjectInI18nFormat = !this.i18nFormat || this.i18nFormat.handleAsObject;\n      var handleAsObject = typeof res !== 'string' && typeof res !== 'boolean' && typeof res !== 'number';\n\n      if (handleAsObjectInI18nFormat && res && handleAsObject && noObject.indexOf(resType) < 0 && !(typeof joinArrays === 'string' && resType === '[object Array]')) {\n        if (!options.returnObjects && !this.options.returnObjects) {\n          if (!this.options.returnedObjectHandler) {\n            this.logger.warn('accessing an object - but returnObjects options is not enabled!');\n          }\n\n          var r = this.options.returnedObjectHandler ? this.options.returnedObjectHandler(resUsedKey, res, _objectSpread$2(_objectSpread$2({}, options), {}, {\n            ns: namespaces\n          })) : \"key '\".concat(key, \" (\").concat(this.language, \")' returned an object instead of string.\");\n\n          if (returnDetails) {\n            resolved.res = r;\n            return resolved;\n          }\n\n          return r;\n        }\n\n        if (keySeparator) {\n          var resTypeIsArray = resType === '[object Array]';\n          var copy = resTypeIsArray ? [] : {};\n          var newKeyToUse = resTypeIsArray ? resExactUsedKey : resUsedKey;\n\n          for (var m in res) {\n            if (Object.prototype.hasOwnProperty.call(res, m)) {\n              var deepKey = \"\".concat(newKeyToUse).concat(keySeparator).concat(m);\n              copy[m] = this.translate(deepKey, _objectSpread$2(_objectSpread$2({}, options), {\n                joinArrays: false,\n                ns: namespaces\n              }));\n              if (copy[m] === deepKey) copy[m] = res[m];\n            }\n          }\n\n          res = copy;\n        }\n      } else if (handleAsObjectInI18nFormat && typeof joinArrays === 'string' && resType === '[object Array]') {\n        res = res.join(joinArrays);\n        if (res) res = this.extendTranslation(res, keys, options, lastKey);\n      } else {\n        var usedDefault = false;\n        var usedKey = false;\n        var needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n        var hasDefaultValue = Translator.hasDefaultValue(options);\n        var defaultValueSuffix = needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, options) : '';\n        var defaultValue = options[\"defaultValue\".concat(defaultValueSuffix)] || options.defaultValue;\n\n        if (!this.isValidLookup(res) && hasDefaultValue) {\n          usedDefault = true;\n          res = defaultValue;\n        }\n\n        if (!this.isValidLookup(res)) {\n          usedKey = true;\n          res = key;\n        }\n\n        var missingKeyNoValueFallbackToKey = options.missingKeyNoValueFallbackToKey || this.options.missingKeyNoValueFallbackToKey;\n        var resForMissing = missingKeyNoValueFallbackToKey && usedKey ? undefined : res;\n        var updateMissing = hasDefaultValue && defaultValue !== res && this.options.updateMissing;\n\n        if (usedKey || usedDefault || updateMissing) {\n          this.logger.log(updateMissing ? 'updateKey' : 'missingKey', lng, namespace, key, updateMissing ? defaultValue : res);\n\n          if (keySeparator) {\n            var fk = this.resolve(key, _objectSpread$2(_objectSpread$2({}, options), {}, {\n              keySeparator: false\n            }));\n            if (fk && fk.res) this.logger.warn('Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.');\n          }\n\n          var lngs = [];\n          var fallbackLngs = this.languageUtils.getFallbackCodes(this.options.fallbackLng, options.lng || this.language);\n\n          if (this.options.saveMissingTo === 'fallback' && fallbackLngs && fallbackLngs[0]) {\n            for (var i = 0; i < fallbackLngs.length; i++) {\n              lngs.push(fallbackLngs[i]);\n            }\n          } else if (this.options.saveMissingTo === 'all') {\n            lngs = this.languageUtils.toResolveHierarchy(options.lng || this.language);\n          } else {\n            lngs.push(options.lng || this.language);\n          }\n\n          var send = function send(l, k, specificDefaultValue) {\n            var defaultForMissing = hasDefaultValue && specificDefaultValue !== res ? specificDefaultValue : resForMissing;\n\n            if (_this2.options.missingKeyHandler) {\n              _this2.options.missingKeyHandler(l, namespace, k, defaultForMissing, updateMissing, options);\n            } else if (_this2.backendConnector && _this2.backendConnector.saveMissing) {\n              _this2.backendConnector.saveMissing(l, namespace, k, defaultForMissing, updateMissing, options);\n            }\n\n            _this2.emit('missingKey', l, namespace, k, res);\n          };\n\n          if (this.options.saveMissing) {\n            if (this.options.saveMissingPlurals && needsPluralHandling) {\n              lngs.forEach(function (language) {\n                _this2.pluralResolver.getSuffixes(language, options).forEach(function (suffix) {\n                  send([language], key + suffix, options[\"defaultValue\".concat(suffix)] || defaultValue);\n                });\n              });\n            } else {\n              send(lngs, key, defaultValue);\n            }\n          }\n        }\n\n        res = this.extendTranslation(res, keys, options, resolved, lastKey);\n        if (usedKey && res === key && this.options.appendNamespaceToMissingKey) res = \"\".concat(namespace, \":\").concat(key);\n\n        if ((usedKey || usedDefault) && this.options.parseMissingKeyHandler) {\n          if (this.options.compatibilityAPI !== 'v1') {\n            res = this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey ? \"\".concat(namespace, \":\").concat(key) : key, usedDefault ? res : undefined);\n          } else {\n            res = this.options.parseMissingKeyHandler(res);\n          }\n        }\n      }\n\n      if (returnDetails) {\n        resolved.res = res;\n        return resolved;\n      }\n\n      return res;\n    }\n  }, {\n    key: \"extendTranslation\",\n    value: function extendTranslation(res, key, options, resolved, lastKey) {\n      var _this3 = this;\n\n      if (this.i18nFormat && this.i18nFormat.parse) {\n        res = this.i18nFormat.parse(res, _objectSpread$2(_objectSpread$2({}, this.options.interpolation.defaultVariables), options), resolved.usedLng, resolved.usedNS, resolved.usedKey, {\n          resolved: resolved\n        });\n      } else if (!options.skipInterpolation) {\n        if (options.interpolation) this.interpolator.init(_objectSpread$2(_objectSpread$2({}, options), {\n          interpolation: _objectSpread$2(_objectSpread$2({}, this.options.interpolation), options.interpolation)\n        }));\n        var skipOnVariables = typeof res === 'string' && (options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables);\n        var nestBef;\n\n        if (skipOnVariables) {\n          var nb = res.match(this.interpolator.nestingRegexp);\n          nestBef = nb && nb.length;\n        }\n\n        var data = options.replace && typeof options.replace !== 'string' ? options.replace : options;\n        if (this.options.interpolation.defaultVariables) data = _objectSpread$2(_objectSpread$2({}, this.options.interpolation.defaultVariables), data);\n        res = this.interpolator.interpolate(res, data, options.lng || this.language, options);\n\n        if (skipOnVariables) {\n          var na = res.match(this.interpolator.nestingRegexp);\n          var nestAft = na && na.length;\n          if (nestBef < nestAft) options.nest = false;\n        }\n\n        if (options.nest !== false) res = this.interpolator.nest(res, function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          if (lastKey && lastKey[0] === args[0] && !options.context) {\n            _this3.logger.warn(\"It seems you are nesting recursively key: \".concat(args[0], \" in key: \").concat(key[0]));\n\n            return null;\n          }\n\n          return _this3.translate.apply(_this3, args.concat([key]));\n        }, options);\n        if (options.interpolation) this.interpolator.reset();\n      }\n\n      var postProcess = options.postProcess || this.options.postProcess;\n      var postProcessorNames = typeof postProcess === 'string' ? [postProcess] : postProcess;\n\n      if (res !== undefined && res !== null && postProcessorNames && postProcessorNames.length && options.applyPostProcessor !== false) {\n        res = postProcessor.handle(postProcessorNames, res, key, this.options && this.options.postProcessPassResolved ? _objectSpread$2({\n          i18nResolved: resolved\n        }, options) : options, this);\n      }\n\n      return res;\n    }\n  }, {\n    key: \"resolve\",\n    value: function resolve(keys) {\n      var _this4 = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var found;\n      var usedKey;\n      var exactUsedKey;\n      var usedLng;\n      var usedNS;\n      if (typeof keys === 'string') keys = [keys];\n      keys.forEach(function (k) {\n        if (_this4.isValidLookup(found)) return;\n\n        var extracted = _this4.extractFromKey(k, options);\n\n        var key = extracted.key;\n        usedKey = key;\n        var namespaces = extracted.namespaces;\n        if (_this4.options.fallbackNS) namespaces = namespaces.concat(_this4.options.fallbackNS);\n        var needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n\n        var needsZeroSuffixLookup = needsPluralHandling && !options.ordinal && options.count === 0 && _this4.pluralResolver.shouldUseIntlApi();\n\n        var needsContextHandling = options.context !== undefined && (typeof options.context === 'string' || typeof options.context === 'number') && options.context !== '';\n        var codes = options.lngs ? options.lngs : _this4.languageUtils.toResolveHierarchy(options.lng || _this4.language, options.fallbackLng);\n        namespaces.forEach(function (ns) {\n          if (_this4.isValidLookup(found)) return;\n          usedNS = ns;\n\n          if (!checkedLoadedFor[\"\".concat(codes[0], \"-\").concat(ns)] && _this4.utils && _this4.utils.hasLoadedNamespace && !_this4.utils.hasLoadedNamespace(usedNS)) {\n            checkedLoadedFor[\"\".concat(codes[0], \"-\").concat(ns)] = true;\n\n            _this4.logger.warn(\"key \\\"\".concat(usedKey, \"\\\" for languages \\\"\").concat(codes.join(', '), \"\\\" won't get resolved as namespace \\\"\").concat(usedNS, \"\\\" was not yet loaded\"), 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n          }\n\n          codes.forEach(function (code) {\n            if (_this4.isValidLookup(found)) return;\n            usedLng = code;\n            var finalKeys = [key];\n\n            if (_this4.i18nFormat && _this4.i18nFormat.addLookupKeys) {\n              _this4.i18nFormat.addLookupKeys(finalKeys, key, code, ns, options);\n            } else {\n              var pluralSuffix;\n              if (needsPluralHandling) pluralSuffix = _this4.pluralResolver.getSuffix(code, options.count, options);\n              var zeroSuffix = \"\".concat(_this4.options.pluralSeparator, \"zero\");\n\n              if (needsPluralHandling) {\n                finalKeys.push(key + pluralSuffix);\n\n                if (needsZeroSuffixLookup) {\n                  finalKeys.push(key + zeroSuffix);\n                }\n              }\n\n              if (needsContextHandling) {\n                var contextKey = \"\".concat(key).concat(_this4.options.contextSeparator).concat(options.context);\n                finalKeys.push(contextKey);\n\n                if (needsPluralHandling) {\n                  finalKeys.push(contextKey + pluralSuffix);\n\n                  if (needsZeroSuffixLookup) {\n                    finalKeys.push(contextKey + zeroSuffix);\n                  }\n                }\n              }\n            }\n\n            var possibleKey;\n\n            while (possibleKey = finalKeys.pop()) {\n              if (!_this4.isValidLookup(found)) {\n                exactUsedKey = possibleKey;\n                found = _this4.getResource(code, ns, possibleKey, options);\n              }\n            }\n          });\n        });\n      });\n      return {\n        res: found,\n        usedKey: usedKey,\n        exactUsedKey: exactUsedKey,\n        usedLng: usedLng,\n        usedNS: usedNS\n      };\n    }\n  }, {\n    key: \"isValidLookup\",\n    value: function isValidLookup(res) {\n      return res !== undefined && !(!this.options.returnNull && res === null) && !(!this.options.returnEmptyString && res === '');\n    }\n  }, {\n    key: \"getResource\",\n    value: function getResource(code, ns, key) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      if (this.i18nFormat && this.i18nFormat.getResource) return this.i18nFormat.getResource(code, ns, key, options);\n      return this.resourceStore.getResource(code, ns, key, options);\n    }\n  }], [{\n    key: \"hasDefaultValue\",\n    value: function hasDefaultValue(options) {\n      var prefix = 'defaultValue';\n\n      for (var option in options) {\n        if (Object.prototype.hasOwnProperty.call(options, option) && prefix === option.substring(0, prefix.length) && undefined !== options[option]) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }]);\n\n  return Translator;\n}(EventEmitter);\n\nfunction capitalize(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nvar LanguageUtil = function () {\n  function LanguageUtil(options) {\n    _classCallCheck(this, LanguageUtil);\n\n    this.options = options;\n    this.supportedLngs = this.options.supportedLngs || false;\n    this.logger = baseLogger.create('languageUtils');\n  }\n\n  _createClass(LanguageUtil, [{\n    key: \"getScriptPartFromCode\",\n    value: function getScriptPartFromCode(code) {\n      if (!code || code.indexOf('-') < 0) return null;\n      var p = code.split('-');\n      if (p.length === 2) return null;\n      p.pop();\n      if (p[p.length - 1].toLowerCase() === 'x') return null;\n      return this.formatLanguageCode(p.join('-'));\n    }\n  }, {\n    key: \"getLanguagePartFromCode\",\n    value: function getLanguagePartFromCode(code) {\n      if (!code || code.indexOf('-') < 0) return code;\n      var p = code.split('-');\n      return this.formatLanguageCode(p[0]);\n    }\n  }, {\n    key: \"formatLanguageCode\",\n    value: function formatLanguageCode(code) {\n      if (typeof code === 'string' && code.indexOf('-') > -1) {\n        var specialCases = ['hans', 'hant', 'latn', 'cyrl', 'cans', 'mong', 'arab'];\n        var p = code.split('-');\n\n        if (this.options.lowerCaseLng) {\n          p = p.map(function (part) {\n            return part.toLowerCase();\n          });\n        } else if (p.length === 2) {\n          p[0] = p[0].toLowerCase();\n          p[1] = p[1].toUpperCase();\n          if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n        } else if (p.length === 3) {\n          p[0] = p[0].toLowerCase();\n          if (p[1].length === 2) p[1] = p[1].toUpperCase();\n          if (p[0] !== 'sgn' && p[2].length === 2) p[2] = p[2].toUpperCase();\n          if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n          if (specialCases.indexOf(p[2].toLowerCase()) > -1) p[2] = capitalize(p[2].toLowerCase());\n        }\n\n        return p.join('-');\n      }\n\n      return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;\n    }\n  }, {\n    key: \"isSupportedCode\",\n    value: function isSupportedCode(code) {\n      if (this.options.load === 'languageOnly' || this.options.nonExplicitSupportedLngs) {\n        code = this.getLanguagePartFromCode(code);\n      }\n\n      return !this.supportedLngs || !this.supportedLngs.length || this.supportedLngs.indexOf(code) > -1;\n    }\n  }, {\n    key: \"getBestMatchFromCodes\",\n    value: function getBestMatchFromCodes(codes) {\n      var _this = this;\n\n      if (!codes) return null;\n      var found;\n      codes.forEach(function (code) {\n        if (found) return;\n\n        var cleanedLng = _this.formatLanguageCode(code);\n\n        if (!_this.options.supportedLngs || _this.isSupportedCode(cleanedLng)) found = cleanedLng;\n      });\n\n      if (!found && this.options.supportedLngs) {\n        codes.forEach(function (code) {\n          if (found) return;\n\n          var lngOnly = _this.getLanguagePartFromCode(code);\n\n          if (_this.isSupportedCode(lngOnly)) return found = lngOnly;\n          found = _this.options.supportedLngs.find(function (supportedLng) {\n            if (supportedLng.indexOf(lngOnly) === 0) return supportedLng;\n          });\n        });\n      }\n\n      if (!found) found = this.getFallbackCodes(this.options.fallbackLng)[0];\n      return found;\n    }\n  }, {\n    key: \"getFallbackCodes\",\n    value: function getFallbackCodes(fallbacks, code) {\n      if (!fallbacks) return [];\n      if (typeof fallbacks === 'function') fallbacks = fallbacks(code);\n      if (typeof fallbacks === 'string') fallbacks = [fallbacks];\n      if (Object.prototype.toString.apply(fallbacks) === '[object Array]') return fallbacks;\n      if (!code) return fallbacks[\"default\"] || [];\n      var found = fallbacks[code];\n      if (!found) found = fallbacks[this.getScriptPartFromCode(code)];\n      if (!found) found = fallbacks[this.formatLanguageCode(code)];\n      if (!found) found = fallbacks[this.getLanguagePartFromCode(code)];\n      if (!found) found = fallbacks[\"default\"];\n      return found || [];\n    }\n  }, {\n    key: \"toResolveHierarchy\",\n    value: function toResolveHierarchy(code, fallbackCode) {\n      var _this2 = this;\n\n      var fallbackCodes = this.getFallbackCodes(fallbackCode || this.options.fallbackLng || [], code);\n      var codes = [];\n\n      var addCode = function addCode(c) {\n        if (!c) return;\n\n        if (_this2.isSupportedCode(c)) {\n          codes.push(c);\n        } else {\n          _this2.logger.warn(\"rejecting language code not found in supportedLngs: \".concat(c));\n        }\n      };\n\n      if (typeof code === 'string' && code.indexOf('-') > -1) {\n        if (this.options.load !== 'languageOnly') addCode(this.formatLanguageCode(code));\n        if (this.options.load !== 'languageOnly' && this.options.load !== 'currentOnly') addCode(this.getScriptPartFromCode(code));\n        if (this.options.load !== 'currentOnly') addCode(this.getLanguagePartFromCode(code));\n      } else if (typeof code === 'string') {\n        addCode(this.formatLanguageCode(code));\n      }\n\n      fallbackCodes.forEach(function (fc) {\n        if (codes.indexOf(fc) < 0) addCode(_this2.formatLanguageCode(fc));\n      });\n      return codes;\n    }\n  }]);\n\n  return LanguageUtil;\n}();\n\nvar sets = [{\n  lngs: ['ach', 'ak', 'am', 'arn', 'br', 'fil', 'gun', 'ln', 'mfe', 'mg', 'mi', 'oc', 'pt', 'pt-BR', 'tg', 'tl', 'ti', 'tr', 'uz', 'wa'],\n  nr: [1, 2],\n  fc: 1\n}, {\n  lngs: ['af', 'an', 'ast', 'az', 'bg', 'bn', 'ca', 'da', 'de', 'dev', 'el', 'en', 'eo', 'es', 'et', 'eu', 'fi', 'fo', 'fur', 'fy', 'gl', 'gu', 'ha', 'hi', 'hu', 'hy', 'ia', 'it', 'kk', 'kn', 'ku', 'lb', 'mai', 'ml', 'mn', 'mr', 'nah', 'nap', 'nb', 'ne', 'nl', 'nn', 'no', 'nso', 'pa', 'pap', 'pms', 'ps', 'pt-PT', 'rm', 'sco', 'se', 'si', 'so', 'son', 'sq', 'sv', 'sw', 'ta', 'te', 'tk', 'ur', 'yo'],\n  nr: [1, 2],\n  fc: 2\n}, {\n  lngs: ['ay', 'bo', 'cgg', 'fa', 'ht', 'id', 'ja', 'jbo', 'ka', 'km', 'ko', 'ky', 'lo', 'ms', 'sah', 'su', 'th', 'tt', 'ug', 'vi', 'wo', 'zh'],\n  nr: [1],\n  fc: 3\n}, {\n  lngs: ['be', 'bs', 'cnr', 'dz', 'hr', 'ru', 'sr', 'uk'],\n  nr: [1, 2, 5],\n  fc: 4\n}, {\n  lngs: ['ar'],\n  nr: [0, 1, 2, 3, 11, 100],\n  fc: 5\n}, {\n  lngs: ['cs', 'sk'],\n  nr: [1, 2, 5],\n  fc: 6\n}, {\n  lngs: ['csb', 'pl'],\n  nr: [1, 2, 5],\n  fc: 7\n}, {\n  lngs: ['cy'],\n  nr: [1, 2, 3, 8],\n  fc: 8\n}, {\n  lngs: ['fr'],\n  nr: [1, 2],\n  fc: 9\n}, {\n  lngs: ['ga'],\n  nr: [1, 2, 3, 7, 11],\n  fc: 10\n}, {\n  lngs: ['gd'],\n  nr: [1, 2, 3, 20],\n  fc: 11\n}, {\n  lngs: ['is'],\n  nr: [1, 2],\n  fc: 12\n}, {\n  lngs: ['jv'],\n  nr: [0, 1],\n  fc: 13\n}, {\n  lngs: ['kw'],\n  nr: [1, 2, 3, 4],\n  fc: 14\n}, {\n  lngs: ['lt'],\n  nr: [1, 2, 10],\n  fc: 15\n}, {\n  lngs: ['lv'],\n  nr: [1, 2, 0],\n  fc: 16\n}, {\n  lngs: ['mk'],\n  nr: [1, 2],\n  fc: 17\n}, {\n  lngs: ['mnk'],\n  nr: [0, 1, 2],\n  fc: 18\n}, {\n  lngs: ['mt'],\n  nr: [1, 2, 11, 20],\n  fc: 19\n}, {\n  lngs: ['or'],\n  nr: [2, 1],\n  fc: 2\n}, {\n  lngs: ['ro'],\n  nr: [1, 2, 20],\n  fc: 20\n}, {\n  lngs: ['sl'],\n  nr: [5, 1, 2, 3],\n  fc: 21\n}, {\n  lngs: ['he', 'iw'],\n  nr: [1, 2, 20, 21],\n  fc: 22\n}];\nvar _rulesPluralsTypes = {\n  1: function _(n) {\n    return Number(n > 1);\n  },\n  2: function _(n) {\n    return Number(n != 1);\n  },\n  3: function _(n) {\n    return 0;\n  },\n  4: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  5: function _(n) {\n    return Number(n == 0 ? 0 : n == 1 ? 1 : n == 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5);\n  },\n  6: function _(n) {\n    return Number(n == 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2);\n  },\n  7: function _(n) {\n    return Number(n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  8: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n != 8 && n != 11 ? 2 : 3);\n  },\n  9: function _(n) {\n    return Number(n >= 2);\n  },\n  10: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4);\n  },\n  11: function _(n) {\n    return Number(n == 1 || n == 11 ? 0 : n == 2 || n == 12 ? 1 : n > 2 && n < 20 ? 2 : 3);\n  },\n  12: function _(n) {\n    return Number(n % 10 != 1 || n % 100 == 11);\n  },\n  13: function _(n) {\n    return Number(n !== 0);\n  },\n  14: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n == 3 ? 2 : 3);\n  },\n  15: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  16: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n !== 0 ? 1 : 2);\n  },\n  17: function _(n) {\n    return Number(n == 1 || n % 10 == 1 && n % 100 != 11 ? 0 : 1);\n  },\n  18: function _(n) {\n    return Number(n == 0 ? 0 : n == 1 ? 1 : 2);\n  },\n  19: function _(n) {\n    return Number(n == 1 ? 0 : n == 0 || n % 100 > 1 && n % 100 < 11 ? 1 : n % 100 > 10 && n % 100 < 20 ? 2 : 3);\n  },\n  20: function _(n) {\n    return Number(n == 1 ? 0 : n == 0 || n % 100 > 0 && n % 100 < 20 ? 1 : 2);\n  },\n  21: function _(n) {\n    return Number(n % 100 == 1 ? 1 : n % 100 == 2 ? 2 : n % 100 == 3 || n % 100 == 4 ? 3 : 0);\n  },\n  22: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : (n < 0 || n > 10) && n % 10 == 0 ? 2 : 3);\n  }\n};\nvar deprecatedJsonVersions = ['v1', 'v2', 'v3'];\nvar suffixesOrder = {\n  zero: 0,\n  one: 1,\n  two: 2,\n  few: 3,\n  many: 4,\n  other: 5\n};\n\nfunction createRules() {\n  var rules = {};\n  sets.forEach(function (set) {\n    set.lngs.forEach(function (l) {\n      rules[l] = {\n        numbers: set.nr,\n        plurals: _rulesPluralsTypes[set.fc]\n      };\n    });\n  });\n  return rules;\n}\n\nvar PluralResolver = function () {\n  function PluralResolver(languageUtils) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, PluralResolver);\n\n    this.languageUtils = languageUtils;\n    this.options = options;\n    this.logger = baseLogger.create('pluralResolver');\n\n    if ((!this.options.compatibilityJSON || this.options.compatibilityJSON === 'v4') && (typeof Intl === 'undefined' || !Intl.PluralRules)) {\n      this.options.compatibilityJSON = 'v3';\n      this.logger.error('Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.');\n    }\n\n    this.rules = createRules();\n  }\n\n  _createClass(PluralResolver, [{\n    key: \"addRule\",\n    value: function addRule(lng, obj) {\n      this.rules[lng] = obj;\n    }\n  }, {\n    key: \"getRule\",\n    value: function getRule(code) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (this.shouldUseIntlApi()) {\n        try {\n          return new Intl.PluralRules(code, {\n            type: options.ordinal ? 'ordinal' : 'cardinal'\n          });\n        } catch (_unused) {\n          return;\n        }\n      }\n\n      return this.rules[code] || this.rules[this.languageUtils.getLanguagePartFromCode(code)];\n    }\n  }, {\n    key: \"needsPlural\",\n    value: function needsPlural(code) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var rule = this.getRule(code, options);\n\n      if (this.shouldUseIntlApi()) {\n        return rule && rule.resolvedOptions().pluralCategories.length > 1;\n      }\n\n      return rule && rule.numbers.length > 1;\n    }\n  }, {\n    key: \"getPluralFormsOfKey\",\n    value: function getPluralFormsOfKey(code, key) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return this.getSuffixes(code, options).map(function (suffix) {\n        return \"\".concat(key).concat(suffix);\n      });\n    }\n  }, {\n    key: \"getSuffixes\",\n    value: function getSuffixes(code) {\n      var _this = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var rule = this.getRule(code, options);\n\n      if (!rule) {\n        return [];\n      }\n\n      if (this.shouldUseIntlApi()) {\n        return rule.resolvedOptions().pluralCategories.sort(function (pluralCategory1, pluralCategory2) {\n          return suffixesOrder[pluralCategory1] - suffixesOrder[pluralCategory2];\n        }).map(function (pluralCategory) {\n          return \"\".concat(_this.options.prepend).concat(pluralCategory);\n        });\n      }\n\n      return rule.numbers.map(function (number) {\n        return _this.getSuffix(code, number, options);\n      });\n    }\n  }, {\n    key: \"getSuffix\",\n    value: function getSuffix(code, count) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var rule = this.getRule(code, options);\n\n      if (rule) {\n        if (this.shouldUseIntlApi()) {\n          return \"\".concat(this.options.prepend).concat(rule.select(count));\n        }\n\n        return this.getSuffixRetroCompatible(rule, count);\n      }\n\n      this.logger.warn(\"no plural rule found for: \".concat(code));\n      return '';\n    }\n  }, {\n    key: \"getSuffixRetroCompatible\",\n    value: function getSuffixRetroCompatible(rule, count) {\n      var _this2 = this;\n\n      var idx = rule.noAbs ? rule.plurals(count) : rule.plurals(Math.abs(count));\n      var suffix = rule.numbers[idx];\n\n      if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n        if (suffix === 2) {\n          suffix = 'plural';\n        } else if (suffix === 1) {\n          suffix = '';\n        }\n      }\n\n      var returnSuffix = function returnSuffix() {\n        return _this2.options.prepend && suffix.toString() ? _this2.options.prepend + suffix.toString() : suffix.toString();\n      };\n\n      if (this.options.compatibilityJSON === 'v1') {\n        if (suffix === 1) return '';\n        if (typeof suffix === 'number') return \"_plural_\".concat(suffix.toString());\n        return returnSuffix();\n      } else if (this.options.compatibilityJSON === 'v2') {\n        return returnSuffix();\n      } else if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n        return returnSuffix();\n      }\n\n      return this.options.prepend && idx.toString() ? this.options.prepend + idx.toString() : idx.toString();\n    }\n  }, {\n    key: \"shouldUseIntlApi\",\n    value: function shouldUseIntlApi() {\n      return !deprecatedJsonVersions.includes(this.options.compatibilityJSON);\n    }\n  }]);\n\n  return PluralResolver;\n}();\n\nfunction ownKeys$3(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$3(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$3(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$3(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar Interpolator = function () {\n  function Interpolator() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Interpolator);\n\n    this.logger = baseLogger.create('interpolator');\n    this.options = options;\n\n    this.format = options.interpolation && options.interpolation.format || function (value) {\n      return value;\n    };\n\n    this.init(options);\n  }\n\n  _createClass(Interpolator, [{\n    key: \"init\",\n    value: function init() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (!options.interpolation) options.interpolation = {\n        escapeValue: true\n      };\n      var iOpts = options.interpolation;\n      this.escape = iOpts.escape !== undefined ? iOpts.escape : escape;\n      this.escapeValue = iOpts.escapeValue !== undefined ? iOpts.escapeValue : true;\n      this.useRawValueToEscape = iOpts.useRawValueToEscape !== undefined ? iOpts.useRawValueToEscape : false;\n      this.prefix = iOpts.prefix ? regexEscape(iOpts.prefix) : iOpts.prefixEscaped || '{{';\n      this.suffix = iOpts.suffix ? regexEscape(iOpts.suffix) : iOpts.suffixEscaped || '}}';\n      this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ',';\n      this.unescapePrefix = iOpts.unescapeSuffix ? '' : iOpts.unescapePrefix || '-';\n      this.unescapeSuffix = this.unescapePrefix ? '' : iOpts.unescapeSuffix || '';\n      this.nestingPrefix = iOpts.nestingPrefix ? regexEscape(iOpts.nestingPrefix) : iOpts.nestingPrefixEscaped || regexEscape('$t(');\n      this.nestingSuffix = iOpts.nestingSuffix ? regexEscape(iOpts.nestingSuffix) : iOpts.nestingSuffixEscaped || regexEscape(')');\n      this.nestingOptionsSeparator = iOpts.nestingOptionsSeparator ? iOpts.nestingOptionsSeparator : iOpts.nestingOptionsSeparator || ',';\n      this.maxReplaces = iOpts.maxReplaces ? iOpts.maxReplaces : 1000;\n      this.alwaysFormat = iOpts.alwaysFormat !== undefined ? iOpts.alwaysFormat : false;\n      this.resetRegExp();\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      if (this.options) this.init(this.options);\n    }\n  }, {\n    key: \"resetRegExp\",\n    value: function resetRegExp() {\n      var regexpStr = \"\".concat(this.prefix, \"(.+?)\").concat(this.suffix);\n      this.regexp = new RegExp(regexpStr, 'g');\n      var regexpUnescapeStr = \"\".concat(this.prefix).concat(this.unescapePrefix, \"(.+?)\").concat(this.unescapeSuffix).concat(this.suffix);\n      this.regexpUnescape = new RegExp(regexpUnescapeStr, 'g');\n      var nestingRegexpStr = \"\".concat(this.nestingPrefix, \"(.+?)\").concat(this.nestingSuffix);\n      this.nestingRegexp = new RegExp(nestingRegexpStr, 'g');\n    }\n  }, {\n    key: \"interpolate\",\n    value: function interpolate(str, data, lng, options) {\n      var _this = this;\n\n      var match;\n      var value;\n      var replaces;\n      var defaultData = this.options && this.options.interpolation && this.options.interpolation.defaultVariables || {};\n\n      function regexSafe(val) {\n        return val.replace(/\\$/g, '$$$$');\n      }\n\n      var handleFormat = function handleFormat(key) {\n        if (key.indexOf(_this.formatSeparator) < 0) {\n          var path = getPathWithDefaults(data, defaultData, key);\n          return _this.alwaysFormat ? _this.format(path, undefined, lng, _objectSpread$3(_objectSpread$3(_objectSpread$3({}, options), data), {}, {\n            interpolationkey: key\n          })) : path;\n        }\n\n        var p = key.split(_this.formatSeparator);\n        var k = p.shift().trim();\n        var f = p.join(_this.formatSeparator).trim();\n        return _this.format(getPathWithDefaults(data, defaultData, k), f, lng, _objectSpread$3(_objectSpread$3(_objectSpread$3({}, options), data), {}, {\n          interpolationkey: k\n        }));\n      };\n\n      this.resetRegExp();\n      var missingInterpolationHandler = options && options.missingInterpolationHandler || this.options.missingInterpolationHandler;\n      var skipOnVariables = options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables;\n      var todos = [{\n        regex: this.regexpUnescape,\n        safeValue: function safeValue(val) {\n          return regexSafe(val);\n        }\n      }, {\n        regex: this.regexp,\n        safeValue: function safeValue(val) {\n          return _this.escapeValue ? regexSafe(_this.escape(val)) : regexSafe(val);\n        }\n      }];\n      todos.forEach(function (todo) {\n        replaces = 0;\n\n        while (match = todo.regex.exec(str)) {\n          var matchedVar = match[1].trim();\n          value = handleFormat(matchedVar);\n\n          if (value === undefined) {\n            if (typeof missingInterpolationHandler === 'function') {\n              var temp = missingInterpolationHandler(str, match, options);\n              value = typeof temp === 'string' ? temp : '';\n            } else if (options && options.hasOwnProperty(matchedVar)) {\n              value = '';\n            } else if (skipOnVariables) {\n              value = match[0];\n              continue;\n            } else {\n              _this.logger.warn(\"missed to pass in variable \".concat(matchedVar, \" for interpolating \").concat(str));\n\n              value = '';\n            }\n          } else if (typeof value !== 'string' && !_this.useRawValueToEscape) {\n            value = makeString(value);\n          }\n\n          var safeValue = todo.safeValue(value);\n          str = str.replace(match[0], safeValue);\n\n          if (skipOnVariables) {\n            todo.regex.lastIndex += value.length;\n            todo.regex.lastIndex -= match[0].length;\n          } else {\n            todo.regex.lastIndex = 0;\n          }\n\n          replaces++;\n\n          if (replaces >= _this.maxReplaces) {\n            break;\n          }\n        }\n      });\n      return str;\n    }\n  }, {\n    key: \"nest\",\n    value: function nest(str, fc) {\n      var _this2 = this;\n\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var match;\n      var value;\n\n      var clonedOptions = _objectSpread$3({}, options);\n\n      clonedOptions.applyPostProcessor = false;\n      delete clonedOptions.defaultValue;\n\n      function handleHasOptions(key, inheritedOptions) {\n        var sep = this.nestingOptionsSeparator;\n        if (key.indexOf(sep) < 0) return key;\n        var c = key.split(new RegExp(\"\".concat(sep, \"[ ]*{\")));\n        var optionsString = \"{\".concat(c[1]);\n        key = c[0];\n        optionsString = this.interpolate(optionsString, clonedOptions);\n        optionsString = optionsString.replace(/'/g, '\"');\n\n        try {\n          clonedOptions = JSON.parse(optionsString);\n          if (inheritedOptions) clonedOptions = _objectSpread$3(_objectSpread$3({}, inheritedOptions), clonedOptions);\n        } catch (e) {\n          this.logger.warn(\"failed parsing options string in nesting for key \".concat(key), e);\n          return \"\".concat(key).concat(sep).concat(optionsString);\n        }\n\n        delete clonedOptions.defaultValue;\n        return key;\n      }\n\n      while (match = this.nestingRegexp.exec(str)) {\n        var formatters = [];\n        var doReduce = false;\n\n        if (match[0].indexOf(this.formatSeparator) !== -1 && !/{.*}/.test(match[1])) {\n          var r = match[1].split(this.formatSeparator).map(function (elem) {\n            return elem.trim();\n          });\n          match[1] = r.shift();\n          formatters = r;\n          doReduce = true;\n        }\n\n        value = fc(handleHasOptions.call(this, match[1].trim(), clonedOptions), clonedOptions);\n        if (value && match[0] === str && typeof value !== 'string') return value;\n        if (typeof value !== 'string') value = makeString(value);\n\n        if (!value) {\n          this.logger.warn(\"missed to resolve \".concat(match[1], \" for nesting \").concat(str));\n          value = '';\n        }\n\n        if (doReduce) {\n          value = formatters.reduce(function (v, f) {\n            return _this2.format(v, f, options.lng, _objectSpread$3(_objectSpread$3({}, options), {}, {\n              interpolationkey: match[1].trim()\n            }));\n          }, value.trim());\n        }\n\n        str = str.replace(match[0], value);\n        this.regexp.lastIndex = 0;\n      }\n\n      return str;\n    }\n  }]);\n\n  return Interpolator;\n}();\n\nfunction ownKeys$4(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$4(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$4(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$4(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction parseFormatStr(formatStr) {\n  var formatName = formatStr.toLowerCase().trim();\n  var formatOptions = {};\n\n  if (formatStr.indexOf('(') > -1) {\n    var p = formatStr.split('(');\n    formatName = p[0].toLowerCase().trim();\n    var optStr = p[1].substring(0, p[1].length - 1);\n\n    if (formatName === 'currency' && optStr.indexOf(':') < 0) {\n      if (!formatOptions.currency) formatOptions.currency = optStr.trim();\n    } else if (formatName === 'relativetime' && optStr.indexOf(':') < 0) {\n      if (!formatOptions.range) formatOptions.range = optStr.trim();\n    } else {\n      var opts = optStr.split(';');\n      opts.forEach(function (opt) {\n        if (!opt) return;\n\n        var _opt$split = opt.split(':'),\n            _opt$split2 = _toArray(_opt$split),\n            key = _opt$split2[0],\n            rest = _opt$split2.slice(1);\n\n        var val = rest.join(':').trim().replace(/^'+|'+$/g, '');\n        if (!formatOptions[key.trim()]) formatOptions[key.trim()] = val;\n        if (val === 'false') formatOptions[key.trim()] = false;\n        if (val === 'true') formatOptions[key.trim()] = true;\n        if (!isNaN(val)) formatOptions[key.trim()] = parseInt(val, 10);\n      });\n    }\n  }\n\n  return {\n    formatName: formatName,\n    formatOptions: formatOptions\n  };\n}\n\nvar Formatter = function () {\n  function Formatter() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Formatter);\n\n    this.logger = baseLogger.create('formatter');\n    this.options = options;\n    this.formats = {\n      number: function number(val, lng, options) {\n        return new Intl.NumberFormat(lng, options).format(val);\n      },\n      currency: function currency(val, lng, options) {\n        return new Intl.NumberFormat(lng, _objectSpread$4(_objectSpread$4({}, options), {}, {\n          style: 'currency'\n        })).format(val);\n      },\n      datetime: function datetime(val, lng, options) {\n        return new Intl.DateTimeFormat(lng, _objectSpread$4({}, options)).format(val);\n      },\n      relativetime: function relativetime(val, lng, options) {\n        return new Intl.RelativeTimeFormat(lng, _objectSpread$4({}, options)).format(val, options.range || 'day');\n      },\n      list: function list(val, lng, options) {\n        return new Intl.ListFormat(lng, _objectSpread$4({}, options)).format(val);\n      }\n    };\n    this.init(options);\n  }\n\n  _createClass(Formatter, [{\n    key: \"init\",\n    value: function init(services) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        interpolation: {}\n      };\n      var iOpts = options.interpolation;\n      this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ',';\n    }\n  }, {\n    key: \"add\",\n    value: function add(name, fc) {\n      this.formats[name.toLowerCase().trim()] = fc;\n    }\n  }, {\n    key: \"format\",\n    value: function format(value, _format, lng, options) {\n      var _this = this;\n\n      var formats = _format.split(this.formatSeparator);\n\n      var result = formats.reduce(function (mem, f) {\n        var _parseFormatStr = parseFormatStr(f),\n            formatName = _parseFormatStr.formatName,\n            formatOptions = _parseFormatStr.formatOptions;\n\n        if (_this.formats[formatName]) {\n          var formatted = mem;\n\n          try {\n            var valOptions = options && options.formatParams && options.formatParams[options.interpolationkey] || {};\n            var l = valOptions.locale || valOptions.lng || options.locale || options.lng || lng;\n            formatted = _this.formats[formatName](mem, l, _objectSpread$4(_objectSpread$4(_objectSpread$4({}, formatOptions), options), valOptions));\n          } catch (error) {\n            _this.logger.warn(error);\n          }\n\n          return formatted;\n        } else {\n          _this.logger.warn(\"there was no format function for \".concat(formatName));\n        }\n\n        return mem;\n      }, value);\n      return result;\n    }\n  }]);\n\n  return Formatter;\n}();\n\nfunction ownKeys$5(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$5(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$5(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$5(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper$2(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$2(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$2() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction removePending(q, name) {\n  if (q.pending[name] !== undefined) {\n    delete q.pending[name];\n    q.pendingCount--;\n  }\n}\n\nvar Connector = function (_EventEmitter) {\n  _inherits(Connector, _EventEmitter);\n\n  var _super = _createSuper$2(Connector);\n\n  function Connector(backend, store, services) {\n    var _this;\n\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n    _classCallCheck(this, Connector);\n\n    _this = _super.call(this);\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n\n    _this.backend = backend;\n    _this.store = store;\n    _this.services = services;\n    _this.languageUtils = services.languageUtils;\n    _this.options = options;\n    _this.logger = baseLogger.create('backendConnector');\n    _this.waitingReads = [];\n    _this.maxParallelReads = options.maxParallelReads || 10;\n    _this.readingCalls = 0;\n    _this.maxRetries = options.maxRetries >= 0 ? options.maxRetries : 5;\n    _this.retryTimeout = options.retryTimeout >= 1 ? options.retryTimeout : 350;\n    _this.state = {};\n    _this.queue = [];\n\n    if (_this.backend && _this.backend.init) {\n      _this.backend.init(services, options.backend, options);\n    }\n\n    return _this;\n  }\n\n  _createClass(Connector, [{\n    key: \"queueLoad\",\n    value: function queueLoad(languages, namespaces, options, callback) {\n      var _this2 = this;\n\n      var toLoad = {};\n      var pending = {};\n      var toLoadLanguages = {};\n      var toLoadNamespaces = {};\n      languages.forEach(function (lng) {\n        var hasAllNamespaces = true;\n        namespaces.forEach(function (ns) {\n          var name = \"\".concat(lng, \"|\").concat(ns);\n\n          if (!options.reload && _this2.store.hasResourceBundle(lng, ns)) {\n            _this2.state[name] = 2;\n          } else if (_this2.state[name] < 0) ; else if (_this2.state[name] === 1) {\n            if (pending[name] === undefined) pending[name] = true;\n          } else {\n            _this2.state[name] = 1;\n            hasAllNamespaces = false;\n            if (pending[name] === undefined) pending[name] = true;\n            if (toLoad[name] === undefined) toLoad[name] = true;\n            if (toLoadNamespaces[ns] === undefined) toLoadNamespaces[ns] = true;\n          }\n        });\n        if (!hasAllNamespaces) toLoadLanguages[lng] = true;\n      });\n\n      if (Object.keys(toLoad).length || Object.keys(pending).length) {\n        this.queue.push({\n          pending: pending,\n          pendingCount: Object.keys(pending).length,\n          loaded: {},\n          errors: [],\n          callback: callback\n        });\n      }\n\n      return {\n        toLoad: Object.keys(toLoad),\n        pending: Object.keys(pending),\n        toLoadLanguages: Object.keys(toLoadLanguages),\n        toLoadNamespaces: Object.keys(toLoadNamespaces)\n      };\n    }\n  }, {\n    key: \"loaded\",\n    value: function loaded(name, err, data) {\n      var s = name.split('|');\n      var lng = s[0];\n      var ns = s[1];\n      if (err) this.emit('failedLoading', lng, ns, err);\n\n      if (data) {\n        this.store.addResourceBundle(lng, ns, data);\n      }\n\n      this.state[name] = err ? -1 : 2;\n      var loaded = {};\n      this.queue.forEach(function (q) {\n        pushPath(q.loaded, [lng], ns);\n        removePending(q, name);\n        if (err) q.errors.push(err);\n\n        if (q.pendingCount === 0 && !q.done) {\n          Object.keys(q.loaded).forEach(function (l) {\n            if (!loaded[l]) loaded[l] = {};\n            var loadedKeys = q.loaded[l];\n\n            if (loadedKeys.length) {\n              loadedKeys.forEach(function (ns) {\n                if (loaded[l][ns] === undefined) loaded[l][ns] = true;\n              });\n            }\n          });\n          q.done = true;\n\n          if (q.errors.length) {\n            q.callback(q.errors);\n          } else {\n            q.callback();\n          }\n        }\n      });\n      this.emit('loaded', loaded);\n      this.queue = this.queue.filter(function (q) {\n        return !q.done;\n      });\n    }\n  }, {\n    key: \"read\",\n    value: function read(lng, ns, fcName) {\n      var _this3 = this;\n\n      var tried = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var wait = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this.retryTimeout;\n      var callback = arguments.length > 5 ? arguments[5] : undefined;\n      if (!lng.length) return callback(null, {});\n\n      if (this.readingCalls >= this.maxParallelReads) {\n        this.waitingReads.push({\n          lng: lng,\n          ns: ns,\n          fcName: fcName,\n          tried: tried,\n          wait: wait,\n          callback: callback\n        });\n        return;\n      }\n\n      this.readingCalls++;\n      return this.backend[fcName](lng, ns, function (err, data) {\n        _this3.readingCalls--;\n\n        if (_this3.waitingReads.length > 0) {\n          var next = _this3.waitingReads.shift();\n\n          _this3.read(next.lng, next.ns, next.fcName, next.tried, next.wait, next.callback);\n        }\n\n        if (err && data && tried < _this3.maxRetries) {\n          setTimeout(function () {\n            _this3.read.call(_this3, lng, ns, fcName, tried + 1, wait * 2, callback);\n          }, wait);\n          return;\n        }\n\n        callback(err, data);\n      });\n    }\n  }, {\n    key: \"prepareLoading\",\n    value: function prepareLoading(languages, namespaces) {\n      var _this4 = this;\n\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var callback = arguments.length > 3 ? arguments[3] : undefined;\n\n      if (!this.backend) {\n        this.logger.warn('No backend was added via i18next.use. Will not load resources.');\n        return callback && callback();\n      }\n\n      if (typeof languages === 'string') languages = this.languageUtils.toResolveHierarchy(languages);\n      if (typeof namespaces === 'string') namespaces = [namespaces];\n      var toLoad = this.queueLoad(languages, namespaces, options, callback);\n\n      if (!toLoad.toLoad.length) {\n        if (!toLoad.pending.length) callback();\n        return null;\n      }\n\n      toLoad.toLoad.forEach(function (name) {\n        _this4.loadOne(name);\n      });\n    }\n  }, {\n    key: \"load\",\n    value: function load(languages, namespaces, callback) {\n      this.prepareLoading(languages, namespaces, {}, callback);\n    }\n  }, {\n    key: \"reload\",\n    value: function reload(languages, namespaces, callback) {\n      this.prepareLoading(languages, namespaces, {\n        reload: true\n      }, callback);\n    }\n  }, {\n    key: \"loadOne\",\n    value: function loadOne(name) {\n      var _this5 = this;\n\n      var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      var s = name.split('|');\n      var lng = s[0];\n      var ns = s[1];\n      this.read(lng, ns, 'read', undefined, undefined, function (err, data) {\n        if (err) _this5.logger.warn(\"\".concat(prefix, \"loading namespace \").concat(ns, \" for language \").concat(lng, \" failed\"), err);\n        if (!err && data) _this5.logger.log(\"\".concat(prefix, \"loaded namespace \").concat(ns, \" for language \").concat(lng), data);\n\n        _this5.loaded(name, err, data);\n      });\n    }\n  }, {\n    key: \"saveMissing\",\n    value: function saveMissing(languages, namespace, key, fallbackValue, isUpdate) {\n      var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n\n      if (this.services.utils && this.services.utils.hasLoadedNamespace && !this.services.utils.hasLoadedNamespace(namespace)) {\n        this.logger.warn(\"did not save key \\\"\".concat(key, \"\\\" as the namespace \\\"\").concat(namespace, \"\\\" was not yet loaded\"), 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n        return;\n      }\n\n      if (key === undefined || key === null || key === '') return;\n\n      if (this.backend && this.backend.create) {\n        this.backend.create(languages, namespace, key, fallbackValue, null, _objectSpread$5(_objectSpread$5({}, options), {}, {\n          isUpdate: isUpdate\n        }));\n      }\n\n      if (!languages || !languages[0]) return;\n      this.store.addResource(languages[0], namespace, key, fallbackValue);\n    }\n  }]);\n\n  return Connector;\n}(EventEmitter);\n\nfunction get() {\n  return {\n    debug: false,\n    initImmediate: true,\n    ns: ['translation'],\n    defaultNS: ['translation'],\n    fallbackLng: ['dev'],\n    fallbackNS: false,\n    supportedLngs: false,\n    nonExplicitSupportedLngs: false,\n    load: 'all',\n    preload: false,\n    simplifyPluralSuffix: true,\n    keySeparator: '.',\n    nsSeparator: ':',\n    pluralSeparator: '_',\n    contextSeparator: '_',\n    partialBundledLanguages: false,\n    saveMissing: false,\n    updateMissing: false,\n    saveMissingTo: 'fallback',\n    saveMissingPlurals: true,\n    missingKeyHandler: false,\n    missingInterpolationHandler: false,\n    postProcess: false,\n    postProcessPassResolved: false,\n    returnNull: true,\n    returnEmptyString: true,\n    returnObjects: false,\n    joinArrays: false,\n    returnedObjectHandler: false,\n    parseMissingKeyHandler: false,\n    appendNamespaceToMissingKey: false,\n    appendNamespaceToCIMode: false,\n    overloadTranslationOptionHandler: function handle(args) {\n      var ret = {};\n      if (_typeof(args[1]) === 'object') ret = args[1];\n      if (typeof args[1] === 'string') ret.defaultValue = args[1];\n      if (typeof args[2] === 'string') ret.tDescription = args[2];\n\n      if (_typeof(args[2]) === 'object' || _typeof(args[3]) === 'object') {\n        var options = args[3] || args[2];\n        Object.keys(options).forEach(function (key) {\n          ret[key] = options[key];\n        });\n      }\n\n      return ret;\n    },\n    interpolation: {\n      escapeValue: true,\n      format: function format(value, _format, lng, options) {\n        return value;\n      },\n      prefix: '{{',\n      suffix: '}}',\n      formatSeparator: ',',\n      unescapePrefix: '-',\n      nestingPrefix: '$t(',\n      nestingSuffix: ')',\n      nestingOptionsSeparator: ',',\n      maxReplaces: 1000,\n      skipOnVariables: true\n    }\n  };\n}\nfunction transformOptions(options) {\n  if (typeof options.ns === 'string') options.ns = [options.ns];\n  if (typeof options.fallbackLng === 'string') options.fallbackLng = [options.fallbackLng];\n  if (typeof options.fallbackNS === 'string') options.fallbackNS = [options.fallbackNS];\n\n  if (options.supportedLngs && options.supportedLngs.indexOf('cimode') < 0) {\n    options.supportedLngs = options.supportedLngs.concat(['cimode']);\n  }\n\n  return options;\n}\n\nfunction ownKeys$6(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$6(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$6(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$6(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper$3(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$3(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$3() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction noop() {}\n\nfunction bindMemberFunctions(inst) {\n  var mems = Object.getOwnPropertyNames(Object.getPrototypeOf(inst));\n  mems.forEach(function (mem) {\n    if (typeof inst[mem] === 'function') {\n      inst[mem] = inst[mem].bind(inst);\n    }\n  });\n}\n\nvar I18n = function (_EventEmitter) {\n  _inherits(I18n, _EventEmitter);\n\n  var _super = _createSuper$3(I18n);\n\n  function I18n() {\n    var _this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var callback = arguments.length > 1 ? arguments[1] : undefined;\n\n    _classCallCheck(this, I18n);\n\n    _this = _super.call(this);\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n\n    _this.options = transformOptions(options);\n    _this.services = {};\n    _this.logger = baseLogger;\n    _this.modules = {\n      external: []\n    };\n    bindMemberFunctions(_assertThisInitialized(_this));\n\n    if (callback && !_this.isInitialized && !options.isClone) {\n      if (!_this.options.initImmediate) {\n        _this.init(options, callback);\n\n        return _possibleConstructorReturn(_this, _assertThisInitialized(_this));\n      }\n\n      setTimeout(function () {\n        _this.init(options, callback);\n      }, 0);\n    }\n\n    return _this;\n  }\n\n  _createClass(I18n, [{\n    key: \"init\",\n    value: function init() {\n      var _this2 = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 ? arguments[1] : undefined;\n\n      if (typeof options === 'function') {\n        callback = options;\n        options = {};\n      }\n\n      if (!options.defaultNS && options.defaultNS !== false && options.ns) {\n        if (typeof options.ns === 'string') {\n          options.defaultNS = options.ns;\n        } else if (options.ns.indexOf('translation') < 0) {\n          options.defaultNS = options.ns[0];\n        }\n      }\n\n      var defOpts = get();\n      this.options = _objectSpread$6(_objectSpread$6(_objectSpread$6({}, defOpts), this.options), transformOptions(options));\n\n      if (this.options.compatibilityAPI !== 'v1') {\n        this.options.interpolation = _objectSpread$6(_objectSpread$6({}, defOpts.interpolation), this.options.interpolation);\n      }\n\n      if (options.keySeparator !== undefined) {\n        this.options.userDefinedKeySeparator = options.keySeparator;\n      }\n\n      if (options.nsSeparator !== undefined) {\n        this.options.userDefinedNsSeparator = options.nsSeparator;\n      }\n\n      function createClassOnDemand(ClassOrObject) {\n        if (!ClassOrObject) return null;\n        if (typeof ClassOrObject === 'function') return new ClassOrObject();\n        return ClassOrObject;\n      }\n\n      if (!this.options.isClone) {\n        if (this.modules.logger) {\n          baseLogger.init(createClassOnDemand(this.modules.logger), this.options);\n        } else {\n          baseLogger.init(null, this.options);\n        }\n\n        var formatter;\n\n        if (this.modules.formatter) {\n          formatter = this.modules.formatter;\n        } else if (typeof Intl !== 'undefined') {\n          formatter = Formatter;\n        }\n\n        var lu = new LanguageUtil(this.options);\n        this.store = new ResourceStore(this.options.resources, this.options);\n        var s = this.services;\n        s.logger = baseLogger;\n        s.resourceStore = this.store;\n        s.languageUtils = lu;\n        s.pluralResolver = new PluralResolver(lu, {\n          prepend: this.options.pluralSeparator,\n          compatibilityJSON: this.options.compatibilityJSON,\n          simplifyPluralSuffix: this.options.simplifyPluralSuffix\n        });\n\n        if (formatter && (!this.options.interpolation.format || this.options.interpolation.format === defOpts.interpolation.format)) {\n          s.formatter = createClassOnDemand(formatter);\n          s.formatter.init(s, this.options);\n          this.options.interpolation.format = s.formatter.format.bind(s.formatter);\n        }\n\n        s.interpolator = new Interpolator(this.options);\n        s.utils = {\n          hasLoadedNamespace: this.hasLoadedNamespace.bind(this)\n        };\n        s.backendConnector = new Connector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options);\n        s.backendConnector.on('*', function (event) {\n          for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            args[_key - 1] = arguments[_key];\n          }\n\n          _this2.emit.apply(_this2, [event].concat(args));\n        });\n\n        if (this.modules.languageDetector) {\n          s.languageDetector = createClassOnDemand(this.modules.languageDetector);\n          s.languageDetector.init(s, this.options.detection, this.options);\n        }\n\n        if (this.modules.i18nFormat) {\n          s.i18nFormat = createClassOnDemand(this.modules.i18nFormat);\n          if (s.i18nFormat.init) s.i18nFormat.init(this);\n        }\n\n        this.translator = new Translator(this.services, this.options);\n        this.translator.on('*', function (event) {\n          for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n            args[_key2 - 1] = arguments[_key2];\n          }\n\n          _this2.emit.apply(_this2, [event].concat(args));\n        });\n        this.modules.external.forEach(function (m) {\n          if (m.init) m.init(_this2);\n        });\n      }\n\n      this.format = this.options.interpolation.format;\n      if (!callback) callback = noop;\n\n      if (this.options.fallbackLng && !this.services.languageDetector && !this.options.lng) {\n        var codes = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n        if (codes.length > 0 && codes[0] !== 'dev') this.options.lng = codes[0];\n      }\n\n      if (!this.services.languageDetector && !this.options.lng) {\n        this.logger.warn('init: no languageDetector is used and no lng is defined');\n      }\n\n      var storeApi = ['getResource', 'hasResourceBundle', 'getResourceBundle', 'getDataByLanguage'];\n      storeApi.forEach(function (fcName) {\n        _this2[fcName] = function () {\n          var _this2$store;\n\n          return (_this2$store = _this2.store)[fcName].apply(_this2$store, arguments);\n        };\n      });\n      var storeApiChained = ['addResource', 'addResources', 'addResourceBundle', 'removeResourceBundle'];\n      storeApiChained.forEach(function (fcName) {\n        _this2[fcName] = function () {\n          var _this2$store2;\n\n          (_this2$store2 = _this2.store)[fcName].apply(_this2$store2, arguments);\n\n          return _this2;\n        };\n      });\n      var deferred = defer();\n\n      var load = function load() {\n        var finish = function finish(err, t) {\n          if (_this2.isInitialized && !_this2.initializedStoreOnce) _this2.logger.warn('init: i18next is already initialized. You should call init just once!');\n          _this2.isInitialized = true;\n          if (!_this2.options.isClone) _this2.logger.log('initialized', _this2.options);\n\n          _this2.emit('initialized', _this2.options);\n\n          deferred.resolve(t);\n          callback(err, t);\n        };\n\n        if (_this2.languages && _this2.options.compatibilityAPI !== 'v1' && !_this2.isInitialized) return finish(null, _this2.t.bind(_this2));\n\n        _this2.changeLanguage(_this2.options.lng, finish);\n      };\n\n      if (this.options.resources || !this.options.initImmediate) {\n        load();\n      } else {\n        setTimeout(load, 0);\n      }\n\n      return deferred;\n    }\n  }, {\n    key: \"loadResources\",\n    value: function loadResources(language) {\n      var _this3 = this;\n\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n      var usedCallback = callback;\n      var usedLng = typeof language === 'string' ? language : this.language;\n      if (typeof language === 'function') usedCallback = language;\n\n      if (!this.options.resources || this.options.partialBundledLanguages) {\n        if (usedLng && usedLng.toLowerCase() === 'cimode') return usedCallback();\n        var toLoad = [];\n\n        var append = function append(lng) {\n          if (!lng) return;\n\n          var lngs = _this3.services.languageUtils.toResolveHierarchy(lng);\n\n          lngs.forEach(function (l) {\n            if (toLoad.indexOf(l) < 0) toLoad.push(l);\n          });\n        };\n\n        if (!usedLng) {\n          var fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n          fallbacks.forEach(function (l) {\n            return append(l);\n          });\n        } else {\n          append(usedLng);\n        }\n\n        if (this.options.preload) {\n          this.options.preload.forEach(function (l) {\n            return append(l);\n          });\n        }\n\n        this.services.backendConnector.load(toLoad, this.options.ns, function (e) {\n          if (!e && !_this3.resolvedLanguage && _this3.language) _this3.setResolvedLanguage(_this3.language);\n          usedCallback(e);\n        });\n      } else {\n        usedCallback(null);\n      }\n    }\n  }, {\n    key: \"reloadResources\",\n    value: function reloadResources(lngs, ns, callback) {\n      var deferred = defer();\n      if (!lngs) lngs = this.languages;\n      if (!ns) ns = this.options.ns;\n      if (!callback) callback = noop;\n      this.services.backendConnector.reload(lngs, ns, function (err) {\n        deferred.resolve();\n        callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"use\",\n    value: function use(module) {\n      if (!module) throw new Error('You are passing an undefined module! Please check the object you are passing to i18next.use()');\n      if (!module.type) throw new Error('You are passing a wrong module! Please check the object you are passing to i18next.use()');\n\n      if (module.type === 'backend') {\n        this.modules.backend = module;\n      }\n\n      if (module.type === 'logger' || module.log && module.warn && module.error) {\n        this.modules.logger = module;\n      }\n\n      if (module.type === 'languageDetector') {\n        this.modules.languageDetector = module;\n      }\n\n      if (module.type === 'i18nFormat') {\n        this.modules.i18nFormat = module;\n      }\n\n      if (module.type === 'postProcessor') {\n        postProcessor.addPostProcessor(module);\n      }\n\n      if (module.type === 'formatter') {\n        this.modules.formatter = module;\n      }\n\n      if (module.type === '3rdParty') {\n        this.modules.external.push(module);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"setResolvedLanguage\",\n    value: function setResolvedLanguage(l) {\n      if (!l || !this.languages) return;\n      if (['cimode', 'dev'].indexOf(l) > -1) return;\n\n      for (var li = 0; li < this.languages.length; li++) {\n        var lngInLngs = this.languages[li];\n        if (['cimode', 'dev'].indexOf(lngInLngs) > -1) continue;\n\n        if (this.store.hasLanguageSomeTranslations(lngInLngs)) {\n          this.resolvedLanguage = lngInLngs;\n          break;\n        }\n      }\n    }\n  }, {\n    key: \"changeLanguage\",\n    value: function changeLanguage(lng, callback) {\n      var _this4 = this;\n\n      this.isLanguageChangingTo = lng;\n      var deferred = defer();\n      this.emit('languageChanging', lng);\n\n      var setLngProps = function setLngProps(l) {\n        _this4.language = l;\n        _this4.languages = _this4.services.languageUtils.toResolveHierarchy(l);\n        _this4.resolvedLanguage = undefined;\n\n        _this4.setResolvedLanguage(l);\n      };\n\n      var done = function done(err, l) {\n        if (l) {\n          setLngProps(l);\n\n          _this4.translator.changeLanguage(l);\n\n          _this4.isLanguageChangingTo = undefined;\n\n          _this4.emit('languageChanged', l);\n\n          _this4.logger.log('languageChanged', l);\n        } else {\n          _this4.isLanguageChangingTo = undefined;\n        }\n\n        deferred.resolve(function () {\n          return _this4.t.apply(_this4, arguments);\n        });\n        if (callback) callback(err, function () {\n          return _this4.t.apply(_this4, arguments);\n        });\n      };\n\n      var setLng = function setLng(lngs) {\n        if (!lng && !lngs && _this4.services.languageDetector) lngs = [];\n        var l = typeof lngs === 'string' ? lngs : _this4.services.languageUtils.getBestMatchFromCodes(lngs);\n\n        if (l) {\n          if (!_this4.language) {\n            setLngProps(l);\n          }\n\n          if (!_this4.translator.language) _this4.translator.changeLanguage(l);\n          if (_this4.services.languageDetector) _this4.services.languageDetector.cacheUserLanguage(l);\n        }\n\n        _this4.loadResources(l, function (err) {\n          done(err, l);\n        });\n      };\n\n      if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {\n        setLng(this.services.languageDetector.detect());\n      } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {\n        this.services.languageDetector.detect(setLng);\n      } else {\n        setLng(lng);\n      }\n\n      return deferred;\n    }\n  }, {\n    key: \"getFixedT\",\n    value: function getFixedT(lng, ns, keyPrefix) {\n      var _this5 = this;\n\n      var fixedT = function fixedT(key, opts) {\n        var options;\n\n        if (_typeof(opts) !== 'object') {\n          for (var _len3 = arguments.length, rest = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n            rest[_key3 - 2] = arguments[_key3];\n          }\n\n          options = _this5.options.overloadTranslationOptionHandler([key, opts].concat(rest));\n        } else {\n          options = _objectSpread$6({}, opts);\n        }\n\n        options.lng = options.lng || fixedT.lng;\n        options.lngs = options.lngs || fixedT.lngs;\n        options.ns = options.ns || fixedT.ns;\n        options.keyPrefix = options.keyPrefix || keyPrefix || fixedT.keyPrefix;\n        var keySeparator = _this5.options.keySeparator || '.';\n        var resultKey = options.keyPrefix ? \"\".concat(options.keyPrefix).concat(keySeparator).concat(key) : key;\n        return _this5.t(resultKey, options);\n      };\n\n      if (typeof lng === 'string') {\n        fixedT.lng = lng;\n      } else {\n        fixedT.lngs = lng;\n      }\n\n      fixedT.ns = ns;\n      fixedT.keyPrefix = keyPrefix;\n      return fixedT;\n    }\n  }, {\n    key: \"t\",\n    value: function t() {\n      var _this$translator;\n\n      return this.translator && (_this$translator = this.translator).translate.apply(_this$translator, arguments);\n    }\n  }, {\n    key: \"exists\",\n    value: function exists() {\n      var _this$translator2;\n\n      return this.translator && (_this$translator2 = this.translator).exists.apply(_this$translator2, arguments);\n    }\n  }, {\n    key: \"setDefaultNamespace\",\n    value: function setDefaultNamespace(ns) {\n      this.options.defaultNS = ns;\n    }\n  }, {\n    key: \"hasLoadedNamespace\",\n    value: function hasLoadedNamespace(ns) {\n      var _this6 = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (!this.isInitialized) {\n        this.logger.warn('hasLoadedNamespace: i18next was not initialized', this.languages);\n        return false;\n      }\n\n      if (!this.languages || !this.languages.length) {\n        this.logger.warn('hasLoadedNamespace: i18n.languages were undefined or empty', this.languages);\n        return false;\n      }\n\n      var lng = this.resolvedLanguage || this.languages[0];\n      var fallbackLng = this.options ? this.options.fallbackLng : false;\n      var lastLng = this.languages[this.languages.length - 1];\n      if (lng.toLowerCase() === 'cimode') return true;\n\n      var loadNotPending = function loadNotPending(l, n) {\n        var loadState = _this6.services.backendConnector.state[\"\".concat(l, \"|\").concat(n)];\n\n        return loadState === -1 || loadState === 2;\n      };\n\n      if (options.precheck) {\n        var preResult = options.precheck(this, loadNotPending);\n        if (preResult !== undefined) return preResult;\n      }\n\n      if (this.hasResourceBundle(lng, ns)) return true;\n      if (!this.services.backendConnector.backend || this.options.resources && !this.options.partialBundledLanguages) return true;\n      if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;\n      return false;\n    }\n  }, {\n    key: \"loadNamespaces\",\n    value: function loadNamespaces(ns, callback) {\n      var _this7 = this;\n\n      var deferred = defer();\n\n      if (!this.options.ns) {\n        callback && callback();\n        return Promise.resolve();\n      }\n\n      if (typeof ns === 'string') ns = [ns];\n      ns.forEach(function (n) {\n        if (_this7.options.ns.indexOf(n) < 0) _this7.options.ns.push(n);\n      });\n      this.loadResources(function (err) {\n        deferred.resolve();\n        if (callback) callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"loadLanguages\",\n    value: function loadLanguages(lngs, callback) {\n      var deferred = defer();\n      if (typeof lngs === 'string') lngs = [lngs];\n      var preloaded = this.options.preload || [];\n      var newLngs = lngs.filter(function (lng) {\n        return preloaded.indexOf(lng) < 0;\n      });\n\n      if (!newLngs.length) {\n        if (callback) callback();\n        return Promise.resolve();\n      }\n\n      this.options.preload = preloaded.concat(newLngs);\n      this.loadResources(function (err) {\n        deferred.resolve();\n        if (callback) callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"dir\",\n    value: function dir(lng) {\n      if (!lng) lng = this.resolvedLanguage || (this.languages && this.languages.length > 0 ? this.languages[0] : this.language);\n      if (!lng) return 'rtl';\n      var rtlLngs = ['ar', 'shu', 'sqr', 'ssh', 'xaa', 'yhd', 'yud', 'aao', 'abh', 'abv', 'acm', 'acq', 'acw', 'acx', 'acy', 'adf', 'ads', 'aeb', 'aec', 'afb', 'ajp', 'apc', 'apd', 'arb', 'arq', 'ars', 'ary', 'arz', 'auz', 'avl', 'ayh', 'ayl', 'ayn', 'ayp', 'bbz', 'pga', 'he', 'iw', 'ps', 'pbt', 'pbu', 'pst', 'prp', 'prd', 'ug', 'ur', 'ydd', 'yds', 'yih', 'ji', 'yi', 'hbo', 'men', 'xmn', 'fa', 'jpr', 'peo', 'pes', 'prs', 'dv', 'sam', 'ckb'];\n      return rtlLngs.indexOf(this.services.languageUtils.getLanguagePartFromCode(lng)) > -1 || lng.toLowerCase().indexOf('-arab') > 1 ? 'rtl' : 'ltr';\n    }\n  }, {\n    key: \"cloneInstance\",\n    value: function cloneInstance() {\n      var _this8 = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n\n      var mergedOptions = _objectSpread$6(_objectSpread$6(_objectSpread$6({}, this.options), options), {\n        isClone: true\n      });\n\n      var clone = new I18n(mergedOptions);\n      var membersToCopy = ['store', 'services', 'language'];\n      membersToCopy.forEach(function (m) {\n        clone[m] = _this8[m];\n      });\n      clone.services = _objectSpread$6({}, this.services);\n      clone.services.utils = {\n        hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n      };\n      clone.translator = new Translator(clone.services, clone.options);\n      clone.translator.on('*', function (event) {\n        for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n          args[_key4 - 1] = arguments[_key4];\n        }\n\n        clone.emit.apply(clone, [event].concat(args));\n      });\n      clone.init(mergedOptions, callback);\n      clone.translator.options = clone.options;\n      clone.translator.backendConnector.services.utils = {\n        hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n      };\n      return clone;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return {\n        options: this.options,\n        store: this.store,\n        language: this.language,\n        languages: this.languages,\n        resolvedLanguage: this.resolvedLanguage\n      };\n    }\n  }]);\n\n  return I18n;\n}(EventEmitter);\n\n_defineProperty(I18n, \"createInstance\", function () {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var callback = arguments.length > 1 ? arguments[1] : undefined;\n  return new I18n(options, callback);\n});\n\nvar instance = I18n.createInstance();\ninstance.createInstance = I18n.createInstance;\n\nvar createInstance = instance.createInstance;\nvar init = instance.init;\nvar loadResources = instance.loadResources;\nvar reloadResources = instance.reloadResources;\nvar use = instance.use;\nvar changeLanguage = instance.changeLanguage;\nvar getFixedT = instance.getFixedT;\nvar t = instance.t;\nvar exists = instance.exists;\nvar setDefaultNamespace = instance.setDefaultNamespace;\nvar hasLoadedNamespace = instance.hasLoadedNamespace;\nvar loadNamespaces = instance.loadNamespaces;\nvar loadLanguages = instance.loadLanguages;\n\nexport default instance;\nexport { changeLanguage, createInstance, exists, getFixedT, hasLoadedNamespace, init, loadLanguages, loadNamespaces, loadResources, reloadResources, setDefaultNamespace, t, use };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"gristy:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t\tif (script.src.indexOf(window.location.origin + '/') !== 0) {\n\t\t\tscript.crossOrigin = \"anonymous\";\n\t\t}\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","__webpack_require__.amdD = function () {\n\tthrow new Error('define cannot be used indirect');\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".bundle.js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.j = 361;","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t361: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkgristy\"] = self[\"webpackChunkgristy\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","import {makeT} from 'app/client/lib/localization';\nimport {AppModel} from 'app/client/models/AppModel';\nimport {getLoginUrl, getMainOrgUrl, urlState} from 'app/client/models/gristUrlState';\nimport {AppHeader} from 'app/client/ui/AppHeader';\nimport {leftPanelBasic} from 'app/client/ui/LeftPanelCommon';\nimport {pagePanels} from 'app/client/ui/PagePanels';\nimport {createTopBarHome} from 'app/client/ui/TopBar';\nimport {bigBasicButtonLink, bigPrimaryButtonLink} from 'app/client/ui2018/buttons';\nimport {theme, vars} from 'app/client/ui2018/cssVars';\nimport {getPageTitleSuffix, GristLoadConfig} from 'app/common/gristUrls';\nimport {getGristConfig} from 'app/common/urlUtils';\nimport {dom, DomElementArg, makeTestId, observable, styled} from 'grainjs';\n\nconst testId = makeTestId('test-');\n\nconst t = makeT('errorPages');\n\nexport function createErrPage(appModel: AppModel) {\n  const gristConfig: GristLoadConfig = (window as any).gristConfig || {};\n  const message = gristConfig.errMessage;\n  return gristConfig.errPage === 'signed-out' ? createSignedOutPage(appModel) :\n    gristConfig.errPage === 'not-found' ? createNotFoundPage(appModel, message) :\n    gristConfig.errPage === 'access-denied' ? createForbiddenPage(appModel, message) :\n    createOtherErrorPage(appModel, message);\n}\n\n/**\n * Creates a page to show that the user has no access to this org.\n */\nexport function createForbiddenPage(appModel: AppModel, message?: string) {\n  document.title = t(\"Access denied{{suffix}}\", {suffix: getPageTitleSuffix(getGristConfig())});\n\n  const isAnonym = () => !appModel.currentValidUser;\n  const isExternal = () => appModel.currentValidUser?.loginMethod === 'External';\n  return pagePanelsError(appModel, t(\"Access denied{{suffix}}\", {suffix: ''}), [\n    dom.domComputed(appModel.currentValidUser, user => user ? [\n      cssErrorText(message || t(\"You do not have access to this organization's documents.\")),\n      cssErrorText(t(\"You are signed in as {{email}}. You can sign in with a different \\\naccount, or ask an administrator for access.\", {email: dom('b', user.email)})),\n    ] : [\n      // This page is not normally shown because a logged out user with no access will get\n      // redirected to log in. But it may be seen if a user logs out and returns to a cached\n      // version of this page or is an external user (connected through GristConnect).\n      cssErrorText(t(\"Sign in to access this organization's documents.\")),\n    ]),\n    cssButtonWrap(bigPrimaryButtonLink(\n        isExternal() ? t(\"Go to main page\") :\n        isAnonym() ? t(\"Sign in\") :\n        t(\"Add account\"),\n      {href: isExternal() ? getMainOrgUrl() : getLoginUrl()},\n      testId('error-signin'),\n    ))\n  ]);\n}\n\n/**\n * Creates a page that shows the user is logged out.\n */\nexport function createSignedOutPage(appModel: AppModel) {\n  document.title = t(\"Signed out{{suffix}}\", {suffix: getPageTitleSuffix(getGristConfig())});\n\n  return pagePanelsError(appModel, t(\"Signed out{{suffix}}\", {suffix: ''}), [\n    cssErrorText(t(\"You are now signed out.\")),\n    cssButtonWrap(bigPrimaryButtonLink(\n      t(\"Sign in again\"), {href: getLoginUrl()}, testId('error-signin')\n    ))\n  ]);\n}\n\n/**\n * Creates a \"Page not found\" page.\n */\nexport function createNotFoundPage(appModel: AppModel, message?: string) {\n  document.title = t(\"Page not found{{suffix}}\", {suffix: getPageTitleSuffix(getGristConfig())});\n\n  return pagePanelsError(appModel, t(\"Page not found{{suffix}}\", {suffix: ''}), [\n    cssErrorText(message ||\n      t(\"The requested page could not be found.{{separator}}Please check the URL and try again.\", {\n        separator: dom('br')\n    })),\n    cssButtonWrap(bigPrimaryButtonLink(t(\"Go to main page\"), testId('error-primary-btn'),\n      urlState().setLinkUrl({}))),\n    cssButtonWrap(bigBasicButtonLink(t(\"Contact support\"), {href: 'https://getgrist.com/contact'})),\n  ]);\n}\n\n/**\n * Creates a generic error page with the given message.\n */\nexport function createOtherErrorPage(appModel: AppModel, message?: string) {\n  document.title = t(\"Error{{suffix}}\", {suffix: getPageTitleSuffix(getGristConfig())});\n\n  return pagePanelsError(appModel, t(\"Something went wrong\"), [\n    cssErrorText(message ? t('There was an error: {{message}}', {message: addPeriod(message)}) :\n      t('There was an unknown error.')),\n    cssButtonWrap(bigPrimaryButtonLink(t(\"Go to main page\"), testId('error-primary-btn'),\n      urlState().setLinkUrl({}))),\n    cssButtonWrap(bigBasicButtonLink(t(\"Contact support\"), {href: 'https://getgrist.com/contact'})),\n  ]);\n}\n\nfunction addPeriod(msg: string): string {\n  return msg.endsWith('.') ? msg : msg + '.';\n}\n\nfunction pagePanelsError(appModel: AppModel, header: string, content: DomElementArg) {\n  const panelOpen = observable(false);\n  return pagePanels({\n    leftPanel: {\n      panelWidth: observable(240),\n      panelOpen,\n      hideOpener: true,\n      header: dom.create(AppHeader, appModel),\n      content: leftPanelBasic(appModel, panelOpen),\n    },\n    headerMain: createTopBarHome(appModel),\n    contentMain: cssCenteredContent(cssErrorContent(\n      cssBigIcon(),\n      cssErrorHeader(header, testId('error-header')),\n      content,\n      testId('error-content'),\n    )),\n  });\n}\n\nconst cssCenteredContent = styled('div', `\n  width: 100%;\n  height: 100%;\n  overflow-y: auto;\n`);\n\nconst cssErrorContent = styled('div', `\n  text-align: center;\n  margin: 64px 0 64px;\n`);\n\nconst cssBigIcon = styled('div', `\n  display: inline-block;\n  width: 100%;\n  height: 64px;\n  background-image: var(--icon-GristLogo);\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n`);\n\nconst cssErrorHeader = styled('div', `\n  font-weight: ${vars.headerControlTextWeight};\n  font-size: ${vars.xxxlargeFontSize};\n  margin: 24px;\n  text-align: center;\n  color: ${theme.text};\n`);\n\nconst cssErrorText = styled('div', `\n  font-size: ${vars.mediumFontSize};\n  color: ${theme.text};\n  margin: 0 auto 24px auto;\n  max-width: 400px;\n  text-align: center;\n`);\n\nconst cssButtonWrap = styled('div', `\n  margin-bottom: 8px;\n`);\n","import {get as getBrowserGlobals} from 'app/client/lib/browserGlobals';\nimport {setupLocale} from 'app/client/lib/localization';\nimport {AppModel, TopAppModelImpl} from 'app/client/models/AppModel';\nimport {setUpErrorHandling} from 'app/client/models/errors';\nimport {buildSnackbarDom} from 'app/client/ui/NotifyUI';\nimport {addViewportTag} from 'app/client/ui/viewport';\nimport {attachCssRootVars} from 'app/client/ui2018/cssVars';\nimport {BaseAPI} from 'app/common/BaseAPI';\nimport {dom, DomContents} from 'grainjs';\n\nconst G = getBrowserGlobals('document', 'window');\n\n/**\n * Sets up error handling and global styles, and replaces the DOM body with\n * the result of calling `buildPage`.\n */\nexport function setupPage(buildPage: (appModel: AppModel) => DomContents) {\n  setUpErrorHandling();\n  const topAppModel = TopAppModelImpl.create(null, {});\n  attachCssRootVars(topAppModel.productFlavor);\n  addViewportTag();\n\n  void setupLocale();\n\n  // Add globals needed by test utils.\n  G.window.gristApp = {\n    testNumPendingApiRequests: () => BaseAPI.numPendingRequests(),\n  };\n\n  dom.update(document.body, dom.maybe(topAppModel.appObs, (appModel) => [\n    buildPage(appModel),\n    buildSnackbarDom(appModel.notifier, appModel),\n  ]));\n}\n","import {createErrPage} from 'app/client/ui/errorPages';\nimport {setupPage} from 'app/client/ui/setupPage';\n\nsetupPage((appModel) => createErrPage(appModel));\n"],"names":["defaultHooks","BehavioralPromptsManager","Disposable","constructor","_appModel","super","_isDisabled","_prefs","getUserPrefObs","this","userPrefsObs","defaultValue","dontShowTips","dismissedTips","_dismissedTips","Computed","use","Set","filter","BehavioralPrompt","_queuedTips","refElement","prompt","options","_queueTip","element","get","has","set","enable","_shouldQueueTip","push","length","_showTip","close","ctl","isDisposed","hideArrow","hideDontShowTips","markAsSeen","onDispose","popupOptions","title","content","showBehavioralPrompt","onClose","_dontShowTips","_markAsSeen","_showNextQueuedTip","dom","shift","nextTip","newDismissedTips","add","isNarrowScreen","showOnMobile","forceShow","hasSeenTip","deploymentType","getGristConfig","deploymentTypes","includes","UnsavedChange","_saveCB","_haveChanges","unsavedChanges","delete","_changes","Array","from","some","c","haveUnsavedChanges","Promise","all","map","save","unsaved","groups","group","commands","name","keys","desc","bindKeys","G","isMac","navigator","test","platform","allCommands","_allKeys","init","optCommandGroups","commandGroups","Object","forEach","k","commandGroup","console","error","Command","deprecated","window","cmd","defineProperty","run","KEY_MAP_MAC","Mod","Alt","Shift","Ctrl","Left","Right","Up","Down","KEY_MAP_WIN","getHumanKey","key","mac","keyMap","split","s","trim","toUpperCase","join","_implGroupStack","_activeFunc","humanKeys","toLowerCase","replace","isActive","_run","bind","parts","keysDesc","getKeysDesc","separator","i","cmdGroup","_updateActive","arrayRemove","keyGroups","commandName","knownKeys","callback","arguments","args","CommandGroup","context","activate","attach","elem","combo","hasOwnProperty","warn","_removeGroup","autoDispose","value","fn","subscribe","Observable","addListener","Error","val","unwrap","yesNo","_addGroup","addGroup","removeGroup","createGroup","create","setButtonCommand","setAttribute","getDesc","merge","buildConfirmDelete","onSave","single","remember","observable","tooltip","modalTooltip","cssContainer","testId","FocusLayer","defaultFocusElem","pauseMousetrap","Escape","Enter","cssButtons","primaryButton","basicButton","showDeprecatedWarning","cssWideContainer","reportUndo","doc","messageLabel","buttonLabel","notification","reportSuccess","actions","label","action","dispose","on","off","arrow","cssArrowContainer","svg","style","cssBehavioralPromptModal","cls","cssBehavioralPromptContainer","cssBehavioralPromptHeader","cssHeaderIconAndText","icon","cssHeaderText","cssBehavioralPromptBody","cssBehavioralPromptTitle","cssSkipTipsCheckbox","cssSkipTipsCheckboxLabel","cssDismissPromptButton","modifiers","offset","preventOverflow","boundariesElement","padding","sideSelectorChunk","side","cssModalTooltip","fadeInFromSide","startPosition","keyframes","styled","theme","cssTheme","cssFadeInFromTop","cssFadeInFromBottom","cssFadeInFromLeft","cssFadeInFromRight","mediaXSmall","bigPrimaryButton","vars","_focusLayerManager","FocusLayerManager","gracePeriodMs","_timeoutId","_focusLayers","grabFocus","onOff","addRemove","addEventListener","removeEventListener","call","setBackgroundCapture","document","hasFocus","layer","getCurrentLayer","onDefaultBlur","setTimeout","focus","preventScroll","_doGrabFocus","activeElement","allowFocus","watchElementForBlur","onDefaultFocus","_isDefaultFocused","body","_onDefaultFocus","_onDefaultBlur","hasAttribute","manager","addLayer","removeLayer","maybeDone","lis","observer","disconnect","MutationObserver","parent","parentNode","observe","childList","defaultKeyBindings","previous","next","TokenWrap","token","UndoItem","redo","undo","TokenField","_options","_acHolder","Holder","_tokens","obsArray","_selection","_selectionAnchor","_undoStack","_undoIndex","_inUndoRedo","_variant","variant","addSelectedItem","_addSelectedItem","openAutocomplete","_openAutocomplete","_acOptions","acOptions","onClick","setTokens","initialValue","tokensObs","computedArray","t","_keyBindings","keyBindings","_recordUndo","_styles","tokenFieldStyles","styles","cssTokenField","cssToken","cssInputWrapper","cssTokenInput","cssDeleteButton","cssDeleteIcon","ev","stopPropagation","preventDefault","_rootElem","tabIndex","renderToken","readonly","_onTokenClick","_onMouseDown","_textInput","_onInputFocus","clear","isEmpty","Escape$","Enter$","stop","ArrowDown$","Tab$","a$","_maybeSelectAllTokens","Backspace$","_maybeBackspace","Delete$","_maybeDelete","_maybeAdvance","z$","shiftKey","_redo","_undo","y$","ctrlKey","_hiddenInput","cssHiddenInput","type","relatedTarget","_onCopyEvent","_onCutEvent","_onPasteEvent","appendChild","trimLabels","tokens","formattedTokens","_maybeTrimTokens","newToken","tokenIdx","findIndex","splice","Autocomplete","item","getSelectedItem","textInput","getTextInputValue","createToken","openAutocompleteOnFocus","idx","indexOf","target","matches","className","fromIdx","first","last","slice","_toggleTokenSelection","_resetTokenSelection","_setFocus","size","repeat","pop","_deleteTokens","advance","anchorIdx","_getSelectedIndexRange","_getNextToken","selection","setAndTrigger","toDelete","selectAfter","clipboardData","selected","tokensToClipboard","values","setData","prettier","clipboardToTokens","text","getData","v","Boolean","_getNonEmptyTokens","wrappedTokens","_combineUndo","startEvent","xInitial","clientX","yInitial","clientY","dragTargetSelector","dragTargetStyle","cssDragTarget","cssVerticalDragTarget","allTargets","tokenList","nextUnselectedToken","started","moveLis","classList","prototype","children","el","find","previousElementSibling","setProperty","String","transform","useCapture","stopLis","remove","index","contains","destToken","movedTokens","tok","destIndex","prev","change","start","numAdded","deleted","newTokens","Math","min","nextAction","a","reverse","colors","UrlState","_window","_stateImpl","state","_getState","_urlStateLoadPage","href","location","loadState","urlState","prevState","newState","_mergeState","newUrl","encodeUrl","origin","URL","avoidReload","needPageLoad","delayPushUrl","history","replaceState","pushState","e","decodeUrl","fullState","makeUrl","metaKey","altKey","pushUrl","updateState","obs","_triggerElem","_selectedIndex","_selected","_items","cssMenuWrap","_menuContent","cssMenu","class","menuCssClass","renderItem","_highlightFunc","getBoundingClientRect","width","_setSelected","_findTargetItem","_mouseOver","attachMouseOverOnMove","onKeyElem","ArrowDown","_getNext","ArrowUp","search","attachElem","closest","popperOptions","defaultPopperOptions","_popper","destroy","findMatch","_updateChoices","catch","reportError","updateValue","clsName","selectedCssClass","scrollIntoView","block","getItemText","_lastAsTyped","findAncestorChild","step","xsize","inputVal","acResults","highlightFunc","items","forceUpdate","reset","selectIndex","placement","enabled","phase","requires","height","modifiersData","maxSize","assign","popper","maxHeight","max","gpuAcceleration","ancestor","parentElement","eventType","cb","setListener","_elem","parser","isDesktop","platformType","userAgent","getPlatformType","isIOS","modKeyProp","identity","pickBy","Beacon","method","data","gristConfig","beaconId","helpScoutBeaconId","_beacon","head","src","async","reportWarning","display","initBeacon","readyQueue","lastOpenType","lastRoute","fixBeaconBaseHref","iframe","querySelector","iframeDoc","contentDocument","beaconOpenMessage","app","appModel","errors","includeAppErrors","notifier","getFullAppErrors","userObj","onOpen","openType","route","skipNav","blur","attrs","messages","timestamp","timeFormat","Date","message","subject","messaging","contactForm","showSubject","stack","JSON","stringify","article","full","articleId","id","searchQuery","query","_beaconOpen","user","currentValidUser","org","currentOrg","company","owner","currentOrgName","email","avatar","picture","signature","helpScoutSignature","getBeaconUserObj","getStorageBoolObs","store","defValue","storedNegation","getItem","removeItem","setItem","localStorageBoolObs","sessionStorageBoolObs","getStorageObs","localStorageObs","sessionStorageObs","localStorageJsonObs","currentValue","safeJsonParse","setupLocale","now","supportedLngs","lng","detectCurrentLang","ns","namespaces","fallbackLng","initImmediate","defaultNS","fallbackNS","err","languages","loadPath","baseURI","pathsToLoad","lang","n","resourceUrl","response","fetch","ok","json","l","load","log","userLocale","detected","cookie","match","language","supportedList","supported","setAnonymousLocale","tString","instance","exists","domT","tImpl","domElements","entries","_","isLikeDomContents","copy","prop","missingInterpolationHandler","propName","substring","domElement","p","hasTranslation","isArray","makeT","scope","scopedInstance","scopedResolver","cloneInstance","keySeparator","nsSeparator","saveMissing","missingKeyHandler","_key","fixedResolver","getFixedT","_args","debug","info","createPausableObs","_lastValue","_isPaused","Symbol","pause","shouldPause","getStorage","_storage","testStorage","getSessionStorage","_sessionStorage","Map","createInMemoryStorage","storageName","testStr","storage","logTelemetryEvent","event","metadata","pageHasHome","telemetry","telemetryLevel","minimumTelemetryLevel","fetchFromHome","credentials","headers","logError","urlRegex","findLinks","isLink","hashFnv32a","str","hval","charCodeAt","toString","substr","simpleStringHash","result","TopAppModelImpl","api","getHomeUrl","newUserAPIImpl","currentSubdomain","appObs","orgs","users","plugins","setErrorNotifier","isSingleOrg","singleOrg","productFlavor","_gristConfig","initialize","fetchUsersAndOrgs","_doInitialize","currentUser","orgError","AppModelImpl","isRunningUnderElectron","pluginUrl","port","getSessionAll","bundleChanges","getSessionActive","domain","billingAccount","product","createUserMessage","status","topAppModel","anonymous","currentOrgUsage","lastVisitedOrgDomain","currentProduct","currentFeatures","features","isPersonal","isTeamSite","isLegacySite","isTemplatesSite","getUserPrefsObs","themePrefs","checker","currentTheme","_getCurrentThemeObs","dismissedPopups","dismissedWelcomePopups","pageType","_use","billing","welcome","account","supportGrist","activation","needsOrg","behavioralPromptsManager","supportGristNudge","_applyTheme","_recordSignUpIfIsNewUser","createTeam","params","showNewSiteModal","planType","resetDismissedPopups","seen","DismissedPopup","_updateLastVisitedOrgDomain","planName","selectedPlan","onCreate","isSupport","isManager","isOwner","usage","getOrgUsageSummary","computed","onWrite","markAsUnSeen","availableOrgs","recordSignUpEvent","tagManagerId","dataLayer","script","createElement","innerHTML","prefersDarkModeObs","prefersDarkMode","appearance","syncWithOS","urlParams","themeAppearance","themeSyncWithOs","nameOrColors","themeName","enableCustomCss","attachCssThemeVars","host","protocol","homeUrl","ConnectState","connectState","_timers","clearTimeout","_setState","timeToRecentlyDisconnected","timeToReallyDisconnected","ConnectStateManager","clamp","defaults","withoutDelay","fadeDelay","Expirable","Notification","_opts","inDropdown","badgeCounter","inToast","expireSec","canUserClose","memos","level","expireTimer","expire","Progress","progress","expireOnComplete","BetterMultiHolder","obj","Notifier","_itemsHolder","_toasts","_dropdownItems","_progressItems","_keyedItems","_connectStateManager","_connectState","_disconnectMsg","getDisconnectMessage","_appErrorList","_appErrorDropdownItem","_appErrorToast","_slowNotificationToast","_slowNotificationInactivityTimer","msg","createNotification","toasts","dropdownItems","progressItems","disconnectMsg","_createAppErrorItem","appErr","opts","_addNotification","isConnected","setConnected","promise","optTimeout","isLongerThan","disableUntilFinish","where","appErrors","isNarrowScreenObs","arr","removeIdx","TelemetryModelImpl","prefs","_installAPI","getInstallPrefs","updateInstallPrefs","fetchTelemetryPrefs","makePrefFunctions","prefsTypeName","getPrefsObs","prefsObs","newPrefs","updateOrg","userId","jsonPrefsObs","parse","getPrefObs","prefName","check","getUserOrgPrefsObs","getUserOrgPrefObs","seenIdsObs","itemId","seenIds","sort","isError","pick","_notifier","UserError","NeedUpgradeError","getAppErrors","reportMessage","unhelpfulErrors","filename","lineno","isUnhelpful","details","code","userError","limit","quantity","tips","tip","createAppError","setUpErrorHandling","doReportError","koUtil","setComputedErrorHandler","reason","detail","gristNotify","docId","gristDocPageModel","currentDocId","getOwnPropertyNames","page","browser","COMMENTS","featureComments","HAS_FORMULA_ASSISTANT","featureFormulaAssistant","WHICH_FORMULA_ASSISTANT","assistantService","PERMITTED_CUSTOM_WIDGETS","permittedCustomWidgets","isEqual","_urlState","UrlStateImpl","docUrl","urlId","slug","getMainOrgUrl","getCurrentDocUrl","docPage","getLoginUrl","nextUrl","_getCurrentUrl","_getLoginLogoutUrl","getSignupUrl","getLogoutUrl","getLoginOrSignupUrl","getWelcomeHomeUrl","_buildUrl","hash","pathname","endsWith","path","startUrl","searchParams","addOrgToPath","baseLocation","tweaks","keepState","ws","homePage","orgReload","docReload","accountReload","billingReload","activationReload","welcomeReload","linkKeysReload","linkParameters","signupReload","login","supportGristReload","errPage","constructUrl","url","lastIndexOf","sameDocumentUrlState","urlValue","urlString","urlStateImpl","AccountWidget","_docPageModel","cssAccountWidget","isTemplate","_buildUseThisTemplateButton","_buildAccountMenuButton","_buildSignInAndSignUpButtons","cssUserIcon","menu","_makeAccountMenu","cssSigninButton","cssUseThisTemplateButton","documentSettingsItem","menuItemLink","setLinkUrl","mobileModeToggle","menuItem","cssSmallDeviceOnly","cssCheckmark","menuDivider","isExternal","loginMethod","cssUserInfo","cssUserName","cssEmail","access","_maybeBuildBillingPageMenuItem","_maybeBuildActivationPageMenuItem","_maybeBuildSupportGristPageMenuItem","menuSubHeader","_user","_switchAccount","cssSmallIconWrap","cssOtherEmail","setSessionActive","reload","isBillingManager","showUpgradeModal","cssHeartIcon","cssMenuItem","mediaDeviceNotSmall","bigPrimaryButtonLink","primaryButtonLink","productPills","AppHeader","_currentOrg","_appLogoOrg","_getAppLogoOrgNameAndLink","_appLogoOrgName","_appLogoOrgLink","link","g","cssAppHeader","wideLogo","orgLink","cssAppLogo","_setHomePageUrl","_buildOrgLinkOrMenu","cssOrg","cssOrgName","pillTag","cssProductPill","large","productPill","cssDropdownIcon","cssOrgLink","lastVisitedOrg","getFlavor","themeOrg","URLSearchParams","getTheme","flavor","bodyClassName","cssFieldLinkBody","cssTooltipContent","cssBoldText","cssItalicizedText","cssIcon","GristTooltips","dataSize","setTriggerFormula","selectBy","workOnACopy","openAccessRules","addRowConditionalStyle","addColumnConditionalStyle","GristBehavioralPrompts","referenceColumns","relational","referenceColumnsConfig","entire","rawDataPage","accessRules","filterButtons","nestedFiltering","pageWidgetPicker","pageWidgetPickerSelectBy","editCardLayout","EyeHideIcon","addNew","rickRow","shortcut","ShortcutKey","ShortcutKeyContent","customURL","makeTestId","buildLanguageMenu","userLanguage","flagIcon","locale","countryCode","cssFlagIcon","cssPlaceholderFlagIcon","buildFlagIcon","cssFlagButton","cssFlagIconWrapper","changeLanguage","cssFirstUpper","translateLocale","cssWrapper","hoverTooltip","Intl","DisplayNames","of","leftPanelBasic","panelOpen","cssLeftPanel","cssScrollPane","cssTools","cssSpacer","cssSplitPageEntry","cssPageEntryMain","cssPageLink","cssPageIcon","cssLinkText","cssPageEntrySmall","createHelpTools","cssPageEntry","cssField","notificationIcon","iconName","cssToastIcon","buildNotificationDom","iconElement","hasLeftIcon","cssToastWrapper","cssToastBody","cssToastTitle","cssToastText","cssToastActions","cssToastAction","buildAction","cssToastMemos","memo","cssToastMemo","cssToastMemoIcon","cssToastClose","buildNotifyMenuButton","getStateForUI","buildConnectStateButton","setPopupToCreateDom","cssDropdownWrapper","cssDropdownContent","cssDropdownHeader","cssDropdownHeaderTitle","cssDropdownFeedbackLink","cssDropdownFeedbackIcon","cssDropdownStatus","cssDropdownStatusText","buildNotifyDropdown","defaultMenuOptions","buildSnackbarDom","cssSnackbarWrapper","cssProgressBarSize","cssProgressBarWrapper","cssProgressBarStatus","buildProgressDom","toast","manageTeamUsers","showUserManagerModal","permissionData","getOrgAccess","activeUser","resourceType","resourceId","resource","manageTeamUsersApp","getComputedSize","sizePx","getComputedStyle","sizeNum","parseFloat","Number","isFinite","cssResizeFlexVHandle","cssResizeDragging","pagePanels","noTestId","left","leftPanel","right","rightPanel","onResize","leftOverlap","dragResizer","bannerHeight","isScreenResizingObs","isScreenResizing","leftPaneDom","rightPaneDom","mainHeaderDom","contentTopDom","lastLeftOpen","lastRightOpen","onLeftTransitionFinish","sub1","narrow","sub2","pauseSavingLeft","pauseSaving","commandsGroup","leftPanelOpen","resolve","rightPanelOpen","reject","contentWrapper","cssPageContainer","contentTop","banner","updateTop","bottom","top","watchHeightElem","cssBannerContainer","h","cssContentMain","cssLeftPane","cssOverflowContainer","cssLeftPanelContainer","cssLeftPaneHeader","header","cssResizeDisabledBorder","cssHideForNarrowScreen","panelWidth","prepare","open","finish","evt1","hideOpener","isMouseInsideLeftPane","isFocusInsideLeftPane","isMouseDragging","MultiHolder","timeoutId","watchBlur","maybeStartCollapse","hiddenInput","maybePatchDomAndChangeFocus","onMouseEvt","evt","rect","buttons","onDrag","cssMainPane","cssTopHeader","cssPanelOpener","toggleObs","headerMain","contentMain","cssRightPane","cssRightPaneHeader","marginLeft","cssContentOverlay","cssBottomFooter","cssPanelOpenerNarrowScreenBtn","cssPanelOpenerNarrowScreen","contentBottom","boolObs","cssVBox","cssHBox","mediaSmall","cssHeader","mediaNotSmall","resizeOptions","sign","getTarget","handle","nextElementSibling","mouseDrag","startEv","startSize","startBodyCursor","cursor","onMove","pageX","onStop","onResizeStart","onChange","subtree","attributes","buildNewSiteModal","buildUpgradeModal","ShortcutKeyContentStrong","maybeAddSiteSwitcherSection","buildSiteSwitcher","cssOrgSelected","cssOrgCheckmark","menuIcon","SupportGristNudge","_telemetryModel","_shouldShowCardOrButton","_buttonState","_currentPage","_isClosed","_buildButton","_buildCard","dismissedPopup","_markAsDismissed","_close","cssContributeButton","cssButtonIconAndText","cssContributeButtonCloseButton","_dismissAndClose","cssCard","_buildSupportGristCardContent","_buildOptedInCardContent","cssCloseButton","cssLeftAlignedHeader","cssParagraph","helpCenterLink","supportGristLink","cssFullWidthButton","_optInToTelemetry","cssCenteredFlex","cssSparks","cssCenterAlignedHeader","cssPrimaryButton","updateTelemetryPrefs","createTopBarHome","isAnonymous","cssFlexSpace","showButton","menuAnnotate","cssHoverCircle","cssTopBarBtn","createUserImage","initials","cssUserImage","cssExampleUserIcon","cssUserPicture","pickColor","getInitials","hashCode","someColors","cssInput","ACCESS_DENIED","AUTH_INTERRUPTED","getGoogleCodeForReading","authLink","getGoogleAuthEndpoint","authWindow","screenX","screen","windowFeatures","openPopup","popup","listener","wrapped","source","closeHandler","clb","interval","setInterval","closed","clearInterval","attachListener","getGoogleAuthCode","googleDriveScope","canReadPrivateFiles","mouseDragElem","onStart","userSelect","_startDragging","mouseDragMatchElem","selector","dragHandler","stopEv","upLis","openTooltips","showTransientTooltip","refElem","tipContent","showTooltip","origClose","timer","timeoutMs","hasKey","getDom","cssTooltip","role","prepend","opacity","defaultOptions","setHoverTooltip","overflowTooltip","overflowOnly","textContent","openDelay","closeDelay","openOnClick","closeOnClick","tipContentFunc","tipControl","POSTPONED","mouseGrabbed","scheduleCloseIfOpen","cssDisableSelectOnAll","func","delay","clearTimer","timeout","resetTimer","tipDom","grabMouse","offsetWidth","scrollWidth","tooltipCloseButton","cssTooltipCloseButton","infoTooltip","menuOptions","domArgs","cssInfoTooltipButton","cssInfoTooltipPopup","cssInfoTooltipPopupCloseButton","cssInfoTooltipPopupBody","withInfoTooltip","domContents","tooltipContent","tooltipButtonDomArgs","tooltipMenuOptions","cssDomWithTooltip","descriptionInfoTooltip","testPrefix","cssDescriptionInfoTooltipButton","cssDescriptionInfoTooltip","cssTooltipCorner","transition","trans","watcher","firstCall","subscribeElem","reschedule","TransitionWatcher","prepareForTransition","prior","transitionProperty","_propertyName","duration","transitionDuration","_durationMs","propertyName","_timer","viewportEnabled","toggleViewport","addViewportTag","viewportContent","cssBreadcrumbs","cssTag","cssButton","button","props","cssButtonLink","primary","bigBasicButton","basicButtonLink","bigBasicButtonLink","textButton","cssButtonGroup","cssLabel","cssCheckboxSquare","cssLabelText","checkbox","cssCheckbox","field","checked","cssReversedLabel","cssInlineRelative","squareCheckbox","labeledSquareCheckbox","labeledLeftSquareCheckbox","Indeterminate","labeledTriStateSquareCheckbox","checkboxObs","triStateCheckbox","debounce","CustomProp","fallback","lightGrey","mediumGrey","mediumGreyOpaque","darkGrey","light","dark","darkText","darkBg","slate","lightGreen","darkGreen","darkerGreen","lighterGreen","lighterBlue","lightBlue","orange","selectionOpaque","selectionDarkerOpaque","inactiveCursor","hover","warning","warningBg","backdrop","fontFamily","fontFamilyData","xxsmallFontSize","xsmallFontSize","smallFontSize","mediumFontSize","introFontSize","largeFontSize","xlargeFontSize","xxlargeFontSize","xxxlargeFontSize","controlFontSize","smallControlFontSize","bigControlFontSize","headerControlFontSize","bigControlTextWeight","headerControlTextWeight","labelTextSize","labelTextBg","labelActiveBg","controlMargin","controlPadding","tightPadding","loosePadding","primaryBg","primaryBgHover","primaryFg","controlBg","controlFg","controlFgHover","controlBorder","controlBorderRadius","logoBg","logoSize","toastBg","menuZIndex","modalZIndex","onboardingBackdropZIndex","onboardingPopupZIndex","floatingPopupZIndex","tutorialModalZIndex","pricingModalZIndex","floatingPopupMenuZIndex","notificationZIndex","browserCheckZIndex","tooltipZIndex","lightText","errorText","dangerText","disabledText","pageBg","pageBackdrop","mainPanelBg","leftPanelBg","rightPanelBg","topHeaderBg","bottomFooterBg","pagePanelsBorder","pagePanelsBorderResizing","sidePanelOpenerFg","sidePanelOpenerActiveFg","sidePanelOpenerActiveBg","addNewCircleFg","addNewCircleBg","addNewCircleHoverBg","addNewCircleSmallFg","addNewCircleSmallBg","addNewCircleSmallHoverBg","topBarButtonPrimaryFg","topBarButtonSecondaryFg","topBarButtonDisabledFg","topBarButtonErrorFg","notificationsPanelHeaderBg","notificationsPanelBodyBg","notificationsPanelBorder","toastText","toastLightText","toastMemoText","toastMemoBg","toastErrorIcon","toastErrorBg","toastSuccessIcon","toastSuccessBg","toastWarningIcon","toastWarningBg","toastInfoIcon","toastInfoBg","toastControlFg","toastInfoControlFg","tooltipFg","tooltipBg","tooltipIcon","tooltipCloseButtonFg","tooltipCloseButtonHoverFg","tooltipCloseButtonHoverBg","tooltipPopupHeaderFg","tooltipPopupHeaderBg","modalBg","modalBackdrop","modalBorder","modalBorderDark","modalBorderHover","modalInnerShadow","modalOuterShadow","modalCloseButtonFg","modalBackdropCloseButtonFg","modalBackdropCloseButtonHoverFg","popupBg","popupInnerShadow","popupOuterShadow","popupCloseButtonFg","promptFg","progressBarFg","progressBarErrorFg","progressBarBg","linkHover","lightHover","cellEditorFg","cellEditorBg","cursorInactive","cursorReadonly","tableHeaderFg","tableHeaderSelectedFg","tableHeaderBg","tableHeaderSelectedBg","tableHeaderBorder","tableHeaderBorderDark","tableBodyBg","tableBodyBorder","tableAddNewBg","tableScrollShadow","tableFrozenColumnsBorder","tableDragDropIndicator","tableDragDropShadow","cardCompactWidgetBg","cardCompactRecordBg","cardBlocksBg","cardFormLabel","cardCompactLabel","cardBlocksLabel","cardFormBorder","cardCompactBorder","cardEditingLayoutBg","cardEditingLayoutBorder","cardListFormBorder","cardListBlocksBorder","selectionDarker","selectionDarkest","selectionOpaqueFg","selectionOpaqueBg","selectionOpaqueDarkBg","selectionHeader","widgetBg","widgetBorder","widgetActiveBorder","widgetInactiveStripesLight","widgetInactiveStripesDark","pinnedDocFooterBg","pinnedDocBorder","pinnedDocBorderHover","pinnedDocEditorBg","rawDataTableBorder","rawDataTableBorderHover","controlPrimaryFg","controlPrimaryBg","controlSecondaryFg","controlHoverFg","controlPrimaryHoverBg","controlSecondaryHoverFg","controlSecondaryHoverBg","controlDisabledFg","controlDisabledBg","controlPrimaryDisabled","checkboxBg","checkboxDisabledBg","checkboxBorder","checkboxBorderHover","moveDocsSelectedFg","moveDocsSelectedBg","moveDocsDisabledFg","filterBarButtonSavedFg","filterBarButtonSavedBg","filterBarButtonSavedHoverBg","iconDisabled","iconError","iconButtonFg","iconButtonPrimaryBg","iconButtonPrimaryHoverBg","iconButtonSecondaryBg","iconButtonSecondaryHoverBg","pageHoverBg","activePageFg","activePageBg","disabledPageFg","pageOptionsFg","pageOptionsHoverFg","pageOptionsHoverBg","pageOptionsSelectedHoverBg","pageInitialsFg","pageInitialsBg","pageInitialsEmojiBg","pageInitialsEmojiOutline","rightPanelTabFg","rightPanelTabBg","rightPanelTabIcon","rightPanelTabIconHover","rightPanelTabHoverBg","rightPanelTabSelectedFg","rightPanelTabSelectedBg","rightPanelTabButtonHoverBg","rightPanelSubtabFg","rightPanelSubtabSelectedFg","rightPanelSubtabSelectedUnderline","rightPanelSubtabHoverFg","rightPanelSubtabHoverUnderline","rightPanelDisabledOverlay","rightPanelToggleButtonEnabledFg","rightPanelToggleButtonEnabledBg","rightPanelToggleButtonEnabledHoverFg","rightPanelToggleButtonDisabledFg","rightPanelToggleButtonDisabledBg","rightPanelFieldSettingsBg","rightPanelFieldSettingsButtonBg","documentHistorySnapshotFg","documentHistorySnapshotSelectedFg","documentHistorySnapshotBg","documentHistorySnapshotSelectedBg","documentHistorySnapshotBorder","documentHistoryActivityText","documentHistoryActivityLightText","accentIcon","accentBorder","accentText","inputFg","inputBg","inputDisabledFg","inputDisabledBg","inputPlaceholderFg","inputBorder","inputValid","inputInvalid","inputFocus","inputReadonlyBg","inputReadonlyBorder","choiceEntryBg","choiceEntryBorder","choiceEntryBorderHover","selectButtonFg","selectButtonPlaceholderFg","selectButtonDisabledFg","selectButtonBg","selectButtonBorder","selectButtonBorderInvalid","menuText","menuLightText","menuBg","menuSubheaderFg","menuBorder","menuShadow","menuItemFg","menuItemSelectedFg","menuItemSelectedBg","menuItemDisabledFg","menuItemIconFg","menuItemIconSelectedFg","menuItemLinkFg","menuItemLinkSelectedFg","menuItemLinkselectedBg","autocompleteMatchText","autocompleteSelectedMatchText","autocompleteChoiceSelectedBg","searchBorder","searchPrevNextButtonFg","searchPrevNextButtonBg","loaderFg","loaderBg","siteSwitcherActiveFg","siteSwitcherActiveBg","docMenuDocOptionsFg","docMenuDocOptionsHoverFg","docMenuDocOptionsHoverBg","shortcutKeyFg","shortcutKeyPrimaryFg","shortcutKeySecondaryFg","shortcutKeyBg","shortcutKeyBorder","breadcrumbsTagFg","breadcrumbsTagBg","breadcrumbsTagAlertBg","widgetPickerPrimaryBg","widgetPickerSecondaryBg","widgetPickerItemFg","widgetPickerItemSelectedBg","widgetPickerItemDisabledBg","widgetPickerIcon","widgetPickerPrimaryIcon","widgetPickerSummaryIcon","widgetPickerBorder","widgetPickerShadow","codeViewText","codeViewKeyword","codeViewComment","codeViewMeta","codeViewTitle","codeViewParams","codeViewString","codeViewNumber","codeViewBuiltin","codeViewLiteral","importerTableInfoBorder","importerPreviewBorder","importerSkippedTableOverlay","importerMatchIcon","importerOutsideBg","importerMainContentBg","importerActiveFileBg","importerActiveFileFg","importerInactiveFileBg","importerInactiveFileFg","menuToggleFg","menuToggleHoverFg","menuToggleActiveFg","menuToggleBg","menuToggleBorder","infoButtonFg","infoButtonHoverFg","infoButtonActiveFg","buttonGroupFg","buttonGroupLightFg","buttonGroupBg","buttonGroupIcon","buttonGroupBorder","buttonGroupBorderHover","buttonGroupSelectedFg","buttonGroupLightSelectedFg","buttonGroupSelectedBg","buttonGroupSelectedBorder","accessRulesTableHeaderFg","accessRulesTableHeaderBg","accessRulesTableBodyFg","accessRulesTableBorder","accessRulesColumnListBorder","accessRulesColumnItemFg","accessRulesColumnItemBg","accessRulesColumnItemIconFg","accessRulesColumnItemIconHoverFg","accessRulesColumnItemIconHoverBg","accessRulesFormulaEditorBg","accessRulesFormulaEditorBorderHover","accessRulesFormulaEditorBgDisabled","accessRulesFormulaEditorFocus","cellFg","cellBg","cellZebraBg","chartFg","chartBg","chartLegendBg","chartXAxis","chartYAxis","commentsPopupHeaderBg","commentsPopupBodyBg","commentsPopupBorder","commentsUserNameFg","commentsPanelTopicBg","commentsPanelTopicBorder","commentsPanelResolvedTopicBg","datePickerSelectedFg","datePickerSelectedBg","datePickerSelectedBgHover","datePickerTodayFg","datePickerTodayBg","datePickerTodayBgHover","datePickerRangeStartEndBg","datePickerRangeStartEndBgHover","datePickerRangeBg","datePickerRangeBgHover","tutorialsPopupBorder","tutorialsPopupHeaderFg","tutorialsPopupBoxBg","aceEditorBg","aceAutocompletePrimaryFg","aceAutocompleteSecondaryFg","aceAutocompleteHighlightedFg","aceAutocompleteBg","aceAutocompleteBorder","aceAutocompleteLink","aceAutocompleteLinkHighlighted","aceAutocompleteActiveLineBg","aceAutocompleteLineBorderHover","aceAutocompleteLineBgHover","colorSelectFg","colorSelectBg","colorSelectShadow","colorSelectFontOptionsBorder","colorSelectFontOptionFg","colorSelectFontOptionBg","colorSelectFontOptionBgHover","colorSelectFontOptionFgSelected","colorSelectFontOptionBgSelected","colorSelectColorSquareBorder","colorSelectColorSquareBorderEmpty","colorSelectInputFg","colorSelectInputBg","colorSelectInputBorder","highlightedCodeBlockBg","highlightedCodeBlockBgDisabled","highlightedCodeFg","highlightedCodeBorder","highlightedCodeBgDisabled","loginPageBg","loginPageBackdrop","loginPageLine","formulaAssistantHeaderBg","formulaAssistantBorder","formulaAssistantPreformattedTextBg","cssColors","decl","cssVars","cssFontParams","cssVarsOnly","cssBodyVars","cssBody","cssRoot","cssRootVars","mediaMedium","innerWidth","_isNarrowScreenObs","_isScreenResizingObs","_prefersDarkModeObs","ping","matchMedia","attachCssRootVars","varsOnly","documentElement","customTheme","interfaceStyle","themeColors","properties","getCssScrollbarProperties","getCssThemeBackgroundProperties","append","getOrCreateStyleElement","hideInPrintView","cssHideInPrint","noop","rawTextInput","cssTextInput","cssSizer","editableLabel","inputArgs","input","sizer","select","inputEl","setValue","disabled","revertToSaved","saveEdit","iconDiv","cssIconBackground","cssIconButton","cssLink","gristLink","newUrlState","onClickHyperLink","makeLinks","cssMaybeWrap","cssHoverInText","linkColor","ex","cssHoverIn","parentClass","rotate360","flash","loadingSpinner","loadingDots","cssLoadingDotsContainer","cssLoadingDot","_lastOpenedController","closeRegisteredMenu","registerMenuOpen","createFunc","menuItemSubmenu","submenu","cssMenuElem","menuItemStyle","optionArray","renderOptionArgs","weaselOptions","_menu","cssSelectMenuElem","_btn","menuClass","otherOptions","selectOptions","buttonArrow","cssInlineCollapseIcon","buttonCssClass","op","cssOptionRow","cssOptionRowIcon","cssOptionLabel","linkSelect","cssSelectBtnLink","removeAttribute","multiSelect","selectedOptions","availableOptions","selectedOptionsSet","selectedOptionsText","selectedOpts","placeholder","opt","cssMultiSelectSummary","cssMultiSelectMenu","tabindex","minWidth","getTriggerElem","marginRight","option","fullOption","cssCheckboxLabel","_ev","cssCheckboxText","buildMultiSelectMenu","formSelect","defaultLabel","cssSelectBtnContainer","hidden","cssCollapseIcon","inputMenu","trigger","triggerElem","cssInputButtonMenuElem","upgradableMenuItem","needUpgrade","rem","upgradeText","cssUpgradeTextButton","autocomplete","inputElem","choices","selectMenu","stretchToSelector","isDisabled","toggle","selectTitle","selectOption","menuItemAsync","menuItemCmd","cssCmdKey","cssMenuItemCmd","cssAnnotateMenuItem","ModalControl","_doClose","_doFocus","_inProgress","_workInProgress","_shouldClose","closeAndWait","_closePromise","_doCloseAndWait","workInProgress","closePromise","StayOpen","preventClose","catchErrors","waitGrainObs","wip","modal","createFn","noEscapeKey","noClickAway","backerDomArgs","modalDom","dialogDom","closeModal","cssModalBacker","collapseModal","removeChild","collapsedRect","originX","originY","transformOrigin","doClose","cssModalDialog","visibility","saveModal","modalOptions","isSaveDisabled","saveDisabled","doWork","saveFunc","cssModalTitle","cssModalBody","cssModalButtons","saveLabel","extraButtons","hideCancel","cssModalWidth","modalArgs","confirmModal","btnText","onConfirm","explanation","promptModal","initial","onCancel","confirmed","txtInput","onInput","invokePrompt","onResolve","prom","spinnerModal","then","cssModalSpinner","cssSpinner","reference","domCreator","popupOpen","cssModalTopPadding","cssModalBottomPadding","cssModalHorizontalPadding","cssModalCloseButton","cssFadeIn","cssFadeOut","cssAnimatedModal","cssSelectBtn","ApiError","_numPendingRequests","propertyKey","descriptor","originalMethod","countPendingRequest","apply","requestJson","request","newFormData","FormData","_headers","_extraParameters","extraParameters","defaultHeaders","config","getHeaders","resp","withCredentials","validateStatus","throwApiError","BaseAPI","errorDetails","statusText","countRequest","BillingSubPage","BillingTask","BillingAPIImpl","_homeUrl","_url","settings","delta","orgUrl","checkoutUrl","tier","planId","active","addCurrentOrgToPath","OpenDocMode","PERSONAL_LEGACY_PLAN","PERSONAL_FREE_PLAN","TEAM_FREE_PLAN","isFreePersonalPlan","isLegacyPlan","isFreeLegacyPlan","isTeamPlan","isPersonalPlan","isFreePlan","isFreeTeamPlan","InactivityTimer","_callback","_delay","_counter","_enabled","delayMs","_clearTimeout","_timeout","_setTimeout","_beginActivity","_endActivity","_onTimeoutTriggered","InstallAPIImpl","localeCodes","locales","currencies","regionDisplay","languageDisplay","Locale","region","supportedLocalesOf","currenciesCodes","getCurrency","currency","currencyDisplay","getCountryCode","b","nativeCompare","SortPref","ViewPref","DeprecationWarning","WelcomePopup","RefCountMap","_map","_createKey","_disposeKey","_gracePeriodMs","rcValue","_useKey","_releaseKey","_doDisposeKey","r","count","ms","unsetTimeout","RefCountValue","disposeTimeout","StringUnion","freeze","valueSet","guard","actual","expected","TypeError","unionNamespace","checkAll","Level","TelemetryContracts","apiUsage","description","retentionPeriod","metadataContracts","dataType","assistantOpen","docIdDigest","conversationId","altSessionId","assistantSend","siteId","siteType","assistantReceive","suggestedFormula","assistantSave","newFormula","oldFormula","assistantCancel","assistantClearConversation","assistantClose","suggestionApplied","conversationLength","conversationHistoryLength","beaconOpen","beaconArticleViewed","beaconEmailSent","beaconSearch","documentForked","forkIdDigest","forkDocIdDigest","trunkIdDigest","lastActivity","documentOpened","isPublic","isSnapshot","lastUpdated","documentUsage","triggeredBy","rowCount","dataSizeBytes","attachmentsSize","numAccessRules","numUserAttributes","numAttachments","attachmentTypes","numCharts","chartTypes","numLinkedCharts","numLinkedWidgets","numColumns","numColumnsWithConditionalFormatting","numFormulaColumns","numTriggerFormulaColumns","numSummaryFormulaColumns","numFieldsWithConditionalFormatting","numTables","numOnDemandTables","numTablesWithConditionalFormatting","numSummaryTables","numCustomWidgets","customWidgetIds","processMonitor","heapUsedMB","heapTotalMB","cpuAverage","intervalMs","sendingWebhooks","numEvents","signupFirstVisit","signupVerified","isAnonymousTemplateSignup","templateId","siteMembership","numOwners","numEditors","numViewers","siteUsage","inGoodStanding","stripePlanId","numDocs","numWorkspaces","numMembers","earliestDocCreatedAt","tutorialProgressChanged","tutorialForkIdDigest","tutorialTrunkIdDigest","lastSlideIndex","numSlides","percentComplete","tutorialRestarted","watchedVideoTour","watchTimeSeconds","ThemePrefs","ThemeAppearance","ThemeNameOrColors","ThemeName","Theme","ThemeColors","ThemePrefsChecker","createCheckers","ThemeAppearanceChecker","ThemeNameChecker","getDefaultThemePrefs","THEMES","GristLight","GristDark","getThemeColors","ANONYMOUS_USER_EMAIL","EVERYONE_EMAIL","getOrgName","isTemplatesOrg","templateOrg","getRealAccess","inheritedAccess","parentAccess","maxInheritedRole","roleNames","getUserRoleText","UserAPIImpl","merged","workspaceId","orgId","onlyFeatured","updateDoc","workspace","allowGoogleLogin","isConsultant","docWorkerInfo","docWorkerUrl","selfPrefix","getDocWorkerUrl","_urlWithOrg","getWorker","DocWorkerAPIImpl","DocAPIImpl","res","tableName","getDocAPI","getRows","material","formData","timezone","requestAxios","onUploadProgress","defaultHeadersWithoutContentType","base","uploadId","browserSettings","template","extra","tableId","_getRecords","records","changes","additions","removals","raw","snapshotIds","webhook","fields","webhookId","unsubscribeKey","recoveryMode","remoteDocId","q","leftHash","rightHash","removeHistory","encodeQueryParams","endpoint","filters","immediate","csvEncodeRow","csvEncodeCell","csvDecodeRow","main","csvDecodeCell","unshift","msec","clone","SpecialDocPage","isViewDocPage","HomePage","WelcomePage","AccountPage","ActivationPage","LoginPage","SupportGristPage","InterfaceStyle","commonUrls","help","isClient","helpCenterUrl","process","env","GRIST_HELP_CENTER","getHelpCenterUrl","helpAccessRules","helpAssistantDataUse","helpColRefs","helpConditionalFormatting","helpFilterButtons","helpLinkingWidgets","helpRawData","helpUnderstandingReferenceColumns","helpTriggerFormulas","helpTryingOutChanges","helpCustomWidgets","helpTelemetryLimited","plans","sproutsProgram","contact","templates","community","functions","formulaSheet","basicTutorial","basicTutorialImage","gristLabsCustomWidgets","gristLabsWidgetRepository","githubGristCore","githubSponsorGristLabs","hostname","orgInPath","newOrg","currentHost","pathOnly","hostType","baseDomain","getHostType","getOrgUrlInfo","encodeURIComponent","mode","queryParams","hashParts","rowId","partValue","partKey","queryStr","welcomeTour","docTour","manageUsers","postEncode","preDecode","decodeURIComponent","subdomain","parseSubdomain","sp","parseInt","fork","parseUrlId","forkId","billingPlan","billingTask","embed","isAffirmative","compare","hashMap","part","startsWith","ch","userOverrideParams","extraState","combined","aclAsUser","aclAsUserId","exec","subdomainRegex","isFeatureEnabled","feature","getPageTitleSuffix","pageTitleSuffix","getKnownOrg","GRIST_SINGLE_ORG","getSingleOrg","extractOrgParts","reqHost","reqPath","orgFromHost","GRIST_ORG_IN_PATH","isOrgInPathOnly","getOrgFromHost","parseFirstUrlPart","orgFromPath","mismatch","pathRemainder","sanitizePathTail","tag","snapshotId","bareParts","trunkId","forkUserId","buildUrlId","x","getSlugIfNeeded","shouldIncludeSlug","UP_TRIANGLE","DOWN_TRIANGLE","EMAIL_RE","RegExp","prefix","suffix","removePrefix","removeSuffix","removeTrailingSlash","padStart","targetLength","padString","capitalize","capitalizeFirstWord","isNumber","isNaN","between","bound1","bound2","lower","upper","mod","roundDownToMultiple","m","floor","undefDefault","y","undef","list","firstDefined","defaultVal","encodeQueryParam","maxsplit","sep","maxNumSplits","pos","arraysEqual","setDifference","ai","arrayLike","array","arrayInsertBefore","nextValue","arrayExtend","anotherArray","len","arrayCopyForward","toArray","toStart","fromArray","fromStart","end","xend","arrayCopyBackward","j","xStart","arrayAppend","arraySplice","arrToInsert","origLen","tailLen","insLen","sortedIndex","compareFunc","mid","lo","hi","hasDuplicates","prevVals","countIf","map2","array1","array2","mapFunc","growMatrix","dataMatrix","colArr","colVals","_v","multiCompareFunc","sortKeyFuncs","compareFuncs","optAscending","ascending","compareOutcome","keyA","keyB","propertyCompare","property","defaultLocale","defaultCollator","Collator","localeCompare","setDefault","mapInst","getSetMapValue","buildValue","popFromMap","addCountsToMap","valueCounts","mappedValue","isSubset","smaller","larger","deepExtend","_varArgObjects","object","tgt","byteString","bytes","toFixed","mapToObject","keysArray","optThisArg","pruneArray","indexes","arrAt","indexesAt","_kwlist","sanitizeIdent","ident","cloneFunc","eval","genRandomId","optPrefix","chars","ret","random","sortedScan","arrA","arrB","optKeyFunc","keyFunc","getReconnectTimeout","attemptNumber","intervals","isEmail","waitObs","predicate","_reject","peek","sub","inlineStyle","valueObs","PromiseChain","_last","nextCB","isColorDark","hexColor","isDarkBelow","rgb","isValidHex","timeoutMsec","isPending","done","race","parameter","isNonNullish","not","getDistinctValues","Infinity","distinct","assertIsDefined","retryOnce","recover","notSet","ifNotSet","def","OWNER","EDITOR","VIEWER","GUEST","MEMBER","roleOrder","getEffectiveRole","canEditAccess","canEdit","isOwnerOrEditor","canUpgradeOrg","isValidRole","isBasicRole","getStrongestRole","getFirstMatchingRole","getWeakestRole","anyOf","getTagManagerScript","tagId","tbind","boundArgs","pad","num","timeFormatKeys","out","date","getHours","getMinutes","getSeconds","d","getDate","getMonth","getFullYear","M","getMilliseconds","Y","timeFormatHelper","D","T","A","format","helper","skipIfInDomain","srcParts","baseHref","getOriginUrl","getInitialDocAssignment","assignmentId","pageHasDocList","baseUrl","constant","times","arrayRepeat","module","exports","unbind","Mousetrap","addKeycodes","customStopCallbacks","WeakMap","MousetrapProtype","origStopCallback","stopCallback","sequence","mousetrapBindingsPaused","custom","setPaused","setCustomStopCallback","allGlobals","globalVars","updateGlobals","neededNames","globals","varArgNames","setGlobals","oldVars","ko","firstArg","Node","createElemFromString","createDOMElement","handleChildren","tagString","elemCreator","classes","dotPos","hashPos","tagName","createSVGElement","createElementNS","child","createTextNode","wrapInlinable","makeFilterFunc","selectorOrFunc","frag","varArgNodes","createDocumentFragment","fwdArgs","startIndex","inlinable","inlineable","optElem","getElementById","hide","show","optYesNo","dragOverClass","counter","lastTarget","originalEvent","dataTransfer","types","dropEffect","node","howMany","optNewChildren","childNodes","replaceChild","insertBefore","childIndex","findLastChild","filterFunc","lastChild","previousSibling","findAncestor","optContainer","detachNode","events","optSelector","optData","handler","$","once","one","defer","optContext","utils","domNodeDisposal","addDisposeCallback","disposableValue","version","gitcommit","hooks","iframeAttributes","credentialless","fetchHook","urlTweaks","at","fakeUrl","gristOverrides","isShadow","getRootNode","isSameNode","toNumber","cssValue","getBorders","computedStyle","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","getClientRectFromMixedType","clippingParent","getClippingRect","boundary","rootBoundary","mainClippingParents","clippingParents","clipperElement","position","getClippingParents","concat","firstClippingParent","clippingRect","reduce","accRect","decorations","getCompositeRect","elementOrVirtualElement","offsetParent","isFixed","scroll","scrollLeft","scrollTop","offsets","clientLeft","clientTop","getDecorations","win","borders","isHTML","winScrollBarX","clientWidth","clientHeight","innerHeight","offsetHeight","getDocumentElement","ownerDocument","getDocumentRect","winScroll","documentRect","getHTMLElementScroll","getNodeName","nodeName","getNodeScroll","getTrueOffsetParent","getOffsetParent","getParentNode","assignedSlot","getScrollParent","_getComputedStyle","overflow","overflowX","overflowY","getViewportRect","visualViewport","getWindow","defaultView","getWindowScroll","pageXOffset","pageYOffset","getWindowScrollBarX","isElement","Element","isHTMLElement","HTMLElement","isTableElement","listScrollParents","scrollParent","isBody","updatedList","auto","basePlacements","viewport","variationPlacements","acc","placements","modifierPhases","getLayoutRect","offsetLeft","offsetTop","order","visited","modifier","requiresIfExists","dep","depModifier","DEFAULT_OPTIONS","strategy","areValidElements","_len","popperGenerator","generatorOptions","_generatorOptions","_generatorOptions$def","defaultModifiers","_generatorOptions$def2","pending","orderedModifiers","elements","effectCleanupFns","isDestroyed","setOptions","cleanupModifierEffects","scrollParents","contextElement","orderModifiers","current","existing","_ref3","_ref3$options","effect","cleanupFn","update","_state$elements","rects","_state$orderedModifie","_state$orderedModifie2","undefined","onFirstUpdate","passive","_ref","_options$scroll","_options$resize","resize","computeOffsets","unsetSides","mapToStyles","_ref2","_Object$assign2","popperRect","adaptive","_roundOffsets","dpr","devicePixelRatio","round","roundOffsets","hasX","hasY","sideX","sideY","_Object$assign","commonStyles","_options$gpuAccelerat","_options$adaptive","getBasePlacement","popperOffsets","initialStyles","margin","attribute","_options$offset","basePlacement","invertDistance","skidding","distance","distanceAndSkiddingToXY","_data$state$placement","getOppositePlacement","matched","getOppositeVariationPlacement","_skip","specifiedFallbackPlacements","fallbackPlacements","altBoundary","_options$flipVariatio","flipVariations","allowedAutoPlacements","preferredPlacement","oppositePlacement","getExpandedFallbackPlacements","_options$allowedAutoP","variation","getVariation","overflows","detectOverflow","computeAutoPlacement","referenceRect","checksMap","makeFallbackChecks","firstFittingPlacement","_basePlacement","isStartVariation","isVertical","mainVariationSide","altVariationSide","checks","every","_loop","_i","fittingPlacement","within","_options$mainAxis","mainAxis","checkMainAxis","_options$altAxis","altAxis","checkAltAxis","_options$tether","tether","_options$tetherOffset","tetherOffset","isBasePlacement","getMainAxisFromPlacement","tetherOffsetValue","mainSide","altSide","additive","minLen","maxLen","arrowElement","arrowRect","arrowPaddingObject","getFreshSideObject","arrowPaddingMin","arrowPaddingMax","arrowLen","minOffset","maxOffset","arrowOffsetParent","clientOffset","offsetModifierValue","tetherMin","tetherMax","preventedOffset","_mainSide","_altSide","_offset","_preventedOffset","getSideOffsets","preventedOffsets","isAnySideFullyClipped","eventListeners","_state$modifiersData$","axis","paddingObject","minProp","maxProp","endDiff","startDiff","clientSize","centerToReference","center","axisProp","centerOffset","_options$element","_options$padding","mergePaddingObject","expandToHashMap","referenceOverflow","elementContext","popperAltOverflow","referenceClippingOffsets","popperEscapeOffsets","isReferenceHidden","hasPopperEscaped","commonX","commonY","ceil","_options$placement","_options$boundary","_options$rootBoundary","_options$elementConte","_options$altBoundary","altContext","referenceElement","clippingClientRect","referenceClientRect","popperClientRect","elementClientRect","overflowOffsets","offsetData","multiply","rectToClientRect","settle","cookies","buildURL","buildFullPath","parseHeaders","isURLSameOrigin","createError","requestData","requestHeaders","responseType","isFormData","XMLHttpRequest","auth","username","password","unescape","Authorization","btoa","fullPath","baseURL","onloadend","responseHeaders","getAllResponseHeaders","responseText","paramsSerializer","onreadystatechange","readyState","responseURL","onabort","onerror","ontimeout","timeoutErrorMessage","transitional","clarifyTimeoutError","isStandardBrowserEnv","xsrfValue","xsrfCookieName","read","xsrfHeaderName","setRequestHeader","isUndefined","onDownloadProgress","upload","cancelToken","cancel","abort","send","Axios","mergeConfig","createInstance","defaultConfig","extend","axios","instanceConfig","Cancel","CancelToken","isCancel","promises","spread","isAxiosError","__CANCEL__","executor","resolvePromise","throwIfRequested","InterceptorManager","dispatchRequest","validator","validators","interceptors","assertOptions","silentJSONParsing","boolean","forcedJSONParsing","requestInterceptorChain","synchronousRequestInterceptors","interceptor","runWhen","synchronous","fulfilled","rejected","responseInterceptorChain","chain","newConfig","onFulfilled","onRejected","getUri","handlers","eject","isAbsoluteURL","combineURLs","requestedURL","enhanceError","transformData","throwIfCancellationRequested","transformRequest","common","adapter","transformResponse","toJSON","number","fileName","lineNumber","columnNumber","config1","config2","valueFromConfig2Keys","mergeDeepPropertiesKeys","defaultToConfig2Keys","directMergeKeys","getMergedValue","isPlainObject","mergeDeepProperties","axiosKeys","otherKeys","fns","normalizeHeaderName","DEFAULT_CONTENT_TYPE","setContentTypeIfUnset","isArrayBuffer","isBuffer","isStream","isFile","isBlob","isArrayBufferView","buffer","isURLSearchParams","isObject","strictJSONParsing","isString","maxContentLength","maxBodyLength","thisArg","encode","serializedParams","isDate","toISOString","hashmarkIndex","relativeURL","write","expires","secure","toGMTString","payload","originURL","msie","urlParsingNode","resolveURL","charAt","requestURL","parsed","normalizedName","ignoreDuplicateOf","line","pkg","thing","deprecatedWarnings","currentVerArr","isOlderVersion","thanVersion","pkgVersionArr","destVer","isDeprecated","formatMessage","schema","allowUnknown","getPrototypeOf","isFunction","ArrayBuffer","isView","pipe","assignValue","stripBOM","byteLength","b64","lens","getLens","validLen","placeHoldersLen","toByteArray","tmp","Arr","_byteLength","curByte","revLookup","fromByteArray","uint8","extraBytes","maxChunkLength","len2","encodeChunk","lookup","Uint8Array","output","o","enumerable","toStringTag","__esModule","default","getFirstMatch","getSecondMatch","matchAndReturnConst","getWindowsVersionName","getMacOSVersionName","getAndroidVersionName","getVersionPrecision","compareVersions","u","getBrowserAlias","BROWSER_ALIASES_MAP","getBrowserTypeByAlias","BROWSER_MAP","ENGINE_MAP","OS_MAP","PLATFORMS_MAP","Bada","BlackBerry","Chrome","Chromium","Epiphany","Firefox","Focus","Generic","Googlebot","Maxthon","Opera","PhantomJS","Puffin","QupZilla","QQ","QQLite","Safari","Sailfish","SeaMonkey","Sleipnir","Swing","Tizen","Vivaldi","WeChat","Roku","amazon_silk","android","bada","blackberry","chrome","chromium","epiphany","firefox","generic","googlebot","google_search","ie","k_meleon","maxthon","edge","mz","naver","opera","opera_coast","phantomjs","puffin","qupzilla","qq","qqlite","safari","sailfish","samsung_internet","seamonkey","sleipnir","swing","tizen","uc","vivaldi","webos","wechat","yandex","tablet","mobile","desktop","tv","WindowsPhone","Windows","MacOS","iOS","Android","WebOS","Linux","ChromeOS","PlayStation4","EdgeHTML","Blink","Trident","Presto","Gecko","WebKit","configurable","writable","getParser","getResult","_ua","parsedResult","getUA","parseBrowser","describe","getBrowser","getBrowserName","getBrowserVersion","getOS","os","parseOS","getOSName","getOSVersion","getPlatform","parsePlatform","getEngine","engine","parseEngine","getEngineName","satisfies","isOS","isPlatform","f","isBrowser","compareVersion","isEngine","is","versionName","vendor","model","base64","ieee754","customInspectSymbol","Buffer","SlowBuffer","alloc","INSPECT_MAX_BYTES","K_MAX_LENGTH","createBuffer","RangeError","buf","setPrototypeOf","arg","encodingOrOffset","allocUnsafe","string","encoding","isEncoding","fromString","arrayView","isInstance","fromArrayBuffer","byteOffset","fromArrayLike","fromArrayView","SharedArrayBuffer","valueOf","numberIsNaN","fromObject","toPrimitive","assertSize","mustMatch","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","dir","arrayIndexOf","indexSize","arrLength","valLength","readUInt16BE","foundIndex","found","hexWrite","remaining","strLen","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","base64Write","ucs2Write","units","utf16leToBytes","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","decodeCodePointsArray","kMaxLength","TYPED_ARRAY_SUPPORT","proto","foo","typedArraySupport","poolSize","fill","allocUnsafeSlow","_isBuffer","swap16","swap32","swap64","toLocaleString","equals","inspect","thisStart","thisEnd","thisCopy","targetCopy","_arr","hexSliceLookupTable","checkOffset","ext","checkInt","checkIEEE754","writeFloat","littleEndian","noAssert","writeDouble","newBuf","subarray","readUintLE","readUIntLE","mul","readUintBE","readUIntBE","readUint8","readUInt8","readUint16LE","readUInt16LE","readUint16BE","readUint32LE","readUInt32LE","readUint32BE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUintLE","writeUIntLE","writeUintBE","writeUIntBE","writeUint8","writeUInt8","writeUint16LE","writeUInt16LE","writeUint16BE","writeUInt16BE","writeUint32LE","writeUInt32LE","writeUint32BE","writeUInt32BE","writeIntLE","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","copyWithin","INVALID_BASE64_RE","leadSurrogate","base64clean","dst","alphabet","table","i16","dest","DocumentFragment","_noopOwner","_defaultDisposableOwner","_disposalList","DisposalList","static","origDefaultOwner","holder","setDisposeOwner","e2","release","wipeOnDispose","_wipeOutObject","disposalList","callAndDispose","_describe","_owned","_disposalListener","_onOutsideDispose","_unlisten","owned","disposalListener","DisposeListener","_insertBefore","_next","callAll","_disposeList","begin","_removeNode","DepItem","_priority","_enqueued","_creation","_nextCreationNum","_context","useDep","depItem","recompute","enqueue","queue","_isPrior","isPrior","curIdx","parIdx","parItem","leftIdx","rightIdx","bestIdx","isPrioritySmaller","_seen","bundleDepth","compute","BaseObservable","_onChange","_value","emit","_disposeOwned","hasListeners","setListenerChangeCB","changeCB","setChangeCB","_getDepItem","_setWithArg","obsHolder","_disposeMap","_walkDom","visitFunc","firstChild","nextSibling","_disposeNode","disposer","domDisposeHooks","disposeNode","disposeRecursive","domDispose","onDisposeElem","disposerFunc","prevDisposer","autoDisposeElem","disposable","fromKoWrappers","toKoWrappers","fromKo","koObs","KoWrapObs","_koObs","_koSub","toKo","knockout","grainObs","prevKoObs","newKoObs","koDisposalIsSetup","setupKoDisposal","koDomNodeDisposal","origKoCleanExternalData","cleanExternalData","origGrainDisposeRecursive","newKoCleanExternalData","cleanNode","emptyArray","Subscription","dependencies","_depItem","_evaluate","_dependencies","_depListeners","_subscribeTo","_dynDeps","_useFunc","_useDependency","_obs","_inUse","readArgs","_enqueue","_noWrite","_write","_sub","_read","readCb","writeFunc","subscribeBindable","koValue","comp","_dataMap","attrsElem","attrsObj","attrElem","attrName","attrValue","attr","attrValueObs","boolAttrElem","boolValue","boolAttr","boolValueObs","textElem","textNode","nodeValue","styleElem","propElem","showElem","hideElem","clsElem","_clsDynamicPrefix","clsPrefix","prevClass","dataElem","_updateWithArgsOrDispose","_createFromTagString","_createElementHtml","_createElementSvg","_updateWithArgs","_updateWithArg","findAll","querySelectorAll","replaceContent","nodeBefore","nodeAfter","domComputed","contentFunc","markerPre","createComment","markerPost","domComputedOwned","maybe","maybeOwned","buildDom","ObsArray","_ownedItems","_setWithSplice","oldOwnedItems","MutableObsArray","newLen","deleteCount","newValues","ComputedArray","obsArr","_mapper","_syncMap","obsArrayValue","_unsync","_source","_listener","_recordChange","_rebuild","_lastSplice","_applySplice","sourceArray","newItems","oldItems","mapper","makeLiveIndex","initialIndex","LiveIndex","_obsArray","_isLive","_onArrayChange","setLive","itemCreateFunc","nodes","newArr","oldArr","endIndex","nextElem","DomEventListener","handleEvent","DomEventMatchListener","inner","outer","_findMatch","onElem","onMatchElem","onMatch","evType","keyHandlers","plainHandler","onKeyPress","onKeyDown","PureComputed","_inCall","_onListenerChange","_activate","pureComputed","creator","StylePiece","newCreator","addToElem","KeyframePiece","_global","_mounted","_nextClassName","_unmounted","_grainNextStyleNum","getNextStyleNum","sheet","_createRules","piece","_mountAll","nestedStart","createCssRules","isValid","validity","valid","checkValidity","unwrapMaybeObsArray","getOptionValue","defLabel","obsValue","selectedIndex","_noop","LLink","_prev","Emitter","_changeCB","_changeCBContext","Listener","_triggerChangeCB","emitter","bindB","bindUB","bindBU","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","abs","LN2","z","w","R","jQuery","H","S","K","W","X","Z","oc","bb","pc","aa","ba","pd","qa","Pb","kb","tc","F","da","Zc","Ka","fd","J","deferUpdates","useOnlyNativeEvents","foreachHidesDestroyed","__proto__","C","Oa","MouseEvents","propertychange","getElementsByTagName","Ic","Lb","hb","vc","Mb","fb","gb","$b","Ba","zb","O","Ha","Sb","removeNode","Xb","la","na","Ca","cloneNode","ua","Wc","nodeType","Ua","Yc","Cb","Td","ud","compareDocumentPosition","Rb","jd","P","zc","onError","Fc","attachEvent","I","za","detachEvent","Fb","createEvent","dispatchEvent","initEvent","click","fireEvent","N","Eb","baseVal","Ab","zd","Xc","mergeAttributes","zoom","vd","Od","Da","Xd","Yd","Kc","Md","Function","fc","Nd","includeFields","submitter","submit","getTime","Tb","xb","cleanData","thead","tbody","tfoot","tr","td","th","optgroup","ta","parseHTML","clean","parentWindow","innerShiv","Ld","dc","html","Tc","sd","Jd","Wb","ad","bd","ma","scheduler","yb","resetForTesting","Rd","Ta","throttle","throttleEvaluation","rateLimit","Hb","tb","deferred","notifySubscribers","notify","equalityComparer","gc","kc","lc","Ib","ab","Jb","ob","rc","Qa","Gb","Wa","dd","wc","mb","Cd","mc","qb","qc","Ad","Pc","U","ac","nd","od","ed","pa","Va","rb","Wd","sa","xa","wa","Na","Ya","Mc","Ia","trackArrayChanges","removeAll","_destroy","destroyAll","sorted","reversed","yc","Oc","Ob","Nb","sparse","L","Jc","lb","ka","Xa","ha","ra","pb","hc","vb","Vc","disposeWhenNodeIsRemoved","Sa","disposeWhen","Qb","V","Hc","pure","deferEvaluation","ea","ja","La","Ub","Ma","Ja","Id","Qd","Gc","yd","xd","Nc","Ed","wb","$c","Vd","Ga","__ko__hasDomDataOptionValue__","Yb","getAttributeNode","specified","ya","unknown","Ra","va","Zb","ub","getBindingHandler","preprocess","valueAccessors","bindingParams","Hd","$a","ul","ol","Ea","Uc","Vb","Bd","Ud","Rc","ga","md","nodeHasBindings","getAttribute","getComponentNameForNode","getBindings","getBindingsString","parseBindingsString","sc","getBindingAccessors","B","Sc","xc","ib","Kb","preprocessNode","bindingContextForDescendants","gd","Dc","oa","Bb","ca","after","Lc","$data","controlsDescendantBindings","shouldBindDescendants","fa","textarea","$parents","$root","$rawData","dataDependency","exportDependencies","createChildContext","as","noChildContext","$parentContext","$parent","rd","Bc","Fa","Sd","eb","kd","Pa","Cc","definition","Fd","loaders","suppressLoaderExceptions","Ac","nc","viewModel","require","register","sb","unregister","Ec","getConfig","loadComponent","loadTemplate","loadViewModel","cd","$raw","component","createViewModel","templateNodes","$component","$componentTemplateNodes","koDescendantsComplete","lookupNamespaceURI","removeAttributeNS","setAttributeNS","uniqueName","checkedValue","__ko__cssValue","css","disable","returnValue","cancelBubble","foreach","Qc","includeDestroyed","afterAdd","beforeRemove","afterRender","beforeMove","afterMove","templateEngine","hasfocus","__ko_hasfocusUpdating","__ko_hasfocusLastValue","let","Q","multiple","cc","textinput","qd","using","form","visible","renderTemplateSource","createJavaScriptEvaluatorBlock","makeTemplateSource","ia","renderTemplate","isTemplateRewritten","allowTemplateRewriting","rewriteTemplate","ic","wd","Kd","ld","Db","jb","hd","jc","ec","bc","Pd","$index","ifnot","moved","dontLimitMoves","Aa","nb","_countWaitingForRemove","E","Dd","Za","Gd","tmpl","koBindingContext","templateOptions","appendTo","fragments","addTemplate","ko_code","ko_with","localeString","components","AD","AE","AF","AG","AI","AL","AM","AN","AO","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","ST","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW","DataView","getNative","hashClear","hashDelete","hashGet","hashHas","hashSet","Hash","entry","listCacheClear","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","ListCache","mapCacheClear","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","MapCache","setCacheAdd","setCacheHas","SetCache","__data__","stackClear","stackDelete","stackGet","stackHas","stackSet","Stack","iteratee","resIndex","baseTimes","isArguments","isIndex","isTypedArray","inherited","isArr","isArg","isBuff","isType","skipIndexes","baseAssignValue","eq","objValue","copyObject","keysIn","arrayEach","baseAssign","baseAssignIn","cloneBuffer","copyArray","copySymbols","copySymbolsIn","getAllKeys","getAllKeysIn","getTag","initCloneArray","initCloneByTag","initCloneObject","isMap","isSet","argsTag","funcTag","objectTag","cloneableTags","baseClone","bitmask","customizer","isDeep","isFlat","isFull","isFunc","stacked","subValue","objectCreate","baseCreate","baseForOwn","baseEach","createBaseEach","arrayPush","isFlattenable","baseFlatten","depth","isStrict","baseFor","createBaseFor","castPath","toKey","keysFunc","symbolsFunc","getRawTag","objectToString","symToStringTag","baseGetTag","isObjectLike","baseIsEqualDeep","baseIsEqual","other","equalArrays","equalByTag","equalObjects","arrayTag","equalFunc","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","matchData","noCustomizer","srcValue","COMPARE_PARTIAL_FLAG","isMasked","toSource","reIsHostCtor","funcProto","objectProto","funcToString","reIsNative","isLength","typedArrayTags","baseMatches","baseMatchesProperty","isPrototype","nativeKeys","nativeKeysIn","isProto","isArrayLike","collection","baseIsMatch","getMatchData","matchesStrictComparable","hasIn","isKey","isStrictComparable","assignMergeValue","baseMergeDeep","safeGet","baseMerge","srcIndex","newValue","cloneTypedArray","isArrayLikeObject","toPlainObject","mergeFunc","isCommon","isTyped","arrayMap","baseGet","baseIteratee","baseMap","baseSortBy","baseUnary","compareMultiple","iteratees","orders","basePickBy","paths","baseSet","overRest","setToString","lastIndex","nested","baseSetToString","comparer","isSymbol","symbolProto","symbolToString","baseToString","trimmedEndIndex","reTrimStart","cache","stringToPath","arrayBuffer","root","freeExports","freeModule","cloneArrayBuffer","dataView","reFlags","regexp","symbolValueOf","symbol","typedArray","valIsDefined","valIsNull","valIsReflexive","valIsSymbol","othIsDefined","othIsNull","othIsReflexive","othIsSymbol","compareAscending","objCriteria","criteria","othCriteria","ordersLength","isNew","getSymbols","getSymbolsIn","coreJsData","baseRest","isIterateeCall","assigner","sources","eachFunc","fromRight","iterable","customDefaultsMerge","arraySome","cacheHas","isPartial","othLength","arrStacked","othStacked","arrValue","othValue","compared","othIndex","mapToArray","setToArray","convert","objProps","objLength","objStacked","skipCtor","objCtor","othCtor","flatten","freeGlobal","baseGetAllKeys","isKeyable","baseIsNative","getValue","getPrototype","overArg","nativeObjectToString","isOwn","unmasked","arrayFilter","stubArray","propertyIsEnumerable","nativeGetSymbols","getOwnPropertySymbols","mapTag","promiseTag","setTag","weakMapTag","dataViewTag","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","Ctor","ctorString","hasFunc","nativeCreate","cloneDataView","cloneRegExp","cloneSymbol","spreadableSymbol","isConcatSpreadable","reIsUint","reIsDeepProp","reIsPlainProp","uid","maskSrcKey","IE_PROTO","assocIndexOf","getMapData","memoize","freeProcess","nodeUtil","binding","nativeMax","otherArgs","freeSelf","self","shortOut","nativeNow","lastCalled","stamp","pairs","LARGE_ARRAY_SIZE","memoizeCapped","rePropName","reEscapeChar","quote","subString","reWhitespace","toInteger","baseClamp","nativeMin","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","invokeFunc","time","leadingEdge","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","flush","propsIndex","propsLength","mergeWith","defaultsDeep","baseHasIn","hasPath","baseIsArguments","stubFalse","baseKeys","baseIsMap","nodeIsMap","objectCtorString","baseIsSet","nodeIsSet","baseIsTypedArray","nodeIsTypedArray","arrayLikeKeys","baseKeysIn","resolver","memoized","Cache","createAssigner","negate","before","basePick","flatRest","baseProperty","basePropertyDeep","baseOrderBy","sortBy","castFunction","MAX_ARRAY_LENGTH","toFinite","remainder","baseTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","isBinary","baseValues","_REVERSE_MAP","_MAP","_KEYCODE_MAP","_SHIFT_MAP","_SPECIAL_ALIASES","_bindMultiple","_directMap","_callbacks","_belongsTo","isContentEditable","handleKey","_handleKey","documentMousetrap","_addEvent","_characterFromEvent","character","which","_isModifier","_pickBestAction","_getReverseMap","_getKeyInfo","combination","_keysFromString","targetElement","_resetTimer","_sequenceLevels","_ignoreNextKeyup","_ignoreNextKeypress","_nextExpectedAction","_resetSequences","doNotReset","activeSequences","_getMatches","sequenceName","modifiers1","modifiers2","seq","deleteCombo","deleteSequence","_fireCallback","srcElement","_preventDefault","_stopPropagation","_handleKeyEvent","keyCode","_eventModifiers","_bindSingle","_increaseSequence","_callbackAndReset","wrappedCallback","_bindSequence","callbacks","maxLevel","processedSequenceCallback","ignoreThisKeypress","combinations","_state$rects$popper","widthProp","heightProp","longerTimeoutBrowsers","timeoutDuration","called","scheduled","functionToCheck","getStyleComputedProperty","isIE11","MSInputMethodContext","documentMode","isIE10","isIE","noOffsetParent","getRoot","findCommonOffsetParent","element1","element2","DOCUMENT_POSITION_FOLLOWING","range","createRange","setStart","setEnd","commonAncestorContainer","firstElementChild","element1root","getScroll","upperSide","scrollingElement","includeScroll","subtract","getBordersSize","sideA","sideB","getSize","getWindowSizes","getClientRect","sizes","horizScrollbar","vertScrollbar","getOffsetRectRelativeToArbitraryNode","fixedPosition","runIsIE","childrenRect","parentRect","marginTop","getViewportOffsetRectRelativeToArtbitraryNode","excludeScroll","relativeOffset","getFixedPositionOffsetParent","getBoundaries","boundaries","boundariesNode","isPaddingNumber","getArea","refRect","sortedAreas","area","filteredAreas","computedPlacement","getReferenceOffsets","commonOffsetParent","getOuterSizes","marginBottom","getPopperOffsets","referenceOffsets","isHoriz","secondarySide","measurement","secondaryMeasurement","runModifiers","ends","cur","positionFixed","flip","originalPlacement","isCreated","onUpdate","isModifierEnabled","modifierName","getSupportedPropertyName","prefixes","upperProp","toCheck","willChange","disableEventListeners","removeOnDestroy","attachToScrollParents","setupEventListeners","updateBound","scrollElement","eventsEnabled","enableEventListeners","scheduleUpdate","isNumeric","setStyles","unit","isFirefox","isModifierRequired","requestingName","requestedName","requesting","isRequired","requested","validPlacements","clockwise","shiftvariation","shiftOffsets","useHeight","divider","splitRegex","ops","mergeWithPrevious","toValue","index2","parseOffset","transformProp","popperStyles","priority","escapeWithReference","opSide","sideCapitalized","arrowElementSize","popperMarginSide","popperBorderSide","sideValue","flipped","placementOpposite","flipOrder","behavior","refOffsets","overlapsRef","overflowsLeft","overflowsRight","overflowsTop","overflowsBottom","overflowsBoundaries","flippedVariationByRef","flippedVariationByContent","flipVariationsByContent","flippedVariation","getOppositeVariation","subtractLength","bound","legacyGpuAccelerationOption","offsetParentRect","shouldRound","noRound","referenceWidth","popperWidth","isVariation","horizontalToInteger","verticalToInteger","getRoundedOffsets","prefixedProperty","invertTop","invertLeft","arrowStyles","modifierOptions","Popper","requestAnimationFrame","Defaults","jquery","onLoad","Utils","global","PopperUtils","defaultFindMatch","setPopupToFunc","BaseMenu","_rows","focusOnSelected","nextIndex","_updateValue","prevIndex","_selectRow","setSelected","menuElem","baseElem","Menu","inputMenuElem","InputMenu","cssMenuItemLink","showDelay","computeStyle","_focusOnSelected","stretchContainer","parentSelectorToMark","setOpenClass","_allowNothingSelected","allowNothingSelected","menuEl","containerElem","stretchMenuToContainer","_onMouseOver","_onMouseLeave","isSubMenu","ArrowLeft","isSelectable","isInSelectableItem","onRemove","_getNextSelectable","lastElementChild","bool","startElem","getNext","firstElem","selectOnOpen","PopupControl","controller","ArrowRight","cssMenuDivider","openFunc","openResult","openCtl","_holder","_open","_showDelay","_hideDelay","_openTimer","_closeTimer","hideDelay","openOptions","OpenPopupHelper","reopen","defaultTo","isOpen","_ctl","popupContent","renderOption","keyState","SelectKeyState","_op","getOptionFull","selectBtn","cssBtnText","sel","selectLabelOnOpen","Select","_selectRows","_selectOptions","_keyState","defaultToNext","_itemArray","_term","_cycleIndex","char","_item","defaultTooltipOptions","tooltipElem","defaultTooltipTheme","cssTooltipArrow","_createDom","cssDarkTooltip","darkTooltipTheme","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","draining","queueIndex","cleanUpNextTick","drainQueue","marker","runClearTimeout","Item","nextTick","argv","versions","removeListener","removeAllListeners","prependListener","prependOnceListener","listeners","cwd","chdir","umask","__spreadArrays","il","jl","Checker","types_1","util_1","types_2","TArray","TEnumType","TEnumLiteral","TFunc","TIface","TLiteral","TName","TOptional","TParam","TParamList","TProp","TTuple","TType","TUnion","TIntersection","enumlit","enumtype","iface","lit","param","tuple","union","intersection","rest","indexKey","BasicType","util_2","VError","typeSuite","fullSuite","basicTypes","checkers","_a","typeSuite_1","suite_1","_b","_c","suite","ttype","_path","checkerPlain","getChecker","checkerStrict","setReportedPath","_doCheck","NoopContext","validate","_doValidate","strictCheck","strictTest","strictValidate","getProp","methodArgs","methodName","tfunc","_getMethod","paramList","methodResult","getArgs","getType","checkerFunc","detailCtx","DetailContext","getError","getErrorDetails","extendStatics","__extends","__","RestType","parseSpec","typeSpec","getNamedType","_super","_this","_failMsg","strict","allowedProps","_checkerBeingBuilt","ctx","_getChecker","fail","elementTypeName","getTypeName","itemChecker","_start","arrType","ttypes","_restType","itemCheckers","restChecker_1","names","otherTypes","ur","unionResolver","createContext","resolveUnion","completeFork","failed","members","validValues","enumName","bases","makeIfaceProp","makeIfaceProps","indexType","propSet","baseCheckers","propCheckers","indexTypeChecker","testCtx","isPropRequired","isOpt","name_1","resultSpec","isParamRequired","any","void","null","never","getIsNativeChecker","nativeToString","_loop_1","array_1","Int8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","_failed","relPath","score","_propNames","_messages","_failedForks","_currentFork","_score","DetailUnionResolver","best","_d","contexts","fullMessage","errorLines","forkErrors","maxForks","rootMessage","nestedErrors","nestedLines","argCount","chainResult","_chain","collectNonEnumProps","emulatedSet","nonEnumIdx","createEscaper","escaper","testRegexp","replaceRegexp","createIndexFinder","predicateFind","createPredicateIndexFinder","createReduce","reducer","_keys","currentKey","createSizePropertyCheck","getSizeProperty","sizeProperty","deepGet","executeBound","sourceFunc","boundFunc","callingContext","partition","keyInObj","ie11fingerprint","methods","weakMapMethods","forEachName","commonInit","mapTail","mapMethods","setMethods","optimizeCb","accumulator","VERSION","ArrayProto","ObjProto","SymbolProto","supportsArrayBuffer","supportsDataView","nativeIsArray","nativeIsView","_isNaN","_isFinite","hasEnumBug","nonEnumerableProps","MAX_ARRAY_INDEX","shallowProperty","hasStringTagBug","tagTester","toBufferView","bufferSource","toPath","allKeys","callArgs","chunk","compact","compose","fromIndex","later","passed","each","results","findKey","findWhere","mixin","argsLength","invert","contextPath","isBoolean","isDataView","getInt8","tagDataView","aStack","bStack","deepEq","_wrapped","areArrays","aCtor","bCtor","nodelist","isMatch","isNull","typedArrayPattern","mapObject","matcher","lastComputed","hasher","address","partial","pass","pluck","propertyOf","restArguments","sample","rand","temp","shuffle","low","high","tap","noMatch","escapes","escapeRegExp","escapeChar","bareIdentifier","oldSettings","escape","interpolate","evaluate","render","argument","variable","throttled","_now","accum","reStrSymbol","arrays","uniq","isSorted","idCounter","uniqueId","unzip","otherArrays","wrap","wrapper","_arrayLikeToArray","arr2","_arrayWithHoles","_assertThisInitialized","ReferenceError","_classCallCheck","Constructor","_defineProperties","_createClass","protoProps","staticProps","_defineProperty","_getPrototypeOf","_inherits","subClass","superClass","_iterableToArray","iter","iterator","_nonIterableRest","_possibleConstructorReturn","_setPrototypeOf","_toArray","_typeof","_unsupportedIterableToArray","ownKeys","enumerableOnly","symbols","sym","getOwnPropertyDescriptor","_objectSpread","getOwnPropertyDescriptors","defineProperties","consoleLogger","baseLogger","Logger","concreteLogger","logger","forward","_len2","_key2","_len3","_key3","_len4","_key4","lvl","debugOnly","moduleName","EventEmitter","observers","cloned","_cloned","rej","makeString","getLastOfPath","Empty","cleanKey","canNotTraverseDeeper","setPath","_getLastOfPath","getPath","_getLastOfPath3","getPathWithDefaults","defaultData","overwrite","regexEscape","_entityMap","userAgentData","ownKeys$1","_objectSpread$1","deepFind","mix","joinedPath","ResourceStore","_EventEmitter","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","_isNativeReflectConstruct","Super","NewTarget","ignoreJSONStructure","silent","addNamespaces","resources","addResource","deep","pack","hasResourceBundle","removeNamespaces","getResource","compatibilityAPI","getDataByLanguage","postProcessor","processors","addPostProcessor","translator","processor","ownKeys$2","_objectSpread$2","checkedLoadedFor","Translator","_isNativeReflectConstruct$1","services","interpolation","resolved","wouldCheckForNsInKey","seemsNaturalLanguage","userDefinedKeySeparator","userDefinedNsSeparator","possibleChars","ki","looksLikeObjectPath","interpolator","nestingRegexp","lastKey","_this2","overloadTranslationOptionHandler","returnDetails","_this$extractFromKey","extractFromKey","namespace","appendNamespaceToCIMode","resUsedKey","usedKey","resExactUsedKey","exactUsedKey","resType","noObject","joinArrays","handleAsObjectInI18nFormat","i18nFormat","handleAsObject","returnObjects","returnedObjectHandler","resTypeIsArray","newKeyToUse","deepKey","translate","extendTranslation","usedDefault","needsPluralHandling","hasDefaultValue","defaultValueSuffix","pluralResolver","getSuffix","isValidLookup","missingKeyNoValueFallbackToKey","resForMissing","updateMissing","fk","lngs","fallbackLngs","languageUtils","getFallbackCodes","saveMissingTo","toResolveHierarchy","specificDefaultValue","defaultForMissing","backendConnector","saveMissingPlurals","getSuffixes","appendNamespaceToMissingKey","parseMissingKeyHandler","_this3","defaultVariables","usedLng","usedNS","skipInterpolation","nestBef","skipOnVariables","nest","postProcess","postProcessorNames","applyPostProcessor","postProcessPassResolved","i18nResolved","_this4","extracted","needsZeroSuffixLookup","ordinal","shouldUseIntlApi","needsContextHandling","codes","hasLoadedNamespace","possibleKey","finalKeys","addLookupKeys","pluralSuffix","zeroSuffix","pluralSeparator","contextKey","contextSeparator","returnNull","returnEmptyString","resourceStore","LanguageUtil","formatLanguageCode","specialCases","lowerCaseLng","cleanCode","nonExplicitSupportedLngs","getLanguagePartFromCode","cleanedLng","isSupportedCode","lngOnly","supportedLng","fallbacks","getScriptPartFromCode","fallbackCode","fallbackCodes","addCode","sets","nr","_rulesPluralsTypes","deprecatedJsonVersions","suffixesOrder","zero","two","few","many","createRules","rules","numbers","plurals","PluralResolver","compatibilityJSON","PluralRules","_unused","rule","getRule","resolvedOptions","pluralCategories","pluralCategory1","pluralCategory2","pluralCategory","getSuffixRetroCompatible","noAbs","simplifyPluralSuffix","returnSuffix","ownKeys$3","_objectSpread$3","Interpolator","escapeValue","iOpts","useRawValueToEscape","prefixEscaped","suffixEscaped","formatSeparator","unescapePrefix","unescapeSuffix","nestingPrefix","nestingPrefixEscaped","nestingSuffix","nestingSuffixEscaped","nestingOptionsSeparator","maxReplaces","alwaysFormat","resetRegExp","regexpStr","regexpUnescapeStr","regexpUnescape","nestingRegexpStr","replaces","regexSafe","handleFormat","interpolationkey","regex","safeValue","todo","matchedVar","clonedOptions","handleHasOptions","inheritedOptions","optionsString","formatters","doReduce","ownKeys$4","_objectSpread$4","Formatter","formats","NumberFormat","datetime","DateTimeFormat","relativetime","RelativeTimeFormat","ListFormat","_format","mem","_parseFormatStr","formatStr","formatName","formatOptions","optStr","_opt$split","_opt$split2","parseFormatStr","formatted","valOptions","formatParams","ownKeys$5","_objectSpread$5","Connector","_isNativeReflectConstruct$2","backend","waitingReads","maxParallelReads","readingCalls","maxRetries","retryTimeout","toLoad","toLoadLanguages","toLoadNamespaces","hasAllNamespaces","pendingCount","loaded","addResourceBundle","_getLastOfPath2","removePending","loadedKeys","fcName","tried","queueLoad","loadOne","prepareLoading","_this5","fallbackValue","isUpdate","preload","partialBundledLanguages","tDescription","transformOptions","ownKeys$6","_objectSpread$6","bindMemberFunctions","inst","I18n","_isNativeReflectConstruct$3","modules","external","isInitialized","isClone","defOpts","createClassOnDemand","ClassOrObject","formatter","lu","languageDetector","detection","storeApi","_this2$store","storeApiChained","_this2$store2","initializedStoreOnce","usedCallback","resolvedLanguage","setResolvedLanguage","li","lngInLngs","hasLanguageSomeTranslations","isLanguageChangingTo","setLngProps","setLng","getBestMatchFromCodes","cacheUserLanguage","loadResources","detect","keyPrefix","fixedT","resultKey","_this$translator","_this$translator2","_this6","lastLng","loadNotPending","precheck","preResult","_this7","preloaded","newLngs","_this8","mergedOptions","membersToCopy","reloadResources","setDefaultNamespace","loadNamespaces","loadLanguages","__webpack_module_cache__","leafPrototypes","getProto","inProgress","dataWebpackPrefix","__webpack_require__","moduleId","cachedModule","__webpack_modules__","amdD","getter","chunkId","globalThis","needAttach","scripts","charset","crossOrigin","onScriptComplete","onload","doneFns","nmd","scriptUrl","importScripts","currentScript","installedChunks","installedChunkData","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","chunkIds","moreModules","runtime","chunkLoadingGlobal","pagePanelsError","cssCenteredContent","cssErrorContent","cssBigIcon","cssErrorHeader","cssErrorText","cssButtonWrap","buildPage","gristApp","testNumPendingApiRequests","setupPage","errMessage","createSignedOutPage","createNotFoundPage","createForbiddenPage","createOtherErrorPage","createErrPage"],"sourceRoot":""}