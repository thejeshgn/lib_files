{"version":3,"file":"billing.bundle.js","mappings":"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","sources":["./app/common/delay.ts?","./app/common/gutil.ts?","./app/plugin/gutil.ts?","./app/client/lib/Mousetrap.js?","./app/client/lib/browserGlobals.js?","./app/client/lib/dom.js?","./node_modules/axios/index.js?","./node_modules/axios/lib/adapters/xhr.js?","./node_modules/axios/lib/axios.js?","./node_modules/axios/lib/cancel/Cancel.js?","./node_modules/axios/lib/cancel/CancelToken.js?","./node_modules/axios/lib/cancel/isCancel.js?","./node_modules/axios/lib/core/Axios.js?","./node_modules/axios/lib/core/InterceptorManager.js?","./node_modules/axios/lib/core/buildFullPath.js?","./node_modules/axios/lib/core/createError.js?","./node_modules/axios/lib/core/dispatchRequest.js?","./node_modules/axios/lib/core/enhanceError.js?","./node_modules/axios/lib/core/mergeConfig.js?","./node_modules/axios/lib/core/settle.js?","./node_modules/axios/lib/core/transformData.js?","./node_modules/axios/lib/defaults.js?","./node_modules/axios/lib/helpers/bind.js?","./node_modules/axios/lib/helpers/buildURL.js?","./node_modules/axios/lib/helpers/combineURLs.js?","./node_modules/axios/lib/helpers/cookies.js?","./node_modules/axios/lib/helpers/isAbsoluteURL.js?","./node_modules/axios/lib/helpers/isAxiosError.js?","./node_modules/axios/lib/helpers/isURLSameOrigin.js?","./node_modules/axios/lib/helpers/normalizeHeaderName.js?","./node_modules/axios/lib/helpers/parseHeaders.js?","./node_modules/axios/lib/helpers/spread.js?","./node_modules/axios/lib/helpers/validator.js?","./node_modules/axios/lib/utils.js?","./node_modules/base64-js/index.js?","./node_modules/bowser/es5.js?","./node_modules/buffer/index.js?","./node_modules/grainjs/lib/browserGlobals.ts?","./node_modules/grainjs/lib/dispose.ts?","./node_modules/grainjs/lib/_computed_queue.ts?","./node_modules/grainjs/lib/PriorityQueue.ts?","./node_modules/grainjs/lib/observable.ts?","./node_modules/grainjs/lib/domDispose.ts?","./node_modules/grainjs/lib/kowrap.ts?","./node_modules/grainjs/lib/subscribe.ts?","./node_modules/grainjs/lib/computed.ts?","./node_modules/grainjs/lib/binding.ts?","./node_modules/grainjs/lib/domMethods.ts?","./node_modules/grainjs/lib/domImpl.ts?","./node_modules/grainjs/lib/domComputed.ts?","./node_modules/grainjs/lib/domComponent.ts?","./node_modules/grainjs/lib/obsArray.ts?","./node_modules/grainjs/lib/domForEach.ts?","./node_modules/grainjs/lib/domevent.ts?","./node_modules/grainjs/lib/dom.ts?","./node_modules/grainjs/lib/pureComputed.ts?","./node_modules/grainjs/lib/styled.ts?","./node_modules/grainjs/lib/widgets/input.ts?","./node_modules/grainjs/lib/widgets/select.ts?","./node_modules/grainjs/lib/emit.ts?","./node_modules/grainjs/lib/util.ts?","./node_modules/ieee754/index.js?","./node_modules/knockout/build/output/knockout-latest.js?","./node_modules/lodash/_DataView.js?","./node_modules/lodash/_Hash.js?","./node_modules/lodash/_ListCache.js?","./node_modules/lodash/_Map.js?","./node_modules/lodash/_MapCache.js?","./node_modules/lodash/_Promise.js?","./node_modules/lodash/_Set.js?","./node_modules/lodash/_SetCache.js?","./node_modules/lodash/_Stack.js?","./node_modules/lodash/_Symbol.js?","./node_modules/lodash/_Uint8Array.js?","./node_modules/lodash/_WeakMap.js?","./node_modules/lodash/_apply.js?","./node_modules/lodash/_arrayEach.js?","./node_modules/lodash/_arrayFilter.js?","./node_modules/lodash/_arrayLikeKeys.js?","./node_modules/lodash/_arrayMap.js?","./node_modules/lodash/_arrayPush.js?","./node_modules/lodash/_arraySome.js?","./node_modules/lodash/_assignMergeValue.js?","./node_modules/lodash/_assignValue.js?","./node_modules/lodash/_assocIndexOf.js?","./node_modules/lodash/_baseAssign.js?","./node_modules/lodash/_baseAssignIn.js?","./node_modules/lodash/_baseAssignValue.js?","./node_modules/lodash/_baseClamp.js?","./node_modules/lodash/_baseClone.js?","./node_modules/lodash/_baseCreate.js?","./node_modules/lodash/_baseFlatten.js?","./node_modules/lodash/_baseFor.js?","./node_modules/lodash/_baseGet.js?","./node_modules/lodash/_baseGetAllKeys.js?","./node_modules/lodash/_baseGetTag.js?","./node_modules/lodash/_baseHasIn.js?","./node_modules/lodash/_baseIsArguments.js?","./node_modules/lodash/_baseIsEqual.js?","./node_modules/lodash/_baseIsEqualDeep.js?","./node_modules/lodash/_baseIsMap.js?","./node_modules/lodash/_baseIsMatch.js?","./node_modules/lodash/_baseIsNative.js?","./node_modules/lodash/_baseIsSet.js?","./node_modules/lodash/_baseIsTypedArray.js?","./node_modules/lodash/_baseIteratee.js?","./node_modules/lodash/_baseKeys.js?","./node_modules/lodash/_baseKeysIn.js?","./node_modules/lodash/_baseMatches.js?","./node_modules/lodash/_baseMatchesProperty.js?","./node_modules/lodash/_baseMerge.js?","./node_modules/lodash/_baseMergeDeep.js?","./node_modules/lodash/_basePick.js?","./node_modules/lodash/_basePickBy.js?","./node_modules/lodash/_baseProperty.js?","./node_modules/lodash/_basePropertyDeep.js?","./node_modules/lodash/_baseRest.js?","./node_modules/lodash/_baseSet.js?","./node_modules/lodash/_baseSetToString.js?","./node_modules/lodash/_baseTimes.js?","./node_modules/lodash/_baseToString.js?","./node_modules/lodash/_baseTrim.js?","./node_modules/lodash/_baseUnary.js?","./node_modules/lodash/_baseValues.js?","./node_modules/lodash/_cacheHas.js?","./node_modules/lodash/_castFunction.js?","./node_modules/lodash/_castPath.js?","./node_modules/lodash/_cloneArrayBuffer.js?","./node_modules/lodash/_cloneBuffer.js?","./node_modules/lodash/_cloneDataView.js?","./node_modules/lodash/_cloneRegExp.js?","./node_modules/lodash/_cloneSymbol.js?","./node_modules/lodash/_cloneTypedArray.js?","./node_modules/lodash/_copyArray.js?","./node_modules/lodash/_copyObject.js?","./node_modules/lodash/_copySymbols.js?","./node_modules/lodash/_copySymbolsIn.js?","./node_modules/lodash/_coreJsData.js?","./node_modules/lodash/_createAssigner.js?","./node_modules/lodash/_createBaseFor.js?","./node_modules/lodash/_customDefaultsMerge.js?","./node_modules/lodash/_defineProperty.js?","./node_modules/lodash/_equalArrays.js?","./node_modules/lodash/_equalByTag.js?","./node_modules/lodash/_equalObjects.js?","./node_modules/lodash/_flatRest.js?","./node_modules/lodash/_freeGlobal.js?","./node_modules/lodash/_getAllKeys.js?","./node_modules/lodash/_getAllKeysIn.js?","./node_modules/lodash/_getMapData.js?","./node_modules/lodash/_getMatchData.js?","./node_modules/lodash/_getNative.js?","./node_modules/lodash/_getPrototype.js?","./node_modules/lodash/_getRawTag.js?","./node_modules/lodash/_getSymbols.js?","./node_modules/lodash/_getSymbolsIn.js?","./node_modules/lodash/_getTag.js?","./node_modules/lodash/_getValue.js?","./node_modules/lodash/_hasPath.js?","./node_modules/lodash/_hashClear.js?","./node_modules/lodash/_hashDelete.js?","./node_modules/lodash/_hashGet.js?","./node_modules/lodash/_hashHas.js?","./node_modules/lodash/_hashSet.js?","./node_modules/lodash/_initCloneArray.js?","./node_modules/lodash/_initCloneByTag.js?","./node_modules/lodash/_initCloneObject.js?","./node_modules/lodash/_isFlattenable.js?","./node_modules/lodash/_isIndex.js?","./node_modules/lodash/_isIterateeCall.js?","./node_modules/lodash/_isKey.js?","./node_modules/lodash/_isKeyable.js?","./node_modules/lodash/_isMasked.js?","./node_modules/lodash/_isPrototype.js?","./node_modules/lodash/_isStrictComparable.js?","./node_modules/lodash/_listCacheClear.js?","./node_modules/lodash/_listCacheDelete.js?","./node_modules/lodash/_listCacheGet.js?","./node_modules/lodash/_listCacheHas.js?","./node_modules/lodash/_listCacheSet.js?","./node_modules/lodash/_mapCacheClear.js?","./node_modules/lodash/_mapCacheDelete.js?","./node_modules/lodash/_mapCacheGet.js?","./node_modules/lodash/_mapCacheHas.js?","./node_modules/lodash/_mapCacheSet.js?","./node_modules/lodash/_mapToArray.js?","./node_modules/lodash/_matchesStrictComparable.js?","./node_modules/lodash/_memoizeCapped.js?","./node_modules/lodash/_nativeCreate.js?","./node_modules/lodash/_nativeKeys.js?","./node_modules/lodash/_nativeKeysIn.js?","./node_modules/lodash/_nodeUtil.js?","./node_modules/lodash/_objectToString.js?","./node_modules/lodash/_overArg.js?","./node_modules/lodash/_overRest.js?","./node_modules/lodash/_root.js?","./node_modules/lodash/_safeGet.js?","./node_modules/lodash/_setCacheAdd.js?","./node_modules/lodash/_setCacheHas.js?","./node_modules/lodash/_setToArray.js?","./node_modules/lodash/_setToString.js?","./node_modules/lodash/_shortOut.js?","./node_modules/lodash/_stackClear.js?","./node_modules/lodash/_stackDelete.js?","./node_modules/lodash/_stackGet.js?","./node_modules/lodash/_stackHas.js?","./node_modules/lodash/_stackSet.js?","./node_modules/lodash/_stringToPath.js?","./node_modules/lodash/_toKey.js?","./node_modules/lodash/_toSource.js?","./node_modules/lodash/_trimmedEndIndex.js?","./node_modules/lodash/clamp.js?","./node_modules/lodash/clone.js?","./node_modules/lodash/constant.js?","./node_modules/lodash/debounce.js?","./node_modules/lodash/defaultTo.js?","./node_modules/lodash/defaults.js?","./node_modules/lodash/defaultsDeep.js?","./node_modules/lodash/eq.js?","./node_modules/lodash/flatten.js?","./node_modules/lodash/get.js?","./node_modules/lodash/hasIn.js?","./node_modules/lodash/identity.js?","./node_modules/lodash/isArguments.js?","./node_modules/lodash/isArray.js?","./node_modules/lodash/isArrayLike.js?","./node_modules/lodash/isArrayLikeObject.js?","./node_modules/lodash/isBuffer.js?","./node_modules/lodash/isEmpty.js?","./node_modules/lodash/isEqual.js?","./node_modules/lodash/isError.js?","./node_modules/lodash/isFunction.js?","./node_modules/lodash/isLength.js?","./node_modules/lodash/isMap.js?","./node_modules/lodash/isObject.js?","./node_modules/lodash/isObjectLike.js?","./node_modules/lodash/isPlainObject.js?","./node_modules/lodash/isSet.js?","./node_modules/lodash/isSymbol.js?","./node_modules/lodash/isTypedArray.js?","./node_modules/lodash/keys.js?","./node_modules/lodash/keysIn.js?","./node_modules/lodash/memoize.js?","./node_modules/lodash/merge.js?","./node_modules/lodash/mergeWith.js?","./node_modules/lodash/negate.js?","./node_modules/lodash/noop.js?","./node_modules/lodash/now.js?","./node_modules/lodash/omitBy.js?","./node_modules/lodash/pick.js?","./node_modules/lodash/pickBy.js?","./node_modules/lodash/property.js?","./node_modules/lodash/stubArray.js?","./node_modules/lodash/stubFalse.js?","./node_modules/lodash/times.js?","./node_modules/lodash/toFinite.js?","./node_modules/lodash/toInteger.js?","./node_modules/lodash/toNumber.js?","./node_modules/lodash/toPlainObject.js?","./node_modules/lodash/toString.js?","./node_modules/lodash/values.js?","./node_modules/mousetrap/mousetrap.js?","../../src/utils/debounce.js?","../../src/utils/isBrowser.js?","../../src/utils/isFunction.js?","../../src/utils/getStyleComputedProperty.js?","../../src/utils/getParentNode.js?","../../src/utils/getScrollParent.js?","../../src/utils/isIE.js?","../../src/utils/getOffsetParent.js?","../../src/utils/getRoot.js?","../../src/utils/findCommonOffsetParent.js?","../../src/utils/isOffsetContainer.js?","../../src/utils/getScroll.js?","../../src/utils/includeScroll.js?","../../src/utils/getBordersSize.js?","../../src/utils/getWindowSizes.js?","../../src/utils/getClientRect.js?","../../src/utils/getBoundingClientRect.js?","../../src/utils/getOffsetRectRelativeToArbitraryNode.js?","../../src/utils/getViewportOffsetRectRelativeToArtbitraryNode.js?","../../src/utils/isFixed.js?","../../src/utils/getFixedPositionOffsetParent.js?","../../src/utils/getBoundaries.js?","../../src/utils/computeAutoPlacement.js?","../../src/utils/getReferenceOffsets.js?","../../src/utils/getOuterSizes.js?","../../src/utils/getOppositePlacement.js?","../../src/utils/getPopperOffsets.js?","../../src/utils/find.js?","../../src/utils/runModifiers.js?","../../src/utils/findIndex.js?","../../src/methods/update.js?","../../src/utils/isModifierEnabled.js?","../../src/utils/getSupportedPropertyName.js?","../../src/methods/destroy.js?","../../src/utils/getWindow.js?","../../src/utils/setupEventListeners.js?","../../src/methods/enableEventListeners.js?","../../src/methods/disableEventListeners.js?","../../src/utils/removeEventListeners.js?","../../src/utils/isNumeric.js?","../../src/utils/setStyles.js?","../../src/modifiers/computeStyle.js?","../../src/utils/isModifierRequired.js?","../../src/methods/placements.js?","../../src/utils/clockwise.js?","../../src/modifiers/index.js?","../../src/methods/defaults.js?","../../src/modifiers/shift.js?","../../src/modifiers/offset.js?","../../src/modifiers/preventOverflow.js?","../../src/modifiers/keepTogether.js?","../../src/modifiers/arrow.js?","../../src/modifiers/flip.js?","../../src/utils/getOppositeVariation.js?","../../src/modifiers/inner.js?","../../src/modifiers/hide.js?","../../src/utils/getRoundedOffsets.js?","../../src/modifiers/applyStyle.js?","../../src/utils/setAttributes.js?","../../src/index.js?","./node_modules/popweasel/index.ts?","./node_modules/popweasel/lib/autocomplete.ts?","./node_modules/popweasel/lib/menu.ts?","./node_modules/popweasel/lib/popup.ts?","./node_modules/popweasel/lib/select.ts?","./node_modules/popweasel/lib/tooltip.ts?","./node_modules/process/browser.js?","./node_modules/ts-interface-checker/dist/index.js?","./node_modules/ts-interface-checker/dist/types.js?","./node_modules/ts-interface-checker/dist/util.js?","webpack/bootstrap?","webpack/runtime/compat get default export?","webpack/runtime/define property getters?","webpack/runtime/global?","webpack/runtime/hasOwnProperty shorthand?","webpack/runtime/make namespace object?","webpack/runtime/node module decorator?","./stubs/app/client/ui/BillingPage.ts?","../ext/app/pipe/GristOverrides.ts?","../ext/app/client/HookStub.ts?","./app/client/DefaultHooks.ts?","./app/common/ApiError.ts?","./app/common/tbind.ts?","./app/common/BaseAPI.ts?","./app/common/StringUnion.ts?","./app/common/BillingAPI.ts?","./app/common/DocListAPI.ts?","./app/common/ThemePrefs-ti.ts?","./app/common/ThemePrefs.ts?","./app/common/gristUrls.ts?","./app/common/urlUtils.ts?","./node_modules/@babel/runtime/helpers/esm/typeof.js?","./node_modules/@babel/runtime/helpers/esm/classCallCheck.js?","./node_modules/@babel/runtime/helpers/esm/createClass.js?","./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js?","./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js?","./node_modules/@babel/runtime/helpers/esm/inherits.js?","./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js?","./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js?","./node_modules/@babel/runtime/helpers/esm/defineProperty.js?","./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js?","./node_modules/i18next/dist/esm/i18next.js?","./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js?","./node_modules/@babel/runtime/helpers/esm/toArray.js?","./node_modules/@babel/runtime/helpers/esm/iterableToArray.js?","./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js?","./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js?","./app/client/lib/localization.ts?","./node_modules/underscore/modules/_setup.js?","./node_modules/underscore/modules/restArguments.js?","./node_modules/underscore/modules/isObject.js?","./node_modules/underscore/modules/isNull.js?","./node_modules/underscore/modules/isUndefined.js?","./node_modules/underscore/modules/isBoolean.js?","./node_modules/underscore/modules/isElement.js?","./node_modules/underscore/modules/_tagTester.js?","./node_modules/underscore/modules/isString.js?","./node_modules/underscore/modules/isNumber.js?","./node_modules/underscore/modules/isDate.js?","./node_modules/underscore/modules/isRegExp.js?","./node_modules/underscore/modules/isError.js?","./node_modules/underscore/modules/isSymbol.js?","./node_modules/underscore/modules/isArrayBuffer.js?","./node_modules/underscore/modules/isFunction.js?","./node_modules/underscore/modules/_hasObjectTag.js?","./node_modules/underscore/modules/_stringTagBug.js?","./node_modules/underscore/modules/isDataView.js?","./node_modules/underscore/modules/isArray.js?","./node_modules/underscore/modules/_has.js?","./node_modules/underscore/modules/isArguments.js?","./node_modules/underscore/modules/isFinite.js?","./node_modules/underscore/modules/isNaN.js?","./node_modules/underscore/modules/constant.js?","./node_modules/underscore/modules/_createSizePropertyCheck.js?","./node_modules/underscore/modules/_shallowProperty.js?","./node_modules/underscore/modules/_getByteLength.js?","./node_modules/underscore/modules/_isBufferLike.js?","./node_modules/underscore/modules/isTypedArray.js?","./node_modules/underscore/modules/_getLength.js?","./node_modules/underscore/modules/_collectNonEnumProps.js?","./node_modules/underscore/modules/keys.js?","./node_modules/underscore/modules/isEmpty.js?","./node_modules/underscore/modules/isMatch.js?","./node_modules/underscore/modules/underscore.js?","./node_modules/underscore/modules/_toBufferView.js?","./node_modules/underscore/modules/isEqual.js?","./node_modules/underscore/modules/allKeys.js?","./node_modules/underscore/modules/_methodFingerprint.js?","./node_modules/underscore/modules/isMap.js?","./node_modules/underscore/modules/isWeakMap.js?","./node_modules/underscore/modules/isSet.js?","./node_modules/underscore/modules/isWeakSet.js?","./node_modules/underscore/modules/values.js?","./node_modules/underscore/modules/pairs.js?","./node_modules/underscore/modules/invert.js?","./node_modules/underscore/modules/functions.js?","./node_modules/underscore/modules/_createAssigner.js?","./node_modules/underscore/modules/extend.js?","./node_modules/underscore/modules/extendOwn.js?","./node_modules/underscore/modules/defaults.js?","./node_modules/underscore/modules/_baseCreate.js?","./node_modules/underscore/modules/create.js?","./node_modules/underscore/modules/clone.js?","./node_modules/underscore/modules/tap.js?","./node_modules/underscore/modules/toPath.js?","./node_modules/underscore/modules/_toPath.js?","./node_modules/underscore/modules/_deepGet.js?","./node_modules/underscore/modules/get.js?","./node_modules/underscore/modules/has.js?","./node_modules/underscore/modules/identity.js?","./node_modules/underscore/modules/matcher.js?","./node_modules/underscore/modules/property.js?","./node_modules/underscore/modules/_optimizeCb.js?","./node_modules/underscore/modules/_baseIteratee.js?","./node_modules/underscore/modules/iteratee.js?","./node_modules/underscore/modules/_cb.js?","./node_modules/underscore/modules/mapObject.js?","./node_modules/underscore/modules/noop.js?","./node_modules/underscore/modules/propertyOf.js?","./node_modules/underscore/modules/times.js?","./node_modules/underscore/modules/random.js?","./node_modules/underscore/modules/now.js?","./node_modules/underscore/modules/_createEscaper.js?","./node_modules/underscore/modules/_escapeMap.js?","./node_modules/underscore/modules/escape.js?","./node_modules/underscore/modules/unescape.js?","./node_modules/underscore/modules/_unescapeMap.js?","./node_modules/underscore/modules/templateSettings.js?","./node_modules/underscore/modules/template.js?","./node_modules/underscore/modules/result.js?","./node_modules/underscore/modules/uniqueId.js?","./node_modules/underscore/modules/chain.js?","./node_modules/underscore/modules/_executeBound.js?","./node_modules/underscore/modules/partial.js?","./node_modules/underscore/modules/bind.js?","./node_modules/underscore/modules/_isArrayLike.js?","./node_modules/underscore/modules/_flatten.js?","./node_modules/underscore/modules/bindAll.js?","./node_modules/underscore/modules/memoize.js?","./node_modules/underscore/modules/delay.js?","./node_modules/underscore/modules/defer.js?","./node_modules/underscore/modules/throttle.js?","./node_modules/underscore/modules/debounce.js?","./node_modules/underscore/modules/wrap.js?","./node_modules/underscore/modules/negate.js?","./node_modules/underscore/modules/compose.js?","./node_modules/underscore/modules/after.js?","./node_modules/underscore/modules/before.js?","./node_modules/underscore/modules/once.js?","./node_modules/underscore/modules/findKey.js?","./node_modules/underscore/modules/_createPredicateIndexFinder.js?","./node_modules/underscore/modules/findIndex.js?","./node_modules/underscore/modules/findLastIndex.js?","./node_modules/underscore/modules/sortedIndex.js?","./node_modules/underscore/modules/_createIndexFinder.js?","./node_modules/underscore/modules/indexOf.js?","./node_modules/underscore/modules/lastIndexOf.js?","./node_modules/underscore/modules/find.js?","./node_modules/underscore/modules/findWhere.js?","./node_modules/underscore/modules/each.js?","./node_modules/underscore/modules/map.js?","./node_modules/underscore/modules/_createReduce.js?","./node_modules/underscore/modules/reduce.js?","./node_modules/underscore/modules/reduceRight.js?","./node_modules/underscore/modules/filter.js?","./node_modules/underscore/modules/reject.js?","./node_modules/underscore/modules/every.js?","./node_modules/underscore/modules/some.js?","./node_modules/underscore/modules/contains.js?","./node_modules/underscore/modules/invoke.js?","./node_modules/underscore/modules/pluck.js?","./node_modules/underscore/modules/where.js?","./node_modules/underscore/modules/max.js?","./node_modules/underscore/modules/min.js?","./node_modules/underscore/modules/sample.js?","./node_modules/underscore/modules/shuffle.js?","./node_modules/underscore/modules/sortBy.js?","./node_modules/underscore/modules/_group.js?","./node_modules/underscore/modules/groupBy.js?","./node_modules/underscore/modules/indexBy.js?","./node_modules/underscore/modules/countBy.js?","./node_modules/underscore/modules/partition.js?","./node_modules/underscore/modules/toArray.js?","./node_modules/underscore/modules/size.js?","./node_modules/underscore/modules/_keyInObj.js?","./node_modules/underscore/modules/pick.js?","./node_modules/underscore/modules/omit.js?","./node_modules/underscore/modules/initial.js?","./node_modules/underscore/modules/first.js?","./node_modules/underscore/modules/rest.js?","./node_modules/underscore/modules/last.js?","./node_modules/underscore/modules/compact.js?","./node_modules/underscore/modules/flatten.js?","./node_modules/underscore/modules/difference.js?","./node_modules/underscore/modules/without.js?","./node_modules/underscore/modules/uniq.js?","./node_modules/underscore/modules/union.js?","./node_modules/underscore/modules/intersection.js?","./node_modules/underscore/modules/unzip.js?","./node_modules/underscore/modules/zip.js?","./node_modules/underscore/modules/object.js?","./node_modules/underscore/modules/range.js?","./node_modules/underscore/modules/chunk.js?","./node_modules/underscore/modules/_chainResult.js?","./node_modules/underscore/modules/mixin.js?","./node_modules/underscore/modules/underscore-array-methods.js?","./node_modules/underscore/modules/index-default.js?","./app/client/components/commands.ts?","./app/common/RefCountMap.ts?","./app/client/lib/FocusLayer.ts?","./app/client/lib/log.ts?","./app/client/models/errors.ts?","./app/client/lib/storage.ts?","./app/client/components/UnsavedChanges.ts?","./app/client/lib/UrlState.ts?","./app/client/models/gristUrlState.ts?","./app/client/ui/CustomThemes.ts?","./app/client/ui2018/cssVars.ts?","./app/client/ui2018/buttons.ts?","./app/client/ui2018/checkbox.ts?","./app/client/ui2018/icons.ts?","./app/client/ui/cssInput.ts?","./app/client/ui2018/loaders.ts?","./app/client/ui2018/select.ts?","./app/client/ui2018/menus.ts?","./app/client/ui2018/modals.ts?","./app/client/components/modals.ts?","./app/client/lib/localStorageObs.ts?","./app/client/models/UserPrefs.ts?","./app/client/ui/ShortcutKey.ts?","./app/client/ui2018/links.ts?","./app/client/ui/GristTooltips.ts?","./app/common/Prefs.ts?","./app/client/components/BehavioralPromptsManager.ts?","./app/client/models/ConnectState.ts?","./app/common/InactivityTimer.ts?","./app/common/timeFormat.ts?","./app/client/models/NotifyModel.ts?","./node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js?","./node_modules/@popperjs/core/lib/enums.js?","./node_modules/@popperjs/core/lib/dom-utils/getWindow.js?","./node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js?","./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js?","./node_modules/@popperjs/core/lib/dom-utils/getNodeName.js?","./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js?","./node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js?","./node_modules/@popperjs/core/lib/dom-utils/getParentNode.js?","./node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js?","./node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js?","./node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js?","./node_modules/@popperjs/core/lib/dom-utils/isTableElement.js?","./node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js?","./node_modules/@popperjs/core/lib/dom-utils/getBorders.js?","./node_modules/@popperjs/core/lib/utils/rectToClientRect.js?","./node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js?","./node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js?","./node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js?","./node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js?","./node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js?","./node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js?","./node_modules/@popperjs/core/lib/utils/detectOverflow.js?","./node_modules/@popperjs/core/lib/utils/mergePaddingObject.js?","./node_modules/@popperjs/core/lib/utils/getFreshSideObject.js?","./node_modules/@popperjs/core/lib/utils/expandToHashMap.js?","./node_modules/@popperjs/core/lib/dom-utils/contains.js?","./node_modules/@popperjs/core/lib/dom-utils/getDecorations.js?","./node_modules/@popperjs/core/lib/utils/computeOffsets.js?","./node_modules/@popperjs/core/lib/utils/getBasePlacement.js?","./node_modules/@popperjs/core/lib/utils/getVariation.js?","./node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js?","./node_modules/popper-max-size-modifier/dist/popper-max-size-modifier.esm.js?","./app/client/lib/autocomplete.ts?","./app/client/lib/TokenField.ts?","./app/common/InstallAPI.ts?","./app/client/models/TelemetryModel.ts?","./app/client/ui/SupportGristNudge.ts?","./app/common/Features.ts?","./app/common/roles.ts?","./app/common/themes/GristDark.ts?","./app/common/Themes.ts?","./app/common/themes/GristLight.ts?","./app/common/UserAPI.ts?","./app/client/models/AppModel.ts?","./app/client/ui/ProductUpgradesStub.ts?","./app/common/tagManager.ts?","./app/client/lib/pausableObs.ts?","./app/common/Telemetry.ts?","./app/client/lib/telemetry.ts?","./app/client/lib/helpScout.ts?","./app/client/ui/tooltips.ts?","./app/client/ui/TopBarCss.ts?","./app/client/ui/NotifyUI.ts?","./app/client/ui/viewport.ts?","./app/client/ui/setupPage.ts?","./app/client/lib/browserInfo.ts?","./app/client/billingMain.ts?"],"sourcesContent":["/**\n * Returns a promise that resolves in the given number of milliseconds.\n * (A replica of bluebird.delay using native promises.)\n */\nexport function delay(msec: number): Promise<void> {\n  return new Promise<void>((resolve) => setTimeout(resolve, msec));\n}\n","import {delay} from 'app/common/delay';\nimport {BindableValue, DomElementMethod, IKnockoutReadObservable, ISubscribable, Listener, Observable,\n        subscribeElem, UseCB, UseCBOwner} from 'grainjs';\nimport {Observable as KoObservable} from 'knockout';\nimport identity = require('lodash/identity');\n\n// Some definitions have moved to be used by plugin API.\nexport {arrayRepeat} from 'app/plugin/gutil';\n\nexport const UP_TRIANGLE = '\\u25B2';\nexport const DOWN_TRIANGLE = '\\u25BC';\n\nconst EMAIL_RE = new RegExp(\"^\\\\w[\\\\w%+/='-]*(\\\\.[\\\\w%+/='-]+)*@([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z\" +\n  \"0-9])?\\\\.)+[A-Za-z]{2,6}$\", \"u\");\n\n// Returns whether str starts with prefix. (Note that this implementation avoids creating a new\n// string, and only checks a single location.)\nexport function startsWith(str: string, prefix: string): boolean {\n  return str.lastIndexOf(prefix, 0) === 0;\n}\n\n// Returns whether str ends with suffix.\nexport function endsWith(str: string, suffix: string): boolean {\n  return str.indexOf(suffix, str.length - suffix.length) !== -1;\n}\n\n// If str starts with prefix, removes it and returns what remains. Otherwise, returns null.\nexport function removePrefix(str: string, prefix: string): string|null {\n  return startsWith(str, prefix) ? str.slice(prefix.length) : null;\n}\n\n\n// If str ends with suffix, removes it and returns what remains. Otherwise, returns null.\nexport function removeSuffix(str: string, suffix: string): string|null {\n  return endsWith(str, suffix) ? str.slice(0, str.length - suffix.length) : null;\n}\n\nexport function removeTrailingSlash(str: string): string {\n  const result = removeSuffix(str, '/');\n  return result === null ? str : result;\n}\n\n// Expose <string>.padStart.  The version of node we use has it, but they typings\n// need the es2017 typescript target.  TODO: replace once typings in place.\nexport function padStart(str: string, targetLength: number, padString: string) {\n  return (str as any).padStart(targetLength, padString);\n}\n\n// Capitalizes every word in a string.\nexport function capitalize(str: string): string {\n  return str.replace(/\\b[a-z]/gi, c => c.toUpperCase());\n}\n\n// Capitalizes the first word in a string.\nexport function capitalizeFirstWord(str: string): string {\n  return str.replace(/\\b[a-z]/i, c => c.toUpperCase());\n}\n\n// Returns whether the string n represents a valid number.\n// http://stackoverflow.com/questions/18082/validate-numbers-in-javascript-isnumeric\nexport function isNumber(n: string): boolean {\n  // This wasn't right for a long time: isFinite() is key to failing on strings like \"5a\".\n  return !isNaN(parseFloat(n)) && isFinite(n as any);\n}\n\n/**\n * Returns a value clamped to the given min-max range.\n * @param {Number} value - some numeric value.\n * @param {Number} min - minimum value allowed.\n * @param {Number} max - maximum value allowed. Must have min <= max.\n * @returns {Number} - value restricted to the given range.\n */\nexport function clamp(value: number, min: number, max: number): number {\n  return Math.max(min, Math.min(max, value));\n}\n\n/**\n * Checks if ele is contained within the given bounds.\n * @param {Number} value\n * @param {Number} bound1 - does not have to be less than/equal to bound2\n * @param {Number} bound2\n * @returns {Boolean} - True/False\n */\nexport function between(value: number, bound1: number, bound2: number): boolean {\n  const lower = Math.min(bound1, bound2);\n  const upper = Math.max(bound1, bound2);\n  return lower <= value && value <= upper;\n}\n\n/**\n * Returns the positive modulo of x by n. (Javascript default allows negatives)\n */\nexport function mod(x: number, n: number): number {\n  return ((x % n) + n) % n;\n}\n\n/**\n * Returns a number that is n rounded down to the next nearest number divisible by m\n */\n\nexport function roundDownToMultiple(n: number, m: number): number {\n  return Math.floor(n / m) * m;\n}\n\n/**\n * Returns the first argument unless it's undefined, in which case returns the second one.\n */\nexport function undefDefault<T>(x: T|undefined, y: T): T {\n  return (x !== void 0) ? x : y;\n}\n\n// for typescript 4\n// type Undef<T> = T extends [infer A, ...infer B] ? undefined extends A ? NonNullable<A> | Undef<B> : A : unknown;\n\ntype Undef1<T> = T extends [infer A] ? A : unknown;\n\ntype Undef2<T> = T extends [infer A, infer B] ?\n    undefined extends A ? NonNullable<A> | Undef1<[B]> : A : Undef1<T>;\n\ntype Undef3<T> = T extends [infer A, infer B, infer C] ?\n    undefined extends A ? NonNullable<A> | Undef2<[B, C]> : A : Undef2<T>;\n\ntype Undef<T> = T extends [infer A, infer B, infer C, infer D] ?\n    undefined extends A ? NonNullable<A> | Undef3<[B, C, D]> : A : Undef3<T>;\n\n/*\n\nUndef<T> can detect correct type that will be returned as a first defined value:\n\nconst t1: number = undef(1, 1 as number | undefined);\nconst t1: number | undefined = undef(2 as number | undefined, 3 as number | undefined);\nconst t3: number = undef(3 as number | undefined, undefined, 4);\nconst t4: number = undef(1, '');\nconst t5: number = undef(1 as number | undefined, 4);\nconst t6: string = undef('1', 2);\nconst t7: string | number = undef(undefined, 2 as number | undefined, '3');\nconst t8: string = undef(undefined, undefined, '3');\nconst t9: string = undef(undefined, '2' as string | undefined, '3');\nconst ta: string | number | undefined = undef(undefined, '2' as string | undefined, 3 as number | undefined);\nconst tb: string | number = undef(undefined, '2' as string | undefined, 3 as number | undefined, 5);\n*/\n\n/**\n * Returns the first defined value from the list or unknown.\n * Use with typed result, so the typescript type checker can provide correct type.\n */\nexport function undef<T extends Array<any>>(...list: T): Undef<T> {\n  for(const value of list) {\n    if (value !== undefined) { return value; }\n  }\n  return undefined as any;\n}\n\n/**\n * Like undef, but each element of list is a method that is only called\n * if needed, and promises are supported. No fancy type inference though, sorry.\n */\nexport async function firstDefined<T>(...list: Array<() => Promise<T>>): Promise<T | undefined> {\n  for(const op of list) {\n    const value = await op();\n    if (value !== undefined) { return value; }\n  }\n  return undefined;\n}\n\n/**\n * Parses json and returns the result, or returns defaultVal if parsing fails.\n */\nexport function safeJsonParse(json: string, defaultVal: any): any {\n  try {\n    return json !== '' && json !== undefined ? JSON.parse(json) : defaultVal;\n  } catch (e) {\n    return defaultVal;\n  }\n}\n\n/**\n * Just like encodeURIComponent, but does not encode slashes. Slashes don't hurt to be included in\n * URL parameters, and look much friendlier not encoded.\n */\nexport function encodeQueryParam(str: string|number|undefined): string {\n  return encodeURIComponent(String(str === undefined ? null : str)).replace(/%2F/g, '/');\n}\n\n/**\n * Encode an object into a querystring (\"key=value&key2=value2\").\n * This is similar to JQuery's $.param, but only works on shallow objects.\n */\nexport function encodeQueryParams(obj: {[key: string]: string|number|undefined}): string {\n  return Object.keys(obj).map((k: string) => encodeQueryParam(k) + '=' + encodeQueryParam(obj[k])).join('&');\n}\n\n/**\n * Return a list of the words in the string, using the given separator string. At most\n * maxNumSplits splits are done, so the result will have at most maxNumSplits + 1 elements (this\n * is the main difference from how JS built-in string.split() works, and similar to Python split).\n * @param {String} str: String to split.\n * @param {String} sep: Separator to split on.\n * @param {Number} maxNumSplits: Maximum number of splits to do.\n * @return {Array[String]} Array of words, of length at most maxNumSplits + 1.\n */\nexport function maxsplit(str: string, sep: string, maxNumSplits: number): string[] {\n  const result: string[] = [];\n  let start = 0, pos;\n  for (let i = 0; i < maxNumSplits; i++) {\n    pos = str.indexOf(sep, start);\n    if (pos === -1) {\n      break;\n    }\n    result.push(str.slice(start, pos));\n    start = pos + sep.length;\n  }\n  result.push(str.slice(start));\n  return result;\n}\n\n\n// Compare arrays of scalars for equality.\nexport function arraysEqual(a: any[], b: any[]): boolean {\n  if (a === b) {\n    return true;\n  }\n  if (!a || !b) {\n    return false;\n  }\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  for (let i = 0; i < a.length; i++) {\n    if (a[i] !== b[i]) { return false; }\n  }\n  return true;\n}\n\n\n// Gives a set representing the set difference a - b.\nexport function setDifference<T>(a: Set<T>, b: Set<T>): Set<T> {\n  const c = new Set<T>();\n  for (const ai of a) {\n    if (!b.has(ai)) { c.add(ai); }\n  }\n  return c;\n}\n\n// Like array.indexOf, but works with array-like objects like HTMLCollection.\nexport function indexOf<T>(arrayLike: ArrayLike<T>, item: T): number {\n  return Array.prototype.indexOf.call(arrayLike, item);\n}\n\n\n/**\n * Removes a value from the given array. Only the first instance is removed.\n * Returns true on success, false if the value was not found.\n */\nexport function arrayRemove<T>(array: T[], value: T): boolean {\n  const index = array.indexOf(value);\n  if (index === -1) {\n    return false;\n  }\n  array.splice(index, 1);\n  return true;\n}\n\n\n/**\n * Inserts value into the array before nextValue, or at the end if nextValue is not found.\n */\nexport function arrayInsertBefore<T>(array: T[], value: T, nextValue: T): void {\n  const index = array.indexOf(nextValue);\n  if (index === -1) {\n    array.push(value);\n  } else {\n    array.splice(index, 0, value);\n  }\n}\n\n\n/**\n * Extends the first array with the second. Like native push, but adds all values in anotherArray.\n */\nexport function arrayExtend<T>(array: T[], anotherArray: T[]): void {\n  for (let i = 0, len = anotherArray.length; i < len; i++) {\n    array.push(anotherArray[i]);\n  }\n}\n\n\n/**\n * Copies count items from fromArray to toArray, copying in a forward direction (which matters\n * when the arrays are the same and source and destination indices overlap).\n *\n * See test/common/arraySplice.js for alternative implementations with timings, from which this\n * one is chosen as consistently among the faster ones.\n */\nexport function arrayCopyForward<T>(toArray: T[], toStart: number,\n                                    fromArray: ArrayLike<T>, fromStart: number, count: number): void {\n  const end = toStart + count;\n  for (const xend = end - 7; toStart < xend; fromStart += 8, toStart += 8) {\n    toArray[toStart] = fromArray[fromStart];\n    toArray[toStart + 1] = fromArray[fromStart + 1];\n    toArray[toStart + 2] = fromArray[fromStart + 2];\n    toArray[toStart + 3] = fromArray[fromStart + 3];\n    toArray[toStart + 4] = fromArray[fromStart + 4];\n    toArray[toStart + 5] = fromArray[fromStart + 5];\n    toArray[toStart + 6] = fromArray[fromStart + 6];\n    toArray[toStart + 7] = fromArray[fromStart + 7];\n  }\n  for (; toStart < end; ++fromStart, ++toStart) {\n    toArray[toStart] = fromArray[fromStart];\n  }\n}\n\n\n/**\n * Copies count items from fromArray to toArray, copying in a backward direction (which matters\n * when the arrays are the same and source and destination indices overlap).\n *\n * See test/common/arraySplice.js for alternative implementations with timings, from which this\n * one is chosen as consistently among the faster ones.\n */\nexport function arrayCopyBackward<T>(toArray: T[], toStart: number,\n                                     fromArray: ArrayLike<T>, fromStart: number, count: number): void {\n  let i = toStart + count - 1, j = fromStart + count - 1;\n  for (const xStart = toStart + 7; i >= xStart; i -= 8, j -= 8) {\n    toArray[i] = fromArray[j];\n    toArray[i - 1] = fromArray[j - 1];\n    toArray[i - 2] = fromArray[j - 2];\n    toArray[i - 3] = fromArray[j - 3];\n    toArray[i - 4] = fromArray[j - 4];\n    toArray[i - 5] = fromArray[j - 5];\n    toArray[i - 6] = fromArray[j - 6];\n    toArray[i - 7] = fromArray[j - 7];\n  }\n  for ( ; i >= toStart; --i, --j) {\n    toArray[i] = fromArray[j];\n  }\n}\n\n\n/**\n * Appends a slice of fromArray to the end of toArray.\n *\n * See test/common/arraySplice.js for alternative implementations with timings, from which this\n * one is chosen as consistently among the faster ones.\n */\nexport function arrayAppend<T>(toArray: T[], fromArray: ArrayLike<T>, fromStart: number, count: number): void {\n  if (count === 1) {\n    toArray.push(fromArray[fromStart]);\n  } else {\n    const len = toArray.length;\n    toArray.length = len + count;\n    arrayCopyForward(toArray, len, fromArray, fromStart, count);\n  }\n}\n\n\n/**\n * Splices array arrToInsert into target starting at the given start index.\n * This implementation tries to be smart by avoiding allocations, appending to the array\n * contiguously, then filling in the gap.\n *\n * See test/common/arraySplice.js for alternative implementations with timings, from which this\n * one is chosen as consistently among the faster ones.\n */\nexport function arraySplice<T>(target: T[], start: number, arrToInsert: ArrayLike<T>): T[] {\n  const origLen = target.length;\n  const tailLen = origLen - start;\n  const insLen = arrToInsert.length;\n  target.length = origLen + insLen;\n  if (insLen > tailLen) {\n    arrayCopyForward(target, origLen, arrToInsert, tailLen, insLen - tailLen);\n    arrayCopyForward(target, start + insLen, target, start, tailLen);\n    arrayCopyForward(target, start, arrToInsert, 0, tailLen);\n  } else {\n    arrayCopyForward(target, origLen, target, origLen - insLen, insLen);\n    arrayCopyBackward(target, start + insLen, target, start, tailLen - insLen);\n    arrayCopyForward(target, start, arrToInsert, 0, insLen);\n  }\n  return target;\n}\n\n\n// Type for a compare func that returns a positive, negative, or zero value, as used for sorting.\nexport type CompareFunc<T> = (a: T, b: T) => number;\n\n/**\n * Returns the index at which the given element can be inserted to keep the array sorted.\n * This is equivalent to underscore's sortedIndex and python's bisect_left.\n * @param {Array} array - sorted array of elements based on the given compareFunc\n * @param {object} elem - object to be inserted in the given array\n * @param {function} compareFunc - compares 2 elements. Returns a pos value if the 1st element is\n *                                 larger, 0 if they're equal, a neg value if the 2nd is larger.\n */\nexport function sortedIndex<T>(array: ArrayLike<T>, elem: T, compareFunc: CompareFunc<T>): number {\n  let lo = 0, mid;\n  let hi = array.length;\n\n  if (array.length === 0) { return 0; }\n  while (lo < hi) {\n    mid = Math.floor((lo + hi) / 2);\n    if (compareFunc(array[mid], elem) < 0) { // mid < elem\n      lo = mid + 1;\n    } else {\n      hi = mid;\n    }\n  }\n  return lo;\n}\n\n/**\n * Returns true if an array contains duplicate values.\n * Values are considered equal if their toString() representations are equal.\n */\nexport function hasDuplicates(array: any[]): boolean {\n  const prevVals = Object.create(null);\n  for (const value of array) {\n    if (value in prevVals) {\n      return true;\n    }\n    prevVals[value] = true;\n  }\n  return false;\n}\n\n/**\n * Counts the number of items in array which satisfy the callback.\n */\nexport function countIf<T>(array: ReadonlyArray<T>, callback: (item: T) => boolean): number {\n  let count = 0;\n  array.forEach(item => {\n    if (callback(item)) { count++; }\n  });\n  return count;\n}\n\n\n/**\n * For two parallel arrays, calls mapFunc(a[i], b[i]) for each pair of corresponding elements, and\n * returns an array of the results.\n */\nexport function map2<T, U, V>(array1: ArrayLike<T>, array2: ArrayLike<U>, mapFunc: (a: T, b: U) => V): V[] {\n  const len = array1.length;\n  const result: V[] = new Array(len);\n  for (let i = 0; i < len; i++) {\n    result[i] = mapFunc(array1[i], array2[i]);\n  }\n  return result;\n}\n\n/**\n * Takes a 2d array returns a new matrix with r rows and c columns\n * @param [Array] dataMatrix: a 2d array\n * @param [Number] r: final row length\n * @param [Number] c: final column length\n */\nexport function growMatrix<T>(dataMatrix: T[][], r: number, c: number): T[][] {\n  const colArr = dataMatrix.map(colVals =>\n    Array.from({length: c}, (_v, k) => colVals[k % colVals.length])\n  );\n  return Array.from({length: r}, (_v, k) => colArr[k % colArr.length]);\n}\n\n/**\n * Returns a function that compares two elements based on multiple sort keys and the\n * given compare functions.\n * Elements are compared using the sort key functions with index 0 having the greatest priority.\n * Subsequent sort key functions are used as tie breakers.\n * @param {function Array} sortKeyFuncs - a list of sort key functions.\n * @param {function Array} compareKeyFuncs - a list of comparison functions parallel to sortKeyFuncs\n * Each compare function  must satisfy the comparison invariant:\n *   If compare(a, b) > 0 then a > b,\n *   If compare(a, b) < 0 then a < b,\n *   If compare(a, b) == 0 then a == b,\n * @param {Array of 1/-1's} optAscending - Comparison on sortKeyFuncs[i] is inverted if optAscending[i] == -1\n */\nexport function multiCompareFunc<T, U>(sortKeyFuncs: ReadonlyArray<(a: T) => U>,\n                                       compareFuncs: ArrayLike<CompareFunc<U>>,\n                                       optAscending?: number[]): CompareFunc<T> {\n  if (sortKeyFuncs.length !== compareFuncs.length) {\n    throw new Error('Number of sort key funcs must be the same as the number of compare funcs');\n  }\n  const ascending = optAscending || sortKeyFuncs.map(() => 1);\n  return function(a: T, b: T): number {\n    let compareOutcome, keyA, keyB;\n    for (let i = 0; i < compareFuncs.length; i++) {\n      keyA = sortKeyFuncs[i](a);\n      keyB = sortKeyFuncs[i](b);\n      compareOutcome = compareFuncs[i](keyA, keyB);\n      if (compareOutcome !== 0) { return ascending[i] * compareOutcome; }\n    }\n    return 0;\n  };\n}\n\n\nexport function nativeCompare<T>(a: T, b: T): number {\n  return (a < b ? -1 : (a > b ? 1 : 0));\n}\n\n/**\n * Creates a function that compares objects by a property value.\n */\nexport function propertyCompare<T>(property: keyof T) {\n  return function(a: T, b: T) {\n    return nativeCompare(a[property], b[property]);\n  };\n}\n\n// TODO: In the future, locale should be a value associated with the document or the user.\nexport const defaultLocale = 'en-US';\nexport const defaultCollator = new Intl.Collator(defaultLocale);\nexport const localeCompare = defaultCollator.compare;\n\n/**\n * A copy of python`s `setdefault` function.\n * Sets key in mapInst to value, if key is not already set.\n * @param {Map} mapInst: Instance of Map.\n * @param {Object} key: Key into the map.\n * @param {Object} value: Value to insert, possibly.\n */\nexport function setDefault<K, V>(mapInst: Map<K, V>, key: K, val: V): V {\n  if (!mapInst.has(key)) { mapInst.set(key, val); }\n  return mapInst.get(key)!;\n}\n\n\n/**\n * Similar to Python's `setdefault`: returns the key `key` from `mapInst`, or if it's not there, sets\n * it to the result buildValue().\n */\nexport function getSetMapValue<K, V>(mapInst: Map<K, V>, key: K, buildValue: () => V): V {\n  if (!mapInst.has(key)) { mapInst.set(key, buildValue()); }\n  return mapInst.get(key)!;\n}\n\n\n/**\n * If key is in mapInst, remove it and return its value, else return `undefined`.\n * @param {Map} mapInst: Instance of Map.\n * @param {Object} key: Key into the map to remove.\n */\nexport function popFromMap<K, V>(mapInst: Map<K, V>, key: K): V|undefined {\n  const value = mapInst.get(key);\n  mapInst.delete(key);\n  return value;\n}\n\n/**\n * For each encountered value in `values`, increment the corresponding counter in `valueCounts`.\n */\nexport function addCountsToMap<T>(valueCounts: Map<T, number>, values: Iterable<T>,\n                                  mapFunc: (v: any) => any = identity) {\n  for (const v of values) {\n    const mappedValue = mapFunc(v);\n    valueCounts.set(mappedValue, (valueCounts.get(mappedValue) || 0) + 1);\n  }\n}\n\n/**\n * Returns whether one Set is a subset of another.\n */\nexport function isSubset(smaller: Set<any>, larger: Set<any>): boolean {\n  for (const value of smaller) {\n    if (!larger.has(value)) {\n      return false;\n    }\n  }\n  return true;\n}\n\n\n/**\n * Merges the contents of two or more objects together into the first object, recursing into\n * nested objects and arrays (like jquery.extend(true, ...)).\n * @param {Object} target - The object to modify. Use {} to create a new merged object.\n * @param {Object} ... - Additional objects from which to copy properties into target.\n * @returns {Object} The first argument, target, modified.\n */\nexport function deepExtend(target: any, _varArgObjects: any): any {\n  for (let i = 1; i < arguments.length; i++) {\n    const object = arguments[i];\n    // Extend the base object\n    for (const name in object) {\n      if (!object.hasOwnProperty(name)) { continue; }\n      let src = object[name];\n      if (src === target || src === undefined) {\n        // Prevent one kind of infinite loop, as JQuery's extend does, and skip undefined values.\n        continue;\n      }\n\n      if (src) {\n        // Recurse if we're merging plain objects or arrays\n        const tgt = target[name];\n        if (Array.isArray(src)) {\n          src = deepExtend(tgt && Array.isArray(tgt) ? tgt : [], src);\n        } else if (typeof src === 'object') {\n          src = deepExtend(tgt && typeof tgt === 'object' ? tgt : {}, src);\n        }\n      }\n      target[name] = src;\n    }\n  }\n  // Return the modified object\n  return target;\n}\n\n\n/**\n * Returns a human-readable string containing a number of bytes, KB, or MB.\n * @param {Number} bytes. Number of bytes.\n * @returns {String} A description such as \"4.1KB\".\n */\nexport function byteString(bytes: number): string {\n  if (bytes < 1024) {\n    return bytes + 'B';\n  } else if (bytes < 1024 * 1024) {\n    return (bytes / 1024).toFixed(1) + 'KB';\n  } else {\n    return (bytes / 1024 / 1024).toFixed(1) + 'MB';\n  }\n}\n\n\n/**\n * Creates a new object mapping each key in keysArray to the value returned by callback.\n * @param {Array} keysArray - Array of strings to use as the properties of the returned object.\n * @param {Function} callback - Function that produces the value for each key. Called in the same\n *    way as array.map() calls its callbacks.\n * @param {Object} optThisArg - Value to use as `this` when executing callback.\n * @returns {Object} - object mapping keys from `keysArray` to values returned by `callback`.\n */\nexport function mapToObject<T>(keysArray: string[], callback: (key: string) => T,\n                               optThisArg: any): {[key: string]: T} {\n  const values: T[] = keysArray.map(callback, optThisArg);\n  const map: {[key: string]: T} = {};\n  for (let i = 0; i < keysArray.length; i++) {\n    map[keysArray[i]] = values[i];\n  }\n  return map;\n}\n\n/**\n * Remove the specified elements from the array, with the elements specified by\n * their index.  The array arr is modified in-place.  The indexes must be provided\n * in order, sorted lowest to highest, with no duplicates, or out-of-bound indices,\n * etc (this method does no error checking; it is used in place of lodash-pullAt\n * for performance reasons).\n */\nexport function pruneArray<T>(arr: T[], indexes: number[]) {\n  if (indexes.length === 0) { return; }\n  if (indexes.length === 1) {\n    arr.splice(indexes[0], 1);\n    return;\n  }\n  const len = arr.length;\n  let arrAt = 0;\n  let indexesAt = 0;\n  for (let i = 0; i < len; i++) {\n    if (i === indexes[indexesAt]) {\n      indexesAt++;\n      continue;\n    }\n    if (i !== arrAt) {\n      arr[arrAt] = arr[i];\n    }\n    arrAt++;\n  }\n  arr.length = arrAt;\n}\n\n/**\n * A List of python identifiers; the result of running keywords.kwlist in Python 2.7.6,\n * plus additional illegal identifiers None, False, True\n * Using [] instead of new Array causes a \"comprehension error\" for some reason\n */\nconst _kwlist = ['and', 'as', 'assert', 'break', 'class', 'continue', 'def',\n             'del', 'elif', 'else', 'except', 'exec', 'finally', 'for', 'from', 'global',\n             'if', 'import', 'in', 'is', 'lambda', 'not', 'or', 'pass', 'print', 'raise',\n             'return', 'try', 'while', 'with', 'yield', 'None', 'False', 'True'];\n/**\n * Given an arbitrary string, makes substitutions to make it a valid SQL/Python identifier.\n * Corresponds to sandbox/grist/gencode.sanitize_ident\n */\nexport function sanitizeIdent(ident: string, prefix?: string) {\n  prefix = prefix || 'c';\n  // Remove non-alphanumeric non-_ chars\n  ident = ident.replace(/[^a-zA-Z0-9_]+/g, '_');\n  // Remove leading and trailing _\n  ident = ident.replace(/^_+|_+$/g, '');\n  // Place prefix at front if the beginning isn't a number\n  ident = ident.replace(/^(?=[0-9])/g, prefix);\n  // Append prefix until it is not  python keyword\n  while (_kwlist.includes(ident)) {\n    ident = prefix + ident;\n  }\n  return ident;\n}\n\n\n/**\n * Clone a function, returning a function object that represents a brand new function with the\n * same code. If the same function is used with different argument types, it would prevent JS V8\n * engine optimizations (or cause it to deoptimize it). If different clones are called with\n * different argument types, they can be optimized independently.\n *\n * As with all micro-optimizations, only do this when the optimization matters.\n */\nexport function cloneFunc(fn: Function): Function {     // tslint:disable-line:ban-types\n  /* jshint evil:true */  // suppress eval warning.\n  return eval('(' + fn.toString() + ')');   // tslint:disable-line:no-eval\n}\n\n\n/**\n * Generates a random id using a sequence of uppercase alphanumeric characters\n * preceded by an optional prefix.\n */\nexport function genRandomId(len: number, optPrefix?: string): string {\n  const chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n  let ret = optPrefix || '';\n  for (let i = 0; i < len; i++) {\n    ret += chars[Math.floor(Math.random() * chars.length)];\n  }\n  return ret;\n}\n\n/**\n * Scans through two sorted arrays, calling a function on each item or pair of items\n * for every present key in order.\n * @param {Array} arrA - First array to scan. NOTE: Should be sorted by the key value.\n * @param {Array} arrB - Second array to scan. NOTE: Should be sorted by the key value.\n * @param {Function} callback - Called with an item from arrA as the first argument and an\n *  item from arrB as the second. Called for every unique key in order, either with one of the\n *  arguments null if the key is present only in one array, or both non-null if the key is\n *  present in both arrays. NOTE: Key values should not be null.\n * @param {Function} optKeyFunc - Optional function to map each array value to a sort key.\n *  Defaults to the identity function.\n */\nexport function sortedScan<T, U>(arrA: ArrayLike<T>, arrB: ArrayLike<U>,\n                                 callback: (a: T|null, B: U|null) => void,\n                                 optKeyFunc?: (item: T|U) => any) {\n  const keyFunc = optKeyFunc || identity;\n  let i = 0, j = 0;\n  while (i < arrA.length || j < arrB.length) {\n    const a = arrA[i], b = arrB[j];\n    const keyA = i < arrA.length ? keyFunc(a) : null;\n    const keyB = j < arrB.length ? keyFunc(b) : null;\n    if (keyA !== null && (keyB === null || keyA < keyB)) {\n      callback(a, null);\n      i++;\n    } else if (keyA === null || keyA > keyB) {\n      callback(null, b);\n      j++;\n    } else {\n      callback(a, b);\n      i++;\n      j++;\n    }\n  }\n}\n\n/**\n * Returns the time in ms to wait until attempting another connection.\n * @param {Number} attemptNumber - Reconnect attempt number starting at 0.\n * @param {Array} intervals - Array of reconnect intervals in ms.\n * @returns {Number}\n */\nexport function getReconnectTimeout(attemptNumber: number, intervals: ArrayLike<number>): number {\n  if (attemptNumber >= intervals.length) {\n    // Add an additional wait time if already at max attempts.\n    const timeout = intervals[intervals.length - 1];\n    return timeout + Math.random() * timeout;\n  } else {\n    return intervals[attemptNumber];\n  }\n}\n\n/**\n * Returns whether the given email is a valid formatted email string.\n * @param {String} email - Email to test.\n * @returns {Boolean}\n */\nexport function isEmail(email: string): boolean {\n  return EMAIL_RE.test(email.toLowerCase());\n}\n\n/*\n * Takes an observable and returns a promise for when the observable's value matches the given\n * predicate. It then unsubscribes from the observable, and returns its value.\n * If a predicate is not given, resolves to the observable values as soon as it's truthy.\n */\nexport function waitObs<T>(observable: KoObservable<T>, predicate: (value: T) => boolean = Boolean): Promise<T> {\n  return new Promise((resolve, _reject) => {\n    const value = observable.peek();\n    if (predicate(value)) { return resolve(value); }\n    const sub = observable.subscribe((val: T) => {\n      if (predicate(val)) {\n        sub.dispose();\n        resolve(val);\n      }\n    });\n  });\n}\n\n/**\n * Same as waitObs but for grainjs observables.\n */\nexport async function waitGrainObs<T>(observable: Observable<T>): Promise<NonNullable<T>>;\nexport async function waitGrainObs<T>(observable: Observable<T>, predicate?: (value: T) => boolean): Promise<T>;\nexport async function waitGrainObs<T>(observable: Observable<T>,\n                                      predicate: (value: T) => boolean = Boolean): Promise<T> {\n  let sub: Listener|undefined;\n  const res: T = await new Promise((resolve, _reject) => {\n    const value = observable.get();\n    if (predicate(value)) { return resolve(value); }\n    sub = observable.addListener((val: T) => {\n      if (predicate(val)) {\n        resolve(val);\n      }\n    });\n  });\n  if (sub) { sub.dispose(); }\n  return res;\n}\n\n\n// `dom.style` does not work here because custom css property (ie: `--foo`) needs to be set using\n// `style.setProperty` (credit: https://vanseodesign.com/css/custom-properties-and-javascript/).\n// TODO: consider making PR to fix `dom.style` in grainjs.\nexport function inlineStyle(property: string, valueObs: BindableValue<string>): DomElementMethod {\n  return (elem) => subscribeElem(elem, valueObs, (val) => {\n    elem.style.setProperty(property, val);\n  });\n}\n\n\n/**\n * Class to maintain a chain of promise-returning callbacks. All scheduled callbacks will be\n * called in order as long as the previous one is successful. If a callback fails is rejected,\n * already-scheduled callbacks will be skipped, but newly-scheduled ones will be run.\n */\nexport class PromiseChain<T> {\n  private _last: Promise<T|void> = Promise.resolve();\n\n  // Adds a callback to the chain. If the callback runs, the return value is the return value of\n  // the callback. If it's skipped due to a failure earlier in the chain, the return value is the\n  // rejection with the message \"Skipped due to an earlier error\".\n  public add(nextCB: () => Promise<T>): Promise<T> {\n    const next = this._last.catch(() => { throw new Error(\"Skipped due to an earlier error\"); }).then(nextCB);\n    // If any callback fails, all queued ones will be skipped. Here we reset the chain, so that\n    // callbacks added later do get run.\n    next.catch(() => { this._last = Promise.resolve(); });\n    this._last = next;\n    return next;\n  }\n}\n\n/**\n * Indicates if a hex color value, e.g. '#000000', is darker than the given value.\n * Darkness is measured from 0..255, where 0 is the darkest and 255 is the lightest.\n *\n * Taken from: https://stackoverflow.com/questions/12043187/how-to-check-if-hex-color-is-too-black\n */\nexport function isColorDark(hexColor: string, isDarkBelow: number = 220): boolean {\n  const c = hexColor.substring(1);  // strip #\n  const rgb = parseInt(c, 16);      // convert rrggbb to decimal\n  // Extract RGB components\n  const r = (rgb >> 16) & 0xff;     // tslint:disable-line:no-bitwise\n  const g = (rgb >>  8) & 0xff;     // tslint:disable-line:no-bitwise\n  const b = (rgb >>  0) & 0xff;     // tslint:disable-line:no-bitwise\n\n  const luma = 0.2126 * r + 0.7152 * g + 0.0722 * b;  // per ITU-R BT.709\n  return luma < isDarkBelow;\n}\n\n/**\n * Returns true if val is a valid hex color value. For instance: #aabbaa is valid, #aabba is not. Do\n * not accept neither short notation nor hex with transparency, ie: #aab, #aabb and #aabbaabb are\n * invalid.\n */\nexport function isValidHex(val: string): boolean {\n  return /^#([0-9A-F]{6})$/i.test(val);\n}\n\n\n/**\n * Returns a promise that resolves to true if promise takes longer than timeoutMsec to resolve. If not\n * or if promise throws returns false.\n */\nexport async function isLongerThan(promise: Promise<any>, timeoutMsec: number): Promise<boolean> {\n  let isPending = true;\n  const done = () => { isPending = false; };\n  await Promise.race([\n    promise.then(done, done),\n    delay(timeoutMsec)\n  ]);\n  return isPending;\n}\n\n/**\n * Returns true if the parameter, when rendered as a string, matches\n * 1, on, or true (case insensitively).  Useful for processing query\n * parameters that may have been manually set.\n */\nexport function isAffirmative(parameter: any): boolean {\n  return ['1', 'on', 'true', 'yes'].includes(String(parameter).toLowerCase());\n}\n\n/**\n * Returns whether a value is neither null nor undefined, with a type guard for the return type.\n *\n * This is particularly useful for filtering, e.g. if `array` includes values of type\n * T|null|undefined, then TypeScript can tell that `array.filter(isNonNullish)` has the type T[].\n */\nexport function isNonNullish<T>(value: T | null | undefined): value is T {\n  return value !== null && value !== undefined;\n}\n\n/**\n * Returns the value of both grainjs and knockout observable without creating a dependency.\n */\nexport const unwrap: UseCB = (obs: ISubscribable) => {\n  if ('_getDepItem' in obs) {\n    return obs.get();\n  }\n  return (obs as ko.Observable).peek();\n};\n\n/**\n * Use helper for simple boolean negation.\n */\nexport const not = (obs: Observable<any>|IKnockoutReadObservable<any>) => (use: UseCBOwner) => !use(obs);\n\n/**\n * Get a set of up to `count` distinct values of `values`.\n */\nexport function getDistinctValues<T>(values: readonly T[], count: number = Infinity): Set<T> {\n  const distinct = new Set<T>();\n  // Add values to the set until it reaches the desired size, or until there are no more values.\n  for (let i = 0; i < values.length && distinct.size < count; i++) {\n    distinct.add(values[i]);\n  }\n  return distinct;\n}\n\n/**\n * Asserts that variable `name` has a non-nullish `value`.\n */\nexport function assertIsDefined<T>(name: string, value: T): asserts value is NonNullable<T> {\n  if (value === undefined || value === null) {\n    throw new Error(`Expected '${name}' to be defined, but received ${value}`);\n  }\n}\n\n/**\n * Calls function `fn`, passes any thrown errors to function `recover`, and finally calls `fn`\n * once more if `recover` doesn't throw.\n */\nexport async function retryOnce<T>(fn: () => Promise<T>, recover: (e: unknown) => Promise<void>): Promise<T> {\n  try {\n    return await fn();\n  } catch (e) {\n    await recover(e);\n    return await fn();\n  }\n}\n\n/**\n * Checks if value is 'empty' (like null, undefined, empty string, empty array/set/map, empty object).\n * Values like 0, true, false are not empty.\n */\nexport function notSet(value: any) {\n  return value === undefined || value === null || value === ''\n         || (Array.isArray(value) && !value.length)\n         || (typeof value === 'object' && !Object.keys(value).length)\n         || (['[object Map]', '[object Set'].includes(value.toString()) && !value.size);\n}\n\n/**\n * Checks if value is 'empty', if it is, returns the default value (which is null).\n */\nexport function ifNotSet(value: any, def: any = null) {\n  return notSet(value) ? def : value;\n}\n","import constant = require('lodash/constant');\nimport times = require('lodash/times');\n\n/**\n * Returns a new array of length count, filled with the given value.\n */\nexport function arrayRepeat<T>(count: number, value: T): T[] {\n  return times(count, constant(value));\n}\n","/**\n * This file adds some includes tweaks to the behavior of Mousetrap.js, the keyboard bindings\n * library. It exports the mousetrap library itself, so you may use it in mousetrap's place.\n */\n\n\n/* global document */\n\nif (typeof window === 'undefined') {\n  // We can't require('mousetrap') in a browserless environment (specifically for unittests)\n  // because it uses global variables right on require, which are not available with jsdom.\n  // So to use mousetrap in unittests, we need to stub it out.\n  module.exports = {\n    bind: function() {},\n    unbind: function() {},\n  };\n} else {\n\n  var Mousetrap = require('mousetrap');\n\n  // Minus is different on Gecko:\n  // see https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode\n  // and https://github.com/ccampbell/mousetrap/pull/215\n  Mousetrap.addKeycodes({173: '-'});\n\n  var customStopCallbacks = new WeakMap();\n\n  var MousetrapProtype = Mousetrap.prototype;\n  var origStopCallback = MousetrapProtype.stopCallback;\n\n  /**\n   * Enhances Mousetrap's stopCallback filter. Normally, mousetrap ignores key events in input\n   * fields and textareas. This replacement allows individual CommandGroups to be activated in such\n   * elements. See also 'attach' method of commands.CommandGroup.\n   */\n  MousetrapProtype.stopCallback = function(e, element, combo, sequence) {\n    if (mousetrapBindingsPaused) {\n      return true;\n    }\n    // If we have a custom stopCallback, use it now.\n    const custom = customStopCallbacks.get(element);\n    if (custom) {\n      return custom(combo);\n    }\n    try {\n      return origStopCallback.call(this, e, element, combo, sequence);\n    } catch (err) {\n      if (!document.body.contains(element)) {\n        // Mousetrap throws a pointless error in this case, which we ignore. It happens when\n        // element gets removed by a non-mousetrap keyboard handler.\n        return;\n      }\n      throw err;\n    }\n  };\n\n\n  var mousetrapBindingsPaused = false;\n\n  /**\n   * Globally pause or unpause mousetrap bindings. This is useful e.g. while a context menu is being\n   * shown, which has its own keyboard handling.\n   */\n  Mousetrap.setPaused = function(yesNo) {\n    mousetrapBindingsPaused = yesNo;\n  };\n\n  /**\n   * Set a custom stopCallback for an element. When a key combo is pressed for this element,\n   * callback(combo) is called. If it returns true, Mousetrap should NOT process the combo.\n   */\n  Mousetrap.setCustomStopCallback = function(element, callback) {\n    customStopCallbacks.set(element, callback);\n  };\n\n  module.exports = Mousetrap;\n}\n","/**\n * Module that allows client-side code to use browser globals (such as `document` or `Node`) in a\n * way that allows those globals to be replaced by mocks in browser-less tests.\n *\n * E.g. test/client/clientUtil.js can replace globals with those provided by jsdom.\n */\n\n\nvar allGlobals = [];\n\n/* global window */\nvar globalVars = (typeof window !== 'undefined' ? window : {});\n\n/**\n * Usage: to get access to global variables `foo` and `bar`, call:\n *    var G = require('browserGlobals').get('foo', 'bar');\n * and use G.foo and G.bar.\n *\n * This modules stores a reference to G, so that setGlobals() call can replace the values to which\n * G.foo and G.bar refer.\n */\nfunction get(varArgNames) {\n  var obj = {\n    neededNames: Array.prototype.slice.call(arguments),\n    globals: {}\n  };\n  updateGlobals(obj);\n  allGlobals.push(obj);\n  return obj.globals;\n}\nexports.get = get;\n\n/**\n * Internal helper which updates properties of all globals objects created with get().\n */\nfunction updateGlobals(obj) {\n  obj.neededNames.forEach(function(key) {\n    obj.globals[key] = globalVars[key];\n  });\n}\n\n/**\n * Replace globals with those from the given object. The previous mapping of global values is\n * returned, so that it can be restored later.\n */\nfunction setGlobals(globals) {\n  var oldVars = globalVars;\n  globalVars = globals;\n  allGlobals.forEach(function(obj) {\n    updateGlobals(obj);\n  });\n  return oldVars;\n}\nexports.setGlobals = setGlobals;\n","// Builds a DOM tree or document fragment, easily.\n//\n// Usage:\n//  dom('a#link.c1.c2', {href:url}, 'Hello ', dom('span', 'world'));\n//      creates Node <a id=\"link\" class=\"c1 c2\" href={{url}}>Hello <span>world</span></a>.\n//  dom.frag(dom('span', 'Hello'), ['blah', dom('div', 'world')])\n//      creates document fragment with <span>Hello</span>blah<div>world</div>.\n//\n// Arrays among child arguments get flattened. Objects are turned into attributes.\n//\n// If an argument is a function it will be called with elem as the argument,\n// which may be a convenient way to modify elements, set styles, or attach events.\n\n\n\nvar ko = require('knockout');\n\n/**\n * Use the browser globals in a way that allows replacing them with mocks in tests.\n */\nvar G = require('./browserGlobals').get('document', 'Node', '$', 'window');\n\n/**\n * dom('tag#id.class1.class2' | Node, other args)\n *  The first argument is typically a string consisting of a tag name, with optional #foo suffix\n *  to add the ID 'foo', and zero or more .bar suffixes to add a css class 'bar'. If the first\n *  argument is a Node, that node is used for subsequent changes without creating a new one.\n *\n *  The rest of the arguments are optional and may be:\n *\n *    Nodes - which become children of the created element;\n *    strings - which become text node children;\n *    objects - of the form {attr: val} to set additional attributes on the element;\n *    Arrays of Nodes - which are flattened out and become children of the created element;\n *    functions - which are called with elem as the argument, for a chance to modify the\n *        element as it's being created. When functions return values (other than undefined),\n *        these return values get applied to the containing element recursively.\n */\nfunction dom(firstArg, ...args) {\n  let elem;\n  if (firstArg instanceof G.Node) {\n    elem = firstArg;\n  } else {\n    elem = createElemFromString(firstArg, createDOMElement);\n  }\n\n  return handleChildren(elem, arguments, 1);\n}\n\n/**\n * dom.svg('tag#id.class1.class2', other args) behaves much like `dom`, but does not accept Node\n * as a first argument--only a tag string. Because SVG elements are created in a different\n * namespace, `dom.svg` should be used for creating SVG elements such as `polygon`.\n */\ndom.svg = function (firstArg, ...args) {\n  let elem = createElemFromString(firstArg, createSVGElement);\n  return handleChildren(elem, arguments, 1);\n};\n\n/**\n * Given a tag string of the form 'tag#id.class1.class2' and an element creator function, returns\n * a new tag element with the id and classes properly set.\n */\nfunction createElemFromString(tagString, elemCreator) {\n  // We do careful hand-written parsing rather than use a regexp for speed. Using a regexp is\n  // significantly more expensive.\n  let tag, id, classes;\n  let dotPos = tagString.indexOf(\".\");\n  let hashPos = tagString.indexOf('#');\n  if (dotPos === -1) {\n    dotPos = tagString.length;\n  } else {\n    classes = tagString.substring(dotPos + 1).replace(/\\./g, ' ');\n  }\n  if (hashPos === -1) {\n    tag = tagString.substring(0, dotPos);\n  } else if (hashPos > dotPos) {\n    throw new Error('ID must come before classes in dom(\"' + tagString + '\")');\n  } else {\n    tag = tagString.substring(0, hashPos);\n    id = tagString.substring(hashPos + 1, dotPos);\n  }\n\n  let elem = elemCreator(tag);\n  if (id)      { elem.setAttribute('id',    id); }\n  if (classes) { elem.setAttribute('class', classes); }\n\n  return elem;\n}\n\nfunction createDOMElement(tagName) {\n  return G.document.createElement(tagName);\n}\n\nfunction createSVGElement(tagName) {\n  return G.document.createElementNS('http://www.w3.org/2000/svg', tagName);\n}\n\n// Append the rest of the arguments as children, flattening arrays\nfunction handleChildren(elem, children, index) {\n  for (var i = index, len = children.length; i < len; i++) {\n    var child = children[i];\n    if (Array.isArray(child)) {\n      child = handleChildren(elem, child, 0);\n    } else if (typeof child == 'function') {\n      child = child(elem);\n      if (typeof child !== 'undefined') {\n        handleChildren(elem, [child], 0);\n      }\n    } else if (child === null || child === void 0) {\n      // nothing\n    } else if (child instanceof G.Node) {\n      elem.appendChild(child);\n    } else if (typeof child === 'object') {\n      for (var key in child) {\n        elem.setAttribute(key, child[key]);\n      }\n    } else {\n      elem.appendChild(G.document.createTextNode(child));\n    }\n  }\n  return elem;\n}\n\n/**\n * Creates a DocumentFragment consisting of all arguments, flattening any arguments that are\n * arrays. If any arguments or array elements are strings, those are turned into text nodes.\n * All argument types supported by the dom() function are supported by dom.frag() as well.\n */\ndom.frag = function(varArgNodes) {\n  var elem = G.document.createDocumentFragment();\n  return handleChildren(elem, arguments, 0);\n};\n\n\n/**\n * Forward all or some arguments to the dom() call. E.g.\n *\n *    dom(a, b, c, dom.fwdArgs(arguments, 2));\n *\n *      is equivalent to:\n *\n *    dom(a, b, c, arguments[2], arguments[3], arguments[4], ...)\n *\n * It is very convenient to use in other functions which want to accept arbitrary arguments for\n * dom() and forward them. See koForm.js for many examples.\n *\n *  @param {Array|Arguments} args: Array or Arguments object containing arguments to forward.\n *  @param {Number} startIndex: The index of the first element to forward.\n */\ndom.fwdArgs = function(args, startIndex) {\n  return function(elem) {\n    handleChildren(elem, args, startIndex);\n  };\n};\n\n\n/**\n * Wraps the given function to make it easy to use as an argument to dom(). The passed-in function\n * must take a DOM Node as the first argument, and the returned wrapped function may be called\n * without this argument when used as an argument to dom(), in which case the original function\n * will be called with the element being constructed.\n *\n * For example, if we define:\n *    foo.method = dom.inlinable(function(elem, a, b) { ... });\n * then the call\n *    dom('div', foo.method(1, 2))\n * translates to\n *    dom('div', function(elem) { foo.method(elem, 1, 2); })\n * which causes foo.method(elem, 1, 2) to be called with elem set to the DIV being constructed.\n *\n * When the first argument is a DOM Node, calls to the wrapped function proceed as usual. In both\n * cases, `this` context is passed along to the wrapped function as expected.\n */\ndom.inlinable = dom.inlineable = function inlinable(func) {\n  return function(optElem) {\n    if (optElem instanceof G.Node) {\n      return func.apply(this, arguments);\n    } else {\n      return wrapInlinable(func, this, arguments);\n    }\n  };\n};\n\nfunction wrapInlinable(func, context, args) {\n  // The switch is an optimization which speeds things up substantially.\n  switch (args.length) {\n    case 0: return function(elem) { return func.call(context, elem); };\n    case 1: return function(elem) { return func.call(context, elem, args[0]); };\n    case 2: return function(elem) { return func.call(context, elem, args[0], args[1]); };\n    case 3: return function(elem) { return func.call(context, elem, args[0], args[1], args[2]); };\n  }\n  return function(elem) {\n    Array.prototype.unshift.call(args, elem);\n    return func.apply(context, args);\n  };\n}\n\n\n/**\n * Shortcut for document.getElementById.\n */\ndom.id = function(id) {\n  return G.document.getElementById(id);\n};\n\n/**\n * Hides the given element. Can be passed into dom(), e.g. dom('div', dom.hide, ...).\n */\ndom.hide = function(elem) {\n  elem.style.display = 'none';\n};\n\n/**\n * Shows the given element, assuming that it's not hidden by a class.\n */\ndom.show = function(elem) {\n  elem.style.display = '';\n};\n\n/**\n * Toggles the given element, assuming that it's not hidden by a class. The second argument is\n * optional, and if provided will make toggle() behave as either show() or hide().\n * @returns {Boolean} Whether the element is visible after toggle.\n */\ndom.toggle = function(elem, optYesNo) {\n  if (optYesNo === undefined)\n    optYesNo = (elem.style.display === 'none');\n  elem.style.display = optYesNo ? '' : 'none';\n  return elem.style.display !== 'none';\n};\n\n\n/**\n * Set the given className on the element while it is being dragged over.\n * Can be used inlined as in `dom(..., dom.dragOverClass('foo'))`.\n * @param {String} className: Class name to set while a drag-over is in progress.\n */\ndom.dragOverClass = dom.inlinable(function(elem, className) {\n  // Note: This is hard to get correct on both FF and Chrome because of dragenter/dragleave events that\n  // occur for contained elements. See\n  // http://stackoverflow.com/questions/7110353/html5-dragleave-fired-when-hovering-a-child-element.\n  // Here we use a reference count, and filter out duplicate dragenter events on the same target.\n  let counter = 0;\n  let lastTarget = null;\n\n  dom.on(elem, 'dragenter', ev => {\n    if (Array.from(ev.originalEvent.dataTransfer.types).includes('text/html')) {\n      // This would not be present when dragging in an actual file. We return undefined, to avoid\n      // suppressing normal behavior (which is suppressed below when we return false).\n      return;\n    }\n    if (ev.target !== lastTarget) {\n      lastTarget = ev.target;\n      ev.originalEvent.dataTransfer.dropEffect = 'copy';\n      if (!counter) { elem.classList.add(className); }\n      counter++;\n    }\n    return false;\n  });\n\n  dom.on(elem, 'dragleave', () => {\n    lastTarget = null;\n    counter = Math.max(0, counter - 1);\n    if (!counter) { elem.classList.remove(className); }\n  });\n\n  dom.on(elem, 'drop', () => {\n    lastTarget = null;\n    counter = 0;\n    elem.classList.remove(className);\n  });\n});\n\n\n/**\n * Change a Node's childNodes similarly to Array splice. This allows removing and adding nodes.\n * It translates to calls to replaceChild, insertBefore, removeChild, and appendChild, as\n * appropriate.\n * @param {Number} index Index at which to start changing the array.\n * @param {Number} howMany Number of old array elements to remove or replace.\n * @param {Node} optNewChildren This is an optional parameter specifying a new node to insert,\n *    and may be repeated to insert multiple nodes. Null values are ignored.\n * @returns {Array[Node]} array of removed nodes.\n * TODO: this desperately needs a unittest.\n */\ndom.splice = function(node, index, howMany, optNewChildren) {\n  var end = Math.min(index + howMany, node.childNodes.length);\n  for (var i = 3; i < arguments.length; i++) {\n    if (arguments[i] !== null) {\n      if (index < end) {\n        node.replaceChild(arguments[i], node.childNodes[index]);\n        index++;\n      } else if (index < node.childNodes.length) {\n        node.insertBefore(arguments[i], node.childNodes[index]);\n      } else {\n        node.appendChild(arguments[i]);\n      }\n    }\n  }\n  var ret = Array.prototype.slice.call(node.childNodes, index, end);\n  while (end > index) {\n    node.removeChild(node.childNodes[--end]);\n  }\n  return ret;\n};\n\n/**\n * Returns the index of the given node among its parent's children (i.e. its siblings).\n */\ndom.childIndex = function(node) {\n  return Array.prototype.indexOf.call(node.parentNode.childNodes, node);\n};\n\n\nfunction makeFilterFunc(selectorOrFunc) {\n  if (typeof selectorOrFunc === 'string') {\n    return function(elem) { return elem.matches && elem.matches(selectorOrFunc); };\n  }\n  return selectorOrFunc;\n}\n\n/**\n * Iterates backwards through the children of `parent`, returning the first one matching the given\n * selector or filter function. Returns null if no matching node is found.\n */\ndom.findLastChild = function(parent, selectorOrFunc) {\n  var filterFunc = makeFilterFunc(selectorOrFunc);\n  for (var c = parent.lastChild; c; c = c.previousSibling) {\n    if (filterFunc(c)) {\n      return c;\n    }\n  }\n  return null;\n};\n\n\n/**\n * Iterates up the DOM tree from `child` to `container`, returning the first Node matching the\n * given selector or filter function. Returns null for no match.\n * If `container` is given, the returned node will be non-null only if contained in it.\n * If `container` is omitted, the search will go all the way up.\n */\ndom.findAncestor = function(child, optContainer, selectorOrFunc) {\n  if (arguments.length === 2) {\n    selectorOrFunc = optContainer;\n    optContainer = null;\n  }\n  var filterFunc = makeFilterFunc(selectorOrFunc);\n  var match = null;\n  while (child) {\n    if (!match && filterFunc(child)) {\n      match = child;\n      if (!optContainer) {\n        return match;\n      }\n    }\n    if (child === optContainer) {\n      return match;\n    }\n    child = child.parentNode;\n  }\n  return null;\n};\n\n\n/**\n * Detaches a Node from its parent, and returns the Node passed in.\n */\ndom.detachNode = function(node) {\n  if (node.parentNode) {\n    node.parentNode.removeChild(node);\n  }\n  return node;\n};\n\n\n/**\n * Use JQuery to attach an event handler to the given element. For documentation, see\n * http://api.jquery.com/on/. You may use this inline while building dom, as:\n *    dom(..., dom.on(events, args...))\n * E.g.\n *    dom('div',\n *      dom.on('click', function(ev) {\n *        console.log(ev);\n *      })\n *    );\n */\ndom.on = dom.inlinable(function(elem, events, optSelector, optData, handler) {\n  G.$(elem).on(events, optSelector, optData, handler);\n});\n\ndom.once = dom.inlinable(function(elem, events, optSelector, optData, handler) {\n  G.$(elem).one(events, optSelector, optData, handler);\n});\n\n/**\n * Helper to do some processing on a DOM element after the current call stack has cleared. E.g.\n *    dom('input',\n *      dom.defer(function(elem) {\n *        elem.focus();\n *      })\n *    );\n * will cause elem.focus() to be called for the INPUT element after a setTimeout of 0.\n *\n * This is often useful for dealing with focusing and selection.\n */\ndom.defer = function(func, optContext) {\n  return function(elem) {\n    setTimeout(func.bind(optContext, elem), 0);\n  };\n};\n\n\n/**\n * Call the given function with the given context when the element is cleaned up using\n * ko.removeNode or ko.cleanNode. This may be used inline as an argument to dom(), without the\n * first argument, to apply to the element being constructed. The function called will receive the\n * element as the sole argument.\n * @param {Node} elem Element whose destruction should trigger a call to func. It\n *    should be omitted when used as an argument to dom().\n * @param {Function} func Function to call, with elem as an argument, when elem is cleaned up.\n * @param {Object} optContext Optionally `this` context to call the function with.\n */\ndom.onDispose = dom.inlinable(function(elem, func, optContext) {\n  ko.utils.domNodeDisposal.addDisposeCallback(elem, func.bind(optContext));\n});\n\n\n/**\n * Tie the disposal of the given value to the given element, so that value.dispose() gets called\n * when the element is cleaned up using ko.removeNode or ko.cleanNode. This may be used inline as\n * an argument to dom(), without the first argument, to apply to the element being constructed.\n * @param {Node} elem Element whose destruction should trigger the disposal of the value. It\n *    should be omitted when used as an argument to dom().\n * @param {Object} disposableValue A value with a dispose() method, such as a computed observable.\n */\ndom.autoDispose = dom.inlinable(function(elem, disposableValue) {\n  ko.utils.domNodeDisposal.addDisposeCallback(elem, function() {\n    disposableValue.dispose();\n  });\n});\n\n\n/**\n * Set an identifier for the given element for identifying the element in automated browser tests.\n * @param {String} ident: Arbitrary string; convention is to name it as \"ModuleName.nameInModule\".\n */\ndom.testId = dom.inlinable(function(elem, ident) {\n  elem.setAttribute('data-test-id', ident);\n});\n\nmodule.exports = dom;\n","module.exports = require('./lib/axios');","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar cookies = require('./../helpers/cookies');\nvar buildURL = require('./../helpers/buildURL');\nvar buildFullPath = require('../core/buildFullPath');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n    var responseType = config.responseType;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password ? unescape(encodeURIComponent(config.auth.password)) : '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    var fullPath = buildFullPath(config.baseURL, config.url);\n    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    function onloadend() {\n      if (!request) {\n        return;\n      }\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !responseType || responseType === 'text' ||  responseType === 'json' ?\n        request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    }\n\n    if ('onloadend' in request) {\n      // Use onloadend if available\n      request.onloadend = onloadend;\n    } else {\n      // Listen for ready state to emulate onloadend\n      request.onreadystatechange = function handleLoad() {\n        if (!request || request.readyState !== 4) {\n          return;\n        }\n\n        // The request errored out and we didn't get a response, this will be\n        // handled by onerror instead\n        // With one exception: request that using file: protocol, most browsers\n        // will return status as 0 even though it's a successful request\n        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n          return;\n        }\n        // readystate handler is calling before onerror or ontimeout handlers,\n        // so we should call onloadend on the next 'tick'\n        setTimeout(onloadend);\n      };\n    }\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(createError('Request aborted', config, 'ECONNABORTED', request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      var timeoutErrorMessage = 'timeout of ' + config.timeout + 'ms exceeded';\n      if (config.timeoutErrorMessage) {\n        timeoutErrorMessage = config.timeoutErrorMessage;\n      }\n      reject(createError(\n        timeoutErrorMessage,\n        config,\n        config.transitional && config.transitional.clarifyTimeoutError ? 'ETIMEDOUT' : 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ?\n        cookies.read(config.xsrfCookieName) :\n        undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(config.withCredentials)) {\n      request.withCredentials = !!config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (responseType && responseType !== 'json') {\n      request.responseType = config.responseType;\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (!requestData) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar mergeConfig = require('./core/mergeConfig');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(mergeConfig(axios.defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\n// Expose isAxiosError\naxios.isAxiosError = require('./helpers/isAxiosError');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n","'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n","'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar buildURL = require('../helpers/buildURL');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\nvar mergeConfig = require('./mergeConfig');\nvar validator = require('../helpers/validator');\n\nvar validators = validator.validators;\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = arguments[1] || {};\n    config.url = arguments[0];\n  } else {\n    config = config || {};\n  }\n\n  config = mergeConfig(this.defaults, config);\n\n  // Set config.method\n  if (config.method) {\n    config.method = config.method.toLowerCase();\n  } else if (this.defaults.method) {\n    config.method = this.defaults.method.toLowerCase();\n  } else {\n    config.method = 'get';\n  }\n\n  var transitional = config.transitional;\n\n  if (transitional !== undefined) {\n    validator.assertOptions(transitional, {\n      silentJSONParsing: validators.transitional(validators.boolean, '1.0.0'),\n      forcedJSONParsing: validators.transitional(validators.boolean, '1.0.0'),\n      clarifyTimeoutError: validators.transitional(validators.boolean, '1.0.0')\n    }, false);\n  }\n\n  // filter out skipped interceptors\n  var requestInterceptorChain = [];\n  var synchronousRequestInterceptors = true;\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    if (typeof interceptor.runWhen === 'function' && interceptor.runWhen(config) === false) {\n      return;\n    }\n\n    synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;\n\n    requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  var responseInterceptorChain = [];\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  var promise;\n\n  if (!synchronousRequestInterceptors) {\n    var chain = [dispatchRequest, undefined];\n\n    Array.prototype.unshift.apply(chain, requestInterceptorChain);\n    chain.concat(responseInterceptorChain);\n\n    promise = Promise.resolve(config);\n    while (chain.length) {\n      promise = promise.then(chain.shift(), chain.shift());\n    }\n\n    return promise;\n  }\n\n\n  var newConfig = config;\n  while (requestInterceptorChain.length) {\n    var onFulfilled = requestInterceptorChain.shift();\n    var onRejected = requestInterceptorChain.shift();\n    try {\n      newConfig = onFulfilled(newConfig);\n    } catch (error) {\n      onRejected(error);\n      break;\n    }\n  }\n\n  try {\n    promise = dispatchRequest(newConfig);\n  } catch (error) {\n    return Promise.reject(error);\n  }\n\n  while (responseInterceptorChain.length) {\n    promise = promise.then(responseInterceptorChain.shift(), responseInterceptorChain.shift());\n  }\n\n  return promise;\n};\n\nAxios.prototype.getUri = function getUri(config) {\n  config = mergeConfig(this.defaults, config);\n  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\\?/, '');\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(mergeConfig(config || {}, {\n      method: method,\n      url: url,\n      data: (config || {}).data\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(mergeConfig(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected, options) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected,\n    synchronous: options ? options.synchronous : false,\n    runWhen: options ? options.runWhen : null\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n","'use strict';\n\nvar isAbsoluteURL = require('../helpers/isAbsoluteURL');\nvar combineURLs = require('../helpers/combineURLs');\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n * @returns {string} The combined full path\n */\nmodule.exports = function buildFullPath(baseURL, requestedURL) {\n  if (baseURL && !isAbsoluteURL(requestedURL)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n};\n","'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData.call(\n    config,\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData.call(\n      config,\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData.call(\n          config,\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n","'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n\n  error.request = request;\n  error.response = response;\n  error.isAxiosError = true;\n\n  error.toJSON = function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: this.config,\n      code: this.code\n    };\n  };\n  return error;\n};\n","'use strict';\n\nvar utils = require('../utils');\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n * @returns {Object} New object resulting from merging config2 to config1\n */\nmodule.exports = function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  var config = {};\n\n  var valueFromConfig2Keys = ['url', 'method', 'data'];\n  var mergeDeepPropertiesKeys = ['headers', 'auth', 'proxy', 'params'];\n  var defaultToConfig2Keys = [\n    'baseURL', 'transformRequest', 'transformResponse', 'paramsSerializer',\n    'timeout', 'timeoutMessage', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName',\n    'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress', 'decompress',\n    'maxContentLength', 'maxBodyLength', 'maxRedirects', 'transport', 'httpAgent',\n    'httpsAgent', 'cancelToken', 'socketPath', 'responseEncoding'\n  ];\n  var directMergeKeys = ['validateStatus'];\n\n  function getMergedValue(target, source) {\n    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {\n      return utils.merge(target, source);\n    } else if (utils.isPlainObject(source)) {\n      return utils.merge({}, source);\n    } else if (utils.isArray(source)) {\n      return source.slice();\n    }\n    return source;\n  }\n\n  function mergeDeepProperties(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(config1[prop], config2[prop]);\n    } else if (!utils.isUndefined(config1[prop])) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  }\n\n  utils.forEach(valueFromConfig2Keys, function valueFromConfig2(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(undefined, config2[prop]);\n    }\n  });\n\n  utils.forEach(mergeDeepPropertiesKeys, mergeDeepProperties);\n\n  utils.forEach(defaultToConfig2Keys, function defaultToConfig2(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(undefined, config2[prop]);\n    } else if (!utils.isUndefined(config1[prop])) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  });\n\n  utils.forEach(directMergeKeys, function merge(prop) {\n    if (prop in config2) {\n      config[prop] = getMergedValue(config1[prop], config2[prop]);\n    } else if (prop in config1) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  });\n\n  var axiosKeys = valueFromConfig2Keys\n    .concat(mergeDeepPropertiesKeys)\n    .concat(defaultToConfig2Keys)\n    .concat(directMergeKeys);\n\n  var otherKeys = Object\n    .keys(config1)\n    .concat(Object.keys(config2))\n    .filter(function filterAxiosKeys(key) {\n      return axiosKeys.indexOf(key) === -1;\n    });\n\n  utils.forEach(otherKeys, mergeDeepProperties);\n\n  return config;\n};\n","'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar defaults = require('./../defaults');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  var context = this || defaults;\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn.call(context, data, headers);\n  });\n\n  return data;\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\nvar enhanceError = require('./core/enhanceError');\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  } else if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  }\n  return adapter;\n}\n\nvar defaults = {\n\n  transitional: {\n    silentJSONParsing: true,\n    forcedJSONParsing: true,\n    clarifyTimeoutError: false\n  },\n\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Accept');\n    normalizeHeaderName(headers, 'Content-Type');\n\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data) || (headers && headers['Content-Type'] === 'application/json')) {\n      setContentTypeIfUnset(headers, 'application/json');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    var transitional = this.transitional;\n    var silentJSONParsing = transitional && transitional.silentJSONParsing;\n    var forcedJSONParsing = transitional && transitional.forcedJSONParsing;\n    var strictJSONParsing = !silentJSONParsing && this.responseType === 'json';\n\n    if (strictJSONParsing || (forcedJSONParsing && utils.isString(data) && data.length)) {\n      try {\n        return JSON.parse(data);\n      } catch (e) {\n        if (strictJSONParsing) {\n          if (e.name === 'SyntaxError') {\n            throw enhanceError(e, this, 'E_JSON_PARSE');\n          }\n          throw e;\n        }\n      }\n    }\n\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n  maxBodyLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    var hashmarkIndex = url.indexOf('#');\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n    (function standardBrowserEnv() {\n      return {\n        write: function write(name, value, expires, path, domain, secure) {\n          var cookie = [];\n          cookie.push(name + '=' + encodeURIComponent(value));\n\n          if (utils.isNumber(expires)) {\n            cookie.push('expires=' + new Date(expires).toGMTString());\n          }\n\n          if (utils.isString(path)) {\n            cookie.push('path=' + path);\n          }\n\n          if (utils.isString(domain)) {\n            cookie.push('domain=' + domain);\n          }\n\n          if (secure === true) {\n            cookie.push('secure');\n          }\n\n          document.cookie = cookie.join('; ');\n        },\n\n        read: function read(name) {\n          var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n          return (match ? decodeURIComponent(match[3]) : null);\n        },\n\n        remove: function remove(name) {\n          this.write(name, '', Date.now() - 86400000);\n        }\n      };\n    })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return {\n        write: function write() {},\n        read: function read() { return null; },\n        remove: function remove() {}\n      };\n    })()\n);\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n","'use strict';\n\n/**\n * Determines whether the payload is an error thrown by Axios\n *\n * @param {*} payload The value to test\n * @returns {boolean} True if the payload is an error thrown by Axios, otherwise false\n */\nmodule.exports = function isAxiosError(payload) {\n  return (typeof payload === 'object') && (payload.isAxiosError === true);\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n    (function standardBrowserEnv() {\n      var msie = /(msie|trident)/i.test(navigator.userAgent);\n      var urlParsingNode = document.createElement('a');\n      var originURL;\n\n      /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n      function resolveURL(url) {\n        var href = url;\n\n        if (msie) {\n        // IE needs attribute set twice to normalize properties\n          urlParsingNode.setAttribute('href', href);\n          href = urlParsingNode.href;\n        }\n\n        urlParsingNode.setAttribute('href', href);\n\n        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n        return {\n          href: urlParsingNode.href,\n          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n          host: urlParsingNode.host,\n          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n          hostname: urlParsingNode.hostname,\n          port: urlParsingNode.port,\n          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n            urlParsingNode.pathname :\n            '/' + urlParsingNode.pathname\n        };\n      }\n\n      originURL = resolveURL(window.location.href);\n\n      /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n      return function isURLSameOrigin(requestURL) {\n        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n        return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n      };\n    })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return function isURLSameOrigin() {\n        return true;\n      };\n    })()\n);\n","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n","'use strict';\n\nvar pkg = require('./../../package.json');\n\nvar validators = {};\n\n// eslint-disable-next-line func-names\n['object', 'boolean', 'number', 'function', 'string', 'symbol'].forEach(function(type, i) {\n  validators[type] = function validator(thing) {\n    return typeof thing === type || 'a' + (i < 1 ? 'n ' : ' ') + type;\n  };\n});\n\nvar deprecatedWarnings = {};\nvar currentVerArr = pkg.version.split('.');\n\n/**\n * Compare package versions\n * @param {string} version\n * @param {string?} thanVersion\n * @returns {boolean}\n */\nfunction isOlderVersion(version, thanVersion) {\n  var pkgVersionArr = thanVersion ? thanVersion.split('.') : currentVerArr;\n  var destVer = version.split('.');\n  for (var i = 0; i < 3; i++) {\n    if (pkgVersionArr[i] > destVer[i]) {\n      return true;\n    } else if (pkgVersionArr[i] < destVer[i]) {\n      return false;\n    }\n  }\n  return false;\n}\n\n/**\n * Transitional option validator\n * @param {function|boolean?} validator\n * @param {string?} version\n * @param {string} message\n * @returns {function}\n */\nvalidators.transitional = function transitional(validator, version, message) {\n  var isDeprecated = version && isOlderVersion(version);\n\n  function formatMessage(opt, desc) {\n    return '[Axios v' + pkg.version + '] Transitional option \\'' + opt + '\\'' + desc + (message ? '. ' + message : '');\n  }\n\n  // eslint-disable-next-line func-names\n  return function(value, opt, opts) {\n    if (validator === false) {\n      throw new Error(formatMessage(opt, ' has been removed in ' + version));\n    }\n\n    if (isDeprecated && !deprecatedWarnings[opt]) {\n      deprecatedWarnings[opt] = true;\n      // eslint-disable-next-line no-console\n      console.warn(\n        formatMessage(\n          opt,\n          ' has been deprecated since v' + version + ' and will be removed in the near future'\n        )\n      );\n    }\n\n    return validator ? validator(value, opt, opts) : true;\n  };\n};\n\n/**\n * Assert object's properties type\n * @param {object} options\n * @param {object} schema\n * @param {boolean?} allowUnknown\n */\n\nfunction assertOptions(options, schema, allowUnknown) {\n  if (typeof options !== 'object') {\n    throw new TypeError('options must be an object');\n  }\n  var keys = Object.keys(options);\n  var i = keys.length;\n  while (i-- > 0) {\n    var opt = keys[i];\n    var validator = schema[opt];\n    if (validator) {\n      var value = options[opt];\n      var result = value === undefined || validator(value, opt, options);\n      if (result !== true) {\n        throw new TypeError('option ' + opt + ' must be ' + result);\n      }\n      continue;\n    }\n    if (allowUnknown !== true) {\n      throw Error('Unknown option ' + opt);\n    }\n  }\n}\n\nmodule.exports = {\n  isOlderVersion: isOlderVersion,\n  assertOptions: assertOptions,\n  validators: validators\n};\n","'use strict';\n\nvar bind = require('./helpers/bind');\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a plain Object\n *\n * @param {Object} val The value to test\n * @return {boolean} True if value is a plain Object, otherwise false\n */\nfunction isPlainObject(val) {\n  if (toString.call(val) !== '[object Object]') {\n    return false;\n  }\n\n  var prototype = Object.getPrototypeOf(val);\n  return prototype === null || prototype === Object.prototype;\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' ||\n                                           navigator.product === 'NativeScript' ||\n                                           navigator.product === 'NS')) {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (isPlainObject(result[key]) && isPlainObject(val)) {\n      result[key] = merge(result[key], val);\n    } else if (isPlainObject(val)) {\n      result[key] = merge({}, val);\n    } else if (isArray(val)) {\n      result[key] = val.slice();\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\n/**\n * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n *\n * @param {string} content with BOM\n * @return {string} content value without BOM\n */\nfunction stripBOM(content) {\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isPlainObject: isPlainObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  extend: extend,\n  trim: trim,\n  stripBOM: stripBOM\n};\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.bowser=t():e.bowser=t()}(this,(function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=90)}({17:function(e,t,r){\"use strict\";t.__esModule=!0,t.default=void 0;var i=r(18),n=function(){function e(){}return e.getFirstMatch=function(e,t){var r=t.match(e);return r&&r.length>0&&r[1]||\"\"},e.getSecondMatch=function(e,t){var r=t.match(e);return r&&r.length>1&&r[2]||\"\"},e.matchAndReturnConst=function(e,t,r){if(e.test(t))return r},e.getWindowsVersionName=function(e){switch(e){case\"NT\":return\"NT\";case\"XP\":return\"XP\";case\"NT 5.0\":return\"2000\";case\"NT 5.1\":return\"XP\";case\"NT 5.2\":return\"2003\";case\"NT 6.0\":return\"Vista\";case\"NT 6.1\":return\"7\";case\"NT 6.2\":return\"8\";case\"NT 6.3\":return\"8.1\";case\"NT 10.0\":return\"10\";default:return}},e.getMacOSVersionName=function(e){var t=e.split(\".\").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return\"Leopard\";case 6:return\"Snow Leopard\";case 7:return\"Lion\";case 8:return\"Mountain Lion\";case 9:return\"Mavericks\";case 10:return\"Yosemite\";case 11:return\"El Capitan\";case 12:return\"Sierra\";case 13:return\"High Sierra\";case 14:return\"Mojave\";case 15:return\"Catalina\";default:return}},e.getAndroidVersionName=function(e){var t=e.split(\".\").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?\"Cupcake\":1===t[0]&&t[1]>=6?\"Donut\":2===t[0]&&t[1]<2?\"Eclair\":2===t[0]&&2===t[1]?\"Froyo\":2===t[0]&&t[1]>2?\"Gingerbread\":3===t[0]?\"Honeycomb\":4===t[0]&&t[1]<1?\"Ice Cream Sandwich\":4===t[0]&&t[1]<4?\"Jelly Bean\":4===t[0]&&t[1]>=4?\"KitKat\":5===t[0]?\"Lollipop\":6===t[0]?\"Marshmallow\":7===t[0]?\"Nougat\":8===t[0]?\"Oreo\":9===t[0]?\"Pie\":void 0},e.getVersionPrecision=function(e){return e.split(\".\").length},e.compareVersions=function(t,r,i){void 0===i&&(i=!1);var n=e.getVersionPrecision(t),s=e.getVersionPrecision(r),o=Math.max(n,s),a=0,u=e.map([t,r],(function(t){var r=o-e.getVersionPrecision(t),i=t+new Array(r+1).join(\".0\");return e.map(i.split(\".\"),(function(e){return new Array(20-e.length).join(\"0\")+e})).reverse()}));for(i&&(a=o-Math.min(n,s)),o-=1;o>=a;){if(u[0][o]>u[1][o])return 1;if(u[0][o]===u[1][o]){if(o===a)return 0;o-=1}else if(u[0][o]<u[1][o])return-1}},e.map=function(e,t){var r,i=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)i.push(t(e[r]));return i},e.getBrowserAlias=function(e){return i.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return i.BROWSER_MAP[e]||\"\"},e}();t.default=n,e.exports=t.default},18:function(e,t,r){\"use strict\";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0;t.BROWSER_ALIASES_MAP={\"Amazon Silk\":\"amazon_silk\",\"Android Browser\":\"android\",Bada:\"bada\",BlackBerry:\"blackberry\",Chrome:\"chrome\",Chromium:\"chromium\",Epiphany:\"epiphany\",Firefox:\"firefox\",Focus:\"focus\",Generic:\"generic\",\"Google Search\":\"google_search\",Googlebot:\"googlebot\",\"Internet Explorer\":\"ie\",\"K-Meleon\":\"k_meleon\",Maxthon:\"maxthon\",\"Microsoft Edge\":\"edge\",\"MZ Browser\":\"mz\",\"NAVER Whale Browser\":\"naver\",Opera:\"opera\",\"Opera Coast\":\"opera_coast\",PhantomJS:\"phantomjs\",Puffin:\"puffin\",QupZilla:\"qupzilla\",QQ:\"qq\",QQLite:\"qqlite\",Safari:\"safari\",Sailfish:\"sailfish\",\"Samsung Internet for Android\":\"samsung_internet\",SeaMonkey:\"seamonkey\",Sleipnir:\"sleipnir\",Swing:\"swing\",Tizen:\"tizen\",\"UC Browser\":\"uc\",Vivaldi:\"vivaldi\",\"WebOS Browser\":\"webos\",WeChat:\"wechat\",\"Yandex Browser\":\"yandex\",Roku:\"roku\"};t.BROWSER_MAP={amazon_silk:\"Amazon Silk\",android:\"Android Browser\",bada:\"Bada\",blackberry:\"BlackBerry\",chrome:\"Chrome\",chromium:\"Chromium\",epiphany:\"Epiphany\",firefox:\"Firefox\",focus:\"Focus\",generic:\"Generic\",googlebot:\"Googlebot\",google_search:\"Google Search\",ie:\"Internet Explorer\",k_meleon:\"K-Meleon\",maxthon:\"Maxthon\",edge:\"Microsoft Edge\",mz:\"MZ Browser\",naver:\"NAVER Whale Browser\",opera:\"Opera\",opera_coast:\"Opera Coast\",phantomjs:\"PhantomJS\",puffin:\"Puffin\",qupzilla:\"QupZilla\",qq:\"QQ Browser\",qqlite:\"QQ Browser Lite\",safari:\"Safari\",sailfish:\"Sailfish\",samsung_internet:\"Samsung Internet for Android\",seamonkey:\"SeaMonkey\",sleipnir:\"Sleipnir\",swing:\"Swing\",tizen:\"Tizen\",uc:\"UC Browser\",vivaldi:\"Vivaldi\",webos:\"WebOS Browser\",wechat:\"WeChat\",yandex:\"Yandex Browser\"};t.PLATFORMS_MAP={tablet:\"tablet\",mobile:\"mobile\",desktop:\"desktop\",tv:\"tv\"};t.OS_MAP={WindowsPhone:\"Windows Phone\",Windows:\"Windows\",MacOS:\"macOS\",iOS:\"iOS\",Android:\"Android\",WebOS:\"WebOS\",BlackBerry:\"BlackBerry\",Bada:\"Bada\",Tizen:\"Tizen\",Linux:\"Linux\",ChromeOS:\"Chrome OS\",PlayStation4:\"PlayStation 4\",Roku:\"Roku\"};t.ENGINE_MAP={EdgeHTML:\"EdgeHTML\",Blink:\"Blink\",Trident:\"Trident\",Presto:\"Presto\",Gecko:\"Gecko\",WebKit:\"WebKit\"}},90:function(e,t,r){\"use strict\";t.__esModule=!0,t.default=void 0;var i,n=(i=r(91))&&i.__esModule?i:{default:i},s=r(18);function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(){function e(){}var t,r,i;return e.getParser=function(e,t){if(void 0===t&&(t=!1),\"string\"!=typeof e)throw new Error(\"UserAgent should be a string\");return new n.default(e,t)},e.parse=function(e){return new n.default(e).getResult()},t=e,i=[{key:\"BROWSER_MAP\",get:function(){return s.BROWSER_MAP}},{key:\"ENGINE_MAP\",get:function(){return s.ENGINE_MAP}},{key:\"OS_MAP\",get:function(){return s.OS_MAP}},{key:\"PLATFORMS_MAP\",get:function(){return s.PLATFORMS_MAP}}],(r=null)&&o(t.prototype,r),i&&o(t,i),e}();t.default=a,e.exports=t.default},91:function(e,t,r){\"use strict\";t.__esModule=!0,t.default=void 0;var i=u(r(92)),n=u(r(93)),s=u(r(94)),o=u(r(95)),a=u(r(17));function u(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||\"\"===e)throw new Error(\"UserAgent parameter can't be empty\");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=i.default.find((function(t){if(\"function\"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error(\"Browser's test function is not valid\")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||\"\":this.getBrowser().name||\"\"},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=n.default.find((function(t){if(\"function\"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error(\"Browser's test function is not valid\")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||\"\":t||\"\"},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||\"\":t||\"\"},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=s.default.find((function(t){if(\"function\"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error(\"Browser's test function is not valid\")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||\"\":this.getEngine().name||\"\"},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=o.default.find((function(t){if(\"function\"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error(\"Browser's test function is not valid\")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return Object.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,r={},i=0,n={},s=0;if(Object.keys(e).forEach((function(t){var o=e[t];\"string\"==typeof o?(n[t]=o,s+=1):\"object\"==typeof o&&(r[t]=o,i+=1)})),i>0){var o=Object.keys(r),a=o.find((function(e){return t.isOS(e)}));if(a){var u=this.satisfies(r[a]);if(void 0!==u)return u}var d=o.find((function(e){return t.isPlatform(e)}));if(d){var c=this.satisfies(r[d]);if(void 0!==c)return c}}if(s>0){var f=Object.keys(n).find((function(e){return t.isBrowser(e,!0)}));if(void 0!==f)return this.compareVersion(n[f])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var r=this.getBrowserName().toLowerCase(),i=e.toLowerCase(),n=a.default.getBrowserTypeByAlias(i);return t&&n&&(i=n.toLowerCase()),i===r},t.compareVersion=function(e){var t=[0],r=e,i=!1,n=this.getBrowserVersion();if(\"string\"==typeof n)return\">\"===e[0]||\"<\"===e[0]?(r=e.substr(1),\"=\"===e[1]?(i=!0,r=e.substr(2)):t=[],\">\"===e[0]?t.push(1):t.push(-1)):\"=\"===e[0]?r=e.substr(1):\"~\"===e[0]&&(i=!0,r=e.substr(1)),t.indexOf(a.default.compareVersions(n,r,i))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e){return this.isBrowser(e)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=d,e.exports=t.default},92:function(e,t,r){\"use strict\";t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i};var s=/version\\/(\\d+(\\.?_?\\d+)+)/i,o=[{test:[/googlebot/i],describe:function(e){var t={name:\"Googlebot\"},r=n.default.getFirstMatch(/googlebot\\/(\\d+(\\.\\d+))/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/opera/i],describe:function(e){var t={name:\"Opera\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:opera)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\\/|opios/i],describe:function(e){var t={name:\"Opera\"},r=n.default.getFirstMatch(/(?:opr|opios)[\\s/](\\S+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:\"Samsung Internet for Android\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:SamsungBrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe:function(e){var t={name:\"NAVER Whale Browser\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:whale)[\\s/](\\d+(?:\\.\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:\"MZ Browser\"},r=n.default.getFirstMatch(/(?:MZBrowser)[\\s/](\\d+(?:\\.\\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/focus/i],describe:function(e){var t={name:\"Focus\"},r=n.default.getFirstMatch(/(?:focus)[\\s/](\\d+(?:\\.\\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/swing/i],describe:function(e){var t={name:\"Swing\"},r=n.default.getFirstMatch(/(?:swing)[\\s/](\\d+(?:\\.\\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/coast/i],describe:function(e){var t={name:\"Opera Coast\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:coast)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe:function(e){var t={name:\"Yandex Browser\"},r=n.default.getFirstMatch(/(?:yabrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:\"UC Browser\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:ucbrowser)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:\"Maxthon\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:Maxthon|mxios)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe:function(e){var t={name:\"Epiphany\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:epiphany)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe:function(e){var t={name:\"Puffin\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:puffin)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe:function(e){var t={name:\"Sleipnir\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:sleipnir)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe:function(e){var t={name:\"K-Meleon\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:k-meleon)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe:function(e){var t={name:\"WeChat\"},r=n.default.getFirstMatch(/(?:micromessenger)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?\"QQ Browser Lite\":\"QQ Browser\"},r=n.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\\d+(\\.?_?\\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe:function(e){var t={name:\"Internet Explorer\"},r=n.default.getFirstMatch(/(?:msie |rv:)(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\\sedg\\//i],describe:function(e){var t={name:\"Microsoft Edge\"},r=n.default.getFirstMatch(/\\sedg\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:\"Microsoft Edge\"},r=n.default.getSecondMatch(/edg([ea]|ios)\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe:function(e){var t={name:\"Vivaldi\"},r=n.default.getFirstMatch(/vivaldi\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe:function(e){var t={name:\"SeaMonkey\"},r=n.default.getFirstMatch(/seamonkey\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe:function(e){var t={name:\"Sailfish\"},r=n.default.getFirstMatch(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe:function(e){var t={name:\"Amazon Silk\"},r=n.default.getFirstMatch(/silk\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe:function(e){var t={name:\"PhantomJS\"},r=n.default.getFirstMatch(/phantomjs\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe:function(e){var t={name:\"SlimerJS\"},r=n.default.getFirstMatch(/slimerjs\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\\bbb\\d+/i,/rim\\stablet/i],describe:function(e){var t={name:\"BlackBerry\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/blackberry[\\d]+\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:\"WebOS Browser\"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe:function(e){var t={name:\"Bada\"},r=n.default.getFirstMatch(/dolfin\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe:function(e){var t={name:\"Tizen\"},r=n.default.getFirstMatch(/(?:tizen\\s?)?browser\\/(\\d+(\\.?_?\\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe:function(e){var t={name:\"QupZilla\"},r=n.default.getFirstMatch(/(?:qupzilla)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:\"Firefox\"},r=n.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\\s/](\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe:function(e){var t={name:\"Chromium\"},r=n.default.getFirstMatch(/(?:chromium)[\\s/](\\d+(\\.?_?\\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:\"Chrome\"},r=n.default.getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe:function(e){var t={name:\"Google Search\"},r=n.default.getFirstMatch(/(?:GSA)\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t={name:\"Android Browser\"},r=n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe:function(e){var t={name:\"PlayStation 4\"},r=n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:\"Safari\"},r=n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search(\"\\\\(\")?/^(.*)\\/(.*)[ \\t]\\((.*)/:/^(.*)\\/(.*) /;return{name:n.default.getFirstMatch(t,e),version:n.default.getSecondMatch(t,e)}}}];t.default=o,e.exports=t.default},93:function(e,t,r){\"use strict\";t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i},s=r(18);var o=[{test:[/Roku\\/DVP/],describe:function(e){var t=n.default.getFirstMatch(/Roku\\/DVP-(\\d+\\.\\d+)/i,e);return{name:s.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=n.default.getFirstMatch(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i,e);return{name:s.OS_MAP.WindowsPhone,version:t}}},{test:[/windows/i],describe:function(e){var t=n.default.getFirstMatch(/Windows ((NT|XP)( \\d\\d?.\\d)?)/i,e),r=n.default.getWindowsVersionName(t);return{name:s.OS_MAP.Windows,version:t,versionName:r}}},{test:[/macintosh/i],describe:function(e){var t=n.default.getFirstMatch(/mac os x (\\d+(\\.?_?\\d+)+)/i,e).replace(/[_\\s]/g,\".\"),r=n.default.getMacOSVersionName(t),i={name:s.OS_MAP.MacOS,version:t};return r&&(i.versionName=r),i}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=n.default.getFirstMatch(/os (\\d+([_\\s]\\d+)*) like mac os x/i,e).replace(/[_\\s]/g,\".\");return{name:s.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t=n.default.getFirstMatch(/android[\\s/-](\\d+(\\.\\d+)*)/i,e),r=n.default.getAndroidVersionName(t),i={name:s.OS_MAP.Android,version:t};return r&&(i.versionName=r),i}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=n.default.getFirstMatch(/(?:web|hpw)[o0]s\\/(\\d+(\\.\\d+)*)/i,e),r={name:s.OS_MAP.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\\bbb\\d+/i,/rim\\stablet/i],describe:function(e){var t=n.default.getFirstMatch(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i,e)||n.default.getFirstMatch(/blackberry\\d+\\/(\\d+([_\\s]\\d+)*)/i,e)||n.default.getFirstMatch(/\\bbb(\\d+)/i,e);return{name:s.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=n.default.getFirstMatch(/bada\\/(\\d+(\\.\\d+)*)/i,e);return{name:s.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=n.default.getFirstMatch(/tizen[/\\s](\\d+(\\.\\d+)*)/i,e);return{name:s.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=n.default.getFirstMatch(/PlayStation 4[/\\s](\\d+(\\.\\d+)*)/i,e);return{name:s.OS_MAP.PlayStation4,version:t}}}];t.default=o,e.exports=t.default},94:function(e,t,r){\"use strict\";t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i},s=r(18);var o=[{test:[/googlebot/i],describe:function(){return{type:\"bot\",vendor:\"Google\"}}},{test:[/huawei/i],describe:function(e){var t=n.default.getFirstMatch(/(can-l01)/i,e)&&\"Nova\",r={type:s.PLATFORMS_MAP.mobile,vendor:\"Huawei\"};return t&&(r.model=t),r}},{test:[/nexus\\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:\"Nexus\"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:\"Apple\",model:\"iPad\"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:\"Amazon\",model:\"Kindle Fire HD 7\"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:\"Amazon\"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe:function(e){var t=n.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:s.PLATFORMS_MAP.mobile,vendor:\"Apple\",model:t}}},{test:[/nexus\\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:\"Nexus\"}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return\"blackberry\"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:\"BlackBerry\"}}},{test:function(e){return\"bada\"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return\"windows phone\"===e.getBrowserName()},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:\"Microsoft\"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(\".\")[0]);return\"android\"===e.getOSName(!0)&&t>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){return\"android\"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return\"macos\"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:\"Apple\"}}},{test:function(e){return\"windows\"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return\"linux\"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return\"playstation 4\"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(e){return\"roku\"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];t.default=o,e.exports=t.default},95:function(e,t,r){\"use strict\";t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i},s=r(18);var o=[{test:function(e){return\"microsoft edge\"===e.getBrowserName(!0)},describe:function(e){if(/\\sedg\\//i.test(e))return{name:s.ENGINE_MAP.Blink};var t=n.default.getFirstMatch(/edge\\/(\\d+(\\.?_?\\d+)+)/i,e);return{name:s.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:s.ENGINE_MAP.Trident},r=n.default.getFirstMatch(/trident\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:s.ENGINE_MAP.Presto},r=n.default.getFirstMatch(/presto\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe:function(e){var t={name:s.ENGINE_MAP.Gecko},r=n.default.getFirstMatch(/gecko\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\\/537\\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:s.ENGINE_MAP.WebKit},r=n.default.getFirstMatch(/webkit\\/(\\d+(\\.?_?\\d+)+)/i,e);return r&&(t.version=r),t}}];t.default=o,e.exports=t.default}})}));","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nvar K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    var arr = new Uint8Array(1)\n    var proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  var buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  var valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  var b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(\n      value[Symbol.toPrimitive]('string'), encodingOrOffset, length\n    )\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  var length = byteLength(string, encoding) | 0\n  var buf = createBuffer(length)\n\n  var actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  var buf = createBuffer(length)\n  for (var i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    var copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  var buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    var buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        Buffer.from(buf).copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  var len = string.length\n  var mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  var strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (var i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    var len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nvar hexSliceLookupTable = (function () {\n  var alphabet = '0123456789abcdef'\n  var table = new Array(256)\n  for (var i = 0; i < 16; ++i) {\n    var i16 = i * 16\n    for (var j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n","/**\n * Module that allows client-side code to use browser globals (such as `document` or `Node`) in a\n * way that allows those globals to be replaced by mocks in browser-less tests.\n *\n *    import {G} from 'browserGlobals';\n *    ... use G.document\n *    ... use G.Node\n *\n * Initially, the global `window` object, is the source of the global values.\n *\n * To use a mock of globals in a test, use:\n *\n *    import {pushGlobals, popGlobals} as G from 'browserGlobals';\n *    before(function() {\n *      pushGlobals(mockWindow);    // e.g. jsdom.jsdom(...).defaultView\n *    });\n *    after(function() {\n *      popGlobals();\n *    });\n */\n\nexport interface IBrowserGlobals {\n  DocumentFragment: typeof DocumentFragment;\n  Element: typeof Element;\n  Node: typeof Node;\n  document: typeof document;\n  window: typeof window;\n}\n\nexport interface IBrowserGlobalsLax extends IBrowserGlobals {window: any};\n\nfunction _updateGlobals(dest: IBrowserGlobals, source: IBrowserGlobals): void {\n  dest.DocumentFragment  = source.DocumentFragment;\n  dest.Element           = source.Element;\n  dest.Node              = source.Node;\n  dest.document          = source.document;\n  dest.window            = source.window;\n}\n\n// The initial IBrowserGlobals object.\nconst initial: IBrowserGlobals = {} as IBrowserGlobals;\n_updateGlobals(initial, (typeof window !== 'undefined' ? window as any : {}));\n\n// The globals G object strats out with a copy of `initial`.\nexport const G: IBrowserGlobals = { ...initial };\n\n// The stack of globals that always has the intial object, but which may be overridden.\nconst _globalsStack: IBrowserGlobals[] = [initial];\n\n/**\n * Replace globals with those from the given object. Use popGlobals() to restore previous values.\n */\nexport function pushGlobals(globals: IBrowserGlobalsLax): void {\n  _globalsStack.push(globals);\n  _updateGlobals(G, globals);\n}\n\n/**\n * Restore the values of globals to undo the preceding pushGlobals() call.\n */\nexport function popGlobals(): void {\n  if (_globalsStack.length > 1) {\n    _globalsStack.pop();\n  }\n  _updateGlobals(G, _globalsStack[_globalsStack.length - 1]);\n}\n","/**\n * dispose.js provides tools to objects that needs to dispose resources, such as destroy DOM, and\n * unsubscribe from events. The motivation with examples is presented here:\n *\n *    https://phab.getgrist.com/w/disposal/\n *\n * Disposable is a class for components that need cleanup (e.g. maintain DOM, listen to events,\n * subscribe to anything). It provides a .dispose() method that should be called to destroy the\n * component, and .onDispose()/.autoDispose() methods that the component should use to take\n * responsibility for other pieces that require cleanup.\n *\n * To define a disposable class:\n *    class Foo extends Disposable { ... }\n *\n * To create Foo:\n *    const foo = Foo.create(owner, ...args);\n * This is better than `new Foo` for two reasons:\n *    1. If Foo's constructor throws an exception, any disposals registered in that constructor\n *       before the exception are honored.\n *    2. It ensures you specify the owner of the new instance (but you can use null to skip it).\n *\n * In Foo's constructor (or rarely methods), take ownership of other Disposable objects:\n *    this.bar = Bar.create(this, ...);\n *\n * For objects that are not instances of Disposable but have a .dispose() methods, use:\n *    this.bar = this.autoDispose(createSomethingDisposable());\n *\n * To call a function on disposal (e.g. to add custom disposal logic):\n *    this.onDispose(() => this.myUnsubscribeAllMethod());\n *    this.onDispose(this.myUnsubscribeAllMethod, this);    // slightly more efficient\n *\n * To mark this object to be wiped out on disposal (i.e. set all properties to null):\n *    this.wipeOnDispose();\n * See the documentation of that method for more info.\n *\n * To dispose Foo directly:\n *    foo.dispose();\n * To determine if an object has already been disposed:\n *    foo.isDisposed()\n *\n * If you need to replace an owned object, or release, or dispose it early, use a Holder:\n *    this._holder = Holder.create(this);\n *    Bar.create(this._holder, 1);      // creates new Bar(1)\n *    Bar.create(this._holder, 2);      // creates new Bar(2) and disposes previous object\n *    this._holder.clear();             // disposes contained object\n *    this._holder.release();           // releases contained object\n *\n * If you need a container for multiple objects and dispose them all together, use a MultiHolder:\n *    this._mholder = MultiHolder.create(null);\n *    Bar.create(this._mholder, 1);     // create new Bar(1)\n *    Bar.create(this._mholder, 2);     // create new Bar(2)\n *    this._mholder.dispose();          // disposes both objects\n *\n * If creating your own class with a dispose() method, do NOT throw exceptions from dispose().\n * These cannot be handled properly in all cases. Read here about the same issue in C++:\n *    http://bin-login.name/ftp/pub/docs/programming_languages/cpp/cffective_cpp/MAGAZINE/SU_FRAME.HTM#destruct\n *\n * Using a parametrized (generic) class as a Disposable is tricky. E.g.\n *    class Bar<T> extends Disposable { ... }\n *    // Bar<T>.create(...)   <-- doesn't work\n *    // Bar.create<T>(...)   <-- doesn't work\n *    // Bar.create(...)      <-- works, but with {} for Bar's type parameters\n *\n * The solution is to expose the constructor type using a helper method:\n *    class Bar<T> extends Disposable {\n *      // Note the tuple below which must match the constructor parameters of Bar<U>.\n *      public static ctor<U>(): IDisposableCtor<Bar<U>, [U, boolean]> { return this; }\n *      constructor(a: T, b: boolean) { ... }\n *    }\n *    Bar.ctor<T>().create(...)   // <-- works, creates Bar<T>, and does type-checking!\n */\n\nimport {LLink} from './emit';\n\n/**\n * Anything with a .dispose() method is a disposable object, and implements the IDisposable interface.\n */\nexport interface IDisposable {\n  dispose(): void;\n}\n\n/**\n * Anything with .autoDispose() can be the owner of a disposable object. This is a type-specific\n * class that can only own a disposable object of type T.\n */\nexport interface IDisposableOwnerT<T extends IDisposable> {\n  autoDispose(obj: T): void;\n}\n\n/**\n * Type that can own an object of any disposable type.\n */\nexport interface IDisposableOwner {\n  autoDispose(obj: IDisposable): void;\n}\n\n// Internal \"owner\" of disposable objects which doesn't actually dispose or keep track of them. It\n// is the effective owner when creating a Disposable with `new Foo()` rather than `Foo.create()`.\nconst _noopOwner: IDisposableOwner = {\n  autoDispose(obj: IDisposable): void { /* noop */ },\n};\n\n// Newly-created Disposable instances will have this as their owner. This is not a constant, it\n// is used by create() for the safe creation of Disposables.\nlet _defaultDisposableOwner = _noopOwner;\n\n/**\n * The static portion of class Disposable.\n */\nexport interface IDisposableCtor<Derived, CtorArgs extends any[]> {\n  new(...args: CtorArgs): Derived;\n  create<T extends new(...args: any[]) => any>(\n    this: T, owner: IDisposableOwnerT<InstanceType<T>>|null, ...args: ConstructorParameters<T>): InstanceType<T>;\n}\n\n/**\n * Base class for disposable objects that can own other objects. See the module documentation.\n */\nexport abstract class Disposable implements IDisposable, IDisposableOwner {\n  /**\n   * Create Disposable instances using `Class.create(owner, ...)` rather than `new Class(...)`.\n   *\n   * This reminds you to provide an owner, and ensures that if the constructor throws an\n   * exception, dispose() gets called to clean up the partially-constructed object.\n   *\n   * Owner may be null if intend to ensure disposal some other way.\n   */\n  public static create<T extends new (...args: any[]) => any>(\n    this: T, owner: IDisposableOwnerT<InstanceType<T>>|null, ...args: ConstructorParameters<T>): InstanceType<T> {\n\n    const origDefaultOwner = _defaultDisposableOwner;\n    const holder = new Holder();\n    try {\n      // The newly-created object will have holder as its owner.\n      _defaultDisposableOwner = holder;\n      return setDisposeOwner(owner, new this(...args));\n    } catch (e) {\n      try {\n        // This calls dispose on the partially-constructed object\n        holder.clear();\n      } catch (e2) {\n        // tslint:disable-next-line:no-console\n        console.error(\"Error disposing partially constructed %s:\", this.name, e2);\n      }\n      throw e;\n    } finally {\n      // On success, the new object has a new owner, and we release it from holder.\n      // On error, the holder has been cleared, and the release() is a no-op.\n      holder.release();\n      _defaultDisposableOwner = origDefaultOwner;\n    }\n  }\n\n  private _disposalList: DisposalList = new DisposalList();\n\n  constructor() {\n    // This registers with a temp Holder when using create(), and is a no-op when using `new Foo`.\n    _defaultDisposableOwner.autoDispose(this);\n    // Be sure to reset to no-op, so that a (non-recommended) direct call like 'new Bar()', from\n    // inside Foo's constructor doesn't use the same Holder that's temporarily holding Foo.\n    _defaultDisposableOwner = _noopOwner;\n  }\n\n  /** Take ownership of obj, and dispose it when this.dispose() is called. */\n  public autoDispose<T extends IDisposable>(obj: T): T {\n    this.onDispose(obj.dispose, obj);\n    return obj;\n  }\n\n  /** Call the given callback when this.dispose() is called. */\n  public onDispose<T>(callback: (this: T) => void, context?: T): DisposeListener {\n    return this._disposalList.addListener(callback, context);\n  }\n\n  /**\n   * Wipe out this object when it is disposed, i.e. set all its properties to null. It is\n   * recommended to call this early in the constructor.\n   *\n   * This makes disposal more costly, but has certain benefits:\n   * - If anything still refers to the object and uses it, we'll get an early error, rather than\n   *   silently keep going, potentially doing useless work (or worse) and wasting resources.\n   * - If anything still refers to the object (even without using it), the fields of the object\n   *   can still be garbage-collected.\n   * - If there are circular references involving this object, they get broken, making the job\n   *   easier for the garbage collector.\n   *\n   * The recommendation is to use it for complex, longer-lived objects, but to skip for objects\n   * which are numerous and short-lived (and less likely to be referenced from unexpected places).\n   */\n  public wipeOnDispose(): void {\n    this.onDispose(this._wipeOutObject, this);\n  }\n\n  /**\n   * Returns whether this object has already been disposed.\n   */\n  public isDisposed(): boolean {\n    return this._disposalList === null;\n  }\n\n  /**\n   * Clean up `this` by disposing all owned objects, and calling onDispose() callbacks, in reverse\n   * order to that in which they were added.\n   */\n  public dispose(): void {\n    const disposalList = this._disposalList;\n    if (!disposalList) {\n        // tslint:disable-next-line:no-console\n      console.error(\"Error disposing %s which is already disposed\", _describe(this));\n    } else {\n      this._disposalList = null!;\n      disposalList.callAndDispose(this);\n    }\n  }\n\n  /**\n   * Wipe out this object by setting each property to null. This is helpful for objects that are\n   * disposed and should be ready to be garbage-collected.\n   */\n  private _wipeOutObject(): void {\n    // The sentinel value doesn't have to be null, but some values cause more helpful errors than\n    // others. E.g. if a.x = \"disposed\", then a.x.foo() throws \"undefined is not a function\", but\n    // when a.x = null, a.x.foo() throws a more helpful \"Cannot read property 'foo' of null\".\n    for (const k of Object.keys(this)) {\n      (this as any)[k] = null;\n    }\n  }\n}\n\n/**\n * Holder keeps a single disposable object. If given responsibility for another object using\n * holder.autoDispose() or Foo.create(holder, ...), it automatically disposes the currently held\n * object. It also disposes it when the holder itself is disposed.\n *\n * If the object is an instance of Disposable, the holder will also notice when the object gets\n * disposed from outside of it, in which case the holder will become empty again.\n */\nexport class Holder<T extends IDisposable> implements IDisposable, IDisposableOwner {\n  public static create<T extends IDisposable>(owner: IDisposableOwnerT<Holder<T>>|null): Holder<T> {\n    return setDisposeOwner(owner, new Holder<T>());\n  }\n\n  protected _owned: T|null = null;\n  private _disposalListener: DisposeListener|undefined = undefined;\n\n  /** Take ownership of a new object, disposing the previously held one. */\n  public autoDispose(obj: T): T {\n    this.clear();\n    this._owned = obj;\n    if (obj instanceof Disposable) {\n      this._disposalListener = obj.onDispose(this._onOutsideDispose, this);\n    }\n    return obj;\n  }\n\n  /** Releases the held object without disposing it, emptying the holder. */\n  public release(): IDisposable|null {\n    this._unlisten();\n    const ret = this._owned;\n    this._owned = null;\n    return ret;\n  }\n\n  /** Disposes the held object and empties the holder. */\n  public clear(): void {\n    this._unlisten();\n    const owned = this._owned;\n    if (owned) {\n      this._owned = null;\n      owned.dispose();\n    }\n  }\n\n  /** Returns the held object, or null if the Holder is empty. */\n  public get(): T|null { return this._owned; }\n\n  /** Returns whether the Holder is empty. */\n  public isEmpty(): boolean { return !this._owned; }\n\n  /** When the holder is disposed, it disposes the held object if any. */\n  public dispose(): void { this.clear(); }\n\n  /** Stop listening for the disposal of this._owned. */\n  private _unlisten() {\n    const disposalListener = this._disposalListener;\n    if (disposalListener) {\n      this._disposalListener = undefined;\n      disposalListener.dispose();\n    }\n  }\n\n  private _onOutsideDispose() {\n    this._disposalListener = undefined;\n    this._owned = null;\n  }\n}\n\n/**\n * MultiHolder keeps multiple disposable object. It disposes all held object when the holder\n * itself is disposed. It's actually nothing more than the Disposable base class itself, just\n * exposed with a clearer name that describes its purpose.\n */\nexport class MultiHolder extends Disposable {}\n\n/**\n * Sets owner of obj (i.e. calls owner.autoDispose(obj)) unless owner is null. Returns obj.\n */\nexport function setDisposeOwner<T extends IDisposable>(owner: IDisposableOwnerT<T>|null, obj: T): T {\n  if (owner) { owner.autoDispose(obj); }\n  return obj;\n}\n\n/**\n * Helper for reporting errors during disposal. Try to report the type of the object.\n */\nfunction _describe(obj: any) {\n  return (obj && obj.constructor && obj.constructor.name ? obj.constructor.name : '' + obj);\n}\n\n/**\n * DisposalList is an internal class mimicking emit.Emitter. The difference is that callbacks are\n * called in reverse order, and exceptions in callbacks are reported and swallowed.\n */\nclass DisposalList extends LLink {\n  constructor() { super(); }\n\n  public addListener<T>(callback: (this: T) => void, optContext?: T): DisposeListener {\n    const lis = new DisposeListener(callback, optContext);\n    this._insertBefore(this._next!, lis);\n    return lis;\n  }\n\n  /**\n   * Call all callbacks and dispose this object. The owner is required for better reporting of\n   * errors if any callback throws.\n   */\n  public callAndDispose(owner: Disposable): void {\n    try {\n      DisposeListener.callAll(this._next!, this, owner);\n    } finally {\n      this._disposeList();\n    }\n  }\n}\n\n/**\n * Internal class that keeps track of one item of the DisposalList. It mimicks emit.Listener, but\n * reports and swallows erros when it calls the callbacks in the list.\n */\nclass DisposeListener extends LLink implements IDisposable {\n  public static callAll(begin: LLink, end: LLink, owner: Disposable): void {\n    while (begin !== end) {\n      const lis = begin as DisposeListener;\n      try {\n        lis.callback.call(lis.context);\n      } catch (e) {\n        // tslint:disable-next-line:no-console\n        console.error(\"While disposing %s, error disposing %s: %s\", _describe(owner), _describe(this), e);\n      }\n      begin = lis._next!;\n    }\n  }\n\n  constructor(private callback: () => void, private context?: any) { super(); }\n\n  public dispose(): void {\n    if (this.isDisposed()) { return; }\n    this._removeNode(this);\n  }\n}\n","/**\n * This module supports computed observables, organizing them into a priority queue, so that\n * computeds can be updated just once after multiple bundled changes.\n *\n * This module is for internal use only (hence the leading underscore in the name). The only\n * function useful outside is exposed via the `observable` module as `observable.bundleChanges()`.\n *\n * Changes may come together because multiple observables are changed synchronously, or because\n * multiple computeds depend on a single changed observable. In either case, if a computed depends\n * on multiple observables that are being changed, we want it to just get updated once when the\n * changes are complete.\n *\n * This is done by maintaining a _priority in each computed, where greater values get evaluated\n * later (computed with greater values depend on those with smaller values). When a computed needs\n * updating, it adds itself to the queue using enqueue() method. At the end of an observable.set()\n * call, or of bundleChanges() call, the queue gets processed in order of _priority.\n */\n\nimport {PriorityQueue} from './PriorityQueue';\n\n/**\n * DepItem is an item in a dependency relationship. It may depend on other DepItems. It is used\n * for subscriptions and computed observables.\n */\nexport class DepItem {\n  public static isPrioritySmaller(a: DepItem, b: DepItem): boolean {\n    return a._priority < b._priority || (a._priority === b._priority && a._creation < b._creation);\n  }\n\n  private _priority: number = 0;\n  private _enqueued: boolean = false;\n  private _callback: () => void;\n  private _context?: object;\n\n  // Order of creation, used for ordering items at same priority.\n  private _creation: number = ++_nextCreationNum;\n\n  /**\n   * Callback should call depItem.useDep(dep) for each DepInput it depends on.\n   */\n  constructor(callback: () => void, optContext?: object) {\n    this._callback = callback;\n    this._context = optContext;\n  }\n\n  /**\n   * Mark depItem as a dependency of this DepItem. The argument may be null to indicate a leaf (an\n   * item such as a plain observable, which does not itself depend on anything else).\n   */\n  public useDep(depItem: DepItem|null): void {\n    const p = depItem ? depItem._priority : 0;\n    if (p >= this._priority) {\n      this._priority = p + 1;\n    }\n  }\n\n  /**\n   * Recompute this DepItem, calling the callback given in the constructor.\n   */\n  public recompute(): void {\n    this._priority = 0;\n    this._callback.call(this._context);\n  }\n\n  /**\n   * Add this DepItem to the queue, to be recomputed when the time is right.\n   */\n  public enqueue(): void {\n    if (!this._enqueued) {\n      this._enqueued = true;\n      queue.push(this);\n    }\n  }\n}\n\n// The main compute queue.\nconst queue = new PriorityQueue<DepItem>(DepItem.isPrioritySmaller);\n\n// Counter for creation order, used to create a stable ordering of DepItems at same priority.\nlet _nextCreationNum = 0;\n\n// Array to keep track of items recomputed during this call to compute(). It could be a local\n// variable in compute(), but is made global to minimize allocations.\nconst _seen: any[] = [];\n\n// Counter used for bundling multiple calls to compute() into one.\nlet bundleDepth = 0;\n\n/**\n * Exposed for unittests. Returns the internal priority value of an observable.\n */\nexport function _getPriority(obs: any): number {\n  const depItem = obs._getDepItem();\n  return depItem ? depItem._priority : 0;\n}\n\n/**\n * Update any computed observables that need updating. The update is deferred if we are currently\n * in the middle of a bundle. This is called automatically whenever you set an observable, and\n * there should be no need to ever call this by users of the library.\n */\nexport function compute(): void {\n  if (bundleDepth === 0 && queue.size > 0) {\n    // Prevent nested compute() calls, which are unnecessary and can cause deep recursion stack.\n    bundleDepth++;\n    try {\n      // We reuse _seen array to minimize allocations, but always leave it empty.\n      do {\n        const item = queue.pop()!;\n        _seen.push(item);\n        item.recompute();\n      } while (queue.size > 0);\n    } finally {\n      // We delay the unsetting of _enqueued flag to here, to protect against infinite loops when\n      // a change to a computed causes it to get enqueued again.\n      for (const item of _seen) {\n        item._enqueued = false;\n      }\n      _seen.length = 0;\n      bundleDepth--;\n    }\n  }\n}\n\n/**\n * Defer recomputations of all computed observables and subscriptions until func() returns. This\n * is useful to avoid unnecessary recomputation if you are making several changes to observables\n * together. This function is exposed as `observable.bundleChanges()`.\n *\n * Note that this intentionally does not wait for promises to be resolved, since that would block\n * all updates to all computeds while waiting.\n */\nexport function bundleChanges<T>(func: () => T): T {\n  try {\n    bundleDepth++;\n    return func();\n  } finally {\n    bundleDepth--;\n    compute();\n  }\n}\n","/**\n * A simple and fast priority queue with a limited interface to push, pop, peek, and get size. It\n * is essentially equivalent to both npm modules 'fastpriorityqueue' and 'qheap', but is in\n * TypeScript and is a bit cleaner and simpler.\n *\n * It is constructed with a function that returns which of two items is \"prior\"; the pop() method\n * returns the most-prior element.\n */\n\nexport type IsPriorFunc<T> = (a: T, b: T) => boolean;\n\nexport class PriorityQueue<T> {\n  // Items form a binary tree packed into an array. Root is items[0]; children of items[i] are\n  // items[2*i+1] and items[2*i+2]; parent of items[i] is items[(i - 1) >> 1]. For all children,\n  // the invariant isPrior(parent, child) holds.\n  private _items: T[] = [];\n\n  constructor(private _isPrior: IsPriorFunc<T>) {}\n\n  public get size(): number { return this._items.length; }\n\n  public push(item: T): void {\n    const items = this._items;\n    const isPrior = this._isPrior;\n\n    let curIdx = this._items.length;\n    while (curIdx > 0) {\n      // While we have a parent that is not prior to us, bubble up the \"hole\" at items.length.\n      const parIdx = (curIdx - 1) >> 1;   // tslint:disable-line:no-bitwise\n      const parItem = items[parIdx];\n      if (isPrior(parItem, item)) {\n        break;\n      }\n      items[curIdx] = parItem;\n      curIdx = parIdx;\n    }\n    items[curIdx] = item;\n  }\n\n  public peek(): T|undefined {\n    return this._items[0];\n  }\n\n  public pop(): T|undefined {\n    if (this._items.length <= 1) { return this._items.pop(); }\n    const items = this._items;\n    const isPrior = this._isPrior;\n    const result = items[0];\n\n    // Bubble the last item downwards from the root.\n    const item = items.pop()!;\n    const size = this._items.length;\n    let curIdx = 0;\n    let leftIdx = 1;\n    while (leftIdx < size) {\n      const rightIdx = leftIdx + 1;\n      const bestIdx = (rightIdx < size && isPrior(items[rightIdx], items[leftIdx])) ?\n        rightIdx : leftIdx;\n      if (isPrior(item, items[bestIdx])) {\n        break;\n      }\n      items[curIdx] = items[bestIdx];\n      curIdx = bestIdx;\n      leftIdx = curIdx + curIdx + 1;\n    }\n    items[curIdx] = item;\n    return result;\n  }\n}\n","/**\n * observable.js implements an observable value, which lets other code subscribe to changes.\n *\n * E.g.\n *  let o = observable(17);\n *  o.get();          // 17\n *  o.addListener(foo);\n *  o.set(\"asdf\");    // foo(\"asdf\", 17) gets called.\n *  o.get();          // \"asdf\"\n *\n * To subscribe to changes, use obs.addListener(callback, context). The callback will get called\n * with (newValue, oldValue) as arguments.\n *\n * When you use observables within the body of a computed(), you can automatically create\n * subscriptions to them with the use(obs) function. E.g.\n *    let obs3 = computed(use => use(obs1) + use(obs2));\n * creates a computed observable `obs3` which is subscribed to changes to `obs1` and `obs2`.\n *\n * Note that unlike with knockout, use(obs) method requires an explicit `use` function, which is\n * always passed to a computed's read() callback for this purpose. This makes it explicit when a\n * dependency is created, and which observables the dependency connects.\n */\n\nimport {compute, DepItem} from './_computed_queue';\nimport {IDisposable, IDisposableOwnerT, setDisposeOwner} from './dispose';\nimport {Emitter, Listener} from './emit';\n\nexport {bundleChanges} from './_computed_queue';\n\nexport class BaseObservable<T> {\n  private _onChange: Emitter;\n  private _value: T;\n\n  /**\n   * Internal constructor for an Observable. You should use observable() function instead.\n   */\n  constructor(value: T) {\n    this._onChange = new Emitter();\n    this._value = value;\n  }\n\n  /**\n   * Returns the value of the observable. It is fast and does not create a subscription.\n   * (It is similar to knockout's peek()).\n   * @returns {Object} The current value of the observable.\n   */\n  public get(): T { return this._value; }\n\n  /**\n   * Sets the value of the observable. If the value differs from the previously set one, then\n   * listeners to this observable will get called with (newValue, oldValue) as arguments.\n   * @param {Object} value: The new value to set.\n   */\n  public set(value: T): void {\n    if (value !== this._value) {\n      this.setAndTrigger(value);\n    }\n  }\n\n  /**\n   * Sets the value of the observable AND calls listeners even if the value is unchanged.\n   */\n  public setAndTrigger(value: T) {\n    const prev = this._value;\n    this._value = value;\n    this._onChange.emit(value, prev);\n    this._disposeOwned();\n    compute();\n  }\n\n  /**\n   * Adds a callback to listen to changes in the observable.\n   * @param {Function} callback: Function, called on changes with (newValue, oldValue) arguments.\n   * @param {Object} optContext: Context for the function.\n   * @returns {Listener} Listener object. Its dispose() method removes the callback.\n   */\n  public addListener(callback: (val: T, prev: T) => void, optContext?: object): Listener {\n    return this._onChange.addListener(callback, optContext);\n  }\n\n  /**\n   * Returns whether this observable has any listeners.\n   */\n  public hasListeners(): boolean {\n    return this._onChange.hasListeners();\n  }\n\n  /**\n   * Sets a single callback to be called when a listener is added or removed. It overwrites any\n   * previously-set such callback.\n   * @param {Function} changeCB(hasListeners): Function to call after a listener is added or\n   *    removed. It's called with a boolean indicating whether this observable has any listeners.\n   *    Pass in `null` to unset the callback. Note that it can be called multiple times in a row\n   *    with hasListeners `true`.\n   */\n  public setListenerChangeCB(changeCB: (hasListeners: boolean) => void, optContext?: any): void {\n    this._onChange.setChangeCB(changeCB, optContext);\n  }\n\n  /**\n   * Used by subscriptions to keep track of dependencies. An observable that has dependnecies,\n   * such as a computed observable, would override this method.\n   */\n  public _getDepItem(): DepItem|null {\n    return null;\n  }\n\n  /**\n   * Disposes the observable.\n   */\n  public dispose(): void {\n    this._disposeOwned();\n    this._onChange.dispose();\n    (this._value as any) = undefined;\n  }\n\n  /**\n   * Returns whether this observable is disposed.\n   */\n  public isDisposed(): boolean {\n    return this._onChange.isDisposed();\n  }\n\n  protected _disposeOwned(arg?: any) { /* noop */ }\n\n  /**\n   * Allow derived classes to emit change events with an additional third argument describing the\n   * change. It always emits the event without checking for value equality.\n   */\n  protected _setWithArg(value: T, arg: any) {\n    const prev = this._value;\n    this._value = value;\n    this._onChange.emit(value, prev, arg);\n    this._disposeOwned(arg);\n    compute();\n  }\n}\n\nexport class Observable<T> extends BaseObservable<T> implements IDisposableOwnerT<T & IDisposable> {\n  // See module-level holder() function below for documentation.\n  public static holder<T>(value: T & IDisposable): Observable<T> {\n    const obs = new Observable<T>(value);\n    obs._owned = value;\n    return obs;\n  }\n\n  /**\n   * Creates a new Observable with the given initial value, and owned by owner.\n   */\n  public static create<T>(owner: IDisposableOwnerT<Observable<T>>|null, value: T): Observable<T> {\n    return setDisposeOwner(owner, new Observable<T>(value));\n  }\n\n  private _owned?: T & IDisposable = undefined;\n\n  /**\n   * The use an observable for a disposable object, use it a DisposableOwner:\n   *\n   *    D.create(obs, ...args)                      // Preferred\n   *    obs.autoDispose(D.create(null, ...args))    // Equivalent\n   *\n   * Either of these usages will set the observable to the newly created value. The observable\n   * will dispose the owned value when it's set to another value, or when it itself is disposed.\n   */\n  public autoDispose(value: T & IDisposable): T & IDisposable {\n    this.setAndTrigger(value);\n    this._owned = value;\n    return value;\n  }\n\n  protected _disposeOwned() {\n    if (this._owned) {\n      this._owned.dispose();\n      this._owned = undefined;\n    }\n  }\n}\n\n/**\n * Creates a new Observable with the initial value of optValue if given or undefined if omitted.\n * @param {Object} optValue: The initial value to set.\n * @returns {Observable} The newly created observable.\n */\nexport function observable<T>(value: T): Observable<T> {\n  return new Observable<T>(value);\n}\n\n/**\n * Creates a new Observable with an initial disposable value owned by this observable, e.g.\n *\n *    const obs = obsHolder<D>(D.create(null, ...args));\n *\n * This is needed because using simply observable<D>(value) would not cause the observable to take\n * ownership of value (i.e. to dispose it later). This function is a less hacky equivalent to:\n *\n *    const obs = observable<D>(null as any);\n *    D.create(obs, ...args);\n *\n * To allow nulls, use observable<D|null>(null); then the obsHolder() constructor is not needed.\n */\nexport function obsHolder<T>(value: T & IDisposable): Observable<T> {\n  return Observable.holder<T>(value);\n}\n","import {IDisposable} from './dispose';\n\n/**\n * Private global disposal map. It maintains the association between DOM nodes and cleanup\n * functions added with dom.onDispose(). To support multiple disposers on one element, we use a\n * WeakMap-based linked list:\n *\n *    _disposeMap[elem] = disposer2;\n *    _disposeMap[disposer2] = disposer1;\n *    etc.\n *\n * This avoids allocating arrays or using undeclared properties for a different linked list.\n */\nconst _disposeMap: WeakMap<Node|INodeFunc, INodeFunc> = new WeakMap();\n\nexport type INodeFunc = (node: Node) => void;\n\n// Internal helper to walk the DOM tree, calling visitFunc(elem) on all descendants of elem.\n// Descendants are processed first.\nfunction _walkDom(elem: Node, visitFunc: INodeFunc): void {\n  let c: Node|null = elem.firstChild;\n  while (c) {\n    // Note: this might be better done using an explicit stack, but in practice DOM trees aren't\n    // so deep as to cause problems.\n    _walkDom(c, visitFunc);\n    c = c.nextSibling;\n  }\n  visitFunc(elem);\n}\n\n// Internal helper to run all disposers for a single element.\nexport function _disposeNode(node: Node): void {\n  let disposer = _disposeMap.get(node);\n  if (disposer) {\n    let key: Node|INodeFunc = node;\n    do {\n      _disposeMap.delete(key);\n      disposer(node);\n      // Find the next disposer; these are chained when there are multiple.\n      key = disposer;\n      disposer = _disposeMap.get(key);\n    } while (disposer);\n  }\n}\n\nfunction _disposeNodeRecursive(node: Node): void {\n  _walkDom(node, domDisposeHooks.disposeNode);\n}\n\nexport interface IDomDisposeHooks {\n  disposeRecursive: (node: Node) => void;\n  disposeNode: (node: Node) => void;\n}\n\n/**\n * Support for extending dom disposal. This is very low-level, and needs utmost care. Any\n * disposers set should take care of calling the original versions of the disposers.\n */\nexport const domDisposeHooks: IDomDisposeHooks = {\n  disposeNode: _disposeNode,\n  disposeRecursive: _disposeNodeRecursive,\n};\n\n/**\n * Run disposers associated with any descendant of elem or with elem itself. Disposers get\n * associated with elements using dom.onDispose(). Descendants are processed first.\n *\n * It is automatically called if one of the function arguments to dom() throws an exception during\n * element creation. This way any onDispose() handlers set on the unfinished element get called.\n *\n * @param {Node} node: The element to run disposers on.\n */\nexport function domDispose(node: Node): void {\n  domDisposeHooks.disposeRecursive(node);\n}\n\n/**\n * Associate a disposerFunc with a DOM element. It will be called when the element is disposed\n * using domDispose() on it or any of its parents. If onDispose is called multiple times, all\n * disposerFuncs will be called in reverse order.\n * @param {Element} elem: The element to associate the disposer with.\n * @param {Function} disposerFunc(elem): Will be called when domDispose() is called on the\n *    element or its ancestor.\n * Note that it is not necessary usually to dispose event listeners attached to an element (e.g.\n * with dom.on()) since their lifetime is naturally limited to the lifetime of the element.\n */\nexport function onDisposeElem(elem: Node, disposerFunc: INodeFunc): void {\n  const prevDisposer = _disposeMap.get(elem);\n  _disposeMap.set(elem, disposerFunc);\n  if (prevDisposer) {\n    _disposeMap.set(disposerFunc, prevDisposer);\n  }\n}\nexport function onDispose(disposerFunc: INodeFunc) {\n  return (elem: Node) => onDisposeElem(elem, disposerFunc);\n}\n\n/**\n * Make the given element own the disposable, and call its dispose method when domDispose() is\n * called on the element or any of its parents.\n * @param {Element} elem: The element to own the disposable.\n * @param {Disposable} disposable: Anything with a .dispose() method.\n */\nexport function autoDisposeElem(elem: Node, disposable: IDisposable|null) {\n  if (disposable) {\n    onDisposeElem(elem, () => disposable.dispose());\n  }\n}\nexport function autoDispose(disposable: IDisposable|null) {\n  if (disposable) {\n    return (elem: Node) => autoDisposeElem(elem, disposable);\n  }\n}\n","/**\n * Grain.js observables and computeds are similar to (and mostly inspired by) those in\n * Knockout.js. In fact, they can work together.\n *\n *  import {fromKo} from 'kowrap'\n *\n *  fromKo(koObservable)\n *\n * returns a Grain.js observable that mirrors the passed-in Knockout observable (which may be a\n * computed as well). Similarly,\n *\n *  import {toKo} from 'kowrap';\n *  import * as ko from 'knockout';\n *\n *  toKo(ko, observable)\n *\n * returns a Knockout.js observable that mirrows the passed-in Grain observable or computed. Note\n * that toKo() mus tbe called with the knockout module as an argument. This is to avoid adding\n * knockout as a dependency of grainjs.\n *\n * In both cases, calling fromKo/toKo twice on the same observable will return the same wrapper,\n * and subscriptions and disposal are appropriately set up to make usage seamless. In particular,\n * the returned wrapper should not be disposed; it's tied to the lifetime of the wrapped object.\n */\n\nimport {domDisposeHooks} from './domDispose';\nimport {bundleChanges, Observable} from './observable';\n\n// Implementation note. Both wrappers are implemented in the same way.\n//\n// Regarding disposal: the wrapper is always subscribed to the underlying observable. The\n// underlying has a reference to the wrapper. So does any listener to the wrapper. The wrapper can\n// be garbage-collected once it has no listeners AND the underlying observable is disposed or\n// unreferenced.\n\nexport interface IKnockoutObservable<T> extends IKnockoutReadObservable<T> {\n  (val: T): void;\n}\n\nexport interface IKnockoutReadObservable<T> {\n  (): T;\n  peek(): T;\n  subscribe(callback: (newValue: T) => void, target?: any, event?: \"change\"): any;\n  getSubscriptionsCount(): number;\n}\n\n// Inference from Knockout observable gets very tricky because ko.Observable includes the function\n// signature `(val: T) => any` from which type `any` gets inferred. We can infer the correct type\n// with this helper.\nexport type InferKoType<KObs extends IKnockoutReadObservable<any>> =\n  KObs extends {peek(): infer T} ? T : never;\n\nconst fromKoWrappers: WeakMap<IKnockoutObservable<any>, Observable<any>> = new WeakMap();\nconst toKoWrappers: WeakMap<Observable<any>, IKnockoutObservable<any>> = new WeakMap();\n\n/**\n * Returns a Grain.js observable which mirrors a Knockout observable.\n *\n * Do not dispose this wrapper, as it is shared by all code using koObs, and its lifetime is tied\n * to the lifetime of koObs. If unused, it consumes minimal resources, and should get garbage\n * collected along with koObs.\n */\nexport function fromKo<KObs extends IKnockoutObservable<any>>(koObs: KObs): Observable<InferKoType<KObs>> {\n  return fromKoWrappers.get(koObs) || fromKoWrappers.set(koObs, new KoWrapObs(koObs)).get(koObs)!;\n}\n\n/**\n * An Observable that wraps a Knockout observable, created via fromKo(). It keeps minimal overhead\n * when unused by only subscribing to the wrapped observable while it itself has subscriptions.\n *\n * This way, when unused, the only reference is from the wrapper to the wrapped object. KoWrapObs\n * should not be disposed; its lifetime is tied to that of the wrapped object.\n */\nexport class KoWrapObs<T> extends Observable<T> {\n  private _koSub: any = null;\n\n  constructor(private _koObs: IKnockoutObservable<T>) {\n    super(_koObs.peek());\n    this.setListenerChangeCB((hasListeners) => {\n      if (!hasListeners) {\n        this._koSub.dispose();\n        this._koSub = null;\n      } else if (!this._koSub) {\n        // TODO this is a little hack, really, BaseObservable should expose a way to set the value\n        // directly by derived classes, i.e. a protected setter.\n        (this as any)._value = this._koObs.peek();\n        this._koSub = this._koObs.subscribe((val) => this.setAndTrigger(val));\n      }\n    });\n  }\n  public get(): T { return this._koObs.peek(); }\n  public set(value: T): void { bundleChanges(() => this._koObs(value)); }\n  public dispose(): void { throw new Error(\"KoWrapObs should not be disposed\"); }\n}\n\nexport interface IKnockoutModule {\n  observable<T>(value: T): IKnockoutObservable<T>;\n  cleanNode(node: Node): void;\n}\n\n/**\n * Returns a Knockout observable which mirrors a Grain.js observable.\n */\nexport function toKo<T>(knockout: IKnockoutModule, grainObs: Observable<T>): IKnockoutObservable<T> {\n  const prevKoObs = toKoWrappers.get(grainObs);\n  if (prevKoObs) {\n    return prevKoObs;\n  }\n  const newKoObs = knockout.observable(grainObs.get());\n  toKoWrappers.set(grainObs, newKoObs);\n  grainObs.addListener((val) => newKoObs(val));\n  return newKoObs;\n}\n\n// Marker for when knockout-disposal integration has already been setup.\nlet koDisposalIsSetup = false;\n\n/**\n * Set up integration between grainjs and knockout disposal. Knockout does cleanup using\n * ko.removeNode / ko.cleanNode (it also takes care of JQuery cleanup if needed). GrainJS does\n * cleanup using dom.domDispose(). By default these don't know about each other.\n *\n * If you mix the two libraries, however, disposing an element may need to trigger disposers\n * registered by either library.\n *\n * This method ensures that this happens.\n *\n * Note: grainjs disposes text nodes too, but nothing relies on it. When disposal is triggered via\n * knockout, we are forced to rely on knockout's node traversal which ignores text nodes.\n */\nexport function setupKoDisposal(ko: IKnockoutModule) {\n  // Ensure we don't do the setup more than once, or things will get called multiple times.\n  if (koDisposalIsSetup) { return; }\n  koDisposalIsSetup = true;\n\n  const koDomNodeDisposal = (ko as any).utils.domNodeDisposal;\n\n  // Knockout by default has an external-data-cleanup func set to cleanup JQuery. Whatever it is\n  // set to, we will continue calling it, and also will call grainjs domDisposeNode.\n  const origKoCleanExternalData = koDomNodeDisposal.cleanExternalData;\n\n  // The original function called by grainjs to clean nodes recursively. We'll override it.\n  const origGrainDisposeRecursive = domDisposeHooks.disposeRecursive;\n\n  // New function called by knockout to do extra cleanup. Now calls grainjs single-node cleanup.\n  // (In knockout, we can only override single-node cleanup.)\n  function newKoCleanExternalData(node: Node) {\n    origKoCleanExternalData(node);\n    domDisposeHooks.disposeNode(node);\n  }\n\n  // Function called by grainjs to clean nodes recursively. We override the recursive cleanup\n  // function to call the recursive knockout cleanup (letting knockout do the dom traversal it\n  // normally does).\n  function newGrainDisposeRecursive(node: Node) {\n    origGrainDisposeRecursive(node);\n\n    // While doing knockout cleanup, do NOT have it call grainjs cleanup too, as that would cause\n    // multiple unnecessary traversals of DOM.\n    koDomNodeDisposal.cleanExternalData = origKoCleanExternalData;\n    try {\n      ko.cleanNode(node);\n    } finally {\n      koDomNodeDisposal.cleanExternalData = newKoCleanExternalData;\n    }\n  }\n\n  // Use knockout and grainjs hooks to actually set the new cleanup functions.\n  koDomNodeDisposal.cleanExternalData = newKoCleanExternalData;\n  domDisposeHooks.disposeRecursive = newGrainDisposeRecursive;\n}\n","/**\n * subscribe.js implements subscriptions to several observables at once.\n *\n * E.g. if we have some existing observables (which may be instances of `computed`),\n * we can subscribe to them explicitly:\n *    let obs1 = observable(5), obs2 = observable(12);\n *    subscribe(obs1, obs2, (use, v1, v2) => console.log(v1, v2));\n *\n * or implicitly by using `use(obs)` function, which allows dynamic subscriptions:\n *    subscribe(use => console.log(use(obs1), use(obs2)));\n *\n * In either case, if obs1 or obs2 is changed, the callbacks will get called automatically.\n *\n * Creating a subscription allows any number of dependencies to be specified explicitly, and their\n * values will be passed to the callback(). These may be combined with automatic dependencies\n * detected using use(). Note that constructor dependencies have less overhead.\n *\n *    subscribe(...deps, ((use, ...depValues) => READ_CALLBACK));\n */\n\nimport {DepItem} from './_computed_queue';\nimport {IDisposableOwner} from './dispose';\nimport {Listener} from './emit';\nimport {fromKo, IKnockoutReadObservable} from './kowrap';\nimport {BaseObservable as Obs} from './observable';\n\nexport interface ISubscribableObs {\n  _getDepItem(): DepItem|null;\n  addListener(callback: (val: any, prev: any) => void, optContext?: object): Listener;\n  get(): any;\n}\n\nexport type ISubscribable = ISubscribableObs | IKnockoutReadObservable<any>;\n\n// Type inference from the simpler Obs<T>|IKnockoutReadObservable<T> does not always produce\n// correct T for ko.Observable. The formula below is a workaround. See also InferKoType in kowrap.\nexport type InferUseType<TObs extends Obs<any>|IKnockoutReadObservable<any>> =\n  TObs extends Obs<infer T> ? T :\n  TObs extends {peek(): infer U} ? U : never;\n\n// The generic type for the use() function that callbacks get.\nexport type UseCB = <TObs extends Obs<any>|IKnockoutReadObservable<any>>(obs: TObs) => InferUseType<TObs>;\n\nexport interface UseCBOwner extends UseCB {    // tslint:disable-line:interface-name\n  owner: IDisposableOwner;\n}\n\ninterface IListenerWithInUse extends Listener {\n  _inUse: boolean;\n}\n\n// Constant empty array, which we use to avoid allocating new read-only empty arrays.\nconst emptyArray: ReadonlyArray<any> = [];\n\nexport class Subscription {\n  private readonly _depItem: DepItem;\n  private readonly _dependencies: ReadonlyArray<ISubscribableObs>;\n  private readonly _depListeners: ReadonlyArray<Listener>;\n  private _dynDeps: Map<ISubscribableObs, IListenerWithInUse>;\n  private _callback: (use: UseCB, ...args: any[]) => void;\n  private _useFunc: UseCB;\n\n  /**\n   * Internal constructor for a Subscription. You should use subscribe() function instead.\n   * The last owner argument is used by computed() to make itself available as the .owner property\n   * of the 'use' function that gets passed to the callback.\n   */\n  constructor(callback: (use: UseCB, ...args: any[]) => void, dependencies: ReadonlyArray<ISubscribable>, owner?: any) {\n    this._depItem = new DepItem(this._evaluate, this);\n    this._dependencies = dependencies.length > 0 ? dependencies : emptyArray;\n    this._depListeners = dependencies.length > 0 ? dependencies.map((obs) => this._subscribeTo(obs)) : emptyArray;\n    this._dynDeps = new Map();   // Maps dependent observable to its Listener object.\n    this._callback = callback;\n    this._useFunc = this._useDependency.bind(this);\n    if (owner) {\n      (this._useFunc as UseCBOwner).owner = owner;\n    }\n\n    this._evaluate();\n  }\n\n  /**\n   * Disposes the computed, unsubscribing it from all observables it depends on.\n   */\n  public dispose() {\n    this._callback = null as any;\n    for (const lis of this._depListeners) { lis.dispose(); }\n    for (const lis of this._dynDeps.values()) { lis.dispose(); }\n  }\n\n  /**\n   * For use by computed(): returns this subscription's hook into the _computed_queue.\n   */\n  public _getDepItem(): DepItem { return this._depItem; }\n\n  /**\n   * @private\n   * Gets called when the callback calls `use(obs)` for an observable. It creates a\n   * subscription to `obs` if one doesn't yet exist.\n   * @param {Observable} obs: The observable being used as a dependency.\n   */\n  private _useDependency(_obs: ISubscribable) {\n    const obs = ('_getDepItem' in _obs) ? _obs : fromKo(_obs);\n    let listener = this._dynDeps.get(obs);\n    if (!listener) {\n      listener = this._subscribeTo(obs) as IListenerWithInUse;\n      this._dynDeps.set(obs, listener);\n    }\n    listener._inUse = true;\n    this._depItem.useDep(obs._getDepItem());\n    return obs.get();\n  }\n\n  /**\n   * @private\n   * Calls the callback() with appropriate args, and updates subscriptions when it is done.\n   * I.e. adds dynamic subscriptions created via `use(obs)`, and disposes those no longer used.\n   */\n  private _evaluate() {\n    if (this._callback === null) { return; }      // Means this Subscription has been disposed.\n    try {\n      // Note that this is faster than using .map().\n      const readArgs: [UseCB, ...any[]] = [this._useFunc];\n      for (let i = 0, len = this._dependencies.length; i < len; i++) {\n        readArgs[i + 1] = this._dependencies[i].get();\n        this._depItem.useDep(this._dependencies[i]._getDepItem());\n      }\n      return this._callback.apply(undefined, readArgs);\n\n    } finally {\n      this._dynDeps.forEach((listener, obs) => {\n        if (listener._inUse) {\n          listener._inUse = false;\n        } else {\n          this._dynDeps.delete(obs);\n          listener.dispose();\n        }\n      });\n    }\n  }\n\n  /**\n   * @private\n   * Subscribes this computed to another observable that it depends on.\n   * @param {Observable} obs: The observable to subscribe to.\n   * @returns {Listener} Listener object.\n   */\n  private _subscribeTo(_obs: ISubscribable) {\n    const obs = ('_getDepItem' in _obs) ? _obs : fromKo(_obs);\n    return obs.addListener(this._enqueue, this);\n  }\n\n  /**\n   * @private\n   * Adds this item to the recompute queue.\n   */\n  private _enqueue() {\n    this._depItem.enqueue();\n  }\n}\n\n/**\n * This is the type-checking interface for subscribe(), which allows TypeScript to do helpful\n * type-checking when using it. We can only support a fixed number of argumnets (explicit\n * dependencies), but 5 should almost always be enough.\n */\nexport function subscribe(cb: (use: UseCB) => void): Subscription;\n\nexport function subscribe<A>(\n    a: Obs<A>,\n    cb: (use: UseCB, a: A) => void): Subscription;\n\nexport function subscribe<A, B>(\n    a: Obs<A>, b: Obs<B>,\n    cb: (use: UseCB, a: A, b: B) => void): Subscription;\n\nexport function subscribe<A, B, C>(\n    a: Obs<A>, b: Obs<B>, c: Obs<C>,\n    cb: (use: UseCB, a: A, b: B, c: C) => void): Subscription;\n\nexport function subscribe<A, B, C, D>(\n    a: Obs<A>, b: Obs<B>, c: Obs<C>, d: Obs<D>,\n    cb: (use: UseCB, a: A, b: B, c: C, d: D) => void): Subscription;\n\nexport function subscribe<A, B, C, D, E>(\n    a: Obs<A>, b: Obs<B>, c: Obs<C>, d: Obs<D>, e: Obs<E>,\n    cb: (use: UseCB, a: A, b: B, c: C, d: D, e: E) => void): Subscription;\n\n/**\n * Creates a new Subscription.\n * @param {Observable} ...observables: The initial params, of which there may be zero or more, are\n *    observables on which this computed depends. When any of them change, the callback()\n *    will be called with the values of these observables as arguments.\n * @param {Function} callback: will be called with arguments (use, ...values), i.e. the\n *    `use` function and values for all of the ...observables that precede this argument.\n *    This callback is called immediately, and whenever any dependency changes.\n * @returns {Subscription} The new subscription which may be disposed to unsubscribe.\n */\nexport function subscribe(...args: any[]): Subscription {\n  const cb = args.pop();\n  // The cast helps ensure that Observable is compatible with ISubscribable abstraction that we use.\n  return new Subscription(cb, args as Array<Obs<any>>);\n}\n","/**\n * computed.js implements a computed observable, whose value depends on other observables and gets\n * recalculated automatically when they change.\n *\n * E.g. if we have some existing observables (which may themselves be instances of `computed`),\n * we can create a computed that subscribes to them explicitly:\n *  let obs1 = observable(5), obs2 = observable(12);\n *  let computed1 = computed(obs1, obs2, (use, v1, v2) => v1 + v2);\n *\n * or implicitly by using `use(obs)` function:\n *  let computed2 = computed(use => use(obs1) + use(obs2));\n *\n * In either case, computed1.get() and computed2.get() will have the value 17. If obs1 or obs2 is\n * changed, computed1 and computed2 will get recomputed automatically.\n *\n * Creating a computed allows any number of dependencies to be specified explicitly, and their\n * values will be passed to the read() callback. These may be combined with automatic dependencies\n * detected using use(). Note that constructor dependencies have less overhead.\n *\n *  let val = computed(...deps, ((use, ...depValues) => READ_CALLBACK));\n *\n * You may specify a `write` callback by calling `onWrite(WRITE_CALLBACK)`, which will be called\n * whenever set() is called on the computed by its user. If a `write` bacllback is not specified,\n * calling `set` on a computed observable will throw an exception.\n *\n * Note that pureComputed.js offers a variation of computed() with the same interface, but which\n * stays unsubscribed from dependencies while it itself has no subscribers.\n *\n * A computed may be used with a disposable value using `use.owner` as the value's owner. E.g.\n *    let val = computed((use) => Foo.create(use.owner, use(a), use(b)));\n *\n * When the computed() is re-evaluated, and when it itself is disposed, it disposes the previously\n * owned value. Note that only the pattern above works, i.e. use.owner may only be used to take\n * ownership of the same disposable that the callback returns.\n */\n\nimport {DepItem} from './_computed_queue';\nimport {IDisposableOwnerT, setDisposeOwner} from './dispose';\nimport {BaseObservable as Obs, Observable} from './observable';\nimport {ISubscribable, Subscription, UseCBOwner as UseCB} from './subscribe';\n\nfunction _noWrite(): never {\n  throw new Error(\"Can't write to non-writable computed\");\n}\n\ntype Owner<T> = IDisposableOwnerT<Computed<T>>|null;\n\nexport class Computed<T> extends Observable<T> {\n  // Still need repetitive declarations to support varargs that are not the final argument.\n  public static create<T>(\n    owner: Owner<T>, cb: (use: UseCB) => T): Computed<T>;\n  public static create<T, A>(\n    owner: Owner<T>, a: Obs<A>,\n    cb: (use: UseCB, a: A) => T): Computed<T>;\n  public static create<T, A, B>(\n    owner: Owner<T>, a: Obs<A>, b: Obs<B>,\n    cb: (use: UseCB, a: A, b: B) => T): Computed<T>;\n  public static create<T, A, B, C>(\n    owner: Owner<T>, a: Obs<A>, b: Obs<B>, c: Obs<C>,\n    cb: (use: UseCB, a: A, b: B, c: C) => T): Computed<T>;\n  public static create<T, A, B, C, D>(\n    owner: Owner<T>, a: Obs<A>, b: Obs<B>, c: Obs<C>, d: Obs<D>,\n    cb: (use: UseCB, a: A, b: B, c: C, d: D) => T): Computed<T>;\n  public static create<T, A, B, C, D, E>(\n    owner: Owner<T>, a: Obs<A>, b: Obs<B>, c: Obs<C>, d: Obs<D>, e: Obs<E>,\n    cb: (use: UseCB, a: A, b: B, c: C, d: D, e: E) => T): Computed<T>;\n\n  /**\n   * Creates a new Computed, owned by the given owner.\n   * @param owner: Object to own this Computed, or null to handle disposal manually.\n   * @param ...observables: Zero or more observables on which this computes depends. The callback\n   *        will get called when any of these changes.\n   * @param callback: Read callback that will be called with (use, ...values),\n   *    i.e. the `use` function and values for all of the ...observables. The callback is called\n   *    immediately and whenever any dependency changes.\n   * @returns {Computed} The newly created computed observable.\n   */\n  public static create<T>(owner: IDisposableOwnerT<Computed<T>>|null, ...args: any[]): Computed<T> {\n    const readCb = args.pop();\n    return setDisposeOwner(owner, new Computed<T>(readCb, args));\n  }\n\n  private _callback: (use: UseCB, ...args: any[]) => T;\n  private _write: (value: T) => void;\n  private _sub: Subscription;\n\n  /**\n   * Internal constructor for a Computed observable. You should use computed() function instead.\n   */\n  constructor(callback: (use: UseCB, ...args: any[]) => T, dependencies: ISubscribable[]) {\n    // At initialization we force an undefined value even though it's not of type T: it gets set\n    // to a proper value during the creation of new Subscription, which calls this._read.\n    super(undefined as any);\n    this._callback = callback;\n    this._write = _noWrite;\n    this._sub = new Subscription(this._read.bind(this), dependencies, this);\n  }\n\n  /**\n   * Used by subscriptions to keep track of dependencies.\n   */\n  public _getDepItem(): DepItem {\n    return this._sub._getDepItem();\n  }\n\n  /**\n   * \"Sets\" the value of the computed by calling the write() callback if one was provided in the\n   * constructor. Throws an error if there was no such callback (not a \"writable\" computed).\n   * @param {Object} value: The value to pass to the write() callback.\n   */\n  public set(value: T): void { this._write(value); }\n\n  /**\n   * Set callback to call when this.set(value) is called, to make it a writable computed. If not\n   * set, attempting to write to this computed will throw an exception.\n   */\n  public onWrite(writeFunc: (value: T) => void): Computed<T> {\n    this._write = writeFunc;\n    return this;\n  }\n\n  /**\n   * Disposes the computed, unsubscribing it from all observables it depends on.\n   */\n  public dispose() {\n    this._sub.dispose();\n    super.dispose();\n  }\n\n  private _read(use: any, ...args: any[]): void {\n    super.set(this._callback(use as UseCB, ...args));\n  }\n}\n\n/**\n * This is the type-checking interface for computed(), which allows TypeScript to do helpful\n * type-checking when using it. We can only support a fixed number of argumnets (explicit\n * dependencies), but 5 should almost always be enough.\n */\nexport function computed<T>(cb: (use: UseCB) => T): Computed<T>;\n\nexport function computed<T, A>(\n  a: Obs<A>,\n  cb: (use: UseCB, a: A) => T): Computed<T>;\n\nexport function computed<T, A, B>(\n  a: Obs<A>, b: Obs<B>,\n  cb: (use: UseCB, a: A, b: B) => T): Computed<T>;\n\nexport function computed<T, A, B, C>(\n  a: Obs<A>, b: Obs<B>, c: Obs<C>,\n  cb: (use: UseCB, a: A, b: B, c: C) => T): Computed<T>;\n\nexport function computed<T, A, B, C, D>(\n  a: Obs<A>, b: Obs<B>, c: Obs<C>, d: Obs<D>,\n  cb: (use: UseCB, a: A, b: B, c: C, d: D) => T): Computed<T>;\n\nexport function computed<T, A, B, C, D, E>(\n  a: Obs<A>, b: Obs<B>, c: Obs<C>, d: Obs<D>, e: Obs<E>,\n  cb: (use: UseCB, a: A, b: B, c: C, d: D, e: E) => T): Computed<T>;\n\n/**\n * Creates a new Computed.\n * @param {Observable} ...observables: The initial params, of which there may be zero or more, are\n *    observables on which this computed depends. When any of them change, the read() callback\n *    will be called with the values of these observables as arguments.\n * @param {Function} readCallback: Read callback that will be called with (use, ...values),\n *    i.e. the `use` function and values for all of the ...observables. The callback is called\n *    immediately and whenever any dependency changes.\n * @returns {Computed} The newly created computed observable.\n */\nexport function computed(...args: any[]): Computed<any> {\n  const readCb = args.pop();\n  return new Computed<any>(readCb, args);\n}\n\n// TODO Consider implementing .singleUse() method.\n// An open question is in how to pass e.g. kd.hide(computed(x, x => !x)) in such a way that\n// the temporary computed can be disposed when temporary, but not otherwise. A function-only\n// syntax is kd.hide(use => !use(x)), but prevents use of static subscriptions.\n//\n// (a) function-only use of computeds is fine and useful.\n// (b) pureComputed is another option, and doesn't technically require getting disposed.\n// (c) kd.hide(compObs), kd.autoDispose(compObs) is more general and\n//     can be replaced more concisely by kd.hide(compObs.singleUse())\n// .singleUse() automatically disposes a computed (or an observable?) once there are no\n// subscriptions to it. If there are no subscriptions at the time of this call, waits for the next\n// tick, and possibly disposes then.\n","/**\n * binding.ts offers a convenient subscribe() function that creates a binding to an observable, a\n * a plain value, or a function from which it builds a computed.\n */\n\nimport {computed} from './computed';\nimport {IDisposable} from './dispose';\nimport {autoDisposeElem} from './domDispose';\nimport {IKnockoutReadObservable, InferKoType} from './kowrap';\nimport {BaseObservable} from './observable';\nimport {subscribe, UseCBOwner} from './subscribe';\n\nexport type BindableValue<T> = BaseObservable<T> | ComputedCallback<T> | T | IKnockoutReadObservable<T>;\n\nexport type ComputedCallback<T> = (use: UseCBOwner, ...args: any[]) => T;\n\n/**\n * Subscribes a callback to valueObs, which may be one a plain value, an observable, a knockout\n * observable, or a function. If a function, it's used to create a computed() and will be called\n * with a context function `use`, allowing it to depend on other observable values (see\n * documentation for `computed`).\n *\n * In all cases, `callback(newValue, oldValue)` is called immediately and whenever the value\n * changes. On the initial call, oldValue is undefined.\n *\n * Returns an object which should be disposed to remove the created subscriptions, or null.\n */\n// The overload below is annoying, but needed for correct type inference; see test/types/kowrap.ts.\nexport function subscribeBindable<KObs extends IKnockoutReadObservable<any>>(\n    valueObs: KObs, callback: (val: InferKoType<KObs>) => void): IDisposable|null;\nexport function subscribeBindable<T>(\n    valueObs: BindableValue<T>, callback: (val: T) => void): IDisposable|null;\nexport function subscribeBindable<T>(\n    valueObs: BindableValue<T>, callback: (val: T) => void): IDisposable|null {\n  // A plain function (to make a computed from), or a knockout observable.\n  if (typeof valueObs === 'function') {\n    // Knockout observable.\n    const koValue = valueObs as IKnockoutReadObservable<T>;\n    if (typeof koValue.peek === 'function') {\n      const sub = koValue.subscribe((val) => callback(val));\n      callback(koValue.peek());\n      return sub;\n    }\n\n    // Function from which to make a computed. Note that this is also reasonable:\n    //    let sub = subscribe(use => callback(valueObs(use)));\n    // The difference is that when valueObs() evaluates to unchanged value, callback would be\n    // called in the version above, but not in the version below.\n    const comp = computed(valueObs as ComputedCallback<T>);\n    comp.addListener((val) => callback(val));\n    callback(comp.get());\n    return comp;      // Disposing this will dispose its one listener.\n  }\n\n  // An observable.\n  if (valueObs instanceof BaseObservable) {\n    // Use subscribe() rather than addListener(), so that bundling of changes (implicit and with\n    // bundleChanges()) is respected. This matters when callback also uses observables.\n    return subscribe(valueObs, (use, val) => callback(val));\n  }\n\n  callback(valueObs);\n  return null;\n}\n\n/**\n * Subscribes a callback to valueObs (which may be a value, observable, or function) using\n * subscribe(), and disposes the subscription with the passed-in element.\n */\nexport function subscribeElem<T>(elem: Node, valueObs: BindableValue<T>,\n                                 callback: (newVal: T, oldVal?: T) => void): void {\n  autoDisposeElem(elem, subscribeBindable(valueObs, callback));\n}\n","import {BindableValue, subscribeElem as _subscribe} from './binding';\nimport {onDisposeElem} from './domDispose';\nimport {DomElementMethod, DomMethod, IAttrObj} from './domImpl';\n\n// Use the browser globals in a way that allows replacing them with mocks in tests.\nimport {G} from './browserGlobals';\n\n/**\n * Private global map for associating arbitrary data with DOM. It's a WeakMap, so does not prevent\n * values from being garbage collected when the owning DOM elements are no longer used.\n */\nconst _dataMap: WeakMap<Node, {[key: string]: any}> = new WeakMap();\n\n/**\n * Sets multiple attributes of a DOM element. The `attrs()` variant takes no `elem` argument.\n * Null and undefined values are omitted, and booleans are either omitted or set to empty string.\n * @param {Object} attrsObj: Object mapping attribute names to attribute values.\n */\nexport function attrsElem(elem: Element, attrsObj: IAttrObj): void {\n  for (const key of Object.keys(attrsObj)) {\n    const val = attrsObj[key];\n    if (val != null && val !== false) {\n      elem.setAttribute(key, val === true ? '' : val);\n    }\n  }\n}\nexport function attrs(attrsObj: IAttrObj): DomElementMethod {\n  return (elem) => attrsElem(elem, attrsObj);\n}\n\n/**\n * Sets an attribute of a DOM element to the given value. Removes the attribute when the value is\n * null or undefined. The `attr()` variant takes no `elem` argument, and `attrValue` may be an\n * observable or function.\n * @param {Element} elem: The element to update.\n * @param {String} attrName: The name of the attribute to bind, e.g. 'href'.\n * @param {String|null} attrValue: The string value or null to remove the attribute.\n */\nexport function attrElem(elem: Element, attrName: string, attrValue: string|null): void {\n  if (attrValue === null || attrValue === undefined) {\n    elem.removeAttribute(attrName);\n  } else {\n    elem.setAttribute(attrName, attrValue);\n  }\n}\nexport function attr(attrName: string, attrValueObs: BindableValue<string>): DomElementMethod {\n  return (elem) => _subscribe(elem, attrValueObs, (val) => attrElem(elem, attrName, val));\n}\n\n/**\n * Sets or removes a boolean attribute of a DOM element. According to the spec, empty string is a\n * valid true value for the attribute, and the false value is indicated by the attribute's absence.\n * The `boolAttr()` variant takes no `elem`, and `boolValue` may be an observable or function.\n * @param {Element} elem: The element to update.\n * @param {String} attrName: The name of the attribute to bind, e.g. 'checked'.\n * @param {Boolean} boolValue: Boolean value whether to set or unset the attribute.\n */\nexport function boolAttrElem(elem: Element, attrName: string, boolValue: boolean): void {\n  attrElem(elem, attrName, boolValue ? '' : null);\n}\nexport function boolAttr(attrName: string, boolValueObs: BindableValue<boolean>): DomElementMethod {\n  return (elem) => _subscribe(elem, boolValueObs, (val) => boolAttrElem(elem, attrName, val));\n}\n\n/**\n * Adds a text node to the element. The `text()` variant takes no `elem`, and `value` may be an\n * observable or function.\n * @param {Element} elem: The element to update.\n * @param {String} value: The text value to add.\n */\nexport function textElem(elem: Node, value: string): void {\n  elem.appendChild(G.document.createTextNode(value));\n}\nexport function text(valueObs: BindableValue<string>): DomMethod {\n  return (elem) => {\n    const textNode = G.document.createTextNode('');\n    _subscribe(elem, valueObs, (val) => { textNode.nodeValue = val; });\n    elem.appendChild(textNode);\n  };\n}\n\n/**\n * Sets a style property of a DOM element to the given value. The `style()` variant takes no\n * `elem`, and `value` may be an observable or function.\n * @param {Element} elem: The element to update.\n * @param {String} property: The name of the style property to update, e.g. 'fontWeight'.\n * @param {String} value: The value for the property.\n */\nexport function styleElem(elem: Element, property: string, value: string): void {\n  (elem as any).style[property] = value;\n}\nexport function style(property: string, valueObs: BindableValue<string>): DomElementMethod {\n  return (elem) =>\n    _subscribe(elem, valueObs, (val) => styleElem(elem, property, val));\n}\n\n/**\n * Sets the property of a DOM element to the given value.\n * The `prop()` variant takes no `elem`, and `value` may be an observable or function.\n * @param {Element} elem: The element to update.\n * @param {String} property: The name of the property to update, e.g. 'disabled'.\n * @param {Object} value: The value for the property.\n */\nexport function propElem<T>(elem: Node, property: string, value: T): void {\n  (elem as any)[property] = value;\n}\nexport function prop<T>(property: string, valueObs: BindableValue<T>): DomMethod {\n  return (elem) => _subscribe(elem, valueObs, (val) => propElem(elem, property, val));\n}\n\n/**\n * Shows or hides the element depending on a boolean value. Note that the element must be visible\n * initially (i.e. unsetting style.display should show it).\n * The `show()` variant takes no `elem`, and `boolValue` may be an observable or function.\n * @param {Element} elem: The element to update.\n * @param {Boolean} boolValue: True to show the element, false to hide it.\n */\nexport function showElem(elem: HTMLElement, boolValue: boolean): void {\n  elem.style.display = boolValue ? '' : 'none';\n}\nexport function show(boolValueObs: BindableValue<boolean>): DomElementMethod {\n  return (elem) =>\n    _subscribe(elem, boolValueObs, (val) => showElem(elem, val));\n}\n\n/**\n * The opposite of show, hiding the element when boolValue is true.\n * The `hide()` variant takes no `elem`, and `boolValue` may be an observable or function.\n * @param {Element} elem: The element to update.\n * @param {Boolean} boolValue: True to hide the element, false to show it.\n */\nexport function hideElem(elem: HTMLElement, boolValue: boolean): void {\n  elem.style.display = boolValue ? 'none' : '';\n}\nexport function hide(boolValueObs: BindableValue<boolean>): DomElementMethod {\n  return (elem) =>\n    _subscribe(elem, boolValueObs, (val) => hideElem(elem, val));\n}\n\n/**\n * Sets or toggles the given css class className.\n */\nexport function clsElem(elem: Element, className: string, boolValue: boolean = true): void {\n  elem.classList.toggle(className, Boolean(boolValue));\n}\n\n/**\n * Sets or toggles a css class className. If className is an observable, it will be replaced when\n * the observable changes. If a plain string, then an optional second boolean observable may be\n * given, which will toggle it.\n *\n *    dom.cls('foo')                                // Sets className 'foo'\n *    dom.cls('foo', isFoo);                        // Toggles 'foo' className according to observable.\n *    dom.cls('foo', (use) => use(isFoo));          // Toggles 'foo' className according to observable.\n *    dom.cls(fooClass);                            // Sets className to the value of fooClass observable\n *    dom.cls((use) => `prefix-${use(fooClass)}`);  // Sets className to prefix- plus fooClass observable.\n */\nexport function cls(className: string, boolValue?: BindableValue<boolean>): DomElementMethod;\nexport function cls(className: BindableValue<string>): DomElementMethod;\nexport function cls(className: string|BindableValue<string>, boolValue?: BindableValue<boolean>): DomElementMethod {\n  if (typeof className !== 'string') {\n    return _clsDynamicPrefix('', className);\n  } else if (!boolValue || typeof boolValue === 'boolean') {\n    return (elem) => clsElem(elem, className, boolValue);\n  } else {\n    return (elem) => _subscribe(elem, boolValue, (val) => clsElem(elem, className, val));\n  }\n}\n\n/**\n * Just like cls() but prepends a prefix to className, including when it is an observable.\n */\nexport function clsPrefix(prefix: string, className: string, boolValue?: BindableValue<boolean>): DomElementMethod;\nexport function clsPrefix(prefix: string, className: BindableValue<string>): DomElementMethod;\nexport function clsPrefix(prefix: string, className: string|BindableValue<string>,\n                          boolValue?: BindableValue<boolean>): DomElementMethod {\n  if (typeof className !== 'string') {\n    return _clsDynamicPrefix(prefix, className);\n  } else {\n    return cls(prefix + className, boolValue);\n  }\n}\n\nfunction _clsDynamicPrefix(prefix: string, className: BindableValue<string>): DomElementMethod {\n  return (elem) => {\n    let prevClass: string|null = null;\n    _subscribe(elem, className, (name: string) => {\n      if (prevClass) { elem.classList.remove(prevClass); }\n      prevClass = name ? prefix + name : null;\n      if (prevClass) { elem.classList.add(prevClass); }\n    });\n  };\n}\n\n/**\n * Associate arbitrary data with a DOM element. The `data()` variant takes no `elem`, and `value`\n * may be an observable or function.\n * @param {Element} elem: The element with which to associate data.\n * @param {String} key: Key to identify this piece of data among others attached to elem.\n * @param {Object} value: Arbitrary value to associate with elem.\n */\nexport function dataElem(elem: Node, key: string, value: any): void {\n  const obj = _dataMap.get(elem);\n  if (obj) {\n    obj[key] = value;\n  } else {\n    onDisposeElem(elem, () => _dataMap.delete(elem));\n    _dataMap.set(elem, {[key]: value});\n  }\n}\nexport function data(key: string, valueObs: BindableValue<any>): DomMethod {\n  return (elem) => _subscribe(elem, valueObs, (val) => dataElem(elem, key, val));\n}\nexport function getData(elem: Node, key: string) {\n  const obj = _dataMap.get(elem);\n  return obj && obj[key];\n}\n\n/**\n * A very simple setup to identify DOM elements for testing purposes. Here's the recommended\n * usage.\n *\n *   // In the component to be tested.\n *   import {noTestId, TestId} from 'grainjs';\n *\n *   function myComponent(myArgs, testId: TestId = noTestId) {\n *     return dom(..., testId(\"some-name\"),\n *       dom(..., testId(\"another-name\"), ...),\n *     );\n *   }\n *\n * In the fixture code using this component:\n *\n *   import {makeTestId} from 'grainjs';\n *\n *   dom(..., myComponent(myArgs, makeTestId('test-mycomp-'), ...)\n *\n * In the webdriver test code:\n *\n *   driver.find('.test-my-comp-some-name')\n *   driver.find('.test-my-comp-another-name')\n *\n * When myComponent() is created with testId argument omitted, the testId() calls are no-ops. When\n * makeTestId('test-foo-') is passed in, testId() calls simply add a css class with that prefix.\n */\nexport type TestId = (name: string) => DomElementMethod|null;\n\n/**\n * See documentation for TestId above.\n */\nexport function makeTestId(prefix: string): TestId {\n  return clsPrefix.bind(null, prefix);\n}\n\n/**\n * See documentation for TestId above.\n */\nexport const noTestId: TestId = (name: string) => null;\n","import {domDispose} from './domDispose';\nimport {attrsElem} from './domMethods';\n\n// Use the browser globals in a way that allows replacing them with mocks in tests.\nimport {G} from './browserGlobals';\n\n// For inline modifications, some other options were considered:\n// (1) Chainable methods (to use e.g. `dom('div').attr('href', url).value()`). This approach is\n//     criticized here:\n//     https://medium.com/making-internets/why-using-chain-is-a-mistake-9bc1f80d51ba\n// (2) Adding methods to DOM (to use e.g. `dom('div').attr('href', url)`. This is criticized here:\n//     http://perfectionkills.com/whats-wrong-with-extending-the-dom/\n// The approach chosen (inline modifications using functions that are typically bound on the fly)\n// is more flexible and robust, and only suffers from slightly more verbosity. E.g.\n// `dom('div', dom.attr('href', url))`.\n\nexport type DomMethod<T = Node> = (elem: T) => DomArg<T>|void;\nexport type DomElementMethod = DomMethod<HTMLElement>;\n\nexport interface IAttrObj {\n  [attrName: string]: string|boolean|null|undefined;\n}\n\n// Type of argument to dom-building functions. Allows IAttrObj when applied to an Element.\n//\n// Note that DomArg<A> differs from DomArg<B> in what callbacks are accepted, so DomArg<Element>\n// can be assigned to DomArg<HTMLInputElement>, but not vice versa. When writing a function that\n// accepts DomArgs and applies them to an element, use the most specific DomArg type that works\n// for that element, e.g. DomArg<HTMLInputElement> if possible, then DomElementArg, then DomArg.\nexport type DomArg<T = Node> = Node | string | void | null | undefined |\n  IDomArgs<T> | DomMethod<T> | (T extends Element ? IAttrObj : never);\n\nexport interface IDomArgs<T = Node> extends Array<DomArg<T>> {}\n\n// Alias for backward compatibility.\nexport type DomElementArg = DomArg<HTMLElement>;\n\n// The goal of the above declarations is to get help from TypeScript in detecting incorrect usage:\n// (See test/types/dom.ts for a test of this.)\n//  import {text, hide} from './domMethods';\n//  dom('div', text('hello'));        // OK\n//  dom('div', hide(true));           // OK\n//  dom('div', {title: 'hello'});     // OK\n//  frag(text('hello'));              // OK\n//  frag(hide(true));                 // Bad: DocumentFragment is not an Element\n//  frag({title: 'hello'});           // Bad: DocumentFragment is not an Element\n\n/**\n * dom('tag#id.class1.class2', ...args)\n *   The first argument is a string consisting of a tag name, with optional #foo suffix\n *   to add the ID 'foo', and zero or more .bar suffixes to add a CSS class 'bar'.\n *\n *   NOTE that better typings are available when a tag is used directly, e.g.\n *      dom('input', {id: 'foo'}, (elem) => ...) --> elem has type HTMLInputElement\n *      dom('input#foo',          (elem) => ...) --> elem has type HTMLElement\n *\n * The rest of the arguments are optional and may be:\n *\n *   Nodes - which become children of the created element;\n *   strings - which become text node children;\n *   objects - of the form {attr: val} to set additional attributes on the element;\n *   Arrays - which are flattened with each item processed recursively;\n *   functions - which are called with elem as the argument, for a chance to modify the\n *       element as it's being created. Return values are processed recursively.\n *   \"dom methods\" - expressions such as `dom.attr('href', url)` or `dom.hide(obs)`, which\n *       are actually special cases of the \"functions\" category.\n */\nexport function dom<Tag extends TagName>(tagString: Tag, ...args: IDomArgs<TagElem<Tag>>): TagElem<Tag> {\n  return _updateWithArgsOrDispose(_createFromTagString(_createElementHtml, tagString) as TagElem<Tag>, args);\n}\n\nexport type TagName = keyof HTMLElementTagNameMap|string;\nexport type TagElem<T extends TagName> = T extends keyof HTMLElementTagNameMap ? HTMLElementTagNameMap[T] : HTMLElement;\n\n/**\n * svg('tag#id.class1.class2', ...args)\n *  Same as dom(...), but creates an SVG element.\n */\nexport function svg(tagString: string, ...args: IDomArgs<SVGElement>): SVGElement {\n  return _updateWithArgsOrDispose(_createFromTagString(_createElementSvg, tagString), args);\n}\n\n// Internal helper used to create HTML elements.\nfunction _createElementHtml(tag: string): HTMLElement {\n  return G.document.createElement(tag);\n}\n\n// Internal helper used to create SVG elements.\nfunction _createElementSvg(tag: string): SVGElement {\n  return G.document.createElementNS(\"http://www.w3.org/2000/svg\", tag);\n}\n\n/**\n * Internal helper to parse tagString, create an element using createFunc with the given tag, and\n * set its id and classes from the tagString.\n * @param {Funtion} createFunc(tag): Function that should create an element given a tag name.\n *    It is passed in to allow creating elements in different namespaces (e.g. plain HTML vs SVG).\n * @param {String} tagString: String of the form \"tag#id.class1.class2\" where id and classes are\n *    optional.\n * @return {Element} The result of createFunc(), possibly with id and class attributes also set.\n */\nfunction _createFromTagString<E extends Element>(createFunc: (tag: string) => E, tagString: string): E {\n  // We do careful hand-written parsing rather than use a regexp for speed. Using a regexp is\n  // significantly more expensive.\n  let tag: string;\n  let id: string|undefined;\n  let classes: string|undefined;\n  let dotPos: number = tagString.indexOf(\".\");\n  const hashPos: number = tagString.indexOf('#');\n  if (dotPos === -1) {\n    dotPos = tagString.length;\n  } else {\n    classes = tagString.substring(dotPos + 1).replace(/\\./g, ' ');\n  }\n  if (hashPos === -1) {\n    tag = tagString.substring(0, dotPos);\n  } else if (hashPos > dotPos) {\n    throw new Error(`ID must come before classes in dom(\"${tagString}\")`);\n  } else {\n    tag = tagString.substring(0, hashPos);\n    id = tagString.substring(hashPos + 1, dotPos);\n  }\n\n  const elem: E = createFunc(tag);\n  if (id) { elem.setAttribute('id', id); }\n  if (classes) { elem.setAttribute('class', classes); }\n  return elem;\n}\n\n/**\n * Update an element with any number of arguments, as documented in dom().\n */\nexport function update<T extends Node, Args extends IDomArgs<T>>(elem: T, ...args: Args): T {\n  return _updateWithArgs(elem, args);\n}\n\n/**\n * Update an element with an array of arguments.\n */\nfunction _updateWithArgs<T extends Node>(elem: T, args: IDomArgs<T>): T {\n  for (const arg of args) {\n    _updateWithArg(elem, arg);\n  }\n  return elem;\n}\n\n/**\n * Update an element with an array of arguments, calling disposers in case of an exception. It is\n * an internal helper to be used whenever elem is a newly-created element. If elem is an existing\n * element which the user already knows about, then _updateWithArgs should be called.\n */\nfunction _updateWithArgsOrDispose<T extends Node>(elem: T, args: IDomArgs<T>): T {\n  try {\n    return _updateWithArgs(elem, args);\n  } catch (e) {\n    domDispose(elem);\n    throw e;\n  }\n}\n\nfunction _updateWithArg<T extends Node>(elem: T, arg: DomArg<T>): void {\n  if (typeof arg === 'function') {\n    const value: DomArg<T> = arg(elem);\n    // Skip the recursive call in the common case when the function returns nothing.\n    if (value !== undefined && value !== null) {\n      _updateWithArg(elem, value);\n    }\n  } else if (Array.isArray(arg)) {\n    _updateWithArgs(elem, arg);\n  } else if (arg === undefined || arg === null) {\n    // Nothing to do.\n  } else if (arg instanceof G.Node) {\n    elem.appendChild(arg);\n  } else if (typeof arg === 'object') {\n    attrsElem(elem as any, arg);\n  } else {\n    elem.appendChild(G.document.createTextNode(arg));\n  }\n}\n\n/**\n * Creates a DocumentFragment processing arguments the same way as the dom() function.\n */\nexport function frag(...args: IDomArgs<DocumentFragment>): DocumentFragment {\n  const elem = G.document.createDocumentFragment();\n  return _updateWithArgsOrDispose<DocumentFragment>(elem, args);\n}\n\n/**\n * Find the first element matching a selector; just an abbreviation for document.querySelector().\n */\nexport function find(selector: string) { return G.document.querySelector(selector); }\n\n/**\n * Find all elements matching a selector; just an abbreviation for document.querySelectorAll().\n */\nexport function findAll(selector: string) { return G.document.querySelectorAll(selector); }\n","import {BindableValue, subscribeElem} from './binding';\nimport {Holder, MultiHolder} from './dispose';\nimport {autoDisposeElem, domDispose} from './domDispose';\nimport {DomArg, DomMethod, frag} from './domImpl';\n\n// Use the browser globals in a way that allows replacing them with mocks in tests.\nimport {G} from './browserGlobals';\n\n// The type returned by domComputed(). It's actually an example of DomArg, but is given its own\n// name for use in places where a DomComputed is suitable but a general DomArg is not.\nexport type DomComputed = [Node, Node, DomMethod];\n\nexport type DomContents = Node | string | DomComputed | void | null | undefined | IDomContentsArray;\nexport interface IDomContentsArray extends Array<DomContents> {}\n\n\n/**\n * Replaces the content between nodeBefore and nodeAfter, which should be two siblings within the\n * same parent node. New content may be anything allowed as an argument to dom(), including null\n * to insert nothing. Runs disposers, if any, on all removed content.\n */\nexport function replaceContent(nodeBefore: Node, nodeAfter: Node, content: DomContents): void {\n  const elem = nodeBefore.parentNode;\n  if (elem) {\n    let next;\n    for (let n = nodeBefore.nextSibling; n && n !== nodeAfter; n = next) {\n      next = n.nextSibling;\n      domDispose(n);\n      elem.removeChild(n);\n    }\n    if (content) {\n      elem.insertBefore(content instanceof G.Node ? content : frag(content), nodeAfter);\n    }\n  }\n}\n\n/**\n * Appends dynamic DOM content to an element. The value may be an observable or function (from\n * which a computed is created), whose value will be passed to `contentFunc` which should return\n * DOM content. If the contentFunc is omitted, it defaults to identity, i.e. it's OK for the\n * observable or function to return DOM directly.\n *\n * The DOM content returned may be an element, string, array, or null. Whenever the observable\n * changes, previous content is disposed and removed, and new content added in its place.\n *\n * The following are roughly equivalent:\n *  (A) domComputed(nlinesObs, nlines => nlines > 1 ? dom('textarea') : dom('input'));\n *  (B) domComputed(use => use(nlinesObs) > 1 ? dom('textarea') : dom('input'));\n *  (C) domComputed(use => use(nlinesObs) > 1, isTall => isTall ? dom('textarea') : dom('input'));\n *\n * Here, (C) is best. Both (A) and (B) would rebuild DOM for any change in nlinesObs, but (C)\n * encapsulates meaningful changes in the observable, and only recreates DOM when necessary.\n *\n * Syntax (B), without the second argument, may be useful in cases of DOM depending on several\n * observables, e.g.\n *\n *    domComputed(use => use(readonlyObs) ? dom('div') :\n *                          (use(nlinesObs) > 1 ? dom('textarea') : dom('input')));\n *\n * If the argument is not an observable, domComputed() may but should not be used. The following\n * are equivalent:\n *\n *    dom(..., domComputed(listValue, list => `Have ${list.length} items`), ...)\n *    dom(..., `Have ${listValue.length} items`, ...)\n *\n * In this case, the latter is preferred as the clearly simpler one.\n *\n * @param valueObs: Observable or function for a computed.\n * @param contentFunc: Function called with the result of valueObs as the input, and\n *    returning DOM as output. If omitted, defaults to the identity function.\n */\n// Note that DomMethod is excluded because it prevents typescript from inferring the type of\n// the first argument when it's a function (and it's not useful).\nexport function domComputed(valueObs: BindableValue<Exclude<DomArg, DomMethod>>): DomComputed;\nexport function domComputed<T>(valueObs: BindableValue<T>, contentFunc: (val: T) => DomContents): DomComputed;\nexport function domComputed<T>(\n  valueObs: BindableValue<T>, contentFunc: (val: T) => DomContents = identity as any,\n): DomComputed {\n  const markerPre = G.document.createComment('a');\n  const markerPost = G.document.createComment('b');\n\n  // Function is added after markerPre and markerPost, so that it runs once they have already been\n  // attached to elem (the parent element).\n  return [markerPre, markerPost, (elem: Node) => {\n    subscribeElem(markerPost, valueObs,\n      (value) => replaceContent(markerPre, markerPost, contentFunc(value)));\n  }];\n}\n\n/**\n * Like domComputed(), but the callback gets an additional first argument, owner, which may be\n * used to take ownership of objects created by the callback. These will be disposed before each\n * new call to the callback, and when the containing DOM is disposed.\n *\n *    domComputedOwned(valueObs, (owner, value) => Editor.create(owner, value).renderSomething());\n */\nexport function domComputedOwned<T>(\n  valueObs: BindableValue<T>, contentFunc: (owner: MultiHolder, val: T) => DomContents\n): DomComputed {\n  const holder = Holder.create(null);\n  const [markerPre, markerPost, func] = domComputed(valueObs,\n    (val: T) => contentFunc(MultiHolder.create(holder), val));\n  autoDisposeElem(markerPost, holder);\n  return [markerPre, markerPost, func];\n}\n\nfunction identity<T>(arg: T): T { return arg; }\n\n/**\n * Conditionally appends DOM to an element. The value may be an observable or function (from which\n * a computed is created), whose value -- if truthy -- will be passed to `contentFunc` which\n * should return DOM content. If the value is falsy, DOM content is removed.\n *\n * Note that if the observable changes between different truthy values, contentFunc gets called\n * for each value, and previous content gets destroyed. To consider all truthy values the same,\n * use an observable that returns a proper boolean, e.g.\n *\n *    dom.maybe(use => Boolean(use(fooObs)), () => dom(...));\n *\n * As with domComputed(), dom.maybe() may but should not be used when the argument is not an\n * observable or function. The following are equivalent:\n *\n *    dom(..., dom.maybe(myValue, () => dom(...)));\n *    dom(..., myValue ? dom(...) : null);\n *\n * The latter is preferred for being simpler.\n *\n * @param boolValueObs: Observable or function for a computed.\n * @param contentFunc: Called with the result of boolValueObs when it is truthy. Should return DOM.\n */\nexport function maybe<T>(boolValueObs: BindableValue<T>,\n    contentFunc: (val: NonNullable<T>) => DomContents): DomComputed {\n  return domComputed(boolValueObs, (value) => value ? contentFunc(value!) : null);\n}\n\n/**\n * Like maybe(), but the callback gets an additional first argument, owner, which may be used to\n * take ownership of objects created by the callback. These will be disposed before each new call\n * to the callback, and when the condition becomes false or the containing DOM gets disposed.\n *\n *    maybeOwned(showEditor, (owner) => Editor.create(owner).renderSomething());\n */\nexport function maybeOwned<T>(boolValueObs: BindableValue<T>,\n    contentFunc: (owner: MultiHolder, val: NonNullable<T>) => DomContents): DomComputed {\n  return domComputedOwned(boolValueObs, (owner, value) => value ? contentFunc(owner, value!) : null);\n}\n","/**\n * UI components that can be inserted into dom().\n *\n * Components are created and inserted using dom.create():\n *\n *    dom('div',\n *      dom.create(MyWidget, ...myArgs),        // Calls MyWidget.create(owner, ...myArgs)\n *      dom.create(createMyWidget, ...myArgs),  // Calls createMyWidget(owner, ...myArgs)\n *    )\n *\n * The first argument may be a function, which is called directly, or a class with a .create()\n * static method, in which case that's what gets called.\n *\n * In both cases, the call gets a first argument of `owner` followed by the rest of the arguments\n * to dom.create(). The `owner` is a MultiHolder that will own this component. This works\n * naturally with any class that derives from Disposable, since it then has a suitable static\n * create() method.\n *\n * Function-based components may use owner to easily handle disposal. For example:\n *\n *    dom.create(createMyWidget)\n *    function createMyWidget(owner) {\n *      const foo = Foo.create(owner);\n *      return dom('div', foo.getTitle());\n *    }\n *\n * The `owner` argument is the main benefit of dom.create(). Logically, the owner is the DOM where\n * the component is attached. When the parent DOM element is disposed, so is the component.\n *\n *    [Explanation] To understand why the syntax is such, consider a potential alternative such as:\n *\n *       dom('div', _insert_(new Comp1()), _insert_(new Comp2(...args)))\n *\n *    In both cases, the constructor for Comp1 runs before the constructor for Comp2. What happens\n *    when Comp2's constructor throws an exception? In the second case, nothing yet owns the\n *    created Comp1 component, and it will never get cleaned up. With dom.create(), the DOM\n *    gets ownership of Comp1 early enough and will dispose it.\n *\n * A function component may return DOM directly. A class component returns the class instance,\n * which must have a .buildDom() method which will be called right after the constructor to get\n * the DOM. Note that buildDom is only called once.\n *\n * A function component may also return an object with .buildDom(). So these are equivalent:\n *\n *    dom.create(MyWidget)\n *    dom.create((owner) => MyWidget.create(owner))\n *\n * Note that ownership should be handled using the `owner` argument. Don't do this:\n *\n *    // NON-EXAMPLE: Nothing will dispose the created object:\n *    // dom.create(() => new MyWidget());\n *\n * The returned DOM may includes Nodes, strings, and domComputed() values, as well as arrays of\n * any of these. In other words, any DomArg goes except DomMethods. All the DOM returned will be\n * disposed when the containing element is disposed, followed by the `owner` itself.\n */\nimport {MultiHolder} from './dispose';\nimport {domComputedOwned, DomContents} from './domComputed';\n\nexport interface IDomComponent {\n  buildDom(): DomContents;\n}\n\nexport type DomComponentReturn = DomContents | IDomComponent;\n\nexport type IDomCreateFunc<Args extends any[]> = (owner: MultiHolder, ...args: Args) => DomComponentReturn;\n\n// It's not that we must have a constructor matching create(), but specifying type of new allows\n// type checking of classes that derive from Disposable, whereas matching only create() does not\n// (presumably because of the too much magic that Disposable does for the type of create()).\nexport interface IDomCreateClass<Args extends any[]> {\n  create: IDomCreateFunc<Args>;\n  new (...args: Args): DomComponentReturn;\n}\nexport type IDomCreator<Args extends any[]> = IDomCreateFunc<Args> | IDomCreateClass<Args>;\n\ntype DomCreatorArgs<T> =\n  T extends (owner: MultiHolder, ...args: infer P) => any ? P :\n  (T extends new (...args: infer P) => any ? P : never);\n\nexport function create<Fn extends IDomCreator<any[]>>(fn: Fn, ...args: DomCreatorArgs<Fn>): DomContents {\n  return domComputedOwned(null, (owner) => {\n    const value: DomComponentReturn = ('create' in fn) ?\n      (fn as IDomCreateClass<any[]>).create(owner, ...args) :\n      (fn as IDomCreateFunc<any[]>)(owner, ...args);\n    return (value && typeof value === 'object' && 'buildDom' in value) ?\n      value.buildDom() : value;\n  });\n}\n","/**\n * ObsArray extends a plain Observable to allow for more efficient observation of array changes.\n *\n * As for any array-valued Observable, when the contents of the observed array changes, the\n * listeners get called with new and previous values which are the same array. For simple changes,\n * such as those made with .push() and .splice() methods, ObsArray allows for more efficient\n * handling of the change by calling listeners with splice info in the third argument.\n *\n * This module also provides computedArray(), which allows mapping each item of an ObsArray\n * through a function, passing through splice info for efficient handling of small changes. It\n * also allows mapping an observable or a computed whose value is an ObsArray.\n *\n * There is no need or benefit in using computedArray() if you have a computed() that returns a\n * plain array. It is specifically for the case when you want to preserve the efficiency of\n * ObsArray when you map its values.\n *\n * Both ObsArray and ComputedArray may be used with disposable elements as their owners. E.g.\n *\n *    const arr = obsArray<D>();\n *    arr.push(D.create(arr, \"x\"), D.create(arr, \"y\"));\n *    arr.pop();      // Element \"y\" gets disposed.\n *    arr.dispose();  // Element \"x\" gets disposed.\n *\n *    const values = obsArray<string>();\n *    const compArr = computedArray<D>(values, (val, i, compArr) => D.create(compArr, val));\n *    values.push(\"foo\", \"bar\");      // D(\"foo\") and D(\"bar\") get created\n *    values.pop();                   // D(\"bar\") gets disposed.\n *    compArr.dispose();              // D(\"foo\") gets disposed.\n *\n * Note that only the pattern above works: obsArray (or compArray) may only be used to take\n * ownership of those disposables that are added to it as array elements.\n */\n\nimport {IDisposable, IDisposableOwnerT, setDisposeOwner} from './dispose';\nimport {Listener} from './emit';\nimport {BaseObservable, Observable} from './observable';\nimport {subscribe, Subscription} from './subscribe';\n\n/**\n * Either an observable or a plain array of T. This is useful for functions like dom.forEach()\n * which are convenient to have available for both.\n */\nexport type MaybeObsArray<T> = BaseObservable<T[]> | T[];\n\n/**\n * Info about a modification to ObsArray contents. It is included as a third argument to change\n * listeners when available. When not available, listeners should assume that the array changed\n * completely.\n */\nexport interface IObsArraySplice<T> {\n  start: number;\n  numAdded: number;\n  deleted: T[];\n}\n\nexport type ISpliceListener<T, C>  = (this: C, val: T[], prev: T[], change?: IObsArraySplice<T>) => void;\n\n/**\n * ObsArray<T> is essentially an array-valued observable. The main difference is that it may be\n * used as an owner for disposable array elements.\n */\nexport class ObsArray<T> extends BaseObservable<T[]> {\n  private _ownedItems?: Set<T & IDisposable> = undefined;\n\n  public addListener(callback: ISpliceListener<T, void>): Listener;\n  public addListener<C>(callback: ISpliceListener<T, C>, context: C): Listener;\n  public addListener(callback: ISpliceListener<T, any>, optContext?: any): Listener {\n    return super.addListener(callback, optContext);\n  }\n\n  public autoDispose(value: T & IDisposable): T & IDisposable {\n    if (!this._ownedItems) { this._ownedItems = new Set<T & IDisposable>(); }\n    this._ownedItems.add(value);\n    return value;\n  }\n\n  public dispose(): void {\n    if (this._ownedItems) {\n      for (const item of this.get() as Array<T & IDisposable>) {\n        if (this._ownedItems.delete(item)) {\n          item.dispose();\n        }\n      }\n      this._ownedItems = undefined;\n    }\n    super.dispose();\n  }\n\n  protected _setWithSplice(value: T[], splice: IObsArraySplice<T>): void {\n    return this._setWithArg(value, splice);\n  }\n\n  protected _disposeOwned(splice?: IObsArraySplice<T>): void {\n    if (!this._ownedItems) { return; }\n    if (splice) {\n      for (const item of splice.deleted as Array<T & IDisposable>) {\n        if (this._ownedItems.delete(item)) {\n          item.dispose();\n        }\n      }\n    } else {\n      const oldOwnedItems = this._ownedItems;\n\n      // Rebuild the _ownedItems array to have only the current items that were owned from before.\n      this._ownedItems = new Set<T & IDisposable>();\n      for (const item of this.get() as Array<T & IDisposable>) {\n        if (oldOwnedItems.delete(item)) {\n          this._ownedItems.add(item);\n        }\n      }\n      // After removing current items, dispose any remaining owned items.\n      for (const item of oldOwnedItems) {\n        item.dispose();\n      }\n    }\n  }\n}\n\n/**\n * MutableObsArray<T> adds array-like mutation methods which emit events with splice info, to\n * allow more efficient processing of such changes. It is created with obsArray<T>().\n */\nexport class MutableObsArray<T> extends ObsArray<T> {\n  public push(...args: T[]): number {\n    const value = this.get();\n    const start = value.length;\n    const newLen = value.push(...args);\n    this._setWithSplice(value, {start, numAdded: args.length, deleted: []});\n    return newLen;\n  }\n\n  public pop(): T|undefined {\n    const value = this.get();\n    if (value.length === 0) { return undefined; }\n    const ret = value.pop()!;\n    this._setWithSplice(value, {start: value.length, numAdded: 0, deleted: [ret]});\n    return ret;\n  }\n\n  public unshift(...args: T[]) {\n    const value = this.get();\n    const newLen = value.unshift(...args);\n    this._setWithSplice(value, {start: 0, numAdded: args.length, deleted: []});\n    return newLen;\n  }\n\n  public shift(): T|undefined {\n    const value = this.get();\n    if (value.length === 0) { return undefined; }\n    const ret = value.shift()!;\n    this._setWithSplice(value, {start: 0, numAdded: 0, deleted: [ret]});\n    return ret;\n  }\n\n  public splice(start: number, deleteCount: number = Infinity, ...newValues: T[]) {\n    const value = this.get();\n    const len = value.length;\n    start = Math.min(len, Math.max(0, start < 0 ? len + start : start));\n    const deleted = value.splice(start, deleteCount, ...newValues);\n    this._setWithSplice(value, {start, numAdded: newValues.length, deleted});\n    return deleted;\n  }\n}\n\n/**\n * Creates a new MutableObsArray with an optional initial value, defaulting to the empty array.\n * It is essentially the same as observable<T[]>, but with array-like mutation methods.\n */\nexport function obsArray<T>(value: T[] = []): MutableObsArray<T> {\n  return new MutableObsArray<T>(value);\n}\n\n/**\n * Returns true if val is an array-valued observable.\n */\nfunction isObsArray(val: BaseObservable<any>): val is BaseObservable<any[]> {\n  return Array.isArray(val.get());\n}\n\n/**\n * See computedArray() below for documentation.\n */\nexport class ComputedArray<T, U> extends ObsArray<U> {\n  private _sub: Subscription;\n  private _source?: BaseObservable<T[]>;\n  private _listener?: Listener;\n  private _lastSplice?: IObsArraySplice<T>|false;     // false is a marker that full rebuild is needed\n\n  constructor(\n    obsArr: BaseObservable<T[]> | Observable<BaseObservable<T[]>>,\n    private _mapper: (item: T, index: number, arr: ComputedArray<T, U>) => U,\n  ) {\n    super([]);\n    this._sub = isObsArray(obsArr) ?\n      subscribe(obsArr, (use) => this._syncMap(obsArr)) :\n      subscribe(obsArr, (use, obsArrayValue) => { use(obsArrayValue); return this._syncMap(obsArrayValue); });\n  }\n\n  public dispose() {\n    this._unsync();\n    this._sub.dispose();\n    super.dispose();\n  }\n\n  private _syncMap(obsArr: BaseObservable<T[]>): void {\n    if (this._source !== obsArr) {\n      this._unsync();\n      this._listener = obsArr.addListener(this._recordChange, this);\n      this._source = obsArr;\n      this._rebuild(obsArr);\n    } else if (this._lastSplice) {\n      // If we are syncing to the same array as before and recorded a single splice, apply it now.\n      this._applySplice(obsArr, this._lastSplice);\n    } else {\n      // If the full array changed or we had multiple splices, give up and rebuild.\n      this._rebuild(obsArr);\n    }\n    this._lastSplice = undefined;\n  }\n\n  private _unsync() {\n    if (this._listener) {\n      this._listener.dispose();\n      this._listener = undefined;\n      this._source = undefined;\n    }\n  }\n\n  private _rebuild(obsArr: BaseObservable<T[]>) {\n    this.set(obsArr.get().map((item: T, i: number) => this._mapper.call(undefined, item, i, this)));\n  }\n\n  private _applySplice(obsArr: BaseObservable<T[]>, change: IObsArraySplice<T>) {\n    const sourceArray: T[] = obsArr.get();\n    const newItems: U[] = [];\n    for (let i = change.start, n = 0; n < change.numAdded; i++, n++) {\n      newItems.push(this._mapper.call(undefined, sourceArray[i], i, this));\n    }\n    const items: U[] = this.get();\n    const deleted = items.splice(change.start, change.deleted.length, ...newItems);\n    this._setWithSplice(items, {start: change.start, numAdded: newItems.length, deleted});\n  }\n\n  private _recordChange(newItems: T[], oldItems: T[], change?: IObsArraySplice<T>): void {\n    // We don't attempt to handle efficiency multiple splices (it's quite hard in general, and\n    // even harder to know that it's more efficient than rebuilding), so if _lastSplice is set, we\n    // set it to a marker to mark the array for rebuilding.\n    if (change && this._lastSplice === undefined) {\n      this._lastSplice = change;\n    } else {\n      this._lastSplice = false;     // This is a marker that a full rebuild is needed.\n    }\n  }\n}\n\n/**\n * Returns an ObsArray that maps all elements of the passed-in ObsArray through a mapper function.\n * Also accepts an observable (e.g. a computed) whose value is an ObsArray. Usage:\n *\n *    computedArray(obsArray, mapper)\n *\n * The result is entirely analogous to:\n *\n *     computed((use) => use(obsArray).map(mapper))       // for ObsArray\n *     computed((use) => use(use(obsArray)).map(mapper))  // for Observable<ObsArray>\n *\n * The benefit of computedArray() is that a small change to the source array (e.g. one item\n * added or removed), causes a small change to the mapped array, rather than a full rebuild.\n *\n * This is useful with an ObsArray or with an observable whose value is an ObsArray, and also\n * when the computed array owns its disposable items.\n *\n * Note that the mapper function is called with (item, index, array) as for a standard\n * array.map(), but that the index is only accurate at the time of the call, and will stop\n * reflecting the true index if more items are inserted into the array later.\n */\nexport function computedArray<T, U>(\n  obsArr: BaseObservable<T[]> | Observable<BaseObservable<T[]>>,\n  mapper: (item: T, index: number, arr: ComputedArray<T, U>) => U,\n): ObsArray<U> {\n  return new ComputedArray<T, U>(obsArr, mapper);\n}\n\n/**\n * Returns a new observable representing an index into this array. It can be read and written, and\n * its value is clamped to be a valid index. The index is only null if the array is empty.\n *\n * As the array changes, the index is adjusted to continue pointing to the same element. If the\n * pointed element is deleted, the index is adjusted to after the deletion point.\n *\n * The returned observable has an additional .setLive(bool) method. While set to false, the\n * observable will not be adjusted as the array changes, except to keep it valid.\n */\nexport function makeLiveIndex<T>(owner: IDisposableOwnerT<LiveIndex>|null, obsArr: ObsArray<T>,\n                                 initialIndex: number = 0): LiveIndex {\n  return setDisposeOwner(owner, new LiveIndex(obsArr, initialIndex));\n}\n\nexport class LiveIndex extends Observable<number|null> {\n  private _listener: Listener;\n  private _isLive: boolean = true;\n\n  constructor(private _obsArray: ObsArray<any>, initialIndex: number = 0) {\n    super(null);\n    this.set(initialIndex);\n    this._listener = _obsArray.addListener(this._onArrayChange, this);\n  }\n\n  public set(index: number|null) {\n    // Clamp to [0, len) range of the observable array.\n    const len = this._obsArray.get().length;\n    super.set(len === 0 ? null : Math.max(0, Math.min(len - 1, index || 0)));\n  }\n\n  // Note that this feature comes from a rather obscure need, and it would be better if something\n  // similar were possible without making it an explicit feature.\n  public setLive(value: boolean): void {\n    this._isLive = value;\n  }\n\n  public dispose() {\n    this._listener.dispose();\n    super.dispose();\n  }\n\n  private _onArrayChange<T>(newItems: T[], oldItems: T[], change?: IObsArraySplice<T>) {\n    const idx = this.get();\n    this.set(\n      idx === null || !change ? 0 :\n      // Adjust the index if it was beyond the deleted region.\n      this._isLive && idx >= change.start + change.deleted.length ? idx + change.numAdded - change.deleted.length :\n      // Adjust the index if it was inside the deleted region (and not replaced).\n      this._isLive && idx >= change.start + change.numAdded ? change.start + change.numAdded :\n      idx);\n  }\n}\n","import {DomContents, replaceContent} from './domComputed';\nimport {autoDisposeElem, domDispose} from './domDispose';\nimport {frag} from './domImpl';\nimport {computedArray, MaybeObsArray, ObsArray} from './obsArray';\n\n// Use the browser globals in a way that allows replacing them with mocks in tests.\nimport {G} from './browserGlobals';\n\n/**\n * Creates DOM elements for each element of an observable array. As the array is changed, children\n * are added or removed. This works for any array-valued observable, and for obsArray() and\n * computedArray() it works more efficiently for simple changes.\n *\n * The given itemCreateFunc() should return a single DOM node for each item, or null to skip that\n * item. It is called for new items whenever they are spliced in, or the array replaced. The\n * forEach() owns the created nodes, and runs domDispose() on them when they are spliced out.\n *\n * If the created nodes are removed from their parent externally, forEach() will cope with it, but\n * will consider these elements as no longer owned, and will not run domDispose() on them.\n *\n * Note that itemCreateFunc() does not receive an index: an index would only be correct at the\n * time the item is created, and would not reflect further changes to the array.\n *\n * If you'd like to map the DOM node back to its source item, use dom.data() and dom.getData() in\n * itemCreateFunc().\n */\nexport function forEach<T>(obsArray: MaybeObsArray<T>, itemCreateFunc: (item: T) => Node|null): DomContents {\n  const markerPre = G.document.createComment('a');\n  const markerPost = G.document.createComment('b');\n  return [markerPre, markerPost, (elem: Node) => {\n    if (Array.isArray(obsArray)) {\n      replaceContent(markerPre, markerPost, obsArray.map(itemCreateFunc));\n      return;\n    }\n\n    const nodes: ObsArray<Node|null> = computedArray(obsArray, itemCreateFunc);\n\n    // Be sure to dispose the newly-created array when the DOM it's associated with is gone.\n    autoDisposeElem(markerPost, nodes);\n\n    nodes.addListener((newArr: Array<Node|null>, oldArr: Array<Node|null>, splice?) => {\n      if (splice) {\n        // Remove the elements that are gone.\n        for (const node of splice.deleted) {\n          if (node && node.parentNode === elem) {\n            domDispose(node);\n            elem.removeChild(node);\n          }\n        }\n\n        if (splice.numAdded > 0) {\n          // Find a valid child immediately following the spliced out portion, for DOM insertion.\n          const endIndex: number = splice.start + splice.numAdded;\n          let nextElem: Node = markerPost;\n          for (let i = endIndex; i < newArr.length; i++) {\n            const node = newArr[i];\n            if (node && node.parentNode === elem) {\n              nextElem = node;\n              break;\n            }\n          }\n\n          // Insert the new elements.\n          const content = frag(newArr.slice(splice.start, endIndex));\n          elem.insertBefore(content, nextElem);\n        }\n      } else {\n        replaceContent(markerPre, markerPost, newArr);\n      }\n    });\n    replaceContent(markerPre, markerPost, nodes.get());\n  }];\n}\n","/**\n * domevent provides a way to listen to DOM events, similar to JQuery's `on()` function. Its\n * methods are also exposed via the dom.js module, as `dom.on()`, etc.\n *\n * It is typically used as an argument to the dom() function:\n *\n *    dom('div', dom.on('click', (event, elem) => { ... }));\n *\n * When the div is disposed, the listener is automatically removed.\n *\n * The underlying interface to listen to an event is this:\n *\n *    let listener = dom.onElem(elem, 'click', (event, elem) => { ... });\n *\n * The callback is called with the event and the element to which it was attached. Unlike in\n * JQuery, the callback's return value is ignored. Use event.stopPropagation() and\n * event.preventDefault() explicitly if needed.\n *\n * To stop listening:\n *\n *    listener.dispose();\n *\n * Disposing the listener returned by .onElem() is the only way to stop listening to an event. You\n * can use autoDispose to stop listening automatically when subscribing in a Disposable object:\n *\n *    this.autoDispose(domevent.onElem(document, 'mouseup', callback));\n *\n * To listen to descendants of an element matching the given selector (what JQuery calls\n * \"delegated events\", see http://api.jquery.com/on/):\n *\n *    dom('div', dom.onMatch('.selector', 'click', (event, elem) => { ... }));\n * or\n *    let lis = domevent.onMatchElem(elem, '.selector', 'click', (event, el) => { ... });\n *\n * In this usage, the element passed to the callback will be a DOM element matching the given\n * selector. If there are multiple matches, the callback is only called for the innermost one.\n *\n * If you need to remove the callback on first call, here's a useful pattern:\n *    let lis = domevent.onElem(elem, 'mouseup', e => { lis.dispose(); other_work(); });\n */\n\nimport {IDisposable} from './dispose';\nimport {DomElementMethod, DomMethod} from './domImpl';\n\nexport type EventName = keyof HTMLElementEventMap;\nexport type EventType<E extends EventName|string> = E extends EventName ? HTMLElementEventMap[E] : Event;\n\nexport type EventCB<E extends Event = Event, T extends EventTarget = EventTarget> =\n  (this: void, event: E, elem: T) => void;\n\nfunction _findMatch(inner: Element, outer: Element, selector: string): Element|null {\n  for (let el: Element|null = inner; el && el !== outer; el = el.parentElement) {\n    if (el.matches(selector)) {\n      return el;\n    }\n  }\n  return null;\n}\n\nclass DomEventListener<E extends Event, T extends EventTarget> implements EventListenerObject, IDisposable {\n  constructor(protected elem: T,\n              protected eventType: string,\n              protected callback: EventCB<E, T>,\n              protected useCapture: boolean,\n              protected selector?: string) {\n    this.elem.addEventListener(this.eventType, this, this.useCapture);\n  }\n\n  public handleEvent(event: E) {\n    const cb = this.callback;\n    cb(event, this.elem);\n  }\n\n  public dispose() {\n    this.elem.removeEventListener(this.eventType, this, this.useCapture);\n  }\n}\n\nclass DomEventMatchListener<E extends Event> extends DomEventListener<E, EventTarget> {\n  public handleEvent(event: E) {\n    const elem = _findMatch(event.target as Element, this.elem as Element, this.selector!);\n    if (elem) {\n      const cb = this.callback;\n      cb(event, elem);\n    }\n  }\n}\n\n/**\n * Listen to a DOM event. The `on()` variant takes no `elem` argument, and may be used as an\n * argument to dom() function.\n * @param {DOMElement} elem: DOM Element to listen to.\n * @param {String} eventType: Event type to listen for (e.g. 'click').\n * @param {Function} callback: Callback to call as `callback(event, elem)`, where elem is `elem`.\n * @param [Boolean] options.useCapture: Add the listener in the capture phase. This should very\n *    rarely be useful (e.g. JQuery doesn't even offer it as an option).\n * @returns {Object} Listener object whose .dispose() method will remove the event listener.\n */\nexport function onElem<E extends EventName|string, T extends EventTarget>(\n  elem: T, eventType: E, callback: EventCB<EventType<E>, T>, {useCapture = false} = {}): IDisposable {\n  return new DomEventListener(elem, eventType, callback, useCapture);\n}\n\nexport function on<E extends EventName|string, T extends EventTarget>(\n  eventType: E, callback: EventCB<EventType<E>, T>, {useCapture = false} = {}): DomMethod<T> {\n  // tslint:disable-next-line:no-unused-expression\n  return (elem) => { new DomEventListener(elem, eventType, callback, useCapture); };\n}\n\n/**\n * Listen to a DOM event on descendants of the given elem matching the given selector. The\n * `onMatch()` variant takes no `elem` argument, and may be used as an argument to dom().\n * @param {DOMElement} elem: DOM Element to whose descendants to listen.\n * @param {String} selector: CSS selector string to filter elements that trigger this event.\n *    JQuery calls it \"delegated events\" (http://api.jquery.com/on/). The callback will only be\n *    called when the event occurs for an element matching the given selector. If there are\n *    multiple elements matching the selector, the callback is only called for the innermost one.\n * @param {String} eventType: Event type to listen for (e.g. 'click').\n * @param {Function} callback: Callback to call as `callback(event, elem)`, where elem is a\n *    descendent of `elem` which matches `selector`.\n * @param [Boolean] options.useCapture: Add the listener in the capture phase. This should very\n *    rarely be useful (e.g. JQuery doesn't even offer it as an option).\n * @returns {Object} Listener object whose .dispose() method will remove the event listener.\n */\nexport function onMatchElem(elem: EventTarget, selector: string, eventType: string,\n                            callback: EventCB, {useCapture = false} = {}): IDisposable {\n  return new DomEventMatchListener(elem, eventType, callback, useCapture, selector);\n}\nexport function onMatch(selector: string, eventType: string, callback: EventCB,\n                        {useCapture = false} = {}): DomElementMethod {\n  // tslint:disable-next-line:no-unused-expression\n  return (elem) => { new DomEventMatchListener(elem, eventType, callback, useCapture, selector); };\n}\n\nexport type KeyEventType = 'keypress' | 'keyup' | 'keydown';\n\nexport interface IKeyHandlers<T extends HTMLElement = HTMLElement> {\n  [key: string]: (this: void, ev: KeyboardEvent, elem: T) => void;\n}\n\n/**\n * Listen to key events (typically 'keydown' or 'keypress'), with specified per-key callbacks.\n * Key names are listed at https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values\n *\n * Methods onKeyPress() and onKeyDown() are intended to be used as arguments to dom().\n *\n * By default, handled events are stopped from bubbling with stopPropagation() and\n * preventDefault(). If, however, you register a key with a \"$\" suffix (i.e. \"Enter$\" instead of\n * \"Enter\"), then the event is allowed to bubble normally.\n *\n * When this handler is set on an element, we automatically ensure that tabindex attribute is set,\n * to allow this element to receive keyboard events.\n *\n * For example:\n *\n *    dom('input', ...\n *      dom.onKeyDown({\n *        Enter: (e, elem) => console.log(\"Enter pressed\"),\n *        Escape: (e, elem) => console.log(\"Escape pressed\"),\n *        Delete$: (e, elem) => console.log(\"Delete pressed, will bubble\"),\n *      })\n *    )\n */\nexport function onKeyElem<T extends HTMLElement>(\n  elem: T, evType: KeyEventType, keyHandlers: IKeyHandlers<T>,\n): IDisposable {\n  if (!(elem.tabIndex >= 0)) {                    // If tabIndex property is undefined or -1,\n    elem.setAttribute('tabindex', '-1');          // Set tabIndex attribute to make the element focusable.\n  }\n  return onElem(elem, evType, (ev, _elem) => {\n    const plainHandler = keyHandlers[ev.key];\n    const handler = plainHandler || keyHandlers[ev.key + '$'];\n    if (handler) {\n      if (plainHandler!) {\n        ev.stopPropagation();\n        ev.preventDefault();\n      }\n      handler(ev, _elem);\n    }\n  });\n}\n\nexport function onKeyPress<T extends HTMLElement>(keyHandlers: IKeyHandlers<T>): DomMethod<T> {\n  return (elem) => { onKeyElem(elem, 'keypress', keyHandlers); };\n}\n\nexport function onKeyDown<T extends HTMLElement>(keyHandlers: IKeyHandlers<T>): DomMethod<T> {\n  return (elem) => { onKeyElem(elem, 'keydown', keyHandlers); };\n}\n","/**\n * dom.js provides a way to build a DOM tree easily.\n *\n * E.g.\n *  import {dom} from 'grainjs';\n *  dom('a#link.c1.c2', {'href': url}, 'Hello ', dom('span', 'world'));\n *    creates Node <a id=\"link\" class=\"c1 c2\" href={{url}}Hello <span>world</span></a>.\n *\n *  dom.frag(dom('span', 'Hello'), ['blah', dom('div', 'world')])\n *    creates document fragment with <span>Hello</span>blah<div>world</div>.\n *\n * DOM can also be created and modified inline during creation:\n *  dom('a#id.c1',\n *      dom.cls('c2'), dom.attr('href', url),\n *      dom.text('Hello '), dom('span', dom.text('world')))\n *    creates Node <a id=\"link\" class=\"c1 c2\" href={{url}}Hello <span>world</span></a>,\n *    identical to the first example above.\n */\n\n// We keep various dom-related functions organized in private modules, but they are exposed here.\nexport * from './domImpl';\nexport * from './domComponent';\nexport * from './domComputed';\nexport * from './domDispose';\nexport * from './domForEach';\nexport * from './domMethods';\nexport * from './domevent';\n\nimport * as _domComponent from './domComponent';\nimport * as _domComputed from './domComputed';\nimport * as _domDispose from './domDispose';\nimport * as _domForEach from './domForEach';\nimport * as _domImpl from './domImpl';\nimport * as _domMethods from './domMethods';\n\nimport * as domevent from './domevent';\n\nimport {dom as _dom, IDomArgs, TagElem, TagName} from './domImpl';\n\n// We just want to re-export _domImpl.dom, but to allow adding methods to it in a typesafe way,\n// TypeScript wants us to declare a real function in the same file.\nexport function dom<Tag extends TagName>(tagString: Tag, ...args: IDomArgs<TagElem<Tag>>): TagElem<Tag> {\n  return _dom(tagString, ...args);\n}\n\n// Additionally export all methods as properties of dom() function.\nexport namespace dom {      // tslint:disable-line:no-namespace\n  export const svg             = _domImpl.svg;\n  export const frag            = _domImpl.frag;\n  export const update          = _domImpl.update;\n  export const find            = _domImpl.find;\n  export const findAll         = _domImpl.findAll;\n\n  export const domDispose      = _domDispose.domDispose;\n  export const onDisposeElem   = _domDispose.onDisposeElem;\n  export const onDispose       = _domDispose.onDispose;\n  export const autoDisposeElem = _domDispose.autoDisposeElem;\n  export const autoDispose     = _domDispose.autoDispose;\n\n  export const attrsElem       = _domMethods.attrsElem;\n  export const attrs           = _domMethods.attrs;\n  export const attrElem        = _domMethods.attrElem;\n  export const attr            = _domMethods.attr;\n  export const boolAttrElem    = _domMethods.boolAttrElem;\n  export const boolAttr        = _domMethods.boolAttr;\n  export const textElem        = _domMethods.textElem;\n  export const text            = _domMethods.text;\n  export const styleElem       = _domMethods.styleElem;\n  export const style           = _domMethods.style;\n  export const propElem        = _domMethods.propElem;\n  export const prop            = _domMethods.prop;\n  export const showElem        = _domMethods.showElem;\n  export const show            = _domMethods.show;\n  export const hideElem        = _domMethods.hideElem;\n  export const hide            = _domMethods.hide;\n  export const clsElem         = _domMethods.clsElem;\n  export const cls             = _domMethods.cls;\n  export const clsPrefix       = _domMethods.clsPrefix;\n  export const dataElem        = _domMethods.dataElem;\n  export const data            = _domMethods.data;\n  export const getData         = _domMethods.getData;\n  export const replaceContent  = _domComputed.replaceContent;\n  export const domComputed     = _domComputed.domComputed;\n  export const domComputedOwned = _domComputed.domComputedOwned;\n  export const maybe           = _domComputed.maybe;\n  export const maybeOwned      = _domComputed.maybeOwned;\n\n  export const forEach         = _domForEach.forEach;\n\n  export const create          = _domComponent.create;\n\n  export const onElem          = domevent.onElem;\n  export const on              = domevent.on;\n  export const onMatchElem     = domevent.onMatchElem;\n  export const onMatch         = domevent.onMatch;\n  export const onKeyElem       = domevent.onKeyElem;\n  export const onKeyPress      = domevent.onKeyPress;\n  export const onKeyDown       = domevent.onKeyDown;\n}\n","/**\n * pureComputed.js implements a variant of computed() suitable for use with a pure read function\n * (free of side-effects). A pureComputed is only subscribed to its dependencies when something is\n * subscribed to it. At other times, it is not subscribed to anything, and calls to `get()` will\n * recompute its value each time by calling its read() function.\n *\n * Its syntax and usage are otherwise exactly as for a computed.\n *\n * In addition to being cheaper when unused, a pureComputed() also avoids leaking memory when\n * unused (since it's not registered with dependencies), so it is not necessary to dispose it.\n */\n\nimport {DepItem} from './_computed_queue';\nimport {IKnockoutReadObservable} from './kowrap';\nimport {BaseObservable, Observable} from './observable';\nimport {ISubscribable, ISubscribableObs, Subscription, UseCB} from './subscribe';\n\nfunction _noWrite(): never {\n  throw new Error(\"Can't write to non-writable pureComputed\");\n}\n\nfunction _useFunc<T>(obs: BaseObservable<T>|IKnockoutReadObservable<T>): T {\n  return ('get' in obs) ? obs.get() : obs.peek();\n}\n\n// Constant empty array, which we use to avoid allocating new read-only empty arrays.\nconst emptyArray: ReadonlyArray<any> = [];\n\nexport class PureComputed<T> extends Observable<T> {\n  private _callback: (use: UseCB, ...args: any[]) => T;\n  private _write: (value: T) => void;\n  private _sub: Subscription|null;\n  private readonly _dependencies: ReadonlyArray<ISubscribableObs>;\n  private _inCall: boolean;\n\n  /**\n   * Internal constructor for a PureComputed. You should use pureComputed() function instead.\n   */\n  constructor(callback: (use: UseCB, ...args: any[]) => T, dependencies: ReadonlyArray<ISubscribable>) {\n    // At initialization we force an undefined value even though it's not of type T: it's not\n    // actually used as get() is overridden.\n    super(undefined as any);\n    this._callback = callback;\n    this._write = _noWrite;\n    this._dependencies = dependencies.length > 0 ? dependencies : emptyArray;\n    this._sub = null;\n    this._inCall = false;\n    this.setListenerChangeCB(this._onListenerChange, this);\n  }\n\n  public _getDepItem(): DepItem {\n    this._activate();\n    return this._sub!._getDepItem();\n  }\n\n  public get(): T {\n    if (!this._sub && !this._inCall) {\n      // _inCall member prevents infinite recursion.\n      this._inCall = true;\n      try {\n        const readArgs: [UseCB, ...any[]] = [_useFunc];\n        // Note that this attempts to optimize for speed.\n        for (let i = 0, len = this._dependencies.length; i < len; i++) {\n          readArgs[i + 1] = this._dependencies[i].get();\n        }\n        super.set(this._callback.apply(undefined, readArgs));\n      } finally {\n        this._inCall = false;\n      }\n    }\n    return super.get();\n  }\n\n  /**\n   * \"Sets\" the value of the pure computed by calling the write() callback if one was provided in\n   * the constructor. Throws an error if there was no such callback (not a \"writable\" computed).\n   * @param {Object} value: The value to pass to the write() callback.\n   */\n  public set(value: T): void { this._write(value); }\n\n  /**\n   * Set callback to call when this.set(value) is called, to make it a writable computed. If not\n   * set, attempting to write to this computed will throw an exception.\n   */\n  public onWrite(writeFunc: (value: T) => void): PureComputed<T> {\n    this._write = writeFunc;\n    return this;\n  }\n\n  /**\n   * Disposes the pureComputed, unsubscribing it from all observables it depends on.\n   */\n  public dispose() {\n    if (this._sub) {\n      this._sub.dispose();\n    }\n    // Truthy value for _sub prevents some errors after disposal, by avoiding activation or\n    // _directRead calls.\n    this._sub = true as any;\n    super.dispose();\n  }\n\n  private _activate(): void {\n    if (!this._sub) {\n      this._sub = new Subscription(this._read.bind(this), this._dependencies);\n    }\n  }\n\n  private _onListenerChange(hasListeners: boolean): void {\n    if (hasListeners) {\n      this._activate();\n    } else if (this._sub) {\n      this._sub.dispose();\n      this._sub = null;\n    }\n  }\n\n  private _read(use: any, ...args: any[]): void {\n    super.set(this._callback(use, ...args));\n  }\n}\n\n/**\n * This is the type-checking interface for pureComputed(), which allows TypeScript to do helpful\n * type-checking when using it. We can only support a fixed number of argumnets (explicit\n * dependencies), but 5 should almost always be enough.\n */\nexport function pureComputed<T>(cb: (use: UseCB) => T): PureComputed<T>;\n\nexport function pureComputed<A, T>(\n    a: Observable<A>,\n    cb: (use: UseCB, a: A) => T): PureComputed<T>;\n\nexport function pureComputed<A, B, T>(\n    a: Observable<A>, b: Observable<B>,\n    cb: (use: UseCB, a: A, b: B) => T): PureComputed<T>;\n\nexport function pureComputed<A, B, C, T>(\n    a: Observable<A>, b: Observable<B>, c: Observable<C>,\n    cb: (use: UseCB, a: A, b: B, c: C) => T): PureComputed<T>;\n\nexport function pureComputed<A, B, C, D, T>(\n    a: Observable<A>, b: Observable<B>, c: Observable<C>, d: Observable<D>,\n    cb: (use: UseCB, a: A, b: B, c: C, d: D) => T): PureComputed<T>;\n\nexport function pureComputed<A, B, C, D, E, T>(\n    a: Observable<A>, b: Observable<B>, c: Observable<C>, d: Observable<D>, e: Observable<E>,\n    cb: (use: UseCB, a: A, b: B, c: C, d: D, e: E) => T): PureComputed<T>;\n\n/**\n * Creates and returns a new PureComputed. The interface is identical to that of a Computed.\n */\nexport function pureComputed(...args: any[]): PureComputed<any> {\n  const readCb = args.pop();\n  // The cast helps ensure that Observable is compatible with ISubscribable abstraction that we use.\n  return new PureComputed<any>(readCb, args);\n}\n","/**\n * In-code styling for DOM components, inspired by Reacts Styled Components.\n *\n * Usage:\n *    const title = styled('h1', `\n *      font-size: 1.5em;\n *      text-align: center;\n *      color: palevioletred;\n *    `);\n *\n *    const wrapper = styled('section', `\n *      padding: 4em;\n *      background: papayawhip;\n *    `);\n *\n *    wrapper(title('Hello world'))\n *\n * This generates class names for title and wrapper, adds the styles to the document on first use,\n * and the result is equivalent to:\n *\n *    dom(`section.${wrapper.className}`, dom(`h1.${title.className}`, 'Hello world'));\n *\n * Calls to styled() should happen at the top level, at import time, in order to register all\n * styles upfront. Actual work happens the first time a style is needed to create an element.\n * Calling styled() elsewhere than at top level is wasteful and bad for performance.\n *\n * You may create a style that modifies an existing styled() or other component, e.g.\n *\n *    const title2 = styled(title, `font-size: 1rem; color: red;`);\n *\n * Calling title2('Foo') becomes equivalent to dom(`h1.${title.className}.${title2.className}`).\n *\n * Styles may incorporate other related styles by nesting them under the main one as follows:\n *\n *     const myButton = styled('button', `\n *       border-radius: 0.5rem;\n *       border: 1px solid grey;\n *       font-size: 1rem;\n *\n *       &:active {\n *         background: lightblue;\n *       }\n *       &-small {\n *         font-size: 0.6rem;\n *       }\n *     `);\n *\n * In nested styles, ampersand (&) gets replaced with the generated .className of the main element.\n *\n * The resulting styled component provides a .cls() helper to simplify using prefixed classes. It\n * behaves as dom.cls(), but prefixes the class names with the generated className of the main\n * element. E.g. for the example above,\n *\n *      myButton(myButton.cls('-small'), 'Test')\n *\n * creates a button with both the myButton style above, and the style specified under \"&-small\".\n *\n * Animations with @keyframes may be created with a unique name by using the keyframes() helper:\n *\n *    const rotate360 = keyframes(`\n *      from { transform: rotate(0deg); }\n *      to { transform: rotate(360deg); }\n *    `);\n *\n *    const Rotate = styled('div', `\n *      display: inline-block;\n *      animation: ${rotate360} 2s linear infinite;\n *    `);\n */\n\n// Use the browser globals in a way that allows replacing them with mocks in tests.\nimport {G} from './browserGlobals';\nimport {dom, IDomArgs, TagElem, TagName} from './domImpl';\nimport {cls, clsPrefix} from './domMethods';\n\n// The value returned by styled() matches the input (first argument), and also implements IClsName\n// interface.\nexport interface IClsName {\n  className: string;      // Name of the generated class.\n  cls: typeof cls;        // Helper like dom.cls(), but which prefixes classes by className.\n}\n\nexport type DomCreateFunc<R, Args extends IDomArgs<R> = IDomArgs<R>> = (...args: Args) => R;\n\n// See module documentation for details.\nexport function styled<Tag extends TagName>(tag: Tag, styles: string): DomCreateFunc<TagElem<Tag>> & IClsName;\nexport function styled<Args extends any[], R extends Element>(\n  creator: (...args: Args) => R, styles: string): typeof creator & IClsName;\nexport function styled(creator: any, styles: string): IClsName {\n  // Note that we intentionally minimize the work done when styled() is called; it's better to do\n  // any needed work on first use. That's when we will actually build the css rules.\n  const style = new StylePiece(styles);\n\n  // Creator function reflects the input, with only the addition of style.use() at the end. Note\n  // that it needs to be at the end because creator() might take special initial arguments.\n  const newCreator = (typeof creator === 'string') ?\n    (...args: any[]) => style.addToElem(dom(creator, ...args)) :\n    (...args: any[]) => style.addToElem(creator(...args));\n  return Object.assign(newCreator, {\n    className: style.className,\n    cls: clsPrefix.bind(null, style.className),\n  });\n}\n\n// Keyframes produces simply a string with the generated name. Note that these does not support\n// nesting or ampersand (&) handling, since these would be difficult and are entirely unneeded.\nexport function keyframes(styles: string): string {\n  return (new KeyframePiece(styles)).className;\n}\n\nfunction createCssRules(className: string, styles: string) {\n  // The first time we encounter a nested section, we know which are the \"main\" rules, and can\n  // wrap them appropriately.\n  const nestedStart = styles.search(/[^;]*\\{/);\n  const mainRules = nestedStart < 0 ? styles : styles.slice(0, nestedStart);\n  const nestedRules = nestedStart < 0 ? \"\" : styles.slice(nestedStart);\n\n  // At the end, replace all occurrences of & with \".className\".\n  return `& {${mainRules}\\n}\\n${nestedRules}`.replace(/&/g, className);\n}\n\n// Used by getNextStyleNum when running without a global window object (e.g. in tests).\nconst _global = {};\n\n// Keep the counter for next class attached to the global window object rather than be a library\n// global. This way if by some chance multiple instance of grainjs are loaded into the page, it\n// still works without overwriting class names (which would be extremely confusing).\nfunction getNextStyleNum() {\n  const g: any = G.window || _global;\n  return g._grainNextStyleNum = (g._grainNextStyleNum || 0) + 1;\n}\n\nclass StylePiece {\n  // Set of all StylePieces created but not yet mounted.\n  private static _unmounted = new Set<StylePiece>();\n\n  // Generate a new css class name. The suffix ensures that names like \"&2\" can't cause a conflict.\n  private static _nextClassName() { return `_grain${getNextStyleNum()}_`; }\n\n  // Mount all unmounted StylePieces, and clear the _unmounted map.\n  private static _mountAll(): void {\n    const sheet: string = Array.from(this._unmounted, (p) => p._createRules()).join(\"\\n\\n\");\n\n    G.document.head!.appendChild(dom('style', sheet));\n    for (const piece of this._unmounted) {\n      piece._mounted = true;\n    }\n    this._unmounted.clear();\n  }\n\n  public readonly className: string;\n  private _mounted: boolean = false;\n\n  constructor(protected _styles: string) {\n    this.className = StylePiece._nextClassName();\n    StylePiece._unmounted.add(this);\n  }\n\n  public addToElem<T extends Element>(elem: T): T {\n    if (!this._mounted) { StylePiece._mountAll(); }\n    elem.classList.add(this.className);\n    return elem;\n  }\n\n  protected _createRules(): string {\n    return createCssRules('.' + this.className, this._styles);\n  }\n}\n\nclass KeyframePiece extends StylePiece {\n  protected _createRules(): string {\n    return `@keyframes ${this.className} {${this._styles}}`;\n  }\n}\n","/**\n * General INPUT widget.\n */\nimport {bundleChanges, dom, IDomArgs, Observable, subscribe} from '../../index';\n\nexport interface IInputOptions {\n  onInput?: boolean;      // If set, update the observable on every keystroke.\n\n  // If given, this observable will be set whenever email is set, to elem.validity.valid boolean;\n  // see https://developer.mozilla.org/en-US/docs/Web/API/ValidityState.\n  isValid?: Observable<boolean>;\n}\n\n/**\n * Creates a input element tied to the given observable. The required options argument allows\n * controlling the behavior, see IInputOptions for details.\n *\n * This is intended for string input elements, with \"type\" such as text, email, url, password,\n * number, tel.\n *\n * Note that every change to the observable will affect the input element, but not every change to\n * the input element will affect the observable. Specifically, unless {onInput: true} is set, the\n * visible content may differ from the observable until the element loses focus or Enter is hit.\n *\n * Example usage:\n *    input(obs, {}, {type: 'text', placeholder: 'Your name...'});\n *    input(obs, {isValid: isValidObs}, {type: 'email', placeholder: 'Your email...'});\n *    input(obs, {onInput: true}, {type: 'text'});\n */\nexport function input(\n  obs: Observable<string>, options: IInputOptions, ...args: IDomArgs<HTMLInputElement>\n): HTMLInputElement {\n\n  const isValid = options.isValid;\n\n  function setValue(elem: HTMLInputElement) {\n    bundleChanges(() => {\n      obs.set(elem.value);\n      if (isValid) { isValid.set(elem.validity.valid); }\n    });\n  }\n\n  return dom('input', ...args,\n    dom.prop('value', obs),\n    (isValid ?\n      (elem) => dom.autoDisposeElem(elem,\n        subscribe(obs, (use) => isValid.set(elem.checkValidity()))) :\n      null),\n    options.onInput ? dom.on('input', (e, elem) => setValue(elem)) : null,\n    dom.on('change', (e, elem) => setValue(elem)),\n    dom.onKeyPress({Enter: (e, elem) => setValue(elem)}),\n  );\n}\n","/**\n * Select dropdown widget.\n */\nimport {dom, MaybeObsArray, Observable, subscribe} from '../../index';\n\nexport interface IOptionFull<T> {\n  value: T;\n  label: string;\n  disabled?: boolean;\n}\n\n// For string options, we can use a string for label and value, without wrapping into an object.\nexport type IOption<T> = (T & string) | IOptionFull<T>;\n\nfunction unwrapMaybeObsArray<T>(array: MaybeObsArray<T>): T[] {\n  return Array.isArray(array) ? array : array.get();\n}\n\nfunction getOptionValue<T>(option: IOption<T>): T {\n  return (typeof option === \"string\") ?\n    option : (option as IOptionFull<T>).value;\n}\n\n/**\n * Creates a select dropdown widget. The observable `obs` reflects the value of the selected\n * option, and `optionArray` is an array (regular or observable) of option values and labels.\n * These may be either strings, or {label, value, disabled} objects.\n *\n * The type of value may be any type at all; it is opaque to this widget.\n *\n * If obs is set to an invalid or disabled value, then defLabel option is used to determine the\n * label that the select box will show, blank by default.\n *\n * Usage:\n *    const fruit = observable(\"apple\");\n *    select(fruit, [\"apple\", \"banana\", \"mango\"]);\n *\n *    const employee = observable(17);\n *    const employees = obsArray<IOption<number>>([\n *      {value: 12, label: \"Bob\", disabled: true},\n *      {value: 17, label: \"Alice\"},\n *      {value: 21, label: \"Eve\"},\n *    ]);\n *    select(employee, employees, {defLabel: \"Select employee:\"});\n */\nexport function select<T>(obs: Observable<T>, optionArray: MaybeObsArray<IOption<T>>,\n                          options: {defLabel?: string} = {}) {\n  const {defLabel = \"\"} = options;\n  return dom('select',\n    // Include a hidden option to represent a default value. This one gets shown when none of the\n    // options are selected. This is more consistent when showing the first valid option.\n    dom('option', dom.hide(true), defLabel),\n\n    // Create all the option elements.\n    dom.forEach(optionArray, (option) => {\n      const obj: IOptionFull<T> = (typeof option === \"string\") ?\n        {value: option, label: option} : (option as IOptionFull<T>);\n      // Note we only set 'selected' when an <option> is created; we are not subscribing to obs.\n      // This is to reduce the amount of subscriptions, esp. when number of options is large.\n      return dom('option', {\n        disabled: obj.disabled,\n        selected: obj.value === obs.get(),\n      }, obj.label);\n    }),\n\n    // When obs changes, update select's value; we do it after <options> have been created.\n    // Note that autoDisposeElem ensures the subscription is disposed with the 'select' element.\n    (elem) => dom.autoDisposeElem(elem, subscribe(obs, (use, obsValue) => {\n      const arr = unwrapMaybeObsArray(optionArray);\n      const index = arr.findIndex((item) => getOptionValue(item) === obsValue);\n      elem.selectedIndex = index + 1;    // +1 for default option\n    })),\n\n    // When user picks a new item, use its value to update the observable.\n    dom.on('change', (e, elem) => {\n      const index = elem.selectedIndex;\n      const item = unwrapMaybeObsArray(optionArray)[index - 1];   // -1 for default option\n      // It should be impossible for the user to select an invalid option, but check just in case.\n      if (item !== undefined) {\n        obs.set(getOptionValue(item));\n      }\n    }),\n  );\n}\n","/**\n * emit.js implements an Emitter class which emits events to a list of listeners. Listeners are\n * simply functions to call, and \"emitting an event\" just calls those functions.\n *\n * This is similar to Backbone events, with more focus on efficiency. Both inserting and removing\n * listeners is constant time.\n *\n * To create an emitter:\n *    let emitter = new Emitter();\n *\n * To add a listener:\n *    let listener = fooEmitter.addListener(callback);\n * To remove a listener:\n *    listener.dispose();\n *\n * The only way to remove a listener is to dispose the Listener object returned by addListener().\n * You can often use autoDispose to do this automatically when subscribing in a constructor:\n *    this.autoDispose(fooEmitter.addListener(this.onFoo, this));\n *\n * To emit an event, call emit() with any number of arguments:\n *    emitter.emit(\"hello\", \"world\");\n */\n\n// Note about a possible alternative implementation.\n//\n// We could implement the same interface using an array of listeners. Certain issues apply, in\n// particular with removing listeners from inside emit(), and in ensuring that removals are\n// constant time on average. Such an implementation was attempted and timed. The result is that\n// compared to the linked-list implementation here, add/remove combination could be made nearly\n// twice faster (on average), while emit and add/remove/emit are consistently slightly slower.\n//\n// The implementation here was chosen based on those timings, and as the simpler one. For example,\n// on one setup (macbook, node4, 5-listener queue), add+remove take 0.1us, while add+remove+emit\n// take 3.82us. (In array-based implementation with same set up, add+remove is 0.06us, while\n// add+remove+emit is 4.80us.)\n\n// The private property name to hold next/prev pointers.\n\nfunction _noop() { /* noop */}\n\nexport type ListenerCB<T> = (this: T, ...args: any[]) => void;\nexport type ChangeCB = (hasListeners: boolean) => void;\n\n/**\n * This is an implementation of a doubly-linked list, with just the minimal functionality we need.\n */\nexport class LLink {\n  protected _next: LLink|null = null;\n  protected _prev: LLink|null = null;\n\n  constructor() {\n    // This immediate circular reference might be undesirable for GC, but might not matter, and\n    // makes the linked list implementation simpler and faster.\n    this._next = this;\n    this._prev = this;\n  }\n\n  public isDisposed(): boolean {\n    return !this._next;\n  }\n\n  protected _insertBefore(next: LLink, node: LLink): void {\n    const last = next._prev!;\n    last._next = node;\n    next._prev = node;\n    node._prev = last;\n    node._next = next;\n  }\n\n  protected _removeNode(node: LLink): void {\n    if (node._prev) {\n      node._prev._next = node._next;\n      node._next!._prev = node._prev;\n    }\n    node._prev = node._next = null;\n  }\n\n  protected _disposeList(): void {\n    let node: LLink = this;\n    let next = node._next;\n    while (next !== null) {\n      node._next = node._prev = null;\n      node = next;\n      next = node._next;\n    }\n  }\n}\n\nexport class Emitter extends LLink {\n  private _changeCB: ChangeCB = _noop;\n  private _changeCBContext: any = undefined;\n\n  /**\n   * Constructs an Emitter object.\n   */\n  constructor() { super(); }\n\n  /**\n   * Adds a listening callback to the list of functions to call on emit().\n   * @param {Function} callback: Function to call.\n   * @param {Object} optContext: Context for the function.\n   * @returns {Listener} Listener object. Its dispose() method removes the callback from the list.\n   */\n  public addListener<T>(callback: ListenerCB<T>, optContext?: T): Listener {\n    return new Listener(this, callback, optContext);\n  }\n\n  /**\n   * Calls all listener callbacks, passing all arguments to each of them.\n   */\n  public emit(...args: any[]): void {\n    Listener.callAll(this._next!, this, args);\n  }\n\n  /**\n   * Sets the single callback that would get called when a listener is added or removed.\n   * @param {Function} changeCB(hasListeners): Function to call after a listener is added or\n   *    removed. It's called with a boolean indicating whether this Emitter has any listeners.\n   *    Pass in `null` to unset the callback. Note that it can be called multiple times in a row\n   *    with hasListeners `true`.\n   */\n  public setChangeCB(changeCB: ChangeCB, optContext?: any): void {\n    this._changeCB = changeCB || _noop;\n    this._changeCBContext = optContext;\n  }\n\n  /**\n   * Helper used by Listener class, but not intended for public usage.\n   */\n  public _triggerChangeCB(): void {\n    this._changeCB.call(this._changeCBContext, this.hasListeners());\n  }\n\n  /**\n   * Returns whether this Emitter has any listeners.\n   */\n  public hasListeners(): boolean {\n    return this._next !== this;\n  }\n\n  /**\n   * Disposes the Emitter. It breaks references between the emitter and all the items, allowing\n   * for better garbage collection. It effectively disposes all current listeners.\n   */\n  public dispose(): void {\n    this._disposeList();\n    this._changeCB = _noop;\n    this._changeCBContext = undefined;\n  }\n}\n\n/**\n * Listener object wraps a callback added to an Emitter, allowing for O(1) removal when the\n * listener is disposed.\n */\nexport class Listener extends LLink {\n  public static callAll(begin: LLink, end: LLink, args: any[]): void {\n    while (begin !== end) {\n      const lis = begin as Listener;\n      lis.callback.call(lis.context, ...args);\n      begin = lis._next!;\n    }\n  }\n\n  constructor(private emitter: Emitter,\n              private callback: ListenerCB<any>,\n              private context?: any) {\n    super();\n    this._insertBefore(emitter, this);\n    emitter._triggerChangeCB();\n  }\n\n  public dispose(): void {\n    if (this.isDisposed()) { return; }\n    this._removeNode(this);\n    this.emitter._triggerChangeCB();\n  }\n}\n","\n/**\n * Returns f such that f() calls func(...boundArgs), i.e. optimizes `() => func(...boundArgs)`.\n * It is faster on node6 by 57-92%.\n */\nexport function bindB<R>(func: (...args: any[]) => R, b: any[]): () => R {\n  switch (b.length) {\n    case 0: return () => func();\n    case 1: return () => func(b[0]);\n    case 2: return () => func(b[0], b[1]);\n    case 3: return () => func(b[0], b[1], b[2]);\n    case 4: return () => func(b[0], b[1], b[2], b[3]);\n    case 5: return () => func(b[0], b[1], b[2], b[3], b[4]);\n    case 6: return () => func(b[0], b[1], b[2], b[3], b[4], b[5]);\n    case 7: return () => func(b[0], b[1], b[2], b[3], b[4], b[5], b[6]);\n    case 8: return () => func(b[0], b[1], b[2], b[3], b[4], b[5], b[6], b[7]);\n    default: return () => func.apply(undefined, b);\n  }\n}\n\n/**\n * Returns f such that f(unboundArg) calls func(unboundArg, ...boundArgs).\n * I.e. optimizes `(arg) => func(arg, ...boundArgs)`.\n * It is faster on node6 by 0-92%.\n */\nexport function bindUB<U, R>(func: (arg: U, ...args: any[]) => R, b: any[]): (arg: U) => R {\n  switch (b.length) {\n    case 0: return (arg) => func(arg);\n    case 1: return (arg) => func(arg, b[0]);\n    case 2: return (arg) => func(arg, b[0], b[1]);\n    case 3: return (arg) => func(arg, b[0], b[1], b[2]);\n    case 4: return (arg) => func(arg, b[0], b[1], b[2], b[3]);\n    case 5: return (arg) => func(arg, b[0], b[1], b[2], b[3], b[4]);\n    case 6: return (arg) => func(arg, b[0], b[1], b[2], b[3], b[4], b[5]);\n    case 7: return (arg) => func(arg, b[0], b[1], b[2], b[3], b[4], b[5], b[6]);\n    case 8: return (arg) => func(arg, b[0], b[1], b[2], b[3], b[4], b[5], b[6], b[7]);\n    default: return (arg) => func(arg, ...b);\n  }\n}\n\n/**\n * Returns f such that f(unboundArg) calls func(...boundArgs, unboundArg).\n * I.e. optimizes `(arg) => func(...boundArgs, arg)`.\n * It is faster on node6 by 0-92%.\n */\nexport function bindBU<R>(func: (...args: any[]) => R, b: any[]): (arg: any) => R {\n  switch (b.length) {\n    case 0: return (arg) => func(arg);\n    case 1: return (arg) => func(b[0], arg);\n    case 2: return (arg) => func(b[0], b[1], arg);\n    case 3: return (arg) => func(b[0], b[1], b[2], arg);\n    case 4: return (arg) => func(b[0], b[1], b[2], b[3], arg);\n    case 5: return (arg) => func(b[0], b[1], b[2], b[3], b[4], arg);\n    case 6: return (arg) => func(b[0], b[1], b[2], b[3], b[4], b[5], arg);\n    case 7: return (arg) => func(b[0], b[1], b[2], b[3], b[4], b[5], b[6], arg);\n    case 8: return (arg) => func(b[0], b[1], b[2], b[3], b[4], b[5], b[6], b[7], arg);\n    default: return (arg) => func(...b, arg);\n  }\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","/*!\n * Knockout JavaScript library v3.5.0\n * (c) The Knockout.js team - http://knockoutjs.com/\n * License: MIT (http://www.opensource.org/licenses/mit-license.php)\n */\n\n(function() {(function(p){var z=this||(0,eval)(\"this\"),w=z.document,R=z.navigator,v=z.jQuery,H=z.JSON;v||\"undefined\"===typeof jQuery||(v=jQuery);(function(p){\"function\"===typeof define&&define.amd?define([\"exports\",\"require\"],p):\"object\"===typeof exports&&\"object\"===typeof module?p(module.exports||exports):p(z.ko={})})(function(S,T){function K(a,c){return null===a||typeof a in W?a===c:!1}function X(b,c){var d;return function(){d||(d=a.a.setTimeout(function(){d=p;b()},c))}}function Y(b,c){var d;return function(){clearTimeout(d);\nd=a.a.setTimeout(b,c)}}function Z(a,c){c&&\"change\"!==c?\"beforeChange\"===c?this.oc(a):this.bb(a,c):this.pc(a)}function aa(a,c){null!==c&&c.s&&c.s()}function ba(a,c){var d=this.pd,e=d[t];e.qa||(this.Pb&&this.kb[c]?(d.tc(c,a,this.kb[c]),this.kb[c]=null,--this.Pb):e.F[c]||d.tc(c,a,e.G?{da:a}:d.Zc(a)),a.Ka&&a.fd())}var a=\"undefined\"!==typeof S?S:{};a.b=function(b,c){for(var d=b.split(\".\"),e=a,f=0;f<d.length-1;f++)e=e[d[f]];e[d[d.length-1]]=c};a.J=function(a,c,d){a[c]=d};a.version=\"3.5.0\";a.b(\"version\",\na.version);a.options={deferUpdates:!1,useOnlyNativeEvents:!1,foreachHidesDestroyed:!1};a.a=function(){function b(a,b){for(var c in a)f.call(a,c)&&b(c,a[c])}function c(a,b){if(b)for(var c in b)f.call(b,c)&&(a[c]=b[c]);return a}function d(a,b){a.__proto__=b;return a}function e(b,c,d,e){var k=b[c].match(n)||[];a.a.C(d.match(n),function(b){a.a.Oa(k,b,e)});b[c]=k.join(\" \")}var f=Object.prototype.hasOwnProperty,g={__proto__:[]}instanceof Array,h=\"function\"===typeof Symbol,m={},l={};m[R&&/Firefox\\/2/i.test(R.userAgent)?\n\"KeyboardEvent\":\"UIEvents\"]=[\"keyup\",\"keydown\",\"keypress\"];m.MouseEvents=\"click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave\".split(\" \");b(m,function(a,b){if(b.length)for(var c=0,d=b.length;c<d;c++)l[b[c]]=a});var k={propertychange:!0},q=w&&function(){for(var a=3,b=w.createElement(\"div\"),c=b.getElementsByTagName(\"i\");b.innerHTML=\"\\x3c!--[if gt IE \"+ ++a+\"]><i></i><![endif]--\\x3e\",c[0];);return 4<a?a:p}(),n=/\\S+/g,r;return{Ic:[\"authenticity_token\",/^__RequestVerificationToken(_.*)?$/],\nC:function(a,b,c){for(var d=0,e=a.length;d<e;d++)b.call(c,a[d],d,a)},A:\"function\"==typeof Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b)}:function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},Lb:function(a,b,c){for(var d=0,e=a.length;d<e;d++)if(b.call(c,a[d],d,a))return a[d];return p},hb:function(b,c){var d=a.a.A(b,c);0<d?b.splice(d,1):0===d&&b.shift()},vc:function(b){var c=[];b&&a.a.C(b,function(b){0>a.a.A(c,b)&&c.push(b)});return c},Mb:function(a,\nb,c){var d=[];if(a)for(var e=0,k=a.length;e<k;e++)d.push(b.call(c,a[e],e));return d},fb:function(a,b,c){var d=[];if(a)for(var e=0,k=a.length;e<k;e++)b.call(c,a[e],e)&&d.push(a[e]);return d},gb:function(a,b){if(b instanceof Array)a.push.apply(a,b);else for(var c=0,d=b.length;c<d;c++)a.push(b[c]);return a},Oa:function(b,c,d){var e=a.a.A(a.a.$b(b),c);0>e?d&&b.push(c):d||b.splice(e,1)},Ba:g,extend:c,setPrototypeOf:d,zb:g?d:c,O:b,Ha:function(a,b,c){if(!a)return a;var d={},e;for(e in a)f.call(a,e)&&(d[e]=\nb.call(c,a[e],e,a));return d},Sb:function(b){for(;b.firstChild;)a.removeNode(b.firstChild)},Xb:function(b){b=a.a.la(b);for(var c=(b[0]&&b[0].ownerDocument||w).createElement(\"div\"),d=0,e=b.length;d<e;d++)c.appendChild(a.na(b[d]));return c},Ca:function(b,c){for(var d=0,e=b.length,k=[];d<e;d++){var f=b[d].cloneNode(!0);k.push(c?a.na(f):f)}return k},ua:function(b,c){a.a.Sb(b);if(c)for(var d=0,e=c.length;d<e;d++)b.appendChild(c[d])},Wc:function(b,c){var d=b.nodeType?[b]:b;if(0<d.length){for(var e=d[0],\nk=e.parentNode,f=0,l=c.length;f<l;f++)k.insertBefore(c[f],e);f=0;for(l=d.length;f<l;f++)a.removeNode(d[f])}},Ua:function(a,b){if(a.length){for(b=8===b.nodeType&&b.parentNode||b;a.length&&a[0].parentNode!==b;)a.splice(0,1);for(;1<a.length&&a[a.length-1].parentNode!==b;)a.length--;if(1<a.length){var c=a[0],d=a[a.length-1];for(a.length=0;c!==d;)a.push(c),c=c.nextSibling;a.push(d)}}return a},Yc:function(a,b){7>q?a.setAttribute(\"selected\",b):a.selected=b},Cb:function(a){return null===a||a===p?\"\":a.trim?\na.trim():a.toString().replace(/^[\\s\\xa0]+|[\\s\\xa0]+$/g,\"\")},Td:function(a,b){a=a||\"\";return b.length>a.length?!1:a.substring(0,b.length)===b},ud:function(a,b){if(a===b)return!0;if(11===a.nodeType)return!1;if(b.contains)return b.contains(1!==a.nodeType?a.parentNode:a);if(b.compareDocumentPosition)return 16==(b.compareDocumentPosition(a)&16);for(;a&&a!=b;)a=a.parentNode;return!!a},Rb:function(b){return a.a.ud(b,b.ownerDocument.documentElement)},jd:function(b){return!!a.a.Lb(b,a.a.Rb)},P:function(a){return a&&\na.tagName&&a.tagName.toLowerCase()},zc:function(b){return a.onError?function(){try{return b.apply(this,arguments)}catch(c){throw a.onError&&a.onError(c),c;}}:b},setTimeout:function(b,c){return setTimeout(a.a.zc(b),c)},Fc:function(b){setTimeout(function(){a.onError&&a.onError(b);throw b;},0)},H:function(b,c,d){var e=a.a.zc(d);d=k[c];if(a.options.useOnlyNativeEvents||d||!v)if(d||\"function\"!=typeof b.addEventListener)if(\"undefined\"!=typeof b.attachEvent){var f=function(a){e.call(b,a)},l=\"on\"+c;b.attachEvent(l,\nf);a.a.I.za(b,function(){b.detachEvent(l,f)})}else throw Error(\"Browser doesn't support addEventListener or attachEvent\");else b.addEventListener(c,e,!1);else r||(r=\"function\"==typeof v(b).on?\"on\":\"bind\"),v(b)[r](c,e)},Fb:function(b,c){if(!b||!b.nodeType)throw Error(\"element must be a DOM node when calling triggerEvent\");var d;\"input\"===a.a.P(b)&&b.type&&\"click\"==c.toLowerCase()?(d=b.type,d=\"checkbox\"==d||\"radio\"==d):d=!1;if(a.options.useOnlyNativeEvents||!v||d)if(\"function\"==typeof w.createEvent)if(\"function\"==\ntypeof b.dispatchEvent)d=w.createEvent(l[c]||\"HTMLEvents\"),d.initEvent(c,!0,!0,z,0,0,0,0,0,!1,!1,!1,!1,0,b),b.dispatchEvent(d);else throw Error(\"The supplied element doesn't support dispatchEvent\");else if(d&&b.click)b.click();else if(\"undefined\"!=typeof b.fireEvent)b.fireEvent(\"on\"+c);else throw Error(\"Browser doesn't support triggering events\");else v(b).trigger(c)},c:function(b){return a.N(b)?b():b},$b:function(b){return a.N(b)?b.w():b},Eb:function(b,c,d){var k;c&&(\"object\"===typeof b.classList?\n(k=b.classList[d?\"add\":\"remove\"],a.a.C(c.match(n),function(a){k.call(b.classList,a)})):\"string\"===typeof b.className.baseVal?e(b.className,\"baseVal\",c,d):e(b,\"className\",c,d))},Ab:function(b,c){var d=a.a.c(c);if(null===d||d===p)d=\"\";var e=a.h.firstChild(b);!e||3!=e.nodeType||a.h.nextSibling(e)?a.h.ua(b,[b.ownerDocument.createTextNode(d)]):e.data=d;a.a.zd(b)},Xc:function(a,b){a.name=b;if(7>=q)try{var c=a.name.replace(/[&<>'\"]/g,function(a){return\"&#\"+a.charCodeAt(0)+\";\"});a.mergeAttributes(w.createElement(\"<input name='\"+\nc+\"'/>\"),!1)}catch(d){}},zd:function(a){9<=q&&(a=1==a.nodeType?a:a.parentNode,a.style&&(a.style.zoom=a.style.zoom))},vd:function(a){if(q){var b=a.style.width;a.style.width=0;a.style.width=b}},Od:function(b,c){b=a.a.c(b);c=a.a.c(c);for(var d=[],e=b;e<=c;e++)d.push(e);return d},la:function(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b},Da:function(a){return h?Symbol(a):a},Xd:6===q,Yd:7===q,W:q,Kc:function(b,c){for(var d=a.a.la(b.getElementsByTagName(\"input\")).concat(a.a.la(b.getElementsByTagName(\"textarea\"))),\ne=\"string\"==typeof c?function(a){return a.name===c}:function(a){return c.test(a.name)},k=[],f=d.length-1;0<=f;f--)e(d[f])&&k.push(d[f]);return k},Md:function(b){return\"string\"==typeof b&&(b=a.a.Cb(b))?H&&H.parse?H.parse(b):(new Function(\"return \"+b))():null},fc:function(b,c,d){if(!H||!H.stringify)throw Error(\"Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js\");\nreturn H.stringify(a.a.c(b),c,d)},Nd:function(c,d,e){e=e||{};var k=e.params||{},f=e.includeFields||this.Ic,l=c;if(\"object\"==typeof c&&\"form\"===a.a.P(c))for(var l=c.action,h=f.length-1;0<=h;h--)for(var g=a.a.Kc(c,f[h]),m=g.length-1;0<=m;m--)k[g[m].name]=g[m].value;d=a.a.c(d);var n=w.createElement(\"form\");n.style.display=\"none\";n.action=l;n.method=\"post\";for(var q in d)c=w.createElement(\"input\"),c.type=\"hidden\",c.name=q,c.value=a.a.fc(a.a.c(d[q])),n.appendChild(c);b(k,function(a,b){var c=w.createElement(\"input\");\nc.type=\"hidden\";c.name=a;c.value=b;n.appendChild(c)});w.body.appendChild(n);e.submitter?e.submitter(n):n.submit();setTimeout(function(){n.parentNode.removeChild(n)},0)}}}();a.b(\"utils\",a.a);a.b(\"utils.arrayForEach\",a.a.C);a.b(\"utils.arrayFirst\",a.a.Lb);a.b(\"utils.arrayFilter\",a.a.fb);a.b(\"utils.arrayGetDistinctValues\",a.a.vc);a.b(\"utils.arrayIndexOf\",a.a.A);a.b(\"utils.arrayMap\",a.a.Mb);a.b(\"utils.arrayPushAll\",a.a.gb);a.b(\"utils.arrayRemoveItem\",a.a.hb);a.b(\"utils.cloneNodes\",a.a.Ca);a.b(\"utils.createSymbolOrString\",\na.a.Da);a.b(\"utils.extend\",a.a.extend);a.b(\"utils.fieldsIncludedWithJsonPost\",a.a.Ic);a.b(\"utils.getFormFields\",a.a.Kc);a.b(\"utils.objectMap\",a.a.Ha);a.b(\"utils.peekObservable\",a.a.$b);a.b(\"utils.postJson\",a.a.Nd);a.b(\"utils.parseJson\",a.a.Md);a.b(\"utils.registerEventHandler\",a.a.H);a.b(\"utils.stringifyJson\",a.a.fc);a.b(\"utils.range\",a.a.Od);a.b(\"utils.toggleDomNodeCssClass\",a.a.Eb);a.b(\"utils.triggerEvent\",a.a.Fb);a.b(\"utils.unwrapObservable\",a.a.c);a.b(\"utils.objectForEach\",a.a.O);a.b(\"utils.addOrRemoveItem\",\na.a.Oa);a.b(\"utils.setTextContent\",a.a.Ab);a.b(\"unwrap\",a.a.c);Function.prototype.bind||(Function.prototype.bind=function(a){var c=this;if(1===arguments.length)return function(){return c.apply(a,arguments)};var d=Array.prototype.slice.call(arguments,1);return function(){var e=d.slice(0);e.push.apply(e,arguments);return c.apply(a,e)}});a.a.g=new function(){var b=0,c=\"__ko__\"+(new Date).getTime(),d={},e,f;a.a.W?(e=function(a,e){var f=a[c];if(!f||\"null\"===f||!d[f]){if(!e)return p;f=a[c]=\"ko\"+b++;d[f]=\n{}}return d[f]},f=function(a){var b=a[c];return b?(delete d[b],a[c]=null,!0):!1}):(e=function(a,b){var d=a[c];!d&&b&&(d=a[c]={});return d},f=function(a){return a[c]?(delete a[c],!0):!1});return{get:function(a,b){var c=e(a,!1);return c&&c[b]},set:function(a,b,c){(a=e(a,c!==p))&&(a[b]=c)},Tb:function(a,b,c){a=e(a,!0);return a[b]||(a[b]=c)},clear:f,Z:function(){return b++ +c}}};a.b(\"utils.domData\",a.a.g);a.b(\"utils.domData.clear\",a.a.g.clear);a.a.I=new function(){function b(b,c){var d=a.a.g.get(b,e);\nd===p&&c&&(d=[],a.a.g.set(b,e,d));return d}function c(c){var e=b(c,!1);if(e)for(var e=e.slice(0),f=0;f<e.length;f++)e[f](c);a.a.g.clear(c);a.a.I.cleanExternalData(c);g[c.nodeType]&&d(c.childNodes,!0)}function d(b,d){for(var e=[],k,f=0;f<b.length;f++)if(!d||8===b[f].nodeType)if(c(e[e.length]=k=b[f]),b[f]!==k)for(;f--&&-1==a.a.A(e,b[f]););}var e=a.a.g.Z(),f={1:!0,8:!0,9:!0},g={1:!0,9:!0};return{za:function(a,c){if(\"function\"!=typeof c)throw Error(\"Callback must be a function\");b(a,!0).push(c)},xb:function(c,\nd){var f=b(c,!1);f&&(a.a.hb(f,d),0==f.length&&a.a.g.set(c,e,p))},na:function(a){f[a.nodeType]&&(c(a),g[a.nodeType]&&d(a.getElementsByTagName(\"*\")));return a},removeNode:function(b){a.na(b);b.parentNode&&b.parentNode.removeChild(b)},cleanExternalData:function(a){v&&\"function\"==typeof v.cleanData&&v.cleanData([a])}}};a.na=a.a.I.na;a.removeNode=a.a.I.removeNode;a.b(\"cleanNode\",a.na);a.b(\"removeNode\",a.removeNode);a.b(\"utils.domNodeDisposal\",a.a.I);a.b(\"utils.domNodeDisposal.addDisposeCallback\",a.a.I.za);\na.b(\"utils.domNodeDisposal.removeDisposeCallback\",a.a.I.xb);(function(){var b=[0,\"\",\"\"],c=[1,\"<table>\",\"</table>\"],d=[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],e=[1,\"<select multiple='multiple'>\",\"</select>\"],f={thead:c,tbody:c,tfoot:c,tr:[2,\"<table><tbody>\",\"</tbody></table>\"],td:d,th:d,option:e,optgroup:e},g=8>=a.a.W;a.a.ta=function(c,d){var e;if(v)if(v.parseHTML)e=v.parseHTML(c,d)||[];else{if((e=v.clean([c],d))&&e[0]){for(var k=e[0];k.parentNode&&11!==k.parentNode.nodeType;)k=k.parentNode;\nk.parentNode&&k.parentNode.removeChild(k)}}else{(e=d)||(e=w);var k=e.parentWindow||e.defaultView||z,q=a.a.Cb(c).toLowerCase(),n=e.createElement(\"div\"),r;r=(q=q.match(/^(?:\\x3c!--.*?--\\x3e\\s*?)*?<([a-z]+)[\\s>]/))&&f[q[1]]||b;q=r[0];r=\"ignored<div>\"+r[1]+c+r[2]+\"</div>\";\"function\"==typeof k.innerShiv?n.appendChild(k.innerShiv(r)):(g&&e.body.appendChild(n),n.innerHTML=r,g&&n.parentNode.removeChild(n));for(;q--;)n=n.lastChild;e=a.a.la(n.lastChild.childNodes)}return e};a.a.Ld=function(b,c){var d=a.a.ta(b,\nc);return d.length&&d[0].parentElement||a.a.Xb(d)};a.a.dc=function(b,c){a.a.Sb(b);c=a.a.c(c);if(null!==c&&c!==p)if(\"string\"!=typeof c&&(c=c.toString()),v)v(b).html(c);else for(var d=a.a.ta(c,b.ownerDocument),e=0;e<d.length;e++)b.appendChild(d[e])}})();a.b(\"utils.parseHtmlFragment\",a.a.ta);a.b(\"utils.setHtml\",a.a.dc);a.aa=function(){function b(c,e){if(c)if(8==c.nodeType){var f=a.aa.Tc(c.nodeValue);null!=f&&e.push({sd:c,Jd:f})}else if(1==c.nodeType)for(var f=0,g=c.childNodes,h=g.length;f<h;f++)b(g[f],\ne)}var c={};return{Wb:function(a){if(\"function\"!=typeof a)throw Error(\"You can only pass a function to ko.memoization.memoize()\");var b=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);c[b]=a;return\"\\x3c!--[ko_memo:\"+b+\"]--\\x3e\"},ad:function(a,b){var f=c[a];if(f===p)throw Error(\"Couldn't find any memo with ID \"+a+\". Perhaps it's already been unmemoized.\");try{return f.apply(null,b||[]),!0}finally{delete c[a]}},bd:function(c,e){var f=\n[];b(c,f);for(var g=0,h=f.length;g<h;g++){var m=f[g].sd,l=[m];e&&a.a.gb(l,e);a.aa.ad(f[g].Jd,l);m.nodeValue=\"\";m.parentNode&&m.parentNode.removeChild(m)}},Tc:function(a){return(a=a.match(/^\\[ko_memo\\:(.*?)\\]$/))?a[1]:null}}}();a.b(\"memoization\",a.aa);a.b(\"memoization.memoize\",a.aa.Wb);a.b(\"memoization.unmemoize\",a.aa.ad);a.b(\"memoization.parseMemoText\",a.aa.Tc);a.b(\"memoization.unmemoizeDomNodeAndDescendants\",a.aa.bd);a.ma=function(){function b(){if(f)for(var b=f,c=0,d;h<f;)if(d=e[h++]){if(h>b){if(5E3<=\n++c){h=f;a.a.Fc(Error(\"'Too much recursion' after processing \"+c+\" task groups.\"));break}b=f}try{d()}catch(g){a.a.Fc(g)}}}function c(){b();h=f=e.length=0}var d,e=[],f=0,g=1,h=0;z.MutationObserver?d=function(a){var b=w.createElement(\"div\");(new MutationObserver(a)).observe(b,{attributes:!0});return function(){b.classList.toggle(\"foo\")}}(c):d=w&&\"onreadystatechange\"in w.createElement(\"script\")?function(a){var b=w.createElement(\"script\");b.onreadystatechange=function(){b.onreadystatechange=null;w.documentElement.removeChild(b);\nb=null;a()};w.documentElement.appendChild(b)}:function(a){setTimeout(a,0)};return{scheduler:d,yb:function(b){f||a.ma.scheduler(c);e[f++]=b;return g++},cancel:function(a){a=a-(g-f);a>=h&&a<f&&(e[a]=null)},resetForTesting:function(){var a=f-h;h=f=e.length=0;return a},Rd:b}}();a.b(\"tasks\",a.ma);a.b(\"tasks.schedule\",a.ma.yb);a.b(\"tasks.runEarly\",a.ma.Rd);a.Ta={throttle:function(b,c){b.throttleEvaluation=c;var d=null;return a.$({read:b,write:function(e){clearTimeout(d);d=a.a.setTimeout(function(){b(e)},\nc)}})},rateLimit:function(a,c){var d,e,f;\"number\"==typeof c?d=c:(d=c.timeout,e=c.method);a.Hb=!1;f=\"function\"==typeof e?e:\"notifyWhenChangesStop\"==e?Y:X;a.tb(function(a){return f(a,d,c)})},deferred:function(b,c){if(!0!==c)throw Error(\"The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.\");b.Hb||(b.Hb=!0,b.tb(function(c){var e,f=!1;return function(){if(!f){a.ma.cancel(e);e=a.ma.yb(c);try{f=!0,b.notifySubscribers(p,\"dirty\")}finally{f=\n!1}}}}))},notify:function(a,c){a.equalityComparer=\"always\"==c?null:K}};var W={undefined:1,\"boolean\":1,number:1,string:1};a.b(\"extenders\",a.Ta);a.gc=function(b,c,d){this.da=b;this.kc=c;this.lc=d;this.Ib=!1;this.ab=this.Jb=null;a.J(this,\"dispose\",this.s);a.J(this,\"disposeWhenNodeIsRemoved\",this.l)};a.gc.prototype.s=function(){this.Ib||(this.ab&&a.a.I.xb(this.Jb,this.ab),this.Ib=!0,this.lc(),this.da=this.kc=this.lc=this.Jb=this.ab=null)};a.gc.prototype.l=function(b){this.Jb=b;a.a.I.za(b,this.ab=this.s.bind(this))};\na.R=function(){a.a.zb(this,D);D.ob(this)};var D={ob:function(a){a.S={change:[]};a.rc=1},subscribe:function(b,c,d){var e=this;d=d||\"change\";var f=new a.gc(e,c?b.bind(c):b,function(){a.a.hb(e.S[d],f);e.cb&&e.cb(d)});e.Qa&&e.Qa(d);e.S[d]||(e.S[d]=[]);e.S[d].push(f);return f},notifySubscribers:function(b,c){c=c||\"change\";\"change\"===c&&this.Gb();if(this.Wa(c)){var d=\"change\"===c&&this.dd||this.S[c].slice(0);try{a.v.wc();for(var e=0,f;f=d[e];++e)f.Ib||f.kc(b)}finally{a.v.end()}}},mb:function(){return this.rc},\nCd:function(a){return this.mb()!==a},Gb:function(){++this.rc},tb:function(b){var c=this,d=a.N(c),e,f,g,h,m;c.bb||(c.bb=c.notifySubscribers,c.notifySubscribers=Z);var l=b(function(){c.Ka=!1;d&&h===c&&(h=c.mc?c.mc():c());var a=f||m&&c.qb(g,h);m=f=e=!1;a&&c.bb(g=h)});c.pc=function(a,b){b&&c.Ka||(m=!b);c.dd=c.S.change.slice(0);c.Ka=e=!0;h=a;l()};c.oc=function(a){e||(g=a,c.bb(a,\"beforeChange\"))};c.qc=function(){m=!0};c.fd=function(){c.qb(g,c.w(!0))&&(f=!0)}},Wa:function(a){return this.S[a]&&this.S[a].length},\nAd:function(b){if(b)return this.S[b]&&this.S[b].length||0;var c=0;a.a.O(this.S,function(a,b){\"dirty\"!==a&&(c+=b.length)});return c},qb:function(a,c){return!this.equalityComparer||!this.equalityComparer(a,c)},toString:function(){return\"[object Object]\"},extend:function(b){var c=this;b&&a.a.O(b,function(b,e){var f=a.Ta[b];\"function\"==typeof f&&(c=f(c,e)||c)});return c}};a.J(D,\"init\",D.ob);a.J(D,\"subscribe\",D.subscribe);a.J(D,\"extend\",D.extend);a.J(D,\"getSubscriptionsCount\",D.Ad);a.a.Ba&&a.a.setPrototypeOf(D,\nFunction.prototype);a.R.fn=D;a.Pc=function(a){return null!=a&&\"function\"==typeof a.subscribe&&\"function\"==typeof a.notifySubscribers};a.b(\"subscribable\",a.R);a.b(\"isSubscribable\",a.Pc);a.U=a.v=function(){function b(a){d.push(e);e=a}function c(){e=d.pop()}var d=[],e,f=0;return{wc:b,end:c,ac:function(b){if(e){if(!a.Pc(b))throw Error(\"Only subscribable things can act as dependencies\");e.nd.call(e.od,b,b.ed||(b.ed=++f))}},K:function(a,d,e){try{return b(),a.apply(d,e||[])}finally{c()}},pa:function(){if(e)return e.o.pa()},\nVa:function(){if(e)return e.o.Va()},rb:function(){if(e)return e.rb},o:function(){if(e)return e.o}}}();a.b(\"computedContext\",a.U);a.b(\"computedContext.getDependenciesCount\",a.U.pa);a.b(\"computedContext.getDependencies\",a.U.Va);a.b(\"computedContext.isInitial\",a.U.rb);a.b(\"computedContext.registerDependency\",a.U.ac);a.b(\"ignoreDependencies\",a.Wd=a.v.K);var I=a.a.Da(\"_latestValue\");a.sa=function(b){function c(){if(0<arguments.length)return c.qb(c[I],arguments[0])&&(c.xa(),c[I]=arguments[0],c.wa()),this;\na.v.ac(c);return c[I]}c[I]=b;a.a.Ba||a.a.extend(c,a.R.fn);a.R.fn.ob(c);a.a.zb(c,F);a.options.deferUpdates&&a.Ta.deferred(c,!0);return c};var F={equalityComparer:K,w:function(){return this[I]},wa:function(){this.notifySubscribers(this[I],\"spectate\");this.notifySubscribers(this[I])},xa:function(){this.notifySubscribers(this[I],\"beforeChange\")}};a.a.Ba&&a.a.setPrototypeOf(F,a.R.fn);var G=a.sa.Na=\"__ko_proto__\";F[G]=a.sa;a.N=function(b){if((b=\"function\"==typeof b&&b[G])&&b!==F[G]&&b!==a.o.fn[G])throw Error(\"Invalid object that looks like an observable; possibly from another Knockout instance\");\nreturn!!b};a.Ya=function(b){return\"function\"==typeof b&&(b[G]===F[G]||b[G]===a.o.fn[G]&&b.Mc)};a.b(\"observable\",a.sa);a.b(\"isObservable\",a.N);a.b(\"isWriteableObservable\",a.Ya);a.b(\"isWritableObservable\",a.Ya);a.b(\"observable.fn\",F);a.J(F,\"peek\",F.w);a.J(F,\"valueHasMutated\",F.wa);a.J(F,\"valueWillMutate\",F.xa);a.Ia=function(b){b=b||[];if(\"object\"!=typeof b||!(\"length\"in b))throw Error(\"The argument passed when initializing an observable array must be an array, or null, or undefined.\");b=a.sa(b);a.a.zb(b,\na.Ia.fn);return b.extend({trackArrayChanges:!0})};a.Ia.fn={remove:function(b){for(var c=this.w(),d=[],e=\"function\"!=typeof b||a.N(b)?function(a){return a===b}:b,f=0;f<c.length;f++){var g=c[f];if(e(g)){0===d.length&&this.xa();if(c[f]!==g)throw Error(\"Array modified during remove; cannot remove item\");d.push(g);c.splice(f,1);f--}}d.length&&this.wa();return d},removeAll:function(b){if(b===p){var c=this.w(),d=c.slice(0);this.xa();c.splice(0,c.length);this.wa();return d}return b?this.remove(function(c){return 0<=\na.a.A(b,c)}):[]},destroy:function(b){var c=this.w(),d=\"function\"!=typeof b||a.N(b)?function(a){return a===b}:b;this.xa();for(var e=c.length-1;0<=e;e--){var f=c[e];d(f)&&(f._destroy=!0)}this.wa()},destroyAll:function(b){return b===p?this.destroy(function(){return!0}):b?this.destroy(function(c){return 0<=a.a.A(b,c)}):[]},indexOf:function(b){var c=this();return a.a.A(c,b)},replace:function(a,c){var d=this.indexOf(a);0<=d&&(this.xa(),this.w()[d]=c,this.wa())},sorted:function(a){var c=this().slice(0);\nreturn a?c.sort(a):c.sort()},reversed:function(){return this().slice(0).reverse()}};a.a.Ba&&a.a.setPrototypeOf(a.Ia.fn,a.sa.fn);a.a.C(\"pop push reverse shift sort splice unshift\".split(\" \"),function(b){a.Ia.fn[b]=function(){var a=this.w();this.xa();this.yc(a,b,arguments);var d=a[b].apply(a,arguments);this.wa();return d===a?this:d}});a.a.C([\"slice\"],function(b){a.Ia.fn[b]=function(){var a=this();return a[b].apply(a,arguments)}});a.Oc=function(b){return a.N(b)&&\"function\"==typeof b.remove&&\"function\"==\ntypeof b.push};a.b(\"observableArray\",a.Ia);a.b(\"isObservableArray\",a.Oc);a.Ta.trackArrayChanges=function(b,c){function d(){function c(){if(h){var d=[].concat(b.w()||[]);if(b.Wa(\"arrayChange\")){var e;if(!f||1<h)f=a.a.Ob(m,d,b.Nb);e=f}m=d;f=null;h=0;e&&e.length&&b.notifySubscribers(e,\"arrayChange\")}}e?c():(e=!0,l=b.notifySubscribers,b.notifySubscribers=function(a,b){b&&\"change\"!==b||++h;return l.apply(this,arguments)},m=[].concat(b.w()||[]),f=null,g=b.subscribe(c))}b.Nb={};c&&\"object\"==typeof c&&a.a.extend(b.Nb,\nc);b.Nb.sparse=!0;if(!b.yc){var e=!1,f=null,g,h=0,m,l,k=b.Qa,q=b.cb;b.Qa=function(a){k&&k.call(b,a);\"arrayChange\"===a&&d()};b.cb=function(a){q&&q.call(b,a);\"arrayChange\"!==a||b.Wa(\"arrayChange\")||(l&&(b.notifySubscribers=l,l=p),g&&g.s(),g=null,e=!1,m=p)};b.yc=function(b,c,d){function k(a,b,c){return l[l.length]={status:a,value:b,index:c}}if(e&&!h){var l=[],g=b.length,q=d.length,m=0;switch(c){case \"push\":m=g;case \"unshift\":for(c=0;c<q;c++)k(\"added\",d[c],m+c);break;case \"pop\":m=g-1;case \"shift\":g&&\nk(\"deleted\",b[m],m);break;case \"splice\":c=Math.min(Math.max(0,0>d[0]?g+d[0]:d[0]),g);for(var g=1===q?g:Math.min(c+(d[1]||0),g),q=c+q-2,m=Math.max(g,q),U=[],L=[],p=2;c<m;++c,++p)c<g&&L.push(k(\"deleted\",b[c],c)),c<q&&U.push(k(\"added\",d[p],c));a.a.Jc(L,U);break;default:return}f=l}}}};var t=a.a.Da(\"_state\");a.o=a.$=function(b,c,d){function e(){if(0<arguments.length){if(\"function\"===typeof f)f.apply(g.lb,arguments);else throw Error(\"Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.\");\nreturn this}g.qa||a.v.ac(e);(g.ka||g.G&&e.Xa())&&e.ha();return g.X}\"object\"===typeof b?d=b:(d=d||{},b&&(d.read=b));if(\"function\"!=typeof d.read)throw Error(\"Pass a function that returns the value of the ko.computed\");var f=d.write,g={X:p,ra:!0,ka:!0,pb:!1,hc:!1,qa:!1,vb:!1,G:!1,Vc:d.read,lb:c||d.owner,l:d.disposeWhenNodeIsRemoved||d.l||null,Sa:d.disposeWhen||d.Sa,Qb:null,F:{},V:0,Hc:null};e[t]=g;e.Mc=\"function\"===typeof f;a.a.Ba||a.a.extend(e,a.R.fn);a.R.fn.ob(e);a.a.zb(e,C);d.pure?(g.vb=!0,g.G=!0,\na.a.extend(e,da)):d.deferEvaluation&&a.a.extend(e,ea);a.options.deferUpdates&&a.Ta.deferred(e,!0);g.l&&(g.hc=!0,g.l.nodeType||(g.l=null));g.G||d.deferEvaluation||e.ha();g.l&&e.ja()&&a.a.I.za(g.l,g.Qb=function(){e.s()});return e};var C={equalityComparer:K,pa:function(){return this[t].V},Va:function(){var b=[];a.a.O(this[t].F,function(a,d){b[d.La]=d.da});return b},Ub:function(b){if(!this[t].V)return!1;var c=this.Va();return-1!==a.a.A(c,b)?!0:!!a.a.Lb(c,function(a){return a.Ub&&a.Ub(b)})},tc:function(a,\nc,d){if(this[t].vb&&c===this)throw Error(\"A 'pure' computed must not be called recursively\");this[t].F[a]=d;d.La=this[t].V++;d.Ma=c.mb()},Xa:function(){var a,c,d=this[t].F;for(a in d)if(Object.prototype.hasOwnProperty.call(d,a)&&(c=d[a],this.Ja&&c.da.Ka||c.da.Cd(c.Ma)))return!0},Id:function(){this.Ja&&!this[t].pb&&this.Ja(!1)},ja:function(){var a=this[t];return a.ka||0<a.V},Qd:function(){this.Ka?this[t].ka&&(this[t].ra=!0):this.Gc()},Zc:function(a){if(a.Hb){var c=a.subscribe(this.Id,this,\"dirty\"),\nd=a.subscribe(this.Qd,this);return{da:a,s:function(){c.s();d.s()}}}return a.subscribe(this.Gc,this)},Gc:function(){var b=this,c=b.throttleEvaluation;c&&0<=c?(clearTimeout(this[t].Hc),this[t].Hc=a.a.setTimeout(function(){b.ha(!0)},c)):b.Ja?b.Ja(!0):b.ha(!0)},ha:function(b){var c=this[t],d=c.Sa,e=!1;if(!c.pb&&!c.qa){if(c.l&&!a.a.Rb(c.l)||d&&d()){if(!c.hc){this.s();return}}else c.hc=!1;c.pb=!0;try{e=this.yd(b)}finally{c.pb=!1}return e}},yd:function(b){var c=this[t],d=!1,e=c.vb?p:!c.V,d={pd:this,kb:c.F,\nPb:c.V};a.v.wc({od:d,nd:ba,o:this,rb:e});c.F={};c.V=0;var f=this.xd(c,d);c.V?d=this.qb(c.X,f):(this.s(),d=!0);d&&(c.G?this.Gb():this.notifySubscribers(c.X,\"beforeChange\"),c.X=f,this.notifySubscribers(c.X,\"spectate\"),!c.G&&b&&this.notifySubscribers(c.X),this.qc&&this.qc());e&&this.notifySubscribers(c.X,\"awake\");return d},xd:function(b,c){try{var d=b.Vc;return b.lb?d.call(b.lb):d()}finally{a.v.end(),c.Pb&&!b.G&&a.a.O(c.kb,aa),b.ra=b.ka=!1}},w:function(a){var c=this[t];(c.ka&&(a||!c.V)||c.G&&this.Xa())&&\nthis.ha();return c.X},tb:function(b){a.R.fn.tb.call(this,b);this.mc=function(){this[t].G||(this[t].ra?this.ha():this[t].ka=!1);return this[t].X};this.Ja=function(a){this.oc(this[t].X);this[t].ka=!0;a&&(this[t].ra=!0);this.pc(this,!a)}},s:function(){var b=this[t];!b.G&&b.F&&a.a.O(b.F,function(a,b){b.s&&b.s()});b.l&&b.Qb&&a.a.I.xb(b.l,b.Qb);b.F=p;b.V=0;b.qa=!0;b.ra=!1;b.ka=!1;b.G=!1;b.l=p;b.Sa=p;b.Vc=p;this.Mc||(b.lb=p)}},da={Qa:function(b){var c=this,d=c[t];if(!d.qa&&d.G&&\"change\"==b){d.G=!1;if(d.ra||\nc.Xa())d.F=null,d.V=0,c.ha()&&c.Gb();else{var e=[];a.a.O(d.F,function(a,b){e[b.La]=a});a.a.C(e,function(a,b){var e=d.F[a],m=c.Zc(e.da);m.La=b;m.Ma=e.Ma;d.F[a]=m});c.Xa()&&c.ha()&&c.Gb()}d.qa||c.notifySubscribers(d.X,\"awake\")}},cb:function(b){var c=this[t];c.qa||\"change\"!=b||this.Wa(\"change\")||(a.a.O(c.F,function(a,b){b.s&&(c.F[a]={da:b.da,La:b.La,Ma:b.Ma},b.s())}),c.G=!0,this.notifySubscribers(p,\"asleep\"))},mb:function(){var b=this[t];b.G&&(b.ra||this.Xa())&&this.ha();return a.R.fn.mb.call(this)}},\nea={Qa:function(a){\"change\"!=a&&\"beforeChange\"!=a||this.w()}};a.a.Ba&&a.a.setPrototypeOf(C,a.R.fn);var N=a.sa.Na;C[N]=a.o;a.Nc=function(a){return\"function\"==typeof a&&a[N]===C[N]};a.Ed=function(b){return a.Nc(b)&&b[t]&&b[t].vb};a.b(\"computed\",a.o);a.b(\"dependentObservable\",a.o);a.b(\"isComputed\",a.Nc);a.b(\"isPureComputed\",a.Ed);a.b(\"computed.fn\",C);a.J(C,\"peek\",C.w);a.J(C,\"dispose\",C.s);a.J(C,\"isActive\",C.ja);a.J(C,\"getDependenciesCount\",C.pa);a.J(C,\"getDependencies\",C.Va);a.wb=function(b,c){if(\"function\"===\ntypeof b)return a.o(b,c,{pure:!0});b=a.a.extend({},b);b.pure=!0;return a.o(b,c)};a.b(\"pureComputed\",a.wb);(function(){function b(a,f,g){g=g||new d;a=f(a);if(\"object\"!=typeof a||null===a||a===p||a instanceof RegExp||a instanceof Date||a instanceof String||a instanceof Number||a instanceof Boolean)return a;var h=a instanceof Array?[]:{};g.save(a,h);c(a,function(c){var d=f(a[c]);switch(typeof d){case \"boolean\":case \"number\":case \"string\":case \"function\":h[c]=d;break;case \"object\":case \"undefined\":var k=\ng.get(d);h[c]=k!==p?k:b(d,f,g)}});return h}function c(a,b){if(a instanceof Array){for(var c=0;c<a.length;c++)b(c);\"function\"==typeof a.toJSON&&b(\"toJSON\")}else for(c in a)b(c)}function d(){this.keys=[];this.values=[]}a.$c=function(c){if(0==arguments.length)throw Error(\"When calling ko.toJS, pass the object you want to convert.\");return b(c,function(b){for(var c=0;a.N(b)&&10>c;c++)b=b();return b})};a.toJSON=function(b,c,d){b=a.$c(b);return a.a.fc(b,c,d)};d.prototype={constructor:d,save:function(b,\nc){var d=a.a.A(this.keys,b);0<=d?this.values[d]=c:(this.keys.push(b),this.values.push(c))},get:function(b){b=a.a.A(this.keys,b);return 0<=b?this.values[b]:p}}})();a.b(\"toJS\",a.$c);a.b(\"toJSON\",a.toJSON);a.Vd=function(b,c,d){function e(c){var e=a.wb(b,d).extend({Ga:\"always\"}),h=e.subscribe(function(a){a&&(h.s(),c(a))});e.notifySubscribers(e.w());return h}return\"function\"!==typeof Promise||c?e(c.bind(d)):new Promise(e)};a.b(\"when\",a.Vd);(function(){a.u={L:function(b){switch(a.a.P(b)){case \"option\":return!0===\nb.__ko__hasDomDataOptionValue__?a.a.g.get(b,a.f.options.Yb):7>=a.a.W?b.getAttributeNode(\"value\")&&b.getAttributeNode(\"value\").specified?b.value:b.text:b.value;case \"select\":return 0<=b.selectedIndex?a.u.L(b.options[b.selectedIndex]):p;default:return b.value}},ya:function(b,c,d){switch(a.a.P(b)){case \"option\":\"string\"===typeof c?(a.a.g.set(b,a.f.options.Yb,p),\"__ko__hasDomDataOptionValue__\"in b&&delete b.__ko__hasDomDataOptionValue__,b.value=c):(a.a.g.set(b,a.f.options.Yb,c),b.__ko__hasDomDataOptionValue__=\n!0,b.value=\"number\"===typeof c?c:\"\");break;case \"select\":if(\"\"===c||null===c)c=p;for(var e=-1,f=0,g=b.options.length,h;f<g;++f)if(h=a.u.L(b.options[f]),h==c||\"\"===h&&c===p){e=f;break}if(d||0<=e||c===p&&1<b.size)b.selectedIndex=e,6===a.a.W&&a.a.setTimeout(function(){b.selectedIndex=e},0);break;default:if(null===c||c===p)c=\"\";b.value=c}}}})();a.b(\"selectExtensions\",a.u);a.b(\"selectExtensions.readValue\",a.u.L);a.b(\"selectExtensions.writeValue\",a.u.ya);a.m=function(){function b(b){b=a.a.Cb(b);123===b.charCodeAt(0)&&\n(b=b.slice(1,-1));b+=\"\\n,\";var c=[],d=b.match(e),q,n=[],h=0;if(1<d.length){for(var y=0,A;A=d[y];++y){var u=A.charCodeAt(0);if(44===u){if(0>=h){c.push(q&&n.length?{key:q,value:n.join(\"\")}:{unknown:q||n.join(\"\")});q=h=0;n=[];continue}}else if(58===u){if(!h&&!q&&1===n.length){q=n.pop();continue}}else if(47===u&&1<A.length&&(47===A.charCodeAt(1)||42===A.charCodeAt(1)))continue;else 47===u&&y&&1<A.length?(u=d[y-1].match(f))&&!g[u[0]]&&(b=b.substr(b.indexOf(A)+1),d=b.match(e),y=-1,A=\"/\"):40===u||123===\nu||91===u?++h:41===u||125===u||93===u?--h:q||n.length||34!==u&&39!==u||(A=A.slice(1,-1));n.push(A)}if(0<h)throw Error(\"Unbalanced parentheses, braces, or brackets\");}return c}var c=[\"true\",\"false\",\"null\",\"undefined\"],d=/^(?:[$_a-z][$\\w]*|(.+)(\\.\\s*[$_a-z][$\\w]*|\\[.+\\]))$/i,e=RegExp(\"\\\"(?:\\\\\\\\.|[^\\\"])*\\\"|'(?:\\\\\\\\.|[^'])*'|`(?:\\\\\\\\.|[^`])*`|/\\\\*(?:[^*]|\\\\*+[^*/])*\\\\*+/|//.*\\n|/(?:\\\\\\\\.|[^/])+/w*|[^\\\\s:,/][^,\\\"'`{}()/:[\\\\]]*[^\\\\s,\\\"'`{}()/:[\\\\]]|[^\\\\s]\",\"g\"),f=/[\\])\"'A-Za-z0-9_$]+$/,g={\"in\":1,\"return\":1,\n\"typeof\":1},h={};return{Ra:[],va:h,Zb:b,ub:function(e,f){function k(b,e){var f;if(!y){var l=a.getBindingHandler(b);if(l&&l.preprocess&&!(e=l.preprocess(e,b,k)))return;if(l=h[b])f=e,0<=a.a.A(c,f)?f=!1:(l=f.match(d),f=null===l?!1:l[1]?\"Object(\"+l[1]+\")\"+l[2]:f),l=f;l&&n.push(\"'\"+(\"string\"==typeof h[b]?h[b]:b)+\"':function(_z){\"+f+\"=_z}\")}g&&(e=\"function(){return \"+e+\" }\");q.push(\"'\"+b+\"':\"+e)}f=f||{};var q=[],n=[],g=f.valueAccessors,y=f.bindingParams,A=\"string\"===typeof e?b(e):e;a.a.C(A,function(a){k(a.key||\na.unknown,a.value)});n.length&&k(\"_ko_property_writers\",\"{\"+n.join(\",\")+\" }\");return q.join(\",\")},Hd:function(a,b){for(var c=0;c<a.length;c++)if(a[c].key==b)return!0;return!1},$a:function(b,c,d,e,f){if(b&&a.N(b))!a.Ya(b)||f&&b.w()===e||b(e);else if((b=c.get(\"_ko_property_writers\"))&&b[d])b[d](e)}}}();a.b(\"expressionRewriting\",a.m);a.b(\"expressionRewriting.bindingRewriteValidators\",a.m.Ra);a.b(\"expressionRewriting.parseObjectLiteral\",a.m.Zb);a.b(\"expressionRewriting.preProcessBindings\",a.m.ub);a.b(\"expressionRewriting._twoWayBindings\",\na.m.va);a.b(\"jsonExpressionRewriting\",a.m);a.b(\"jsonExpressionRewriting.insertPropertyAccessorsIntoJson\",a.m.ub);(function(){function b(a){return 8==a.nodeType&&g.test(f?a.text:a.nodeValue)}function c(a){return 8==a.nodeType&&h.test(f?a.text:a.nodeValue)}function d(d,e){for(var f=d,g=1,h=[];f=f.nextSibling;){if(c(f)&&(a.a.g.set(f,l,!0),g--,0===g))return h;h.push(f);b(f)&&g++}if(!e)throw Error(\"Cannot find closing comment tag to match: \"+d.nodeValue);return null}function e(a,b){var c=d(a,b);return c?\n0<c.length?c[c.length-1].nextSibling:a.nextSibling:null}var f=w&&\"\\x3c!--test--\\x3e\"===w.createComment(\"test\").text,g=f?/^\\x3c!--\\s*ko(?:\\s+([\\s\\S]+))?\\s*--\\x3e$/:/^\\s*ko(?:\\s+([\\s\\S]+))?\\s*$/,h=f?/^\\x3c!--\\s*\\/ko\\s*--\\x3e$/:/^\\s*\\/ko\\s*$/,m={ul:!0,ol:!0},l=\"__ko_matchedEndComment__\";a.h={ea:{},childNodes:function(a){return b(a)?d(a):a.childNodes},Ea:function(c){if(b(c)){c=a.h.childNodes(c);for(var d=0,e=c.length;d<e;d++)a.removeNode(c[d])}else a.a.Sb(c)},ua:function(c,d){if(b(c)){a.h.Ea(c);for(var e=\nc.nextSibling,f=0,l=d.length;f<l;f++)e.parentNode.insertBefore(d[f],e)}else a.a.ua(c,d)},Uc:function(a,c){b(a)?a.parentNode.insertBefore(c,a.nextSibling):a.firstChild?a.insertBefore(c,a.firstChild):a.appendChild(c)},Vb:function(c,d,e){e?b(c)?c.parentNode.insertBefore(d,e.nextSibling):e.nextSibling?c.insertBefore(d,e.nextSibling):c.appendChild(d):a.h.Uc(c,d)},firstChild:function(a){if(b(a))return!a.nextSibling||c(a.nextSibling)?null:a.nextSibling;if(a.firstChild&&c(a.firstChild))throw Error(\"Found invalid end comment, as the first child of \"+\na);return a.firstChild},nextSibling:function(d){b(d)&&(d=e(d));if(d.nextSibling&&c(d.nextSibling)){var f=d.nextSibling;if(c(f)&&!a.a.g.get(f,l))throw Error(\"Found end comment without a matching opening comment, as child of \"+d);return null}return d.nextSibling},Bd:b,Ud:function(a){return(a=(f?a.text:a.nodeValue).match(g))?a[1]:null},Rc:function(d){if(m[a.a.P(d)]){var f=d.firstChild;if(f){do if(1===f.nodeType){var l;l=f.firstChild;var g=null;if(l){do if(g)g.push(l);else if(b(l)){var h=e(l,!0);h?l=\nh:g=[l]}else c(l)&&(g=[l]);while(l=l.nextSibling)}if(l=g)for(g=f.nextSibling,h=0;h<l.length;h++)g?d.insertBefore(l[h],g):d.appendChild(l[h])}while(f=f.nextSibling)}}}}})();a.b(\"virtualElements\",a.h);a.b(\"virtualElements.allowedBindings\",a.h.ea);a.b(\"virtualElements.emptyNode\",a.h.Ea);a.b(\"virtualElements.insertAfter\",a.h.Vb);a.b(\"virtualElements.prepend\",a.h.Uc);a.b(\"virtualElements.setDomNodeChildren\",a.h.ua);(function(){a.ga=function(){this.md={}};a.a.extend(a.ga.prototype,{nodeHasBindings:function(b){switch(b.nodeType){case 1:return null!=\nb.getAttribute(\"data-bind\")||a.i.getComponentNameForNode(b);case 8:return a.h.Bd(b);default:return!1}},getBindings:function(b,c){var d=this.getBindingsString(b,c),d=d?this.parseBindingsString(d,c,b):null;return a.i.sc(d,b,c,!1)},getBindingAccessors:function(b,c){var d=this.getBindingsString(b,c),d=d?this.parseBindingsString(d,c,b,{valueAccessors:!0}):null;return a.i.sc(d,b,c,!0)},getBindingsString:function(b){switch(b.nodeType){case 1:return b.getAttribute(\"data-bind\");case 8:return a.h.Ud(b);default:return null}},\nparseBindingsString:function(b,c,d,e){try{var f=this.md,g=b+(e&&e.valueAccessors||\"\"),h;if(!(h=f[g])){var m,l=\"with($context){with($data||{}){return{\"+a.m.ub(b,e)+\"}}}\";m=new Function(\"$context\",\"$element\",l);h=f[g]=m}return h(c,d)}catch(k){throw k.message=\"Unable to parse bindings.\\nBindings value: \"+b+\"\\nMessage: \"+k.message,k;}}});a.ga.instance=new a.ga})();a.b(\"bindingProvider\",a.ga);(function(){function b(b){var c=(b=a.a.g.get(b,B))&&b.M;c&&(b.M=null,c.Sc())}function c(c,d,e){this.node=c;this.xc=\nd;this.ib=[];this.T=!1;d.M||a.a.I.za(c,b);e&&e.M&&(e.M.ib.push(c),this.Kb=e)}function d(a){return function(){return a}}function e(a){return a()}function f(b){return a.a.Ha(a.v.K(b),function(a,c){return function(){return b()[c]}})}function g(b,c,e){return\"function\"===typeof b?f(b.bind(null,c,e)):a.a.Ha(b,d)}function h(a,b){return f(this.getBindings.bind(this,a,b))}function m(b,c){var d=a.h.firstChild(c);if(d){var e,f=a.ga.instance,k=f.preprocessNode;if(k){for(;e=d;)d=a.h.nextSibling(e),k.call(f,e);\nd=a.h.firstChild(c)}for(;e=d;)d=a.h.nextSibling(e),l(b,e)}a.j.Ga(c,a.j.T)}function l(b,c){var d=b,e=1===c.nodeType;e&&a.h.Rc(c);if(e||a.ga.instance.nodeHasBindings(c))d=q(c,null,b).bindingContextForDescendants;d&&!u[a.a.P(c)]&&m(d,c)}function k(b){var c=[],d={},e=[];a.a.O(b,function ca(f){if(!d[f]){var l=a.getBindingHandler(f);l&&(l.after&&(e.push(f),a.a.C(l.after,function(c){if(b[c]){if(-1!==a.a.A(e,c))throw Error(\"Cannot combine the following bindings, because they have a cyclic dependency: \"+e.join(\", \"));\nca(c)}}),e.length--),c.push({key:f,Lc:l}));d[f]=!0}});return c}function q(b,c,d){var f=a.a.g.Tb(b,B,{}),l=f.gd;if(!c){if(l)throw Error(\"You cannot apply bindings multiple times to the same element.\");f.gd=!0}l||(f.context=d);var g;if(c&&\"function\"!==typeof c)g=c;else{var q=a.ga.instance,n=q.getBindingAccessors||h,m=a.$(function(){if(g=c?c(d,b):n.call(q,b,d)){if(d[r])d[r]();if(d[A])d[A]()}return g},null,{l:b});g&&m.ja()||(m=null)}var y=d,u;if(g){var J=function(){return a.a.Ha(m?m():g,e)},t=m?function(a){return function(){return e(m()[a])}}:\nfunction(a){return g[a]};J.get=function(a){return g[a]&&e(t(a))};J.has=function(a){return a in g};a.j.T in g&&a.j.subscribe(b,a.j.T,function(){var c=(0,g[a.j.T])();if(c){var d=a.h.childNodes(b);d.length&&c(d,a.Dc(d[0]))}});a.j.oa in g&&(y=a.j.Bb(b,d),a.j.subscribe(b,a.j.oa,function(){var c=(0,g[a.j.oa])();c&&a.h.firstChild(b)&&c(b)}));f=k(g);a.a.C(f,function(c){var d=c.Lc.init,e=c.Lc.update,f=c.key;if(8===b.nodeType&&!a.h.ea[f])throw Error(\"The binding '\"+f+\"' cannot be used with virtual elements\");\ntry{\"function\"==typeof d&&a.v.K(function(){var a=d(b,t(f),J,y.$data,y);if(a&&a.controlsDescendantBindings){if(u!==p)throw Error(\"Multiple bindings (\"+u+\" and \"+f+\") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.\");u=f}}),\"function\"==typeof e&&a.$(function(){e(b,t(f),J,y.$data,y)},null,{l:b})}catch(l){throw l.message='Unable to process binding \"'+f+\": \"+g[f]+'\"\\nMessage: '+l.message,l;}})}f=u===p;return{shouldBindDescendants:f,\nbindingContextForDescendants:f&&y}}function n(b,c){return b&&b instanceof a.fa?b:new a.fa(b,p,p,c)}var r=a.a.Da(\"_subscribable\"),y=a.a.Da(\"_ancestorBindingInfo\"),A=a.a.Da(\"_dataDependency\");a.f={};var u={script:!0,textarea:!0,template:!0};a.getBindingHandler=function(b){return a.f[b]};var J={};a.fa=function(b,c,d,e,f){function l(){var b=q?h():h,f=a.a.c(b);c?(a.a.extend(k,c),y in c&&(k[y]=c[y])):(k.$parents=[],k.$root=f,k.ko=a);k[r]=n;g?f=k.$data:(k.$rawData=b,k.$data=f);d&&(k[d]=f);e&&e(k,c,f);if(c&&\nc[r]&&!a.U.o().Ub(c[r]))c[r]();m&&(k[A]=m);return k.$data}var k=this,g=b===J,h=g?p:b,q=\"function\"==typeof h&&!a.N(h),n,m=f&&f.dataDependency;f&&f.exportDependencies?l():(n=a.wb(l),n.w(),n.ja()?n.equalityComparer=null:k[r]=p)};a.fa.prototype.createChildContext=function(b,c,d,e){!e&&c&&\"object\"==typeof c&&(e=c,c=e.as,d=e.extend);if(c&&e&&e.noChildContext){var f=\"function\"==typeof b&&!a.N(b);return new a.fa(J,this,null,function(a){d&&d(a);a[c]=f?b():b},e)}return new a.fa(b,this,c,function(a,b){a.$parentContext=\nb;a.$parent=b.$data;a.$parents=(b.$parents||[]).slice(0);a.$parents.unshift(a.$parent);d&&d(a)},e)};a.fa.prototype.extend=function(b,c){return new a.fa(J,this,null,function(c){a.a.extend(c,\"function\"==typeof b?b(c):b)},c)};var B=a.a.g.Z();c.prototype.Sc=function(){this.Kb&&this.Kb.M&&this.Kb.M.rd(this.node)};c.prototype.rd=function(b){a.a.hb(this.ib,b);!this.ib.length&&this.T&&this.Bc()};c.prototype.Bc=function(){this.T=!0;this.xc.M&&!this.ib.length&&(this.xc.M=null,a.a.I.xb(this.node,b),a.j.Ga(this.node,\na.j.oa),this.Sc())};a.j={T:\"childrenComplete\",oa:\"descendantsComplete\",subscribe:function(b,c,d,e){b=a.a.g.Tb(b,B,{});b.Fa||(b.Fa=new a.R);return b.Fa.subscribe(d,e,c)},Ga:function(b,c){var d=a.a.g.get(b,B);if(d&&(d.Fa&&d.Fa.notifySubscribers(b,c),c==a.j.T))if(d.M)d.M.Bc();else if(d.M===p&&d.Fa&&d.Fa.Wa(a.j.oa))throw Error(\"descendantsComplete event not supported for bindings on this node\");},Bb:function(b,d){var e=a.a.g.Tb(b,B,{});e.M||(e.M=new c(b,e,d[y]));return d[y]==e?d:d.extend(function(a){a[y]=\ne})}};a.Sd=function(b){return(b=a.a.g.get(b,B))&&b.context};a.eb=function(b,c,d){1===b.nodeType&&a.h.Rc(b);return q(b,c,n(d))};a.kd=function(b,c,d){d=n(d);return a.eb(b,g(c,d,b),d)};a.Pa=function(a,b){1!==b.nodeType&&8!==b.nodeType||m(n(a),b)};a.uc=function(a,b,c){!v&&z.jQuery&&(v=z.jQuery);if(2>arguments.length){if(b=w.body,!b)throw Error(\"ko.applyBindings: could not find document.body; has the document been loaded?\");}else if(!b||1!==b.nodeType&&8!==b.nodeType)throw Error(\"ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node\");\nl(n(a,c),b)};a.Cc=function(b){return!b||1!==b.nodeType&&8!==b.nodeType?p:a.Sd(b)};a.Dc=function(b){return(b=a.Cc(b))?b.$data:p};a.b(\"bindingHandlers\",a.f);a.b(\"bindingEvent\",a.j);a.b(\"bindingEvent.subscribe\",a.j.subscribe);a.b(\"bindingEvent.startPossiblyAsyncContentBinding\",a.j.Bb);a.b(\"applyBindings\",a.uc);a.b(\"applyBindingsToDescendants\",a.Pa);a.b(\"applyBindingAccessorsToNode\",a.eb);a.b(\"applyBindingsToNode\",a.kd);a.b(\"contextFor\",a.Cc);a.b(\"dataFor\",a.Dc)})();(function(b){function c(c,e){var l=\nObject.prototype.hasOwnProperty.call(f,c)?f[c]:b,k;l?l.subscribe(e):(l=f[c]=new a.R,l.subscribe(e),d(c,function(b,d){var e=!(!d||!d.synchronous);g[c]={definition:b,Fd:e};delete f[c];k||e?l.notifySubscribers(b):a.ma.yb(function(){l.notifySubscribers(b)})}),k=!0)}function d(a,b){e(\"getConfig\",[a],function(c){c?e(\"loadComponent\",[a,c],function(a){b(a,c)}):b(null,null)})}function e(c,d,f,k){k||(k=a.i.loaders.slice(0));var g=k.shift();if(g){var n=g[c];if(n){var r=!1;if(n.apply(g,d.concat(function(a){r?\nf(null):null!==a?f(a):e(c,d,f,k)}))!==b&&(r=!0,!g.suppressLoaderExceptions))throw Error(\"Component loaders must supply values by invoking the callback, not by returning values synchronously.\");}else e(c,d,f,k)}else f(null)}var f={},g={};a.i={get:function(d,e){var f=Object.prototype.hasOwnProperty.call(g,d)?g[d]:b;f?f.Fd?a.v.K(function(){e(f.definition)}):a.ma.yb(function(){e(f.definition)}):c(d,e)},Ac:function(a){delete g[a]},nc:e};a.i.loaders=[];a.b(\"components\",a.i);a.b(\"components.get\",a.i.get);\na.b(\"components.clearCachedDefinition\",a.i.Ac)})();(function(){function b(b,c,d,e){function g(){0===--A&&e(h)}var h={},A=2,u=d.template;d=d.viewModel;u?f(c,u,function(c){a.i.nc(\"loadTemplate\",[b,c],function(a){h.template=a;g()})}):g();d?f(c,d,function(c){a.i.nc(\"loadViewModel\",[b,c],function(a){h[m]=a;g()})}):g()}function c(a,b,d){if(\"function\"===typeof b)d(function(a){return new b(a)});else if(\"function\"===typeof b[m])d(b[m]);else if(\"instance\"in b){var e=b.instance;d(function(){return e})}else\"viewModel\"in\nb?c(a,b.viewModel,d):a(\"Unknown viewModel value: \"+b)}function d(b){switch(a.a.P(b)){case \"script\":return a.a.ta(b.text);case \"textarea\":return a.a.ta(b.value);case \"template\":if(e(b.content))return a.a.Ca(b.content.childNodes)}return a.a.Ca(b.childNodes)}function e(a){return z.DocumentFragment?a instanceof DocumentFragment:a&&11===a.nodeType}function f(a,b,c){\"string\"===typeof b.require?T||z.require?(T||z.require)([b.require],c):a(\"Uses require, but no AMD loader is present\"):c(b)}function g(a){return function(b){throw Error(\"Component '\"+\na+\"': \"+b);}}var h={};a.i.register=function(b,c){if(!c)throw Error(\"Invalid configuration for \"+b);if(a.i.sb(b))throw Error(\"Component \"+b+\" is already registered\");h[b]=c};a.i.sb=function(a){return Object.prototype.hasOwnProperty.call(h,a)};a.i.unregister=function(b){delete h[b];a.i.Ac(b)};a.i.Ec={getConfig:function(b,c){c(a.i.sb(b)?h[b]:null)},loadComponent:function(a,c,d){var e=g(a);f(e,c,function(c){b(a,e,c,d)})},loadTemplate:function(b,c,f){b=g(b);if(\"string\"===typeof c)f(a.a.ta(c));else if(c instanceof\nArray)f(c);else if(e(c))f(a.a.la(c.childNodes));else if(c.element)if(c=c.element,z.HTMLElement?c instanceof HTMLElement:c&&c.tagName&&1===c.nodeType)f(d(c));else if(\"string\"===typeof c){var h=w.getElementById(c);h?f(d(h)):b(\"Cannot find element with ID \"+c)}else b(\"Unknown element type: \"+c);else b(\"Unknown template value: \"+c)},loadViewModel:function(a,b,d){c(g(a),b,d)}};var m=\"createViewModel\";a.b(\"components.register\",a.i.register);a.b(\"components.isRegistered\",a.i.sb);a.b(\"components.unregister\",\na.i.unregister);a.b(\"components.defaultLoader\",a.i.Ec);a.i.loaders.push(a.i.Ec);a.i.cd=h})();(function(){function b(b,e){var f=b.getAttribute(\"params\");if(f){var f=c.parseBindingsString(f,e,b,{valueAccessors:!0,bindingParams:!0}),f=a.a.Ha(f,function(c){return a.o(c,null,{l:b})}),g=a.a.Ha(f,function(c){var e=c.w();return c.ja()?a.o({read:function(){return a.a.c(c())},write:a.Ya(e)&&function(a){c()(a)},l:b}):e});Object.prototype.hasOwnProperty.call(g,\"$raw\")||(g.$raw=f);return g}return{$raw:{}}}a.i.getComponentNameForNode=\nfunction(b){var c=a.a.P(b);if(a.i.sb(c)&&(-1!=c.indexOf(\"-\")||\"[object HTMLUnknownElement]\"==\"\"+b||8>=a.a.W&&b.tagName===c))return c};a.i.sc=function(c,e,f,g){if(1===e.nodeType){var h=a.i.getComponentNameForNode(e);if(h){c=c||{};if(c.component)throw Error('Cannot use the \"component\" binding on a custom element matching a component');var m={name:h,params:b(e,f)};c.component=g?function(){return m}:m}}return c};var c=new a.ga;9>a.a.W&&(a.i.register=function(a){return function(b){return a.apply(this,\narguments)}}(a.i.register),w.createDocumentFragment=function(b){return function(){var c=b(),f=a.i.cd,g;for(g in f);return c}}(w.createDocumentFragment))})();(function(){function b(b,c,d){c=c.template;if(!c)throw Error(\"Component '\"+b+\"' has no template\");b=a.a.Ca(c);a.h.ua(d,b)}function c(a,b,c){var d=a.createViewModel;return d?d.call(a,b,c):b}var d=0;a.f.component={init:function(e,f,g,h,m){function l(){var a=k&&k.dispose;\"function\"===typeof a&&a.call(k);n&&n.s();q=k=n=null}var k,q,n,r=a.a.la(a.h.childNodes(e));\na.h.Ea(e);a.a.I.za(e,l);a.o(function(){var g=a.a.c(f()),h,u;\"string\"===typeof g?h=g:(h=a.a.c(g.name),u=a.a.c(g.params));if(!h)throw Error(\"No component name specified\");var p=a.j.Bb(e,m),B=q=++d;a.i.get(h,function(d){if(q===B){l();if(!d)throw Error(\"Unknown component '\"+h+\"'\");b(h,d,e);var f=c(d,u,{element:e,templateNodes:r});d=p.createChildContext(f,{extend:function(a){a.$component=f;a.$componentTemplateNodes=r}});f&&f.koDescendantsComplete&&(n=a.j.subscribe(e,a.j.oa,f.koDescendantsComplete,f));\nk=f;a.Pa(d,e)}})},null,{l:e});return{controlsDescendantBindings:!0}}};a.h.ea.component=!0})();var V={\"class\":\"className\",\"for\":\"htmlFor\"};a.f.attr={update:function(b,c){var d=a.a.c(c())||{};a.a.O(d,function(c,d){d=a.a.c(d);var g=c.indexOf(\":\"),g=\"lookupNamespaceURI\"in b&&0<g&&b.lookupNamespaceURI(c.substr(0,g)),h=!1===d||null===d||d===p;h?g?b.removeAttributeNS(g,c):b.removeAttribute(c):d=d.toString();8>=a.a.W&&c in V?(c=V[c],h?b.removeAttribute(c):b[c]=d):h||(g?b.setAttributeNS(g,c,d):b.setAttribute(c,\nd));\"name\"===c&&a.a.Xc(b,h?\"\":d)})}};(function(){a.f.checked={after:[\"value\",\"attr\"],init:function(b,c,d){function e(){var e=b.checked,f=g();if(!a.U.rb()&&(e||!m&&!a.U.pa())){var l=a.v.K(c);if(k){var n=q?l.w():l,B=r;r=f;B!==f?e&&(a.a.Oa(n,f,!0),a.a.Oa(n,B,!1)):a.a.Oa(n,f,e);q&&a.Ya(l)&&l(n)}else h&&(f===p?f=e:e||(f=p)),a.m.$a(l,d,\"checked\",f,!0)}}function f(){var d=a.a.c(c()),e=g();k?(b.checked=0<=a.a.A(d,e),r=e):b.checked=h&&e===p?!!d:g()===d}var g=a.wb(function(){if(d.has(\"checkedValue\"))return a.a.c(d.get(\"checkedValue\"));\nif(n)return d.has(\"value\")?a.a.c(d.get(\"value\")):b.value}),h=\"checkbox\"==b.type,m=\"radio\"==b.type;if(h||m){var l=c(),k=h&&a.a.c(l)instanceof Array,q=!(k&&l.push&&l.splice),n=m||k,r=k?g():p;m&&!b.name&&a.f.uniqueName.init(b,function(){return!0});a.o(e,null,{l:b});a.a.H(b,\"click\",e);a.o(f,null,{l:b});l=p}}};a.m.va.checked=!0;a.f.checkedValue={update:function(b,c){b.value=a.a.c(c())}}})();a.f[\"class\"]={update:function(b,c){var d=a.a.Cb(a.a.c(c()));a.a.Eb(b,b.__ko__cssValue,!1);b.__ko__cssValue=d;a.a.Eb(b,\nd,!0)}};a.f.css={update:function(b,c){var d=a.a.c(c());null!==d&&\"object\"==typeof d?a.a.O(d,function(c,d){d=a.a.c(d);a.a.Eb(b,c,d)}):a.f[\"class\"].update(b,c)}};a.f.enable={update:function(b,c){var d=a.a.c(c());d&&b.disabled?b.removeAttribute(\"disabled\"):d||b.disabled||(b.disabled=!0)}};a.f.disable={update:function(b,c){a.f.enable.update(b,function(){return!a.a.c(c())})}};a.f.event={init:function(b,c,d,e,f){var g=c()||{};a.a.O(g,function(g){\"string\"==typeof g&&a.a.H(b,g,function(b){var l,k=c()[g];\nif(k){try{var q=a.a.la(arguments);e=f.$data;q.unshift(e);l=k.apply(e,q)}finally{!0!==l&&(b.preventDefault?b.preventDefault():b.returnValue=!1)}!1===d.get(g+\"Bubble\")&&(b.cancelBubble=!0,b.stopPropagation&&b.stopPropagation())}})})}};a.f.foreach={Qc:function(b){return function(){var c=b(),d=a.a.$b(c);if(!d||\"number\"==typeof d.length)return{foreach:c,templateEngine:a.ba.Na};a.a.c(c);return{foreach:d.data,as:d.as,noChildContext:d.noChildContext,includeDestroyed:d.includeDestroyed,afterAdd:d.afterAdd,\nbeforeRemove:d.beforeRemove,afterRender:d.afterRender,beforeMove:d.beforeMove,afterMove:d.afterMove,templateEngine:a.ba.Na}}},init:function(b,c){return a.f.template.init(b,a.f.foreach.Qc(c))},update:function(b,c,d,e,f){return a.f.template.update(b,a.f.foreach.Qc(c),d,e,f)}};a.m.Ra.foreach=!1;a.h.ea.foreach=!0;a.f.hasfocus={init:function(b,c,d){function e(e){b.__ko_hasfocusUpdating=!0;var f=b.ownerDocument;if(\"activeElement\"in f){var g;try{g=f.activeElement}catch(k){g=f.body}e=g===b}f=c();a.m.$a(f,\nd,\"hasfocus\",e,!0);b.__ko_hasfocusLastValue=e;b.__ko_hasfocusUpdating=!1}var f=e.bind(null,!0),g=e.bind(null,!1);a.a.H(b,\"focus\",f);a.a.H(b,\"focusin\",f);a.a.H(b,\"blur\",g);a.a.H(b,\"focusout\",g);b.__ko_hasfocusLastValue=!1},update:function(b,c){var d=!!a.a.c(c());b.__ko_hasfocusUpdating||b.__ko_hasfocusLastValue===d||(d?b.focus():b.blur(),!d&&b.__ko_hasfocusLastValue&&b.ownerDocument.body.focus(),a.v.K(a.a.Fb,null,[b,d?\"focusin\":\"focusout\"]))}};a.m.va.hasfocus=!0;a.f.hasFocus=a.f.hasfocus;a.m.va.hasFocus=\n\"hasfocus\";a.f.html={init:function(){return{controlsDescendantBindings:!0}},update:function(b,c){a.a.dc(b,c())}};(function(){function b(b,d,e){a.f[b]={init:function(b,c,h,m,l){var k,q,n={},r,p,A;if(d){m=h.get(\"as\");var u=h.get(\"noChildContext\");A=!(m&&u);n={as:m,noChildContext:u,exportDependencies:A}}p=(r=\"render\"==h.get(\"completeOn\"))||h.has(a.j.oa);a.o(function(){var h=a.a.c(c()),m=!e!==!h,u=!q,t;if(A||m!==k){p&&(l=a.j.Bb(b,l));if(m){if(!d||A)n.dataDependency=a.U.o();t=d?l.createChildContext(\"function\"==\ntypeof h?h:c,n):a.U.pa()?l.extend(null,n):l}u&&a.U.pa()&&(q=a.a.Ca(a.h.childNodes(b),!0));m?(u||a.h.ua(b,a.a.Ca(q)),a.Pa(t,b)):(a.h.Ea(b),r||a.j.Ga(b,a.j.T));k=m}},null,{l:b});return{controlsDescendantBindings:!0}}};a.m.Ra[b]=!1;a.h.ea[b]=!0}b(\"if\");b(\"ifnot\",!1,!0);b(\"with\",!0)})();a.f.let={init:function(b,c,d,e,f){c=f.extend(c);a.Pa(c,b);return{controlsDescendantBindings:!0}}};a.h.ea.let=!0;var Q={};a.f.options={init:function(b){if(\"select\"!==a.a.P(b))throw Error(\"options binding applies only to SELECT elements\");\nfor(;0<b.length;)b.remove(0);return{controlsDescendantBindings:!0}},update:function(b,c,d){function e(){return a.a.fb(b.options,function(a){return a.selected})}function f(a,b,c){var d=typeof b;return\"function\"==d?b(a):\"string\"==d?a[b]:c}function g(c,e){if(y&&k)a.u.ya(b,a.a.c(d.get(\"value\")),!0);else if(r.length){var f=0<=a.a.A(r,a.u.L(e[0]));a.a.Yc(e[0],f);y&&!f&&a.v.K(a.a.Fb,null,[b,\"change\"])}}var h=b.multiple,m=0!=b.length&&h?b.scrollTop:null,l=a.a.c(c()),k=d.get(\"valueAllowUnset\")&&d.has(\"value\"),\nq=d.get(\"optionsIncludeDestroyed\");c={};var n,r=[];k||(h?r=a.a.Mb(e(),a.u.L):0<=b.selectedIndex&&r.push(a.u.L(b.options[b.selectedIndex])));l&&(\"undefined\"==typeof l.length&&(l=[l]),n=a.a.fb(l,function(b){return q||b===p||null===b||!a.a.c(b._destroy)}),d.has(\"optionsCaption\")&&(l=a.a.c(d.get(\"optionsCaption\")),null!==l&&l!==p&&n.unshift(Q)));var y=!1;c.beforeRemove=function(a){b.removeChild(a)};l=g;d.has(\"optionsAfterRender\")&&\"function\"==typeof d.get(\"optionsAfterRender\")&&(l=function(b,c){g(0,c);\na.v.K(d.get(\"optionsAfterRender\"),null,[c[0],b!==Q?b:p])});a.a.cc(b,n,function(c,e,g){g.length&&(r=!k&&g[0].selected?[a.u.L(g[0])]:[],y=!0);e=b.ownerDocument.createElement(\"option\");c===Q?(a.a.Ab(e,d.get(\"optionsCaption\")),a.u.ya(e,p)):(g=f(c,d.get(\"optionsValue\"),c),a.u.ya(e,a.a.c(g)),c=f(c,d.get(\"optionsText\"),g),a.a.Ab(e,c));return[e]},c,l);a.v.K(function(){if(k)a.u.ya(b,a.a.c(d.get(\"value\")),!0);else{var c;h?c=r.length&&e().length<r.length:c=r.length&&0<=b.selectedIndex?a.u.L(b.options[b.selectedIndex])!==\nr[0]:r.length||0<=b.selectedIndex;c&&a.a.Fb(b,\"change\")}});a.a.vd(b);m&&20<Math.abs(m-b.scrollTop)&&(b.scrollTop=m)}};a.f.options.Yb=a.a.g.Z();a.f.selectedOptions={after:[\"options\",\"foreach\"],init:function(b,c,d){a.a.H(b,\"change\",function(){var e=c(),f=[];a.a.C(b.getElementsByTagName(\"option\"),function(b){b.selected&&f.push(a.u.L(b))});a.m.$a(e,d,\"selectedOptions\",f)})},update:function(b,c){if(\"select\"!=a.a.P(b))throw Error(\"values binding applies only to SELECT elements\");var d=a.a.c(c()),e=b.scrollTop;\nd&&\"number\"==typeof d.length&&a.a.C(b.getElementsByTagName(\"option\"),function(b){var c=0<=a.a.A(d,a.u.L(b));b.selected!=c&&a.a.Yc(b,c)});b.scrollTop=e}};a.m.va.selectedOptions=!0;a.f.style={update:function(b,c){var d=a.a.c(c()||{});a.a.O(d,function(c,d){d=a.a.c(d);if(null===d||d===p||!1===d)d=\"\";if(v)v(b).css(c,d);else if(/^--/.test(c))b.style.setProperty(c,d);else{c=c.replace(/-(\\w)/g,function(a,b){return b.toUpperCase()});var g=b.style[c];b.style[c]=d;d===g||b.style[c]!=g||isNaN(d)||(b.style[c]=\nd+\"px\")}})}};a.f.submit={init:function(b,c,d,e,f){if(\"function\"!=typeof c())throw Error(\"The value for a submit binding must be a function\");a.a.H(b,\"submit\",function(a){var d,e=c();try{d=e.call(f.$data,b)}finally{!0!==d&&(a.preventDefault?a.preventDefault():a.returnValue=!1)}})}};a.f.text={init:function(){return{controlsDescendantBindings:!0}},update:function(b,c){a.a.Ab(b,c())}};a.h.ea.text=!0;(function(){if(z&&z.navigator){var b=function(a){if(a)return parseFloat(a[1])},c=z.navigator.userAgent,\nd,e,f,g,h;(d=z.opera&&z.opera.version&&parseInt(z.opera.version()))||(h=b(c.match(/Edge\\/([^ ]+)$/)))||b(c.match(/Chrome\\/([^ ]+)/))||(e=b(c.match(/Version\\/([^ ]+) Safari/)))||(f=b(c.match(/Firefox\\/([^ ]+)/)))||(g=a.a.W||b(c.match(/MSIE ([^ ]+)/)))||(g=b(c.match(/rv:([^ )]+)/)))}if(8<=g&&10>g)var m=a.a.g.Z(),l=a.a.g.Z(),k=function(b){var c=this.activeElement;(c=c&&a.a.g.get(c,l))&&c(b)},q=function(b,c){var d=b.ownerDocument;a.a.g.get(d,m)||(a.a.g.set(d,m,!0),a.a.H(d,\"selectionchange\",k));a.a.g.set(b,\nl,c)};a.f.textInput={init:function(b,c,l){function k(c,d){a.a.H(b,c,d)}function m(){var d=a.a.c(c());if(null===d||d===p)d=\"\";L!==p&&d===L?a.a.setTimeout(m,4):b.value!==d&&(x=!0,b.value=d,x=!1,v=b.value)}function t(){w||(L=b.value,w=a.a.setTimeout(B,4))}function B(){clearTimeout(w);L=w=p;var d=b.value;v!==d&&(v=d,a.m.$a(c(),l,\"textInput\",d))}var v=b.value,w,L,z=9==a.a.W?t:B,x=!1;g&&k(\"keypress\",B);11>g&&k(\"propertychange\",function(a){x||\"value\"!==a.propertyName||z(a)});8==g&&(k(\"keyup\",B),k(\"keydown\",\nB));q&&(q(b,z),k(\"dragend\",t));(!g||9<=g)&&k(\"input\",z);5>e&&\"textarea\"===a.a.P(b)?(k(\"keydown\",t),k(\"paste\",t),k(\"cut\",t)):11>d?k(\"keydown\",t):4>f?(k(\"DOMAutoComplete\",B),k(\"dragdrop\",B),k(\"drop\",B)):h&&\"number\"===b.type&&k(\"keydown\",t);k(\"change\",B);k(\"blur\",B);a.o(m,null,{l:b})}};a.m.va.textInput=!0;a.f.textinput={preprocess:function(a,b,c){c(\"textInput\",a)}}})();a.f.uniqueName={init:function(b,c){if(c()){var d=\"ko_unique_\"+ ++a.f.uniqueName.qd;a.a.Xc(b,d)}}};a.f.uniqueName.qd=0;a.f.using={init:function(b,\nc,d,e,f){var g;d.has(\"as\")&&(g={as:d.get(\"as\"),noChildContext:d.get(\"noChildContext\")});c=f.createChildContext(c,g);a.Pa(c,b);return{controlsDescendantBindings:!0}}};a.h.ea.using=!0;a.f.value={after:[\"options\",\"foreach\"],init:function(b,c,d){var e=a.a.P(b),f=\"input\"==e;if(!f||\"checkbox\"!=b.type&&\"radio\"!=b.type){var g=[\"change\"],h=d.get(\"valueUpdate\"),m=!1,l=null;h&&(\"string\"==typeof h&&(h=[h]),a.a.gb(g,h),g=a.a.vc(g));var k=function(){l=null;m=!1;var e=c(),f=a.u.L(b);a.m.$a(e,d,\"value\",f)};!a.a.W||\n!f||\"text\"!=b.type||\"off\"==b.autocomplete||b.form&&\"off\"==b.form.autocomplete||-1!=a.a.A(g,\"propertychange\")||(a.a.H(b,\"propertychange\",function(){m=!0}),a.a.H(b,\"focus\",function(){m=!1}),a.a.H(b,\"blur\",function(){m&&k()}));a.a.C(g,function(c){var d=k;a.a.Td(c,\"after\")&&(d=function(){l=a.u.L(b);a.a.setTimeout(k,0)},c=c.substring(5));a.a.H(b,c,d)});var q;q=f&&\"file\"==b.type?function(){var d=a.a.c(c());null===d||d===p||\"\"===d?b.value=\"\":a.v.K(k)}:function(){var f=a.a.c(c()),g=a.u.L(b);if(null!==l&&\nf===l)a.a.setTimeout(q,0);else if(f!==g||g===p)\"select\"===e?(g=d.get(\"valueAllowUnset\"),a.u.ya(b,f,g),g||f===a.u.L(b)||a.v.K(k)):a.u.ya(b,f)};a.o(q,null,{l:b})}else a.eb(b,{checkedValue:c})},update:function(){}};a.m.va.value=!0;a.f.visible={update:function(b,c){var d=a.a.c(c()),e=\"none\"!=b.style.display;d&&!e?b.style.display=\"\":!d&&e&&(b.style.display=\"none\")}};a.f.hidden={update:function(b,c){a.f.visible.update(b,function(){return!a.a.c(c())})}};(function(b){a.f[b]={init:function(c,d,e,f,g){return a.f.event.init.call(this,\nc,function(){var a={};a[b]=d();return a},e,f,g)}}})(\"click\");a.ca=function(){};a.ca.prototype.renderTemplateSource=function(){throw Error(\"Override renderTemplateSource\");};a.ca.prototype.createJavaScriptEvaluatorBlock=function(){throw Error(\"Override createJavaScriptEvaluatorBlock\");};a.ca.prototype.makeTemplateSource=function(b,c){if(\"string\"==typeof b){c=c||w;var d=c.getElementById(b);if(!d)throw Error(\"Cannot find template with ID \"+b);return new a.B.D(d)}if(1==b.nodeType||8==b.nodeType)return new a.B.ia(b);\nthrow Error(\"Unknown template type: \"+b);};a.ca.prototype.renderTemplate=function(a,c,d,e){a=this.makeTemplateSource(a,e);return this.renderTemplateSource(a,c,d,e)};a.ca.prototype.isTemplateRewritten=function(a,c){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(a,c).data(\"isRewritten\")};a.ca.prototype.rewriteTemplate=function(a,c,d){a=this.makeTemplateSource(a,d);c=c(a.text());a.text(c);a.data(\"isRewritten\",!0)};a.b(\"templateEngine\",a.ca);a.ic=function(){function b(b,c,d,h){b=a.m.Zb(b);\nfor(var m=a.m.Ra,l=0;l<b.length;l++){var k=b[l].key;if(Object.prototype.hasOwnProperty.call(m,k)){var q=m[k];if(\"function\"===typeof q){if(k=q(b[l].value))throw Error(k);}else if(!q)throw Error(\"This template engine does not support the '\"+k+\"' binding within its templates\");}}d=\"ko.__tr_ambtns(function($context,$element){return(function(){return{ \"+a.m.ub(b,{valueAccessors:!0})+\" } })()},'\"+d.toLowerCase()+\"')\";return h.createJavaScriptEvaluatorBlock(d)+c}var c=/(<([a-z]+\\d*)(?:\\s+(?!data-bind\\s*=\\s*)[a-z0-9\\-]+(?:=(?:\\\"[^\\\"]*\\\"|\\'[^\\']*\\'|[^>]*))?)*\\s+)data-bind\\s*=\\s*([\"'])([\\s\\S]*?)\\3/gi,\nd=/\\x3c!--\\s*ko\\b\\s*([\\s\\S]*?)\\s*--\\x3e/g;return{wd:function(b,c,d){c.isTemplateRewritten(b,d)||c.rewriteTemplate(b,function(b){return a.ic.Kd(b,c)},d)},Kd:function(a,f){return a.replace(c,function(a,c,d,e,k){return b(k,c,d,f)}).replace(d,function(a,c){return b(c,\"\\x3c!-- ko --\\x3e\",\"#comment\",f)})},ld:function(b,c){return a.aa.Wb(function(d,h){var m=d.nextSibling;m&&m.nodeName.toLowerCase()===c&&a.eb(m,b,h)})}}}();a.b(\"__tr_ambtns\",a.ic.ld);(function(){a.B={};a.B.D=function(b){if(this.D=b){var c=\na.a.P(b);this.Db=\"script\"===c?1:\"textarea\"===c?2:\"template\"==c&&b.content&&11===b.content.nodeType?3:4}};a.B.D.prototype.text=function(){var b=1===this.Db?\"text\":2===this.Db?\"value\":\"innerHTML\";if(0==arguments.length)return this.D[b];var c=arguments[0];\"innerHTML\"===b?a.a.dc(this.D,c):this.D[b]=c};var b=a.a.g.Z()+\"_\";a.B.D.prototype.data=function(c){if(1===arguments.length)return a.a.g.get(this.D,b+c);a.a.g.set(this.D,b+c,arguments[1])};var c=a.a.g.Z();a.B.D.prototype.nodes=function(){var b=this.D;\nif(0==arguments.length){var e=a.a.g.get(b,c)||{},f=e.jb||(3===this.Db?b.content:4===this.Db?b:p);if(!f||e.hd)if(e=this.text())f=a.a.Ld(e,b.ownerDocument),this.text(\"\"),a.a.g.set(b,c,{jb:f,hd:!0});return f}a.a.g.set(b,c,{jb:arguments[0]})};a.B.ia=function(a){this.D=a};a.B.ia.prototype=new a.B.D;a.B.ia.prototype.constructor=a.B.ia;a.B.ia.prototype.text=function(){if(0==arguments.length){var b=a.a.g.get(this.D,c)||{};b.jc===p&&b.jb&&(b.jc=b.jb.innerHTML);return b.jc}a.a.g.set(this.D,c,{jc:arguments[0]})};\na.b(\"templateSources\",a.B);a.b(\"templateSources.domElement\",a.B.D);a.b(\"templateSources.anonymousTemplate\",a.B.ia)})();(function(){function b(b,c,d){var e;for(c=a.h.nextSibling(c);b&&(e=b)!==c;)b=a.h.nextSibling(e),d(e,b)}function c(c,d){if(c.length){var e=c[0],f=c[c.length-1],g=e.parentNode,h=a.ga.instance,m=h.preprocessNode;if(m){b(e,f,function(a,b){var c=a.previousSibling,d=m.call(h,a);d&&(a===e&&(e=d[0]||b),a===f&&(f=d[d.length-1]||c))});c.length=0;if(!e)return;e===f?c.push(e):(c.push(e,f),a.a.Ua(c,\ng))}b(e,f,function(b){1!==b.nodeType&&8!==b.nodeType||a.uc(d,b)});b(e,f,function(b){1!==b.nodeType&&8!==b.nodeType||a.aa.bd(b,[d])});a.a.Ua(c,g)}}function d(a){return a.nodeType?a:0<a.length?a[0]:null}function e(b,e,f,h,m){m=m||{};var p=(b&&d(b)||f||{}).ownerDocument,A=m.templateEngine||g;a.ic.wd(f,A,p);f=A.renderTemplate(f,h,m,p);if(\"number\"!=typeof f.length||0<f.length&&\"number\"!=typeof f[0].nodeType)throw Error(\"Template engine must return an array of DOM nodes\");p=!1;switch(e){case \"replaceChildren\":a.h.ua(b,\nf);p=!0;break;case \"replaceNode\":a.a.Wc(b,f);p=!0;break;case \"ignoreTargetNode\":break;default:throw Error(\"Unknown renderMode: \"+e);}p&&(c(f,h),m.afterRender&&a.v.K(m.afterRender,null,[f,h[m.as||\"$data\"]]),\"replaceChildren\"==e&&a.j.Ga(b,a.j.T));return f}function f(b,c,d){return a.N(b)?b():\"function\"===typeof b?b(c,d):b}var g;a.ec=function(b){if(b!=p&&!(b instanceof a.ca))throw Error(\"templateEngine must inherit from ko.templateEngine\");g=b};a.bc=function(b,c,h,m,r){h=h||{};if((h.templateEngine||g)==\np)throw Error(\"Set a template engine before calling renderTemplate\");r=r||\"replaceChildren\";if(m){var y=d(m);return a.$(function(){var g=c&&c instanceof a.fa?c:new a.fa(c,null,null,null,{exportDependencies:!0}),p=f(b,g.$data,g),g=e(m,r,p,g,h);\"replaceNode\"==r&&(m=g,y=d(m))},null,{Sa:function(){return!y||!a.a.Rb(y)},l:y&&\"replaceNode\"==r?y.parentNode:y})}return a.aa.Wb(function(d){a.bc(b,c,h,d,\"replaceNode\")})};a.Pd=function(b,d,g,h,m){function y(b,c){a.v.K(a.a.cc,null,[h,b,u,g,t,c]);a.j.Ga(h,a.j.T)}\nfunction t(a,b){c(b,v);g.afterRender&&g.afterRender(b,a);v=null}function u(a,c){v=m.createChildContext(a,{as:B,noChildContext:g.noChildContext,extend:function(a){a.$index=c;B&&(a[B+\"Index\"]=c)}});var d=f(b,a,v);return e(h,\"ignoreTargetNode\",d,v,g)}var v,B=g.as,w=!1===g.includeDestroyed||a.options.foreachHidesDestroyed&&!g.includeDestroyed;if(w||g.beforeRemove||!a.Oc(d))return a.$(function(){var b=a.a.c(d)||[];\"undefined\"==typeof b.length&&(b=[b]);w&&(b=a.a.fb(b,function(b){return b===p||null===b||\n!a.a.c(b._destroy)}));y(b)},null,{l:h});y(d.w());var z=d.subscribe(function(a){y(d(),a)},null,\"arrayChange\");z.l(h);return z};var h=a.a.g.Z(),m=a.a.g.Z();a.f.template={init:function(b,c){var d=a.a.c(c());if(\"string\"==typeof d||d.name)a.h.Ea(b);else if(\"nodes\"in d){d=d.nodes||[];if(a.N(d))throw Error('The \"nodes\" option must be a plain, non-observable array.');var e=d[0]&&d[0].parentNode;e&&a.a.g.get(e,m)||(e=a.a.Xb(d),a.a.g.set(e,m,!0));(new a.B.ia(b)).nodes(e)}else if(d=a.h.childNodes(b),0<d.length)e=\na.a.Xb(d),(new a.B.ia(b)).nodes(e);else throw Error(\"Anonymous template defined, but no template content was provided\");return{controlsDescendantBindings:!0}},update:function(b,c,d,e,f){var g=c();c=a.a.c(g);d=!0;e=null;\"string\"==typeof c?c={}:(g=c.name,\"if\"in c&&(d=a.a.c(c[\"if\"])),d&&\"ifnot\"in c&&(d=!a.a.c(c.ifnot)));\"foreach\"in c?e=a.Pd(g||b,d&&c.foreach||[],c,b,f):d?(d=f,\"data\"in c&&(d=f.createChildContext(c.data,{as:c.as,noChildContext:c.noChildContext,exportDependencies:!0})),e=a.bc(g||b,d,c,\nb)):a.h.Ea(b);f=e;(c=a.a.g.get(b,h))&&\"function\"==typeof c.s&&c.s();a.a.g.set(b,h,!f||f.ja&&!f.ja()?p:f)}};a.m.Ra.template=function(b){b=a.m.Zb(b);return 1==b.length&&b[0].unknown||a.m.Hd(b,\"name\")?null:\"This template engine does not support anonymous templates nested within its templates\"};a.h.ea.template=!0})();a.b(\"setTemplateEngine\",a.ec);a.b(\"renderTemplate\",a.bc);a.a.Jc=function(a,c,d){if(a.length&&c.length){var e,f,g,h,m;for(e=f=0;(!d||e<d)&&(h=a[f]);++f){for(g=0;m=c[g];++g)if(h.value===m.value){h.moved=\nm.index;m.moved=h.index;c.splice(g,1);e=g=0;break}e+=g}}};a.a.Ob=function(){function b(b,d,e,f,g){var h=Math.min,m=Math.max,l=[],k,p=b.length,n,r=d.length,t=r-p||1,A=p+r+1,u,v,w;for(k=0;k<=p;k++)for(v=u,l.push(u=[]),w=h(r,k+t),n=m(0,k-1);n<=w;n++)u[n]=n?k?b[k-1]===d[n-1]?v[n-1]:h(v[n]||A,u[n-1]||A)+1:n+1:k+1;h=[];m=[];t=[];k=p;for(n=r;k||n;)r=l[k][n]-1,n&&r===l[k][n-1]?m.push(h[h.length]={status:e,value:d[--n],index:n}):k&&r===l[k-1][n]?t.push(h[h.length]={status:f,value:b[--k],index:k}):(--n,--k,\ng.sparse||h.push({status:\"retained\",value:d[n]}));a.a.Jc(t,m,!g.dontLimitMoves&&10*p);return h.reverse()}return function(a,d,e){e=\"boolean\"===typeof e?{dontLimitMoves:e}:e||{};a=a||[];d=d||[];return a.length<d.length?b(a,d,\"added\",\"deleted\",e):b(d,a,\"deleted\",\"added\",e)}}();a.b(\"utils.compareArrays\",a.a.Ob);(function(){function b(b,c,d,h,m){var l=[],k=a.$(function(){var k=c(d,m,a.a.Ua(l,b))||[];0<l.length&&(a.a.Wc(l,k),h&&a.v.K(h,null,[d,k,m]));l.length=0;a.a.gb(l,k)},null,{l:b,Sa:function(){return!a.a.jd(l)}});\nreturn{Y:l,$:k.ja()?k:p}}var c=a.a.g.Z(),d=a.a.g.Z();a.a.cc=function(e,f,g,h,m,l){function k(b){x={Aa:b,nb:a.sa(w++)};v.push(x);t||F.push(x)}function q(b){x=r[b];w!==x.nb.w()&&D.push(x);x.nb(w++);a.a.Ua(x.Y,e);v.push(x)}function n(b,c){if(b)for(var d=0,e=c.length;d<e;d++)a.a.C(c[d].Y,function(a){b(a,d,c[d].Aa)})}f=f||[];\"undefined\"==typeof f.length&&(f=[f]);h=h||{};var r=a.a.g.get(e,c),t=!r,v=[],u=0,w=0,B=[],z=[],C=[],D=[],F=[],x,I=0;if(t)a.a.C(f,k);else{if(!l||r&&r._countWaitingForRemove){var E=\na.a.Mb(r,function(a){return a.Aa});l=a.a.Ob(E,f,{dontLimitMoves:h.dontLimitMoves,sparse:!0})}for(var E=0,G,H,K;G=l[E];E++)switch(H=G.moved,K=G.index,G.status){case \"deleted\":for(;u<K;)q(u++);H===p&&(x=r[u],x.$&&(x.$.s(),x.$=p),a.a.Ua(x.Y,e).length&&(h.beforeRemove&&(v.push(x),I++,x.Aa===d?x=null:C.push(x)),x&&B.push.apply(B,x.Y)));u++;break;case \"added\":for(;w<K;)q(u++);H!==p?(z.push(v.length),q(H)):k(G.value)}for(;w<f.length;)q(u++);v._countWaitingForRemove=I}a.a.g.set(e,c,v);n(h.beforeMove,D);a.a.C(B,\nh.beforeRemove?a.na:a.removeNode);var M,O,P;try{P=e.ownerDocument.activeElement}catch(N){}if(z.length)for(;(E=z.shift())!=p;){x=v[E];for(M=p;E;)if((O=v[--E].Y)&&O.length){M=O[O.length-1];break}for(f=0;u=x.Y[f];M=u,f++)a.h.Vb(e,u,M)}E=0;for(z=a.h.firstChild(e);x=v[E];E++){x.Y||a.a.extend(x,b(e,g,x.Aa,m,x.nb));for(f=0;u=x.Y[f];z=u.nextSibling,M=u,f++)u!==z&&a.h.Vb(e,u,M);!x.Dd&&m&&(m(x.Aa,x.Y,x.nb),x.Dd=!0,M=x.Y[x.Y.length-1])}P&&e.ownerDocument.activeElement!=P&&P.focus();n(h.beforeRemove,C);for(E=\n0;E<C.length;++E)C[E].Aa=d;n(h.afterMove,D);n(h.afterAdd,F)}})();a.b(\"utils.setDomNodeChildrenFromArrayMapping\",a.a.cc);a.ba=function(){this.allowTemplateRewriting=!1};a.ba.prototype=new a.ca;a.ba.prototype.constructor=a.ba;a.ba.prototype.renderTemplateSource=function(b,c,d,e){if(c=(9>a.a.W?0:b.nodes)?b.nodes():null)return a.a.la(c.cloneNode(!0).childNodes);b=b.text();return a.a.ta(b,e)};a.ba.Na=new a.ba;a.ec(a.ba.Na);a.b(\"nativeTemplateEngine\",a.ba);(function(){a.Za=function(){var a=this.Gd=function(){if(!v||\n!v.tmpl)return 0;try{if(0<=v.tmpl.tag.tmpl.open.toString().indexOf(\"__\"))return 2}catch(a){}return 1}();this.renderTemplateSource=function(b,e,f,g){g=g||w;f=f||{};if(2>a)throw Error(\"Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.\");var h=b.data(\"precompiled\");h||(h=b.text()||\"\",h=v.template(null,\"{{ko_with $item.koBindingContext}}\"+h+\"{{/ko_with}}\"),b.data(\"precompiled\",h));b=[e.$data];e=v.extend({koBindingContext:e},f.templateOptions);e=v.tmpl(h,b,e);e.appendTo(g.createElement(\"div\"));\nv.fragments={};return e};this.createJavaScriptEvaluatorBlock=function(a){return\"{{ko_code ((function() { return \"+a+\" })()) }}\"};this.addTemplate=function(a,b){w.write(\"<script type='text/html' id='\"+a+\"'>\"+b+\"\\x3c/script>\")};0<a&&(v.tmpl.tag.ko_code={open:\"__.push($1 || '');\"},v.tmpl.tag.ko_with={open:\"with($1) {\",close:\"} \"})};a.Za.prototype=new a.ca;a.Za.prototype.constructor=a.Za;var b=new a.Za;0<b.Gd&&a.ec(b);a.b(\"jqueryTmplTemplateEngine\",a.Za)})()})})();})();\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","var MapCache = require('./_MapCache'),\n    setCacheAdd = require('./_setCacheAdd'),\n    setCacheHas = require('./_setCacheHas');\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nmodule.exports = SetCache;\n","var ListCache = require('./_ListCache'),\n    stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nmodule.exports = apply;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEach;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignMergeValue;\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignValue;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var copyObject = require('./_copyObject'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nmodule.exports = baseAssign;\n","var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nmodule.exports = baseAssignIn;\n","var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n","/**\n * The base implementation of `_.clamp` which doesn't coerce arguments.\n *\n * @private\n * @param {number} number The number to clamp.\n * @param {number} [lower] The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the clamped number.\n */\nfunction baseClamp(number, lower, upper) {\n  if (number === number) {\n    if (upper !== undefined) {\n      number = number <= upper ? number : upper;\n    }\n    if (lower !== undefined) {\n      number = number >= lower ? number : lower;\n    }\n  }\n  return number;\n}\n\nmodule.exports = baseClamp;\n","var Stack = require('./_Stack'),\n    arrayEach = require('./_arrayEach'),\n    assignValue = require('./_assignValue'),\n    baseAssign = require('./_baseAssign'),\n    baseAssignIn = require('./_baseAssignIn'),\n    cloneBuffer = require('./_cloneBuffer'),\n    copyArray = require('./_copyArray'),\n    copySymbols = require('./_copySymbols'),\n    copySymbolsIn = require('./_copySymbolsIn'),\n    getAllKeys = require('./_getAllKeys'),\n    getAllKeysIn = require('./_getAllKeysIn'),\n    getTag = require('./_getTag'),\n    initCloneArray = require('./_initCloneArray'),\n    initCloneByTag = require('./_initCloneByTag'),\n    initCloneObject = require('./_initCloneObject'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isMap = require('./isMap'),\n    isObject = require('./isObject'),\n    isSet = require('./isSet'),\n    keys = require('./keys'),\n    keysIn = require('./keysIn');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nmodule.exports = baseClone;\n","var isObject = require('./isObject');\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nmodule.exports = baseCreate;\n","var arrayPush = require('./_arrayPush'),\n    isFlattenable = require('./_isFlattenable');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","var createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n","var castPath = require('./_castPath'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n","var arrayPush = require('./_arrayPush'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nmodule.exports = baseGetAllKeys;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nmodule.exports = baseHasIn;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","var baseIsEqualDeep = require('./_baseIsEqualDeep'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nmodule.exports = baseIsEqual;\n","var Stack = require('./_Stack'),\n    equalArrays = require('./_equalArrays'),\n    equalByTag = require('./_equalByTag'),\n    equalObjects = require('./_equalObjects'),\n    getTag = require('./_getTag'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nmodule.exports = baseIsEqualDeep;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nmodule.exports = baseIsMap;\n","var Stack = require('./_Stack'),\n    baseIsEqual = require('./_baseIsEqual');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nmodule.exports = baseIsMatch;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nmodule.exports = baseIsSet;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","var baseMatches = require('./_baseMatches'),\n    baseMatchesProperty = require('./_baseMatchesProperty'),\n    identity = require('./identity'),\n    isArray = require('./isArray'),\n    property = require('./property');\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nmodule.exports = baseIteratee;\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","var isObject = require('./isObject'),\n    isPrototype = require('./_isPrototype'),\n    nativeKeysIn = require('./_nativeKeysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeysIn;\n","var baseIsMatch = require('./_baseIsMatch'),\n    getMatchData = require('./_getMatchData'),\n    matchesStrictComparable = require('./_matchesStrictComparable');\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nmodule.exports = baseMatches;\n","var baseIsEqual = require('./_baseIsEqual'),\n    get = require('./get'),\n    hasIn = require('./hasIn'),\n    isKey = require('./_isKey'),\n    isStrictComparable = require('./_isStrictComparable'),\n    matchesStrictComparable = require('./_matchesStrictComparable'),\n    toKey = require('./_toKey');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nmodule.exports = baseMatchesProperty;\n","var Stack = require('./_Stack'),\n    assignMergeValue = require('./_assignMergeValue'),\n    baseFor = require('./_baseFor'),\n    baseMergeDeep = require('./_baseMergeDeep'),\n    isObject = require('./isObject'),\n    keysIn = require('./keysIn'),\n    safeGet = require('./_safeGet');\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\nmodule.exports = baseMerge;\n","var assignMergeValue = require('./_assignMergeValue'),\n    cloneBuffer = require('./_cloneBuffer'),\n    cloneTypedArray = require('./_cloneTypedArray'),\n    copyArray = require('./_copyArray'),\n    initCloneObject = require('./_initCloneObject'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLikeObject = require('./isArrayLikeObject'),\n    isBuffer = require('./isBuffer'),\n    isFunction = require('./isFunction'),\n    isObject = require('./isObject'),\n    isPlainObject = require('./isPlainObject'),\n    isTypedArray = require('./isTypedArray'),\n    safeGet = require('./_safeGet'),\n    toPlainObject = require('./toPlainObject');\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\nmodule.exports = baseMergeDeep;\n","var basePickBy = require('./_basePickBy'),\n    hasIn = require('./hasIn');\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, paths) {\n  return basePickBy(object, paths, function(value, path) {\n    return hasIn(object, path);\n  });\n}\n\nmodule.exports = basePick;\n","var baseGet = require('./_baseGet'),\n    baseSet = require('./_baseSet'),\n    castPath = require('./_castPath');\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, paths, predicate) {\n  var index = -1,\n      length = paths.length,\n      result = {};\n\n  while (++index < length) {\n    var path = paths[index],\n        value = baseGet(object, path);\n\n    if (predicate(value, path)) {\n      baseSet(result, castPath(path, object), value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = basePickBy;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n","var baseGet = require('./_baseGet');\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nmodule.exports = basePropertyDeep;\n","var identity = require('./identity'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nmodule.exports = baseRest;\n","var assignValue = require('./_assignValue'),\n    castPath = require('./_castPath'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n      return object;\n    }\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nmodule.exports = baseSet;\n","var constant = require('./constant'),\n    defineProperty = require('./_defineProperty'),\n    identity = require('./identity');\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nmodule.exports = baseSetToString;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var arrayMap = require('./_arrayMap');\n\n/**\n * The base implementation of `_.values` and `_.valuesIn` which creates an\n * array of `object` property values corresponding to the property names\n * of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the array of property values.\n */\nfunction baseValues(object, props) {\n  return arrayMap(props, function(key) {\n    return object[key];\n  });\n}\n\nmodule.exports = baseValues;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nmodule.exports = cacheHas;\n","var identity = require('./identity');\n\n/**\n * Casts `value` to `identity` if it's not a function.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Function} Returns cast function.\n */\nfunction castFunction(value) {\n  return typeof value == 'function' ? value : identity;\n}\n\nmodule.exports = castFunction;\n","var isArray = require('./isArray'),\n    isKey = require('./_isKey'),\n    stringToPath = require('./_stringToPath'),\n    toString = require('./toString');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nmodule.exports = castPath;\n","var Uint8Array = require('./_Uint8Array');\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nmodule.exports = cloneArrayBuffer;\n","var root = require('./_root');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nmodule.exports = cloneBuffer;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nmodule.exports = cloneDataView;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nmodule.exports = cloneRegExp;\n","var Symbol = require('./_Symbol');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nmodule.exports = cloneSymbol;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nmodule.exports = cloneTypedArray;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = copyArray;\n","var assignValue = require('./_assignValue'),\n    baseAssignValue = require('./_baseAssignValue');\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nmodule.exports = copyObject;\n","var copyObject = require('./_copyObject'),\n    getSymbols = require('./_getSymbols');\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nmodule.exports = copySymbols;\n","var copyObject = require('./_copyObject'),\n    getSymbolsIn = require('./_getSymbolsIn');\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nmodule.exports = copySymbolsIn;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","var baseRest = require('./_baseRest'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nmodule.exports = createAssigner;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n","var baseMerge = require('./_baseMerge'),\n    isObject = require('./isObject');\n\n/**\n * Used by `_.defaultsDeep` to customize its `_.merge` use to merge source\n * objects into destination objects that are passed thru.\n *\n * @private\n * @param {*} objValue The destination value.\n * @param {*} srcValue The source value.\n * @param {string} key The key of the property to merge.\n * @param {Object} object The parent object of `objValue`.\n * @param {Object} source The parent object of `srcValue`.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n * @returns {*} Returns the value to assign.\n */\nfunction customDefaultsMerge(objValue, srcValue, key, object, source, stack) {\n  if (isObject(objValue) && isObject(srcValue)) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, objValue);\n    baseMerge(objValue, srcValue, undefined, customDefaultsMerge, stack);\n    stack['delete'](srcValue);\n  }\n  return objValue;\n}\n\nmodule.exports = customDefaultsMerge;\n","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","var SetCache = require('./_SetCache'),\n    arraySome = require('./_arraySome'),\n    cacheHas = require('./_cacheHas');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalArrays;\n","var Symbol = require('./_Symbol'),\n    Uint8Array = require('./_Uint8Array'),\n    eq = require('./eq'),\n    equalArrays = require('./_equalArrays'),\n    mapToArray = require('./_mapToArray'),\n    setToArray = require('./_setToArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nmodule.exports = equalByTag;\n","var getAllKeys = require('./_getAllKeys');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalObjects;\n","var flatten = require('./flatten'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * A specialized version of `baseRest` which flattens the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @returns {Function} Returns the new function.\n */\nfunction flatRest(func) {\n  return setToString(overRest(func, undefined, flatten), func + '');\n}\n\nmodule.exports = flatRest;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbols = require('./_getSymbols'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nmodule.exports = getAllKeys;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbolsIn = require('./_getSymbolsIn'),\n    keysIn = require('./keysIn');\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nmodule.exports = getAllKeysIn;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","var isStrictComparable = require('./_isStrictComparable'),\n    keys = require('./keys');\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nmodule.exports = getMatchData;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var overArg = require('./_overArg');\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nmodule.exports = getPrototype;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","var arrayFilter = require('./_arrayFilter'),\n    stubArray = require('./stubArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nmodule.exports = getSymbols;\n","var arrayPush = require('./_arrayPush'),\n    getPrototype = require('./_getPrototype'),\n    getSymbols = require('./_getSymbols'),\n    stubArray = require('./stubArray');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nmodule.exports = getSymbolsIn;\n","var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var castPath = require('./_castPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isLength = require('./isLength'),\n    toKey = require('./_toKey');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nmodule.exports = hasPath;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nmodule.exports = initCloneArray;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer'),\n    cloneDataView = require('./_cloneDataView'),\n    cloneRegExp = require('./_cloneRegExp'),\n    cloneSymbol = require('./_cloneSymbol'),\n    cloneTypedArray = require('./_cloneTypedArray');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nmodule.exports = initCloneByTag;\n","var baseCreate = require('./_baseCreate'),\n    getPrototype = require('./_getPrototype'),\n    isPrototype = require('./_isPrototype');\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nmodule.exports = initCloneObject;\n","var Symbol = require('./_Symbol'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray');\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","var eq = require('./eq'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject');\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n","var isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nmodule.exports = isKey;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","var isObject = require('./isObject');\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nmodule.exports = isStrictComparable;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nmodule.exports = mapToArray;\n","/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nmodule.exports = matchesStrictComparable;\n","var memoize = require('./memoize');\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nmodule.exports = memoizeCapped;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = nativeKeysIn;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","var apply = require('./_apply');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nmodule.exports = overRest;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\nmodule.exports = safeGet;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nmodule.exports = setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nmodule.exports = setCacheHas;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nmodule.exports = setToArray;\n","var baseSetToString = require('./_baseSetToString'),\n    shortOut = require('./_shortOut');\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nmodule.exports = setToString;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nmodule.exports = shortOut;\n","var ListCache = require('./_ListCache');\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nmodule.exports = stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nmodule.exports = stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nmodule.exports = stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nmodule.exports = stackHas;\n","var ListCache = require('./_ListCache'),\n    Map = require('./_Map'),\n    MapCache = require('./_MapCache');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nmodule.exports = stackSet;\n","var memoizeCapped = require('./_memoizeCapped');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nmodule.exports = stringToPath;\n","var isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toKey;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n","var baseClamp = require('./_baseClamp'),\n    toNumber = require('./toNumber');\n\n/**\n * Clamps `number` within the inclusive `lower` and `upper` bounds.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Number\n * @param {number} number The number to clamp.\n * @param {number} [lower] The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the clamped number.\n * @example\n *\n * _.clamp(-10, -5, 5);\n * // => -5\n *\n * _.clamp(10, -5, 5);\n * // => 5\n */\nfunction clamp(number, lower, upper) {\n  if (upper === undefined) {\n    upper = lower;\n    lower = undefined;\n  }\n  if (upper !== undefined) {\n    upper = toNumber(upper);\n    upper = upper === upper ? upper : 0;\n  }\n  if (lower !== undefined) {\n    lower = toNumber(lower);\n    lower = lower === lower ? lower : 0;\n  }\n  return baseClamp(toNumber(number), lower, upper);\n}\n\nmodule.exports = clamp;\n","var baseClone = require('./_baseClone');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * Creates a shallow clone of `value`.\n *\n * **Note:** This method is loosely based on the\n * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n * and supports cloning arrays, array buffers, booleans, date objects, maps,\n * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n * arrays. The own enumerable properties of `arguments` objects are cloned\n * as plain objects. An empty object is returned for uncloneable values such\n * as error objects, functions, DOM nodes, and WeakMaps.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to clone.\n * @returns {*} Returns the cloned value.\n * @see _.cloneDeep\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var shallow = _.clone(objects);\n * console.log(shallow[0] === objects[0]);\n * // => true\n */\nfunction clone(value) {\n  return baseClone(value, CLONE_SYMBOLS_FLAG);\n}\n\nmodule.exports = clone;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","/**\n * Checks `value` to determine whether a default value should be returned in\n * its place. The `defaultValue` is returned if `value` is `NaN`, `null`,\n * or `undefined`.\n *\n * @static\n * @memberOf _\n * @since 4.14.0\n * @category Util\n * @param {*} value The value to check.\n * @param {*} defaultValue The default value.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * _.defaultTo(1, 10);\n * // => 1\n *\n * _.defaultTo(undefined, 10);\n * // => 10\n */\nfunction defaultTo(value, defaultValue) {\n  return (value == null || value !== value) ? defaultValue : value;\n}\n\nmodule.exports = defaultTo;\n","var baseRest = require('./_baseRest'),\n    eq = require('./eq'),\n    isIterateeCall = require('./_isIterateeCall'),\n    keysIn = require('./keysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns own and inherited enumerable string keyed properties of source\n * objects to the destination object for all destination properties that\n * resolve to `undefined`. Source objects are applied from left to right.\n * Once a property is set, additional values of the same property are ignored.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.defaultsDeep\n * @example\n *\n * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n * // => { 'a': 1, 'b': 2 }\n */\nvar defaults = baseRest(function(object, sources) {\n  object = Object(object);\n\n  var index = -1;\n  var length = sources.length;\n  var guard = length > 2 ? sources[2] : undefined;\n\n  if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n    length = 1;\n  }\n\n  while (++index < length) {\n    var source = sources[index];\n    var props = keysIn(source);\n    var propsIndex = -1;\n    var propsLength = props.length;\n\n    while (++propsIndex < propsLength) {\n      var key = props[propsIndex];\n      var value = object[key];\n\n      if (value === undefined ||\n          (eq(value, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n        object[key] = source[key];\n      }\n    }\n  }\n\n  return object;\n});\n\nmodule.exports = defaults;\n","var apply = require('./_apply'),\n    baseRest = require('./_baseRest'),\n    customDefaultsMerge = require('./_customDefaultsMerge'),\n    mergeWith = require('./mergeWith');\n\n/**\n * This method is like `_.defaults` except that it recursively assigns\n * default properties.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 3.10.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.defaults\n * @example\n *\n * _.defaultsDeep({ 'a': { 'b': 2 } }, { 'a': { 'b': 1, 'c': 3 } });\n * // => { 'a': { 'b': 2, 'c': 3 } }\n */\nvar defaultsDeep = baseRest(function(args) {\n  args.push(undefined, customDefaultsMerge);\n  return apply(mergeWith, undefined, args);\n});\n\nmodule.exports = defaultsDeep;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var baseFlatten = require('./_baseFlatten');\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nmodule.exports = flatten;\n","var baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","var baseHasIn = require('./_baseHasIn'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nmodule.exports = hasIn;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","var isArrayLike = require('./isArrayLike'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nmodule.exports = isArrayLikeObject;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","var baseKeys = require('./_baseKeys'),\n    getTag = require('./_getTag'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLike = require('./isArrayLike'),\n    isBuffer = require('./isBuffer'),\n    isPrototype = require('./_isPrototype'),\n    isTypedArray = require('./isTypedArray');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    setTag = '[object Set]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if `value` is an empty object, collection, map, or set.\n *\n * Objects are considered empty if they have no own enumerable string keyed\n * properties.\n *\n * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n * jQuery-like collections are considered empty if they have a `length` of `0`.\n * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (value == null) {\n    return true;\n  }\n  if (isArrayLike(value) &&\n      (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n        isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n    return !value.length;\n  }\n  var tag = getTag(value);\n  if (tag == mapTag || tag == setTag) {\n    return !value.size;\n  }\n  if (isPrototype(value)) {\n    return !baseKeys(value).length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = isEmpty;\n","var baseIsEqual = require('./_baseIsEqual');\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nmodule.exports = isEqual;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike'),\n    isPlainObject = require('./isPlainObject');\n\n/** `Object#toString` result references. */\nvar domExcTag = '[object DOMException]',\n    errorTag = '[object Error]';\n\n/**\n * Checks if `value` is an `Error`, `EvalError`, `RangeError`, `ReferenceError`,\n * `SyntaxError`, `TypeError`, or `URIError` object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an error object, else `false`.\n * @example\n *\n * _.isError(new Error);\n * // => true\n *\n * _.isError(Error);\n * // => false\n */\nfunction isError(value) {\n  if (!isObjectLike(value)) {\n    return false;\n  }\n  var tag = baseGetTag(value);\n  return tag == errorTag || tag == domExcTag ||\n    (typeof value.message == 'string' && typeof value.name == 'string' && !isPlainObject(value));\n}\n\nmodule.exports = isError;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","var baseIsMap = require('./_baseIsMap'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nmodule.exports = isMap;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    getPrototype = require('./_getPrototype'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nmodule.exports = isPlainObject;\n","var baseIsSet = require('./_baseIsSet'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nmodule.exports = isSet;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeysIn = require('./_baseKeysIn'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nmodule.exports = keysIn;\n","var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n","var baseMerge = require('./_baseMerge'),\n    createAssigner = require('./_createAssigner');\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nmodule.exports = merge;\n","var baseMerge = require('./_baseMerge'),\n    createAssigner = require('./_createAssigner');\n\n/**\n * This method is like `_.merge` except that it accepts `customizer` which\n * is invoked to produce the merged values of the destination and source\n * properties. If `customizer` returns `undefined`, merging is handled by the\n * method instead. The `customizer` is invoked with six arguments:\n * (objValue, srcValue, key, object, source, stack).\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} sources The source objects.\n * @param {Function} customizer The function to customize assigned values.\n * @returns {Object} Returns `object`.\n * @example\n *\n * function customizer(objValue, srcValue) {\n *   if (_.isArray(objValue)) {\n *     return objValue.concat(srcValue);\n *   }\n * }\n *\n * var object = { 'a': [1], 'b': [2] };\n * var other = { 'a': [3], 'b': [4] };\n *\n * _.mergeWith(object, other, customizer);\n * // => { 'a': [1, 3], 'b': [2, 4] }\n */\nvar mergeWith = createAssigner(function(object, source, srcIndex, customizer) {\n  baseMerge(object, source, srcIndex, customizer);\n});\n\nmodule.exports = mergeWith;\n","/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that negates the result of the predicate `func`. The\n * `func` predicate is invoked with the `this` binding and arguments of the\n * created function.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Function\n * @param {Function} predicate The predicate to negate.\n * @returns {Function} Returns the new negated function.\n * @example\n *\n * function isEven(n) {\n *   return n % 2 == 0;\n * }\n *\n * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));\n * // => [1, 3, 5]\n */\nfunction negate(predicate) {\n  if (typeof predicate != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  return function() {\n    var args = arguments;\n    switch (args.length) {\n      case 0: return !predicate.call(this);\n      case 1: return !predicate.call(this, args[0]);\n      case 2: return !predicate.call(this, args[0], args[1]);\n      case 3: return !predicate.call(this, args[0], args[1], args[2]);\n    }\n    return !predicate.apply(this, args);\n  };\n}\n\nmodule.exports = negate;\n","/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nmodule.exports = noop;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var baseIteratee = require('./_baseIteratee'),\n    negate = require('./negate'),\n    pickBy = require('./pickBy');\n\n/**\n * The opposite of `_.pickBy`; this method creates an object composed of\n * the own and inherited enumerable string keyed properties of `object` that\n * `predicate` doesn't return truthy for. The predicate is invoked with two\n * arguments: (value, key).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The source object.\n * @param {Function} [predicate=_.identity] The function invoked per property.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.omitBy(object, _.isNumber);\n * // => { 'b': '2' }\n */\nfunction omitBy(object, predicate) {\n  return pickBy(object, negate(baseIteratee(predicate)));\n}\n\nmodule.exports = omitBy;\n","var basePick = require('./_basePick'),\n    flatRest = require('./_flatRest');\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to pick.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pick(object, ['a', 'c']);\n * // => { 'a': 1, 'c': 3 }\n */\nvar pick = flatRest(function(object, paths) {\n  return object == null ? {} : basePick(object, paths);\n});\n\nmodule.exports = pick;\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    basePickBy = require('./_basePickBy'),\n    getAllKeysIn = require('./_getAllKeysIn');\n\n/**\n * Creates an object composed of the `object` properties `predicate` returns\n * truthy for. The predicate is invoked with two arguments: (value, key).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The source object.\n * @param {Function} [predicate=_.identity] The function invoked per property.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pickBy(object, _.isNumber);\n * // => { 'a': 1, 'c': 3 }\n */\nfunction pickBy(object, predicate) {\n  if (object == null) {\n    return {};\n  }\n  var props = arrayMap(getAllKeysIn(object), function(prop) {\n    return [prop];\n  });\n  predicate = baseIteratee(predicate);\n  return basePickBy(object, props, function(value, path) {\n    return predicate(value, path[0]);\n  });\n}\n\nmodule.exports = pickBy;\n","var baseProperty = require('./_baseProperty'),\n    basePropertyDeep = require('./_basePropertyDeep'),\n    isKey = require('./_isKey'),\n    toKey = require('./_toKey');\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nmodule.exports = property;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","var baseTimes = require('./_baseTimes'),\n    castFunction = require('./_castFunction'),\n    toInteger = require('./toInteger');\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * Invokes the iteratee `n` times, returning an array of the results of\n * each invocation. The iteratee is invoked with one argument; (index).\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n * @example\n *\n * _.times(3, String);\n * // => ['0', '1', '2']\n *\n *  _.times(4, _.constant(0));\n * // => [0, 0, 0, 0]\n */\nfunction times(n, iteratee) {\n  n = toInteger(n);\n  if (n < 1 || n > MAX_SAFE_INTEGER) {\n    return [];\n  }\n  var index = MAX_ARRAY_LENGTH,\n      length = nativeMin(n, MAX_ARRAY_LENGTH);\n\n  iteratee = castFunction(iteratee);\n  n -= MAX_ARRAY_LENGTH;\n\n  var result = baseTimes(length, iteratee);\n  while (++index < n) {\n    iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = times;\n","var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nmodule.exports = toFinite;\n","var toFinite = require('./toFinite');\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nmodule.exports = toInteger;\n","var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nmodule.exports = toPlainObject;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","var baseValues = require('./_baseValues'),\n    keys = require('./keys');\n\n/**\n * Creates an array of the own enumerable string keyed property values of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property values.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.values(new Foo);\n * // => [1, 2] (iteration order is not guaranteed)\n *\n * _.values('hi');\n * // => ['h', 'i']\n */\nfunction values(object) {\n  return object == null ? [] : baseValues(object, keys(object));\n}\n\nmodule.exports = values;\n","/*global define:false */\n/**\n * Copyright 2012-2017 Craig Campbell\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * Mousetrap is a simple keyboard shortcut library for Javascript with\n * no external dependencies\n *\n * @version 1.6.2\n * @url craig.is/killing/mice\n */\n(function(window, document, undefined) {\n\n    // Check if mousetrap is used inside browser, if not, return\n    if (!window) {\n        return;\n    }\n\n    /**\n     * mapping of special keycodes to their corresponding keys\n     *\n     * everything in this dictionary cannot use keypress events\n     * so it has to be here to map to the correct keycodes for\n     * keyup/keydown events\n     *\n     * @type {Object}\n     */\n    var _MAP = {\n        8: 'backspace',\n        9: 'tab',\n        13: 'enter',\n        16: 'shift',\n        17: 'ctrl',\n        18: 'alt',\n        20: 'capslock',\n        27: 'esc',\n        32: 'space',\n        33: 'pageup',\n        34: 'pagedown',\n        35: 'end',\n        36: 'home',\n        37: 'left',\n        38: 'up',\n        39: 'right',\n        40: 'down',\n        45: 'ins',\n        46: 'del',\n        91: 'meta',\n        93: 'meta',\n        224: 'meta'\n    };\n\n    /**\n     * mapping for special characters so they can support\n     *\n     * this dictionary is only used incase you want to bind a\n     * keyup or keydown event to one of these keys\n     *\n     * @type {Object}\n     */\n    var _KEYCODE_MAP = {\n        106: '*',\n        107: '+',\n        109: '-',\n        110: '.',\n        111 : '/',\n        186: ';',\n        187: '=',\n        188: ',',\n        189: '-',\n        190: '.',\n        191: '/',\n        192: '`',\n        219: '[',\n        220: '\\\\',\n        221: ']',\n        222: '\\''\n    };\n\n    /**\n     * this is a mapping of keys that require shift on a US keypad\n     * back to the non shift equivelents\n     *\n     * this is so you can use keyup events with these keys\n     *\n     * note that this will only work reliably on US keyboards\n     *\n     * @type {Object}\n     */\n    var _SHIFT_MAP = {\n        '~': '`',\n        '!': '1',\n        '@': '2',\n        '#': '3',\n        '$': '4',\n        '%': '5',\n        '^': '6',\n        '&': '7',\n        '*': '8',\n        '(': '9',\n        ')': '0',\n        '_': '-',\n        '+': '=',\n        ':': ';',\n        '\\\"': '\\'',\n        '<': ',',\n        '>': '.',\n        '?': '/',\n        '|': '\\\\'\n    };\n\n    /**\n     * this is a list of special strings you can use to map\n     * to modifier keys when you specify your keyboard shortcuts\n     *\n     * @type {Object}\n     */\n    var _SPECIAL_ALIASES = {\n        'option': 'alt',\n        'command': 'meta',\n        'return': 'enter',\n        'escape': 'esc',\n        'plus': '+',\n        'mod': /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? 'meta' : 'ctrl'\n    };\n\n    /**\n     * variable to store the flipped version of _MAP from above\n     * needed to check if we should use keypress or not when no action\n     * is specified\n     *\n     * @type {Object|undefined}\n     */\n    var _REVERSE_MAP;\n\n    /**\n     * loop through the f keys, f1 to f19 and add them to the map\n     * programatically\n     */\n    for (var i = 1; i < 20; ++i) {\n        _MAP[111 + i] = 'f' + i;\n    }\n\n    /**\n     * loop through to map numbers on the numeric keypad\n     */\n    for (i = 0; i <= 9; ++i) {\n\n        // This needs to use a string cause otherwise since 0 is falsey\n        // mousetrap will never fire for numpad 0 pressed as part of a keydown\n        // event.\n        //\n        // @see https://github.com/ccampbell/mousetrap/pull/258\n        _MAP[i + 96] = i.toString();\n    }\n\n    /**\n     * cross browser add event method\n     *\n     * @param {Element|HTMLDocument} object\n     * @param {string} type\n     * @param {Function} callback\n     * @returns void\n     */\n    function _addEvent(object, type, callback) {\n        if (object.addEventListener) {\n            object.addEventListener(type, callback, false);\n            return;\n        }\n\n        object.attachEvent('on' + type, callback);\n    }\n\n    /**\n     * takes the event and returns the key character\n     *\n     * @param {Event} e\n     * @return {string}\n     */\n    function _characterFromEvent(e) {\n\n        // for keypress events we should return the character as is\n        if (e.type == 'keypress') {\n            var character = String.fromCharCode(e.which);\n\n            // if the shift key is not pressed then it is safe to assume\n            // that we want the character to be lowercase.  this means if\n            // you accidentally have caps lock on then your key bindings\n            // will continue to work\n            //\n            // the only side effect that might not be desired is if you\n            // bind something like 'A' cause you want to trigger an\n            // event when capital A is pressed caps lock will no longer\n            // trigger the event.  shift+a will though.\n            if (!e.shiftKey) {\n                character = character.toLowerCase();\n            }\n\n            return character;\n        }\n\n        // for non keypress events the special maps are needed\n        if (_MAP[e.which]) {\n            return _MAP[e.which];\n        }\n\n        if (_KEYCODE_MAP[e.which]) {\n            return _KEYCODE_MAP[e.which];\n        }\n\n        // if it is not in the special map\n\n        // with keydown and keyup events the character seems to always\n        // come in as an uppercase character whether you are pressing shift\n        // or not.  we should make sure it is always lowercase for comparisons\n        return String.fromCharCode(e.which).toLowerCase();\n    }\n\n    /**\n     * checks if two arrays are equal\n     *\n     * @param {Array} modifiers1\n     * @param {Array} modifiers2\n     * @returns {boolean}\n     */\n    function _modifiersMatch(modifiers1, modifiers2) {\n        return modifiers1.sort().join(',') === modifiers2.sort().join(',');\n    }\n\n    /**\n     * takes a key event and figures out what the modifiers are\n     *\n     * @param {Event} e\n     * @returns {Array}\n     */\n    function _eventModifiers(e) {\n        var modifiers = [];\n\n        if (e.shiftKey) {\n            modifiers.push('shift');\n        }\n\n        if (e.altKey) {\n            modifiers.push('alt');\n        }\n\n        if (e.ctrlKey) {\n            modifiers.push('ctrl');\n        }\n\n        if (e.metaKey) {\n            modifiers.push('meta');\n        }\n\n        return modifiers;\n    }\n\n    /**\n     * prevents default for this event\n     *\n     * @param {Event} e\n     * @returns void\n     */\n    function _preventDefault(e) {\n        if (e.preventDefault) {\n            e.preventDefault();\n            return;\n        }\n\n        e.returnValue = false;\n    }\n\n    /**\n     * stops propogation for this event\n     *\n     * @param {Event} e\n     * @returns void\n     */\n    function _stopPropagation(e) {\n        if (e.stopPropagation) {\n            e.stopPropagation();\n            return;\n        }\n\n        e.cancelBubble = true;\n    }\n\n    /**\n     * determines if the keycode specified is a modifier key or not\n     *\n     * @param {string} key\n     * @returns {boolean}\n     */\n    function _isModifier(key) {\n        return key == 'shift' || key == 'ctrl' || key == 'alt' || key == 'meta';\n    }\n\n    /**\n     * reverses the map lookup so that we can look for specific keys\n     * to see what can and can't use keypress\n     *\n     * @return {Object}\n     */\n    function _getReverseMap() {\n        if (!_REVERSE_MAP) {\n            _REVERSE_MAP = {};\n            for (var key in _MAP) {\n\n                // pull out the numeric keypad from here cause keypress should\n                // be able to detect the keys from the character\n                if (key > 95 && key < 112) {\n                    continue;\n                }\n\n                if (_MAP.hasOwnProperty(key)) {\n                    _REVERSE_MAP[_MAP[key]] = key;\n                }\n            }\n        }\n        return _REVERSE_MAP;\n    }\n\n    /**\n     * picks the best action based on the key combination\n     *\n     * @param {string} key - character for key\n     * @param {Array} modifiers\n     * @param {string=} action passed in\n     */\n    function _pickBestAction(key, modifiers, action) {\n\n        // if no action was picked in we should try to pick the one\n        // that we think would work best for this key\n        if (!action) {\n            action = _getReverseMap()[key] ? 'keydown' : 'keypress';\n        }\n\n        // modifier keys don't work as expected with keypress,\n        // switch to keydown\n        if (action == 'keypress' && modifiers.length) {\n            action = 'keydown';\n        }\n\n        return action;\n    }\n\n    /**\n     * Converts from a string key combination to an array\n     *\n     * @param  {string} combination like \"command+shift+l\"\n     * @return {Array}\n     */\n    function _keysFromString(combination) {\n        if (combination === '+') {\n            return ['+'];\n        }\n\n        combination = combination.replace(/\\+{2}/g, '+plus');\n        return combination.split('+');\n    }\n\n    /**\n     * Gets info for a specific key combination\n     *\n     * @param  {string} combination key combination (\"command+s\" or \"a\" or \"*\")\n     * @param  {string=} action\n     * @returns {Object}\n     */\n    function _getKeyInfo(combination, action) {\n        var keys;\n        var key;\n        var i;\n        var modifiers = [];\n\n        // take the keys from this pattern and figure out what the actual\n        // pattern is all about\n        keys = _keysFromString(combination);\n\n        for (i = 0; i < keys.length; ++i) {\n            key = keys[i];\n\n            // normalize key names\n            if (_SPECIAL_ALIASES[key]) {\n                key = _SPECIAL_ALIASES[key];\n            }\n\n            // if this is not a keypress event then we should\n            // be smart about using shift keys\n            // this will only work for US keyboards however\n            if (action && action != 'keypress' && _SHIFT_MAP[key]) {\n                key = _SHIFT_MAP[key];\n                modifiers.push('shift');\n            }\n\n            // if this key is a modifier then add it to the list of modifiers\n            if (_isModifier(key)) {\n                modifiers.push(key);\n            }\n        }\n\n        // depending on what the key combination is\n        // we will try to pick the best event for it\n        action = _pickBestAction(key, modifiers, action);\n\n        return {\n            key: key,\n            modifiers: modifiers,\n            action: action\n        };\n    }\n\n    function _belongsTo(element, ancestor) {\n        if (element === null || element === document) {\n            return false;\n        }\n\n        if (element === ancestor) {\n            return true;\n        }\n\n        return _belongsTo(element.parentNode, ancestor);\n    }\n\n    function Mousetrap(targetElement) {\n        var self = this;\n\n        targetElement = targetElement || document;\n\n        if (!(self instanceof Mousetrap)) {\n            return new Mousetrap(targetElement);\n        }\n\n        /**\n         * element to attach key events to\n         *\n         * @type {Element}\n         */\n        self.target = targetElement;\n\n        /**\n         * a list of all the callbacks setup via Mousetrap.bind()\n         *\n         * @type {Object}\n         */\n        self._callbacks = {};\n\n        /**\n         * direct map of string combinations to callbacks used for trigger()\n         *\n         * @type {Object}\n         */\n        self._directMap = {};\n\n        /**\n         * keeps track of what level each sequence is at since multiple\n         * sequences can start out with the same sequence\n         *\n         * @type {Object}\n         */\n        var _sequenceLevels = {};\n\n        /**\n         * variable to store the setTimeout call\n         *\n         * @type {null|number}\n         */\n        var _resetTimer;\n\n        /**\n         * temporary state where we will ignore the next keyup\n         *\n         * @type {boolean|string}\n         */\n        var _ignoreNextKeyup = false;\n\n        /**\n         * temporary state where we will ignore the next keypress\n         *\n         * @type {boolean}\n         */\n        var _ignoreNextKeypress = false;\n\n        /**\n         * are we currently inside of a sequence?\n         * type of action (\"keyup\" or \"keydown\" or \"keypress\") or false\n         *\n         * @type {boolean|string}\n         */\n        var _nextExpectedAction = false;\n\n        /**\n         * resets all sequence counters except for the ones passed in\n         *\n         * @param {Object} doNotReset\n         * @returns void\n         */\n        function _resetSequences(doNotReset) {\n            doNotReset = doNotReset || {};\n\n            var activeSequences = false,\n                key;\n\n            for (key in _sequenceLevels) {\n                if (doNotReset[key]) {\n                    activeSequences = true;\n                    continue;\n                }\n                _sequenceLevels[key] = 0;\n            }\n\n            if (!activeSequences) {\n                _nextExpectedAction = false;\n            }\n        }\n\n        /**\n         * finds all callbacks that match based on the keycode, modifiers,\n         * and action\n         *\n         * @param {string} character\n         * @param {Array} modifiers\n         * @param {Event|Object} e\n         * @param {string=} sequenceName - name of the sequence we are looking for\n         * @param {string=} combination\n         * @param {number=} level\n         * @returns {Array}\n         */\n        function _getMatches(character, modifiers, e, sequenceName, combination, level) {\n            var i;\n            var callback;\n            var matches = [];\n            var action = e.type;\n\n            // if there are no events related to this keycode\n            if (!self._callbacks[character]) {\n                return [];\n            }\n\n            // if a modifier key is coming up on its own we should allow it\n            if (action == 'keyup' && _isModifier(character)) {\n                modifiers = [character];\n            }\n\n            // loop through all callbacks for the key that was pressed\n            // and see if any of them match\n            for (i = 0; i < self._callbacks[character].length; ++i) {\n                callback = self._callbacks[character][i];\n\n                // if a sequence name is not specified, but this is a sequence at\n                // the wrong level then move onto the next match\n                if (!sequenceName && callback.seq && _sequenceLevels[callback.seq] != callback.level) {\n                    continue;\n                }\n\n                // if the action we are looking for doesn't match the action we got\n                // then we should keep going\n                if (action != callback.action) {\n                    continue;\n                }\n\n                // if this is a keypress event and the meta key and control key\n                // are not pressed that means that we need to only look at the\n                // character, otherwise check the modifiers as well\n                //\n                // chrome will not fire a keypress if meta or control is down\n                // safari will fire a keypress if meta or meta+shift is down\n                // firefox will fire a keypress if meta or control is down\n                if ((action == 'keypress' && !e.metaKey && !e.ctrlKey) || _modifiersMatch(modifiers, callback.modifiers)) {\n\n                    // when you bind a combination or sequence a second time it\n                    // should overwrite the first one.  if a sequenceName or\n                    // combination is specified in this call it does just that\n                    //\n                    // @todo make deleting its own method?\n                    var deleteCombo = !sequenceName && callback.combo == combination;\n                    var deleteSequence = sequenceName && callback.seq == sequenceName && callback.level == level;\n                    if (deleteCombo || deleteSequence) {\n                        self._callbacks[character].splice(i, 1);\n                    }\n\n                    matches.push(callback);\n                }\n            }\n\n            return matches;\n        }\n\n        /**\n         * actually calls the callback function\n         *\n         * if your callback function returns false this will use the jquery\n         * convention - prevent default and stop propogation on the event\n         *\n         * @param {Function} callback\n         * @param {Event} e\n         * @returns void\n         */\n        function _fireCallback(callback, e, combo, sequence) {\n\n            // if this event should not happen stop here\n            if (self.stopCallback(e, e.target || e.srcElement, combo, sequence)) {\n                return;\n            }\n\n            if (callback(e, combo) === false) {\n                _preventDefault(e);\n                _stopPropagation(e);\n            }\n        }\n\n        /**\n         * handles a character key event\n         *\n         * @param {string} character\n         * @param {Array} modifiers\n         * @param {Event} e\n         * @returns void\n         */\n        self._handleKey = function(character, modifiers, e) {\n            var callbacks = _getMatches(character, modifiers, e);\n            var i;\n            var doNotReset = {};\n            var maxLevel = 0;\n            var processedSequenceCallback = false;\n\n            // Calculate the maxLevel for sequences so we can only execute the longest callback sequence\n            for (i = 0; i < callbacks.length; ++i) {\n                if (callbacks[i].seq) {\n                    maxLevel = Math.max(maxLevel, callbacks[i].level);\n                }\n            }\n\n            // loop through matching callbacks for this key event\n            for (i = 0; i < callbacks.length; ++i) {\n\n                // fire for all sequence callbacks\n                // this is because if for example you have multiple sequences\n                // bound such as \"g i\" and \"g t\" they both need to fire the\n                // callback for matching g cause otherwise you can only ever\n                // match the first one\n                if (callbacks[i].seq) {\n\n                    // only fire callbacks for the maxLevel to prevent\n                    // subsequences from also firing\n                    //\n                    // for example 'a option b' should not cause 'option b' to fire\n                    // even though 'option b' is part of the other sequence\n                    //\n                    // any sequences that do not match here will be discarded\n                    // below by the _resetSequences call\n                    if (callbacks[i].level != maxLevel) {\n                        continue;\n                    }\n\n                    processedSequenceCallback = true;\n\n                    // keep a list of which sequences were matches for later\n                    doNotReset[callbacks[i].seq] = 1;\n                    _fireCallback(callbacks[i].callback, e, callbacks[i].combo, callbacks[i].seq);\n                    continue;\n                }\n\n                // if there were no sequence matches but we are still here\n                // that means this is a regular match so we should fire that\n                if (!processedSequenceCallback) {\n                    _fireCallback(callbacks[i].callback, e, callbacks[i].combo);\n                }\n            }\n\n            // if the key you pressed matches the type of sequence without\n            // being a modifier (ie \"keyup\" or \"keypress\") then we should\n            // reset all sequences that were not matched by this event\n            //\n            // this is so, for example, if you have the sequence \"h a t\" and you\n            // type \"h e a r t\" it does not match.  in this case the \"e\" will\n            // cause the sequence to reset\n            //\n            // modifier keys are ignored because you can have a sequence\n            // that contains modifiers such as \"enter ctrl+space\" and in most\n            // cases the modifier key will be pressed before the next key\n            //\n            // also if you have a sequence such as \"ctrl+b a\" then pressing the\n            // \"b\" key will trigger a \"keypress\" and a \"keydown\"\n            //\n            // the \"keydown\" is expected when there is a modifier, but the\n            // \"keypress\" ends up matching the _nextExpectedAction since it occurs\n            // after and that causes the sequence to reset\n            //\n            // we ignore keypresses in a sequence that directly follow a keydown\n            // for the same character\n            var ignoreThisKeypress = e.type == 'keypress' && _ignoreNextKeypress;\n            if (e.type == _nextExpectedAction && !_isModifier(character) && !ignoreThisKeypress) {\n                _resetSequences(doNotReset);\n            }\n\n            _ignoreNextKeypress = processedSequenceCallback && e.type == 'keydown';\n        };\n\n        /**\n         * handles a keydown event\n         *\n         * @param {Event} e\n         * @returns void\n         */\n        function _handleKeyEvent(e) {\n\n            // normalize e.which for key events\n            // @see http://stackoverflow.com/questions/4285627/javascript-keycode-vs-charcode-utter-confusion\n            if (typeof e.which !== 'number') {\n                e.which = e.keyCode;\n            }\n\n            var character = _characterFromEvent(e);\n\n            // no character found then stop\n            if (!character) {\n                return;\n            }\n\n            // need to use === for the character check because the character can be 0\n            if (e.type == 'keyup' && _ignoreNextKeyup === character) {\n                _ignoreNextKeyup = false;\n                return;\n            }\n\n            self.handleKey(character, _eventModifiers(e), e);\n        }\n\n        /**\n         * called to set a 1 second timeout on the specified sequence\n         *\n         * this is so after each key press in the sequence you have 1 second\n         * to press the next key before you have to start over\n         *\n         * @returns void\n         */\n        function _resetSequenceTimer() {\n            clearTimeout(_resetTimer);\n            _resetTimer = setTimeout(_resetSequences, 1000);\n        }\n\n        /**\n         * binds a key sequence to an event\n         *\n         * @param {string} combo - combo specified in bind call\n         * @param {Array} keys\n         * @param {Function} callback\n         * @param {string=} action\n         * @returns void\n         */\n        function _bindSequence(combo, keys, callback, action) {\n\n            // start off by adding a sequence level record for this combination\n            // and setting the level to 0\n            _sequenceLevels[combo] = 0;\n\n            /**\n             * callback to increase the sequence level for this sequence and reset\n             * all other sequences that were active\n             *\n             * @param {string} nextAction\n             * @returns {Function}\n             */\n            function _increaseSequence(nextAction) {\n                return function() {\n                    _nextExpectedAction = nextAction;\n                    ++_sequenceLevels[combo];\n                    _resetSequenceTimer();\n                };\n            }\n\n            /**\n             * wraps the specified callback inside of another function in order\n             * to reset all sequence counters as soon as this sequence is done\n             *\n             * @param {Event} e\n             * @returns void\n             */\n            function _callbackAndReset(e) {\n                _fireCallback(callback, e, combo);\n\n                // we should ignore the next key up if the action is key down\n                // or keypress.  this is so if you finish a sequence and\n                // release the key the final key will not trigger a keyup\n                if (action !== 'keyup') {\n                    _ignoreNextKeyup = _characterFromEvent(e);\n                }\n\n                // weird race condition if a sequence ends with the key\n                // another sequence begins with\n                setTimeout(_resetSequences, 10);\n            }\n\n            // loop through keys one at a time and bind the appropriate callback\n            // function.  for any key leading up to the final one it should\n            // increase the sequence. after the final, it should reset all sequences\n            //\n            // if an action is specified in the original bind call then that will\n            // be used throughout.  otherwise we will pass the action that the\n            // next key in the sequence should match.  this allows a sequence\n            // to mix and match keypress and keydown events depending on which\n            // ones are better suited to the key provided\n            for (var i = 0; i < keys.length; ++i) {\n                var isFinal = i + 1 === keys.length;\n                var wrappedCallback = isFinal ? _callbackAndReset : _increaseSequence(action || _getKeyInfo(keys[i + 1]).action);\n                _bindSingle(keys[i], wrappedCallback, action, combo, i);\n            }\n        }\n\n        /**\n         * binds a single keyboard combination\n         *\n         * @param {string} combination\n         * @param {Function} callback\n         * @param {string=} action\n         * @param {string=} sequenceName - name of sequence if part of sequence\n         * @param {number=} level - what part of the sequence the command is\n         * @returns void\n         */\n        function _bindSingle(combination, callback, action, sequenceName, level) {\n\n            // store a direct mapped reference for use with Mousetrap.trigger\n            self._directMap[combination + ':' + action] = callback;\n\n            // make sure multiple spaces in a row become a single space\n            combination = combination.replace(/\\s+/g, ' ');\n\n            var sequence = combination.split(' ');\n            var info;\n\n            // if this pattern is a sequence of keys then run through this method\n            // to reprocess each pattern one key at a time\n            if (sequence.length > 1) {\n                _bindSequence(combination, sequence, callback, action);\n                return;\n            }\n\n            info = _getKeyInfo(combination, action);\n\n            // make sure to initialize array if this is the first time\n            // a callback is added for this key\n            self._callbacks[info.key] = self._callbacks[info.key] || [];\n\n            // remove an existing match if there is one\n            _getMatches(info.key, info.modifiers, {type: info.action}, sequenceName, combination, level);\n\n            // add this call back to the array\n            // if it is a sequence put it at the beginning\n            // if not put it at the end\n            //\n            // this is important because the way these are processed expects\n            // the sequence ones to come first\n            self._callbacks[info.key][sequenceName ? 'unshift' : 'push']({\n                callback: callback,\n                modifiers: info.modifiers,\n                action: info.action,\n                seq: sequenceName,\n                level: level,\n                combo: combination\n            });\n        }\n\n        /**\n         * binds multiple combinations to the same callback\n         *\n         * @param {Array} combinations\n         * @param {Function} callback\n         * @param {string|undefined} action\n         * @returns void\n         */\n        self._bindMultiple = function(combinations, callback, action) {\n            for (var i = 0; i < combinations.length; ++i) {\n                _bindSingle(combinations[i], callback, action);\n            }\n        };\n\n        // start!\n        _addEvent(targetElement, 'keypress', _handleKeyEvent);\n        _addEvent(targetElement, 'keydown', _handleKeyEvent);\n        _addEvent(targetElement, 'keyup', _handleKeyEvent);\n    }\n\n    /**\n     * binds an event to mousetrap\n     *\n     * can be a single key, a combination of keys separated with +,\n     * an array of keys, or a sequence of keys separated by spaces\n     *\n     * be sure to list the modifier keys first to make sure that the\n     * correct key ends up getting bound (the last key in the pattern)\n     *\n     * @param {string|Array} keys\n     * @param {Function} callback\n     * @param {string=} action - 'keypress', 'keydown', or 'keyup'\n     * @returns void\n     */\n    Mousetrap.prototype.bind = function(keys, callback, action) {\n        var self = this;\n        keys = keys instanceof Array ? keys : [keys];\n        self._bindMultiple.call(self, keys, callback, action);\n        return self;\n    };\n\n    /**\n     * unbinds an event to mousetrap\n     *\n     * the unbinding sets the callback function of the specified key combo\n     * to an empty function and deletes the corresponding key in the\n     * _directMap dict.\n     *\n     * TODO: actually remove this from the _callbacks dictionary instead\n     * of binding an empty function\n     *\n     * the keycombo+action has to be exactly the same as\n     * it was defined in the bind method\n     *\n     * @param {string|Array} keys\n     * @param {string} action\n     * @returns void\n     */\n    Mousetrap.prototype.unbind = function(keys, action) {\n        var self = this;\n        return self.bind.call(self, keys, function() {}, action);\n    };\n\n    /**\n     * triggers an event that has already been bound\n     *\n     * @param {string} keys\n     * @param {string=} action\n     * @returns void\n     */\n    Mousetrap.prototype.trigger = function(keys, action) {\n        var self = this;\n        if (self._directMap[keys + ':' + action]) {\n            self._directMap[keys + ':' + action]({}, keys);\n        }\n        return self;\n    };\n\n    /**\n     * resets the library back to its initial state.  this is useful\n     * if you want to clear out the current keyboard shortcuts and bind\n     * new ones - for example if you switch to another page\n     *\n     * @returns void\n     */\n    Mousetrap.prototype.reset = function() {\n        var self = this;\n        self._callbacks = {};\n        self._directMap = {};\n        return self;\n    };\n\n    /**\n     * should we stop this event before firing off callbacks\n     *\n     * @param {Event} e\n     * @param {Element} element\n     * @return {boolean}\n     */\n    Mousetrap.prototype.stopCallback = function(e, element) {\n        var self = this;\n\n        // if the element has the class \"mousetrap\" then no need to stop\n        if ((' ' + element.className + ' ').indexOf(' mousetrap ') > -1) {\n            return false;\n        }\n\n        if (_belongsTo(element, self.target)) {\n            return false;\n        }\n\n        // stop for input, select, and textarea\n        return element.tagName == 'INPUT' || element.tagName == 'SELECT' || element.tagName == 'TEXTAREA' || element.isContentEditable;\n    };\n\n    /**\n     * exposes _handleKey publicly so it can be overwritten by extensions\n     */\n    Mousetrap.prototype.handleKey = function() {\n        var self = this;\n        return self._handleKey.apply(self, arguments);\n    };\n\n    /**\n     * allow custom key mappings\n     */\n    Mousetrap.addKeycodes = function(object) {\n        for (var key in object) {\n            if (object.hasOwnProperty(key)) {\n                _MAP[key] = object[key];\n            }\n        }\n        _REVERSE_MAP = null;\n    };\n\n    /**\n     * Init the global mousetrap functions\n     *\n     * This method is needed to allow the global mousetrap functions to work\n     * now that mousetrap is a constructor function.\n     */\n    Mousetrap.init = function() {\n        var documentMousetrap = Mousetrap(document);\n        for (var method in documentMousetrap) {\n            if (method.charAt(0) !== '_') {\n                Mousetrap[method] = (function(method) {\n                    return function() {\n                        return documentMousetrap[method].apply(documentMousetrap, arguments);\n                    };\n                } (method));\n            }\n        }\n    };\n\n    Mousetrap.init();\n\n    // expose mousetrap to the global object\n    window.Mousetrap = Mousetrap;\n\n    // expose as a common js module\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = Mousetrap;\n    }\n\n    // expose mousetrap as an AMD module\n    if (typeof define === 'function' && define.amd) {\n        define(function() {\n            return Mousetrap;\n        });\n    }\n}) (typeof window !== 'undefined' ? window : null, typeof  window !== 'undefined' ? document : null);\n","import isBrowser from './isBrowser';\n\nconst longerTimeoutBrowsers = ['Edge', 'Trident', 'Firefox'];\nlet timeoutDuration = 0;\nfor (let i = 0; i < longerTimeoutBrowsers.length; i += 1) {\n  if (isBrowser && navigator.userAgent.indexOf(longerTimeoutBrowsers[i]) >= 0) {\n    timeoutDuration = 1;\n    break;\n  }\n}\n\nexport function microtaskDebounce(fn) {\n  let called = false\n  return () => {\n    if (called) {\n      return\n    }\n    called = true\n    window.Promise.resolve().then(() => {\n      called = false\n      fn()\n    })\n  }\n}\n\nexport function taskDebounce(fn) {\n  let scheduled = false;\n  return () => {\n    if (!scheduled) {\n      scheduled = true;\n      setTimeout(() => {\n        scheduled = false;\n        fn();\n      }, timeoutDuration);\n    }\n  };\n}\n\nconst supportsMicroTasks = isBrowser && window.Promise\n\n\n/**\n* Create a debounced version of a method, that's asynchronously deferred\n* but called in the minimum time possible.\n*\n* @method\n* @memberof Popper.Utils\n* @argument {Function} fn\n* @returns {Function}\n*/\nexport default (supportsMicroTasks\n  ? microtaskDebounce\n  : taskDebounce);\n","export default typeof window !== 'undefined' && typeof document !== 'undefined';\n","/**\n * Check if the given variable is a function\n * @method\n * @memberof Popper.Utils\n * @argument {Any} functionToCheck - variable to check\n * @returns {Boolean} answer to: is a function?\n */\nexport default function isFunction(functionToCheck) {\n  const getType = {};\n  return (\n    functionToCheck &&\n    getType.toString.call(functionToCheck) === '[object Function]'\n  );\n}\n","/**\n * Get CSS computed property of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Eement} element\n * @argument {String} property\n */\nexport default function getStyleComputedProperty(element, property) {\n  if (element.nodeType !== 1) {\n    return [];\n  }\n  // NOTE: 1 DOM access here\n  const window = element.ownerDocument.defaultView;\n  const css = window.getComputedStyle(element, null);\n  return property ? css[property] : css;\n}\n","/**\n * Returns the parentNode or the host of the element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} parent\n */\nexport default function getParentNode(element) {\n  if (element.nodeName === 'HTML') {\n    return element;\n  }\n  return element.parentNode || element.host;\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport getParentNode from './getParentNode';\n\n/**\n * Returns the scrolling parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} scroll parent\n */\nexport default function getScrollParent(element) {\n  // Return body, `getScroll` will take care to get the correct `scrollTop` from it\n  if (!element) {\n    return document.body\n  }\n\n  switch (element.nodeName) {\n    case 'HTML':\n    case 'BODY':\n      return element.ownerDocument.body\n    case '#document':\n      return element.body\n  }\n\n  // Firefox want us to check `-x` and `-y` variations as well\n  const { overflow, overflowX, overflowY } = getStyleComputedProperty(element);\n  if (/(auto|scroll|overlay)/.test(overflow + overflowY + overflowX)) {\n    return element;\n  }\n\n  return getScrollParent(getParentNode(element));\n}\n","import isBrowser from './isBrowser';\n\nconst isIE11 = isBrowser && !!(window.MSInputMethodContext && document.documentMode);\nconst isIE10 = isBrowser && /MSIE 10/.test(navigator.userAgent);\n\n/**\n * Determines if the browser is Internet Explorer\n * @method\n * @memberof Popper.Utils\n * @param {Number} version to check\n * @returns {Boolean} isIE\n */\nexport default function isIE(version) {\n  if (version === 11) {\n    return isIE11;\n  }\n  if (version === 10) {\n    return isIE10;\n  }\n  return isIE11 || isIE10;\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport isIE from './isIE';\n/**\n * Returns the offset parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} offset parent\n */\nexport default function getOffsetParent(element) {\n  if (!element) {\n    return document.documentElement;\n  }\n\n  const noOffsetParent = isIE(10) ? document.body : null;\n\n  // NOTE: 1 DOM access here\n  let offsetParent = element.offsetParent || null;\n  // Skip hidden elements which don't have an offsetParent\n  while (offsetParent === noOffsetParent && element.nextElementSibling) {\n    offsetParent = (element = element.nextElementSibling).offsetParent;\n  }\n\n  const nodeName = offsetParent && offsetParent.nodeName;\n\n  if (!nodeName || nodeName === 'BODY' || nodeName === 'HTML') {\n    return element ? element.ownerDocument.documentElement : document.documentElement;\n  }\n\n  // .offsetParent will return the closest TH, TD or TABLE in case\n  // no offsetParent is present, I hate this job...\n  if (\n    ['TH', 'TD', 'TABLE'].indexOf(offsetParent.nodeName) !== -1 &&\n    getStyleComputedProperty(offsetParent, 'position') === 'static'\n  ) {\n    return getOffsetParent(offsetParent);\n  }\n\n  return offsetParent;\n}\n","/**\n * Finds the root node (document, shadowDOM root) of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} node\n * @returns {Element} root node\n */\nexport default function getRoot(node) {\n  if (node.parentNode !== null) {\n    return getRoot(node.parentNode);\n  }\n\n  return node;\n}\n","import isOffsetContainer from './isOffsetContainer';\nimport getRoot from './getRoot';\nimport getOffsetParent from './getOffsetParent';\n\n/**\n * Finds the offset parent common to the two provided nodes\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element1\n * @argument {Element} element2\n * @returns {Element} common offset parent\n */\nexport default function findCommonOffsetParent(element1, element2) {\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\n  if (!element1 || !element1.nodeType || !element2 || !element2.nodeType) {\n    return document.documentElement;\n  }\n\n  // Here we make sure to give as \"start\" the element that comes first in the DOM\n  const order =\n    element1.compareDocumentPosition(element2) &\n    Node.DOCUMENT_POSITION_FOLLOWING;\n  const start = order ? element1 : element2;\n  const end = order ? element2 : element1;\n\n  // Get common ancestor container\n  const range = document.createRange();\n  range.setStart(start, 0);\n  range.setEnd(end, 0);\n  const { commonAncestorContainer } = range;\n\n  // Both nodes are inside #document\n  if (\n    (element1 !== commonAncestorContainer &&\n      element2 !== commonAncestorContainer) ||\n    start.contains(end)\n  ) {\n    if (isOffsetContainer(commonAncestorContainer)) {\n      return commonAncestorContainer;\n    }\n\n    return getOffsetParent(commonAncestorContainer);\n  }\n\n  // one of the nodes is inside shadowDOM, find which one\n  const element1root = getRoot(element1);\n  if (element1root.host) {\n    return findCommonOffsetParent(element1root.host, element2);\n  } else {\n    return findCommonOffsetParent(element1, getRoot(element2).host);\n  }\n}\n","import getOffsetParent from './getOffsetParent';\n\nexport default function isOffsetContainer(element) {\n  const { nodeName } = element;\n  if (nodeName === 'BODY') {\n    return false;\n  }\n  return (\n    nodeName === 'HTML' || getOffsetParent(element.firstElementChild) === element\n  );\n}\n","/**\n * Gets the scroll value of the given element in the given side (top and left)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {String} side `top` or `left`\n * @returns {number} amount of scrolled pixels\n */\nexport default function getScroll(element, side = 'top') {\n  const upperSide = side === 'top' ? 'scrollTop' : 'scrollLeft';\n  const nodeName = element.nodeName;\n\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    const html = element.ownerDocument.documentElement;\n    const scrollingElement = element.ownerDocument.scrollingElement || html;\n    return scrollingElement[upperSide];\n  }\n\n  return element[upperSide];\n}\n","import getScroll from './getScroll';\n\n/*\n * Sum or subtract the element scroll values (left and top) from a given rect object\n * @method\n * @memberof Popper.Utils\n * @param {Object} rect - Rect object you want to change\n * @param {HTMLElement} element - The element from the function reads the scroll values\n * @param {Boolean} subtract - set to true if you want to subtract the scroll values\n * @return {Object} rect - The modifier rect object\n */\nexport default function includeScroll(rect, element, subtract = false) {\n  const scrollTop = getScroll(element, 'top');\n  const scrollLeft = getScroll(element, 'left');\n  const modifier = subtract ? -1 : 1;\n  rect.top += scrollTop * modifier;\n  rect.bottom += scrollTop * modifier;\n  rect.left += scrollLeft * modifier;\n  rect.right += scrollLeft * modifier;\n  return rect;\n}\n","/*\n * Helper to detect borders of a given element\n * @method\n * @memberof Popper.Utils\n * @param {CSSStyleDeclaration} styles\n * Result of `getStyleComputedProperty` on the given element\n * @param {String} axis - `x` or `y`\n * @return {number} borders - The borders size of the given axis\n */\n\nexport default function getBordersSize(styles, axis) {\n  const sideA = axis === 'x' ? 'Left' : 'Top';\n  const sideB = sideA === 'Left' ? 'Right' : 'Bottom';\n\n  return (\n    parseFloat(styles[`border${sideA}Width`], 10) +\n    parseFloat(styles[`border${sideB}Width`], 10)\n  );\n}\n","import isIE from './isIE';\n\nfunction getSize(axis, body, html, computedStyle) {\n  return Math.max(\n    body[`offset${axis}`],\n    body[`scroll${axis}`],\n    html[`client${axis}`],\n    html[`offset${axis}`],\n    html[`scroll${axis}`],\n    isIE(10)\n      ? (parseInt(html[`offset${axis}`]) + \n      parseInt(computedStyle[`margin${axis === 'Height' ? 'Top' : 'Left'}`]) + \n      parseInt(computedStyle[`margin${axis === 'Height' ? 'Bottom' : 'Right'}`]))\n    : 0 \n  );\n}\n\nexport default function getWindowSizes(document) {\n  const body = document.body;\n  const html = document.documentElement;\n  const computedStyle = isIE(10) && getComputedStyle(html);\n\n  return {\n    height: getSize('Height', body, html, computedStyle),\n    width: getSize('Width', body, html, computedStyle),\n  };\n}\n","/**\n * Given element offsets, generate an output similar to getBoundingClientRect\n * @method\n * @memberof Popper.Utils\n * @argument {Object} offsets\n * @returns {Object} ClientRect like output\n */\nexport default function getClientRect(offsets) {\n  return {\n    ...offsets,\n    right: offsets.left + offsets.width,\n    bottom: offsets.top + offsets.height,\n  };\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport getBordersSize from './getBordersSize';\nimport getWindowSizes from './getWindowSizes';\nimport getScroll from './getScroll';\nimport getClientRect from './getClientRect';\nimport isIE from './isIE';\n\n/**\n * Get bounding client rect of given element\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} element\n * @return {Object} client rect\n */\nexport default function getBoundingClientRect(element) {\n  let rect = {};\n\n  // IE10 10 FIX: Please, don't ask, the element isn't\n  // considered in DOM in some circumstances...\n  // This isn't reproducible in IE10 compatibility mode of IE11\n  try {\n    if (isIE(10)) {\n      rect = element.getBoundingClientRect();\n      const scrollTop = getScroll(element, 'top');\n      const scrollLeft = getScroll(element, 'left');\n      rect.top += scrollTop;\n      rect.left += scrollLeft;\n      rect.bottom += scrollTop;\n      rect.right += scrollLeft;\n    }\n    else {\n      rect = element.getBoundingClientRect();\n    }\n  }\n  catch(e){}\n\n  const result = {\n    left: rect.left,\n    top: rect.top,\n    width: rect.right - rect.left,\n    height: rect.bottom - rect.top,\n  };\n\n  // subtract scrollbar size from sizes\n  const sizes = element.nodeName === 'HTML' ? getWindowSizes(element.ownerDocument) : {};\n  const width =\n    sizes.width || element.clientWidth || result.right - result.left;\n  const height =\n    sizes.height || element.clientHeight || result.bottom - result.top;\n\n  let horizScrollbar = element.offsetWidth - width;\n  let vertScrollbar = element.offsetHeight - height;\n\n  // if an hypothetical scrollbar is detected, we must be sure it's not a `border`\n  // we make this check conditional for performance reasons\n  if (horizScrollbar || vertScrollbar) {\n    const styles = getStyleComputedProperty(element);\n    horizScrollbar -= getBordersSize(styles, 'x');\n    vertScrollbar -= getBordersSize(styles, 'y');\n\n    result.width -= horizScrollbar;\n    result.height -= vertScrollbar;\n  }\n\n  return getClientRect(result);\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport includeScroll from './includeScroll';\nimport getScrollParent from './getScrollParent';\nimport getBoundingClientRect from './getBoundingClientRect';\nimport runIsIE from './isIE';\nimport getClientRect from './getClientRect';\n\nexport default function getOffsetRectRelativeToArbitraryNode(children, parent, fixedPosition = false) {\n  const isIE10 = runIsIE(10);\n  const isHTML = parent.nodeName === 'HTML';\n  const childrenRect = getBoundingClientRect(children);\n  const parentRect = getBoundingClientRect(parent);\n  const scrollParent = getScrollParent(children);\n\n  const styles = getStyleComputedProperty(parent);\n  const borderTopWidth = parseFloat(styles.borderTopWidth, 10);\n  const borderLeftWidth = parseFloat(styles.borderLeftWidth, 10);\n\n  // In cases where the parent is fixed, we must ignore negative scroll in offset calc\n  if(fixedPosition && isHTML) {\n    parentRect.top = Math.max(parentRect.top, 0);\n    parentRect.left = Math.max(parentRect.left, 0);\n  }\n  let offsets = getClientRect({\n    top: childrenRect.top - parentRect.top - borderTopWidth,\n    left: childrenRect.left - parentRect.left - borderLeftWidth,\n    width: childrenRect.width,\n    height: childrenRect.height,\n  });\n  offsets.marginTop = 0;\n  offsets.marginLeft = 0;\n\n  // Subtract margins of documentElement in case it's being used as parent\n  // we do this only on HTML because it's the only element that behaves\n  // differently when margins are applied to it. The margins are included in\n  // the box of the documentElement, in the other cases not.\n  if (!isIE10 && isHTML) {\n    const marginTop = parseFloat(styles.marginTop, 10);\n    const marginLeft = parseFloat(styles.marginLeft, 10);\n\n    offsets.top -= borderTopWidth - marginTop;\n    offsets.bottom -= borderTopWidth - marginTop;\n    offsets.left -= borderLeftWidth - marginLeft;\n    offsets.right -= borderLeftWidth - marginLeft;\n\n    // Attach marginTop and marginLeft because in some circumstances we may need them\n    offsets.marginTop = marginTop;\n    offsets.marginLeft = marginLeft;\n  }\n\n  if (\n    isIE10 && !fixedPosition\n      ? parent.contains(scrollParent)\n      : parent === scrollParent && scrollParent.nodeName !== 'BODY'\n  ) {\n    offsets = includeScroll(offsets, parent);\n  }\n\n  return offsets;\n}\n","import getOffsetRectRelativeToArbitraryNode from './getOffsetRectRelativeToArbitraryNode';\nimport getScroll from './getScroll';\nimport getClientRect from './getClientRect';\n\nexport default function getViewportOffsetRectRelativeToArtbitraryNode(element, excludeScroll = false) {\n  const html = element.ownerDocument.documentElement;\n  const relativeOffset = getOffsetRectRelativeToArbitraryNode(element, html);\n  const width = Math.max(html.clientWidth, window.innerWidth || 0);\n  const height = Math.max(html.clientHeight, window.innerHeight || 0);\n\n  const scrollTop = !excludeScroll ? getScroll(html) : 0;\n  const scrollLeft = !excludeScroll ? getScroll(html, 'left') : 0;\n\n  const offset = {\n    top: scrollTop - relativeOffset.top + relativeOffset.marginTop,\n    left: scrollLeft - relativeOffset.left + relativeOffset.marginLeft,\n    width,\n    height,\n  };\n\n  return getClientRect(offset);\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport getParentNode from './getParentNode';\n\n/**\n * Check if the given element is fixed or is inside a fixed parent\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {Element} customContainer\n * @returns {Boolean} answer to \"isFixed?\"\n */\nexport default function isFixed(element) {\n  const nodeName = element.nodeName;\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    return false;\n  }\n  if (getStyleComputedProperty(element, 'position') === 'fixed') {\n    return true;\n  }\n  const parentNode = getParentNode(element);\n  if (!parentNode) {\n    return false;\n  }\n  return isFixed(parentNode);\n}\n","import getStyleComputedProperty from './getStyleComputedProperty';\nimport isIE from './isIE';\n/**\n * Finds the first parent of an element that has a transformed property defined\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} first transformed parent or documentElement\n */\n\nexport default function getFixedPositionOffsetParent(element) {\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\n   if (!element || !element.parentElement || isIE()) {\n    return document.documentElement;\n  }\n  let el = element.parentElement;\n  while (el && getStyleComputedProperty(el, 'transform') === 'none') {\n    el = el.parentElement;\n  }\n  return el || document.documentElement;\n\n}\n","import getScrollParent from './getScrollParent';\nimport getParentNode from './getParentNode';\nimport findCommonOffsetParent from './findCommonOffsetParent';\nimport getOffsetRectRelativeToArbitraryNode from './getOffsetRectRelativeToArbitraryNode';\nimport getViewportOffsetRectRelativeToArtbitraryNode from './getViewportOffsetRectRelativeToArtbitraryNode';\nimport getWindowSizes from './getWindowSizes';\nimport isFixed from './isFixed';\nimport getFixedPositionOffsetParent from './getFixedPositionOffsetParent';\n\n/**\n * Computed the boundaries limits and return them\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} popper\n * @param {HTMLElement} reference\n * @param {number} padding\n * @param {HTMLElement} boundariesElement - Element used to define the boundaries\n * @param {Boolean} fixedPosition - Is in fixed position mode\n * @returns {Object} Coordinates of the boundaries\n */\nexport default function getBoundaries(\n  popper,\n  reference,\n  padding,\n  boundariesElement,\n  fixedPosition = false\n) {\n  // NOTE: 1 DOM access here\n\n  let boundaries = { top: 0, left: 0 };\n  const offsetParent = fixedPosition ? getFixedPositionOffsetParent(popper) : findCommonOffsetParent(popper, reference);\n\n  // Handle viewport case\n  if (boundariesElement === 'viewport' ) {\n    boundaries = getViewportOffsetRectRelativeToArtbitraryNode(offsetParent, fixedPosition);\n  }\n\n  else {\n    // Handle other cases based on DOM element used as boundaries\n    let boundariesNode;\n    if (boundariesElement === 'scrollParent') {\n      boundariesNode = getScrollParent(getParentNode(reference));\n      if (boundariesNode.nodeName === 'BODY') {\n        boundariesNode = popper.ownerDocument.documentElement;\n      }\n    } else if (boundariesElement === 'window') {\n      boundariesNode = popper.ownerDocument.documentElement;\n    } else {\n      boundariesNode = boundariesElement;\n    }\n\n    const offsets = getOffsetRectRelativeToArbitraryNode(\n      boundariesNode,\n      offsetParent,\n      fixedPosition\n    );\n\n    // In case of HTML, we need a different computation\n    if (boundariesNode.nodeName === 'HTML' && !isFixed(offsetParent)) {\n      const { height, width } = getWindowSizes(popper.ownerDocument);\n      boundaries.top += offsets.top - offsets.marginTop;\n      boundaries.bottom = height + offsets.top;\n      boundaries.left += offsets.left - offsets.marginLeft;\n      boundaries.right = width + offsets.left;\n    } else {\n      // for all the other DOM elements, this one is good\n      boundaries = offsets;\n    }\n  }\n\n  // Add paddings\n  padding = padding || 0;\n  const isPaddingNumber = typeof padding === 'number';\n  boundaries.left += isPaddingNumber ? padding : padding.left || 0; \n  boundaries.top += isPaddingNumber ? padding : padding.top || 0; \n  boundaries.right -= isPaddingNumber ? padding : padding.right || 0; \n  boundaries.bottom -= isPaddingNumber ? padding : padding.bottom || 0; \n\n  return boundaries;\n}\n","import getBoundaries from '../utils/getBoundaries';\n\nfunction getArea({ width, height }) {\n  return width * height;\n}\n\n/**\n * Utility used to transform the `auto` placement to the placement with more\n * available space.\n * @method\n * @memberof Popper.Utils\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function computeAutoPlacement(\n  placement,\n  refRect,\n  popper,\n  reference,\n  boundariesElement,\n  padding = 0\n) {\n  if (placement.indexOf('auto') === -1) {\n    return placement;\n  }\n\n  const boundaries = getBoundaries(\n    popper,\n    reference,\n    padding,\n    boundariesElement\n  );\n\n  const rects = {\n    top: {\n      width: boundaries.width,\n      height: refRect.top - boundaries.top,\n    },\n    right: {\n      width: boundaries.right - refRect.right,\n      height: boundaries.height,\n    },\n    bottom: {\n      width: boundaries.width,\n      height: boundaries.bottom - refRect.bottom,\n    },\n    left: {\n      width: refRect.left - boundaries.left,\n      height: boundaries.height,\n    },\n  };\n\n  const sortedAreas = Object.keys(rects)\n    .map(key => ({\n      key,\n      ...rects[key],\n      area: getArea(rects[key]),\n    }))\n    .sort((a, b) => b.area - a.area);\n\n  const filteredAreas = sortedAreas.filter(\n    ({ width, height }) =>\n      width >= popper.clientWidth && height >= popper.clientHeight\n  );\n\n  const computedPlacement = filteredAreas.length > 0\n    ? filteredAreas[0].key\n    : sortedAreas[0].key;\n\n  const variation = placement.split('-')[1];\n\n  return computedPlacement + (variation ? `-${variation}` : '');\n}\n","import findCommonOffsetParent from './findCommonOffsetParent';\nimport getOffsetRectRelativeToArbitraryNode from './getOffsetRectRelativeToArbitraryNode';\nimport getFixedPositionOffsetParent from './getFixedPositionOffsetParent';\n\n/**\n * Get offsets to the reference element\n * @method\n * @memberof Popper.Utils\n * @param {Object} state\n * @param {Element} popper - the popper element\n * @param {Element} reference - the reference element (the popper will be relative to this)\n * @param {Element} fixedPosition - is in fixed position mode\n * @returns {Object} An object containing the offsets which will be applied to the popper\n */\nexport default function getReferenceOffsets(state, popper, reference, fixedPosition = null) {\n  const commonOffsetParent = fixedPosition ? getFixedPositionOffsetParent(popper) : findCommonOffsetParent(popper, reference);\n  return getOffsetRectRelativeToArbitraryNode(reference, commonOffsetParent, fixedPosition);\n}\n","/**\n * Get the outer sizes of the given element (offset size + margins)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Object} object containing width and height properties\n */\nexport default function getOuterSizes(element) {\n  const window = element.ownerDocument.defaultView;\n  const styles = window.getComputedStyle(element);\n  const x = parseFloat(styles.marginTop || 0) + parseFloat(styles.marginBottom || 0);\n  const y = parseFloat(styles.marginLeft || 0) + parseFloat(styles.marginRight || 0);\n  const result = {\n    width: element.offsetWidth + y,\n    height: element.offsetHeight + x,\n  };\n  return result;\n}\n","/**\n * Get the opposite placement of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement\n * @returns {String} flipped placement\n */\nexport default function getOppositePlacement(placement) {\n  const hash = { left: 'right', right: 'left', bottom: 'top', top: 'bottom' };\n  return placement.replace(/left|right|bottom|top/g, matched => hash[matched]);\n}\n","import getOuterSizes from './getOuterSizes';\nimport getOppositePlacement from './getOppositePlacement';\n\n/**\n * Get offsets to the popper\n * @method\n * @memberof Popper.Utils\n * @param {Object} position - CSS position the Popper will get applied\n * @param {HTMLElement} popper - the popper element\n * @param {Object} referenceOffsets - the reference offsets (the popper will be relative to this)\n * @param {String} placement - one of the valid placement options\n * @returns {Object} popperOffsets - An object containing the offsets which will be applied to the popper\n */\nexport default function getPopperOffsets(popper, referenceOffsets, placement) {\n  placement = placement.split('-')[0];\n\n  // Get popper node sizes\n  const popperRect = getOuterSizes(popper);\n\n  // Add position, width and height to our offsets object\n  const popperOffsets = {\n    width: popperRect.width,\n    height: popperRect.height,\n  };\n\n  // depending by the popper placement we have to compute its offsets slightly differently\n  const isHoriz = ['right', 'left'].indexOf(placement) !== -1;\n  const mainSide = isHoriz ? 'top' : 'left';\n  const secondarySide = isHoriz ? 'left' : 'top';\n  const measurement = isHoriz ? 'height' : 'width';\n  const secondaryMeasurement = !isHoriz ? 'height' : 'width';\n\n  popperOffsets[mainSide] =\n    referenceOffsets[mainSide] +\n    referenceOffsets[measurement] / 2 -\n    popperRect[measurement] / 2;\n  if (placement === secondarySide) {\n    popperOffsets[secondarySide] =\n      referenceOffsets[secondarySide] - popperRect[secondaryMeasurement];\n  } else {\n    popperOffsets[secondarySide] =\n      referenceOffsets[getOppositePlacement(secondarySide)];\n  }\n\n  return popperOffsets;\n}\n","/**\n * Mimics the `find` method of Array\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nexport default function find(arr, check) {\n  // use native find if supported\n  if (Array.prototype.find) {\n    return arr.find(check);\n  }\n\n  // use `filter` to obtain the same behavior of `find`\n  return arr.filter(check)[0];\n}\n","import isFunction from './isFunction';\nimport findIndex from './findIndex';\nimport getClientRect from '../utils/getClientRect';\n\n/**\n * Loop trough the list of modifiers and run them in order,\n * each of them will then edit the data object.\n * @method\n * @memberof Popper.Utils\n * @param {dataObject} data\n * @param {Array} modifiers\n * @param {String} ends - Optional modifier name used as stopper\n * @returns {dataObject}\n */\nexport default function runModifiers(modifiers, data, ends) {\n  const modifiersToRun = ends === undefined\n    ? modifiers\n    : modifiers.slice(0, findIndex(modifiers, 'name', ends));\n\n  modifiersToRun.forEach(modifier => {\n    if (modifier['function']) { // eslint-disable-line dot-notation\n      console.warn('`modifier.function` is deprecated, use `modifier.fn`!');\n    }\n    const fn = modifier['function'] || modifier.fn; // eslint-disable-line dot-notation\n    if (modifier.enabled && isFunction(fn)) {\n      // Add properties to offsets to make them a complete clientRect object\n      // we do this before each modifier to make sure the previous one doesn't\n      // mess with these values\n      data.offsets.popper = getClientRect(data.offsets.popper);\n      data.offsets.reference = getClientRect(data.offsets.reference);\n\n      data = fn(data, modifier);\n    }\n  });\n\n  return data;\n}\n","import find from './find';\n\n/**\n * Return the index of the matching object\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nexport default function findIndex(arr, prop, value) {\n  // use native findIndex if supported\n  if (Array.prototype.findIndex) {\n    return arr.findIndex(cur => cur[prop] === value);\n  }\n\n  // use `find` + `indexOf` if `findIndex` isn't supported\n  const match = find(arr, obj => obj[prop] === value);\n  return arr.indexOf(match);\n}\n","import computeAutoPlacement from '../utils/computeAutoPlacement';\nimport getReferenceOffsets from '../utils/getReferenceOffsets';\nimport getPopperOffsets from '../utils/getPopperOffsets';\nimport runModifiers from '../utils/runModifiers';\n\n/**\n * Updates the position of the popper, computing the new offsets and applying\n * the new style.<br />\n * Prefer `scheduleUpdate` over `update` because of performance reasons.\n * @method\n * @memberof Popper\n */\nexport default function update() {\n  // if popper is destroyed, don't perform any further update\n  if (this.state.isDestroyed) {\n    return;\n  }\n\n  let data = {\n    instance: this,\n    styles: {},\n    arrowStyles: {},\n    attributes: {},\n    flipped: false,\n    offsets: {},\n  };\n\n  // compute reference element offsets\n  data.offsets.reference = getReferenceOffsets(\n    this.state,\n    this.popper,\n    this.reference,\n    this.options.positionFixed\n  );\n\n  // compute auto placement, store placement inside the data object,\n  // modifiers will be able to edit `placement` if needed\n  // and refer to originalPlacement to know the original value\n  data.placement = computeAutoPlacement(\n    this.options.placement,\n    data.offsets.reference,\n    this.popper,\n    this.reference,\n    this.options.modifiers.flip.boundariesElement,\n    this.options.modifiers.flip.padding\n  );\n\n  // store the computed placement inside `originalPlacement`\n  data.originalPlacement = data.placement;\n\n  data.positionFixed = this.options.positionFixed;\n\n  // compute the popper offsets\n  data.offsets.popper = getPopperOffsets(\n    this.popper,\n    data.offsets.reference,\n    data.placement\n  );\n\n  data.offsets.popper.position = this.options.positionFixed\n    ? 'fixed'\n    : 'absolute';\n\n  // run the modifiers\n  data = runModifiers(this.modifiers, data);\n\n  // the first `update` will call `onCreate` callback\n  // the other ones will call `onUpdate` callback\n  if (!this.state.isCreated) {\n    this.state.isCreated = true;\n    this.options.onCreate(data);\n  } else {\n    this.options.onUpdate(data);\n  }\n}\n","/**\n * Helper used to know if the given modifier is enabled.\n * @method\n * @memberof Popper.Utils\n * @returns {Boolean}\n */\nexport default function isModifierEnabled(modifiers, modifierName) {\n  return modifiers.some(\n    ({ name, enabled }) => enabled && name === modifierName\n  );\n}\n","/**\n * Get the prefixed supported property name\n * @method\n * @memberof Popper.Utils\n * @argument {String} property (camelCase)\n * @returns {String} prefixed property (camelCase or PascalCase, depending on the vendor prefix)\n */\nexport default function getSupportedPropertyName(property) {\n  const prefixes = [false, 'ms', 'Webkit', 'Moz', 'O'];\n  const upperProp = property.charAt(0).toUpperCase() + property.slice(1);\n\n  for (let i = 0; i < prefixes.length; i++) {\n    const prefix = prefixes[i];\n    const toCheck = prefix ? `${prefix}${upperProp}` : property;\n    if (typeof document.body.style[toCheck] !== 'undefined') {\n      return toCheck;\n    }\n  }\n  return null;\n}\n","import isModifierEnabled from '../utils/isModifierEnabled';\nimport getSupportedPropertyName from '../utils/getSupportedPropertyName';\n\n/**\n * Destroys the popper.\n * @method\n * @memberof Popper\n */\nexport default function destroy() {\n  this.state.isDestroyed = true;\n\n  // touch DOM only if `applyStyle` modifier is enabled\n  if (isModifierEnabled(this.modifiers, 'applyStyle')) {\n    this.popper.removeAttribute('x-placement');\n    this.popper.style.position = '';\n    this.popper.style.top = '';\n    this.popper.style.left = '';\n    this.popper.style.right = '';\n    this.popper.style.bottom = '';\n    this.popper.style.willChange = '';\n    this.popper.style[getSupportedPropertyName('transform')] = '';\n  }\n\n  this.disableEventListeners();\n\n  // remove the popper if user explicity asked for the deletion on destroy\n  // do not use `remove` because IE11 doesn't support it\n  if (this.options.removeOnDestroy) {\n    this.popper.parentNode.removeChild(this.popper);\n  }\n  return this;\n}\n","/**\n * Get the window associated with the element\n * @argument {Element} element\n * @returns {Window}\n */\nexport default function getWindow(element) {\n  const ownerDocument = element.ownerDocument;\n  return ownerDocument ? ownerDocument.defaultView : window;\n}\n","import getScrollParent from './getScrollParent';\nimport getWindow from './getWindow';\n\nfunction attachToScrollParents(scrollParent, event, callback, scrollParents) {\n  const isBody = scrollParent.nodeName === 'BODY';\n  const target = isBody ? scrollParent.ownerDocument.defaultView : scrollParent;\n  target.addEventListener(event, callback, { passive: true });\n\n  if (!isBody) {\n    attachToScrollParents(\n      getScrollParent(target.parentNode),\n      event,\n      callback,\n      scrollParents\n    );\n  }\n  scrollParents.push(target);\n}\n\n/**\n * Setup needed event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nexport default function setupEventListeners(\n  reference,\n  options,\n  state,\n  updateBound\n) {\n  // Resize event listener on window\n  state.updateBound = updateBound;\n  getWindow(reference).addEventListener('resize', state.updateBound, { passive: true });\n\n  // Scroll event listener on scroll parents\n  const scrollElement = getScrollParent(reference);\n  attachToScrollParents(\n    scrollElement,\n    'scroll',\n    state.updateBound,\n    state.scrollParents\n  );\n  state.scrollElement = scrollElement;\n  state.eventsEnabled = true;\n\n  return state;\n}\n","import setupEventListeners from '../utils/setupEventListeners';\n\n/**\n * It will add resize/scroll events and start recalculating\n * position of the popper element when they are triggered.\n * @method\n * @memberof Popper\n */\nexport default function enableEventListeners() {\n  if (!this.state.eventsEnabled) {\n    this.state = setupEventListeners(\n      this.reference,\n      this.options,\n      this.state,\n      this.scheduleUpdate\n    );\n  }\n}\n","import removeEventListeners from '../utils/removeEventListeners';\n\n/**\n * It will remove resize/scroll events and won't recalculate popper position\n * when they are triggered. It also won't trigger `onUpdate` callback anymore,\n * unless you call `update` method manually.\n * @method\n * @memberof Popper\n */\nexport default function disableEventListeners() {\n  if (this.state.eventsEnabled) {\n    cancelAnimationFrame(this.scheduleUpdate);\n    this.state = removeEventListeners(this.reference, this.state);\n  }\n}\n","import getWindow from './getWindow';\n\n/**\n * Remove event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nexport default function removeEventListeners(reference, state) {\n  // Remove resize event listener on window\n  getWindow(reference).removeEventListener('resize', state.updateBound);\n\n  // Remove scroll event listener on scroll parents\n  state.scrollParents.forEach(target => {\n    target.removeEventListener('scroll', state.updateBound);\n  });\n\n  // Reset state\n  state.updateBound = null;\n  state.scrollParents = [];\n  state.scrollElement = null;\n  state.eventsEnabled = false;\n  return state;\n}\n","/**\n * Tells if a given input is a number\n * @method\n * @memberof Popper.Utils\n * @param {*} input to check\n * @return {Boolean}\n */\nexport default function isNumeric(n) {\n  return n !== '' && !isNaN(parseFloat(n)) && isFinite(n);\n}\n","import isNumeric from './isNumeric';\n\n/**\n * Set the style to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the style to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nexport default function setStyles(element, styles) {\n  Object.keys(styles).forEach(prop => {\n    let unit = '';\n    // add unit if the value is numeric and is one of the following\n    if (\n      ['width', 'height', 'top', 'right', 'bottom', 'left'].indexOf(prop) !==\n        -1 &&\n      isNumeric(styles[prop])\n    ) {\n      unit = 'px';\n    }\n    element.style[prop] = styles[prop] + unit;\n  });\n}\n","import getSupportedPropertyName from '../utils/getSupportedPropertyName';\nimport find from '../utils/find';\nimport getOffsetParent from '../utils/getOffsetParent';\nimport getBoundingClientRect from '../utils/getBoundingClientRect';\nimport getRoundedOffsets from '../utils/getRoundedOffsets';\nimport isBrowser from '../utils/isBrowser';\n\nconst isFirefox = isBrowser && /Firefox/i.test(navigator.userAgent);\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function computeStyle(data, options) {\n  const { x, y } = options;\n  const { popper } = data.offsets;\n\n  // Remove this legacy support in Popper.js v2\n  const legacyGpuAccelerationOption = find(\n    data.instance.modifiers,\n    modifier => modifier.name === 'applyStyle'\n  ).gpuAcceleration;\n  if (legacyGpuAccelerationOption !== undefined) {\n    console.warn(\n      'WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!'\n    );\n  }\n  const gpuAcceleration =\n    legacyGpuAccelerationOption !== undefined\n      ? legacyGpuAccelerationOption\n      : options.gpuAcceleration;\n\n  const offsetParent = getOffsetParent(data.instance.popper);\n  const offsetParentRect = getBoundingClientRect(offsetParent);\n\n  // Styles\n  const styles = {\n    position: popper.position,\n  };\n\n  const offsets = getRoundedOffsets(\n    data,\n    window.devicePixelRatio < 2 || !isFirefox\n  );\n\n  const sideA = x === 'bottom' ? 'top' : 'bottom';\n  const sideB = y === 'right' ? 'left' : 'right';\n\n  // if gpuAcceleration is set to `true` and transform is supported,\n  //  we use `translate3d` to apply the position to the popper we\n  // automatically use the supported prefixed version if needed\n  const prefixedProperty = getSupportedPropertyName('transform');\n\n  // now, let's make a step back and look at this code closely (wtf?)\n  // If the content of the popper grows once it's been positioned, it\n  // may happen that the popper gets misplaced because of the new content\n  // overflowing its reference element\n  // To avoid this problem, we provide two options (x and y), which allow\n  // the consumer to define the offset origin.\n  // If we position a popper on top of a reference element, we can set\n  // `x` to `top` to make the popper grow towards its top instead of\n  // its bottom.\n  let left, top;\n  if (sideA === 'bottom') {\n    // when offsetParent is <html> the positioning is relative to the bottom of the screen (excluding the scrollbar)\n    // and not the bottom of the html element\n    if (offsetParent.nodeName === 'HTML') {\n      top = -offsetParent.clientHeight + offsets.bottom;\n    } else {\n      top = -offsetParentRect.height + offsets.bottom;\n    }\n  } else {\n    top = offsets.top;\n  }\n  if (sideB === 'right') {\n    if (offsetParent.nodeName === 'HTML') {\n      left = -offsetParent.clientWidth + offsets.right;\n    } else {\n      left = -offsetParentRect.width + offsets.right;\n    }\n  } else {\n    left = offsets.left;\n  }\n  if (gpuAcceleration && prefixedProperty) {\n    styles[prefixedProperty] = `translate3d(${left}px, ${top}px, 0)`;\n    styles[sideA] = 0;\n    styles[sideB] = 0;\n    styles.willChange = 'transform';\n  } else {\n    // othwerise, we use the standard `top`, `left`, `bottom` and `right` properties\n    const invertTop = sideA === 'bottom' ? -1 : 1;\n    const invertLeft = sideB === 'right' ? -1 : 1;\n    styles[sideA] = top * invertTop;\n    styles[sideB] = left * invertLeft;\n    styles.willChange = `${sideA}, ${sideB}`;\n  }\n\n  // Attributes\n  const attributes = {\n    'x-placement': data.placement,\n  };\n\n  // Update `data` attributes, styles and arrowStyles\n  data.attributes = { ...attributes, ...data.attributes };\n  data.styles = { ...styles, ...data.styles };\n  data.arrowStyles = { ...data.offsets.arrow, ...data.arrowStyles };\n\n  return data;\n}\n","import find from './find';\n\n/**\n * Helper used to know if the given modifier depends from another one.<br />\n * It checks if the needed modifier is listed and enabled.\n * @method\n * @memberof Popper.Utils\n * @param {Array} modifiers - list of modifiers\n * @param {String} requestingName - name of requesting modifier\n * @param {String} requestedName - name of requested modifier\n * @returns {Boolean}\n */\nexport default function isModifierRequired(\n  modifiers,\n  requestingName,\n  requestedName\n) {\n  const requesting = find(modifiers, ({ name }) => name === requestingName);\n\n  const isRequired =\n    !!requesting &&\n    modifiers.some(modifier => {\n      return (\n        modifier.name === requestedName &&\n        modifier.enabled &&\n        modifier.order < requesting.order\n      );\n    });\n\n  if (!isRequired) {\n    const requesting = `\\`${requestingName}\\``;\n    const requested = `\\`${requestedName}\\``;\n    console.warn(\n      `${requested} modifier is required by ${requesting} modifier in order to work, be sure to include it before ${requesting}!`\n    );\n  }\n  return isRequired;\n}\n","/**\n * List of accepted placements to use as values of the `placement` option.<br />\n * Valid placements are:\n * - `auto`\n * - `top`\n * - `right`\n * - `bottom`\n * - `left`\n *\n * Each placement can have a variation from this list:\n * - `-start`\n * - `-end`\n *\n * Variations are interpreted easily if you think of them as the left to right\n * written languages. Horizontally (`top` and `bottom`), `start` is left and `end`\n * is right.<br />\n * Vertically (`left` and `right`), `start` is top and `end` is bottom.\n *\n * Some valid examples are:\n * - `top-end` (on top of reference, right aligned)\n * - `right-start` (on right of reference, top aligned)\n * - `bottom` (on bottom, centered)\n * - `auto-end` (on the side with more space available, alignment depends by placement)\n *\n * @static\n * @type {Array}\n * @enum {String}\n * @readonly\n * @method placements\n * @memberof Popper\n */\nexport default [\n  'auto-start',\n  'auto',\n  'auto-end',\n  'top-start',\n  'top',\n  'top-end',\n  'right-start',\n  'right',\n  'right-end',\n  'bottom-end',\n  'bottom',\n  'bottom-start',\n  'left-end',\n  'left',\n  'left-start',\n];\n","import placements from '../methods/placements';\n\n// Get rid of `auto` `auto-start` and `auto-end`\nconst validPlacements = placements.slice(3);\n\n/**\n * Given an initial placement, returns all the subsequent placements\n * clockwise (or counter-clockwise).\n *\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement - A valid placement (it accepts variations)\n * @argument {Boolean} counter - Set to true to walk the placements counterclockwise\n * @returns {Array} placements including their variations\n */\nexport default function clockwise(placement, counter = false) {\n  const index = validPlacements.indexOf(placement);\n  const arr = validPlacements\n    .slice(index + 1)\n    .concat(validPlacements.slice(0, index));\n  return counter ? arr.reverse() : arr;\n}\n","import applyStyle, { applyStyleOnLoad } from './applyStyle';\nimport computeStyle from './computeStyle';\nimport arrow from './arrow';\nimport flip from './flip';\nimport keepTogether from './keepTogether';\nimport offset from './offset';\nimport preventOverflow from './preventOverflow';\nimport shift from './shift';\nimport hide from './hide';\nimport inner from './inner';\n\n/**\n * Modifier function, each modifier can have a function of this type assigned\n * to its `fn` property.<br />\n * These functions will be called on each update, this means that you must\n * make sure they are performant enough to avoid performance bottlenecks.\n *\n * @function ModifierFn\n * @argument {dataObject} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {dataObject} The data object, properly modified\n */\n\n/**\n * Modifiers are plugins used to alter the behavior of your poppers.<br />\n * Popper.js uses a set of 9 modifiers to provide all the basic functionalities\n * needed by the library.\n *\n * Usually you don't want to override the `order`, `fn` and `onLoad` props.\n * All the other properties are configurations that could be tweaked.\n * @namespace modifiers\n */\nexport default {\n  /**\n   * Modifier used to shift the popper on the start or end of its reference\n   * element.<br />\n   * It will read the variation of the `placement` property.<br />\n   * It can be one either `-end` or `-start`.\n   * @memberof modifiers\n   * @inner\n   */\n  shift: {\n    /** @prop {number} order=100 - Index used to define the order of execution */\n    order: 100,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: shift,\n  },\n\n  /**\n   * The `offset` modifier can shift your popper on both its axis.\n   *\n   * It accepts the following units:\n   * - `px` or unit-less, interpreted as pixels\n   * - `%` or `%r`, percentage relative to the length of the reference element\n   * - `%p`, percentage relative to the length of the popper element\n   * - `vw`, CSS viewport width unit\n   * - `vh`, CSS viewport height unit\n   *\n   * For length is intended the main axis relative to the placement of the popper.<br />\n   * This means that if the placement is `top` or `bottom`, the length will be the\n   * `width`. In case of `left` or `right`, it will be the `height`.\n   *\n   * You can provide a single value (as `Number` or `String`), or a pair of values\n   * as `String` divided by a comma or one (or more) white spaces.<br />\n   * The latter is a deprecated method because it leads to confusion and will be\n   * removed in v2.<br />\n   * Additionally, it accepts additions and subtractions between different units.\n   * Note that multiplications and divisions aren't supported.\n   *\n   * Valid examples are:\n   * ```\n   * 10\n   * '10%'\n   * '10, 10'\n   * '10%, 10'\n   * '10 + 10%'\n   * '10 - 5vh + 3%'\n   * '-10px + 5vh, 5px - 6%'\n   * ```\n   * > **NB**: If you desire to apply offsets to your poppers in a way that may make them overlap\n   * > with their reference element, unfortunately, you will have to disable the `flip` modifier.\n   * > You can read more on this at this [issue](https://github.com/FezVrasta/popper.js/issues/373).\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  offset: {\n    /** @prop {number} order=200 - Index used to define the order of execution */\n    order: 200,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: offset,\n    /** @prop {Number|String} offset=0\n     * The offset value as described in the modifier description\n     */\n    offset: 0,\n  },\n\n  /**\n   * Modifier used to prevent the popper from being positioned outside the boundary.\n   *\n   * A scenario exists where the reference itself is not within the boundaries.<br />\n   * We can say it has \"escaped the boundaries\"  or just \"escaped\".<br />\n   * In this case we need to decide whether the popper should either:\n   *\n   * - detach from the reference and remain \"trapped\" in the boundaries, or\n   * - if it should ignore the boundary and \"escape with its reference\"\n   *\n   * When `escapeWithReference` is set to`true` and reference is completely\n   * outside its boundaries, the popper will overflow (or completely leave)\n   * the boundaries in order to remain attached to the edge of the reference.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  preventOverflow: {\n    /** @prop {number} order=300 - Index used to define the order of execution */\n    order: 300,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: preventOverflow,\n    /**\n     * @prop {Array} [priority=['left','right','top','bottom']]\n     * Popper will try to prevent overflow following these priorities by default,\n     * then, it could overflow on the left and on top of the `boundariesElement`\n     */\n    priority: ['left', 'right', 'top', 'bottom'],\n    /**\n     * @prop {number} padding=5\n     * Amount of pixel used to define a minimum distance between the boundaries\n     * and the popper. This makes sure the popper always has a little padding\n     * between the edges of its container\n     */\n    padding: 5,\n    /**\n     * @prop {String|HTMLElement} boundariesElement='scrollParent'\n     * Boundaries used by the modifier. Can be `scrollParent`, `window`,\n     * `viewport` or any DOM element.\n     */\n    boundariesElement: 'scrollParent',\n  },\n\n  /**\n   * Modifier used to make sure the reference and its popper stay near each other\n   * without leaving any gap between the two. Especially useful when the arrow is\n   * enabled and you want to ensure that it points to its reference element.\n   * It cares only about the first axis. You can still have poppers with margin\n   * between the popper and its reference element.\n   * @memberof modifiers\n   * @inner\n   */\n  keepTogether: {\n    /** @prop {number} order=400 - Index used to define the order of execution */\n    order: 400,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: keepTogether,\n  },\n\n  /**\n   * This modifier is used to move the `arrowElement` of the popper to make\n   * sure it is positioned between the reference element and its popper element.\n   * It will read the outer size of the `arrowElement` node to detect how many\n   * pixels of conjunction are needed.\n   *\n   * It has no effect if no `arrowElement` is provided.\n   * @memberof modifiers\n   * @inner\n   */\n  arrow: {\n    /** @prop {number} order=500 - Index used to define the order of execution */\n    order: 500,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: arrow,\n    /** @prop {String|HTMLElement} element='[x-arrow]' - Selector or node used as arrow */\n    element: '[x-arrow]',\n  },\n\n  /**\n   * Modifier used to flip the popper's placement when it starts to overlap its\n   * reference element.\n   *\n   * Requires the `preventOverflow` modifier before it in order to work.\n   *\n   * **NOTE:** this modifier will interrupt the current update cycle and will\n   * restart it if it detects the need to flip the placement.\n   * @memberof modifiers\n   * @inner\n   */\n  flip: {\n    /** @prop {number} order=600 - Index used to define the order of execution */\n    order: 600,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: flip,\n    /**\n     * @prop {String|Array} behavior='flip'\n     * The behavior used to change the popper's placement. It can be one of\n     * `flip`, `clockwise`, `counterclockwise` or an array with a list of valid\n     * placements (with optional variations)\n     */\n    behavior: 'flip',\n    /**\n     * @prop {number} padding=5\n     * The popper will flip if it hits the edges of the `boundariesElement`\n     */\n    padding: 5,\n    /**\n     * @prop {String|HTMLElement} boundariesElement='viewport'\n     * The element which will define the boundaries of the popper position.\n     * The popper will never be placed outside of the defined boundaries\n     * (except if `keepTogether` is enabled)\n     */\n    boundariesElement: 'viewport',\n    /**\n     * @prop {Boolean} flipVariations=false\n     * The popper will switch placement variation between `-start` and `-end` when\n     * the reference element overlaps its boundaries.\n     *\n     * The original placement should have a set variation.\n     */\n    flipVariations: false,\n    /**\n     * @prop {Boolean} flipVariationsByContent=false\n     * The popper will switch placement variation between `-start` and `-end` when\n     * the popper element overlaps its reference boundaries.\n     *\n     * The original placement should have a set variation.\n     */\n    flipVariationsByContent: false,\n  },\n\n  /**\n   * Modifier used to make the popper flow toward the inner of the reference element.\n   * By default, when this modifier is disabled, the popper will be placed outside\n   * the reference element.\n   * @memberof modifiers\n   * @inner\n   */\n  inner: {\n    /** @prop {number} order=700 - Index used to define the order of execution */\n    order: 700,\n    /** @prop {Boolean} enabled=false - Whether the modifier is enabled or not */\n    enabled: false,\n    /** @prop {ModifierFn} */\n    fn: inner,\n  },\n\n  /**\n   * Modifier used to hide the popper when its reference element is outside of the\n   * popper boundaries. It will set a `x-out-of-boundaries` attribute which can\n   * be used to hide with a CSS selector the popper when its reference is\n   * out of boundaries.\n   *\n   * Requires the `preventOverflow` modifier before it in order to work.\n   * @memberof modifiers\n   * @inner\n   */\n  hide: {\n    /** @prop {number} order=800 - Index used to define the order of execution */\n    order: 800,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: hide,\n  },\n\n  /**\n   * Computes the style that will be applied to the popper element to gets\n   * properly positioned.\n   *\n   * Note that this modifier will not touch the DOM, it just prepares the styles\n   * so that `applyStyle` modifier can apply it. This separation is useful\n   * in case you need to replace `applyStyle` with a custom implementation.\n   *\n   * This modifier has `850` as `order` value to maintain backward compatibility\n   * with previous versions of Popper.js. Expect the modifiers ordering method\n   * to change in future major versions of the library.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  computeStyle: {\n    /** @prop {number} order=850 - Index used to define the order of execution */\n    order: 850,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: computeStyle,\n    /**\n     * @prop {Boolean} gpuAcceleration=true\n     * If true, it uses the CSS 3D transformation to position the popper.\n     * Otherwise, it will use the `top` and `left` properties\n     */\n    gpuAcceleration: true,\n    /**\n     * @prop {string} [x='bottom']\n     * Where to anchor the X axis (`bottom` or `top`). AKA X offset origin.\n     * Change this if your popper should grow in a direction different from `bottom`\n     */\n    x: 'bottom',\n    /**\n     * @prop {string} [x='left']\n     * Where to anchor the Y axis (`left` or `right`). AKA Y offset origin.\n     * Change this if your popper should grow in a direction different from `right`\n     */\n    y: 'right',\n  },\n\n  /**\n   * Applies the computed styles to the popper element.\n   *\n   * All the DOM manipulations are limited to this modifier. This is useful in case\n   * you want to integrate Popper.js inside a framework or view library and you\n   * want to delegate all the DOM manipulations to it.\n   *\n   * Note that if you disable this modifier, you must make sure the popper element\n   * has its position set to `absolute` before Popper.js can do its work!\n   *\n   * Just disable this modifier and define your own to achieve the desired effect.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  applyStyle: {\n    /** @prop {number} order=900 - Index used to define the order of execution */\n    order: 900,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: applyStyle,\n    /** @prop {Function} */\n    onLoad: applyStyleOnLoad,\n    /**\n     * @deprecated since version 1.10.0, the property moved to `computeStyle` modifier\n     * @prop {Boolean} gpuAcceleration=true\n     * If true, it uses the CSS 3D transformation to position the popper.\n     * Otherwise, it will use the `top` and `left` properties\n     */\n    gpuAcceleration: undefined,\n  },\n};\n\n/**\n * The `dataObject` is an object containing all the information used by Popper.js.\n * This object is passed to modifiers and to the `onCreate` and `onUpdate` callbacks.\n * @name dataObject\n * @property {Object} data.instance The Popper.js instance\n * @property {String} data.placement Placement applied to popper\n * @property {String} data.originalPlacement Placement originally defined on init\n * @property {Boolean} data.flipped True if popper has been flipped by flip modifier\n * @property {Boolean} data.hide True if the reference element is out of boundaries, useful to know when to hide the popper\n * @property {HTMLElement} data.arrowElement Node used as arrow by arrow modifier\n * @property {Object} data.styles Any CSS property defined here will be applied to the popper. It expects the JavaScript nomenclature (eg. `marginBottom`)\n * @property {Object} data.arrowStyles Any CSS property defined here will be applied to the popper arrow. It expects the JavaScript nomenclature (eg. `marginBottom`)\n * @property {Object} data.boundaries Offsets of the popper boundaries\n * @property {Object} data.offsets The measurements of popper, reference and arrow elements\n * @property {Object} data.offsets.popper `top`, `left`, `width`, `height` values\n * @property {Object} data.offsets.reference `top`, `left`, `width`, `height` values\n * @property {Object} data.offsets.arrow] `top` and `left` offsets, only one of them will be different from 0\n */\n","import modifiers from '../modifiers/index';\n\n/**\n * Default options provided to Popper.js constructor.<br />\n * These can be overridden using the `options` argument of Popper.js.<br />\n * To override an option, simply pass an object with the same\n * structure of the `options` object, as the 3rd argument. For example:\n * ```\n * new Popper(ref, pop, {\n *   modifiers: {\n *     preventOverflow: { enabled: false }\n *   }\n * })\n * ```\n * @type {Object}\n * @static\n * @memberof Popper\n */\nexport default {\n  /**\n   * Popper's placement.\n   * @prop {Popper.placements} placement='bottom'\n   */\n  placement: 'bottom',\n\n  /**\n   * Set this to true if you want popper to position it self in 'fixed' mode\n   * @prop {Boolean} positionFixed=false\n   */\n  positionFixed: false,\n\n  /**\n   * Whether events (resize, scroll) are initially enabled.\n   * @prop {Boolean} eventsEnabled=true\n   */\n  eventsEnabled: true,\n\n  /**\n   * Set to true if you want to automatically remove the popper when\n   * you call the `destroy` method.\n   * @prop {Boolean} removeOnDestroy=false\n   */\n  removeOnDestroy: false,\n\n  /**\n   * Callback called when the popper is created.<br />\n   * By default, it is set to no-op.<br />\n   * Access Popper.js instance with `data.instance`.\n   * @prop {onCreate}\n   */\n  onCreate: () => {},\n\n  /**\n   * Callback called when the popper is updated. This callback is not called\n   * on the initialization/creation of the popper, but only on subsequent\n   * updates.<br />\n   * By default, it is set to no-op.<br />\n   * Access Popper.js instance with `data.instance`.\n   * @prop {onUpdate}\n   */\n  onUpdate: () => {},\n\n  /**\n   * List of modifiers used to modify the offsets before they are applied to the popper.\n   * They provide most of the functionalities of Popper.js.\n   * @prop {modifiers}\n   */\n  modifiers,\n};\n\n/**\n * @callback onCreate\n * @param {dataObject} data\n */\n\n/**\n * @callback onUpdate\n * @param {dataObject} data\n */\n","/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function shift(data) {\n  const placement = data.placement;\n  const basePlacement = placement.split('-')[0];\n  const shiftvariation = placement.split('-')[1];\n\n  // if shift shiftvariation is specified, run the modifier\n  if (shiftvariation) {\n    const { reference, popper } = data.offsets;\n    const isVertical = ['bottom', 'top'].indexOf(basePlacement) !== -1;\n    const side = isVertical ? 'left' : 'top';\n    const measurement = isVertical ? 'width' : 'height';\n\n    const shiftOffsets = {\n      start: { [side]: reference[side] },\n      end: {\n        [side]: reference[side] + reference[measurement] - popper[measurement],\n      },\n    };\n\n    data.offsets.popper = { ...popper, ...shiftOffsets[shiftvariation] };\n  }\n\n  return data;\n}\n","import isNumeric from '../utils/isNumeric';\nimport getClientRect from '../utils/getClientRect';\nimport find from '../utils/find';\n\n/**\n * Converts a string containing value + unit into a px value number\n * @function\n * @memberof {modifiers~offset}\n * @private\n * @argument {String} str - Value + unit string\n * @argument {String} measurement - `height` or `width`\n * @argument {Object} popperOffsets\n * @argument {Object} referenceOffsets\n * @returns {Number|String}\n * Value in pixels, or original string if no values were extracted\n */\nexport function toValue(str, measurement, popperOffsets, referenceOffsets) {\n  // separate value from unit\n  const split = str.match(/((?:\\-|\\+)?\\d*\\.?\\d*)(.*)/);\n  const value = +split[1];\n  const unit = split[2];\n\n  // If it's not a number it's an operator, I guess\n  if (!value) {\n    return str;\n  }\n\n  if (unit.indexOf('%') === 0) {\n    let element;\n    switch (unit) {\n      case '%p':\n        element = popperOffsets;\n        break;\n      case '%':\n      case '%r':\n      default:\n        element = referenceOffsets;\n    }\n\n    const rect = getClientRect(element);\n    return rect[measurement] / 100 * value;\n  } else if (unit === 'vh' || unit === 'vw') {\n    // if is a vh or vw, we calculate the size based on the viewport\n    let size;\n    if (unit === 'vh') {\n      size = Math.max(\n        document.documentElement.clientHeight,\n        window.innerHeight || 0\n      );\n    } else {\n      size = Math.max(\n        document.documentElement.clientWidth,\n        window.innerWidth || 0\n      );\n    }\n    return size / 100 * value;\n  } else {\n    // if is an explicit pixel unit, we get rid of the unit and keep the value\n    // if is an implicit unit, it's px, and we return just the value\n    return value;\n  }\n}\n\n/**\n * Parse an `offset` string to extrapolate `x` and `y` numeric offsets.\n * @function\n * @memberof {modifiers~offset}\n * @private\n * @argument {String} offset\n * @argument {Object} popperOffsets\n * @argument {Object} referenceOffsets\n * @argument {String} basePlacement\n * @returns {Array} a two cells array with x and y offsets in numbers\n */\nexport function parseOffset(\n  offset,\n  popperOffsets,\n  referenceOffsets,\n  basePlacement\n) {\n  const offsets = [0, 0];\n\n  // Use height if placement is left or right and index is 0 otherwise use width\n  // in this way the first offset will use an axis and the second one\n  // will use the other one\n  const useHeight = ['right', 'left'].indexOf(basePlacement) !== -1;\n\n  // Split the offset string to obtain a list of values and operands\n  // The regex addresses values with the plus or minus sign in front (+10, -20, etc)\n  const fragments = offset.split(/(\\+|\\-)/).map(frag => frag.trim());\n\n  // Detect if the offset string contains a pair of values or a single one\n  // they could be separated by comma or space\n  const divider = fragments.indexOf(\n    find(fragments, frag => frag.search(/,|\\s/) !== -1)\n  );\n\n  if (fragments[divider] && fragments[divider].indexOf(',') === -1) {\n    console.warn(\n      'Offsets separated by white space(s) are deprecated, use a comma (,) instead.'\n    );\n  }\n\n  // If divider is found, we divide the list of values and operands to divide\n  // them by ofset X and Y.\n  const splitRegex = /\\s*,\\s*|\\s+/;\n  let ops = divider !== -1\n    ? [\n        fragments\n          .slice(0, divider)\n          .concat([fragments[divider].split(splitRegex)[0]]),\n        [fragments[divider].split(splitRegex)[1]].concat(\n          fragments.slice(divider + 1)\n        ),\n      ]\n    : [fragments];\n\n  // Convert the values with units to absolute pixels to allow our computations\n  ops = ops.map((op, index) => {\n    // Most of the units rely on the orientation of the popper\n    const measurement = (index === 1 ? !useHeight : useHeight)\n      ? 'height'\n      : 'width';\n    let mergeWithPrevious = false;\n    return (\n      op\n        // This aggregates any `+` or `-` sign that aren't considered operators\n        // e.g.: 10 + +5 => [10, +, +5]\n        .reduce((a, b) => {\n          if (a[a.length - 1] === '' && ['+', '-'].indexOf(b) !== -1) {\n            a[a.length - 1] = b;\n            mergeWithPrevious = true;\n            return a;\n          } else if (mergeWithPrevious) {\n            a[a.length - 1] += b;\n            mergeWithPrevious = false;\n            return a;\n          } else {\n            return a.concat(b);\n          }\n        }, [])\n        // Here we convert the string values into number values (in px)\n        .map(str => toValue(str, measurement, popperOffsets, referenceOffsets))\n    );\n  });\n\n  // Loop trough the offsets arrays and execute the operations\n  ops.forEach((op, index) => {\n    op.forEach((frag, index2) => {\n      if (isNumeric(frag)) {\n        offsets[index] += frag * (op[index2 - 1] === '-' ? -1 : 1);\n      }\n    });\n  });\n  return offsets;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @argument {Number|String} options.offset=0\n * The offset value as described in the modifier description\n * @returns {Object} The data object, properly modified\n */\nexport default function offset(data, { offset }) {\n  const { placement, offsets: { popper, reference } } = data;\n  const basePlacement = placement.split('-')[0];\n\n  let offsets;\n  if (isNumeric(+offset)) {\n    offsets = [+offset, 0];\n  } else {\n    offsets = parseOffset(offset, popper, reference, basePlacement);\n  }\n\n  if (basePlacement === 'left') {\n    popper.top += offsets[0];\n    popper.left -= offsets[1];\n  } else if (basePlacement === 'right') {\n    popper.top += offsets[0];\n    popper.left += offsets[1];\n  } else if (basePlacement === 'top') {\n    popper.left += offsets[0];\n    popper.top -= offsets[1];\n  } else if (basePlacement === 'bottom') {\n    popper.left += offsets[0];\n    popper.top += offsets[1];\n  }\n\n  data.popper = popper;\n  return data;\n}\n","import getOffsetParent from '../utils/getOffsetParent';\nimport getBoundaries from '../utils/getBoundaries';\nimport getSupportedPropertyName from '../utils/getSupportedPropertyName';\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function preventOverflow(data, options) {\n  let boundariesElement =\n    options.boundariesElement || getOffsetParent(data.instance.popper);\n\n  // If offsetParent is the reference element, we really want to\n  // go one step up and use the next offsetParent as reference to\n  // avoid to make this modifier completely useless and look like broken\n  if (data.instance.reference === boundariesElement) {\n    boundariesElement = getOffsetParent(boundariesElement);\n  }\n\n  // NOTE: DOM access here\n  // resets the popper's position so that the document size can be calculated excluding\n  // the size of the popper element itself\n  const transformProp = getSupportedPropertyName('transform');\n  const popperStyles = data.instance.popper.style; // assignment to help minification\n  const { top, left, [transformProp]: transform } = popperStyles;\n  popperStyles.top = '';\n  popperStyles.left = '';\n  popperStyles[transformProp] = '';\n\n  const boundaries = getBoundaries(\n    data.instance.popper,\n    data.instance.reference,\n    options.padding,\n    boundariesElement,\n    data.positionFixed\n  );\n\n  // NOTE: DOM access here\n  // restores the original style properties after the offsets have been computed\n  popperStyles.top = top;\n  popperStyles.left = left;\n  popperStyles[transformProp] = transform;\n\n  options.boundaries = boundaries;\n\n  const order = options.priority;\n  let popper = data.offsets.popper;\n\n  const check = {\n    primary(placement) {\n      let value = popper[placement];\n      if (\n        popper[placement] < boundaries[placement] &&\n        !options.escapeWithReference\n      ) {\n        value = Math.max(popper[placement], boundaries[placement]);\n      }\n      return { [placement]: value };\n    },\n    secondary(placement) {\n      const mainSide = placement === 'right' ? 'left' : 'top';\n      let value = popper[mainSide];\n      if (\n        popper[placement] > boundaries[placement] &&\n        !options.escapeWithReference\n      ) {\n        value = Math.min(\n          popper[mainSide],\n          boundaries[placement] -\n            (placement === 'right' ? popper.width : popper.height)\n        );\n      }\n      return { [mainSide]: value };\n    },\n  };\n\n  order.forEach(placement => {\n    const side =\n      ['left', 'top'].indexOf(placement) !== -1 ? 'primary' : 'secondary';\n    popper = { ...popper, ...check[side](placement) };\n  });\n\n  data.offsets.popper = popper;\n\n  return data;\n}\n","/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function keepTogether(data) {\n  const { popper, reference } = data.offsets;\n  const placement = data.placement.split('-')[0];\n  const floor = Math.floor;\n  const isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\n  const side = isVertical ? 'right' : 'bottom';\n  const opSide = isVertical ? 'left' : 'top';\n  const measurement = isVertical ? 'width' : 'height';\n\n  if (popper[side] < floor(reference[opSide])) {\n    data.offsets.popper[opSide] =\n      floor(reference[opSide]) - popper[measurement];\n  }\n  if (popper[opSide] > floor(reference[side])) {\n    data.offsets.popper[opSide] = floor(reference[side]);\n  }\n\n  return data;\n}\n","import getClientRect from '../utils/getClientRect';\nimport getOuterSizes from '../utils/getOuterSizes';\nimport isModifierRequired from '../utils/isModifierRequired';\nimport getStyleComputedProperty from '../utils/getStyleComputedProperty';\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function arrow(data, options) {\n  // arrow depends on keepTogether in order to work\n  if (!isModifierRequired(data.instance.modifiers, 'arrow', 'keepTogether')) {\n    return data;\n  }\n\n  let arrowElement = options.element;\n\n  // if arrowElement is a string, suppose it's a CSS selector\n  if (typeof arrowElement === 'string') {\n    arrowElement = data.instance.popper.querySelector(arrowElement);\n\n    // if arrowElement is not found, don't run the modifier\n    if (!arrowElement) {\n      return data;\n    }\n  } else {\n    // if the arrowElement isn't a query selector we must check that the\n    // provided DOM node is child of its popper node\n    if (!data.instance.popper.contains(arrowElement)) {\n      console.warn(\n        'WARNING: `arrow.element` must be child of its popper element!'\n      );\n      return data;\n    }\n  }\n\n  const placement = data.placement.split('-')[0];\n  const { popper, reference } = data.offsets;\n  const isVertical = ['left', 'right'].indexOf(placement) !== -1;\n\n  const len = isVertical ? 'height' : 'width';\n  const sideCapitalized = isVertical ? 'Top' : 'Left';\n  const side = sideCapitalized.toLowerCase();\n  const altSide = isVertical ? 'left' : 'top';\n  const opSide = isVertical ? 'bottom' : 'right';\n  const arrowElementSize = getOuterSizes(arrowElement)[len];\n\n  //\n  // extends keepTogether behavior making sure the popper and its\n  // reference have enough pixels in conjunction\n  //\n\n  // top/left side\n  if (reference[opSide] - arrowElementSize < popper[side]) {\n    data.offsets.popper[side] -=\n      popper[side] - (reference[opSide] - arrowElementSize);\n  }\n  // bottom/right side\n  if (reference[side] + arrowElementSize > popper[opSide]) {\n    data.offsets.popper[side] +=\n      reference[side] + arrowElementSize - popper[opSide];\n  }\n  data.offsets.popper = getClientRect(data.offsets.popper);\n\n  // compute center of the popper\n  const center = reference[side] + reference[len] / 2 - arrowElementSize / 2;\n\n  // Compute the sideValue using the updated popper offsets\n  // take popper margin in account because we don't have this info available\n  const css = getStyleComputedProperty(data.instance.popper);\n  const popperMarginSide = parseFloat(css[`margin${sideCapitalized}`], 10);\n  const popperBorderSide = parseFloat(css[`border${sideCapitalized}Width`], 10);\n  let sideValue =\n    center - data.offsets.popper[side] - popperMarginSide - popperBorderSide;\n\n  // prevent arrowElement from being placed not contiguously to its popper\n  sideValue = Math.max(Math.min(popper[len] - arrowElementSize, sideValue), 0);\n\n  data.arrowElement = arrowElement;\n  data.offsets.arrow = {\n    [side]: Math.round(sideValue),\n    [altSide]: '', // make sure to unset any eventual altSide value from the DOM node\n  };\n\n  return data;\n}\n","import getOppositePlacement from '../utils/getOppositePlacement';\nimport getOppositeVariation from '../utils/getOppositeVariation';\nimport getPopperOffsets from '../utils/getPopperOffsets';\nimport runModifiers from '../utils/runModifiers';\nimport getBoundaries from '../utils/getBoundaries';\nimport isModifierEnabled from '../utils/isModifierEnabled';\nimport clockwise from '../utils/clockwise';\n\nconst BEHAVIORS = {\n  FLIP: 'flip',\n  CLOCKWISE: 'clockwise',\n  COUNTERCLOCKWISE: 'counterclockwise',\n};\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function flip(data, options) {\n  // if `inner` modifier is enabled, we can't use the `flip` modifier\n  if (isModifierEnabled(data.instance.modifiers, 'inner')) {\n    return data;\n  }\n\n  if (data.flipped && data.placement === data.originalPlacement) {\n    // seems like flip is trying to loop, probably there's not enough space on any of the flippable sides\n    return data;\n  }\n\n  const boundaries = getBoundaries(\n    data.instance.popper,\n    data.instance.reference,\n    options.padding,\n    options.boundariesElement,\n    data.positionFixed\n  );\n\n  let placement = data.placement.split('-')[0];\n  let placementOpposite = getOppositePlacement(placement);\n  let variation = data.placement.split('-')[1] || '';\n\n  let flipOrder = [];\n\n  switch (options.behavior) {\n    case BEHAVIORS.FLIP:\n      flipOrder = [placement, placementOpposite];\n      break;\n    case BEHAVIORS.CLOCKWISE:\n      flipOrder = clockwise(placement);\n      break;\n    case BEHAVIORS.COUNTERCLOCKWISE:\n      flipOrder = clockwise(placement, true);\n      break;\n    default:\n      flipOrder = options.behavior;\n  }\n\n  flipOrder.forEach((step, index) => {\n    if (placement !== step || flipOrder.length === index + 1) {\n      return data;\n    }\n\n    placement = data.placement.split('-')[0];\n    placementOpposite = getOppositePlacement(placement);\n\n    const popperOffsets = data.offsets.popper;\n    const refOffsets = data.offsets.reference;\n\n    // using floor because the reference offsets may contain decimals we are not going to consider here\n    const floor = Math.floor;\n    const overlapsRef =\n      (placement === 'left' &&\n        floor(popperOffsets.right) > floor(refOffsets.left)) ||\n      (placement === 'right' &&\n        floor(popperOffsets.left) < floor(refOffsets.right)) ||\n      (placement === 'top' &&\n        floor(popperOffsets.bottom) > floor(refOffsets.top)) ||\n      (placement === 'bottom' &&\n        floor(popperOffsets.top) < floor(refOffsets.bottom));\n\n    const overflowsLeft = floor(popperOffsets.left) < floor(boundaries.left);\n    const overflowsRight = floor(popperOffsets.right) > floor(boundaries.right);\n    const overflowsTop = floor(popperOffsets.top) < floor(boundaries.top);\n    const overflowsBottom =\n      floor(popperOffsets.bottom) > floor(boundaries.bottom);\n\n    const overflowsBoundaries =\n      (placement === 'left' && overflowsLeft) ||\n      (placement === 'right' && overflowsRight) ||\n      (placement === 'top' && overflowsTop) ||\n      (placement === 'bottom' && overflowsBottom);\n\n    // flip the variation if required\n    const isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\n\n    // flips variation if reference element overflows boundaries\n    const flippedVariationByRef =\n      !!options.flipVariations &&\n      ((isVertical && variation === 'start' && overflowsLeft) ||\n        (isVertical && variation === 'end' && overflowsRight) ||\n        (!isVertical && variation === 'start' && overflowsTop) ||\n        (!isVertical && variation === 'end' && overflowsBottom));\n\n    // flips variation if popper content overflows boundaries\n    const flippedVariationByContent =\n      !!options.flipVariationsByContent &&\n      ((isVertical && variation === 'start' && overflowsRight) ||\n        (isVertical && variation === 'end' && overflowsLeft) ||\n        (!isVertical && variation === 'start' && overflowsBottom) ||\n        (!isVertical && variation === 'end' && overflowsTop));\n\n    const flippedVariation = flippedVariationByRef || flippedVariationByContent;\n\n    if (overlapsRef || overflowsBoundaries || flippedVariation) {\n      // this boolean to detect any flip loop\n      data.flipped = true;\n\n      if (overlapsRef || overflowsBoundaries) {\n        placement = flipOrder[index + 1];\n      }\n\n      if (flippedVariation) {\n        variation = getOppositeVariation(variation);\n      }\n\n      data.placement = placement + (variation ? '-' + variation : '');\n\n      // this object contains `position`, we want to preserve it along with\n      // any additional property we may add in the future\n      data.offsets.popper = {\n        ...data.offsets.popper,\n        ...getPopperOffsets(\n          data.instance.popper,\n          data.offsets.reference,\n          data.placement\n        ),\n      };\n\n      data = runModifiers(data.instance.modifiers, data, 'flip');\n    }\n  });\n  return data;\n}\n","/**\n * Get the opposite placement variation of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement variation\n * @returns {String} flipped placement variation\n */\nexport default function getOppositeVariation(variation) {\n  if (variation === 'end') {\n    return 'start';\n  } else if (variation === 'start') {\n    return 'end';\n  }\n  return variation;\n}\n","import getClientRect from '../utils/getClientRect';\nimport getOppositePlacement from '../utils/getOppositePlacement';\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function inner(data) {\n  const placement = data.placement;\n  const basePlacement = placement.split('-')[0];\n  const { popper, reference } = data.offsets;\n  const isHoriz = ['left', 'right'].indexOf(basePlacement) !== -1;\n\n  const subtractLength = ['top', 'left'].indexOf(basePlacement) === -1;\n\n  popper[isHoriz ? 'left' : 'top'] =\n    reference[basePlacement] -\n    (subtractLength ? popper[isHoriz ? 'width' : 'height'] : 0);\n\n  data.placement = getOppositePlacement(placement);\n  data.offsets.popper = getClientRect(popper);\n\n  return data;\n}\n","import isModifierRequired from '../utils/isModifierRequired';\nimport find from '../utils/find';\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nexport default function hide(data) {\n  if (!isModifierRequired(data.instance.modifiers, 'hide', 'preventOverflow')) {\n    return data;\n  }\n\n  const refRect = data.offsets.reference;\n  const bound = find(\n    data.instance.modifiers,\n    modifier => modifier.name === 'preventOverflow'\n  ).boundaries;\n\n  if (\n    refRect.bottom < bound.top ||\n    refRect.left > bound.right ||\n    refRect.top > bound.bottom ||\n    refRect.right < bound.left\n  ) {\n    // Avoid unnecessary DOM access if visibility hasn't changed\n    if (data.hide === true) {\n      return data;\n    }\n\n    data.hide = true;\n    data.attributes['x-out-of-boundaries'] = '';\n  } else {\n    // Avoid unnecessary DOM access if visibility hasn't changed\n    if (data.hide === false) {\n      return data;\n    }\n\n    data.hide = false;\n    data.attributes['x-out-of-boundaries'] = false;\n  }\n\n  return data;\n}\n","/**\n * @function\n * @memberof Popper.Utils\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Boolean} shouldRound - If the offsets should be rounded at all\n * @returns {Object} The popper's position offsets rounded\n *\n * The tale of pixel-perfect positioning. It's still not 100% perfect, but as\n * good as it can be within reason.\n * Discussion here: https://github.com/FezVrasta/popper.js/pull/715\n *\n * Low DPI screens cause a popper to be blurry if not using full pixels (Safari\n * as well on High DPI screens).\n *\n * Firefox prefers no rounding for positioning and does not have blurriness on\n * high DPI screens.\n *\n * Only horizontal placement and left/right values need to be considered.\n */\nexport default function getRoundedOffsets(data, shouldRound) {\n  const { popper, reference } = data.offsets;\n  const { round, floor } = Math;\n  const noRound = v => v;\n  \n  const referenceWidth = round(reference.width);\n  const popperWidth = round(popper.width);\n  \n  const isVertical = ['left', 'right'].indexOf(data.placement) !== -1;\n  const isVariation = data.placement.indexOf('-') !== -1;\n  const sameWidthParity = referenceWidth % 2 === popperWidth % 2;\n  const bothOddWidth = referenceWidth % 2 === 1 && popperWidth % 2 === 1;\n\n  const horizontalToInteger = !shouldRound\n    ? noRound\n    : isVertical || isVariation || sameWidthParity\n    ? round\n    : floor;\n  const verticalToInteger = !shouldRound ? noRound : round;\n\n  return {\n    left: horizontalToInteger(\n      bothOddWidth && !isVariation && shouldRound\n        ? popper.left - 1\n        : popper.left\n    ),\n    top: verticalToInteger(popper.top),\n    bottom: verticalToInteger(popper.bottom),\n    right: horizontalToInteger(popper.right),\n  };\n}\n","import setStyles from '../utils/setStyles';\nimport setAttributes from '../utils/setAttributes';\nimport getReferenceOffsets from '../utils/getReferenceOffsets';\nimport computeAutoPlacement from '../utils/computeAutoPlacement';\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} data.styles - List of style properties - values to apply to popper element\n * @argument {Object} data.attributes - List of attribute properties - values to apply to popper element\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The same data object\n */\nexport default function applyStyle(data) {\n  // any property present in `data.styles` will be applied to the popper,\n  // in this way we can make the 3rd party modifiers add custom styles to it\n  // Be aware, modifiers could override the properties defined in the previous\n  // lines of this modifier!\n  setStyles(data.instance.popper, data.styles);\n\n  // any property present in `data.attributes` will be applied to the popper,\n  // they will be set as HTML attributes of the element\n  setAttributes(data.instance.popper, data.attributes);\n\n  // if arrowElement is defined and arrowStyles has some properties\n  if (data.arrowElement && Object.keys(data.arrowStyles).length) {\n    setStyles(data.arrowElement, data.arrowStyles);\n  }\n\n  return data;\n}\n\n/**\n * Set the x-placement attribute before everything else because it could be used\n * to add margins to the popper margins needs to be calculated to get the\n * correct popper offsets.\n * @method\n * @memberof Popper.modifiers\n * @param {HTMLElement} reference - The reference element used to position the popper\n * @param {HTMLElement} popper - The HTML element used as popper\n * @param {Object} options - Popper.js options\n */\nexport function applyStyleOnLoad(\n  reference,\n  popper,\n  options,\n  modifierOptions,\n  state\n) {\n  // compute reference element offsets\n  const referenceOffsets = getReferenceOffsets(state, popper, reference, options.positionFixed);\n\n  // compute auto placement, store placement inside the data object,\n  // modifiers will be able to edit `placement` if needed\n  // and refer to originalPlacement to know the original value\n  const placement = computeAutoPlacement(\n    options.placement,\n    referenceOffsets,\n    popper,\n    reference,\n    options.modifiers.flip.boundariesElement,\n    options.modifiers.flip.padding\n  );\n\n  popper.setAttribute('x-placement', placement);\n\n  // Apply `position` to popper before anything else because\n  // without the position applied we can't guarantee correct computations\n  setStyles(popper, { position: options.positionFixed ? 'fixed' : 'absolute' });\n\n  return options;\n}\n","/**\n * Set the attributes to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the attributes to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nexport default function setAttributes(element, attributes) {\n  Object.keys(attributes).forEach(function(prop) {\n    const value = attributes[prop];\n    if (value !== false) {\n      element.setAttribute(prop, attributes[prop]);\n    } else {\n      element.removeAttribute(prop);\n    }\n  });\n}\n","// Utils\nimport debounce from './utils/debounce';\nimport isFunction from './utils/isFunction';\n\n// Methods\nimport update from './methods/update';\nimport destroy from './methods/destroy';\nimport enableEventListeners from './methods/enableEventListeners';\nimport disableEventListeners from './methods/disableEventListeners';\nimport Defaults from './methods/defaults';\nimport placements from './methods/placements';\n\nexport default class Popper {\n  /**\n   * Creates a new Popper.js instance.\n   * @class Popper\n   * @param {Element|referenceObject} reference - The reference element used to position the popper\n   * @param {Element} popper - The HTML / XML element used as the popper\n   * @param {Object} options - Your custom options to override the ones defined in [Defaults](#defaults)\n   * @return {Object} instance - The generated Popper.js instance\n   */\n  constructor(reference, popper, options = {}) {\n    // make update() debounced, so that it only runs at most once-per-tick\n    this.update = debounce(this.update.bind(this));\n\n    // with {} we create a new object with the options inside it\n    this.options = { ...Popper.Defaults, ...options };\n\n    // init state\n    this.state = {\n      isDestroyed: false,\n      isCreated: false,\n      scrollParents: [],\n    };\n\n    // get reference and popper elements (allow jQuery wrappers)\n    this.reference = reference && reference.jquery ? reference[0] : reference;\n    this.popper = popper && popper.jquery ? popper[0] : popper;\n\n    // Deep merge modifiers options\n    this.options.modifiers = {};\n    Object.keys({\n      ...Popper.Defaults.modifiers,\n      ...options.modifiers,\n    }).forEach(name => {\n      this.options.modifiers[name] = {\n        // If it's a built-in modifier, use it as base\n        ...(Popper.Defaults.modifiers[name] || {}),\n        // If there are custom options, override and merge with default ones\n        ...(options.modifiers ? options.modifiers[name] : {}),\n      };\n    });\n\n    // Refactoring modifiers' list (Object => Array)\n    this.modifiers = Object.keys(this.options.modifiers)\n      .map(name => ({\n        name,\n        ...this.options.modifiers[name],\n      }))\n      // sort the modifiers by order\n      .sort((a, b) => a.order - b.order);\n\n    // modifiers have the ability to execute arbitrary code when Popper.js get inited\n    // such code is executed in the same order of its modifier\n    // they could add new properties to their options configuration\n    // BE AWARE: don't add options to `options.modifiers.name` but to `modifierOptions`!\n    this.modifiers.forEach(modifierOptions => {\n      if (modifierOptions.enabled && isFunction(modifierOptions.onLoad)) {\n        modifierOptions.onLoad(\n          this.reference,\n          this.popper,\n          this.options,\n          modifierOptions,\n          this.state\n        );\n      }\n    });\n\n    // fire the first update to position the popper in the right place\n    this.update();\n\n    const eventsEnabled = this.options.eventsEnabled;\n    if (eventsEnabled) {\n      // setup event listeners, they will take care of update the position in specific situations\n      this.enableEventListeners();\n    }\n\n    this.state.eventsEnabled = eventsEnabled;\n  }\n\n  // We can't use class properties because they don't get listed in the\n  // class prototype and break stuff like Sinon stubs\n  update() {\n    return update.call(this);\n  }\n  destroy() {\n    return destroy.call(this);\n  }\n  enableEventListeners() {\n    return enableEventListeners.call(this);\n  }\n  disableEventListeners() {\n    return disableEventListeners.call(this);\n  }\n\n  /**\n   * Schedules an update. It will run on the next UI update available.\n   * @method scheduleUpdate\n   * @memberof Popper\n   */\n  scheduleUpdate = () => requestAnimationFrame(this.update);\n\n  /**\n   * Collection of utilities useful when writing custom modifiers.\n   * Starting from version 1.7, this method is available only if you\n   * include `popper-utils.js` before `popper.js`.\n   *\n   * **DEPRECATION**: This way to access PopperUtils is deprecated\n   * and will be removed in v2! Use the PopperUtils module directly instead.\n   * Due to the high instability of the methods contained in Utils, we can't\n   * guarantee them to follow semver. Use them at your own risk!\n   * @static\n   * @private\n   * @type {Object}\n   * @deprecated since version 1.8\n   * @member Utils\n   * @memberof Popper\n   */\n  static Utils = (typeof window !== 'undefined' ? window : global).PopperUtils;\n\n  static placements = placements;\n\n  static Defaults = Defaults;\n}\n\n/**\n * The `referenceObject` is an object that provides an interface compatible with Popper.js\n * and lets you use it as replacement of a real DOM node.<br />\n * You can use this method to position a popper relatively to a set of coordinates\n * in case you don't have a DOM node to use as reference.\n *\n * ```\n * new Popper(referenceObject, popperNode);\n * ```\n *\n * NB: This feature isn't supported in Internet Explorer 10.\n * @name referenceObject\n * @property {Function} data.getBoundingClientRect\n * A function that returns a set of coordinates compatible with the native `getBoundingClientRect` method.\n * @property {number} data.clientWidth\n * An ES6 getter that will return the width of the virtual reference element.\n * @property {number} data.clientHeight\n * An ES6 getter that will return the height of the virtual reference element.\n */\n","export * from './lib/autocomplete';\nexport * from './lib/menu';\nexport * from './lib/popup';\nexport * from './lib/select';\nexport * from './lib/tooltip';\n","import {dom, DomElementArg, MaybeObsArray, onElem, onKeyElem} from 'grainjs';\nimport {BaseMenu, defaultMenuOptions, IMenuOptions, menuItem} from './menu';\nimport {IOpenController, IPopupContent, PopupControl, setPopupToFunc} from './popup';\n\n/**\n * IAutocomplete options adds some properties to IMenuOptions to customize autocomplete behavior:\n */\nexport interface IAutocompleteOptions extends IMenuOptions {\n\n  // Overrides default case-insensitive row select behavior.\n  findMatch?: (content: HTMLElement[], value: string) => HTMLElement|null;\n\n  // A callback triggered when user clicks one of the choices.\n  onClick?: (choice: string) => void;\n\n}\n\nconst defaultFindMatch = (content: HTMLElement[], val: string) => {\n  if (!val) { return null; } // Empty string match nothing\n  val = val.toLowerCase();\n  return content.find((el: any) => el.textContent.toLowerCase().startsWith(val)) || null;\n};\n\n/**\n * User interface for creating a weasel autocomplete element in DOM.\n *\n * Usage:\n *      const employees = ['Thomas', 'June', 'Bethany', 'Mark', 'Marjorey', 'Zachary'];\n *      const inputElem = input(...);\n *      autocomplete(inputElem, employees);\n */\nexport function autocomplete(\n  inputElem: HTMLInputElement,\n  choices: MaybeObsArray<string>,\n  options: IAutocompleteOptions = {}\n): HTMLInputElement {\n\n  // Options to pass into the Autocomplete class.\n  const menuOptions: IAutocompleteOptions = {\n    ...defaultMenuOptions,\n    trigger: [(triggerElem: Element, ctl: PopupControl) => {\n      dom.onElem(triggerElem, 'focus', () => ctl.open());\n      dom.onKeyElem(triggerElem as HTMLElement, 'keydown', {\n        ArrowDown: () => ctl.open(),\n        ArrowUp: () => ctl.open()\n      });\n    }],\n    stretchToSelector: 'input, textarea',\n    ...options\n  };\n\n  const contentFunc = () => [\n    dom.forEach(choices, (opt) => (\n      menuItem(\n        () => { inputElem.value = opt; if (options.onClick) { options.onClick(opt); }},\n        opt,\n      )\n    ))\n  ];\n\n  setPopupToFunc(inputElem,\n    (ctl) => Autocomplete.create(null, ctl, contentFunc(), menuOptions),\n    menuOptions);\n\n  return inputElem;\n}\n\n/**\n * Creates an instance of Menu meant to be attached to an input and used as an autocomplete.\n *\n * Should always be created using autocomplete(), which accepts as an argument the input element.\n */\nclass Autocomplete extends BaseMenu implements IPopupContent {\n  private readonly _rows: HTMLElement[] = Array.from(this._menuContent.children) as HTMLElement[];\n  private readonly _findMatch: (content: HTMLElement[], value: string) => HTMLElement|null;\n  private _lastAsTyped: string;\n\n  constructor(ctl: IOpenController, items: DomElementArg[], options: IAutocompleteOptions) {\n    super(ctl, items, options);\n    this.focusOnSelected = false;\n\n    this._findMatch = options.findMatch || defaultFindMatch;\n\n    const trigger = ctl.getTriggerElem() as HTMLInputElement;\n\n    // Keeps track of the last value as typed by the user.\n    this._lastAsTyped = trigger.value;\n    this.autoDispose(dom.onElem(trigger, 'input', () => { this._lastAsTyped = trigger.value; }));\n\n    // Add key handlers to the trigger element as well as the menu if it is an input.\n    this.autoDispose(onKeyElem(trigger, 'keydown', {\n      ArrowDown: () => {\n        this.nextIndex();\n        this._updateValue(trigger);\n      },\n      ArrowUp: () => {\n        this.prevIndex();\n        this._updateValue(trigger);\n      },\n      // On Enter (and Tab) key, we update the trigger's value and close the dropdown. We always let\n      // event propagate (notice the '$' at the end of 'Enter$') because the user may want to handle\n      // these events independently as well. Note that the menu items' action does not run on Enter\n      // because the focus remains on the trigger element at all time.\n      Enter$: (ev) => {\n        this._updateValue(trigger);\n        ctl.close();\n      },\n      Tab$: (ev) => {\n        this._updateValue(trigger);\n        ctl.close();\n      },\n      Escape$: () => ctl.close(),\n    }));\n\n    this.autoDispose(onElem(trigger, 'input', () => {\n      this._selectRow(trigger.value);\n    }));\n\n    if (trigger.value) {\n      this._selectRow(trigger.value);\n    }\n\n    // Prevent trigger element from being blurred on click.\n    dom.onElem(this._menuContent, 'mousedown', (ev) => ev.preventDefault());\n  }\n\n  private _selectRow(inputVal: string): void {\n    const match: HTMLElement|null = this._findMatch(this._rows, inputVal);\n    this.setSelected(match);\n  }\n\n  // Update trigger's value with the currently selected choice. Or with the last typed value, if\n  // nothing is selected.\n  private _updateValue(trigger: HTMLInputElement) {\n    trigger.value = this._selected ? this._selected.textContent! : this._lastAsTyped;\n  }\n}\n","/**\n * A menu is a collection of menu items. Besides holding the items, it also knows which item is\n * selected, and allows selection via the keyboard.\n *\n * The standard menu item offers enough flexibility to suffice for many needs, and may be replaced\n * entirely by a custom item. For an item to be a selectable menu item, it needs `tabindex=-1`\n * attribute set. If unset, or if the \"disabled\" class is set, the item will not be selectable.\n *\n * Further, if `dom.dataElem(elem, 'menuItemSelected', (yesNo: boolean, elem) => {})` is set, that\n * callback will be called whenever the item is selected and unselected. In addition, the selected\n * item gets a css class. A callback should be seldom needed, but it is use for nested menus.\n *\n * Clicks on items will normally propagate to the menu, where they get caught and close the menu.\n * If a click on an item should not close the menu, the item should stop the click's propagation.\n */\nimport {dom, domDispose, DomElementArg, DomElementMethod, DomMethod, EventCB, styled} from 'grainjs';\nimport {Disposable, onKeyDown, onKeyElem} from 'grainjs';\nimport defaultsDeep = require('lodash/defaultsDeep');\nimport mergeWith = require('lodash/mergeWith');\nimport {IOpenController, IPopupContent, IPopupOptions, PopupControl, setPopupToFunc} from './popup';\nimport {ISelectOptions} from './select';\n\nexport type MenuCreateFunc = (ctl: IOpenController) => DomElementArg[];\n\ntype MenuClassCons = (context: any, ctl: IOpenController, items: DomElementArg[], options?: IMenuOptions) => BaseMenu;\n\nexport interface IMenuOptions extends IPopupOptions {\n  isSubMenu?: boolean;\n  selectOnOpen?: boolean;\n  menuCssClass?: string;    // If provided, applies the css class to the menu container.\n\n  // If given, the menu will set the `weasel-popup-open` css class on the matching ancestor of the\n  // trigger element (in addition to setting it on the trigger element itself). Useful to keep an\n  // element highlighted while an associated menu is open.\n  parentSelectorToMark?: string;\n\n  // If given, sets the width of the opened menu to equal that of the matching ancestor of the\n  // trigger element.\n  stretchToSelector?: string;\n\n  // If set to true, users can move to nothing selected with arrow keys. Otherwise, pressing arrow\n  // down on the last item selects the first one, and pressing the arrow up on the first item\n  // selects the last one.\n  allowNothingSelected?: boolean;\n}\n\nexport interface ISubMenuOptions {\n  menuCssClass?: string;    // If provided, applies the css class to the menu container.\n}\n\n/**\n * Attaches a menu to its trigger element, for example:\n *    dom('div', 'Open menu', menu((ctl) => [\n *      menuItem(...),\n *      menuItem(...),\n *    ]))\n */\nexport function menu(createFunc: MenuCreateFunc, options?: IMenuOptions): DomElementMethod {\n  return (elem) => menuElem(elem, createFunc, options);\n}\nexport function menuElem(triggerElem: Element, createFunc: MenuCreateFunc, options: IMenuOptions = {}) {\n  return baseElem((...args) => Menu.create(...args), triggerElem, createFunc, options);\n}\n\n/**\n * Attaches an inputMenu to its trigger element, for example:\n *    dom('input', select((ctl) => [\n *      menuItem(...),\n *      menuItem(...),\n *    ]))\n * The inputMenu menu differs from a normal menu in that focus is maintained on the triggerElem\n * when the menu is open. This makes it ideal for input trigger elements.\n */\nexport function inputMenu(createFunc: MenuCreateFunc, options?: IMenuOptions): DomElementMethod {\n  return (elem) => inputMenuElem(elem, createFunc, options);\n}\nexport function inputMenuElem(triggerElem: Element, createFunc: MenuCreateFunc, options: IMenuOptions = {}) {\n  return baseElem((...args) => InputMenu.create(...args), triggerElem, createFunc, options);\n}\n\n// Helper for menuElem and selectElem.\nfunction baseElem(createFn: MenuClassCons, triggerElem: Element, createFunc: MenuCreateFunc,\n                  options: ISelectOptions = {}) {\n  // This is similar to defaultsDeep but avoids merging arrays, since options.trigger should have\n  // the exact value from options if present.\n  options = mergeWith({}, defaultMenuOptions, options,\n    (objValue: any, srcValue: any) => Array.isArray(srcValue) ? srcValue : undefined);\n  setPopupToFunc(triggerElem,\n    (ctl, opts) => createFn(null, ctl, createFunc(ctl), defaultsDeep(opts, options)),\n    options);\n}\n\n/**\n * Implements a single menu item.\n *\n * The appearance of the menuItem components can be changed by setting the followingcss variables\n * in the parent project:\n *    --weaseljs-selected-background-color\n *    --weaseljs-selected-color\n *    --weaseljs-menu-item-padding\n */\nexport function menuItem(action: (item: HTMLElement) => void, ...args: DomElementArg[]): Element {\n  return cssMenuItem(\n    ...args,\n    dom.on('click', (ev, elem) => elem.classList.contains('disabled') || action(elem)),\n    onKeyDown({Enter$: (ev, elem) => action(elem)})\n  );\n}\n\n/**\n * A version of menuItem that's an <a> link element.\n */\nexport function menuItemLink(...args: DomElementArg[]): Element {\n  return cssMenuItemLink({tabindex: '-1'}, cssMenuItem.cls(''), ...args,\n    // This prevents propagation, but NOT the default action, which is to open the link.\n    onKeyDown({Enter$: (ev) => ev.stopPropagation()})\n  );\n}\n\nexport const defaultMenuOptions: IMenuOptions = {\n  attach: 'body',\n  boundaries: 'viewport',\n  placement: 'bottom-start',\n  showDelay: 0,\n  trigger: ['click'],\n  modifiers: {\n    // gpuAcceleration (true by default) causes a tiny UI artifact: attempting to drag a link, at\n    // least in Firefox, causes it to be dragged from a different location on the screen where it\n    // actually is, which looks strange. Disabling has no noticeable downsides.\n    computeStyle: {gpuAcceleration: false}\n  },\n};\n\n/**\n * Implementation of the BaseMenu. Extended by Menu and Select.\n */\nexport class BaseMenu extends Disposable implements IPopupContent {\n  // The outer element (required by IPopupContent), which contains _menuContent.\n  public readonly content: HTMLElement;\n\n  // The UL element containing the actual menu items.\n  protected _menuContent: HTMLElement;\n\n  protected _selected: HTMLElement|null = null;\n\n  // Indicates whether menu rows should be given browser focus when selected.\n  // Modified by extending classes to prevent trigger element from losing focus.\n  private _focusOnSelected: boolean = true;\n\n  private _allowNothingSelected: boolean;\n\n  constructor(private ctl: IOpenController, items: DomElementArg[], options: IMenuOptions = {}) {\n    super();\n    const stretchContainer: Element|null = options.stretchToSelector ?\n      ctl.getTriggerElem().closest(options.stretchToSelector) : null;\n\n    // Set `weasel-popup-open` class on the ancestor of trigger that matches parentSelectorToMark.\n    if (options && options.parentSelectorToMark) {\n      const parent = ctl.getTriggerElem().closest(options.parentSelectorToMark);\n      if (parent) {\n        ctl.setOpenClass(parent);\n      }\n    }\n\n    this._allowNothingSelected = Boolean(options.allowNothingSelected);\n\n    this.content = cssMenuWrap(\n      this._menuContent = cssMenu({class: options.menuCssClass || ''},\n        items,\n        stretchContainer ? (elem) => stretchMenuToContainer(elem, stretchContainer) : null,\n        mouseOverOnMove((ev) => this._onMouseOver(ev)),\n        dom.on('mouseleave', (ev) => this._onMouseLeave(ev)),\n        onKeyDown({\n          ArrowDown: () => this.nextIndex(),\n          ArrowUp: () => this.prevIndex(),\n          ...options.isSubMenu ? {\n            ArrowLeft: () => ctl.close(0),\n          } : {},\n        }),\n      ),\n      // Events set on the parent of _menuContent receive events bubbled up from submenus.\n      dom.on('click', (ev) => isInSelectableItem(ev.target as Element) ? ctl.close(0) : ev.stopPropagation()),\n      options.isSubMenu ? null :\n        onKeyDown({\n          Escape: () => ctl.close(0),\n          Enter: () => ctl.close(0),    // gets bubbled key after action is taken.\n        }),\n    );\n    this.onDispose(() => domDispose(this.content));\n  }\n\n  public onRemove() {\n    // The focus restoration is mainly needed for the sake of submenus. When focus has already\n    // moved elsewhere, don't restore it. We need to check it before the menu is removed from DOM.\n    if (this.content.contains(document.activeElement)) {\n      (this.ctl.getTriggerElem() as HTMLElement).focus();\n    }\n  }\n\n  protected nextIndex(): void {\n    const next = this._getNextSelectable(\n      this._selected, (elem) => elem.nextElementSibling, this._menuContent.firstElementChild\n    );\n    this.setSelected(next);\n  }\n\n  protected prevIndex(): void {\n    const next = this._getNextSelectable(\n      this._selected, (elem) => elem.previousElementSibling, this._menuContent.lastElementChild\n    );\n    this.setSelected(next);\n  }\n\n  // When the selected element changes, update the classes of the formerly and newly-selected\n  // elements and call any callbacks bound to selection stored on the elements.\n  // Also focus the newly-selected element for keyboard events.\n  protected setSelected(elem: HTMLElement|null) {\n    const prev = this._selected;\n    if (elem === prev) { return; }\n    if (prev) {\n      const callback = dom.getData(prev, 'menuItemSelected');\n      if (callback) { callback(false, prev); }\n      prev.classList.remove(cssMenuItem.className + '-sel');\n    }\n    if (elem) {\n      const callback = dom.getData(elem, 'menuItemSelected');\n      if (callback) { callback(true, elem); }\n      elem.classList.add(cssMenuItem.className + '-sel');\n    }\n    this._selected = elem;\n    // Focus the item if available, or the parent menu container otherwise.\n    if (this._focusOnSelected) { (elem || this._menuContent).focus(); }\n  }\n\n  protected set focusOnSelected(bool: boolean) {\n    this._focusOnSelected = bool;\n  }\n\n  private _onMouseOver(ev: MouseEvent) {\n    if (!isMenuContainer(ev.target as Element)) {\n      const elem = this._findTargetItem(ev);\n      this.setSelected(elem);     // If elem is null, intentionally deselect.\n    }\n  }\n\n  private _onMouseLeave(ev: MouseEvent) {\n    const elem = this._selected;\n    if (elem && !elem.classList.contains('weasel-popup-open')) {\n      // Don't deselect if there is an open submenu.\n      this.setSelected(null);\n    }\n  }\n\n  private _findTargetItem(ev: MouseEvent): HTMLElement|null {\n    // Find immediate child of this._menuContent which is an ancestor of ev.target.\n    const elem = findAncestorChild(this._menuContent, ev.target as Element);\n    return elem && isSelectable(elem) ? elem : null;\n  }\n\n  /**\n   * Given a starting Element, a function to retrieve the next Element and the element to start over\n   * after reaching the last sibling, returns the next selectable Element (based on\n   * isSelectable). Returns null if the function to retrieve the next Element returns null. Always\n   * returns startElem if returned by getNext function, to prevent an infinite loop.\n   */\n  private _getNextSelectable(startElem: Element|null,\n                             getNext: (elem: Element) => Element|null,\n                             firstElem: Element|null): HTMLElement|null {\n    let next = this._getNext(startElem, getNext, firstElem);\n    while (next && next !== startElem && !isSelectable(next)) { next = this._getNext(next, getNext, firstElem); }\n    return next as HTMLElement|null;\n  }\n\n  private _getNext(elem: Element|null,\n                   getNext: (elem: Element) => Element|null,\n                   firstElem: Element|null): Element|null {\n    if (!elem) { return firstElem; }\n    return getNext(elem) || (this._allowNothingSelected ? null : firstElem);\n  }\n}\n\n/**\n * Implementation of the Menu. See menu() documentation for usage.\n */\nexport class Menu extends BaseMenu implements IPopupContent {\n  constructor(ctl: IOpenController, items: DomElementArg[], options: IMenuOptions = {}) {\n    super(ctl, items, options);\n\n    setTimeout(() =>\n      (options.selectOnOpen ? this.nextIndex() : this._menuContent.focus()), 0);\n  }\n}\n\n/**\n * Implementation of the InputMenu. See inputMenu() documentation for usage.\n */\nexport class InputMenu extends BaseMenu implements IPopupContent {\n  constructor(ctl: IOpenController, items: DomElementArg[], options: IMenuOptions = {}) {\n    super(ctl, items, options);\n\n    // Add key handlers to the trigger element as well as the menu if it is an input.\n    this.autoDispose(onKeyElem(ctl.getTriggerElem() as HTMLElement, 'keydown', {\n      ArrowDown: () => this.nextIndex(),\n      ArrowUp: () => this.prevIndex(),\n      Escape: () => ctl.close(0)\n    }));\n  }\n}\n\n/**\n * Returns true if elem is a menu (or submenu) div.\n */\nfunction isMenuContainer(elem: Element|null) {\n  return elem && elem.classList.contains(cssMenu.className);\n}\n\n/**\n * Returns a boolean indicating whether the Element is selectable in the menu.\n */\nfunction isSelectable(elem: Element): elem is HTMLElement {\n  // Offset height > 0 is used to determine if the element is visible.\n  return elem.hasAttribute('tabIndex') && !elem.classList.contains('disabled') &&\n    (elem as HTMLElement).offsetHeight > 0;\n}\n\n/**\n * Whether the given element is part of a selectable item. A click on it will close menus.\n */\nfunction isInSelectableItem(elem: Element): boolean {\n  // Similar to _findTargetItem, but finds the menu item (direct child of cssMenu) containing\n  // elem, regardless of which menu or submenu it's in, and returns whether it's selectable.\n  const item = findAncestorChild(elem.closest('.' + cssMenu.className)!, elem);\n  return item ? isSelectable(item) : false;\n}\n\n/**\n * Helper function which returns the direct child of ancestor which is an ancestor of elem, or\n * null if elem is not a descendant of ancestor.\n */\nfunction findAncestorChild(ancestor: Element, elem: Element|null): Element|null {\n  while (elem && elem.parentElement !== ancestor) {\n    elem = elem.parentElement;\n  }\n  return elem;\n}\n\n/**\n * Sets the width of the given menu element to match the given container element. Used by\n * IMenuOptions setting 'stretchToSelector'.\n */\nfunction stretchMenuToContainer(menuEl: HTMLElement, containerElem: Element): void {\n  const style = menuEl.style;\n  style.minWidth = containerElem.getBoundingClientRect().width + 'px';\n  style.marginLeft = style.marginRight = '0';\n}\n\n/**\n * A version of dom.on('mouseover') that doesn't start firing until there is first a 'mousemove'.\n * This way if an element is created under the mouse cursor (triggered by the keyboard, for\n * instance) it's not immediately highlighted, but only when a user moves the mouse.\n */\nfunction mouseOverOnMove<T extends EventTarget>(callback: EventCB<MouseEvent, T>): DomMethod<T> {\n  return (elem) => {\n    const lis = dom.onElem(elem, 'mousemove', (...args) => {\n      lis.dispose();\n      dom.onElem(elem, 'mouseover', callback);\n      callback(...args);\n    });\n  };\n}\n\n/**\n * Implements a menu item which opens a submenu.\n */\nexport function menuItemSubmenu(\n  submenu: MenuCreateFunc,\n  options: ISubMenuOptions,\n  ...args: DomElementArg[]\n): Element {\n  const ctl: PopupControl<IMenuOptions> = PopupControl.create(null);\n\n  const popupOptions: IMenuOptions = {\n    placement: 'right-start',\n    trigger: [],    // no \"click\": don't toggle this menu on click.\n    modifiers: {preventOverflow: {padding: 10}},\n    boundaries: 'viewport',\n    controller: ctl,\n    attach: '.' + cssMenuWrap.className,\n    isSubMenu: true,\n    ...options\n  };\n\n  return cssMenuItem(...args,\n    dom('div', '\\u25B6'),     // A right-pointing triangle\n\n    dom.autoDispose(ctl),\n\n    // Set the submenu to be attached as a child of this element rather than as a sibling.\n    menu(submenu, popupOptions),\n\n    // On mouseover, open the submenu. Add a delay to avoid it on transient mouseovers.\n    dom.on('mouseenter', () => ctl.open({showDelay: 200})),\n\n    // On right-arrow, open the submenu immediately, and select the first item automatically.\n    onKeyDown({\n      ArrowRight: () => ctl.open({selectOnOpen: true}),\n      Enter: () => ctl.open({selectOnOpen: true}),\n    }),\n\n    // When selection changes, use default behavior and also close the popup.\n    (elem: Element) => dom.dataElem(elem, 'menuItemSelected',\n      (yesNo: boolean) => yesNo || ctl.close()),\n\n    // Clicks that open a submenu should not cause parent menu to close.\n    dom.on('click', (ev) => { ev.stopPropagation(); }),\n  );\n}\n\nexport const cssMenuWrap = styled('div', `\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  outline: none;\n`);\n\nexport const cssMenu = styled('ul', `\n  max-height: calc(95vh - 10px);\n  box-sizing: border-box;\n  overflow: auto;\n  outline: none;\n  list-style: none;\n  margin: 2px;\n  text-align: left;\n  font-size: 13px;\n  font-family: sans-serif;\n  background-color: white;\n  color: #1D1729;\n  min-width: 160px;\n  border: none;\n  border-radius: 2px;\n  box-shadow: 0 0 2px rgba(0,0,0,0.5);\n  padding: 6px 0;\n`);\n\nexport const cssMenuItem = styled('li', `\n  display: flex;\n  justify-content: space-between;\n  outline: none;\n  padding: var(--weaseljs-menu-item-padding, 8px 24px);\n\n  &-sel {\n    cursor: pointer;\n    background-color: var(--weaseljs-selected-background-color, #5AC09C);\n    color:            var(--weaseljs-selected-color, white);\n  }\n  &.disabled {\n    color: grey;\n  }\n`);\n\nexport const cssMenuItemLink = styled('a', `\n  display: flex;\n  justify-content: space-between;\n  outline: none;\n  padding: var(--weaseljs-menu-item-padding, 8px 24px);\n  user-select: none;\n  -moz-user-select: none;\n\n  &, &:hover, &:focus {\n    color: inherit;\n    text-decoration: none;\n    outline: none;\n  }\n  &.${cssMenuItem.className}-sel {\n    color: var(--weaseljs-selected-color, white);\n  }\n`);\n\nexport const cssMenuDivider = styled('div', `\n  height: 1px;\n  width: 100%;\n  margin: 4px 0;\n  background-color: #D9D9D9;\n`);\n","import {Disposable, dom, domDispose, Holder, IDisposable} from 'grainjs';\nimport defaultsDeep = require('lodash/defaultsDeep');\nimport defaultTo = require('lodash/defaultTo');\nimport noop = require('lodash/noop');\nimport Popper from 'popper.js';\n\n/**\n * On what event the trigger element opens the popup. E.g. 'hover' is suitable for a tooltip,\n * while 'click' is suitable for a dropdown menu.\n */\ntype Trigger  = 'click' | 'contextmenu' |  'hover' | 'focus' | {keys: string[]} | AttachTriggerFunc;\n\n/**\n * AttachTriggerFunc allows setting custom trigger events in a callback function to toggle the\n * menu open state.\n */\ntype AttachTriggerFunc = (triggerElem: Element, ctl: PopupControl) => void;\n\n/**\n * Options available to setPopup* methods.\n */\nexport interface IPopupOptions {\n  // Placement of popup, as for Popper options, e.g. \"top\", \"bottom-end\" or \"right-start\".\n  placement?: Popper.Placement;\n\n  // To which element to append the popup content. Null means triggerElem.parentNode and is the\n  // default; string is a selector for the closest matching ancestor of triggerElem, e.g. 'body'.\n  attach?: Element|string|null;\n\n  // Boundaries for the placement of the popup. This determines the values of\n  // modifiers.flip.boundariesElement and modifiers.preventOverflow.boundariesElement. Use null to\n  // use the defaults from popper.js. These may be set individually via modifiers.\n  boundaries?: Element|'scrollParent'|'window'|'viewport'|null;\n\n  // On what events, the popup is triggered.\n  trigger?: Trigger[];\n\n  showDelay?: number;       // Default delay to show the popup. Defaults to 0.\n  hideDelay?: number;       // Default delay to hide the popup. Defaults to 0.\n\n  // Modifiers passed directly to the underlying Popper library.\n  // See https://popper.js.org/popper-documentation.html#Popper.Defaults\n  // Some useful ones include:\n  //  .offset.offset: Offset of popup relative to trigger. Default 0 (but affected by arrow).\n  modifiers?: Popper.Modifiers;\n\n  // The popup controller is normally created automatically, but may be created separately in\n  // order to keep a reference to it; in that case it may be passed in with the options, and it is\n  // the caller's responsibility to ensure it gets disposed.\n  controller?: PopupControl;\n}\n\n/**\n * Helper passed to IPopupFunc which represents a currently-open popup. User may use\n * .autoDispose() and .onDispose() methods which will trigger when the popup is closed.\n */\nexport interface IOpenController extends Disposable {\n  /**\n   * Closes the popup. Uses a default delay if delayMs is omitted.\n   */\n  close(delayMs?: number): void;\n\n  /**\n   * Sets css class `cls` on elem while this popup is open, defaulting to \"weasel-popup-open\".\n   * Removes the class on close.\n   */\n  setOpenClass(elem: Element, cls?: string): void;\n\n  /**\n   * Returns the trigger element that opened this popup.\n   */\n  getTriggerElem(): Element;\n\n  /**\n   * Schedules an UI update for the popup's position.\n   */\n  update(): void;\n\n  // Note that .autoDispose() and .onDispose() methods from grainjs Disposable are available,\n  // and triggered when the popup is closed.\n}\n\n/**\n * Type for the basic function which gets called to open a generic popup. The parameter allows\n * extending IPopupOptions with extra parameters specific to a given popup.\n */\nexport type IPopupFunc<T extends IPopupOptions = IPopupOptions> =\n  (ctl: IOpenController, options: T) => IPopupContent;\n\n/**\n * Return value of IPopupFunc: a popup is a disposable object, whose .content property contains\n * the element to show. This object gets disposed when the popup is closed.\n *\n * The first element in content matching the '[x-arrow]' selector will be used as the arrow.\n */\nexport interface IPopupContent extends IDisposable {\n  readonly content: Element;\n\n  // Called before content is removed from DOM. (Note that disposers run after.)\n  onRemove?(): void;\n}\n\n/**\n * Type for a function to create a popup as a DOM element; usable with setPopupToCreateDom().\n * This is a somewhat simpler interface than IPopupFunc.\n */\nexport type IPopupDomCreator = (ctl: IOpenController) => Element;\n\n/**\n * The basic interface to attach popup behavior to a trigger element. According to options.trigger\n * events events on triggerElem, calls openFunc(ctl, options) to open a popup, and disposes the\n * returned value to close it. Returns the same controller that's passed to openFunc.\n *\n * Note that there is no default for options.trigger: if it's not specified, no events will\n * trigger this popup.\n */\nexport function setPopupToFunc<T extends IPopupOptions = IPopupOptions>(\n    triggerElem: Element, openFunc: IPopupFunc<T>, options: T): PopupControl<T> {\n  let ctl = options.controller as PopupControl<T>;\n  if (!ctl) {\n    ctl = PopupControl.create(null) as PopupControl<T>;\n    dom.autoDisposeElem(triggerElem, ctl);\n  }\n  ctl.attachElem(triggerElem, openFunc, options);\n  return ctl;\n}\n\n/**\n * Attaches the given element on open, detaches it on close. Useful e.g. for a static tooltip.\n */\nexport function setPopupToAttach(triggerElem: Element, content: Element,\n                                 options: IPopupOptions): PopupControl {\n  const openResult: IPopupContent = {content, dispose: noop};\n  return setPopupToFunc(triggerElem, () => openResult, options);\n}\n\n/**\n * Attaches the element returned by the given func on open, detaches and disposes it on close.\n */\nexport function setPopupToCreateDom(triggerElem: Element, domCreator: IPopupDomCreator,\n                                    options: IPopupOptions): PopupControl {\n  function openFunc(ctl: IOpenController) {\n    const content = domCreator(ctl);\n    function dispose() { domDispose(content); }\n    return {content, dispose};\n  }\n  return setPopupToFunc(triggerElem, openFunc, options);\n}\n\n/**\n * Open a popup using as content the element returned by the given func. Note that the `trigger`\n * option is ignored by this function and that the default of the `attach` option is `body` instead of `null`.\n *\n * It allows you to bind the creation of the popup to a menu item as follow:\n *   menuItem(elem => popupOpen(elem, (ctl) => buildDom(ctl)))\n *\n */\nexport function popupOpen(reference: Element, domCreator: IPopupDomCreator, options: IPopupOptions): PopupControl {\n  function openFunc(openCtl: IOpenController) {\n    const content = domCreator(openCtl);\n    function dispose() { domDispose(content); ctl.dispose(); }\n    return {content, dispose};\n  }\n  const ctl = PopupControl.create(null) as PopupControl;\n\n  ctl.attachElem(reference, openFunc, {\n\n    // Set the default for the attach option to `body`. Because otherwise the default 'null' would\n    // causes the popup to be attached to reference.parentNode. This does make little sense when used\n    // as follow `menuItem((elem) => popupOpen(elem, ...` because it would close the popup just after\n    // the click.\n    attach: 'body',\n\n    // The Popper's default of 'scrollParent' for modifiers.preventOverflow.boundariesElement causes\n    // the popup to be placed incorrectly when the reference element gets disposed after the\n    // click. Setting boundaries to 'viewport' solves that issue\n    boundaries: 'viewport',\n\n    ...options,\n\n    // Overrides '.trigger' to avoid attaching listeners to reference.\n    trigger: undefined\n  });\n  ctl.open();\n  return ctl;\n}\n\n// Helper type for maintaining setTimeout() timers.\ntype TimerId = ReturnType<typeof setTimeout>;\n\n/**\n * PopupControl allows the popup instances to open/close/update the popup as needed. The\n * parameter T allows popups to understand extra options and receive them via the open() call.\n */\nexport class PopupControl<T extends IPopupOptions = IPopupOptions> extends Disposable {\n  private _holder = Holder.create<OpenPopupHelper>(this);\n  private _closeTimer?: TimerId;\n  private _openTimer?: TimerId;\n  private _open: (opts: IPopupOptions) => void = noop;    // Only set once mounted.\n  private _close: () => void = noop;\n  private _showDelay: number = 0;\n  private _hideDelay: number = 0;\n\n  constructor() {\n    super();\n    // Clear timeouts on disposal, which might still be scheduled and cause JS errors in case of\n    // quick open/close/open interactions\n    this.onDispose(() => {\n      if (this._openTimer) { clearTimeout(this._openTimer); }\n      if (this._closeTimer) { clearTimeout(this._closeTimer); }\n    });\n  }\n\n  public attachElem(triggerElem: Element, openFunc: IPopupFunc<T>, options: T): void {\n    this._showDelay = options.showDelay || 0;\n    this._hideDelay = options.hideDelay || 0;\n\n    this._open = (openOptions: IPopupOptions) => {\n      this._openTimer = undefined;\n      defaultsDeep(openOptions, options);\n      OpenPopupHelper.create(this._holder, triggerElem, openFunc as IPopupFunc, openOptions, this);\n    };\n    this._close = () => {\n      this._closeTimer = undefined;\n      this._holder.clear();\n    };\n\n    if (options.trigger) {\n      for (const trigger of options.trigger) {\n        if (typeof trigger === 'function') {\n          // Call instances of AttachTriggerFunc to attach any custom trigger events.\n          trigger(triggerElem, this);\n        } else if (typeof trigger === \"object\" && \"keys\" in trigger) {\n          dom.onElem(triggerElem, 'keydown', (ev) => trigger.keys.includes(ev.key) && this.toggle());\n        } else {\n          switch (trigger) {\n            case 'click':\n              dom.onElem(triggerElem, 'click', () => this.toggle());\n              break;\n            case 'contextmenu':\n              dom.onElem(triggerElem, 'contextmenu', (ev) => {\n                ev.preventDefault(); // Prevent the default browser contextmenu behavior\n                this.open();\n              });\n              // Popups are usually closed by a click outside of triggerElem and popup content,\n              // but in this case we want clicks on triggerElem to close as well.\n              dom.onElem(triggerElem, 'click', () => this.close());\n              break;\n            case 'focus':\n              dom.onElem(triggerElem, 'focus', () => this.open());\n              dom.onElem(triggerElem, 'blur', () => this.close());\n              break;\n            case 'hover':\n              dom.onElem(triggerElem, 'mouseenter', () => this.open());\n              dom.onElem(triggerElem, 'mouseleave', () => this.close());\n              break;\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Open the popup. If reopen is true, it would replace a current open popup; otherwise if\n   * this popup is already opened, the call is ignored.\n   */\n  public open(options: Partial<T> = {}, reopen: boolean = false) {\n    const showDelay: number = defaultTo(options.showDelay, this._showDelay);\n\n    // Ensure open() call cancels a delayed close() call.\n    if (this._closeTimer) {\n      clearTimeout(this._closeTimer);\n      this._closeTimer = undefined;\n    }\n    if (reopen || (this._holder.isEmpty() && !this._openTimer)) {\n      this._openTimer = setTimeout(() => this._open(options), showDelay);\n    }\n  }\n\n  /**\n   * Close the popup, if it is open.\n   */\n  public close(delayMs: number = this._hideDelay) {\n    // Ensure closing cancels a delayed opening and vice versa.\n    if (this._openTimer) {\n      clearTimeout(this._openTimer);\n      this._openTimer = undefined;\n    }\n    this._closeTimer = setTimeout(this._close, delayMs);\n  }\n\n  /**\n   * Close the popup if it's open, open it otherwise.\n   */\n  public toggle() {\n    this._holder.isEmpty() ? this.open({}, true) : this.close();\n  }\n\n  /**\n   * Returns whether the popup is currently open.\n   */\n  public isOpen(): boolean {\n    return !this._holder.isEmpty();\n  }\n\n  /**\n   * Schedules a UI update for the popup's position.\n   */\n  public update() {\n    const helper = this._holder.get();\n    if (helper) { helper.update(); }\n  }\n}\n\n/**\n * An internal class representing a single instance of the OPEN popup. This light-weight object is\n * created to open a popup and is disposed to close it.\n */\nclass OpenPopupHelper extends Disposable {\n  private _popper: Popper;\n\n  constructor(private _triggerElem: Element, openFunc: IPopupFunc, options: IPopupOptions, private _ctl: PopupControl) {\n    super();\n\n    // Once this object is disposed, unset all fields for easier detection of bugs.\n    this.wipeOnDispose();\n\n    // Call the opener function, and dispose the result when closed.\n    const popupContent: IPopupContent = this.autoDispose(openFunc(this, options));\n    const {content, onRemove = noop} = popupContent;\n\n    // Find the requested attachment container.\n    const containerElem = _getContainer(_triggerElem, options.attach || null);\n    if (containerElem) {\n      containerElem.appendChild(content);\n      this.onDispose(() => { onRemove.call(popupContent); content.remove(); });\n    }\n\n    // Prepare and create the Popper instance, which places the content according to the options.\n    const popperOptions: Popper.PopperOptions = {\n      placement: options.placement || 'bottom',\n      modifiers: (options.boundaries ?\n        defaultsDeep(options.modifiers, {\n          flip: {boundariesElement: options.boundaries},\n          preventOverflow: {boundariesElement: options.boundaries},\n        }) :\n        options.modifiers\n      ),\n    };\n    this._popper = new Popper(_triggerElem, content, popperOptions);\n    this.onDispose(() => this._popper.destroy());\n    this.setOpenClass(_triggerElem);\n\n    // On click anywhere on the page (outside triggerElem or popup content), close it.\n    const onClick = (evt: MouseEvent) => {\n      const target: Node|null = evt.target as Node;\n      if (target && !content.contains(target) && !_triggerElem.contains(target)) {\n        this.dispose();\n      }\n    };\n    this.autoDispose(dom.onElem(document, 'click', onClick, {useCapture: true}));\n    this.autoDispose(dom.onElem(document, 'contextmenu', onClick, {useCapture: true}));\n  }\n\n  /**\n   * Closes the popup. Uses a default delay if delayMs is omitted.\n   */\n  public close(delayMs?: number) {\n    if (!this.isDisposed()) { this._ctl.close(delayMs); }\n  }\n\n  /**\n   * Sets css class `cls` on elem while this popup is open, defaulting to \"weasel-popup-open\".\n   * Removes the class on close. This is set automatically on triggerElem for styling convenience.\n   */\n  public setOpenClass(elem: Element, cls: string = 'weasel-popup-open') {\n    elem.classList.add(cls);\n    this.onDispose(() => elem.classList.remove(cls));\n  }\n\n  /**\n   * Returns the trigger element that opened this popup.\n   */\n  public getTriggerElem(): Element {\n    return this._triggerElem;\n  }\n\n  public update() { this._popper.scheduleUpdate(); }\n}\n\n/**\n * Helper that finds the container according to IPopupOptions.container. Null means\n * elem.parentNode; string is a selector for the closest matching ancestor, e.g. 'body'.\n */\nfunction _getContainer(elem: Element, attachElem: Element|string|null): Node|null {\n  return (typeof attachElem === 'string') ? elem.closest(attachElem) :\n    (attachElem || elem.parentNode);\n}\n","import {dom, DomArg, DomElementArg, onElem, styled} from 'grainjs';\nimport {BindableValue, Computed, MaybeObsArray, Observable} from 'grainjs';\nimport {BaseMenu, defaultMenuOptions, IMenuOptions, menuItem} from './menu';\nimport {IOpenController, PopupControl, setPopupToFunc} from './popup';\n\nexport interface IOptionFull<T> {\n  value: T;\n  label: string;\n  disabled?: boolean;\n  // Note that additional properties may be used for storing per-row info such as icon names.\n  // The additional property is accessible in each row's renderOption callback.\n  [addl: string]: any;\n};\n\n// For string options, we can use a string for label and value without wrapping into an object.\nexport type IOption<T> = (T & string) | IOptionFull<T>;\n\nexport interface ISelectUserOptions {\n  defaultLabel?: string,   // Button label displayed when no value is selected.\n  buttonArrow?: DomArg,    // DOM for what is typically the chevron on the select button.\n  menuCssClass?: string,   // If provided, applies the css class to the menu container.\n  buttonCssClass?: string  // If provided, applies the css class to the select button.\n  // If disabled, adds the .disabled class to the select button and prevents opening.\n  disabled?: BindableValue<boolean>;\n}\n\nexport interface ISelectOptions extends IMenuOptions {\n  // Selects the items with the given label on open - intended for internal use.\n  selectLabelOnOpen?: () => string;\n}\n\n/**\n * User interface for creating a weasel select element in DOM.\n *\n * Usage:\n *    const fruit = observable(\"apple\");\n *    select(fruit, () => [\"apple\", \"banana\", \"mango\"]);\n *\n *    const employee = observable(17);\n *    const employeesCB = () => [\n *      {value: 12, label: \"Bob\", disabled: true},\n *      {value: 17, label: \"Alice\"},\n *      {value: 21, label: \"Eve\"},\n *    ];\n *    select(employee, employeesCB, {defaultLabel: \"Select employee:\"});\n *\n * NOTE that a MaybeObsArray is accepted for the select options. We do not accept a callback to be\n * called when the dropdown menu is opened, since the active options also determine what is\n * displayed as the selected value on the button when the dropdown menu is closed.\n */\nexport function select<T>(\n  obs: Observable<T>,\n  optionArray: MaybeObsArray<IOption<T>>,\n  options: ISelectUserOptions = {},\n  renderOption: (option: IOptionFull<T|null>) => DomArg = (option) => option.label\n): Element {\n  // Create SelectKeyState to manage user value search inputs.\n  const keyState = new SelectKeyState<T>(optionArray);\n\n  // Computed contains the IOptionFull of the obs value.\n  const selected = Computed.create(null, obs, (use, val) => {\n    const array = Array.isArray(optionArray) ? optionArray : use(optionArray);\n    const option = array.find(_op => val === getOptionFull(_op).value);\n    return option ? getOptionFull(option) : ({value: null, label: options.defaultLabel || \"\"} as IOptionFull<null>);\n  });\n\n  // Select button and associated event/disposal DOM.\n  const selectBtn: Element = cssSelectBtn({tabIndex: '0', class: options.buttonCssClass || ''},\n    dom.autoDispose(selected),\n    options.disabled ? dom.cls('disabled', options.disabled) : null,\n    cssBtnText(\n      dom.domComputed(selected, sel => renderOption(sel))\n    ),\n    dom('div', {style: 'flex: none;'},\n      options.buttonArrow\n    ),\n    dom.on('keydown', (ev) => {\n      if (isDisabled()) { return; }\n      const sel = keyState.add(ev.key);\n      if (sel) { obs.set(sel.value); }\n    })\n  );\n\n  // Options to pass into the Select class.\n  const isDisabled = () => selectBtn.classList.contains('disabled');\n  const selectOptions: ISelectOptions = {\n    ...defaultMenuOptions,\n    menuCssClass: options.menuCssClass,\n    trigger: [(triggerElem: Element, ctl: PopupControl) => {\n      dom.onElem(triggerElem, 'click', () => isDisabled() || ctl.toggle()),\n      dom.onKeyElem(triggerElem as HTMLElement, 'keydown', {\n        ArrowDown: () => isDisabled() || ctl.open(),\n        ArrowUp: () => isDisabled() || ctl.open()\n      })\n    }],\n    selectLabelOnOpen: () => selected.get().label,\n    stretchToSelector: `.${cssSelectBtn.className}`\n  };\n\n  // DOM content of the open select menu.\n  const selectContent = () => [\n    dom.forEach(optionArray, (option) => {\n      const obj: IOptionFull<T> = getOptionFull(option);\n      // Note we only set 'selected' when an <option> is created; we are not subscribing to obs.\n      // This is to reduce the amount of subscriptions, esp. when number of options is large.\n      return menuItem(() => { obs.set(obj.value); },\n        Object.assign({disabled: obj.disabled, selected: obj.value === obs.get()},\n          obj.disabled ? {class: 'disabled'} : {}),\n        renderOption(obj)\n      );\n    })\n  ];\n\n  setPopupToFunc(selectBtn,\n    (ctl) => Select.create(null, ctl, selectContent(), selectOptions),\n    selectOptions);\n\n  return selectBtn;\n}\n\n/**\n * Creates an instance of Menu intended to mimic the behavior of the select HTML element.\n *\n * Should always be created using select(), which adds the select button and associated logic.\n */\nclass Select<T> extends BaseMenu {\n  private readonly _selectRows: HTMLElement[] = Array.from(this._menuContent.children) as HTMLElement[];\n\n  // Create array of options on build to prevent rebuilding on each keystroke.\n  private readonly _selectOptions: IOption<string>[] = this._selectRows.map(_elem => ({\n    label: _elem.textContent || \"\",\n    value: _elem.textContent || \"\",\n    disabled: _elem.classList.contains('disabled')\n  }));\n\n  // The class Select handles key input separately from the function select() since the selected\n  // option is not maintained in the class, so the search callback is called on each keystroke.\n  private readonly _keyState: SelectKeyState<string> = new SelectKeyState(this._selectOptions);\n\n  constructor(ctl: IOpenController, items: DomElementArg[], options: ISelectOptions = {}) {\n    super(ctl, items, options);\n\n    // On keydown, search for the first element with a matching label.\n    onElem(this._menuContent, 'keydown', (ev) => {\n      const sel = this._keyState.add(ev.key);\n      if (sel) { this._selectRow(sel.label); }\n    });\n\n    // If an initial value is given, use it, otherwise select the first element.\n    const init = options.selectLabelOnOpen ? options.selectLabelOnOpen() : \"\";\n    setTimeout(() => this._selectRow(init, true), 0);\n  }\n\n  // If defaultToNext is set, the next index is selected when no element is found.\n  private _selectRow(label: string, defaultToNext: boolean = false): void {\n    const elem = this._selectRows.find(_elem => _elem.textContent === label);\n    return (elem || !defaultToNext) ? this.setSelected(elem || null) : this.nextIndex();\n  }\n}\n\n\n/**\n * Maintains the state of the user's keyed-in value when searching in the select element.\n */\nclass SelectKeyState<T> {\n  private _term: string = \"\";\n  private _cycleIndex: number = 0;\n  private _timeoutId: NodeJS.Timeout|null = null;\n\n  // Requires _itemCallback, a function that returns all IOptions in the select.\n  constructor(private _itemArray: MaybeObsArray<IOption<T>>) {}\n\n  // Adds a character to the search term. Returns the latest first match of the items, or null\n  // if no items match.\n  public add(char: string): IOptionFull<T>|null {\n    // Filter out any keys that are not a single character. Make all searching case-insensitive.\n    if (char.length > 1) { return null; }\n    char = char.toLowerCase();\n\n    // Clear the search term after a timeout. Any new entry should reset the timeout.\n    if (this._timeoutId) { clearTimeout(this._timeoutId); }\n    this._timeoutId = setTimeout(() => { this._term = \"\"; }, 1000);\n\n    // Add character to the search term and look for a match. If a match is found, update the\n    // observable value.\n    if (this._term.length === 1 && char === this._term[0]) {\n      // If the same character is pressed repeatedly, cycle through all options starting with\n      // that character.\n      this._cycleIndex += 1;\n    } else {\n      // Add character to the search term and reset the cycle search index.\n      this._term += char;\n      this._cycleIndex = 0;\n    }\n    const items = Array.isArray(this._itemArray) ? this._itemArray : this._itemArray.get();\n    const matches = items.filter(_item => {\n      _item = getOptionFull(_item);\n      return !_item.disabled && _item.label.toLowerCase().startsWith(this._term);\n    });\n    if (matches.length > 0) {\n      this._cycleIndex %= matches.length;\n      return getOptionFull(matches[this._cycleIndex]);\n    }\n    return null;\n  }\n}\n\nexport function getOptionFull<T>(option: IOption<T>): IOptionFull<T> {\n  return (typeof option === \"string\") ? {value: option, label: option} : (option as IOptionFull<T>);\n}\n\n// Prevents select button text overflow.\nconst cssBtnText = styled('div', `\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`);\n\nconst cssSelectBtn = styled('div', `\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  height: 30px;\n  line-height: 30px;\n  background-color: white;\n  color: black;\n  padding: 6px;\n  border: 1px solid grey;\n  border-radius: 3px;\n  cursor: pointer;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  user-select: none;\n  -moz-user-select: none;\n\n  &:focus {\n    outline: none;\n    box-shadow: 0px 0px 2px 2px #5E9ED6;\n  }\n\n  &.disabled {\n    color: grey;\n    cursor: pointer;\n  }\n`);\n","import {dom, DomCreateFunc, DomElementMethod, styled} from 'grainjs';\nimport defaults = require('lodash/defaults');\nimport {IPopupOptions, setPopupToCreateDom} from './popup';\n\n/**\n * Tooltip accepts all the options of other popup methods, plus a couple more.\n *\n * If both .content and .title options are omitted, it shows triggerElem's title attribute (but\n * note that browser's default behavior for showing title attribute remains; to avoid it, use the\n * .title option and don't set triggerElem's attribute).\n */\nexport interface ITooltipOptions extends IPopupOptions {\n  content?: DomElementMethod;   // Use this for tooltip content, overriding 'title' attr or option.\n  title?: string;               // Tooltip title to show, when triggerElem has no title attribute.\n  theme?: ITooltipTheme;        // Allow using a custom CSS theme for the tooltip.\n}\n\n/**\n * Theming the tooltip only requires theming the main element. It includes custom CSS properties\n * for customizing the arrow as well (see cssTooltip below).\n */\nexport interface ITooltipTheme {\n  tooltip: DomCreateFunc<Element>;\n}\n\nconst defaultTooltipOptions: ITooltipOptions = {\n  attach: 'body',\n  boundaries: 'viewport',\n  placement: 'top',\n  showDelay: 0,\n  trigger: ['hover', 'focus'],\n};\n\n/**\n * Usage:\n *    dom('div', tooltip({title: \"Hello\"}))\n *    dom('div', tooltip({content: () => dom('b', 'World'), placement: 'bottom'}))\n * It roughly replicates Popper's tooltip feautres from https://popper.js.org/tooltip-documentation.html\n *\n * Note that we do NOT turn off the element's title attribute (if present). Neither does the\n * popper-tooltip library. The recommendation is simply to avoid the title attribute, and pass\n * `title` (or `content`) as a tooltip option.\n */\nexport function tooltip(options?: ITooltipOptions): DomElementMethod {\n  return (elem) => tooltipElem(elem, options);\n}\nexport function tooltipElem(triggerElem: Element, options: ITooltipOptions = {}): void {\n  options = defaults({}, options, defaultTooltipOptions);\n  setPopupToCreateDom(triggerElem, () => _createDom(triggerElem, options), options);\n}\n\n/**\n * Helper that creates an actual tooltip, with some styles and a little arrow.\n */\nfunction _createDom(triggerElem: Element, options: ITooltipOptions) {\n  const title = triggerElem.getAttribute('title') || options.title || \"\";\n  const theme = options.theme || defaultTooltipTheme;\n  return theme.tooltip({role: 'tooltip'},\n    cssTooltipArrow({'x-arrow': true}),\n    dom('div', options.content || dom.text(title)),\n  );\n}\n\n/*\n * An alternative implementation could look like this. (This example is included to illustrate the\n * usage of a class for a popup.)\n *\n * function tooltipElem(triggerElem: Element, options: ITooltipOptions = {}): void {\n *   options = defaults({}, options, defaultTooltipOptions);\n *   return setPopupToFunc(triggerElem, () => Tooltip.create(null, triggerElem, options), options);\n * }\n *\n * class Tooltip extends Disposable {\n *   public readonly content: Element;\n *   constructor(triggerElem: Element, options: ITooltipOptions) {\n *     super();\n *     this.content = _createDom(triggerElem, options);\n *     this.onDispose(() => domDispose(this.content));\n *   }\n * }\n */\n\n// Note that we use two custom properties to make tooltips easier to customize:\n//    --tooltip-bg-color changes the background color for the tooltip and arrow.\n//    --tooltip-arrow-size sets the size of the tooltip arrow.\nconst cssTooltip = styled('div', `\n  --tooltip-bg-color: #FFC107;\n  --tooltip-arrow-size: 5px;\n  position: absolute;\n  background: var(--tooltip-bg-color);\n  color: black;\n  width: 100px;\n  border-radius: 3px;\n  box-shadow: 0 0 2px rgba(0,0,0,0.5);\n  padding: 10px;\n  text-align: center;\n\n  &[x-placement^=\"bottom\"] { margin-top: var(--tooltip-arrow-size); }\n  &[x-placement^=\"top\"] { margin-bottom: var(--tooltip-arrow-size); }\n  &[x-placement^=\"left\"] { margin-right: var(--tooltip-arrow-size); }\n  &[x-placement^=\"right\"] { margin-left: var(--tooltip-arrow-size); }\n`);\n\nconst cssTooltipArrow = styled('div', `\n  position: absolute;\n  width: 0;\n  height: 0;\n  border: solid transparent var(--tooltip-arrow-size);\n\n  .${cssTooltip.className}[x-placement^=\"bottom\"] & {\n    border-top-width: 0;\n    border-bottom-color: var(--tooltip-bg-color);\n    top: calc(var(--tooltip-arrow-size) * -1);\n    left: calc(50% - var(--tooltip-arrow-size));\n    margin: 0 var(--tooltip-arrow-size);\n  }\n  .${cssTooltip.className}[x-placement^=\"top\"] & {\n    border-bottom-width: 0;\n    border-top-color: var(--tooltip-bg-color);\n    bottom: calc(var(--tooltip-arrow-size) * -1);\n    left: calc(50% - var(--tooltip-arrow-size));\n    margin: 0 var(--tooltip-arrow-size);\n  }\n  .${cssTooltip.className}[x-placement^=\"left\"] & {\n    border-right-width: 0;\n    border-left-color: var(--tooltip-bg-color);\n    right: calc(var(--tooltip-arrow-size) * -1);\n    top: calc(50% - var(--tooltip-arrow-size));\n    margin: var(--tooltip-arrow-size) 0;\n  }\n  .${cssTooltip.className}[x-placement^=\"right\"] & {\n    border-left-width: 0;\n    border-right-color: var(--tooltip-bg-color);\n    left: calc(var(--tooltip-arrow-size) * -1);\n    top: calc(50% - var(--tooltip-arrow-size));\n    margin: var(--tooltip-arrow-size) 0;\n  }\n`);\n\n/**\n * The default tooltip style; this one matches popper.js tooltip library.\n */\nexport const defaultTooltipTheme: ITooltipTheme = {\n  tooltip: cssTooltip,\n};\n\nexport const cssDarkTooltip = styled(defaultTooltipTheme.tooltip, `\n  --tooltip-arrow-size: 6px;\n  --tooltip-bg-color: black;\n  color: white;\n  width: auto;\n  font-family: sans-serif;\n  font-size: 10pt;\n`);\n\n/**\n * Offer another tooltip style, usable by passing {theme: darkTooltipTheme} in tooltip options.\n */\nexport const darkTooltipTheme: ITooltipTheme = {\n  tooltip: cssDarkTooltip,\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","\"use strict\";\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Checker = exports.createCheckers = void 0;\nvar types_1 = require(\"./types\");\nvar util_1 = require(\"./util\");\n/**\n * Export functions used to define interfaces.\n */\nvar types_2 = require(\"./types\");\nObject.defineProperty(exports, \"TArray\", { enumerable: true, get: function () { return types_2.TArray; } });\nObject.defineProperty(exports, \"TEnumType\", { enumerable: true, get: function () { return types_2.TEnumType; } });\nObject.defineProperty(exports, \"TEnumLiteral\", { enumerable: true, get: function () { return types_2.TEnumLiteral; } });\nObject.defineProperty(exports, \"TFunc\", { enumerable: true, get: function () { return types_2.TFunc; } });\nObject.defineProperty(exports, \"TIface\", { enumerable: true, get: function () { return types_2.TIface; } });\nObject.defineProperty(exports, \"TLiteral\", { enumerable: true, get: function () { return types_2.TLiteral; } });\nObject.defineProperty(exports, \"TName\", { enumerable: true, get: function () { return types_2.TName; } });\nObject.defineProperty(exports, \"TOptional\", { enumerable: true, get: function () { return types_2.TOptional; } });\nObject.defineProperty(exports, \"TParam\", { enumerable: true, get: function () { return types_2.TParam; } });\nObject.defineProperty(exports, \"TParamList\", { enumerable: true, get: function () { return types_2.TParamList; } });\nObject.defineProperty(exports, \"TProp\", { enumerable: true, get: function () { return types_2.TProp; } });\nObject.defineProperty(exports, \"TTuple\", { enumerable: true, get: function () { return types_2.TTuple; } });\nObject.defineProperty(exports, \"TType\", { enumerable: true, get: function () { return types_2.TType; } });\nObject.defineProperty(exports, \"TUnion\", { enumerable: true, get: function () { return types_2.TUnion; } });\nObject.defineProperty(exports, \"TIntersection\", { enumerable: true, get: function () { return types_2.TIntersection; } });\nObject.defineProperty(exports, \"array\", { enumerable: true, get: function () { return types_2.array; } });\nObject.defineProperty(exports, \"enumlit\", { enumerable: true, get: function () { return types_2.enumlit; } });\nObject.defineProperty(exports, \"enumtype\", { enumerable: true, get: function () { return types_2.enumtype; } });\nObject.defineProperty(exports, \"func\", { enumerable: true, get: function () { return types_2.func; } });\nObject.defineProperty(exports, \"iface\", { enumerable: true, get: function () { return types_2.iface; } });\nObject.defineProperty(exports, \"lit\", { enumerable: true, get: function () { return types_2.lit; } });\nObject.defineProperty(exports, \"name\", { enumerable: true, get: function () { return types_2.name; } });\nObject.defineProperty(exports, \"opt\", { enumerable: true, get: function () { return types_2.opt; } });\nObject.defineProperty(exports, \"param\", { enumerable: true, get: function () { return types_2.param; } });\nObject.defineProperty(exports, \"tuple\", { enumerable: true, get: function () { return types_2.tuple; } });\nObject.defineProperty(exports, \"union\", { enumerable: true, get: function () { return types_2.union; } });\nObject.defineProperty(exports, \"intersection\", { enumerable: true, get: function () { return types_2.intersection; } });\nObject.defineProperty(exports, \"rest\", { enumerable: true, get: function () { return types_2.rest; } });\nObject.defineProperty(exports, \"indexKey\", { enumerable: true, get: function () { return types_2.indexKey; } });\nObject.defineProperty(exports, \"BasicType\", { enumerable: true, get: function () { return types_2.BasicType; } });\nvar util_2 = require(\"./util\");\nObject.defineProperty(exports, \"VError\", { enumerable: true, get: function () { return util_2.VError; } });\n/**\n * Takes one of more type suites (e.g. a module generated by `ts-interface-builder`), and combines\n * them into a suite of interface checkers. If a type is used by name, that name should be present\n * among the passed-in type suites.\n *\n * The returned object maps type names to Checker objects.\n */\nfunction createCheckers() {\n    var typeSuite = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        typeSuite[_i] = arguments[_i];\n    }\n    var fullSuite = Object.assign.apply(Object, __spreadArrays([{}, types_1.basicTypes], typeSuite));\n    var checkers = {};\n    for (var _a = 0, typeSuite_1 = typeSuite; _a < typeSuite_1.length; _a++) {\n        var suite_1 = typeSuite_1[_a];\n        for (var _b = 0, _c = Object.keys(suite_1); _b < _c.length; _b++) {\n            var name = _c[_b];\n            checkers[name] = new Checker(fullSuite, suite_1[name]);\n        }\n    }\n    return checkers;\n}\nexports.createCheckers = createCheckers;\n/**\n * Checker implements validation of objects, and also includes accessors to validate method calls.\n * Checkers should be created using `createCheckers()`.\n */\nvar Checker = /** @class */ (function () {\n    // Create checkers by using `createCheckers()` function.\n    function Checker(suite, ttype, _path) {\n        if (_path === void 0) { _path = 'value'; }\n        this.suite = suite;\n        this.ttype = ttype;\n        this._path = _path;\n        this.props = new Map();\n        if (ttype instanceof types_1.TIface) {\n            for (var _i = 0, _a = ttype.props; _i < _a.length; _i++) {\n                var p = _a[_i];\n                this.props.set(p.name, p.ttype);\n            }\n        }\n        this.checkerPlain = this.ttype.getChecker(suite, false);\n        this.checkerStrict = this.ttype.getChecker(suite, true);\n    }\n    /**\n     * Set the path to report in errors, instead of the default \"value\". (E.g. if the Checker is for\n     * a \"person\" interface, set path to \"person\" to report e.g. \"person.name is not a string\".)\n     */\n    Checker.prototype.setReportedPath = function (path) {\n        this._path = path;\n    };\n    /**\n     * Check that the given value satisfies this checker's type, or throw Error.\n     */\n    Checker.prototype.check = function (value) { return this._doCheck(this.checkerPlain, value); };\n    /**\n     * A fast check for whether or not the given value satisfies this Checker's type. This returns\n     * true or false, does not produce an error message, and is fast both on success and on failure.\n     */\n    Checker.prototype.test = function (value) {\n        return this.checkerPlain(value, new util_1.NoopContext());\n    };\n    /**\n     * Returns a non-empty array of error objects describing the errors if the given value does not satisfy this\n     * Checker's type, or null if it does.\n     */\n    Checker.prototype.validate = function (value) {\n        return this._doValidate(this.checkerPlain, value);\n    };\n    /**\n     * Check that the given value satisfies this checker's type strictly. This checks that objects\n     * and tuples have no extra members. Note that this prevents backward compatibility, so usually\n     * a plain check() is more appropriate.\n     */\n    Checker.prototype.strictCheck = function (value) { return this._doCheck(this.checkerStrict, value); };\n    /**\n     * A fast strict check for whether or not the given value satisfies this Checker's type. Returns\n     * true or false, does not produce an error message, and is fast both on success and on failure.\n     */\n    Checker.prototype.strictTest = function (value) {\n        return this.checkerStrict(value, new util_1.NoopContext());\n    };\n    /**\n     * Returns a non-empty array of error objects describing the errors if the given value does not satisfy this\n     * Checker's type strictly, or null if it does.\n     */\n    Checker.prototype.strictValidate = function (value) {\n        return this._doValidate(this.checkerStrict, value);\n    };\n    /**\n     * If this checker is for an interface, returns a Checker for the type required for the given\n     * property of this interface.\n     */\n    Checker.prototype.getProp = function (prop) {\n        var ttype = this.props.get(prop);\n        if (!ttype) {\n            throw new Error(\"Type has no property \" + prop);\n        }\n        return new Checker(this.suite, ttype, this._path + \".\" + prop);\n    };\n    /**\n     * If this checker is for an interface, returns a Checker for the argument-list required to call\n     * the given method of this interface. E.g. if this Checker is for the interface:\n     *    interface Foo {\n     *      find(s: string, pos?: number): number;\n     *    }\n     * Then methodArgs(\"find\").check(...) will succeed for [\"foo\"] and [\"foo\", 3], but not for [17].\n     */\n    Checker.prototype.methodArgs = function (methodName) {\n        var tfunc = this._getMethod(methodName);\n        return new Checker(this.suite, tfunc.paramList);\n    };\n    /**\n     * If this checker is for an interface, returns a Checker for the return value of the given\n     * method of this interface.\n     */\n    Checker.prototype.methodResult = function (methodName) {\n        var tfunc = this._getMethod(methodName);\n        return new Checker(this.suite, tfunc.result);\n    };\n    /**\n     * If this checker is for a function, returns a Checker for its argument-list.\n     */\n    Checker.prototype.getArgs = function () {\n        if (!(this.ttype instanceof types_1.TFunc)) {\n            throw new Error(\"getArgs() applied to non-function\");\n        }\n        return new Checker(this.suite, this.ttype.paramList);\n    };\n    /**\n     * If this checker is for a function, returns a Checker for its result.\n     */\n    Checker.prototype.getResult = function () {\n        if (!(this.ttype instanceof types_1.TFunc)) {\n            throw new Error(\"getResult() applied to non-function\");\n        }\n        return new Checker(this.suite, this.ttype.result);\n    };\n    /**\n     * Return the type for which this is a checker.\n     */\n    Checker.prototype.getType = function () {\n        return this.ttype;\n    };\n    /**\n     * Actual implementation of check() and strictCheck().\n     */\n    Checker.prototype._doCheck = function (checkerFunc, value) {\n        var noopCtx = new util_1.NoopContext();\n        if (!checkerFunc(value, noopCtx)) {\n            var detailCtx = new util_1.DetailContext();\n            checkerFunc(value, detailCtx);\n            throw detailCtx.getError(this._path);\n        }\n    };\n    Checker.prototype._doValidate = function (checkerFunc, value) {\n        var noopCtx = new util_1.NoopContext();\n        if (checkerFunc(value, noopCtx)) {\n            return null;\n        }\n        var detailCtx = new util_1.DetailContext();\n        checkerFunc(value, detailCtx);\n        return detailCtx.getErrorDetails(this._path);\n    };\n    Checker.prototype._getMethod = function (methodName) {\n        var ttype = this.props.get(methodName);\n        if (!ttype) {\n            throw new Error(\"Type has no property \" + methodName);\n        }\n        if (!(ttype instanceof types_1.TFunc)) {\n            throw new Error(\"Property \" + methodName + \" is not a method\");\n        }\n        return ttype;\n    };\n    return Checker;\n}());\nexports.Checker = Checker;\n","\"use strict\";\n/**\n * This module defines nodes used to define types and validations for objects and interfaces.\n */\n// tslint:disable:no-shadowed-variable prefer-for-of\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.basicTypes = exports.BasicType = exports.TParamList = exports.TParam = exports.param = exports.TFunc = exports.func = exports.TProp = exports.TOptional = exports.opt = exports.TIface = exports.iface = exports.indexKey = exports.TEnumLiteral = exports.enumlit = exports.TEnumType = exports.enumtype = exports.TIntersection = exports.intersection = exports.TUnion = exports.union = exports.TTuple = exports.tuple = exports.RestType = exports.rest = exports.TArray = exports.array = exports.TLiteral = exports.lit = exports.TName = exports.name = exports.TType = void 0;\nvar util_1 = require(\"./util\");\n/** Node that represents a type. */\nvar TType = /** @class */ (function () {\n    function TType() {\n    }\n    return TType;\n}());\nexports.TType = TType;\n/** Parses a type spec into a TType node. */\nfunction parseSpec(typeSpec) {\n    return typeof typeSpec === \"string\" ? name(typeSpec) : typeSpec;\n}\nfunction getNamedType(suite, name) {\n    var ttype = suite[name];\n    if (!ttype) {\n        throw new Error(\"Unknown type \" + name);\n    }\n    return ttype;\n}\n/**\n * Defines a type name, either built-in, or defined in this suite. It can typically be included in\n * the specs as just a plain string.\n */\nfunction name(value) { return new TName(value); }\nexports.name = name;\nvar TName = /** @class */ (function (_super) {\n    __extends(TName, _super);\n    function TName(name) {\n        var _this = _super.call(this) || this;\n        _this.name = name;\n        _this._failMsg = \"is not a \" + name;\n        return _this;\n    }\n    TName.prototype.getChecker = function (suite, strict, allowedProps) {\n        // Using names, we can reference a type recursively in its own definition. To avoid an\n        // infinite recursion in getChecker() calls, we cache and reuse the checker that's being built\n        // when it references its own TName node. Note that it's important to reuse the result only\n        // when getChecker() is called with the same arguments, but that's already guaranteed because\n        // we are caching only for the current call and only for the same TName object (not another\n        // instance of name() call for the same name).\n        //\n        // Note also that this is about handling recursive types; it does NOT help validating data\n        // with circular references.\n        var checkerFunc = this._checkerBeingBuilt;\n        if (!checkerFunc) {\n            this._checkerBeingBuilt = function (value, ctx) { return checkerFunc(value, ctx); };\n            try {\n                checkerFunc = this._getChecker(suite, strict, allowedProps);\n            }\n            finally {\n                this._checkerBeingBuilt = undefined;\n            }\n        }\n        return checkerFunc;\n    };\n    TName.prototype._getChecker = function (suite, strict, allowedProps) {\n        var _this = this;\n        var ttype = getNamedType(suite, this.name);\n        var checker = ttype.getChecker(suite, strict, allowedProps);\n        if (ttype instanceof BasicType || ttype instanceof TName) {\n            return checker;\n        }\n        // For complex types, add an additional \"is not a <Type>\" message on failure.\n        return function (value, ctx) { return checker(value, ctx) ? true : ctx.fail(null, _this._failMsg, 0); };\n    };\n    return TName;\n}(TType));\nexports.TName = TName;\n/**\n * Defines a literal value, e.g. lit('hello') or lit(123).\n */\nfunction lit(value) { return new TLiteral(value); }\nexports.lit = lit;\nvar TLiteral = /** @class */ (function (_super) {\n    __extends(TLiteral, _super);\n    function TLiteral(value) {\n        var _this = _super.call(this) || this;\n        _this.value = value;\n        _this.name = JSON.stringify(value);\n        _this._failMsg = \"is not \" + _this.name;\n        return _this;\n    }\n    TLiteral.prototype.getChecker = function (suite, strict) {\n        var _this = this;\n        return function (value, ctx) { return (value === _this.value) ? true : ctx.fail(null, _this._failMsg, -1); };\n    };\n    return TLiteral;\n}(TType));\nexports.TLiteral = TLiteral;\n/**\n * Defines an array type, e.g. array('number').\n */\nfunction array(typeSpec) { return new TArray(parseSpec(typeSpec)); }\nexports.array = array;\nvar TArray = /** @class */ (function (_super) {\n    __extends(TArray, _super);\n    function TArray(ttype) {\n        var _this = _super.call(this) || this;\n        _this.ttype = ttype;\n        var elementTypeName = getTypeName(ttype);\n        if (elementTypeName) {\n            _this.name = elementTypeName + \"[]\";\n        }\n        return _this;\n    }\n    TArray.prototype.getChecker = function (suite, strict) {\n        var itemChecker = this.ttype.getChecker(suite, strict);\n        return function (value, ctx) {\n            if (!Array.isArray(value)) {\n                return ctx.fail(null, \"is not an array\", 0);\n            }\n            for (var i = 0; i < value.length; i++) {\n                var ok = itemChecker(value[i], ctx);\n                if (!ok) {\n                    return ctx.fail(i, null, 1);\n                }\n            }\n            return true;\n        };\n    };\n    return TArray;\n}(TType));\nexports.TArray = TArray;\n/**\n * Defines a rest type, e.g. tuple('string', rest(array('number'))).\n */\nfunction rest(typeSpec) {\n    return new RestType(typeSpec);\n}\nexports.rest = rest;\nvar RestType = /** @class */ (function (_super) {\n    __extends(RestType, _super);\n    function RestType(typeSpec) {\n        var _this = _super.call(this) || this;\n        _this.typeSpec = typeSpec;\n        return _this;\n    }\n    RestType.prototype.setStart = function (start) {\n        this._start = start;\n    };\n    RestType.prototype.getChecker = function (suite, strict) {\n        var arrType = typeof this.typeSpec === \"string\" ? getNamedType(suite, this.typeSpec) : this.typeSpec;\n        if (!(arrType instanceof TArray)) {\n            throw new Error(\"Rest type must be an array\");\n        }\n        var itemChecker = arrType.ttype.getChecker(suite, strict);\n        var start = this._start;\n        return function (value, ctx) {\n            for (var i = start; i < value.length; i++) {\n                if (!itemChecker(value[i], ctx)) {\n                    return ctx.fail(i, null, 1);\n                }\n            }\n            return true;\n        };\n    };\n    return RestType;\n}(TType));\nexports.RestType = RestType;\n/**\n * Defines a tuple type, e.g. tuple('string', 'number').\n */\nfunction tuple() {\n    var typeSpec = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        typeSpec[_i] = arguments[_i];\n    }\n    return new TTuple(typeSpec.map(function (t) { return parseSpec(t); }));\n}\nexports.tuple = tuple;\nvar TTuple = /** @class */ (function (_super) {\n    __extends(TTuple, _super);\n    function TTuple(ttypes) {\n        var _this = _super.call(this) || this;\n        _this.ttypes = ttypes;\n        var last = ttypes[ttypes.length - 1];\n        if (last instanceof RestType) {\n            ttypes.pop();\n            _this._restType = last;\n            _this._restType.setStart(ttypes.length);\n        }\n        return _this;\n    }\n    TTuple.prototype.getChecker = function (suite, strict) {\n        var itemCheckers = this.ttypes.map(function (t) { return t.getChecker(suite, strict); });\n        var checker = function (value, ctx) {\n            if (!Array.isArray(value)) {\n                return ctx.fail(null, \"is not an array\", 0);\n            }\n            for (var i = 0; i < itemCheckers.length; i++) {\n                var ok = itemCheckers[i](value[i], ctx);\n                if (!ok) {\n                    return ctx.fail(i, null, 1);\n                }\n            }\n            return true;\n        };\n        if (this._restType) {\n            var restChecker_1 = this._restType.getChecker(suite, strict);\n            return function (value, ctx) {\n                return checker(value, ctx) && restChecker_1(value, ctx);\n            };\n        }\n        if (!strict) {\n            return checker;\n        }\n        return function (value, ctx) {\n            if (!checker(value, ctx)) {\n                return false;\n            }\n            return value.length <= itemCheckers.length ? true :\n                ctx.fail(itemCheckers.length, \"is extraneous\", 2);\n        };\n    };\n    return TTuple;\n}(TType));\nexports.TTuple = TTuple;\n/**\n * Defines a union type, e.g. union('number', 'null').\n */\nfunction union() {\n    var typeSpec = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        typeSpec[_i] = arguments[_i];\n    }\n    return new TUnion(typeSpec.map(function (t) { return parseSpec(t); }));\n}\nexports.union = union;\nvar TUnion = /** @class */ (function (_super) {\n    __extends(TUnion, _super);\n    function TUnion(ttypes) {\n        var _this = _super.call(this) || this;\n        _this.ttypes = ttypes;\n        var names = ttypes.map(getTypeName)\n            .filter(function (n) { return n; });\n        var otherTypes = ttypes.length - names.length;\n        if (names.length) {\n            if (otherTypes > 0) {\n                names.push(otherTypes + \" more\");\n            }\n            _this._failMsg = \"is none of \" + names.join(\", \");\n        }\n        else {\n            _this._failMsg = \"is none of \" + otherTypes + \" types\";\n        }\n        return _this;\n    }\n    TUnion.prototype.getChecker = function (suite, strict, allowedProps) {\n        var _this = this;\n        var itemCheckers = this.ttypes.map(function (t) { return t.getChecker(suite, strict, allowedProps); });\n        return function (value, ctx) {\n            var ur = ctx.unionResolver();\n            for (var i = 0; i < itemCheckers.length; i++) {\n                var ok = itemCheckers[i](value, ur.createContext());\n                if (ok) {\n                    return true;\n                }\n            }\n            ctx.resolveUnion(ur);\n            return ctx.fail(null, _this._failMsg, 0);\n        };\n    };\n    return TUnion;\n}(TType));\nexports.TUnion = TUnion;\n/**\n * Defines an intersection type, e.g. intersection('number', 'null').\n */\nfunction intersection() {\n    var typeSpec = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        typeSpec[_i] = arguments[_i];\n    }\n    return new TIntersection(typeSpec.map(function (t) { return parseSpec(t); }));\n}\nexports.intersection = intersection;\nvar TIntersection = /** @class */ (function (_super) {\n    __extends(TIntersection, _super);\n    function TIntersection(ttypes) {\n        var _this = _super.call(this) || this;\n        _this.ttypes = ttypes;\n        return _this;\n    }\n    TIntersection.prototype.getChecker = function (suite, strict, allowedProps) {\n        if (allowedProps === void 0) { allowedProps = new Set(); }\n        var itemCheckers = this.ttypes.map(function (t) { return t.getChecker(suite, strict, allowedProps); });\n        return function (value, ctx) {\n            return itemCheckers.every(function (checker) {\n                checker(value, ctx.fork());\n                return ctx.completeFork();\n            }) && !ctx.failed();\n        };\n    };\n    return TIntersection;\n}(TType));\nexports.TIntersection = TIntersection;\n/**\n * Defines an enum type, e.g. enum({'A': 1, 'B': 2}).\n */\nfunction enumtype(values) {\n    return new TEnumType(values);\n}\nexports.enumtype = enumtype;\nvar TEnumType = /** @class */ (function (_super) {\n    __extends(TEnumType, _super);\n    function TEnumType(members) {\n        var _this = _super.call(this) || this;\n        _this.members = members;\n        _this.validValues = new Set();\n        _this._failMsg = \"is not a valid enum value\";\n        _this.validValues = new Set(Object.keys(members).map(function (name) { return members[name]; }));\n        return _this;\n    }\n    TEnumType.prototype.getChecker = function (suite, strict) {\n        var _this = this;\n        return function (value, ctx) {\n            return (_this.validValues.has(value) ? true : ctx.fail(null, _this._failMsg, 0));\n        };\n    };\n    return TEnumType;\n}(TType));\nexports.TEnumType = TEnumType;\n/**\n * Defines a literal enum value, such as Direction.Up, specified as enumlit(\"Direction\", \"Up\").\n */\nfunction enumlit(name, prop) {\n    return new TEnumLiteral(name, prop);\n}\nexports.enumlit = enumlit;\nvar TEnumLiteral = /** @class */ (function (_super) {\n    __extends(TEnumLiteral, _super);\n    function TEnumLiteral(enumName, prop) {\n        var _this = _super.call(this) || this;\n        _this.enumName = enumName;\n        _this.prop = prop;\n        _this._failMsg = \"is not \" + enumName + \".\" + prop;\n        return _this;\n    }\n    TEnumLiteral.prototype.getChecker = function (suite, strict) {\n        var _this = this;\n        var ttype = getNamedType(suite, this.enumName);\n        if (!(ttype instanceof TEnumType)) {\n            throw new Error(\"Type \" + this.enumName + \" used in enumlit is not an enum type\");\n        }\n        var val = ttype.members[this.prop];\n        if (!ttype.members.hasOwnProperty(this.prop)) {\n            throw new Error(\"Unknown value \" + this.enumName + \".\" + this.prop + \" used in enumlit\");\n        }\n        return function (value, ctx) { return (value === val) ? true : ctx.fail(null, _this._failMsg, -1); };\n    };\n    return TEnumLiteral;\n}(TType));\nexports.TEnumLiteral = TEnumLiteral;\nfunction makeIfaceProps(props) {\n    return Object.keys(props)\n        .filter(function (name) { return (name !== exports.indexKey); })\n        .map(function (name) { return makeIfaceProp(name, props[name]); });\n}\nfunction makeIfaceProp(name, prop) {\n    return prop instanceof TOptional ?\n        new TProp(name, prop.ttype, true) :\n        new TProp(name, parseSpec(prop), false);\n}\n/**\n * indexKey is a special key that indicates an index signature when used as a key in an interface.\n * E.g. {[key: string]: number} becomes t.iface([], {[t.indexKey]: \"number\"}).\n *\n * We don't distinguish between string- and number-type index signatures, and don't support\n * multiple index signatures.\n */\nexports.indexKey = Symbol();\n/**\n * Defines an interface. The first argument is an array of interfaces that it extends, and the\n * second is an array of properties.\n */\nfunction iface(bases, props) {\n    return new TIface(bases, makeIfaceProps(props), props[exports.indexKey]);\n}\nexports.iface = iface;\nvar TIface = /** @class */ (function (_super) {\n    __extends(TIface, _super);\n    function TIface(bases, props, indexType) {\n        var _this = _super.call(this) || this;\n        _this.bases = bases;\n        _this.props = props;\n        _this.indexType = indexType ? parseSpec(indexType) : undefined;\n        _this.propSet = new Set(props.map(function (p) { return p.name; }));\n        return _this;\n    }\n    TIface.prototype.getChecker = function (suite, strict, allowedProps) {\n        var _this = this;\n        var _a;\n        if (allowedProps === void 0) { allowedProps = new Set(); }\n        this.propSet.forEach(function (prop) { return allowedProps.add(prop); });\n        var baseCheckers = this.bases.map(function (b) { return getNamedType(suite, b).getChecker(suite, strict, allowedProps); });\n        var propCheckers = this.props.map(function (prop) { return prop.ttype.getChecker(suite, strict); });\n        var indexTypeChecker = (_a = this.indexType) === null || _a === void 0 ? void 0 : _a.getChecker(suite, strict);\n        var testCtx = new util_1.NoopContext();\n        // Consider a prop required if it's not optional AND does not allow for undefined as a value.\n        var isPropRequired = this.props.map(function (prop, i) {\n            return !prop.isOpt && !propCheckers[i](undefined, testCtx);\n        });\n        return function (value, ctx) {\n            if (typeof value !== \"object\" || value === null) {\n                return ctx.fail(null, \"is not an object\", 0);\n            }\n            for (var i = 0; i < baseCheckers.length; i++) {\n                baseCheckers[i](value, ctx.fork());\n                if (!ctx.completeFork()) {\n                    return false;\n                }\n            }\n            for (var i = 0; i < propCheckers.length; i++) {\n                var name_1 = _this.props[i].name;\n                var v = value[name_1];\n                if (v === undefined) {\n                    if (isPropRequired[i]) {\n                        ctx.fork().fail(name_1, \"is missing\", 1);\n                        if (!ctx.completeFork()) {\n                            return false;\n                        }\n                    }\n                }\n                else {\n                    var fork = ctx.fork();\n                    var ok = propCheckers[i](v, fork);\n                    if (!ok) {\n                        fork.fail(name_1, null, 1);\n                    }\n                    if (!ctx.completeFork()) {\n                        return false;\n                    }\n                }\n            }\n            if (indexTypeChecker) {\n                for (var prop in value) {\n                    var fork = ctx.fork();\n                    if (!indexTypeChecker(value[prop], fork)) {\n                        fork.fail(prop, null, 1);\n                    }\n                    if (!ctx.completeFork()) {\n                        return false;\n                    }\n                }\n            }\n            else if (strict) {\n                // In strict mode, check also for unknown enumerable properties.\n                for (var prop in value) {\n                    if (!allowedProps.has(prop)) {\n                        ctx.fork().fail(prop, \"is extraneous\", 2);\n                        if (!ctx.completeFork()) {\n                            return false;\n                        }\n                    }\n                }\n            }\n            return !ctx.failed();\n        };\n    };\n    return TIface;\n}(TType));\nexports.TIface = TIface;\n/**\n * Defines an optional property on an interface.\n */\nfunction opt(typeSpec) { return new TOptional(parseSpec(typeSpec)); }\nexports.opt = opt;\nvar TOptional = /** @class */ (function (_super) {\n    __extends(TOptional, _super);\n    function TOptional(ttype) {\n        var _this = _super.call(this) || this;\n        _this.ttype = ttype;\n        return _this;\n    }\n    TOptional.prototype.getChecker = function (suite, strict) {\n        var itemChecker = this.ttype.getChecker(suite, strict);\n        return function (value, ctx) {\n            return value === undefined || itemChecker(value, ctx);\n        };\n    };\n    return TOptional;\n}(TType));\nexports.TOptional = TOptional;\n/**\n * Defines a property in an interface.\n */\nvar TProp = /** @class */ (function () {\n    function TProp(name, ttype, isOpt) {\n        this.name = name;\n        this.ttype = ttype;\n        this.isOpt = isOpt;\n    }\n    return TProp;\n}());\nexports.TProp = TProp;\n/**\n * Defines a function. The first argument declares the function's return type, the rest declare\n * its parameters.\n */\nfunction func(resultSpec) {\n    var params = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        params[_i - 1] = arguments[_i];\n    }\n    return new TFunc(new TParamList(params), parseSpec(resultSpec));\n}\nexports.func = func;\nvar TFunc = /** @class */ (function (_super) {\n    __extends(TFunc, _super);\n    function TFunc(paramList, result) {\n        var _this = _super.call(this) || this;\n        _this.paramList = paramList;\n        _this.result = result;\n        return _this;\n    }\n    TFunc.prototype.getChecker = function (suite, strict) {\n        return function (value, ctx) {\n            return typeof value === \"function\" ? true : ctx.fail(null, \"is not a function\", 0);\n        };\n    };\n    return TFunc;\n}(TType));\nexports.TFunc = TFunc;\n/**\n * Defines a function parameter.\n */\nfunction param(name, typeSpec, isOpt) {\n    return new TParam(name, parseSpec(typeSpec), Boolean(isOpt));\n}\nexports.param = param;\nvar TParam = /** @class */ (function () {\n    function TParam(name, ttype, isOpt) {\n        this.name = name;\n        this.ttype = ttype;\n        this.isOpt = isOpt;\n    }\n    return TParam;\n}());\nexports.TParam = TParam;\n/**\n * Defines a function parameter list.\n */\nvar TParamList = /** @class */ (function (_super) {\n    __extends(TParamList, _super);\n    function TParamList(params) {\n        var _this = _super.call(this) || this;\n        _this.params = params;\n        return _this;\n    }\n    TParamList.prototype.getChecker = function (suite, strict) {\n        var _this = this;\n        var itemCheckers = this.params.map(function (t) { return t.ttype.getChecker(suite, strict); });\n        var testCtx = new util_1.NoopContext();\n        var isParamRequired = this.params.map(function (param, i) {\n            return !param.isOpt && !itemCheckers[i](undefined, testCtx);\n        });\n        var checker = function (value, ctx) {\n            if (!Array.isArray(value)) {\n                return ctx.fail(null, \"is not an array\", 0);\n            }\n            for (var i = 0; i < itemCheckers.length; i++) {\n                var p = _this.params[i];\n                if (value[i] === undefined) {\n                    if (isParamRequired[i]) {\n                        return ctx.fail(p.name, \"is missing\", 1);\n                    }\n                }\n                else {\n                    var ok = itemCheckers[i](value[i], ctx);\n                    if (!ok) {\n                        return ctx.fail(p.name, null, 1);\n                    }\n                }\n            }\n            return true;\n        };\n        if (!strict) {\n            return checker;\n        }\n        return function (value, ctx) {\n            if (!checker(value, ctx)) {\n                return false;\n            }\n            return value.length <= itemCheckers.length ? true :\n                ctx.fail(itemCheckers.length, \"is extraneous\", 2);\n        };\n    };\n    return TParamList;\n}(TType));\nexports.TParamList = TParamList;\n/**\n * Single TType implementation for all basic built-in types.\n */\nvar BasicType = /** @class */ (function (_super) {\n    __extends(BasicType, _super);\n    function BasicType(validator, message) {\n        var _this = _super.call(this) || this;\n        _this.validator = validator;\n        _this.message = message;\n        return _this;\n    }\n    BasicType.prototype.getChecker = function (suite, strict) {\n        var _this = this;\n        return function (value, ctx) { return _this.validator(value) ? true : ctx.fail(null, _this.message, 0); };\n    };\n    return BasicType;\n}(TType));\nexports.BasicType = BasicType;\n/**\n * Defines the suite of basic types.\n */\nexports.basicTypes = {\n    any: new BasicType(function (v) { return true; }, \"is invalid\"),\n    unknown: new BasicType(function (v) { return true; }, \"is invalid\"),\n    number: new BasicType(function (v) { return (typeof v === \"number\"); }, \"is not a number\"),\n    object: new BasicType(function (v) { return (typeof v === \"object\" && v); }, \"is not an object\"),\n    boolean: new BasicType(function (v) { return (typeof v === \"boolean\"); }, \"is not a boolean\"),\n    string: new BasicType(function (v) { return (typeof v === \"string\"); }, \"is not a string\"),\n    symbol: new BasicType(function (v) { return (typeof v === \"symbol\"); }, \"is not a symbol\"),\n    void: new BasicType(function (v) { return (v == null); }, \"is not void\"),\n    undefined: new BasicType(function (v) { return (v === undefined); }, \"is not undefined\"),\n    null: new BasicType(function (v) { return (v === null); }, \"is not null\"),\n    never: new BasicType(function (v) { return false; }, \"is unexpected\"),\n    Date: new BasicType(getIsNativeChecker(\"[object Date]\"), \"is not a Date\"),\n    RegExp: new BasicType(getIsNativeChecker(\"[object RegExp]\"), \"is not a RegExp\"),\n};\n// This approach for checking native object types mirrors that of lodash. Its advantage over\n// `isinstance` is that it can still return true for native objects created in different JS\n// execution environments.\nvar nativeToString = Object.prototype.toString;\nfunction getIsNativeChecker(tag) {\n    return function (v) { return typeof v === \"object\" && v && nativeToString.call(v) === tag; };\n}\nif (typeof Buffer !== \"undefined\") {\n    exports.basicTypes.Buffer = new BasicType(function (v) { return Buffer.isBuffer(v); }, \"is not a Buffer\");\n}\nvar _loop_1 = function (array_1) {\n    exports.basicTypes[array_1.name] = new BasicType(function (v) { return (v instanceof array_1); }, \"is not a \" + array_1.name);\n};\n// Support typed arrays of various flavors\nfor (var _i = 0, _a = [Int8Array, Uint8Array, Uint8ClampedArray, Int16Array, Uint16Array,\n    Int32Array, Uint32Array, Float32Array, Float64Array, ArrayBuffer]; _i < _a.length; _i++) {\n    var array_1 = _a[_i];\n    _loop_1(array_1);\n}\nfunction getTypeName(t) {\n    if (t instanceof TName || t instanceof TLiteral || t instanceof TArray) {\n        return t.name;\n    }\n}\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DetailContext = exports.NoopContext = exports.VError = void 0;\n/**\n * Error thrown by validation. Besides an informative message, it includes the path to the\n * property which triggered the failure.\n */\nvar VError = /** @class */ (function (_super) {\n    __extends(VError, _super);\n    function VError(path, message) {\n        var _this = _super.call(this, message) || this;\n        _this.path = path;\n        // See https://github.com/Microsoft/TypeScript/wiki/Breaking-Changes#extending-built-ins-like-error-array-and-map-may-no-longer-work for info about this workaround.\n        Object.setPrototypeOf(_this, VError.prototype);\n        return _this;\n    }\n    return VError;\n}(Error));\nexports.VError = VError;\n/**\n * Fast implementation of IContext used for first-pass validation. If that fails, we can validate\n * using DetailContext to collect error messages. That's faster for the common case when messages\n * normally pass validation.\n */\nvar NoopContext = /** @class */ (function () {\n    function NoopContext() {\n        this._failed = false;\n    }\n    NoopContext.prototype.fail = function (relPath, message, score) {\n        this._failed = true;\n        return false;\n    };\n    NoopContext.prototype.fork = function () {\n        return this;\n    };\n    NoopContext.prototype.completeFork = function () {\n        return !this._failed;\n    };\n    NoopContext.prototype.failed = function () {\n        return this._failed;\n    };\n    NoopContext.prototype.unionResolver = function () { return this; };\n    NoopContext.prototype.createContext = function () {\n        this._failed = false;\n        return this;\n    };\n    NoopContext.prototype.resolveUnion = function (ur) { };\n    return NoopContext;\n}());\nexports.NoopContext = NoopContext;\n/**\n * Complete implementation of IContext that collects meaningfull errors.\n */\nvar DetailContext = /** @class */ (function () {\n    function DetailContext() {\n        // Stack of property names and associated messages for reporting helpful error messages.\n        this._propNames = [];\n        this._messages = [];\n        /** Contexts created by fork() which have completed and contain failures */\n        this._failedForks = [];\n        /**\n         * Contains the context returned by fork() which should be checked until\n         * completeFork() is called.\n         * Will be reused for the next fork() if there are no failures.\n         */\n        this._currentFork = null;\n        // Score is used to choose the best union member whose DetailContext to use for reporting.\n        // Higher score means better match (or rather less severe mismatch).\n        this._score = 0;\n    }\n    DetailContext.prototype.fail = function (relPath, message, score) {\n        this._propNames.push(relPath);\n        this._messages.push(message);\n        this._score += score;\n        return false;\n    };\n    DetailContext.prototype.unionResolver = function () {\n        return new DetailUnionResolver();\n    };\n    DetailContext.prototype.resolveUnion = function (unionResolver) {\n        var _a, _b, _c;\n        var u = unionResolver;\n        var best = null;\n        for (var _i = 0, _d = u.contexts; _i < _d.length; _i++) {\n            var ctx = _d[_i];\n            if (!best || ctx._score >= best._score) {\n                best = ctx;\n            }\n        }\n        if (best && best._score > 0) {\n            (_a = this._propNames).push.apply(_a, best._propNames);\n            (_b = this._messages).push.apply(_b, best._messages);\n            (_c = this._failedForks).push.apply(_c, best._failedForks);\n        }\n    };\n    DetailContext.prototype.getError = function (path) {\n        var fullMessage = flatten(this.getErrorDetails(path).map(errorLines))\n            .join(\"\\n\");\n        return new VError(path, fullMessage);\n    };\n    DetailContext.prototype.getErrorDetails = function (path) {\n        var detail = null;\n        var nested;\n        var details = [];\n        // As checkers call fail() and return to their parent checkers,\n        // the deepest failures are recorded first.\n        // Go through failures in reverse to start from the root type\n        for (var i = this._propNames.length - 1; i >= 0; i--) {\n            var p = this._propNames[i];\n            path += (typeof p === \"number\") ? \"[\" + p + \"]\" : (p ? \".\" + p : \"\");\n            var message = this._messages[i];\n            if (!message) {\n                continue;\n            }\n            nested = { path: path, message: message };\n            if (detail) {\n                detail.nested = [nested];\n            }\n            else {\n                // This is the root failure, so it will be returned\n                details.push(nested);\n            }\n            // Move into the deeper error\n            detail = nested;\n        }\n        var forkErrors = flatten(this._failedForks.map(function (fork) { return fork.getErrorDetails(path); }));\n        if (detail) {\n            // don't put an empty array in detail.nested\n            if (forkErrors.length) {\n                // detail is the deepest nested error, so detail.nested is null at this point\n                detail.nested = forkErrors;\n            }\n        }\n        else {\n            // There were no 'plain' failures, only fork failures\n            details = forkErrors;\n        }\n        return details;\n    };\n    DetailContext.prototype.fork = function () {\n        if (this._currentFork == null) {\n            this._currentFork = new DetailContext();\n        }\n        return this._currentFork;\n    };\n    DetailContext.prototype.completeFork = function () {\n        var fork = this._currentFork;\n        if (fork._failed()) {\n            this._failedForks.push(fork);\n            this._currentFork = null;\n            // To preserve old behaviour, use the score of the first failure\n            // Might want to revise this\n            if (this._failedForks.length === 1) {\n                this._score = fork._score;\n            }\n        }\n        return this._failedForks.length < DetailContext.maxForks;\n    };\n    // failed() is the public interface,\n    // it gets monkeypatched to ensure correct usage in checkers.\n    // _failed() may be called internally\n    // in ways which would fail the monkeypatched assertions.\n    DetailContext.prototype.failed = function () {\n        return this._failed();\n    };\n    DetailContext.prototype._failed = function () {\n        return this._propNames.length + this._failedForks.length > 0;\n    };\n    /**\n     * Maximum number of errors recorded at one level for an object,\n     * i.e. the maximum length of Checker.validate() or IErrorDetail.nested.\n     */\n    // If _failedForks has this length then completeFork() should return false\n    // so that the checker stops making more forks.\n    DetailContext.maxForks = 3;\n    return DetailContext;\n}());\nexports.DetailContext = DetailContext;\nvar DetailUnionResolver = /** @class */ (function () {\n    function DetailUnionResolver() {\n        this.contexts = [];\n    }\n    DetailUnionResolver.prototype.createContext = function () {\n        var ctx = new DetailContext();\n        this.contexts.push(ctx);\n        return ctx;\n    };\n    return DetailUnionResolver;\n}());\n/**\n * Returns lines of a message describing `error`.\n * The lines should be newline separated in the final message.\n * Only returns multiple lines if `error` or a descendant\n * has multiple errors in its `.nested` array.\n * Simple paths of nested errors anywhere in the tree\n * are collapsed into a single line until a branch is reached.\n */\nvar errorLines = function (error) {\n    var rootMessage = error.path + \" \" + error.message;\n    var nestedErrors = error.nested || [];\n    var nestedLines = flatten(nestedErrors.map(errorLines));\n    if (nestedErrors.length == 1) {\n        // Single nested errors are collapsed into the first line,\n        // but they may have branches deeper down leading to more lines\n        // which are already indented\n        var first = nestedLines[0], rest = nestedLines.slice(1);\n        return __spreadArrays([\n            rootMessage + \"; \" + first\n        ], rest);\n    }\n    else {\n        // Indent messages from nested errors\n        // or just return [rootMessage] if there are no nested errors\n        return __spreadArrays([\n            rootMessage\n        ], nestedLines.map(function (line) { return \"    \" + line; }));\n    }\n};\n/** Shallow flatten a 2D array into a 1D array */\nfunction flatten(arr) {\n    var _a;\n    return (_a = []).concat.apply(_a, arr);\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","import {AppModel} from 'app/client/models/AppModel';\nimport {Disposable} from 'grainjs';\n\nexport class BillingPage extends Disposable {\n  constructor(_appModel: AppModel) {\n    super();\n  }\n\n  public buildDom() {\n    return null;\n  }\n}\n","/**\n * grist-static passes around some global state in a hacky way.\n * Here we at least try to shepherd the state into a single place.\n */\n\n\nexport interface GristOverrides {\n  bootstrapGristPrefix?: string;\n  staticGristOptions?: {\n    name?: string;\n  };\n  /**\n   * .grist doc URL.\n   */\n  seedFile?: string;\n  /**\n   * .csv file URL.\n   */\n  initialData?: string;\n  /**\n   * .csv file content to load. Not used when initialData is set.\n   */\n  initialContent?: string;\n  fakeUrl?: string;\n  fakeDocId?: string;\n  singlePage?: boolean;\n}\n\nexport function getGristOverrides(): GristOverrides {\n  if (typeof window === 'undefined') { return {}; }\n  return (window as any).gristOverrides || {};\n}\n\nexport const gristOverrides = getGristOverrides();\n","import { defaultHooks, IHooks } from 'app/client/DefaultHooks';\nimport { IGristUrlState } from 'app/common/gristUrls';\nimport { gristOverrides } from 'app/pipe/GristOverrides';\n\nexport const hooks: IHooks = {\n  ...defaultHooks,\n  iframeAttributes: {\n    credentialless: true,\n  },\n  fetch: fetcher,\n  baseURI: gristOverrides.bootstrapGristPrefix,\n  urlTweaks: {\n    postEncode,\n    preDecode,\n  },\n};\nconsole.log({hooks});\n\nfunction fetcher(...args: any[]) {\n  if ((window as any).fetchHook) {\n    return (window as any).fetchHook(...args);\n  }\n  return (fetch as any)(args);\n}\n\nfunction preDecode(options: {\n  url: URL,\n}) {\n  const fakeUrl = gristOverrides.fakeUrl;\n  if (!fakeUrl) {\n    return;\n  }\n  const at = new URL(options.url.href);\n  let extra = at.searchParams.get('part');\n  if (!extra) {\n    const p = at.searchParams.get('p');\n    if (p) {\n      extra = `/p/${p}`;\n    }\n  }\n  const location = new URL(fakeUrl + (extra || ''));\n  location.search = at.search;\n  if (gristOverrides.singlePage) {\n    location.searchParams.set('embed', 'true');\n    location.searchParams.set('style', 'light');\n  }\n  location.hash = at.hash;\n  options.url.href = location.href;\n  console.log({options});\n}\n\nfunction postEncode(options: {\n  url: URL,\n  parts: string[],\n  state: IGristUrlState,\n  baseLocation: Location | URL,\n}): void {\n  const {url, parts} = options;\n  const fakeUrl = gristOverrides.fakeUrl;\n  if (!fakeUrl) {\n    return;\n  }\n  const at = new URL(location.href);\n  const queryStr = url.search;\n  at.search = queryStr;\n  if (parts[0] === '/') {\n    parts.shift();\n  }\n  if (parts[0] === 'o/docs/') {\n    parts.shift();\n  }\n  if (parts[0]?.startsWith('doc/')) {\n    parts.shift();\n  }\n  if (parts.length === 1 && parts[0].startsWith('/p/')) {\n    at.searchParams.set('p', parts[0].slice(3));\n  } else {\n    at.searchParams.set('part',\n                        parts.join(''));\n  }\n  at.hash = url.hash;\n  url.href = at.href;\n}\n","import { UrlTweaks } from 'app/common/gristUrls';\n\nexport interface IHooks {\n  iframeAttributes?: Record<string, any>,\n  fetch?: typeof fetch,\n  baseURI?: string,\n  urlTweaks?: UrlTweaks,\n}\n\nexport const defaultHooks: IHooks = {\n};\n","/**\n * A tip for fixing an error.\n */\nexport interface ApiTip {\n  action: 'add-members' | 'upgrade' | 'ask-for-help' | 'manage';\n  message: string;\n}\n\nexport type LimitType = 'collaborators' | 'docs' | 'workspaces' | 'assistant';\n\n/**\n * Documentation of a limit relevant to an API error.\n */\nexport interface ApiLimit {\n  quantity: LimitType;  // what are we counting\n  subquantity?: string;    // a nuance to what we are counting\n  maximum: number;         // maximum allowed\n  value: number;           // current value of quantity for user\n  projectedValue: number;  // value of quantity expected if request had been allowed\n}\n\n/**\n * Structured details about an API error.\n */\nexport interface ApiErrorDetails {\n  limit?: ApiLimit;\n\n  // If set, this is the more user-friendly message to show to the user than error.message.\n  userError?: string;\n\n  // If set, contains suggestions for fixing a problem.\n  tips?: ApiTip[];\n\n  memos?: string[];\n}\n\n/**\n * An error with an http status code.\n */\nexport class ApiError extends Error {\n  constructor(message: string, public status: number, public details?: ApiErrorDetails) {\n    super(message);\n  }\n}\n","/**\n * A version of Function.bind() that preserves types.\n */\n\n// tslint:disable:max-line-length\n\n// Bind just the context for a function of up to 4 args.\nexport function tbind<T, R, Args extends any[]>(func: (this: T, ...a: Args) => R, context: T): (...a: Args) => R;\n\n// Bind context and first arg for a function of up to 5 args.\nexport function tbind<T, R, X, Args extends any[]>(\n  func: (this: T, x: X, ...a: Args) => R, context: T, x: X\n): (...a: Args) => R;\n\nexport function tbind(func: any, context: any, ...boundArgs: any[]): any {\n  return func.bind(context, ...boundArgs);\n}\n","import {ApiError, ApiErrorDetails} from 'app/common/ApiError';\nimport axios, {AxiosRequestConfig, AxiosResponse} from 'axios';\nimport {tbind} from './tbind';\n\nexport interface IOptions {\n  headers?: Record<string, string>;\n  fetch?: typeof fetch;\n  newFormData?: () => FormData;  // constructor for FormData depends on platform.\n  extraParameters?: Map<string, string>;  // if set, add query parameters to requests.\n}\n\n/**\n * Base setup class for creating a REST API client interface.\n */\nexport class BaseAPI {\n  // Count of pending requests. It is relied on by tests.\n  public static numPendingRequests(): number { return this._numPendingRequests; }\n\n  // Wrap a promise to add to the count of pending requests until the promise is resolved.\n  public static async countPendingRequest<T>(promise: Promise<T>): Promise<T> {\n    try {\n      BaseAPI._numPendingRequests++;\n      return await promise;\n    } finally {\n      BaseAPI._numPendingRequests--;\n    }\n  }\n\n  // Define a decorator for methods in BaseAPI or derived classes.\n  public static countRequest(target: unknown, propertyKey: string, descriptor: PropertyDescriptor) {\n    const originalMethod = descriptor.value;\n    descriptor.value = async function(...args: any[]) {\n      return BaseAPI.countPendingRequest(originalMethod.apply(this, args));\n    };\n  }\n\n  // Make a JSON request to the given URL, and read the response as JSON. Handles errors, and\n  // counts pending requests in the same way as BaseAPI methods do.\n  public static requestJson(url: string, init: RequestInit = {}): Promise<unknown> {\n    return new BaseAPI().requestJson(url, init);\n  }\n\n  // Make a request to the given URL, and read the response. Handles errors, and\n  // counts pending requests in the same way as BaseAPI methods do.\n  public static request(url: string, init: RequestInit = {}): Promise<Response> {\n    return new BaseAPI().request(url, init);\n  }\n\n  private static _numPendingRequests: number = 0;\n\n  protected fetch: typeof fetch;\n  protected newFormData: () => FormData;\n  private _headers: Record<string, string>;\n  private _extraParameters?: Map<string, string>;\n\n  constructor(options: IOptions = {}) {\n    this.fetch = options.fetch || tbind(window.fetch, window);\n    this.newFormData = options.newFormData || (() => new FormData());\n    this._headers = {\n      'Content-Type': 'application/json',\n      'X-Requested-With': 'XMLHttpRequest',\n      ...options.headers\n    };\n    this._extraParameters = options.extraParameters;\n  }\n\n  // Make a modified request, exposed for test convenience.\n  public async testRequest(url: string, init: RequestInit = {}): Promise<Response> {\n    return this.request(url, init);\n  }\n\n  public defaultHeaders() {\n    return this._headers;\n  }\n\n  public defaultHeadersWithoutContentType() {\n    const headers = {...this.defaultHeaders()};\n    delete headers['Content-Type'];\n    return headers;\n  }\n\n  // Similar to request, but uses the axios library, and supports progress indicator.\n  @BaseAPI.countRequest\n  protected async requestAxios(url: string, config: AxiosRequestConfig): Promise<AxiosResponse> {\n    // If using with FormData in node, axios needs the headers prepared by FormData.\n    let headers = config.headers;\n    if (config.data && typeof config.data.getHeaders === 'function') {\n      headers = {...config.data.getHeaders(), ...headers};\n    }\n    const resp = await axios.request({\n      url,\n      withCredentials: true,\n      validateStatus: (status) => true,     // This is more like fetch\n      ...config,\n      headers,\n    });\n    if (resp.status !== 200) {\n      throwApiError(url, resp, resp.data);\n    }\n    return resp;\n  }\n\n  @BaseAPI.countRequest\n  protected async request(input: string, init: RequestInit = {}): Promise<Response> {\n    init = Object.assign({ headers: this._headers, credentials: 'include' }, init);\n    if (this._extraParameters) {\n      const url = new URL(input);\n      for (const [key, val] of this._extraParameters.entries()) {\n        url.searchParams.set(key, val);\n        input = url.href;\n      }\n    }\n    const resp = await this.fetch(input, init);\n    if (resp.status !== 200) {\n      const body = await resp.json().catch(() => ({}));\n      throwApiError(input, resp, body);\n    }\n    return resp;\n  }\n\n  /**\n   * Make a request, and read the response as JSON. This allows counting the request as pending\n   * until it has been read, which is relied on by tests.\n   */\n  @BaseAPI.countRequest\n  protected async requestJson(input: string, init: RequestInit = {}): Promise<any> {\n    return (await this.request(input, init)).json();\n  }\n}\n\nfunction throwApiError(url: string, resp: Response | AxiosResponse, body: any) {\n  // If the response includes details, include them into the ApiError we construct. Include\n  // also the error message from the server as details.userError. It's used by the Notifier.\n  if (!body) { body = {}; }\n  const details: ApiErrorDetails = body.details && typeof body.details === 'object' ? body.details :\n    {errorDetails: body.details};\n  // If a userError is already specified, do not overwrite it.\n  // (The error handling here is quite confusing, would it not be better\n  // to just unserialize an ApiError into the form it would have had on\n  // the server?)\n  if (body.error && !details.userError) {\n    details.userError = body.error;\n  }\n  if (body.memos) {\n    details.memos = body.memos;\n  }\n  throw new ApiError(`Request to ${url} failed with status ${resp.status}: ` +\n    `${resp.statusText} (${body.error || 'unknown cause'})`, resp.status, details);\n}\n","/**\n * TypeScript will infer a string union type from the literal values passed to\n * this function. Without `extends string`, it would instead generalize them\n * to the common string type.\n *\n * Example definition:\n * const Race = StringUnion(\n *   \"orc\",\n *   \"human\",\n *   \"night elf\",\n *   \"undead\",\n * );\n * type Race = typeof Race.type;\n *\n * For more details, see:\n * https://stackoverflow.com/questions/36836011/checking-validity-of-string\n *   -literal-union-type-at-runtime?answertab=active#tab-top\n */\nexport const StringUnion = <UnionType extends string>(...values: UnionType[]) => {\n  Object.freeze(values);\n  const valueSet: Set<string> = new Set(values);\n\n  const guard = (value: string): value is UnionType => {\n    return valueSet.has(value);\n  };\n\n  const check = (value: string): UnionType => {\n    if (!guard(value)) {\n      const actual = JSON.stringify(value);\n      const expected = values.map(s => JSON.stringify(s)).join(' | ');\n      throw new TypeError(`Value '${actual}' is not assignable to type '${expected}'.`);\n    }\n    return value;\n  };\n\n  const checkAll = (arr: string[]): UnionType[] => {\n    return arr.map(check);\n  };\n\n  /**\n   * StringUnion.parse(value) returns value when it's valid, and undefined otherwise.\n   */\n  const parse = (value: string|null|undefined): UnionType|undefined => {\n    return value != null && guard(value) ? value : undefined;\n  };\n\n  const unionNamespace = {guard, check, parse, values, checkAll};\n  return Object.freeze(unionNamespace as typeof unionNamespace & {type: UnionType});\n};\n","import {BaseAPI, IOptions} from 'app/common/BaseAPI';\nimport {FullUser} from 'app/common/LoginSessionAPI';\nimport {StringUnion} from 'app/common/StringUnion';\nimport {addCurrentOrgToPath} from 'app/common/urlUtils';\nimport {BillingAccount, ManagerDelta, OrganizationWithoutAccessInfo} from 'app/common/UserAPI';\n\nexport const BillingSubPage = StringUnion('payment', 'scheduled');\nexport type BillingSubPage = typeof BillingSubPage.type;\n\nexport const BillingPage = StringUnion(...BillingSubPage.values, 'billing');\nexport type BillingPage = typeof BillingPage.type;\n\n// updateDomain - it is a subpage for billing page, to update domain name.\n// The rest are for payment page:\n// signUpLite - it is a subpage for payment, to finalize (complete) signup process\n// and set domain and team name when they are not set yet (currently only from landing pages).\n// signUp - it is landing page for new team sites (it doesn't ask for the name of the team)\nexport const BillingTask = StringUnion('signUpLite', 'updateDomain', 'signUp', 'cancelPlan', 'upgraded');\nexport type BillingTask = typeof BillingTask.type;\n\n// Note that IBillingPlan includes selected fields from the Stripe plan object along with\n// custom metadata fields that are present on plans we store in Stripe.\n// For reference: https://stripe.com/docs/api/plans/object\nexport interface IBillingPlan {\n  id: string;                 // the Stripe plan id\n  nickname: string;\n  currency: string;           // lowercase three-letter ISO currency code\n  interval: string;           // billing frequency - one of day, week, month or year\n  amount: number;             // amount in cents charged at each interval\n  metadata: {\n    family?: string;          // groups plans for filtering by GRIST_STRIPE_FAMILY env variable\n    isStandard: boolean;      // indicates that the plan should be returned by the API to be offered.\n    supportAvailable: boolean;\n    gristProduct: string;     // name of grist product that should be used with this plan.\n    unthrottledApi: boolean;\n    customSubdomain: boolean;\n    workspaces: boolean;\n    maxDocs?: number;         // if given, limit of docs that can be created\n    maxUsersPerDoc?: number;  // if given, limit of users each doc can be shared with\n  };\n  trial_period_days: number|null;  // Number of days in the trial period, or null if there is none.\n  product: string;         // the Stripe product id.\n  active: boolean;\n}\n\nexport interface ILimitTier {\n  name?: string;\n  volume: number;\n  price: number;\n  flatFee: number;\n  type: string;\n  planId: string;\n  interval: string; // probably 'month'|'year';\n}\n\n// Utility type that requires all properties to be non-nullish.\n// type NonNullableProperties<T> = { [P in keyof T]: Required<NonNullable<T[P]>>; };\n\n// Stripe promotion code and coupon information. Used by client to apply signup discounts.\n// For reference: https://stripe.com/docs/api/promotion_codes/object#promotion_code_object-coupon\nexport interface IBillingCoupon {\n  id: string;\n  promotion_code: string;\n  name: string|null;\n  percent_off: number|null;\n  amount_off: number|null;\n}\n\n// Stripe subscription discount information.\n// For reference: https://stripe.com/docs/api/discounts/object\nexport interface IBillingDiscount {\n  name: string|null;\n  percent_off: number|null;\n  amount_off: number|null;\n  end_timestamp_ms: number|null;\n}\n\n\nexport interface IBillingSubscription {\n  // All standard plan options.\n  plans: IBillingPlan[];\n  tiers: ILimitTier[];\n  // Index in the plans array of the plan currently in effect.\n  planIndex: number;\n  // Index in the plans array of the plan to be in effect after the current period end.\n  // Equal to the planIndex when the plan has not been downgraded or cancelled.\n  upcomingPlanIndex: number;\n  // Timestamp in milliseconds indicating when the current plan period ends.\n  // Null if the account is not signed up with Stripe.\n  periodEnd: number|null;\n  // Whether the subscription is in the trial period.\n  isInTrial: boolean;\n  // Value in cents remaining for the current subscription. This indicates the amount that\n  // will be discounted from a subscription upgrade.\n  valueRemaining: number;\n  // The effective tax rate of the customer for the given address.\n  taxRate: number;\n  // The current number of users with whom the paid org is shared.\n  userCount: number;\n  // The next total in cents that Stripe is going to charge (includes tax and discount).\n  nextTotal: number;\n  // Discount information, if any.\n  discount: IBillingDiscount|null;\n  // Last plan we had a subscription for, if any.\n  lastPlanId: string|null;\n  // Whether there is a valid plan in effect.\n  isValidPlan: boolean;\n  // A flag for when all is well with the user's subscription.\n  inGoodStanding: boolean;\n  // Whether there is a paying valid account (even on free plan). It this is set\n  // user needs to upgrade the plan using Stripe Customer portal. In not, we need to\n  // go though checkout process.\n  activeSubscription: boolean;\n  // Whether the plan is billable. Billable plans must be in Stripe.\n  billable: boolean;\n  // Whether we are waiting for upgrade to complete.\n  upgradingPlanIndex: number;\n\n  // Stripe status, documented at https://stripe.com/docs/api/subscriptions/object#subscription_object-status\n  // such as \"active\", \"trialing\" (reflected in isInTrial), \"incomplete\", etc.\n  status?: string;\n  lastInvoiceUrl?: string;    // URL of the Stripe-hosted page with the last invoice.\n  lastChargeError?: string;   // The last charge error, if any, to show in case of a bad status.\n  lastChargeTime?: number;    // The time of the last charge attempt.\n  limit?: ILimit|null;\n}\n\nexport interface ILimit {\n  limitValue: number;\n  currentUsage: number;\n  type: string; // Limit type, for now only assistant is supported.\n  price: number; // If this is 0, it means it is a free plan.\n}\n\nexport interface IBillingOrgSettings {\n  name: string;\n  domain: string;\n}\n\n// Full description of billing account, including nested list of orgs and managers.\nexport interface FullBillingAccount extends BillingAccount {\n  orgs: OrganizationWithoutAccessInfo[];\n  managers: FullUser[];\n}\n\nexport interface BillingAPI {\n  isDomainAvailable(domain: string): Promise<boolean>;\n  getPlans(): Promise<IBillingPlan[]>;\n  getSubscription(): Promise<IBillingSubscription>;\n  getBillingAccount(): Promise<FullBillingAccount>;\n  updateBillingManagers(delta: ManagerDelta): Promise<void>;\n  updateSettings(settings: IBillingOrgSettings): Promise<void>;\n  subscriptionStatus(planId: string): Promise<boolean>;\n  createFreeTeam(name: string, domain: string): Promise<string>;\n  createTeam(name: string, domain: string): Promise<string>;\n  upgrade(): Promise<string>;\n  cancelCurrentPlan(): Promise<void>;\n  downgradePlan(planName: string): Promise<void>;\n  renewPlan(): string;\n  customerPortal(): string;\n  updateAssistantPlan(tier: number): Promise<void>;\n}\n\nexport class BillingAPIImpl extends BaseAPI implements BillingAPI {\n  constructor(private _homeUrl: string, options: IOptions = {}) {\n    super(options);\n  }\n\n  public async isDomainAvailable(domain: string): Promise<boolean> {\n    return this.requestJson(`${this._url}/api/billing/domain`, {\n      method: 'POST',\n      body: JSON.stringify({ domain })\n    });\n  }\n  public async getPlans(): Promise<IBillingPlan[]> {\n    return this.requestJson(`${this._url}/api/billing/plans`, {method: 'GET'});\n  }\n\n  // Returns an IBillingSubscription\n  public async getSubscription(): Promise<IBillingSubscription> {\n    return this.requestJson(`${this._url}/api/billing/subscription`, {method: 'GET'});\n  }\n\n  public async getBillingAccount(): Promise<FullBillingAccount> {\n    return this.requestJson(`${this._url}/api/billing`, {method: 'GET'});\n  }\n\n  public async cancelCurrentPlan() {\n    await this.request(`${this._url}/api/billing/cancel-plan`, {\n      method: 'POST',\n    });\n  }\n\n  public async downgradePlan(planName: string): Promise<void> {\n    await this.request(`${this._url}/api/billing/downgrade-plan`, {\n      method: 'POST',\n      body: JSON.stringify({ planName })\n    });\n  }\n\n  public async updateSettings(settings?: IBillingOrgSettings): Promise<void> {\n    await this.request(`${this._url}/api/billing/settings`, {\n      method: 'POST',\n      body: JSON.stringify({ settings })\n    });\n  }\n\n  public async updateBillingManagers(delta: ManagerDelta): Promise<void> {\n    await this.request(`${this._url}/api/billing/managers`, {\n      method: 'PATCH',\n      body: JSON.stringify({delta})\n    });\n  }\n\n  public async createFreeTeam(name: string, domain: string): Promise<string> {\n    const data = await this.requestJson(`${this._url}/api/billing/team-free`, {\n      method: 'POST',\n      body: JSON.stringify({\n        domain,\n        name\n      })\n    });\n    return data.orgUrl;\n  }\n\n  public async createTeam(name: string, domain: string): Promise<string> {\n    const data = await this.requestJson(`${this._url}/api/billing/team`, {\n      method: 'POST',\n      body: JSON.stringify({\n        domain,\n        name,\n        planType: 'team',\n        next: window.location.href\n      })\n    });\n    return data.checkoutUrl;\n  }\n\n  public async upgrade(): Promise<string> {\n    const data = await this.requestJson(`${this._url}/api/billing/upgrade`, {\n      method: 'POST',\n    });\n    return data.checkoutUrl;\n  }\n\n  public customerPortal(): string {\n    return `${this._url}/api/billing/customer-portal`;\n  }\n\n  public renewPlan(): string {\n    return `${this._url}/api/billing/renew`;\n  }\n\n  public async updateAssistantPlan(tier: number): Promise<void> {\n    await this.request(`${this._url}/api/billing/upgrade-assistant`, {\n      method: 'POST',\n      body: JSON.stringify({ tier })\n    });\n  }\n\n  /**\n   * Checks if current org has active subscription for a Stripe plan.\n   */\n  public async subscriptionStatus(planId: string): Promise<boolean> {\n    const data = await this.requestJson(`${this._url}/api/billing/status`, {\n      method: 'POST',\n      body: JSON.stringify({planId})\n    });\n    return data.active;\n  }\n\n  private get _url(): string {\n    return addCurrentOrgToPath(this._homeUrl);\n  }\n}\n","import {MinimalActionGroup} from 'app/common/ActionGroup';\nimport {TableDataAction} from 'app/common/DocActions';\nimport {FilteredDocUsageSummary} from 'app/common/DocUsage';\nimport {Role} from 'app/common/roles';\nimport {StringUnion} from 'app/common/StringUnion';\nimport {FullUser} from 'app/common/UserAPI';\n\n// Possible flavors of items in a list of documents.\nexport type DocEntryTag = ''|'sample'|'invite'|'shared';\n\nexport const OpenDocMode = StringUnion(\n  'default',  // open doc with user's maximal access level\n  'view',     // open doc limited to view access (if user has at least that level of access)\n  'fork',     // as for 'view', but suggest a fork on any attempt to edit - the client will\n              // enable the editing UI experience and trigger a fork on any edit.\n);\nexport type OpenDocMode = typeof OpenDocMode.type;\n\n/**\n * Represents an entry in the DocList.\n */\nexport interface DocEntry {\n  docId?: string;       // Set for shared docs and invites\n  name: string;\n  mtime?: Date;\n  size?: number;\n  tag: DocEntryTag;\n  senderName?: string;\n  senderEmail?: string;\n}\n\nexport interface DocCreationInfo {\n  id: string;\n  title: string;\n}\n\n/**\n * This documents the members of the structure returned when a local\n * grist document is opened.\n */\nexport interface OpenLocalDocResult {\n  docFD: number;\n  clientId: string;  // the docFD is meaningful only in the context of this session\n  doc: {[tableId: string]: TableDataAction};\n  log: MinimalActionGroup[];\n  recoveryMode?: boolean;\n  userOverride?: UserOverride;\n  docUsage?: FilteredDocUsageSummary;\n}\n\nexport interface UserOverride {\n  user: FullUser|null;\n  access: Role|null;\n}\n\nexport interface DocListAPI {\n  /**\n   * Returns a all known Grist documents and document invites to show in the doc list.\n   */\n  getDocList(): Promise<{docs: DocEntry[], docInvites: DocEntry[]}>;\n\n  /**\n   * Creates a new document, fetches it, and adds a table to it. Returns its name.\n   */\n  createNewDoc(): Promise<string>;\n\n  /**\n   * Makes a copy of the given sample doc. Returns the name of the new document.\n   */\n  importSampleDoc(sampleDocName: string): Promise<string>;\n\n  /**\n   * Processes an upload, containing possibly multiple files, to create a single new document, and\n   * returns the new document's name.\n   */\n  importDoc(uploadId: number): Promise<string>;\n\n  /**\n   * Deletes a Grist document. Returns the name of the deleted document. If `deletePermanently` is\n   * true, the doc is deleted permanently rather than just moved to the trash.\n   */\n  deleteDoc(docName: string, deletePermanently: boolean): Promise<string>;\n\n  /**\n   * Renames a document.\n   */\n  renameDoc(oldName: string, newName: string): Promise<void>;\n\n  /**\n   * Opens a document, loads it, subscribes to its userAction events, and returns its metadata.\n   */\n  openDoc(userDocName: string, openMode?: OpenDocMode,\n          linkParameters?: Record<string, string>): Promise<OpenLocalDocResult>;\n}\n","/**\n * This module was automatically generated by `ts-interface-builder`\n */\nimport * as t from \"ts-interface-checker\";\n// tslint:disable:object-literal-key-quotes\n\nexport const ThemePrefs = t.iface([], {\n  \"appearance\": \"ThemeAppearance\",\n  \"syncWithOS\": \"boolean\",\n  \"colors\": t.iface([], {\n    \"light\": \"ThemeNameOrColors\",\n    \"dark\": \"ThemeNameOrColors\",\n  }),\n});\n\nexport const ThemeAppearance = t.union(t.lit('light'), t.lit('dark'));\n\nexport const ThemeNameOrColors = t.union(\"ThemeName\", \"ThemeColors\");\n\nexport const ThemeName = t.union(t.lit('GristLight'), t.lit('GristDark'));\n\nexport const Theme = t.iface([], {\n  \"appearance\": \"ThemeAppearance\",\n  \"colors\": \"ThemeColors\",\n});\n\nexport const ThemeColors = t.iface([], {\n  \"text\": \"string\",\n  \"text-light\": \"string\",\n  \"text-dark\": \"string\",\n  \"text-error\": \"string\",\n  \"text-danger\": \"string\",\n  \"text-disabled\": \"string\",\n  \"page-bg\": \"string\",\n  \"page-backdrop\": \"string\",\n  \"page-panels-main-panel-bg\": \"string\",\n  \"page-panels-left-panel-bg\": \"string\",\n  \"page-panels-right-panel-bg\": \"string\",\n  \"page-panels-top-header-bg\": \"string\",\n  \"page-panels-bottom-footer-bg\": \"string\",\n  \"page-panels-border\": \"string\",\n  \"page-panels-border-resizing\": \"string\",\n  \"page-panels-side-panel-opener-fg\": \"string\",\n  \"page-panels-side-panel-opener-active-fg\": \"string\",\n  \"page-panels-side-panel-opener-active-bg\": \"string\",\n  \"add-new-circle-fg\": \"string\",\n  \"add-new-circle-bg\": \"string\",\n  \"add-new-circle-hover-bg\": \"string\",\n  \"add-new-circle-small-fg\": \"string\",\n  \"add-new-circle-small-bg\": \"string\",\n  \"add-new-circle-small-hover-bg\": \"string\",\n  \"top-bar-button-primary-fg\": \"string\",\n  \"top-bar-button-secondary-fg\": \"string\",\n  \"top-bar-button-disabled-fg\": \"string\",\n  \"top-bar-button-error-fg\": \"string\",\n  \"notifications-panel-header-bg\": \"string\",\n  \"notifications-panel-body-bg\": \"string\",\n  \"notifications-panel-border\": \"string\",\n  \"toast-text\": \"string\",\n  \"toast-text-light\": \"string\",\n  \"toast-bg\": \"string\",\n  \"toast-memo-text\": \"string\",\n  \"toast-memo-bg\": \"string\",\n  \"toast-error-icon\": \"string\",\n  \"toast-error-bg\": \"string\",\n  \"toast-success-icon\": \"string\",\n  \"toast-success-bg\": \"string\",\n  \"toast-warning-icon\": \"string\",\n  \"toast-warning-bg\": \"string\",\n  \"toast-info-icon\": \"string\",\n  \"toast-info-bg\": \"string\",\n  \"toast-control-fg\": \"string\",\n  \"toast-control-info-fg\": \"string\",\n  \"tooltip-fg\": \"string\",\n  \"tooltip-bg\": \"string\",\n  \"tooltip-icon\": \"string\",\n  \"tooltip-close-button-fg\": \"string\",\n  \"tooltip-close-button-hover-fg\": \"string\",\n  \"tooltip-close-button-hover-bg\": \"string\",\n  \"tooltip-popup-header-fg\": \"string\",\n  \"tooltip-popup-header-bg\": \"string\",\n  \"modal-bg\": \"string\",\n  \"modal-backdrop\": \"string\",\n  \"modal-border\": \"string\",\n  \"modal-border-dark\": \"string\",\n  \"modal-border-hover\": \"string\",\n  \"modal-shadow-inner\": \"string\",\n  \"modal-shadow-outer\": \"string\",\n  \"modal-close-button-fg\": \"string\",\n  \"modal-backdrop-close-button-fg\": \"string\",\n  \"modal-backdrop-close-button-hover-fg\": \"string\",\n  \"popup-bg\": \"string\",\n  \"popup-shadow-inner\": \"string\",\n  \"popup-shadow-outer\": \"string\",\n  \"popup-close-button-fg\": \"string\",\n  \"prompt-fg\": \"string\",\n  \"progress-bar-fg\": \"string\",\n  \"progress-bar-error-fg\": \"string\",\n  \"progress-bar-bg\": \"string\",\n  \"link\": \"string\",\n  \"link-hover\": \"string\",\n  \"hover\": \"string\",\n  \"hover-light\": \"string\",\n  \"cell-editor-fg\": \"string\",\n  \"cell-editor-bg\": \"string\",\n  \"cursor\": \"string\",\n  \"cursor-inactive\": \"string\",\n  \"cursor-readonly\": \"string\",\n  \"table-header-fg\": \"string\",\n  \"table-header-selected-fg\": \"string\",\n  \"table-header-bg\": \"string\",\n  \"table-header-selected-bg\": \"string\",\n  \"table-header-border\": \"string\",\n  \"table-header-border-dark\": \"string\",\n  \"table-body-bg\": \"string\",\n  \"table-body-border\": \"string\",\n  \"table-add-new-bg\": \"string\",\n  \"table-scroll-shadow\": \"string\",\n  \"table-frozen-columns-border\": \"string\",\n  \"table-drag-drop-indicator\": \"string\",\n  \"table-drag-drop-shadow\": \"string\",\n  \"card-compact-widget-bg\": \"string\",\n  \"card-compact-record-bg\": \"string\",\n  \"card-blocks-bg\": \"string\",\n  \"card-form-label\": \"string\",\n  \"card-compact-label\": \"string\",\n  \"card-blocks-label\": \"string\",\n  \"card-form-border\": \"string\",\n  \"card-compact-border\": \"string\",\n  \"card-editing-layout-bg\": \"string\",\n  \"card-editing-layout-border\": \"string\",\n  \"card-list-form-border\": \"string\",\n  \"card-list-blocks-border\": \"string\",\n  \"selection\": \"string\",\n  \"selection-darker\": \"string\",\n  \"selection-darkest\": \"string\",\n  \"selection-opaque-fg\": \"string\",\n  \"selection-opaque-bg\": \"string\",\n  \"selection-opaque-dark-bg\": \"string\",\n  \"selection-header\": \"string\",\n  \"widget-bg\": \"string\",\n  \"widget-border\": \"string\",\n  \"widget-active-border\": \"string\",\n  \"widget-inactive-stripes-light\": \"string\",\n  \"widget-inactive-stripes-dark\": \"string\",\n  \"pinned-doc-footer-bg\": \"string\",\n  \"pinned-doc-border\": \"string\",\n  \"pinned-doc-border-hover\": \"string\",\n  \"pinned-doc-editor-bg\": \"string\",\n  \"raw-data-table-border\": \"string\",\n  \"raw-data-table-border-hover\": \"string\",\n  \"control-fg\": \"string\",\n  \"control-primary-fg\": \"string\",\n  \"control-primary-bg\": \"string\",\n  \"control-secondary-fg\": \"string\",\n  \"control-hover-fg\": \"string\",\n  \"control-primary-hover-bg\": \"string\",\n  \"control-secondary-hover-fg\": \"string\",\n  \"control-secondary-hover-bg\": \"string\",\n  \"control-disabled-fg\": \"string\",\n  \"control-disabled-bg\": \"string\",\n  \"control-primary-disabled\": \"string\",\n  \"control-border\": \"string\",\n  \"checkbox-bg\": \"string\",\n  \"checkbox-disabled-bg\": \"string\",\n  \"checkbox-border\": \"string\",\n  \"checkbox-border-hover\": \"string\",\n  \"move-docs-selected-fg\": \"string\",\n  \"move-docs-selected-bg\": \"string\",\n  \"move-docs-disabled-bg\": \"string\",\n  \"filter-bar-button-saved-fg\": \"string\",\n  \"filter-bar-button-saved-bg\": \"string\",\n  \"filter-bar-button-saved-hover-bg\": \"string\",\n  \"icon-disabled\": \"string\",\n  \"icon-error\": \"string\",\n  \"icon-button-fg\": \"string\",\n  \"icon-button-primary-bg\": \"string\",\n  \"icon-button-primary-hover-bg\": \"string\",\n  \"icon-button-secondary-bg\": \"string\",\n  \"icon-button-secondary-hover-bg\": \"string\",\n  \"left-panel-page-hover-bg\": \"string\",\n  \"left-panel-active-page-fg\": \"string\",\n  \"left-panel-active-page-bg\": \"string\",\n  \"left-panel-disabled-page-fg\": \"string\",\n  \"left-panel-page-options-fg\": \"string\",\n  \"left-panel-page-options-hover-fg\": \"string\",\n  \"left-panel-page-options-hover-bg\": \"string\",\n  \"left-panel-page-options-selected-hover-bg\": \"string\",\n  \"left-panel-page-initials-fg\": \"string\",\n  \"left-panel-page-initials-bg\": \"string\",\n  \"left-panel-page-emoji-fg\": \"string\",\n  \"left-panel-page-emoji-outline\": \"string\",\n  \"right-panel-tab-fg\": \"string\",\n  \"right-panel-tab-bg\": \"string\",\n  \"right-panel-tab-icon\": \"string\",\n  \"right-panel-tab-icon-hover\": \"string\",\n  \"right-panel-tab-hover-bg\": \"string\",\n  \"right-panel-tab-selected-fg\": \"string\",\n  \"right-panel-tab-selected-bg\": \"string\",\n  \"right-panel-tab-button-hover-bg\": \"string\",\n  \"right-panel-subtab-fg\": \"string\",\n  \"right-panel-subtab-selected-fg\": \"string\",\n  \"right-panel-subtab-selected-underline\": \"string\",\n  \"right-panel-subtab-hover-fg\": \"string\",\n  \"right-panel-subtab-hover-underline\": \"string\",\n  \"right-panel-disabled-overlay\": \"string\",\n  \"right-panel-toggle-button-enabled-fg\": \"string\",\n  \"right-panel-toggle-button-enabled-bg\": \"string\",\n  \"right-panel-toggle-button-enabled-hover-fg\": \"string\",\n  \"right-panel-toggle-button-disabled-fg\": \"string\",\n  \"right-panel-toggle-button-disabled-bg\": \"string\",\n  \"right-panel-field-settings-bg\": \"string\",\n  \"right-panel-field-settings-button-bg\": \"string\",\n  \"document-history-snapshot-fg\": \"string\",\n  \"document-history-snapshot-selected-fg\": \"string\",\n  \"document-history-snapshot-bg\": \"string\",\n  \"document-history-snapshot-selected-bg\": \"string\",\n  \"document-history-snapshot-border\": \"string\",\n  \"document-history-activity-text\": \"string\",\n  \"document-history-activity-text-light\": \"string\",\n  \"accent-icon\": \"string\",\n  \"accent-border\": \"string\",\n  \"accent-text\": \"string\",\n  \"input-fg\": \"string\",\n  \"input-bg\": \"string\",\n  \"input-disabled-fg\": \"string\",\n  \"input-disabled-bg\": \"string\",\n  \"input-placeholder-fg\": \"string\",\n  \"input-border\": \"string\",\n  \"input-valid\": \"string\",\n  \"input-invalid\": \"string\",\n  \"input-focus\": \"string\",\n  \"input-readonly-bg\": \"string\",\n  \"input-readonly-border\": \"string\",\n  \"choice-entry-bg\": \"string\",\n  \"choice-entry-border\": \"string\",\n  \"choice-entry-border-hover\": \"string\",\n  \"select-button-fg\": \"string\",\n  \"select-button-placeholder-fg\": \"string\",\n  \"select-button-disabled-fg\": \"string\",\n  \"select-button-bg\": \"string\",\n  \"select-button-border\": \"string\",\n  \"select-button-border-invalid\": \"string\",\n  \"menu-text\": \"string\",\n  \"menu-light-text\": \"string\",\n  \"menu-bg\": \"string\",\n  \"menu-subheader-fg\": \"string\",\n  \"menu-border\": \"string\",\n  \"menu-shadow\": \"string\",\n  \"menu-item-fg\": \"string\",\n  \"menu-item-selected-fg\": \"string\",\n  \"menu-item-selected-bg\": \"string\",\n  \"menu-item-disabled-fg\": \"string\",\n  \"menu-item-icon-fg\": \"string\",\n  \"menu-item-icon-selected-fg\": \"string\",\n  \"menu-item-link-fg\": \"string\",\n  \"menu-item-link-selected-fg\": \"string\",\n  \"menu-item-link-selected-bg\": \"string\",\n  \"autocomplete-match-text\": \"string\",\n  \"autocomplete-selected-match-text\": \"string\",\n  \"autocomplete-item-selected-bg\": \"string\",\n  \"search-border\": \"string\",\n  \"search-prev-next-button-fg\": \"string\",\n  \"search-prev-next-button-bg\": \"string\",\n  \"loader-fg\": \"string\",\n  \"loader-bg\": \"string\",\n  \"site-switcher-active-fg\": \"string\",\n  \"site-switcher-active-bg\": \"string\",\n  \"doc-menu-doc-options-fg\": \"string\",\n  \"doc-menu-doc-options-hover-fg\": \"string\",\n  \"doc-menu-doc-options-hover-bg\": \"string\",\n  \"shortcut-key-fg\": \"string\",\n  \"shortcut-key-primary-fg\": \"string\",\n  \"shortcut-key-secondary-fg\": \"string\",\n  \"shortcut-key-bg\": \"string\",\n  \"shortcut-key-border\": \"string\",\n  \"breadcrumbs-tag-fg\": \"string\",\n  \"breadcrumbs-tag-bg\": \"string\",\n  \"breadcrumbs-tag-alert-bg\": \"string\",\n  \"widget-picker-primary-bg\": \"string\",\n  \"widget-picker-secondary-bg\": \"string\",\n  \"widget-picker-item-fg\": \"string\",\n  \"widget-picker-item-selected-bg\": \"string\",\n  \"widget-picker-item-disabled-bg\": \"string\",\n  \"widget-picker-icon\": \"string\",\n  \"widget-picker-primary-icon\": \"string\",\n  \"widget-picker-summary-icon\": \"string\",\n  \"widget-picker-border\": \"string\",\n  \"widget-picker-shadow\": \"string\",\n  \"code-view-text\": \"string\",\n  \"code-view-keyword\": \"string\",\n  \"code-view-comment\": \"string\",\n  \"code-view-meta\": \"string\",\n  \"code-view-title\": \"string\",\n  \"code-view-params\": \"string\",\n  \"code-view-string\": \"string\",\n  \"code-view-number\": \"string\",\n  \"code-view-builtin\": \"string\",\n  \"code-view-literal\": \"string\",\n  \"importer-table-info-border\": \"string\",\n  \"importer-preview-border\": \"string\",\n  \"importer-skipped-table-overlay\": \"string\",\n  \"importer-match-icon\": \"string\",\n  \"importer-outside-bg\": \"string\",\n  \"importer-main-content-bg\": \"string\",\n  \"importer-active-file-bg\": \"string\",\n  \"importer-active-file-fg\": \"string\",\n  \"importer-inactive-file-bg\": \"string\",\n  \"importer-inactive-file-fg\": \"string\",\n  \"menu-toggle-fg\": \"string\",\n  \"menu-toggle-hover-fg\": \"string\",\n  \"menu-toggle-active-fg\": \"string\",\n  \"menu-toggle-bg\": \"string\",\n  \"menu-toggle-border\": \"string\",\n  \"info-button-fg\": \"string\",\n  \"info-button-hover-fg\": \"string\",\n  \"info-button-active-fg\": \"string\",\n  \"button-group-fg\": \"string\",\n  \"button-group-light-fg\": \"string\",\n  \"button-group-bg\": \"string\",\n  \"button-group-icon\": \"string\",\n  \"button-group-border\": \"string\",\n  \"button-group-border-hover\": \"string\",\n  \"button-group-selected-fg\": \"string\",\n  \"button-group-light-selected-fg\": \"string\",\n  \"button-group-selected-bg\": \"string\",\n  \"button-group-selected-border\": \"string\",\n  \"access-rules-table-header-fg\": \"string\",\n  \"access-rules-table-header-bg\": \"string\",\n  \"access-rules-table-body-fg\": \"string\",\n  \"access-rules-table-border\": \"string\",\n  \"access-rules-column-list-border\": \"string\",\n  \"access-rules-column-item-fg\": \"string\",\n  \"access-rules-column-item-bg\": \"string\",\n  \"access-rules-column-item-icon-fg\": \"string\",\n  \"access-rules-column-item-icon-hover-fg\": \"string\",\n  \"access-rules-column-item-icon-hover-bg\": \"string\",\n  \"access-rules-formula-editor-bg\": \"string\",\n  \"access-rules-formula-editor-border-hover\": \"string\",\n  \"access-rules-formula-editor-bg-disabled\": \"string\",\n  \"access-rules-formula-editor-focus\": \"string\",\n  \"cell-fg\": \"string\",\n  \"cell-bg\": \"string\",\n  \"cell-zebra-bg\": \"string\",\n  \"chart-fg\": \"string\",\n  \"chart-bg\": \"string\",\n  \"chart-legend-bg\": \"string\",\n  \"chart-x-axis\": \"string\",\n  \"chart-y-axis\": \"string\",\n  \"comments-popup-header-bg\": \"string\",\n  \"comments-popup-body-bg\": \"string\",\n  \"comments-popup-border\": \"string\",\n  \"comments-user-name-fg\": \"string\",\n  \"comments-panel-topic-bg\": \"string\",\n  \"comments-panel-topic-border\": \"string\",\n  \"comments-panel-resolved-topic-bg\": \"string\",\n  \"date-picker-selected-fg\": \"string\",\n  \"date-picker-selected-bg\": \"string\",\n  \"date-picker-selected-bg-hover\": \"string\",\n  \"date-picker-today-fg\": \"string\",\n  \"date-picker-today-bg\": \"string\",\n  \"date-picker-today-bg-hover\": \"string\",\n  \"date-picker-range-start-end-bg\": \"string\",\n  \"date-picker-range-start-end-bg-hover\": \"string\",\n  \"date-picker-range-bg\": \"string\",\n  \"date-picker-range-bg-hover\": \"string\",\n  \"tutorials-popup-border\": \"string\",\n  \"tutorials-popup-header-fg\": \"string\",\n  \"tutorials-popup-box-bg\": \"string\",\n  \"ace-editor-bg\": \"string\",\n  \"ace-autocomplete-primary-fg\": \"string\",\n  \"ace-autocomplete-secondary-fg\": \"string\",\n  \"ace-autocomplete-highlighted-fg\": \"string\",\n  \"ace-autocomplete-bg\": \"string\",\n  \"ace-autocomplete-border\": \"string\",\n  \"ace-autocomplete-link\": \"string\",\n  \"ace-autocomplete-link-highlighted\": \"string\",\n  \"ace-autocomplete-active-line-bg\": \"string\",\n  \"ace-autocomplete-line-border-hover\": \"string\",\n  \"ace-autocomplete-line-bg-hover\": \"string\",\n  \"color-select-fg\": \"string\",\n  \"color-select-bg\": \"string\",\n  \"color-select-shadow\": \"string\",\n  \"color-select-font-options-border\": \"string\",\n  \"color-select-font-option-fg\": \"string\",\n  \"color-select-font-option-bg\": \"string\",\n  \"color-select-font-option-bg-hover\": \"string\",\n  \"color-select-font-option-fg-selected\": \"string\",\n  \"color-select-font-option-bg-selected\": \"string\",\n  \"color-select-color-square-border\": \"string\",\n  \"color-select-color-square-border-empty\": \"string\",\n  \"color-select-input-fg\": \"string\",\n  \"color-select-input-bg\": \"string\",\n  \"color-select-input-border\": \"string\",\n  \"highlighted-code-block-bg\": \"string\",\n  \"highlighted-code-block-bg-disabled\": \"string\",\n  \"highlighted-code-fg\": \"string\",\n  \"highlighted-code-border\": \"string\",\n  \"highlighted-code-bg-disabled\": \"string\",\n  \"login-page-bg\": \"string\",\n  \"login-page-backdrop\": \"string\",\n  \"login-page-line\": \"string\",\n  \"formula-assistant-header-bg\": \"string\",\n  \"formula-assistant-border\": \"string\",\n  \"formula-assistant-preformatted-text-bg\": \"string\",\n});\n\nconst exportedTypeSuite: t.ITypeSuite = {\n  ThemePrefs,\n  ThemeAppearance,\n  ThemeNameOrColors,\n  ThemeName,\n  Theme,\n  ThemeColors,\n};\nexport default exportedTypeSuite;\n","import ThemePrefsTI from 'app/common/ThemePrefs-ti';\nimport {CheckerT, createCheckers} from 'ts-interface-checker';\n\nexport interface ThemePrefs {\n  appearance: ThemeAppearance;\n  syncWithOS: boolean;\n  colors: {\n    light: ThemeNameOrColors;\n    dark: ThemeNameOrColors;\n  }\n}\n\nexport type ThemeAppearance = 'light' | 'dark';\n\nexport type ThemeNameOrColors = ThemeName | ThemeColors;\n\nexport type ThemeName = 'GristLight' | 'GristDark';\n\nexport interface Theme {\n  appearance: ThemeAppearance;\n  colors: ThemeColors;\n}\n\nexport interface ThemeColors {\n  /* Text */\n  'text': string;\n  'text-light': string;\n  'text-dark': string;\n  'text-error': string;\n  'text-danger': string;\n  'text-disabled': string;\n\n  /* Page */\n  'page-bg': string;\n  'page-backdrop': string;\n\n  /* Page Panels */\n  'page-panels-main-panel-bg': string;\n  'page-panels-left-panel-bg': string;\n  'page-panels-right-panel-bg': string;\n  'page-panels-top-header-bg': string;\n  'page-panels-bottom-footer-bg': string;\n  'page-panels-border': string;\n  'page-panels-border-resizing': string;\n  'page-panels-side-panel-opener-fg': string;\n  'page-panels-side-panel-opener-active-fg': string;\n  'page-panels-side-panel-opener-active-bg': string;\n\n  /* Add New */\n  'add-new-circle-fg': string;\n  'add-new-circle-bg': string;\n  'add-new-circle-hover-bg': string;\n  'add-new-circle-small-fg': string;\n  'add-new-circle-small-bg': string;\n  'add-new-circle-small-hover-bg': string;\n\n  /* Top Bar */\n  'top-bar-button-primary-fg': string;\n  'top-bar-button-secondary-fg': string;\n  'top-bar-button-disabled-fg': string;\n  'top-bar-button-error-fg': string;\n\n  /* Notifications */\n  'notifications-panel-header-bg': string;\n  'notifications-panel-body-bg': string;\n  'notifications-panel-border': string;\n\n  /* Toasts */\n  'toast-text': string;\n  'toast-text-light': string;\n  'toast-bg': string;\n  'toast-memo-text': string;\n  'toast-memo-bg': string;\n  'toast-error-icon': string;\n  'toast-error-bg': string;\n  'toast-success-icon': string;\n  'toast-success-bg': string;\n  'toast-warning-icon': string;\n  'toast-warning-bg': string;\n  'toast-info-icon': string;\n  'toast-info-bg': string;\n  'toast-control-fg': string;\n  'toast-control-info-fg': string;\n\n  /* Tooltips */\n  'tooltip-fg': string;\n  'tooltip-bg': string;\n  'tooltip-icon': string;\n  'tooltip-close-button-fg': string;\n  'tooltip-close-button-hover-fg': string;\n  'tooltip-close-button-hover-bg': string;\n  'tooltip-popup-header-fg': string;\n  'tooltip-popup-header-bg': string;\n\n  /* Modals */\n  'modal-bg': string;\n  'modal-backdrop': string;\n  'modal-border': string;\n  'modal-border-dark': string;\n  'modal-border-hover': string;\n  'modal-shadow-inner': string;\n  'modal-shadow-outer': string;\n  'modal-close-button-fg': string;\n  'modal-backdrop-close-button-fg': string;\n  'modal-backdrop-close-button-hover-fg': string;\n\n  /* Popups */\n  'popup-bg': string;\n  'popup-shadow-inner': string;\n  'popup-shadow-outer': string;\n  'popup-close-button-fg': string;\n\n  /* Prompts */\n  'prompt-fg': string;\n\n  /* Progress Bars */\n  'progress-bar-fg': string;\n  'progress-bar-error-fg': string;\n  'progress-bar-bg': string;\n\n  /* Links */\n  'link': string;\n  'link-hover': string;\n\n  /* Hover */\n  'hover': string;\n  'hover-light': string;\n\n  /* Cell Editor */\n  'cell-editor-fg': string;\n  'cell-editor-bg': string;\n\n  /* Cursor */\n  'cursor': string;\n  'cursor-inactive': string;\n  'cursor-readonly': string;\n\n  /* Tables */\n  'table-header-fg': string;\n  'table-header-selected-fg': string;\n  'table-header-bg': string;\n  'table-header-selected-bg': string;\n  'table-header-border': string;\n  'table-header-border-dark': string;\n  'table-body-bg': string;\n  'table-body-border': string;\n  'table-add-new-bg': string;\n  'table-scroll-shadow': string;\n  'table-frozen-columns-border': string;\n  'table-drag-drop-indicator': string;\n  'table-drag-drop-shadow': string;\n\n  /* Cards */\n  'card-compact-widget-bg': string;\n  'card-compact-record-bg': string;\n  'card-blocks-bg': string;\n  'card-form-label': string;\n  'card-compact-label': string;\n  'card-blocks-label': string;\n  'card-form-border': string;\n  'card-compact-border': string;\n  'card-editing-layout-bg': string;\n  'card-editing-layout-border': string;\n\n  /* Card Lists */\n  'card-list-form-border': string;\n  'card-list-blocks-border': string;\n\n  /* Selection */\n  'selection': string;\n  'selection-darker': string;\n  'selection-darkest': string;\n  'selection-opaque-fg': string;\n  'selection-opaque-bg': string;\n  'selection-opaque-dark-bg': string;\n  'selection-header': string;\n\n  /* Widgets */\n  'widget-bg': string;\n  'widget-border': string;\n  'widget-active-border': string;\n  'widget-inactive-stripes-light': string;\n  'widget-inactive-stripes-dark': string;\n\n  /* Pinned Docs */\n  'pinned-doc-footer-bg': string;\n  'pinned-doc-border': string;\n  'pinned-doc-border-hover': string;\n  'pinned-doc-editor-bg': string;\n\n  /* Raw Data */\n  'raw-data-table-border': string;\n  'raw-data-table-border-hover': string;\n\n  /* Controls */\n  'control-fg': string;\n  'control-primary-fg': string;\n  'control-primary-bg': string;\n  'control-secondary-fg': string;\n  'control-hover-fg': string;\n  'control-primary-hover-bg': string;\n  'control-secondary-hover-fg': string;\n  'control-secondary-hover-bg': string;\n  'control-disabled-fg': string;\n  'control-disabled-bg': string;\n  'control-primary-disabled': string;\n  'control-border': string;\n\n  /* Checkboxes */\n  'checkbox-bg': string;\n  'checkbox-disabled-bg': string;\n  'checkbox-border': string;\n  'checkbox-border-hover': string;\n\n  /* Move Docs */\n  'move-docs-selected-fg': string;\n  'move-docs-selected-bg': string;\n  'move-docs-disabled-bg': string;\n\n  /* Filter Bar */\n  'filter-bar-button-saved-fg': string;\n  'filter-bar-button-saved-bg': string;\n  'filter-bar-button-saved-hover-bg': string;\n\n  /* Icons */\n  'icon-disabled': string;\n  'icon-error': string;\n\n  /* Icon Buttons */\n  'icon-button-fg': string;\n  'icon-button-primary-bg': string;\n  'icon-button-primary-hover-bg': string;\n  'icon-button-secondary-bg': string;\n  'icon-button-secondary-hover-bg': string;\n\n  /* Left Panel */\n  'left-panel-page-hover-bg': string;\n  'left-panel-active-page-fg': string;\n  'left-panel-active-page-bg': string;\n  'left-panel-disabled-page-fg': string;\n  'left-panel-page-options-fg': string;\n  'left-panel-page-options-hover-fg': string;\n  'left-panel-page-options-hover-bg': string;\n  'left-panel-page-options-selected-hover-bg': string;\n  'left-panel-page-initials-fg': string;\n  'left-panel-page-initials-bg': string;\n  'left-panel-page-emoji-fg': string;\n  'left-panel-page-emoji-outline': string;\n\n  /* Right Panel */\n  'right-panel-tab-fg': string;\n  'right-panel-tab-bg': string;\n  'right-panel-tab-icon': string;\n  'right-panel-tab-icon-hover': string;\n  'right-panel-tab-hover-bg': string;\n  'right-panel-tab-selected-fg': string;\n  'right-panel-tab-selected-bg': string;\n  'right-panel-tab-button-hover-bg': string;\n  'right-panel-subtab-fg': string;\n  'right-panel-subtab-selected-fg': string;\n  'right-panel-subtab-selected-underline': string;\n  'right-panel-subtab-hover-fg': string;\n  'right-panel-subtab-hover-underline': string;\n  'right-panel-disabled-overlay': string;\n  'right-panel-toggle-button-enabled-fg': string;\n  'right-panel-toggle-button-enabled-bg': string;\n  'right-panel-toggle-button-enabled-hover-fg': string;\n  'right-panel-toggle-button-disabled-fg': string;\n  'right-panel-toggle-button-disabled-bg': string;\n  'right-panel-field-settings-bg': string;\n  'right-panel-field-settings-button-bg': string;\n\n  /* Document History */\n  'document-history-snapshot-fg': string;\n  'document-history-snapshot-selected-fg': string;\n  'document-history-snapshot-bg': string;\n  'document-history-snapshot-selected-bg': string;\n  'document-history-snapshot-border': string;\n  'document-history-activity-text': string;\n  'document-history-activity-text-light': string;\n\n  /* Accents */\n  'accent-icon': string;\n  'accent-border': string;\n  'accent-text': string;\n\n  /* Inputs */\n  'input-fg': string;\n  'input-bg': string;\n  'input-disabled-fg': string;\n  'input-disabled-bg': string;\n  'input-placeholder-fg': string;\n  'input-border': string;\n  'input-valid': string;\n  'input-invalid': string;\n  'input-focus': string;\n  'input-readonly-bg': string;\n  'input-readonly-border': string;\n\n  /* Choice Entry */\n  'choice-entry-bg': string;\n  'choice-entry-border': string;\n  'choice-entry-border-hover': string;\n\n  /* Select Buttons */\n  'select-button-fg': string;\n  'select-button-placeholder-fg': string;\n  'select-button-disabled-fg': string;\n  'select-button-bg': string;\n  'select-button-border': string;\n  'select-button-border-invalid': string;\n\n  /* Menus */\n  'menu-text': string;\n  'menu-light-text': string;\n  'menu-bg': string;\n  'menu-subheader-fg': string;\n  'menu-border': string;\n  'menu-shadow': string;\n\n  /* Menu Items */\n  'menu-item-fg': string;\n  'menu-item-selected-fg': string;\n  'menu-item-selected-bg': string;\n  'menu-item-disabled-fg': string;\n  'menu-item-icon-fg': string;\n  'menu-item-icon-selected-fg': string;\n  'menu-item-link-fg': string;\n  'menu-item-link-selected-fg': string;\n  'menu-item-link-selected-bg': string;\n\n  /* Autocomplete */\n  'autocomplete-match-text': string;\n  'autocomplete-selected-match-text': string;\n  'autocomplete-item-selected-bg': string;\n\n  /* Search */\n  'search-border': string;\n  'search-prev-next-button-fg': string;\n  'search-prev-next-button-bg': string;\n\n  /* Loaders */\n  'loader-fg': string;\n  'loader-bg': string;\n\n  /* Site Switcher */\n  'site-switcher-active-fg': string;\n  'site-switcher-active-bg': string;\n\n  /* Doc Menu */\n  'doc-menu-doc-options-fg': string;\n  'doc-menu-doc-options-hover-fg': string;\n  'doc-menu-doc-options-hover-bg': string;\n\n  /* Shortcut Keys */\n  'shortcut-key-fg': string;\n  'shortcut-key-primary-fg': string;\n  'shortcut-key-secondary-fg': string;\n  'shortcut-key-bg': string;\n  'shortcut-key-border': string;\n\n  /* Breadcrumbs */\n  'breadcrumbs-tag-fg': string;\n  'breadcrumbs-tag-bg': string;\n  'breadcrumbs-tag-alert-bg': string;\n\n  /* Page Widget Picker */\n  'widget-picker-primary-bg': string;\n  'widget-picker-secondary-bg': string;\n  'widget-picker-item-fg': string;\n  'widget-picker-item-selected-bg': string;\n  'widget-picker-item-disabled-bg': string;\n  'widget-picker-icon': string;\n  'widget-picker-primary-icon': string;\n  'widget-picker-summary-icon': string;\n  'widget-picker-border': string;\n  'widget-picker-shadow': string;\n\n  /* Code View */\n  'code-view-text': string;\n  'code-view-keyword': string;\n  'code-view-comment': string;\n  'code-view-meta': string;\n  'code-view-title': string;\n  'code-view-params': string;\n  'code-view-string': string;\n  'code-view-number': string;\n  'code-view-builtin': string;\n  'code-view-literal': string;\n\n  /* Importer */\n  'importer-table-info-border': string;\n  'importer-preview-border': string;\n  'importer-skipped-table-overlay': string;\n  'importer-match-icon': string;\n  'importer-outside-bg': string;\n  'importer-main-content-bg': string;\n  'importer-active-file-bg': string;\n  'importer-active-file-fg': string;\n  'importer-inactive-file-bg': string;\n  'importer-inactive-file-fg': string;\n\n  /* Menu Toggles */\n  'menu-toggle-fg': string;\n  'menu-toggle-hover-fg': string;\n  'menu-toggle-active-fg': string;\n  'menu-toggle-bg': string;\n  'menu-toggle-border': string;\n\n  /* Info Button */\n  'info-button-fg': string;\n  'info-button-hover-fg': string;\n  'info-button-active-fg': string;\n\n  /* Button Groups */\n  'button-group-fg': string;\n  'button-group-light-fg': string;\n  'button-group-bg': string;\n  'button-group-icon': string;\n  'button-group-border': string;\n  'button-group-border-hover': string;\n  'button-group-selected-fg': string;\n  'button-group-light-selected-fg': string;\n  'button-group-selected-bg': string;\n  'button-group-selected-border': string;\n\n  /* Access Rules */\n  'access-rules-table-header-fg': string;\n  'access-rules-table-header-bg': string;\n  'access-rules-table-body-fg': string;\n  'access-rules-table-border': string;\n  'access-rules-column-list-border': string;\n  'access-rules-column-item-fg': string;\n  'access-rules-column-item-bg': string;\n  'access-rules-column-item-icon-fg': string;\n  'access-rules-column-item-icon-hover-fg': string;\n  'access-rules-column-item-icon-hover-bg': string;\n  'access-rules-formula-editor-bg': string;\n  'access-rules-formula-editor-border-hover': string;\n  'access-rules-formula-editor-bg-disabled': string;\n  'access-rules-formula-editor-focus': string;\n\n  /* Cells */\n  'cell-fg': string;\n  'cell-bg': string;\n  'cell-zebra-bg': string;\n\n  /* Charts */\n  'chart-fg': string;\n  'chart-bg': string;\n  'chart-legend-bg': string;\n  'chart-x-axis': string;\n  'chart-y-axis': string;\n\n  /* Comments */\n  'comments-popup-header-bg': string;\n  'comments-popup-body-bg': string;\n  'comments-popup-border': string;\n  'comments-user-name-fg': string;\n  'comments-panel-topic-bg': string;\n  'comments-panel-topic-border': string;\n  'comments-panel-resolved-topic-bg': string;\n\n  /* Date Picker */\n  'date-picker-selected-fg': string;\n  'date-picker-selected-bg': string;\n  'date-picker-selected-bg-hover': string;\n  'date-picker-today-fg': string;\n  'date-picker-today-bg': string;\n  'date-picker-today-bg-hover': string;\n  'date-picker-range-start-end-bg': string;\n  'date-picker-range-start-end-bg-hover': string;\n  'date-picker-range-bg': string;\n  'date-picker-range-bg-hover': string;\n\n  /* Tutorials */\n  'tutorials-popup-border': string;\n  'tutorials-popup-header-fg': string;\n  'tutorials-popup-box-bg': string;\n\n  /* Ace */\n  'ace-editor-bg': string;\n  'ace-autocomplete-primary-fg': string;\n  'ace-autocomplete-secondary-fg': string;\n  'ace-autocomplete-highlighted-fg': string;\n  'ace-autocomplete-bg': string;\n  'ace-autocomplete-border': string;\n  'ace-autocomplete-link': string;\n  'ace-autocomplete-link-highlighted': string;\n  'ace-autocomplete-active-line-bg': string;\n  'ace-autocomplete-line-border-hover': string;\n  'ace-autocomplete-line-bg-hover': string;\n\n  /* Color Select */\n  'color-select-fg': string;\n  'color-select-bg': string;\n  'color-select-shadow': string;\n  'color-select-font-options-border': string;\n  'color-select-font-option-fg': string;\n  'color-select-font-option-bg': string;\n  'color-select-font-option-bg-hover': string;\n  'color-select-font-option-fg-selected': string;\n  'color-select-font-option-bg-selected': string;\n  'color-select-color-square-border': string;\n  'color-select-color-square-border-empty': string;\n  'color-select-input-fg': string;\n  'color-select-input-bg': string;\n  'color-select-input-border': string;\n\n  /* Highlighted Code */\n  'highlighted-code-block-bg': string;\n  'highlighted-code-block-bg-disabled': string;\n  'highlighted-code-fg': string;\n  'highlighted-code-border': string;\n  'highlighted-code-bg-disabled': string;\n\n  /* Login Page */\n  'login-page-bg': string;\n  'login-page-backdrop': string;\n  'login-page-line': string;\n\n  /* Formula Assistant */\n  'formula-assistant-header-bg': string;\n  'formula-assistant-border': string;\n  'formula-assistant-preformatted-text-bg': string;\n}\n\nexport const ThemePrefsChecker = createCheckers(ThemePrefsTI).ThemePrefs as CheckerT<ThemePrefs>;\nexport const ThemeAppearanceChecker = createCheckers(ThemePrefsTI).ThemeAppearance as CheckerT<ThemeAppearance>;\nexport const ThemeNameChecker = createCheckers(ThemePrefsTI).ThemeName as CheckerT<ThemeName>;\n\nexport function getDefaultThemePrefs(): ThemePrefs {\n  return {\n    appearance: 'light',\n    syncWithOS: false,\n    colors: {\n      light: 'GristLight',\n      dark: 'GristDark',\n    }\n  };\n}\n","import {BillingPage, BillingSubPage, BillingTask} from 'app/common/BillingAPI';\nimport {OpenDocMode} from 'app/common/DocListAPI';\nimport {EngineCode} from 'app/common/DocumentSettings';\nimport {encodeQueryParams, isAffirmative} from 'app/common/gutil';\nimport {LocalPlugin} from 'app/common/plugin';\nimport {StringUnion} from 'app/common/StringUnion';\nimport {TelemetryLevel} from 'app/common/Telemetry';\nimport {ThemeAppearance, ThemeAppearanceChecker, ThemeName, ThemeNameChecker} from 'app/common/ThemePrefs';\nimport {getGristConfig} from 'app/common/urlUtils';\nimport {Document} from 'app/common/UserAPI';\nimport {IAttachedCustomWidget} from \"app/common/widgetTypes\";\nimport {UIRowId} from 'app/plugin/GristAPI';\nimport clone = require('lodash/clone');\nimport pickBy = require('lodash/pickBy');\n\nexport const SpecialDocPage = StringUnion('code', 'acl', 'data', 'GristDocTour', 'settings', 'webhook');\ntype SpecialDocPage = typeof SpecialDocPage.type;\nexport type IDocPage = number | SpecialDocPage;\n\nexport type ViewDocPage = number | 'data';\n/**\n * ViewDocPage is a page that shows table data (either normal or raw data view).\n */\nexport function isViewDocPage(docPage: IDocPage): docPage is ViewDocPage {\n  return typeof docPage === 'number' || docPage === 'data';\n}\n\n// What page to show in the user's home area. Defaults to 'workspace' if a workspace is set, and\n// to 'all' otherwise.\nexport const HomePage = StringUnion('all', 'workspace', 'templates', 'trash');\nexport type IHomePage = typeof HomePage.type;\n\n// TODO: Remove 'user' and 'info', since those pages are no longer part of any flow.\nexport const WelcomePage = StringUnion('teams', 'signup', 'verify', 'select-account');\nexport type WelcomePage = typeof WelcomePage.type;\n\nexport const AccountPage = StringUnion('account');\nexport type AccountPage = typeof AccountPage.type;\n\nexport const ActivationPage = StringUnion('activation');\nexport type ActivationPage = typeof ActivationPage.type;\n\nexport const LoginPage = StringUnion('signup', 'login', 'verified', 'forgot-password');\nexport type LoginPage = typeof LoginPage.type;\n\nexport const SupportGristPage = StringUnion('support-grist');\nexport type SupportGristPage = typeof SupportGristPage.type;\n\n// Overall UI style.  \"full\" is normal, \"singlePage\" is a single page focused, panels hidden experience.\nexport const InterfaceStyle = StringUnion('singlePage', 'full');\nexport type InterfaceStyle = typeof InterfaceStyle.type;\n\n// Default subdomain for home api service if not otherwise specified.\nexport const DEFAULT_HOME_SUBDOMAIN = 'api';\n\n// This is the minimum length a urlId may have if it is chosen\n// as a prefix of the docId.\nexport const MIN_URLID_PREFIX_LENGTH = 12;\n\n/**\n * Special ways to open a document, based on what the user intends to do.\n *   - view: Open document in read-only mode (even if user has edit rights)\n *   - fork: Open document in fork-ready mode.  This means that while edits are\n *           permitted, those edits should go to a copy of the document rather than\n *           the original.\n */\n\nexport const commonUrls = {\n  help: getHelpCenterUrl(),\n  helpAccessRules: \"https://support.getgrist.com/access-rules\",\n  helpAssistantDataUse: \"https://support.getgrist.com/ai-assistant/#data-use-policy\",\n  helpColRefs: \"https://support.getgrist.com/col-refs\",\n  helpConditionalFormatting: \"https://support.getgrist.com/conditional-formatting\",\n  helpFilterButtons: \"https://support.getgrist.com/search-sort-filter/#filter-buttons\",\n  helpLinkingWidgets: \"https://support.getgrist.com/linking-widgets\",\n  helpRawData: \"https://support.getgrist.com/raw-data\",\n  helpUnderstandingReferenceColumns: \"https://support.getgrist.com/col-refs/#understanding-reference-columns\",\n  helpTriggerFormulas: \"https://support.getgrist.com/formulas/#trigger-formulas\",\n  helpTryingOutChanges: \"https://support.getgrist.com/copying-docs/#trying-out-changes\",\n  helpCustomWidgets: \"https://support.getgrist.com/widget-custom\",\n  helpTelemetryLimited: \"https://support.getgrist.com/telemetry-limited\",\n  plans: \"https://www.getgrist.com/pricing\",\n  sproutsProgram: \"https://www.getgrist.com/sprouts-program\",\n  contact: \"https://www.getgrist.com/contact\",\n  templates: 'https://www.getgrist.com/templates',\n  community: 'https://community.getgrist.com',\n  functions: 'https://support.getgrist.com/functions',\n  formulaSheet: 'https://support.getgrist.com/formula-cheat-sheet',\n\n  basicTutorial: 'https://templates.getgrist.com/woXtXUBmiN5T/Grist-Basics',\n  basicTutorialImage: 'https://www.getgrist.com/wp-content/uploads/2021/08/lightweight-crm.png',\n  gristLabsCustomWidgets: 'https://gristlabs.github.io/grist-widget/',\n  gristLabsWidgetRepository: 'https://github.com/gristlabs/grist-widget/releases/download/latest/manifest.json',\n  githubGristCore: 'https://github.com/gristlabs/grist-core',\n  githubSponsorGristLabs: 'https://github.com/sponsors/gristlabs',\n};\n\n/**\n * Values representable in a URL. The current state is available as urlState().state observable\n * in client. Updates to this state are expected by functions such as makeUrl() and setLinkUrl().\n */\nexport interface IGristUrlState {\n  org?: string;\n  homePage?: IHomePage;\n  ws?: number;\n  doc?: string;\n  slug?: string;       // if present, this is based on the document title, and is not a stable id\n  mode?: OpenDocMode;\n  fork?: UrlIdParts;\n  docPage?: IDocPage;\n  account?: AccountPage;\n  billing?: BillingPage;\n  activation?: ActivationPage;\n  login?: LoginPage;\n  welcome?: WelcomePage;\n  supportGrist?: SupportGristPage;\n  welcomeTour?: boolean;\n  docTour?: boolean;\n  manageUsers?: boolean;\n  createTeam?: boolean;\n  params?: {\n    billingPlan?: string;\n    planType?: string;\n    billingTask?: BillingTask;\n    embed?: boolean;\n    state?: string;\n    style?: InterfaceStyle;\n    compare?: string;\n    linkParameters?: Record<string, string>;  // Parameters to pass as 'user.Link' in granular ACLs.\n                                              // Encoded in URL as query params with extra '_' suffix.\n    themeSyncWithOs?: boolean;\n    themeAppearance?: ThemeAppearance;\n    themeName?: ThemeName;\n  };\n  hash?: HashLink;   // if present, this specifies an individual row within a section of a page.\n}\n\n// Subset of GristLoadConfig used by getOrgUrlInfo(), which affects the interpretation of the\n// current URL.\nexport interface OrgUrlOptions {\n  // The org associated with the current URL.\n  org?: string;\n\n  // Base domain for constructing new URLs, should start with \".\" and not include port, e.g.\n  // \".getgrist.com\". It should be unset for localhost operation and in single-org mode.\n  baseDomain?: string;\n\n  // In single-org mode, this is the single well-known org.\n  singleOrg?: string;\n\n  // Base URL used for accessing plugin material.\n  pluginUrl?: string;\n\n  // If set, org is expected to be encoded in the path, not domain.\n  pathOnly?: boolean;\n}\n\n// Result of getOrgUrlInfo().\nexport interface OrgUrlInfo {\n  hostname?: string;      // If hostname should be changed to access the requested org.\n  orgInPath?: string;     // If /o/{orgInPath} should be used to access the requested org.\n}\n\n/**\n * Given host (optionally with port), baseDomain, and pluginUrl, determine whether to interpret host\n * as a custom domain, a native domain, or a plugin domain.\n */\nexport function getHostType(host: string, options: {\n  baseDomain?: string, pluginUrl?: string\n}): 'native' | 'custom' | 'plugin' {\n\n  if (options.pluginUrl) {\n    const url = new URL(options.pluginUrl);\n    if (url.host.toLowerCase() === host.toLowerCase()) {\n      return 'plugin';\n    }\n  }\n\n  const hostname = host.split(\":\")[0];\n  if (!options.baseDomain) { return 'native'; }\n  if (hostname !== 'localhost' && !hostname.endsWith(options.baseDomain)) { return 'custom'; }\n  return 'native';\n}\n\nexport function getOrgUrlInfo(newOrg: string, currentHost: string, options: OrgUrlOptions): OrgUrlInfo {\n  if (newOrg === options.singleOrg) {\n    return {};\n  }\n  if (options.pathOnly) {\n    return {orgInPath: newOrg};\n  }\n  const hostType = getHostType(currentHost, options);\n  if (hostType !== 'plugin') {\n    const hostname = currentHost.split(\":\")[0];\n    if (!options.baseDomain || hostname === 'localhost') {\n      return {orgInPath: newOrg};\n    }\n  }\n  if (newOrg === options.org && hostType !== 'native') {\n    return {};\n  }\n  return {hostname: newOrg + options.baseDomain};\n}\n\n/**\n * The actual serialization of a url state into a URL. The URL has the form\n *    <org-base>/\n *    <org-base>/ws/<ws>/\n *    <org-base>/doc/<doc>[/p/<docPage>]\n *\n * where <org-base> depends on whether subdomains are in use, e.g.\n *    <org>.getgrist.com\n *    localhost:8080/o/<org>\n */\nexport function encodeUrl(gristConfig: Partial<GristLoadConfig>,\n                          state: IGristUrlState, baseLocation: Location | URL,\n                          options: {\n                            // make an api url - warning: just barely works, and\n                            // only for documents\n                            api?: boolean,\n                            tweaks?: UrlTweaks,\n                          } = {}): string {\n  const url = new URL(baseLocation.href);\n  const parts = ['/'];\n\n  if (state.org) {\n    // We figure out where to stick the org using the gristConfig and the current host.\n    const {hostname, orgInPath} = getOrgUrlInfo(state.org, baseLocation.host, gristConfig);\n    if (hostname) {\n      url.hostname = hostname;\n    }\n    if (orgInPath) {\n      parts.push(`o/${orgInPath}/`);\n    }\n  }\n\n  if (options.api) {\n    parts.push(`api/`);\n  }\n  if (state.ws) { parts.push(`ws/${state.ws}/`); }\n  if (state.doc) {\n    if (options.api) {\n      parts.push(`docs/${encodeURIComponent(state.doc)}`);\n    } else if (state.slug) {\n      parts.push(`${encodeURIComponent(state.doc)}/${encodeURIComponent(state.slug)}`);\n    } else {\n      parts.push(`doc/${encodeURIComponent(state.doc)}`);\n    }\n    if (state.mode && OpenDocMode.guard(state.mode)) {\n      parts.push(`/m/${state.mode}`);\n    }\n    if (state.docPage) {\n      parts.push(`/p/${state.docPage}`);\n    }\n  } else if (state.homePage === 'trash' || state.homePage === 'templates') {\n    parts.push(`p/${state.homePage}`);\n  }\n\n  if (state.account) {\n    parts.push(state.account === 'account' ? 'account' : `account/${state.account}`);\n  }\n\n  if (state.billing) {\n    parts.push(state.billing === 'billing' ? 'billing' : `billing/${state.billing}`);\n  }\n\n  if (state.activation) { parts.push(state.activation); }\n\n  if (state.login) { parts.push(state.login); }\n\n  if (state.welcome) {\n    parts.push(`welcome/${state.welcome}`);\n  }\n\n  if (state.supportGrist) { parts.push(state.supportGrist); }\n\n  const queryParams = pickBy(state.params, (v, k) => k !== 'linkParameters') as {[key: string]: string};\n  for (const [k, v] of Object.entries(state.params?.linkParameters || {})) {\n    queryParams[`${k}_`] = v;\n  }\n  const hashParts: string[] = [];\n  if (state.hash && (state.hash.rowId || state.hash.popup)) {\n    const hash = state.hash;\n    hashParts.push(state.hash?.popup ? 'a2' : `a1`);\n    for (const key of ['sectionId', 'rowId', 'colRef'] as Array<keyof HashLink>) {\n      const partValue = hash[key];\n      if (partValue) {\n        const partKey = key === 'rowId' && state.hash?.rickRow ? 'rr' : key[0];\n        hashParts.push(`${partKey}${partValue}`);\n      }\n    }\n  }\n  const queryStr = encodeQueryParams(queryParams);\n\n  url.pathname = parts.join('');\n  url.search = queryStr;\n\n  if (state.hash) {\n    // Project tests use hashes, so only set hash if there is an anchor.\n    url.hash = hashParts.join('.');\n  } else if (state.welcomeTour) {\n    url.hash = 'repeat-welcome-tour';\n  } else if (state.docTour) {\n    url.hash = 'repeat-doc-tour';\n  } else if (state.manageUsers) {\n    url.hash = 'manage-users';\n  } else if (state.createTeam) {\n    url.hash = 'create-team';\n  } else {\n    url.hash = '';\n  }\n  options.tweaks?.postEncode?.({\n    url,\n    parts,\n    state,\n    baseLocation,\n  });\n  return url.href;\n}\n\n/**\n * Parse a URL location into an IGristUrlState object. See encodeUrl() documentation.\n */\nexport function decodeUrl(gristConfig: Partial<GristLoadConfig>, location: Location | URL, options?: {\n  tweaks?: UrlTweaks,\n}): IGristUrlState {\n  location = new URL(location.href);  // Make sure location is a URL.\n  options?.tweaks?.preDecode?.({ url: location });\n  const parts = location.pathname.slice(1).split('/');\n  const map = new Map<string, string>();\n  for (let i = 0; i < parts.length; i += 2) {\n    map.set(parts[i], decodeURIComponent(parts[i + 1]));\n  }\n  // When the urlId is a prefix of the docId, documents are identified\n  // as \"<urlId>/slug\" instead of \"doc/<urlId>\".  We can detect that because\n  // the minimum length of a urlId prefix is longer than the maximum length\n  // of any of the valid keys in the url.\n  for (const key of map.keys()) {\n    if (key.length >= MIN_URLID_PREFIX_LENGTH && !LoginPage.guard(key) && !SupportGristPage.guard(key)) {\n      map.set('doc', key);\n      map.set('slug', map.get(key)!);\n      map.delete(key);\n      break;\n    }\n  }\n\n  const state: IGristUrlState = {};\n  const subdomain = parseSubdomain(location.host);\n  if (gristConfig.org || gristConfig.singleOrg) {\n    state.org = gristConfig.org || gristConfig.singleOrg;\n  } else if (!gristConfig.pathOnly && subdomain.org) {\n    state.org = subdomain.org;\n  }\n  const sp = new URLSearchParams(location.search);\n  if (location.search) { state.params = {}; }\n  if (map.has('o')) { state.org = map.get('o'); }\n  if (map.has('ws')) { state.ws = parseInt(map.get('ws')!, 10); }\n  if (map.has('doc')) {\n    state.doc = map.get('doc');\n    const fork = parseUrlId(map.get('doc')!);\n    if (fork.forkId) { state.fork = fork; }\n    if (map.has('slug')) { state.slug = map.get('slug'); }\n    if (map.has('p')) { state.docPage = parseDocPage(map.get('p')!); }\n  } else {\n    if (map.has('p')) {\n      const p = map.get('p')!;\n      state.homePage = HomePage.parse(p);\n    }\n  }\n  if (map.has('m')) { state.mode = OpenDocMode.parse(map.get('m')); }\n  if (map.has('account')) { state.account = AccountPage.parse(map.get('account')) || 'account'; }\n  if (map.has('billing')) { state.billing = BillingSubPage.parse(map.get('billing')) || 'billing'; }\n  if (map.has('activation')) {\n    state.activation = ActivationPage.parse(map.get('activation')) || 'activation';\n  }\n  if (map.has('welcome')) { state.welcome = WelcomePage.parse(map.get('welcome')); }\n  if (map.has('support-grist')) {\n    state.supportGrist = SupportGristPage.parse(map.get('support-grist')) || 'support-grist';\n  }\n  if (sp.has('planType')) { state.params!.planType = sp.get('planType')!; }\n  if (sp.has('billingPlan')) { state.params!.billingPlan = sp.get('billingPlan')!; }\n  if (sp.has('billingTask')) {\n    state.params!.billingTask = BillingTask.parse(sp.get('billingTask'));\n  }\n\n  if (map.has('signup')) {\n    state.login = 'signup';\n  } else if (map.has('login')) {\n    state.login = 'login';\n  } else if (map.has('verified')) {\n    state.login = 'verified';\n  } else if (map.has('forgot-password')) {\n    state.login = 'forgot-password';\n  }\n  if (sp.has('state')) {\n    state.params!.state = sp.get('state')!;\n  }\n\n  if (sp.has('style')) {\n    let style = sp.get('style');\n    if (style === 'light') {\n      style = 'singlePage';\n    }\n\n    state.params!.style = InterfaceStyle.parse(style);\n  }\n  if (sp.has('embed')) {\n    const embed = state.params!.embed = isAffirmative(sp.get('embed'));\n    // Turn view mode on if no mode has been specified, and not a fork.\n    if (embed && !state.mode && !state.fork) { state.mode = 'view'; }\n    // Turn on single page style if no style has been specified.\n    if (embed && !state.params!.style) { state.params!.style = 'singlePage'; }\n  }\n\n  // Theme overrides\n  if (sp.has('themeSyncWithOs')) {\n    state.params!.themeSyncWithOs = isAffirmative(sp.get('themeSyncWithOs'));\n  }\n\n  if (sp.has('themeAppearance')) {\n    const appearance = sp.get('themeAppearance');\n    if (ThemeAppearanceChecker.strictTest(appearance)) {\n      state.params!.themeAppearance = appearance;\n    }\n  }\n\n  if (sp.has('themeName')) {\n    const themeName = sp.get('themeName');\n    if (ThemeNameChecker.strictTest(themeName)) {\n      state.params!.themeName = themeName;\n    }\n  }\n\n  if (sp.has('compare')) {\n    state.params!.compare = sp.get('compare')!;\n  }\n  for (const [k, v] of sp.entries()) {\n    if (k.endsWith('_')) {\n      if (!state.params!.linkParameters) { state.params!.linkParameters = {}; }\n      state.params!.linkParameters[k.slice(0, k.length - 1)] = v;\n    }\n  }\n  if (location.hash) {\n    const hash = location.hash;\n    const hashParts = hash.split('.');\n    const hashMap = new Map<string, string>();\n    for (const part of hashParts) {\n      if (part.startsWith('rr')) {\n        hashMap.set(part.slice(0, 2), part.slice(2));\n      } else {\n        hashMap.set(part.slice(0, 1), part.slice(1));\n      }\n    }\n    if (hashMap.has('#') && ['a1', 'a2'].includes(hashMap.get('#') || '')) {\n      const link: HashLink = {};\n      const keys = [\n        'sectionId',\n        'rowId',\n        'colRef',\n      ] as Array<Exclude<keyof HashLink, 'popup' | 'rickRow'>>;\n      for (const key of keys) {\n        let ch: string;\n        if (key === 'rowId' && hashMap.has('rr')) {\n          ch = 'rr';\n          link.rickRow = true;\n        } else {\n          ch = key.substr(0, 1);\n          if (!hashMap.has(ch)) { continue; }\n        }\n        const value = hashMap.get(ch);\n        if (key === 'rowId' && value === 'new') {\n          link[key] = 'new';\n        } else {\n          link[key] = parseInt(value!, 10);\n        }\n      }\n      if (hashMap.get('#') === 'a2') {\n        link.popup =  true;\n      }\n      state.hash = link;\n    }\n    state.welcomeTour = hashMap.get('#') === 'repeat-welcome-tour';\n    state.docTour = hashMap.get('#') === 'repeat-doc-tour';\n    state.manageUsers = hashMap.get('#') === 'manage-users';\n    state.createTeam = hashMap.get('#') === 'create-team';\n  }\n  return state;\n}\n\n// Returns a function suitable for user with makeUrl/setHref/etc, which updates aclAsUser*\n// linkParameters in the current state, unsetting them if email is null. Optional extraState\n// allows setting other properties (e.g. 'docPage') at the same time.\nexport function userOverrideParams(email: string|null, extraState?: IGristUrlState) {\n  return function(prevState: IGristUrlState): IGristUrlState {\n    const combined = {...prevState, ...extraState};\n    const linkParameters = clone(combined.params?.linkParameters) || {};\n    if (email) {\n      linkParameters.aclAsUser = email;\n    } else {\n      delete linkParameters.aclAsUser;\n    }\n    delete linkParameters.aclAsUserId;\n    return {...combined, params: {...combined.params, linkParameters}};\n  };\n}\n\n/**\n * parseDocPage is a noop for special pages, otherwise parse to integer\n */\nfunction parseDocPage(p: string): IDocPage {\n  if (SpecialDocPage.guard(p)) {\n    return p;\n  }\n  return parseInt(p, 10);\n}\n\n/**\n * Parses the URL like \"foo.bar.baz\" into the pair {org: \"foo\", base: \".bar.baz\"}.\n * Port is allowed and included into base.\n *\n * The \"base\" part is required to have at least two periods.  The \"org\" part must pass\n * the subdomainRegex test.\n *\n * If there's no way to parse the URL into such a pair, then an empty object is returned.\n */\nexport function parseSubdomain(host: string|undefined): {org?: string, base?: string} {\n  if (!host) { return {}; }\n  const match = /^([^.]+)(\\..+\\..+)$/.exec(host.toLowerCase());\n  if (match) {\n    const org = match[1];\n    const base = match[2];\n    if (subdomainRegex.exec(org)) {\n      return {org, base};\n    }\n  }\n  // Host has nowhere to put a subdomain.\n  return {};\n}\n\n// Allowed localhost addresses.\nconst localhostRegex = /^localhost(?::(\\d+))?$/i;\n\n/**\n * Like parseSubdomain, but throws an error if neither of these cases apply:\n *   - host can be parsed into a valid subdomain and a valid base domain.\n *   - host is localhost:NNNN\n * An empty object is only returned when host is localhost:NNNN.\n */\nexport function parseSubdomainStrictly(host: string|undefined): {org?: string, base?: string} {\n  if (!host) { throw new Error('host not known'); }\n  const result = parseSubdomain(host);\n  if (result.org) { return result; }\n  if (!host.match(localhostRegex)) {\n    throw new Error(`host not understood: ${host}`);\n  }\n  // Host is localhost[:NNNN], no org available.\n  return {};\n}\n\n/**\n * These settings get sent to the client along with the loaded page. At the minimum, the browser\n * needs to know the URL of the home API server (e.g. api.getgrist.com).\n */\nexport interface GristLoadConfig {\n  // URL of the Home API server for the browser client to use.\n  homeUrl: string|null;\n\n  // When loading /doc/{docId}, we include the id used to assign the document (this is the docId).\n  assignmentId?: string;\n\n  // Org or \"subdomain\". When present, this overrides org information from the hostname. We rely\n  // on this for custom domains, but set it generally for all pages.\n  org?: string;\n\n  // Base domain for constructing new URLs, should start with \".\" and not include port, e.g.\n  // \".getgrist.com\". It should be unset for localhost operation and in single-org mode.\n  baseDomain?: string;\n\n  // In single-org mode, this is the single well-known org. Suppress any org selection UI.\n  singleOrg?: string;\n\n  // Url for support for the browser client to use.\n  helpCenterUrl?: string;\n\n  // When set, this directs the client to encode org information in path, not in domain.\n  pathOnly?: boolean;\n\n  // Type of error page to show. This is used for pages such as \"signed-out\" and \"not-found\",\n  // which don't include the full app.\n  errPage?: string;\n\n  // When errPage is a generic \"other-error\", this is the message to show.\n  errMessage?: string;\n\n  // URL for client to use for untrusted content.\n  pluginUrl?: string;\n\n  // Stripe API key for use on the client.\n  stripeAPIKey?: string;\n\n  // BeaconID for the support widget from HelpScout.\n  helpScoutBeaconId?: string;\n\n  // If set, enable anonymous sharing UI elements.\n  supportAnon?: boolean;\n\n  // If set, allow selection of the specified engines.\n  // TODO: move this list to a separate endpoint.\n  supportEngines?: EngineCode[];\n\n  // Max upload allowed for imports (except .grist files), in bytes; 0 or omitted for unlimited.\n  maxUploadSizeImport?: number;\n\n  // Max upload allowed for attachments, in bytes; 0 or omitted for unlimited.\n  maxUploadSizeAttachment?: number;\n\n  // Pre-fetched call to getDoc for the doc being loaded.\n  getDoc?: {[id: string]: Document};\n\n  // Pre-fetched call to getWorker for the doc being loaded.\n  getWorker?: {[id: string]: string|null};\n\n  // The timestamp when this gristConfig was generated.\n  timestampMs: number;\n\n  // Google Client Id, used in Google integration (ex: Google Drive Plugin)\n  googleClientId?: string;\n\n  // Max scope we can request for accessing files from Google Drive.\n  // Default used by Grist is https://www.googleapis.com/auth/drive.file:\n  // View and manage Google Drive files and folders that you have opened or created with this app.\n  // More on scopes: https://developers.google.com/identity/protocols/oauth2/scopes#drive\n  googleDriveScope?: string;\n\n  // List of registered plugins (used by HomePluginManager and DocPluginManager)\n  plugins?: LocalPlugin[];\n\n  // If custom widget list is available.\n  enableWidgetRepository?: boolean;\n\n  // Whether there is somewhere for survey data to go.\n  survey?: boolean;\n\n  // Google Tag Manager id. Currently only used to load tag manager for reporting new sign-ups.\n  tagManagerId?: string;\n\n  activation?: Activation;\n\n  // List of enabled features.\n  features?: IFeature[];\n\n  // String to append to the end of the HTML document.title\n  pageTitleSuffix?: string;\n\n  // If custom CSS should be included in the head of each page.\n  enableCustomCss?: boolean;\n\n  // Supported languages for the UI. By default only english (en) is supported.\n  supportedLngs?: readonly string[];\n\n  // Loaded namespaces for translations.\n  namespaces?: readonly string[];\n\n  // TODO: remove when comments will be released.\n  featureComments?: boolean;\n\n  // TODO: remove once released.\n  featureFormulaAssistant?: boolean;\n\n  permittedCustomWidgets?: IAttachedCustomWidget[];\n\n  // Used to determine which disclosure links should be provided to user of\n  // formula assistance.\n  assistantService?: 'OpenAI' | undefined;\n\n  // Email address of the support user.\n  supportEmail?: string;\n\n  // Current user locale, read from the user options;\n  userLocale?: string;\n\n  // Telemetry config.\n  telemetry?: TelemetryConfig;\n\n  // The Grist deployment type (e.g. core, enterprise).\n  deploymentType?: GristDeploymentType;\n\n  // The org containing public templates and tutorials.\n  templateOrg?: string|null;\n}\n\nexport const Features = StringUnion(\n  \"helpCenter\",\n  \"billing\",\n  \"templates\",\n  \"multiSite\",\n  \"multiAccounts\",\n  \"sendToDrive\",\n  \"tutorials\",\n);\nexport type IFeature = typeof Features.type;\n\nexport function isFeatureEnabled(feature: IFeature): boolean {\n  return (getGristConfig().features || []).includes(feature);\n}\n\nexport function getPageTitleSuffix(config?: GristLoadConfig) {\n  return config?.pageTitleSuffix ?? \" - Grist\";\n}\n\nexport interface TelemetryConfig {\n  telemetryLevel: TelemetryLevel;\n}\n\nexport const GristDeploymentTypes = StringUnion('saas', 'core', 'enterprise', 'electron', 'static');\nexport type GristDeploymentType = typeof GristDeploymentTypes.type;\n\n/**\n * For a packaged version of Grist that requires activation, this\n * summarizes the current state. Not applicable to grist-core.\n */\nexport interface ActivationState {\n  trial?: {                  // Present when installation has not yet been activated.\n    days: number;            // Max number of days allowed prior to activation.\n    expirationDate: string;  // ISO8601 date that Grist will get cranky.\n    daysLeft: number;        // Number of days left until Grist will get cranky.\n  }\n  needKey?: boolean;         // Set when Grist is cranky and demanding activation.\n  key?: {                    // Set when Grist is activated.\n    expirationDate?: string; // ISO8601 date that Grist will need reactivation.\n    daysLeft?: number;       // Number of days until Grist will need reactivation.\n  }\n}\n\nexport interface Activation extends ActivationState {\n  isManager: boolean;\n}\n\n// Acceptable org subdomains are alphanumeric (hyphen also allowed) and of\n// non-zero length.\nconst subdomainRegex = /^[-a-z0-9]+$/i;\n\nexport interface OrgParts {\n  subdomain: string|null;\n  orgFromHost: string|null;\n  orgFromPath: string|null;\n  pathRemainder: string;\n  mismatch: boolean;\n}\n\n/**\n * Returns true if code is running in client, false if running in server.\n */\nexport function isClient() {\n  return (typeof window !== 'undefined') && window && window.location && window.location.hostname;\n}\n\n/**\n * Returns a known org \"subdomain\" if Grist is configured in single-org mode\n * (GRIST_SINGLE_ORG=<org> on the server) or if the page includes an org in gristConfig.\n */\nexport function getKnownOrg(): string|null {\n  if (isClient()) {\n    const gristConfig: GristLoadConfig = (window as any).gristConfig;\n    return (gristConfig && gristConfig.singleOrg) || null;\n  } else {\n    return process.env.GRIST_SINGLE_ORG || null;\n  }\n}\n\nexport function getHelpCenterUrl(): string|null {\n  if(isClient()) {\n    const gristConfig: GristLoadConfig = (window as any).gristConfig;\n    return gristConfig && gristConfig.helpCenterUrl || null;\n  } else {\n    return process.env.GRIST_HELP_CENTER || null;\n  }\n}\n\n/**\n * Like getKnownOrg, but respects singleOrg/GRIST_SINGLE_ORG strictly.\n * The main difference in behavior would be for orgs with custom domains\n * served from a shared pool of servers, for which gristConfig.org would\n * be set, but not gristConfig.singleOrg.\n */\nexport function getSingleOrg(): string|null {\n  if (isClient()) {\n    const gristConfig: GristLoadConfig = (window as any).gristConfig;\n    return (gristConfig && gristConfig.singleOrg) || null;\n  } else {\n    return process.env.GRIST_SINGLE_ORG || null;\n  }\n}\n\n/**\n * Returns true if org must be encoded in path, not in domain.  Determined from\n * gristConfig on the client.  On the server, returns true if the host is\n * supplied and is 'localhost', or if GRIST_ORG_IN_PATH is set to 'true'.\n */\nexport function isOrgInPathOnly(host?: string): boolean {\n  if (isClient()) {\n    const gristConfig: GristLoadConfig = (window as any).gristConfig;\n    return (gristConfig && gristConfig.pathOnly) || false;\n  } else {\n    if (host && host.match(localhostRegex)) { return true; }\n    return (process.env.GRIST_ORG_IN_PATH === 'true');\n  }\n}\n\n// Extract an organization name from the host.  Returns null if an organization name\n// could not be recovered.  Organization name may be overridden by server configuration.\nexport function getOrgFromHost(reqHost: string): string|null {\n  const singleOrg = getKnownOrg();\n  if (singleOrg) { return singleOrg; }\n  if (isOrgInPathOnly()) { return null; }\n  return parseSubdomain(reqHost).org || null;\n}\n\n/**\n * Get any information about an organization that is embedded in the host name or the\n * path.\n * For example, on nasa.getgrist.com, orgFromHost and subdomain will be set to \"nasa\".\n * On localhost:8000/o/nasa, orgFromPath and subdomain will be set to \"nasa\".\n * On nasa.getgrist.com/o/nasa, orgFromHost, orgFromPath, and subdomain will all be \"nasa\".\n * On spam.getgrist.com/o/nasa, orgFromHost will be \"spam\", orgFromPath will be \"nasa\",\n * subdomain will be null, and mismatch will be true.\n */\nexport function extractOrgParts(reqHost: string|undefined, reqPath: string): OrgParts {\n  let orgFromHost: string|null = getKnownOrg();\n\n  if (!orgFromHost && reqHost) {\n    orgFromHost = getOrgFromHost(reqHost);\n    if (orgFromHost) {\n      // Some subdomains are shared, and do not reflect the name of an organization.\n      // See https://phab.getgrist.com/w/hosting/v1/urls/ for a list.\n      if (/^(api|v1-.*|doc-worker-.*)$/.test(orgFromHost)) {\n        orgFromHost = null;\n      }\n    }\n  }\n\n  const part = parseFirstUrlPart('o', reqPath);\n  if (part.value) {\n    const orgFromPath = part.value.toLowerCase();\n    const mismatch = Boolean(orgFromHost && orgFromPath && (orgFromHost !== orgFromPath));\n    const subdomain = mismatch ? null : orgFromPath;\n    return {orgFromHost, orgFromPath, pathRemainder: part.path, mismatch, subdomain};\n  }\n  return {orgFromHost, orgFromPath: null, pathRemainder: reqPath, mismatch: false, subdomain: orgFromHost};\n}\n\n/**\n * When a prefix is extracted from the path, the remainder of the path may be empty.\n * This method makes sure there is at least a \"/\".\n */\nexport function sanitizePathTail(path: string|undefined) {\n  path = path || '/';\n  return (path.startsWith('/') ? '' : '/') + path;\n}\n\n/*\n * If path starts with /{tag}/{value}{/rest}, returns value and the remaining path (/rest).\n * Otherwise, returns value of undefined and the path unchanged.\n * E.g. parseFirstUrlPart('o', '/o/foo/bar') returns {value: 'foo', path: '/bar'}.\n */\nexport function parseFirstUrlPart(tag: string, path: string): {value?: string, path: string} {\n  const match = path.match(/^\\/([^/?#]+)\\/([^/?#]+)(.*)$/);\n  if (match && match[1] === tag) {\n    return {value: match[2], path: sanitizePathTail(match[3])};\n  } else {\n    return {path};\n  }\n}\n\n/**\n * The internal structure of a UrlId.  There is no internal structure. unless the id is\n * for a fork, in which case the fork has a separate id, and a user id may also be\n * embedded to track ownership.\n */\nexport interface UrlIdParts {\n  trunkId: string;\n  forkId?: string;\n  forkUserId?: number;\n  snapshotId?: string;\n}\n\n// Parse a string of the form trunkId or trunkId~forkId or trunkId~forkId~forkUserId\n// or trunkId[....]~v=snapshotId\nexport function parseUrlId(urlId: string): UrlIdParts {\n  let snapshotId: string|undefined;\n  const parts = urlId.split('~');\n  const bareParts = parts.filter(part => !part.includes('='));\n  for (const part of parts) {\n    if (part.startsWith('v=')) {\n      snapshotId = decodeURIComponent(part.substr(2).replace(/_/g, '%'));\n    }\n  }\n  return {\n    trunkId: bareParts[0],\n    forkId: bareParts[1],\n    forkUserId: (bareParts[2] !== undefined) ? parseInt(bareParts[2], 10) : undefined,\n    snapshotId,\n  };\n}\n\n// Construct a string of the form trunkId or trunkId~forkId or trunkId~forkId~forkUserId\n// or trunkId[....]~v=snapshotId\nexport function buildUrlId(parts: UrlIdParts): string {\n  let token = [parts.trunkId, parts.forkId, parts.forkUserId].filter(x => x !== undefined).join('~');\n  if (parts.snapshotId) {\n    // This could be an S3 VersionId, about which AWS makes few promises.\n    // encodeURIComponent leaves untouched the following:\n    //   alphabetic; decimal; any of: - _ . ! ~ * ' ( )\n    // We further encode _.!~*'() to fit within existing limits on what characters\n    // may be in a docId (leaving just the hyphen, which is permitted).  The limits\n    // could be loosened, but without much benefit.\n    const codedSnapshotId = encodeURIComponent(parts.snapshotId)\n      .replace(/[_.!~*'()]/g, ch => `_${ch.charCodeAt(0).toString(16).toUpperCase()}`)\n      .replace(/%/g, '_');\n    token = `${token}~v=${codedSnapshotId}`;\n  }\n  return token;\n}\n\n/**\n * Values that may be encoded in a hash in a document url.\n */\nexport interface HashLink {\n  sectionId?: number;\n  rowId?: UIRowId;\n  colRef?: number;\n  popup?: boolean;\n  rickRow?: boolean;\n}\n\n// Check whether a urlId is a prefix of the docId, and adequately long to be\n// a candidate for use in prettier urls.\nfunction shouldIncludeSlug(doc: {id: string, urlId: string|null}): boolean {\n  if (!doc.urlId || doc.urlId.length < MIN_URLID_PREFIX_LENGTH) { return false; }\n  return doc.id.startsWith(doc.urlId);\n}\n\n// Convert the name of a document into a slug.  Only alphanumerics are retained,\n// and spaces are replaced with hyphens.\n// TODO: investigate whether there's a better option with unicode than just\n// deleting it, seems unfair to languages using anything other than unaccented\n// Latin characters.\nfunction nameToSlug(name: string): string {\n  return name.trim().replace(/ /g, '-').replace(/[^-a-zA-Z0-9]/g, '').replace(/---*/g, '-');\n}\n\n// Returns a slug for the given docId/urlId/name, or undefined if a slug should\n// not be used.\nexport function getSlugIfNeeded(doc: {id: string, urlId: string|null, name: string}): string|undefined {\n  if (!shouldIncludeSlug(doc)) { return; }\n  return nameToSlug(doc.name);\n}\n\n/**\n * It is possible we want to remap Grist URLs in some way - specifically,\n * grist-static does this. We allow for a hook that is called after\n * encoding state as a URL, and a hook that is called before decoding\n * state from a URL.\n */\nexport interface UrlTweaks {\n  /**\n   * Tweak an encoded URL. Operates on the URL directly, in place.\n   */\n  postEncode?(options: {\n    url: URL,\n    parts: string[],\n    state: IGristUrlState,\n    baseLocation: Location | URL,\n  }): void;\n\n  /**\n   * Tweak a URL prior to decoding it. Operates on the URL directly, in place.\n   */\n  preDecode?(options: {\n    url: URL,\n  }): void;\n}\n","import {extractOrgParts, GristLoadConfig} from 'app/common/gristUrls';\n\nexport function getGristConfig(): GristLoadConfig {\n  return (window as any).gristConfig || {};\n}\n\n/**\n *\n * Adds /o/ORG to the supplied path, with ORG extracted from current URL if possible.\n * If not, path is returned as is, but with any trailing / removed for consistency.\n *\n */\nexport function addCurrentOrgToPath(path: string, skipIfInDomain: boolean = false) {\n  if (typeof window === 'undefined' || !window) { return path; }\n  return addOrgToPath(path, window.location.href, skipIfInDomain);\n}\n\n/**\n *\n * Adds /o/ORG to the supplied path, with ORG extracted from the page URL if possible.\n * If not, path is returned as is, but with any trailing / removed for consistency.\n *\n */\nexport function addOrgToPath(path: string, page: string, skipIfInDomain: boolean = false) {\n  if (typeof window === 'undefined' || !window) { return path; }\n  if (path.includes('/o/')) { return path; }\n  const src = new URL(page);\n  const srcParts = extractOrgParts(src.host, src.pathname);\n  if (srcParts.mismatch) {\n    throw new Error('Cannot figure out what organization the URL is for.');\n  }\n  path = path.replace(/\\/$/, '');\n  if (!srcParts.subdomain) {\n    return path;\n  }\n  if (skipIfInDomain && srcParts.orgFromHost) {\n    return path;\n  }\n  return `${path}/o/${srcParts.subdomain}`;\n}\n\n/**\n * Expands an endpoint path to a full url anchored to the given doc worker base url.\n */\nexport function docUrl(docWorkerUrl: string|null|undefined, path?: string) {\n  const base = document.querySelector('base');\n  const baseHref = base && base.href;\n  const baseUrl = new URL(docWorkerUrl || baseHref || window.location.origin);\n  return baseUrl.toString().replace(/\\/$/, '') + (path ? `/${path}` : '');\n}\n\n// Get a url on the same webserver as the current page, adding a prefix to encode\n// the current organization if necessary.\nexport function getOriginUrl(path: string) {\n  return `${window.location.origin}${addCurrentOrgToPath('/', true)}${path}`;\n}\n\n// Return a string docId if server has provided one (as in hosted Grist), otherwise null\n// (as in classic Grist).\nexport function getInitialDocAssignment(): string|null {\n  return getGristConfig().assignmentId || null;\n}\n\n// Return true if we are on a page that can supply a doc list.\n// TODO: the doclist object isn't relevant to hosted grist and should be factored out.\nexport function pageHasDocList(): boolean {\n  // No doc list support on hosted grist.\n  return !getGristConfig().homeUrl;\n}\n\n// Return true if we are on a page that has access to home api.\nexport function pageHasHome(): boolean {\n  return Boolean(getGristConfig().homeUrl);\n}\n\n// Construct a url by adding `path` to the home url (adding in the part to the current\n// org if needed), and fetch from it.\nexport function fetchFromHome(path: string, opts: RequestInit): Promise<Response> {\n  const baseUrl = addCurrentOrgToPath(getGristConfig().homeUrl!);\n  return window.fetch(`${baseUrl}${path}`, opts);\n}\n","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import _typeof from '@babel/runtime/helpers/esm/typeof';\nimport _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inherits from '@babel/runtime/helpers/esm/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/esm/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/esm/getPrototypeOf';\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport _toArray from '@babel/runtime/helpers/esm/toArray';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar consoleLogger = {\n  type: 'logger',\n  log: function log(args) {\n    this.output('log', args);\n  },\n  warn: function warn(args) {\n    this.output('warn', args);\n  },\n  error: function error(args) {\n    this.output('error', args);\n  },\n  output: function output(type, args) {\n    if (console && console[type]) console[type].apply(console, args);\n  }\n};\n\nvar Logger = function () {\n  function Logger(concreteLogger) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Logger);\n\n    this.init(concreteLogger, options);\n  }\n\n  _createClass(Logger, [{\n    key: \"init\",\n    value: function init(concreteLogger) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this.prefix = options.prefix || 'i18next:';\n      this.logger = concreteLogger || consoleLogger;\n      this.options = options;\n      this.debug = options.debug;\n    }\n  }, {\n    key: \"setDebug\",\n    value: function setDebug(bool) {\n      this.debug = bool;\n    }\n  }, {\n    key: \"log\",\n    value: function log() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return this.forward(args, 'log', '', true);\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return this.forward(args, 'warn', '', true);\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      return this.forward(args, 'error', '');\n    }\n  }, {\n    key: \"deprecate\",\n    value: function deprecate() {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      return this.forward(args, 'warn', 'WARNING DEPRECATED: ', true);\n    }\n  }, {\n    key: \"forward\",\n    value: function forward(args, lvl, prefix, debugOnly) {\n      if (debugOnly && !this.debug) return null;\n      if (typeof args[0] === 'string') args[0] = \"\".concat(prefix).concat(this.prefix, \" \").concat(args[0]);\n      return this.logger[lvl](args);\n    }\n  }, {\n    key: \"create\",\n    value: function create(moduleName) {\n      return new Logger(this.logger, _objectSpread(_objectSpread({}, {\n        prefix: \"\".concat(this.prefix, \":\").concat(moduleName, \":\")\n      }), this.options));\n    }\n  }]);\n\n  return Logger;\n}();\n\nvar baseLogger = new Logger();\n\nvar EventEmitter = function () {\n  function EventEmitter() {\n    _classCallCheck(this, EventEmitter);\n\n    this.observers = {};\n  }\n\n  _createClass(EventEmitter, [{\n    key: \"on\",\n    value: function on(events, listener) {\n      var _this = this;\n\n      events.split(' ').forEach(function (event) {\n        _this.observers[event] = _this.observers[event] || [];\n\n        _this.observers[event].push(listener);\n      });\n      return this;\n    }\n  }, {\n    key: \"off\",\n    value: function off(event, listener) {\n      if (!this.observers[event]) return;\n\n      if (!listener) {\n        delete this.observers[event];\n        return;\n      }\n\n      this.observers[event] = this.observers[event].filter(function (l) {\n        return l !== listener;\n      });\n    }\n  }, {\n    key: \"emit\",\n    value: function emit(event) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      if (this.observers[event]) {\n        var cloned = [].concat(this.observers[event]);\n        cloned.forEach(function (observer) {\n          observer.apply(void 0, args);\n        });\n      }\n\n      if (this.observers['*']) {\n        var _cloned = [].concat(this.observers['*']);\n\n        _cloned.forEach(function (observer) {\n          observer.apply(observer, [event].concat(args));\n        });\n      }\n    }\n  }]);\n\n  return EventEmitter;\n}();\n\nfunction defer() {\n  var res;\n  var rej;\n  var promise = new Promise(function (resolve, reject) {\n    res = resolve;\n    rej = reject;\n  });\n  promise.resolve = res;\n  promise.reject = rej;\n  return promise;\n}\nfunction makeString(object) {\n  if (object == null) return '';\n  return '' + object;\n}\nfunction copy(a, s, t) {\n  a.forEach(function (m) {\n    if (s[m]) t[m] = s[m];\n  });\n}\n\nfunction getLastOfPath(object, path, Empty) {\n  function cleanKey(key) {\n    return key && key.indexOf('###') > -1 ? key.replace(/###/g, '.') : key;\n  }\n\n  function canNotTraverseDeeper() {\n    return !object || typeof object === 'string';\n  }\n\n  var stack = typeof path !== 'string' ? [].concat(path) : path.split('.');\n\n  while (stack.length > 1) {\n    if (canNotTraverseDeeper()) return {};\n    var key = cleanKey(stack.shift());\n    if (!object[key] && Empty) object[key] = new Empty();\n\n    if (Object.prototype.hasOwnProperty.call(object, key)) {\n      object = object[key];\n    } else {\n      object = {};\n    }\n  }\n\n  if (canNotTraverseDeeper()) return {};\n  return {\n    obj: object,\n    k: cleanKey(stack.shift())\n  };\n}\n\nfunction setPath(object, path, newValue) {\n  var _getLastOfPath = getLastOfPath(object, path, Object),\n      obj = _getLastOfPath.obj,\n      k = _getLastOfPath.k;\n\n  obj[k] = newValue;\n}\nfunction pushPath(object, path, newValue, concat) {\n  var _getLastOfPath2 = getLastOfPath(object, path, Object),\n      obj = _getLastOfPath2.obj,\n      k = _getLastOfPath2.k;\n\n  obj[k] = obj[k] || [];\n  if (concat) obj[k] = obj[k].concat(newValue);\n  if (!concat) obj[k].push(newValue);\n}\nfunction getPath(object, path) {\n  var _getLastOfPath3 = getLastOfPath(object, path),\n      obj = _getLastOfPath3.obj,\n      k = _getLastOfPath3.k;\n\n  if (!obj) return undefined;\n  return obj[k];\n}\nfunction getPathWithDefaults(data, defaultData, key) {\n  var value = getPath(data, key);\n\n  if (value !== undefined) {\n    return value;\n  }\n\n  return getPath(defaultData, key);\n}\nfunction deepExtend(target, source, overwrite) {\n  for (var prop in source) {\n    if (prop !== '__proto__' && prop !== 'constructor') {\n      if (prop in target) {\n        if (typeof target[prop] === 'string' || target[prop] instanceof String || typeof source[prop] === 'string' || source[prop] instanceof String) {\n          if (overwrite) target[prop] = source[prop];\n        } else {\n          deepExtend(target[prop], source[prop], overwrite);\n        }\n      } else {\n        target[prop] = source[prop];\n      }\n    }\n  }\n\n  return target;\n}\nfunction regexEscape(str) {\n  return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n}\nvar _entityMap = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n  '/': '&#x2F;'\n};\nfunction escape(data) {\n  if (typeof data === 'string') {\n    return data.replace(/[&<>\"'\\/]/g, function (s) {\n      return _entityMap[s];\n    });\n  }\n\n  return data;\n}\nvar isIE10 = typeof window !== 'undefined' && window.navigator && typeof window.navigator.userAgentData === 'undefined' && window.navigator.userAgent && window.navigator.userAgent.indexOf('MSIE') > -1;\nvar chars = [' ', ',', '?', '!', ';'];\nfunction looksLikeObjectPath(key, nsSeparator, keySeparator) {\n  nsSeparator = nsSeparator || '';\n  keySeparator = keySeparator || '';\n  var possibleChars = chars.filter(function (c) {\n    return nsSeparator.indexOf(c) < 0 && keySeparator.indexOf(c) < 0;\n  });\n  if (possibleChars.length === 0) return true;\n  var r = new RegExp(\"(\".concat(possibleChars.map(function (c) {\n    return c === '?' ? '\\\\?' : c;\n  }).join('|'), \")\"));\n  var matched = !r.test(key);\n\n  if (!matched) {\n    var ki = key.indexOf(keySeparator);\n\n    if (ki > 0 && !r.test(key.substring(0, ki))) {\n      matched = true;\n    }\n  }\n\n  return matched;\n}\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$1(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction deepFind(obj, path) {\n  var keySeparator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '.';\n  if (!obj) return undefined;\n  if (obj[path]) return obj[path];\n  var paths = path.split(keySeparator);\n  var current = obj;\n\n  for (var i = 0; i < paths.length; ++i) {\n    if (!current) return undefined;\n\n    if (typeof current[paths[i]] === 'string' && i + 1 < paths.length) {\n      return undefined;\n    }\n\n    if (current[paths[i]] === undefined) {\n      var j = 2;\n      var p = paths.slice(i, i + j).join(keySeparator);\n      var mix = current[p];\n\n      while (mix === undefined && paths.length > i + j) {\n        j++;\n        p = paths.slice(i, i + j).join(keySeparator);\n        mix = current[p];\n      }\n\n      if (mix === undefined) return undefined;\n      if (mix === null) return null;\n\n      if (path.endsWith(p)) {\n        if (typeof mix === 'string') return mix;\n        if (p && typeof mix[p] === 'string') return mix[p];\n      }\n\n      var joinedPath = paths.slice(i + j).join(keySeparator);\n      if (joinedPath) return deepFind(mix, joinedPath, keySeparator);\n      return undefined;\n    }\n\n    current = current[paths[i]];\n  }\n\n  return current;\n}\n\nvar ResourceStore = function (_EventEmitter) {\n  _inherits(ResourceStore, _EventEmitter);\n\n  var _super = _createSuper(ResourceStore);\n\n  function ResourceStore(data) {\n    var _this;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      ns: ['translation'],\n      defaultNS: 'translation'\n    };\n\n    _classCallCheck(this, ResourceStore);\n\n    _this = _super.call(this);\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n\n    _this.data = data || {};\n    _this.options = options;\n\n    if (_this.options.keySeparator === undefined) {\n      _this.options.keySeparator = '.';\n    }\n\n    if (_this.options.ignoreJSONStructure === undefined) {\n      _this.options.ignoreJSONStructure = true;\n    }\n\n    return _this;\n  }\n\n  _createClass(ResourceStore, [{\n    key: \"addNamespaces\",\n    value: function addNamespaces(ns) {\n      if (this.options.ns.indexOf(ns) < 0) {\n        this.options.ns.push(ns);\n      }\n    }\n  }, {\n    key: \"removeNamespaces\",\n    value: function removeNamespaces(ns) {\n      var index = this.options.ns.indexOf(ns);\n\n      if (index > -1) {\n        this.options.ns.splice(index, 1);\n      }\n    }\n  }, {\n    key: \"getResource\",\n    value: function getResource(lng, ns, key) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var ignoreJSONStructure = options.ignoreJSONStructure !== undefined ? options.ignoreJSONStructure : this.options.ignoreJSONStructure;\n      var path = [lng, ns];\n      if (key && typeof key !== 'string') path = path.concat(key);\n      if (key && typeof key === 'string') path = path.concat(keySeparator ? key.split(keySeparator) : key);\n\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n      }\n\n      var result = getPath(this.data, path);\n      if (result || !ignoreJSONStructure || typeof key !== 'string') return result;\n      return deepFind(this.data && this.data[lng] && this.data[lng][ns], key, keySeparator);\n    }\n  }, {\n    key: \"addResource\",\n    value: function addResource(lng, ns, key, value) {\n      var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {\n        silent: false\n      };\n      var keySeparator = this.options.keySeparator;\n      if (keySeparator === undefined) keySeparator = '.';\n      var path = [lng, ns];\n      if (key) path = path.concat(keySeparator ? key.split(keySeparator) : key);\n\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n        value = ns;\n        ns = path[1];\n      }\n\n      this.addNamespaces(ns);\n      setPath(this.data, path, value);\n      if (!options.silent) this.emit('added', lng, ns, key, value);\n    }\n  }, {\n    key: \"addResources\",\n    value: function addResources(lng, ns, resources) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {\n        silent: false\n      };\n\n      for (var m in resources) {\n        if (typeof resources[m] === 'string' || Object.prototype.toString.apply(resources[m]) === '[object Array]') this.addResource(lng, ns, m, resources[m], {\n          silent: true\n        });\n      }\n\n      if (!options.silent) this.emit('added', lng, ns, resources);\n    }\n  }, {\n    key: \"addResourceBundle\",\n    value: function addResourceBundle(lng, ns, resources, deep, overwrite) {\n      var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {\n        silent: false\n      };\n      var path = [lng, ns];\n\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n        deep = resources;\n        resources = ns;\n        ns = path[1];\n      }\n\n      this.addNamespaces(ns);\n      var pack = getPath(this.data, path) || {};\n\n      if (deep) {\n        deepExtend(pack, resources, overwrite);\n      } else {\n        pack = _objectSpread$1(_objectSpread$1({}, pack), resources);\n      }\n\n      setPath(this.data, path, pack);\n      if (!options.silent) this.emit('added', lng, ns, resources);\n    }\n  }, {\n    key: \"removeResourceBundle\",\n    value: function removeResourceBundle(lng, ns) {\n      if (this.hasResourceBundle(lng, ns)) {\n        delete this.data[lng][ns];\n      }\n\n      this.removeNamespaces(ns);\n      this.emit('removed', lng, ns);\n    }\n  }, {\n    key: \"hasResourceBundle\",\n    value: function hasResourceBundle(lng, ns) {\n      return this.getResource(lng, ns) !== undefined;\n    }\n  }, {\n    key: \"getResourceBundle\",\n    value: function getResourceBundle(lng, ns) {\n      if (!ns) ns = this.options.defaultNS;\n      if (this.options.compatibilityAPI === 'v1') return _objectSpread$1(_objectSpread$1({}, {}), this.getResource(lng, ns));\n      return this.getResource(lng, ns);\n    }\n  }, {\n    key: \"getDataByLanguage\",\n    value: function getDataByLanguage(lng) {\n      return this.data[lng];\n    }\n  }, {\n    key: \"hasLanguageSomeTranslations\",\n    value: function hasLanguageSomeTranslations(lng) {\n      var data = this.getDataByLanguage(lng);\n      var n = data && Object.keys(data) || [];\n      return !!n.find(function (v) {\n        return data[v] && Object.keys(data[v]).length > 0;\n      });\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return this.data;\n    }\n  }]);\n\n  return ResourceStore;\n}(EventEmitter);\n\nvar postProcessor = {\n  processors: {},\n  addPostProcessor: function addPostProcessor(module) {\n    this.processors[module.name] = module;\n  },\n  handle: function handle(processors, value, key, options, translator) {\n    var _this = this;\n\n    processors.forEach(function (processor) {\n      if (_this.processors[processor]) value = _this.processors[processor].process(value, key, options, translator);\n    });\n    return value;\n  }\n};\n\nfunction ownKeys$2(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$2(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$2(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$2(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper$1(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$1(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$1() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar checkedLoadedFor = {};\n\nvar Translator = function (_EventEmitter) {\n  _inherits(Translator, _EventEmitter);\n\n  var _super = _createSuper$1(Translator);\n\n  function Translator(services) {\n    var _this;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Translator);\n\n    _this = _super.call(this);\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n\n    copy(['resourceStore', 'languageUtils', 'pluralResolver', 'interpolator', 'backendConnector', 'i18nFormat', 'utils'], services, _assertThisInitialized(_this));\n    _this.options = options;\n\n    if (_this.options.keySeparator === undefined) {\n      _this.options.keySeparator = '.';\n    }\n\n    _this.logger = baseLogger.create('translator');\n    return _this;\n  }\n\n  _createClass(Translator, [{\n    key: \"changeLanguage\",\n    value: function changeLanguage(lng) {\n      if (lng) this.language = lng;\n    }\n  }, {\n    key: \"exists\",\n    value: function exists(key) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        interpolation: {}\n      };\n\n      if (key === undefined || key === null) {\n        return false;\n      }\n\n      var resolved = this.resolve(key, options);\n      return resolved && resolved.res !== undefined;\n    }\n  }, {\n    key: \"extractFromKey\",\n    value: function extractFromKey(key, options) {\n      var nsSeparator = options.nsSeparator !== undefined ? options.nsSeparator : this.options.nsSeparator;\n      if (nsSeparator === undefined) nsSeparator = ':';\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var namespaces = options.ns || this.options.defaultNS || [];\n      var wouldCheckForNsInKey = nsSeparator && key.indexOf(nsSeparator) > -1;\n      var seemsNaturalLanguage = !this.options.userDefinedKeySeparator && !options.keySeparator && !this.options.userDefinedNsSeparator && !options.nsSeparator && !looksLikeObjectPath(key, nsSeparator, keySeparator);\n\n      if (wouldCheckForNsInKey && !seemsNaturalLanguage) {\n        var m = key.match(this.interpolator.nestingRegexp);\n\n        if (m && m.length > 0) {\n          return {\n            key: key,\n            namespaces: namespaces\n          };\n        }\n\n        var parts = key.split(nsSeparator);\n        if (nsSeparator !== keySeparator || nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1) namespaces = parts.shift();\n        key = parts.join(keySeparator);\n      }\n\n      if (typeof namespaces === 'string') namespaces = [namespaces];\n      return {\n        key: key,\n        namespaces: namespaces\n      };\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(keys, options, lastKey) {\n      var _this2 = this;\n\n      if (_typeof(options) !== 'object' && this.options.overloadTranslationOptionHandler) {\n        options = this.options.overloadTranslationOptionHandler(arguments);\n      }\n\n      if (!options) options = {};\n      if (keys === undefined || keys === null) return '';\n      if (!Array.isArray(keys)) keys = [String(keys)];\n      var returnDetails = options.returnDetails !== undefined ? options.returnDetails : this.options.returnDetails;\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n\n      var _this$extractFromKey = this.extractFromKey(keys[keys.length - 1], options),\n          key = _this$extractFromKey.key,\n          namespaces = _this$extractFromKey.namespaces;\n\n      var namespace = namespaces[namespaces.length - 1];\n      var lng = options.lng || this.language;\n      var appendNamespaceToCIMode = options.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;\n\n      if (lng && lng.toLowerCase() === 'cimode') {\n        if (appendNamespaceToCIMode) {\n          var nsSeparator = options.nsSeparator || this.options.nsSeparator;\n\n          if (returnDetails) {\n            resolved.res = \"\".concat(namespace).concat(nsSeparator).concat(key);\n            return resolved;\n          }\n\n          return \"\".concat(namespace).concat(nsSeparator).concat(key);\n        }\n\n        if (returnDetails) {\n          resolved.res = key;\n          return resolved;\n        }\n\n        return key;\n      }\n\n      var resolved = this.resolve(keys, options);\n      var res = resolved && resolved.res;\n      var resUsedKey = resolved && resolved.usedKey || key;\n      var resExactUsedKey = resolved && resolved.exactUsedKey || key;\n      var resType = Object.prototype.toString.apply(res);\n      var noObject = ['[object Number]', '[object Function]', '[object RegExp]'];\n      var joinArrays = options.joinArrays !== undefined ? options.joinArrays : this.options.joinArrays;\n      var handleAsObjectInI18nFormat = !this.i18nFormat || this.i18nFormat.handleAsObject;\n      var handleAsObject = typeof res !== 'string' && typeof res !== 'boolean' && typeof res !== 'number';\n\n      if (handleAsObjectInI18nFormat && res && handleAsObject && noObject.indexOf(resType) < 0 && !(typeof joinArrays === 'string' && resType === '[object Array]')) {\n        if (!options.returnObjects && !this.options.returnObjects) {\n          if (!this.options.returnedObjectHandler) {\n            this.logger.warn('accessing an object - but returnObjects options is not enabled!');\n          }\n\n          var r = this.options.returnedObjectHandler ? this.options.returnedObjectHandler(resUsedKey, res, _objectSpread$2(_objectSpread$2({}, options), {}, {\n            ns: namespaces\n          })) : \"key '\".concat(key, \" (\").concat(this.language, \")' returned an object instead of string.\");\n\n          if (returnDetails) {\n            resolved.res = r;\n            return resolved;\n          }\n\n          return r;\n        }\n\n        if (keySeparator) {\n          var resTypeIsArray = resType === '[object Array]';\n          var copy = resTypeIsArray ? [] : {};\n          var newKeyToUse = resTypeIsArray ? resExactUsedKey : resUsedKey;\n\n          for (var m in res) {\n            if (Object.prototype.hasOwnProperty.call(res, m)) {\n              var deepKey = \"\".concat(newKeyToUse).concat(keySeparator).concat(m);\n              copy[m] = this.translate(deepKey, _objectSpread$2(_objectSpread$2({}, options), {\n                joinArrays: false,\n                ns: namespaces\n              }));\n              if (copy[m] === deepKey) copy[m] = res[m];\n            }\n          }\n\n          res = copy;\n        }\n      } else if (handleAsObjectInI18nFormat && typeof joinArrays === 'string' && resType === '[object Array]') {\n        res = res.join(joinArrays);\n        if (res) res = this.extendTranslation(res, keys, options, lastKey);\n      } else {\n        var usedDefault = false;\n        var usedKey = false;\n        var needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n        var hasDefaultValue = Translator.hasDefaultValue(options);\n        var defaultValueSuffix = needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, options) : '';\n        var defaultValue = options[\"defaultValue\".concat(defaultValueSuffix)] || options.defaultValue;\n\n        if (!this.isValidLookup(res) && hasDefaultValue) {\n          usedDefault = true;\n          res = defaultValue;\n        }\n\n        if (!this.isValidLookup(res)) {\n          usedKey = true;\n          res = key;\n        }\n\n        var missingKeyNoValueFallbackToKey = options.missingKeyNoValueFallbackToKey || this.options.missingKeyNoValueFallbackToKey;\n        var resForMissing = missingKeyNoValueFallbackToKey && usedKey ? undefined : res;\n        var updateMissing = hasDefaultValue && defaultValue !== res && this.options.updateMissing;\n\n        if (usedKey || usedDefault || updateMissing) {\n          this.logger.log(updateMissing ? 'updateKey' : 'missingKey', lng, namespace, key, updateMissing ? defaultValue : res);\n\n          if (keySeparator) {\n            var fk = this.resolve(key, _objectSpread$2(_objectSpread$2({}, options), {}, {\n              keySeparator: false\n            }));\n            if (fk && fk.res) this.logger.warn('Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.');\n          }\n\n          var lngs = [];\n          var fallbackLngs = this.languageUtils.getFallbackCodes(this.options.fallbackLng, options.lng || this.language);\n\n          if (this.options.saveMissingTo === 'fallback' && fallbackLngs && fallbackLngs[0]) {\n            for (var i = 0; i < fallbackLngs.length; i++) {\n              lngs.push(fallbackLngs[i]);\n            }\n          } else if (this.options.saveMissingTo === 'all') {\n            lngs = this.languageUtils.toResolveHierarchy(options.lng || this.language);\n          } else {\n            lngs.push(options.lng || this.language);\n          }\n\n          var send = function send(l, k, specificDefaultValue) {\n            var defaultForMissing = hasDefaultValue && specificDefaultValue !== res ? specificDefaultValue : resForMissing;\n\n            if (_this2.options.missingKeyHandler) {\n              _this2.options.missingKeyHandler(l, namespace, k, defaultForMissing, updateMissing, options);\n            } else if (_this2.backendConnector && _this2.backendConnector.saveMissing) {\n              _this2.backendConnector.saveMissing(l, namespace, k, defaultForMissing, updateMissing, options);\n            }\n\n            _this2.emit('missingKey', l, namespace, k, res);\n          };\n\n          if (this.options.saveMissing) {\n            if (this.options.saveMissingPlurals && needsPluralHandling) {\n              lngs.forEach(function (language) {\n                _this2.pluralResolver.getSuffixes(language, options).forEach(function (suffix) {\n                  send([language], key + suffix, options[\"defaultValue\".concat(suffix)] || defaultValue);\n                });\n              });\n            } else {\n              send(lngs, key, defaultValue);\n            }\n          }\n        }\n\n        res = this.extendTranslation(res, keys, options, resolved, lastKey);\n        if (usedKey && res === key && this.options.appendNamespaceToMissingKey) res = \"\".concat(namespace, \":\").concat(key);\n\n        if ((usedKey || usedDefault) && this.options.parseMissingKeyHandler) {\n          if (this.options.compatibilityAPI !== 'v1') {\n            res = this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey ? \"\".concat(namespace, \":\").concat(key) : key, usedDefault ? res : undefined);\n          } else {\n            res = this.options.parseMissingKeyHandler(res);\n          }\n        }\n      }\n\n      if (returnDetails) {\n        resolved.res = res;\n        return resolved;\n      }\n\n      return res;\n    }\n  }, {\n    key: \"extendTranslation\",\n    value: function extendTranslation(res, key, options, resolved, lastKey) {\n      var _this3 = this;\n\n      if (this.i18nFormat && this.i18nFormat.parse) {\n        res = this.i18nFormat.parse(res, _objectSpread$2(_objectSpread$2({}, this.options.interpolation.defaultVariables), options), resolved.usedLng, resolved.usedNS, resolved.usedKey, {\n          resolved: resolved\n        });\n      } else if (!options.skipInterpolation) {\n        if (options.interpolation) this.interpolator.init(_objectSpread$2(_objectSpread$2({}, options), {\n          interpolation: _objectSpread$2(_objectSpread$2({}, this.options.interpolation), options.interpolation)\n        }));\n        var skipOnVariables = typeof res === 'string' && (options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables);\n        var nestBef;\n\n        if (skipOnVariables) {\n          var nb = res.match(this.interpolator.nestingRegexp);\n          nestBef = nb && nb.length;\n        }\n\n        var data = options.replace && typeof options.replace !== 'string' ? options.replace : options;\n        if (this.options.interpolation.defaultVariables) data = _objectSpread$2(_objectSpread$2({}, this.options.interpolation.defaultVariables), data);\n        res = this.interpolator.interpolate(res, data, options.lng || this.language, options);\n\n        if (skipOnVariables) {\n          var na = res.match(this.interpolator.nestingRegexp);\n          var nestAft = na && na.length;\n          if (nestBef < nestAft) options.nest = false;\n        }\n\n        if (options.nest !== false) res = this.interpolator.nest(res, function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          if (lastKey && lastKey[0] === args[0] && !options.context) {\n            _this3.logger.warn(\"It seems you are nesting recursively key: \".concat(args[0], \" in key: \").concat(key[0]));\n\n            return null;\n          }\n\n          return _this3.translate.apply(_this3, args.concat([key]));\n        }, options);\n        if (options.interpolation) this.interpolator.reset();\n      }\n\n      var postProcess = options.postProcess || this.options.postProcess;\n      var postProcessorNames = typeof postProcess === 'string' ? [postProcess] : postProcess;\n\n      if (res !== undefined && res !== null && postProcessorNames && postProcessorNames.length && options.applyPostProcessor !== false) {\n        res = postProcessor.handle(postProcessorNames, res, key, this.options && this.options.postProcessPassResolved ? _objectSpread$2({\n          i18nResolved: resolved\n        }, options) : options, this);\n      }\n\n      return res;\n    }\n  }, {\n    key: \"resolve\",\n    value: function resolve(keys) {\n      var _this4 = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var found;\n      var usedKey;\n      var exactUsedKey;\n      var usedLng;\n      var usedNS;\n      if (typeof keys === 'string') keys = [keys];\n      keys.forEach(function (k) {\n        if (_this4.isValidLookup(found)) return;\n\n        var extracted = _this4.extractFromKey(k, options);\n\n        var key = extracted.key;\n        usedKey = key;\n        var namespaces = extracted.namespaces;\n        if (_this4.options.fallbackNS) namespaces = namespaces.concat(_this4.options.fallbackNS);\n        var needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n\n        var needsZeroSuffixLookup = needsPluralHandling && !options.ordinal && options.count === 0 && _this4.pluralResolver.shouldUseIntlApi();\n\n        var needsContextHandling = options.context !== undefined && (typeof options.context === 'string' || typeof options.context === 'number') && options.context !== '';\n        var codes = options.lngs ? options.lngs : _this4.languageUtils.toResolveHierarchy(options.lng || _this4.language, options.fallbackLng);\n        namespaces.forEach(function (ns) {\n          if (_this4.isValidLookup(found)) return;\n          usedNS = ns;\n\n          if (!checkedLoadedFor[\"\".concat(codes[0], \"-\").concat(ns)] && _this4.utils && _this4.utils.hasLoadedNamespace && !_this4.utils.hasLoadedNamespace(usedNS)) {\n            checkedLoadedFor[\"\".concat(codes[0], \"-\").concat(ns)] = true;\n\n            _this4.logger.warn(\"key \\\"\".concat(usedKey, \"\\\" for languages \\\"\").concat(codes.join(', '), \"\\\" won't get resolved as namespace \\\"\").concat(usedNS, \"\\\" was not yet loaded\"), 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n          }\n\n          codes.forEach(function (code) {\n            if (_this4.isValidLookup(found)) return;\n            usedLng = code;\n            var finalKeys = [key];\n\n            if (_this4.i18nFormat && _this4.i18nFormat.addLookupKeys) {\n              _this4.i18nFormat.addLookupKeys(finalKeys, key, code, ns, options);\n            } else {\n              var pluralSuffix;\n              if (needsPluralHandling) pluralSuffix = _this4.pluralResolver.getSuffix(code, options.count, options);\n              var zeroSuffix = \"\".concat(_this4.options.pluralSeparator, \"zero\");\n\n              if (needsPluralHandling) {\n                finalKeys.push(key + pluralSuffix);\n\n                if (needsZeroSuffixLookup) {\n                  finalKeys.push(key + zeroSuffix);\n                }\n              }\n\n              if (needsContextHandling) {\n                var contextKey = \"\".concat(key).concat(_this4.options.contextSeparator).concat(options.context);\n                finalKeys.push(contextKey);\n\n                if (needsPluralHandling) {\n                  finalKeys.push(contextKey + pluralSuffix);\n\n                  if (needsZeroSuffixLookup) {\n                    finalKeys.push(contextKey + zeroSuffix);\n                  }\n                }\n              }\n            }\n\n            var possibleKey;\n\n            while (possibleKey = finalKeys.pop()) {\n              if (!_this4.isValidLookup(found)) {\n                exactUsedKey = possibleKey;\n                found = _this4.getResource(code, ns, possibleKey, options);\n              }\n            }\n          });\n        });\n      });\n      return {\n        res: found,\n        usedKey: usedKey,\n        exactUsedKey: exactUsedKey,\n        usedLng: usedLng,\n        usedNS: usedNS\n      };\n    }\n  }, {\n    key: \"isValidLookup\",\n    value: function isValidLookup(res) {\n      return res !== undefined && !(!this.options.returnNull && res === null) && !(!this.options.returnEmptyString && res === '');\n    }\n  }, {\n    key: \"getResource\",\n    value: function getResource(code, ns, key) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      if (this.i18nFormat && this.i18nFormat.getResource) return this.i18nFormat.getResource(code, ns, key, options);\n      return this.resourceStore.getResource(code, ns, key, options);\n    }\n  }], [{\n    key: \"hasDefaultValue\",\n    value: function hasDefaultValue(options) {\n      var prefix = 'defaultValue';\n\n      for (var option in options) {\n        if (Object.prototype.hasOwnProperty.call(options, option) && prefix === option.substring(0, prefix.length) && undefined !== options[option]) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }]);\n\n  return Translator;\n}(EventEmitter);\n\nfunction capitalize(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nvar LanguageUtil = function () {\n  function LanguageUtil(options) {\n    _classCallCheck(this, LanguageUtil);\n\n    this.options = options;\n    this.supportedLngs = this.options.supportedLngs || false;\n    this.logger = baseLogger.create('languageUtils');\n  }\n\n  _createClass(LanguageUtil, [{\n    key: \"getScriptPartFromCode\",\n    value: function getScriptPartFromCode(code) {\n      if (!code || code.indexOf('-') < 0) return null;\n      var p = code.split('-');\n      if (p.length === 2) return null;\n      p.pop();\n      if (p[p.length - 1].toLowerCase() === 'x') return null;\n      return this.formatLanguageCode(p.join('-'));\n    }\n  }, {\n    key: \"getLanguagePartFromCode\",\n    value: function getLanguagePartFromCode(code) {\n      if (!code || code.indexOf('-') < 0) return code;\n      var p = code.split('-');\n      return this.formatLanguageCode(p[0]);\n    }\n  }, {\n    key: \"formatLanguageCode\",\n    value: function formatLanguageCode(code) {\n      if (typeof code === 'string' && code.indexOf('-') > -1) {\n        var specialCases = ['hans', 'hant', 'latn', 'cyrl', 'cans', 'mong', 'arab'];\n        var p = code.split('-');\n\n        if (this.options.lowerCaseLng) {\n          p = p.map(function (part) {\n            return part.toLowerCase();\n          });\n        } else if (p.length === 2) {\n          p[0] = p[0].toLowerCase();\n          p[1] = p[1].toUpperCase();\n          if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n        } else if (p.length === 3) {\n          p[0] = p[0].toLowerCase();\n          if (p[1].length === 2) p[1] = p[1].toUpperCase();\n          if (p[0] !== 'sgn' && p[2].length === 2) p[2] = p[2].toUpperCase();\n          if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n          if (specialCases.indexOf(p[2].toLowerCase()) > -1) p[2] = capitalize(p[2].toLowerCase());\n        }\n\n        return p.join('-');\n      }\n\n      return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;\n    }\n  }, {\n    key: \"isSupportedCode\",\n    value: function isSupportedCode(code) {\n      if (this.options.load === 'languageOnly' || this.options.nonExplicitSupportedLngs) {\n        code = this.getLanguagePartFromCode(code);\n      }\n\n      return !this.supportedLngs || !this.supportedLngs.length || this.supportedLngs.indexOf(code) > -1;\n    }\n  }, {\n    key: \"getBestMatchFromCodes\",\n    value: function getBestMatchFromCodes(codes) {\n      var _this = this;\n\n      if (!codes) return null;\n      var found;\n      codes.forEach(function (code) {\n        if (found) return;\n\n        var cleanedLng = _this.formatLanguageCode(code);\n\n        if (!_this.options.supportedLngs || _this.isSupportedCode(cleanedLng)) found = cleanedLng;\n      });\n\n      if (!found && this.options.supportedLngs) {\n        codes.forEach(function (code) {\n          if (found) return;\n\n          var lngOnly = _this.getLanguagePartFromCode(code);\n\n          if (_this.isSupportedCode(lngOnly)) return found = lngOnly;\n          found = _this.options.supportedLngs.find(function (supportedLng) {\n            if (supportedLng.indexOf(lngOnly) === 0) return supportedLng;\n          });\n        });\n      }\n\n      if (!found) found = this.getFallbackCodes(this.options.fallbackLng)[0];\n      return found;\n    }\n  }, {\n    key: \"getFallbackCodes\",\n    value: function getFallbackCodes(fallbacks, code) {\n      if (!fallbacks) return [];\n      if (typeof fallbacks === 'function') fallbacks = fallbacks(code);\n      if (typeof fallbacks === 'string') fallbacks = [fallbacks];\n      if (Object.prototype.toString.apply(fallbacks) === '[object Array]') return fallbacks;\n      if (!code) return fallbacks[\"default\"] || [];\n      var found = fallbacks[code];\n      if (!found) found = fallbacks[this.getScriptPartFromCode(code)];\n      if (!found) found = fallbacks[this.formatLanguageCode(code)];\n      if (!found) found = fallbacks[this.getLanguagePartFromCode(code)];\n      if (!found) found = fallbacks[\"default\"];\n      return found || [];\n    }\n  }, {\n    key: \"toResolveHierarchy\",\n    value: function toResolveHierarchy(code, fallbackCode) {\n      var _this2 = this;\n\n      var fallbackCodes = this.getFallbackCodes(fallbackCode || this.options.fallbackLng || [], code);\n      var codes = [];\n\n      var addCode = function addCode(c) {\n        if (!c) return;\n\n        if (_this2.isSupportedCode(c)) {\n          codes.push(c);\n        } else {\n          _this2.logger.warn(\"rejecting language code not found in supportedLngs: \".concat(c));\n        }\n      };\n\n      if (typeof code === 'string' && code.indexOf('-') > -1) {\n        if (this.options.load !== 'languageOnly') addCode(this.formatLanguageCode(code));\n        if (this.options.load !== 'languageOnly' && this.options.load !== 'currentOnly') addCode(this.getScriptPartFromCode(code));\n        if (this.options.load !== 'currentOnly') addCode(this.getLanguagePartFromCode(code));\n      } else if (typeof code === 'string') {\n        addCode(this.formatLanguageCode(code));\n      }\n\n      fallbackCodes.forEach(function (fc) {\n        if (codes.indexOf(fc) < 0) addCode(_this2.formatLanguageCode(fc));\n      });\n      return codes;\n    }\n  }]);\n\n  return LanguageUtil;\n}();\n\nvar sets = [{\n  lngs: ['ach', 'ak', 'am', 'arn', 'br', 'fil', 'gun', 'ln', 'mfe', 'mg', 'mi', 'oc', 'pt', 'pt-BR', 'tg', 'tl', 'ti', 'tr', 'uz', 'wa'],\n  nr: [1, 2],\n  fc: 1\n}, {\n  lngs: ['af', 'an', 'ast', 'az', 'bg', 'bn', 'ca', 'da', 'de', 'dev', 'el', 'en', 'eo', 'es', 'et', 'eu', 'fi', 'fo', 'fur', 'fy', 'gl', 'gu', 'ha', 'hi', 'hu', 'hy', 'ia', 'it', 'kk', 'kn', 'ku', 'lb', 'mai', 'ml', 'mn', 'mr', 'nah', 'nap', 'nb', 'ne', 'nl', 'nn', 'no', 'nso', 'pa', 'pap', 'pms', 'ps', 'pt-PT', 'rm', 'sco', 'se', 'si', 'so', 'son', 'sq', 'sv', 'sw', 'ta', 'te', 'tk', 'ur', 'yo'],\n  nr: [1, 2],\n  fc: 2\n}, {\n  lngs: ['ay', 'bo', 'cgg', 'fa', 'ht', 'id', 'ja', 'jbo', 'ka', 'km', 'ko', 'ky', 'lo', 'ms', 'sah', 'su', 'th', 'tt', 'ug', 'vi', 'wo', 'zh'],\n  nr: [1],\n  fc: 3\n}, {\n  lngs: ['be', 'bs', 'cnr', 'dz', 'hr', 'ru', 'sr', 'uk'],\n  nr: [1, 2, 5],\n  fc: 4\n}, {\n  lngs: ['ar'],\n  nr: [0, 1, 2, 3, 11, 100],\n  fc: 5\n}, {\n  lngs: ['cs', 'sk'],\n  nr: [1, 2, 5],\n  fc: 6\n}, {\n  lngs: ['csb', 'pl'],\n  nr: [1, 2, 5],\n  fc: 7\n}, {\n  lngs: ['cy'],\n  nr: [1, 2, 3, 8],\n  fc: 8\n}, {\n  lngs: ['fr'],\n  nr: [1, 2],\n  fc: 9\n}, {\n  lngs: ['ga'],\n  nr: [1, 2, 3, 7, 11],\n  fc: 10\n}, {\n  lngs: ['gd'],\n  nr: [1, 2, 3, 20],\n  fc: 11\n}, {\n  lngs: ['is'],\n  nr: [1, 2],\n  fc: 12\n}, {\n  lngs: ['jv'],\n  nr: [0, 1],\n  fc: 13\n}, {\n  lngs: ['kw'],\n  nr: [1, 2, 3, 4],\n  fc: 14\n}, {\n  lngs: ['lt'],\n  nr: [1, 2, 10],\n  fc: 15\n}, {\n  lngs: ['lv'],\n  nr: [1, 2, 0],\n  fc: 16\n}, {\n  lngs: ['mk'],\n  nr: [1, 2],\n  fc: 17\n}, {\n  lngs: ['mnk'],\n  nr: [0, 1, 2],\n  fc: 18\n}, {\n  lngs: ['mt'],\n  nr: [1, 2, 11, 20],\n  fc: 19\n}, {\n  lngs: ['or'],\n  nr: [2, 1],\n  fc: 2\n}, {\n  lngs: ['ro'],\n  nr: [1, 2, 20],\n  fc: 20\n}, {\n  lngs: ['sl'],\n  nr: [5, 1, 2, 3],\n  fc: 21\n}, {\n  lngs: ['he', 'iw'],\n  nr: [1, 2, 20, 21],\n  fc: 22\n}];\nvar _rulesPluralsTypes = {\n  1: function _(n) {\n    return Number(n > 1);\n  },\n  2: function _(n) {\n    return Number(n != 1);\n  },\n  3: function _(n) {\n    return 0;\n  },\n  4: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  5: function _(n) {\n    return Number(n == 0 ? 0 : n == 1 ? 1 : n == 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5);\n  },\n  6: function _(n) {\n    return Number(n == 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2);\n  },\n  7: function _(n) {\n    return Number(n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  8: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n != 8 && n != 11 ? 2 : 3);\n  },\n  9: function _(n) {\n    return Number(n >= 2);\n  },\n  10: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4);\n  },\n  11: function _(n) {\n    return Number(n == 1 || n == 11 ? 0 : n == 2 || n == 12 ? 1 : n > 2 && n < 20 ? 2 : 3);\n  },\n  12: function _(n) {\n    return Number(n % 10 != 1 || n % 100 == 11);\n  },\n  13: function _(n) {\n    return Number(n !== 0);\n  },\n  14: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n == 3 ? 2 : 3);\n  },\n  15: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  16: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n !== 0 ? 1 : 2);\n  },\n  17: function _(n) {\n    return Number(n == 1 || n % 10 == 1 && n % 100 != 11 ? 0 : 1);\n  },\n  18: function _(n) {\n    return Number(n == 0 ? 0 : n == 1 ? 1 : 2);\n  },\n  19: function _(n) {\n    return Number(n == 1 ? 0 : n == 0 || n % 100 > 1 && n % 100 < 11 ? 1 : n % 100 > 10 && n % 100 < 20 ? 2 : 3);\n  },\n  20: function _(n) {\n    return Number(n == 1 ? 0 : n == 0 || n % 100 > 0 && n % 100 < 20 ? 1 : 2);\n  },\n  21: function _(n) {\n    return Number(n % 100 == 1 ? 1 : n % 100 == 2 ? 2 : n % 100 == 3 || n % 100 == 4 ? 3 : 0);\n  },\n  22: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : (n < 0 || n > 10) && n % 10 == 0 ? 2 : 3);\n  }\n};\nvar deprecatedJsonVersions = ['v1', 'v2', 'v3'];\nvar suffixesOrder = {\n  zero: 0,\n  one: 1,\n  two: 2,\n  few: 3,\n  many: 4,\n  other: 5\n};\n\nfunction createRules() {\n  var rules = {};\n  sets.forEach(function (set) {\n    set.lngs.forEach(function (l) {\n      rules[l] = {\n        numbers: set.nr,\n        plurals: _rulesPluralsTypes[set.fc]\n      };\n    });\n  });\n  return rules;\n}\n\nvar PluralResolver = function () {\n  function PluralResolver(languageUtils) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, PluralResolver);\n\n    this.languageUtils = languageUtils;\n    this.options = options;\n    this.logger = baseLogger.create('pluralResolver');\n\n    if ((!this.options.compatibilityJSON || this.options.compatibilityJSON === 'v4') && (typeof Intl === 'undefined' || !Intl.PluralRules)) {\n      this.options.compatibilityJSON = 'v3';\n      this.logger.error('Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.');\n    }\n\n    this.rules = createRules();\n  }\n\n  _createClass(PluralResolver, [{\n    key: \"addRule\",\n    value: function addRule(lng, obj) {\n      this.rules[lng] = obj;\n    }\n  }, {\n    key: \"getRule\",\n    value: function getRule(code) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (this.shouldUseIntlApi()) {\n        try {\n          return new Intl.PluralRules(code, {\n            type: options.ordinal ? 'ordinal' : 'cardinal'\n          });\n        } catch (_unused) {\n          return;\n        }\n      }\n\n      return this.rules[code] || this.rules[this.languageUtils.getLanguagePartFromCode(code)];\n    }\n  }, {\n    key: \"needsPlural\",\n    value: function needsPlural(code) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var rule = this.getRule(code, options);\n\n      if (this.shouldUseIntlApi()) {\n        return rule && rule.resolvedOptions().pluralCategories.length > 1;\n      }\n\n      return rule && rule.numbers.length > 1;\n    }\n  }, {\n    key: \"getPluralFormsOfKey\",\n    value: function getPluralFormsOfKey(code, key) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return this.getSuffixes(code, options).map(function (suffix) {\n        return \"\".concat(key).concat(suffix);\n      });\n    }\n  }, {\n    key: \"getSuffixes\",\n    value: function getSuffixes(code) {\n      var _this = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var rule = this.getRule(code, options);\n\n      if (!rule) {\n        return [];\n      }\n\n      if (this.shouldUseIntlApi()) {\n        return rule.resolvedOptions().pluralCategories.sort(function (pluralCategory1, pluralCategory2) {\n          return suffixesOrder[pluralCategory1] - suffixesOrder[pluralCategory2];\n        }).map(function (pluralCategory) {\n          return \"\".concat(_this.options.prepend).concat(pluralCategory);\n        });\n      }\n\n      return rule.numbers.map(function (number) {\n        return _this.getSuffix(code, number, options);\n      });\n    }\n  }, {\n    key: \"getSuffix\",\n    value: function getSuffix(code, count) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var rule = this.getRule(code, options);\n\n      if (rule) {\n        if (this.shouldUseIntlApi()) {\n          return \"\".concat(this.options.prepend).concat(rule.select(count));\n        }\n\n        return this.getSuffixRetroCompatible(rule, count);\n      }\n\n      this.logger.warn(\"no plural rule found for: \".concat(code));\n      return '';\n    }\n  }, {\n    key: \"getSuffixRetroCompatible\",\n    value: function getSuffixRetroCompatible(rule, count) {\n      var _this2 = this;\n\n      var idx = rule.noAbs ? rule.plurals(count) : rule.plurals(Math.abs(count));\n      var suffix = rule.numbers[idx];\n\n      if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n        if (suffix === 2) {\n          suffix = 'plural';\n        } else if (suffix === 1) {\n          suffix = '';\n        }\n      }\n\n      var returnSuffix = function returnSuffix() {\n        return _this2.options.prepend && suffix.toString() ? _this2.options.prepend + suffix.toString() : suffix.toString();\n      };\n\n      if (this.options.compatibilityJSON === 'v1') {\n        if (suffix === 1) return '';\n        if (typeof suffix === 'number') return \"_plural_\".concat(suffix.toString());\n        return returnSuffix();\n      } else if (this.options.compatibilityJSON === 'v2') {\n        return returnSuffix();\n      } else if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n        return returnSuffix();\n      }\n\n      return this.options.prepend && idx.toString() ? this.options.prepend + idx.toString() : idx.toString();\n    }\n  }, {\n    key: \"shouldUseIntlApi\",\n    value: function shouldUseIntlApi() {\n      return !deprecatedJsonVersions.includes(this.options.compatibilityJSON);\n    }\n  }]);\n\n  return PluralResolver;\n}();\n\nfunction ownKeys$3(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$3(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$3(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$3(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar Interpolator = function () {\n  function Interpolator() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Interpolator);\n\n    this.logger = baseLogger.create('interpolator');\n    this.options = options;\n\n    this.format = options.interpolation && options.interpolation.format || function (value) {\n      return value;\n    };\n\n    this.init(options);\n  }\n\n  _createClass(Interpolator, [{\n    key: \"init\",\n    value: function init() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (!options.interpolation) options.interpolation = {\n        escapeValue: true\n      };\n      var iOpts = options.interpolation;\n      this.escape = iOpts.escape !== undefined ? iOpts.escape : escape;\n      this.escapeValue = iOpts.escapeValue !== undefined ? iOpts.escapeValue : true;\n      this.useRawValueToEscape = iOpts.useRawValueToEscape !== undefined ? iOpts.useRawValueToEscape : false;\n      this.prefix = iOpts.prefix ? regexEscape(iOpts.prefix) : iOpts.prefixEscaped || '{{';\n      this.suffix = iOpts.suffix ? regexEscape(iOpts.suffix) : iOpts.suffixEscaped || '}}';\n      this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ',';\n      this.unescapePrefix = iOpts.unescapeSuffix ? '' : iOpts.unescapePrefix || '-';\n      this.unescapeSuffix = this.unescapePrefix ? '' : iOpts.unescapeSuffix || '';\n      this.nestingPrefix = iOpts.nestingPrefix ? regexEscape(iOpts.nestingPrefix) : iOpts.nestingPrefixEscaped || regexEscape('$t(');\n      this.nestingSuffix = iOpts.nestingSuffix ? regexEscape(iOpts.nestingSuffix) : iOpts.nestingSuffixEscaped || regexEscape(')');\n      this.nestingOptionsSeparator = iOpts.nestingOptionsSeparator ? iOpts.nestingOptionsSeparator : iOpts.nestingOptionsSeparator || ',';\n      this.maxReplaces = iOpts.maxReplaces ? iOpts.maxReplaces : 1000;\n      this.alwaysFormat = iOpts.alwaysFormat !== undefined ? iOpts.alwaysFormat : false;\n      this.resetRegExp();\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      if (this.options) this.init(this.options);\n    }\n  }, {\n    key: \"resetRegExp\",\n    value: function resetRegExp() {\n      var regexpStr = \"\".concat(this.prefix, \"(.+?)\").concat(this.suffix);\n      this.regexp = new RegExp(regexpStr, 'g');\n      var regexpUnescapeStr = \"\".concat(this.prefix).concat(this.unescapePrefix, \"(.+?)\").concat(this.unescapeSuffix).concat(this.suffix);\n      this.regexpUnescape = new RegExp(regexpUnescapeStr, 'g');\n      var nestingRegexpStr = \"\".concat(this.nestingPrefix, \"(.+?)\").concat(this.nestingSuffix);\n      this.nestingRegexp = new RegExp(nestingRegexpStr, 'g');\n    }\n  }, {\n    key: \"interpolate\",\n    value: function interpolate(str, data, lng, options) {\n      var _this = this;\n\n      var match;\n      var value;\n      var replaces;\n      var defaultData = this.options && this.options.interpolation && this.options.interpolation.defaultVariables || {};\n\n      function regexSafe(val) {\n        return val.replace(/\\$/g, '$$$$');\n      }\n\n      var handleFormat = function handleFormat(key) {\n        if (key.indexOf(_this.formatSeparator) < 0) {\n          var path = getPathWithDefaults(data, defaultData, key);\n          return _this.alwaysFormat ? _this.format(path, undefined, lng, _objectSpread$3(_objectSpread$3(_objectSpread$3({}, options), data), {}, {\n            interpolationkey: key\n          })) : path;\n        }\n\n        var p = key.split(_this.formatSeparator);\n        var k = p.shift().trim();\n        var f = p.join(_this.formatSeparator).trim();\n        return _this.format(getPathWithDefaults(data, defaultData, k), f, lng, _objectSpread$3(_objectSpread$3(_objectSpread$3({}, options), data), {}, {\n          interpolationkey: k\n        }));\n      };\n\n      this.resetRegExp();\n      var missingInterpolationHandler = options && options.missingInterpolationHandler || this.options.missingInterpolationHandler;\n      var skipOnVariables = options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables;\n      var todos = [{\n        regex: this.regexpUnescape,\n        safeValue: function safeValue(val) {\n          return regexSafe(val);\n        }\n      }, {\n        regex: this.regexp,\n        safeValue: function safeValue(val) {\n          return _this.escapeValue ? regexSafe(_this.escape(val)) : regexSafe(val);\n        }\n      }];\n      todos.forEach(function (todo) {\n        replaces = 0;\n\n        while (match = todo.regex.exec(str)) {\n          var matchedVar = match[1].trim();\n          value = handleFormat(matchedVar);\n\n          if (value === undefined) {\n            if (typeof missingInterpolationHandler === 'function') {\n              var temp = missingInterpolationHandler(str, match, options);\n              value = typeof temp === 'string' ? temp : '';\n            } else if (options && options.hasOwnProperty(matchedVar)) {\n              value = '';\n            } else if (skipOnVariables) {\n              value = match[0];\n              continue;\n            } else {\n              _this.logger.warn(\"missed to pass in variable \".concat(matchedVar, \" for interpolating \").concat(str));\n\n              value = '';\n            }\n          } else if (typeof value !== 'string' && !_this.useRawValueToEscape) {\n            value = makeString(value);\n          }\n\n          var safeValue = todo.safeValue(value);\n          str = str.replace(match[0], safeValue);\n\n          if (skipOnVariables) {\n            todo.regex.lastIndex += value.length;\n            todo.regex.lastIndex -= match[0].length;\n          } else {\n            todo.regex.lastIndex = 0;\n          }\n\n          replaces++;\n\n          if (replaces >= _this.maxReplaces) {\n            break;\n          }\n        }\n      });\n      return str;\n    }\n  }, {\n    key: \"nest\",\n    value: function nest(str, fc) {\n      var _this2 = this;\n\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var match;\n      var value;\n\n      var clonedOptions = _objectSpread$3({}, options);\n\n      clonedOptions.applyPostProcessor = false;\n      delete clonedOptions.defaultValue;\n\n      function handleHasOptions(key, inheritedOptions) {\n        var sep = this.nestingOptionsSeparator;\n        if (key.indexOf(sep) < 0) return key;\n        var c = key.split(new RegExp(\"\".concat(sep, \"[ ]*{\")));\n        var optionsString = \"{\".concat(c[1]);\n        key = c[0];\n        optionsString = this.interpolate(optionsString, clonedOptions);\n        optionsString = optionsString.replace(/'/g, '\"');\n\n        try {\n          clonedOptions = JSON.parse(optionsString);\n          if (inheritedOptions) clonedOptions = _objectSpread$3(_objectSpread$3({}, inheritedOptions), clonedOptions);\n        } catch (e) {\n          this.logger.warn(\"failed parsing options string in nesting for key \".concat(key), e);\n          return \"\".concat(key).concat(sep).concat(optionsString);\n        }\n\n        delete clonedOptions.defaultValue;\n        return key;\n      }\n\n      while (match = this.nestingRegexp.exec(str)) {\n        var formatters = [];\n        var doReduce = false;\n\n        if (match[0].indexOf(this.formatSeparator) !== -1 && !/{.*}/.test(match[1])) {\n          var r = match[1].split(this.formatSeparator).map(function (elem) {\n            return elem.trim();\n          });\n          match[1] = r.shift();\n          formatters = r;\n          doReduce = true;\n        }\n\n        value = fc(handleHasOptions.call(this, match[1].trim(), clonedOptions), clonedOptions);\n        if (value && match[0] === str && typeof value !== 'string') return value;\n        if (typeof value !== 'string') value = makeString(value);\n\n        if (!value) {\n          this.logger.warn(\"missed to resolve \".concat(match[1], \" for nesting \").concat(str));\n          value = '';\n        }\n\n        if (doReduce) {\n          value = formatters.reduce(function (v, f) {\n            return _this2.format(v, f, options.lng, _objectSpread$3(_objectSpread$3({}, options), {}, {\n              interpolationkey: match[1].trim()\n            }));\n          }, value.trim());\n        }\n\n        str = str.replace(match[0], value);\n        this.regexp.lastIndex = 0;\n      }\n\n      return str;\n    }\n  }]);\n\n  return Interpolator;\n}();\n\nfunction ownKeys$4(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$4(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$4(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$4(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction parseFormatStr(formatStr) {\n  var formatName = formatStr.toLowerCase().trim();\n  var formatOptions = {};\n\n  if (formatStr.indexOf('(') > -1) {\n    var p = formatStr.split('(');\n    formatName = p[0].toLowerCase().trim();\n    var optStr = p[1].substring(0, p[1].length - 1);\n\n    if (formatName === 'currency' && optStr.indexOf(':') < 0) {\n      if (!formatOptions.currency) formatOptions.currency = optStr.trim();\n    } else if (formatName === 'relativetime' && optStr.indexOf(':') < 0) {\n      if (!formatOptions.range) formatOptions.range = optStr.trim();\n    } else {\n      var opts = optStr.split(';');\n      opts.forEach(function (opt) {\n        if (!opt) return;\n\n        var _opt$split = opt.split(':'),\n            _opt$split2 = _toArray(_opt$split),\n            key = _opt$split2[0],\n            rest = _opt$split2.slice(1);\n\n        var val = rest.join(':').trim().replace(/^'+|'+$/g, '');\n        if (!formatOptions[key.trim()]) formatOptions[key.trim()] = val;\n        if (val === 'false') formatOptions[key.trim()] = false;\n        if (val === 'true') formatOptions[key.trim()] = true;\n        if (!isNaN(val)) formatOptions[key.trim()] = parseInt(val, 10);\n      });\n    }\n  }\n\n  return {\n    formatName: formatName,\n    formatOptions: formatOptions\n  };\n}\n\nvar Formatter = function () {\n  function Formatter() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Formatter);\n\n    this.logger = baseLogger.create('formatter');\n    this.options = options;\n    this.formats = {\n      number: function number(val, lng, options) {\n        return new Intl.NumberFormat(lng, options).format(val);\n      },\n      currency: function currency(val, lng, options) {\n        return new Intl.NumberFormat(lng, _objectSpread$4(_objectSpread$4({}, options), {}, {\n          style: 'currency'\n        })).format(val);\n      },\n      datetime: function datetime(val, lng, options) {\n        return new Intl.DateTimeFormat(lng, _objectSpread$4({}, options)).format(val);\n      },\n      relativetime: function relativetime(val, lng, options) {\n        return new Intl.RelativeTimeFormat(lng, _objectSpread$4({}, options)).format(val, options.range || 'day');\n      },\n      list: function list(val, lng, options) {\n        return new Intl.ListFormat(lng, _objectSpread$4({}, options)).format(val);\n      }\n    };\n    this.init(options);\n  }\n\n  _createClass(Formatter, [{\n    key: \"init\",\n    value: function init(services) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        interpolation: {}\n      };\n      var iOpts = options.interpolation;\n      this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ',';\n    }\n  }, {\n    key: \"add\",\n    value: function add(name, fc) {\n      this.formats[name.toLowerCase().trim()] = fc;\n    }\n  }, {\n    key: \"format\",\n    value: function format(value, _format, lng, options) {\n      var _this = this;\n\n      var formats = _format.split(this.formatSeparator);\n\n      var result = formats.reduce(function (mem, f) {\n        var _parseFormatStr = parseFormatStr(f),\n            formatName = _parseFormatStr.formatName,\n            formatOptions = _parseFormatStr.formatOptions;\n\n        if (_this.formats[formatName]) {\n          var formatted = mem;\n\n          try {\n            var valOptions = options && options.formatParams && options.formatParams[options.interpolationkey] || {};\n            var l = valOptions.locale || valOptions.lng || options.locale || options.lng || lng;\n            formatted = _this.formats[formatName](mem, l, _objectSpread$4(_objectSpread$4(_objectSpread$4({}, formatOptions), options), valOptions));\n          } catch (error) {\n            _this.logger.warn(error);\n          }\n\n          return formatted;\n        } else {\n          _this.logger.warn(\"there was no format function for \".concat(formatName));\n        }\n\n        return mem;\n      }, value);\n      return result;\n    }\n  }]);\n\n  return Formatter;\n}();\n\nfunction ownKeys$5(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$5(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$5(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$5(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper$2(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$2(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$2() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction removePending(q, name) {\n  if (q.pending[name] !== undefined) {\n    delete q.pending[name];\n    q.pendingCount--;\n  }\n}\n\nvar Connector = function (_EventEmitter) {\n  _inherits(Connector, _EventEmitter);\n\n  var _super = _createSuper$2(Connector);\n\n  function Connector(backend, store, services) {\n    var _this;\n\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n    _classCallCheck(this, Connector);\n\n    _this = _super.call(this);\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n\n    _this.backend = backend;\n    _this.store = store;\n    _this.services = services;\n    _this.languageUtils = services.languageUtils;\n    _this.options = options;\n    _this.logger = baseLogger.create('backendConnector');\n    _this.waitingReads = [];\n    _this.maxParallelReads = options.maxParallelReads || 10;\n    _this.readingCalls = 0;\n    _this.maxRetries = options.maxRetries >= 0 ? options.maxRetries : 5;\n    _this.retryTimeout = options.retryTimeout >= 1 ? options.retryTimeout : 350;\n    _this.state = {};\n    _this.queue = [];\n\n    if (_this.backend && _this.backend.init) {\n      _this.backend.init(services, options.backend, options);\n    }\n\n    return _this;\n  }\n\n  _createClass(Connector, [{\n    key: \"queueLoad\",\n    value: function queueLoad(languages, namespaces, options, callback) {\n      var _this2 = this;\n\n      var toLoad = {};\n      var pending = {};\n      var toLoadLanguages = {};\n      var toLoadNamespaces = {};\n      languages.forEach(function (lng) {\n        var hasAllNamespaces = true;\n        namespaces.forEach(function (ns) {\n          var name = \"\".concat(lng, \"|\").concat(ns);\n\n          if (!options.reload && _this2.store.hasResourceBundle(lng, ns)) {\n            _this2.state[name] = 2;\n          } else if (_this2.state[name] < 0) ; else if (_this2.state[name] === 1) {\n            if (pending[name] === undefined) pending[name] = true;\n          } else {\n            _this2.state[name] = 1;\n            hasAllNamespaces = false;\n            if (pending[name] === undefined) pending[name] = true;\n            if (toLoad[name] === undefined) toLoad[name] = true;\n            if (toLoadNamespaces[ns] === undefined) toLoadNamespaces[ns] = true;\n          }\n        });\n        if (!hasAllNamespaces) toLoadLanguages[lng] = true;\n      });\n\n      if (Object.keys(toLoad).length || Object.keys(pending).length) {\n        this.queue.push({\n          pending: pending,\n          pendingCount: Object.keys(pending).length,\n          loaded: {},\n          errors: [],\n          callback: callback\n        });\n      }\n\n      return {\n        toLoad: Object.keys(toLoad),\n        pending: Object.keys(pending),\n        toLoadLanguages: Object.keys(toLoadLanguages),\n        toLoadNamespaces: Object.keys(toLoadNamespaces)\n      };\n    }\n  }, {\n    key: \"loaded\",\n    value: function loaded(name, err, data) {\n      var s = name.split('|');\n      var lng = s[0];\n      var ns = s[1];\n      if (err) this.emit('failedLoading', lng, ns, err);\n\n      if (data) {\n        this.store.addResourceBundle(lng, ns, data);\n      }\n\n      this.state[name] = err ? -1 : 2;\n      var loaded = {};\n      this.queue.forEach(function (q) {\n        pushPath(q.loaded, [lng], ns);\n        removePending(q, name);\n        if (err) q.errors.push(err);\n\n        if (q.pendingCount === 0 && !q.done) {\n          Object.keys(q.loaded).forEach(function (l) {\n            if (!loaded[l]) loaded[l] = {};\n            var loadedKeys = q.loaded[l];\n\n            if (loadedKeys.length) {\n              loadedKeys.forEach(function (ns) {\n                if (loaded[l][ns] === undefined) loaded[l][ns] = true;\n              });\n            }\n          });\n          q.done = true;\n\n          if (q.errors.length) {\n            q.callback(q.errors);\n          } else {\n            q.callback();\n          }\n        }\n      });\n      this.emit('loaded', loaded);\n      this.queue = this.queue.filter(function (q) {\n        return !q.done;\n      });\n    }\n  }, {\n    key: \"read\",\n    value: function read(lng, ns, fcName) {\n      var _this3 = this;\n\n      var tried = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var wait = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this.retryTimeout;\n      var callback = arguments.length > 5 ? arguments[5] : undefined;\n      if (!lng.length) return callback(null, {});\n\n      if (this.readingCalls >= this.maxParallelReads) {\n        this.waitingReads.push({\n          lng: lng,\n          ns: ns,\n          fcName: fcName,\n          tried: tried,\n          wait: wait,\n          callback: callback\n        });\n        return;\n      }\n\n      this.readingCalls++;\n      return this.backend[fcName](lng, ns, function (err, data) {\n        _this3.readingCalls--;\n\n        if (_this3.waitingReads.length > 0) {\n          var next = _this3.waitingReads.shift();\n\n          _this3.read(next.lng, next.ns, next.fcName, next.tried, next.wait, next.callback);\n        }\n\n        if (err && data && tried < _this3.maxRetries) {\n          setTimeout(function () {\n            _this3.read.call(_this3, lng, ns, fcName, tried + 1, wait * 2, callback);\n          }, wait);\n          return;\n        }\n\n        callback(err, data);\n      });\n    }\n  }, {\n    key: \"prepareLoading\",\n    value: function prepareLoading(languages, namespaces) {\n      var _this4 = this;\n\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var callback = arguments.length > 3 ? arguments[3] : undefined;\n\n      if (!this.backend) {\n        this.logger.warn('No backend was added via i18next.use. Will not load resources.');\n        return callback && callback();\n      }\n\n      if (typeof languages === 'string') languages = this.languageUtils.toResolveHierarchy(languages);\n      if (typeof namespaces === 'string') namespaces = [namespaces];\n      var toLoad = this.queueLoad(languages, namespaces, options, callback);\n\n      if (!toLoad.toLoad.length) {\n        if (!toLoad.pending.length) callback();\n        return null;\n      }\n\n      toLoad.toLoad.forEach(function (name) {\n        _this4.loadOne(name);\n      });\n    }\n  }, {\n    key: \"load\",\n    value: function load(languages, namespaces, callback) {\n      this.prepareLoading(languages, namespaces, {}, callback);\n    }\n  }, {\n    key: \"reload\",\n    value: function reload(languages, namespaces, callback) {\n      this.prepareLoading(languages, namespaces, {\n        reload: true\n      }, callback);\n    }\n  }, {\n    key: \"loadOne\",\n    value: function loadOne(name) {\n      var _this5 = this;\n\n      var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      var s = name.split('|');\n      var lng = s[0];\n      var ns = s[1];\n      this.read(lng, ns, 'read', undefined, undefined, function (err, data) {\n        if (err) _this5.logger.warn(\"\".concat(prefix, \"loading namespace \").concat(ns, \" for language \").concat(lng, \" failed\"), err);\n        if (!err && data) _this5.logger.log(\"\".concat(prefix, \"loaded namespace \").concat(ns, \" for language \").concat(lng), data);\n\n        _this5.loaded(name, err, data);\n      });\n    }\n  }, {\n    key: \"saveMissing\",\n    value: function saveMissing(languages, namespace, key, fallbackValue, isUpdate) {\n      var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n\n      if (this.services.utils && this.services.utils.hasLoadedNamespace && !this.services.utils.hasLoadedNamespace(namespace)) {\n        this.logger.warn(\"did not save key \\\"\".concat(key, \"\\\" as the namespace \\\"\").concat(namespace, \"\\\" was not yet loaded\"), 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n        return;\n      }\n\n      if (key === undefined || key === null || key === '') return;\n\n      if (this.backend && this.backend.create) {\n        this.backend.create(languages, namespace, key, fallbackValue, null, _objectSpread$5(_objectSpread$5({}, options), {}, {\n          isUpdate: isUpdate\n        }));\n      }\n\n      if (!languages || !languages[0]) return;\n      this.store.addResource(languages[0], namespace, key, fallbackValue);\n    }\n  }]);\n\n  return Connector;\n}(EventEmitter);\n\nfunction get() {\n  return {\n    debug: false,\n    initImmediate: true,\n    ns: ['translation'],\n    defaultNS: ['translation'],\n    fallbackLng: ['dev'],\n    fallbackNS: false,\n    supportedLngs: false,\n    nonExplicitSupportedLngs: false,\n    load: 'all',\n    preload: false,\n    simplifyPluralSuffix: true,\n    keySeparator: '.',\n    nsSeparator: ':',\n    pluralSeparator: '_',\n    contextSeparator: '_',\n    partialBundledLanguages: false,\n    saveMissing: false,\n    updateMissing: false,\n    saveMissingTo: 'fallback',\n    saveMissingPlurals: true,\n    missingKeyHandler: false,\n    missingInterpolationHandler: false,\n    postProcess: false,\n    postProcessPassResolved: false,\n    returnNull: true,\n    returnEmptyString: true,\n    returnObjects: false,\n    joinArrays: false,\n    returnedObjectHandler: false,\n    parseMissingKeyHandler: false,\n    appendNamespaceToMissingKey: false,\n    appendNamespaceToCIMode: false,\n    overloadTranslationOptionHandler: function handle(args) {\n      var ret = {};\n      if (_typeof(args[1]) === 'object') ret = args[1];\n      if (typeof args[1] === 'string') ret.defaultValue = args[1];\n      if (typeof args[2] === 'string') ret.tDescription = args[2];\n\n      if (_typeof(args[2]) === 'object' || _typeof(args[3]) === 'object') {\n        var options = args[3] || args[2];\n        Object.keys(options).forEach(function (key) {\n          ret[key] = options[key];\n        });\n      }\n\n      return ret;\n    },\n    interpolation: {\n      escapeValue: true,\n      format: function format(value, _format, lng, options) {\n        return value;\n      },\n      prefix: '{{',\n      suffix: '}}',\n      formatSeparator: ',',\n      unescapePrefix: '-',\n      nestingPrefix: '$t(',\n      nestingSuffix: ')',\n      nestingOptionsSeparator: ',',\n      maxReplaces: 1000,\n      skipOnVariables: true\n    }\n  };\n}\nfunction transformOptions(options) {\n  if (typeof options.ns === 'string') options.ns = [options.ns];\n  if (typeof options.fallbackLng === 'string') options.fallbackLng = [options.fallbackLng];\n  if (typeof options.fallbackNS === 'string') options.fallbackNS = [options.fallbackNS];\n\n  if (options.supportedLngs && options.supportedLngs.indexOf('cimode') < 0) {\n    options.supportedLngs = options.supportedLngs.concat(['cimode']);\n  }\n\n  return options;\n}\n\nfunction ownKeys$6(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$6(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$6(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$6(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper$3(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$3(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$3() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction noop() {}\n\nfunction bindMemberFunctions(inst) {\n  var mems = Object.getOwnPropertyNames(Object.getPrototypeOf(inst));\n  mems.forEach(function (mem) {\n    if (typeof inst[mem] === 'function') {\n      inst[mem] = inst[mem].bind(inst);\n    }\n  });\n}\n\nvar I18n = function (_EventEmitter) {\n  _inherits(I18n, _EventEmitter);\n\n  var _super = _createSuper$3(I18n);\n\n  function I18n() {\n    var _this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var callback = arguments.length > 1 ? arguments[1] : undefined;\n\n    _classCallCheck(this, I18n);\n\n    _this = _super.call(this);\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n\n    _this.options = transformOptions(options);\n    _this.services = {};\n    _this.logger = baseLogger;\n    _this.modules = {\n      external: []\n    };\n    bindMemberFunctions(_assertThisInitialized(_this));\n\n    if (callback && !_this.isInitialized && !options.isClone) {\n      if (!_this.options.initImmediate) {\n        _this.init(options, callback);\n\n        return _possibleConstructorReturn(_this, _assertThisInitialized(_this));\n      }\n\n      setTimeout(function () {\n        _this.init(options, callback);\n      }, 0);\n    }\n\n    return _this;\n  }\n\n  _createClass(I18n, [{\n    key: \"init\",\n    value: function init() {\n      var _this2 = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 ? arguments[1] : undefined;\n\n      if (typeof options === 'function') {\n        callback = options;\n        options = {};\n      }\n\n      if (!options.defaultNS && options.defaultNS !== false && options.ns) {\n        if (typeof options.ns === 'string') {\n          options.defaultNS = options.ns;\n        } else if (options.ns.indexOf('translation') < 0) {\n          options.defaultNS = options.ns[0];\n        }\n      }\n\n      var defOpts = get();\n      this.options = _objectSpread$6(_objectSpread$6(_objectSpread$6({}, defOpts), this.options), transformOptions(options));\n\n      if (this.options.compatibilityAPI !== 'v1') {\n        this.options.interpolation = _objectSpread$6(_objectSpread$6({}, defOpts.interpolation), this.options.interpolation);\n      }\n\n      if (options.keySeparator !== undefined) {\n        this.options.userDefinedKeySeparator = options.keySeparator;\n      }\n\n      if (options.nsSeparator !== undefined) {\n        this.options.userDefinedNsSeparator = options.nsSeparator;\n      }\n\n      function createClassOnDemand(ClassOrObject) {\n        if (!ClassOrObject) return null;\n        if (typeof ClassOrObject === 'function') return new ClassOrObject();\n        return ClassOrObject;\n      }\n\n      if (!this.options.isClone) {\n        if (this.modules.logger) {\n          baseLogger.init(createClassOnDemand(this.modules.logger), this.options);\n        } else {\n          baseLogger.init(null, this.options);\n        }\n\n        var formatter;\n\n        if (this.modules.formatter) {\n          formatter = this.modules.formatter;\n        } else if (typeof Intl !== 'undefined') {\n          formatter = Formatter;\n        }\n\n        var lu = new LanguageUtil(this.options);\n        this.store = new ResourceStore(this.options.resources, this.options);\n        var s = this.services;\n        s.logger = baseLogger;\n        s.resourceStore = this.store;\n        s.languageUtils = lu;\n        s.pluralResolver = new PluralResolver(lu, {\n          prepend: this.options.pluralSeparator,\n          compatibilityJSON: this.options.compatibilityJSON,\n          simplifyPluralSuffix: this.options.simplifyPluralSuffix\n        });\n\n        if (formatter && (!this.options.interpolation.format || this.options.interpolation.format === defOpts.interpolation.format)) {\n          s.formatter = createClassOnDemand(formatter);\n          s.formatter.init(s, this.options);\n          this.options.interpolation.format = s.formatter.format.bind(s.formatter);\n        }\n\n        s.interpolator = new Interpolator(this.options);\n        s.utils = {\n          hasLoadedNamespace: this.hasLoadedNamespace.bind(this)\n        };\n        s.backendConnector = new Connector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options);\n        s.backendConnector.on('*', function (event) {\n          for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            args[_key - 1] = arguments[_key];\n          }\n\n          _this2.emit.apply(_this2, [event].concat(args));\n        });\n\n        if (this.modules.languageDetector) {\n          s.languageDetector = createClassOnDemand(this.modules.languageDetector);\n          s.languageDetector.init(s, this.options.detection, this.options);\n        }\n\n        if (this.modules.i18nFormat) {\n          s.i18nFormat = createClassOnDemand(this.modules.i18nFormat);\n          if (s.i18nFormat.init) s.i18nFormat.init(this);\n        }\n\n        this.translator = new Translator(this.services, this.options);\n        this.translator.on('*', function (event) {\n          for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n            args[_key2 - 1] = arguments[_key2];\n          }\n\n          _this2.emit.apply(_this2, [event].concat(args));\n        });\n        this.modules.external.forEach(function (m) {\n          if (m.init) m.init(_this2);\n        });\n      }\n\n      this.format = this.options.interpolation.format;\n      if (!callback) callback = noop;\n\n      if (this.options.fallbackLng && !this.services.languageDetector && !this.options.lng) {\n        var codes = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n        if (codes.length > 0 && codes[0] !== 'dev') this.options.lng = codes[0];\n      }\n\n      if (!this.services.languageDetector && !this.options.lng) {\n        this.logger.warn('init: no languageDetector is used and no lng is defined');\n      }\n\n      var storeApi = ['getResource', 'hasResourceBundle', 'getResourceBundle', 'getDataByLanguage'];\n      storeApi.forEach(function (fcName) {\n        _this2[fcName] = function () {\n          var _this2$store;\n\n          return (_this2$store = _this2.store)[fcName].apply(_this2$store, arguments);\n        };\n      });\n      var storeApiChained = ['addResource', 'addResources', 'addResourceBundle', 'removeResourceBundle'];\n      storeApiChained.forEach(function (fcName) {\n        _this2[fcName] = function () {\n          var _this2$store2;\n\n          (_this2$store2 = _this2.store)[fcName].apply(_this2$store2, arguments);\n\n          return _this2;\n        };\n      });\n      var deferred = defer();\n\n      var load = function load() {\n        var finish = function finish(err, t) {\n          if (_this2.isInitialized && !_this2.initializedStoreOnce) _this2.logger.warn('init: i18next is already initialized. You should call init just once!');\n          _this2.isInitialized = true;\n          if (!_this2.options.isClone) _this2.logger.log('initialized', _this2.options);\n\n          _this2.emit('initialized', _this2.options);\n\n          deferred.resolve(t);\n          callback(err, t);\n        };\n\n        if (_this2.languages && _this2.options.compatibilityAPI !== 'v1' && !_this2.isInitialized) return finish(null, _this2.t.bind(_this2));\n\n        _this2.changeLanguage(_this2.options.lng, finish);\n      };\n\n      if (this.options.resources || !this.options.initImmediate) {\n        load();\n      } else {\n        setTimeout(load, 0);\n      }\n\n      return deferred;\n    }\n  }, {\n    key: \"loadResources\",\n    value: function loadResources(language) {\n      var _this3 = this;\n\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n      var usedCallback = callback;\n      var usedLng = typeof language === 'string' ? language : this.language;\n      if (typeof language === 'function') usedCallback = language;\n\n      if (!this.options.resources || this.options.partialBundledLanguages) {\n        if (usedLng && usedLng.toLowerCase() === 'cimode') return usedCallback();\n        var toLoad = [];\n\n        var append = function append(lng) {\n          if (!lng) return;\n\n          var lngs = _this3.services.languageUtils.toResolveHierarchy(lng);\n\n          lngs.forEach(function (l) {\n            if (toLoad.indexOf(l) < 0) toLoad.push(l);\n          });\n        };\n\n        if (!usedLng) {\n          var fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n          fallbacks.forEach(function (l) {\n            return append(l);\n          });\n        } else {\n          append(usedLng);\n        }\n\n        if (this.options.preload) {\n          this.options.preload.forEach(function (l) {\n            return append(l);\n          });\n        }\n\n        this.services.backendConnector.load(toLoad, this.options.ns, function (e) {\n          if (!e && !_this3.resolvedLanguage && _this3.language) _this3.setResolvedLanguage(_this3.language);\n          usedCallback(e);\n        });\n      } else {\n        usedCallback(null);\n      }\n    }\n  }, {\n    key: \"reloadResources\",\n    value: function reloadResources(lngs, ns, callback) {\n      var deferred = defer();\n      if (!lngs) lngs = this.languages;\n      if (!ns) ns = this.options.ns;\n      if (!callback) callback = noop;\n      this.services.backendConnector.reload(lngs, ns, function (err) {\n        deferred.resolve();\n        callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"use\",\n    value: function use(module) {\n      if (!module) throw new Error('You are passing an undefined module! Please check the object you are passing to i18next.use()');\n      if (!module.type) throw new Error('You are passing a wrong module! Please check the object you are passing to i18next.use()');\n\n      if (module.type === 'backend') {\n        this.modules.backend = module;\n      }\n\n      if (module.type === 'logger' || module.log && module.warn && module.error) {\n        this.modules.logger = module;\n      }\n\n      if (module.type === 'languageDetector') {\n        this.modules.languageDetector = module;\n      }\n\n      if (module.type === 'i18nFormat') {\n        this.modules.i18nFormat = module;\n      }\n\n      if (module.type === 'postProcessor') {\n        postProcessor.addPostProcessor(module);\n      }\n\n      if (module.type === 'formatter') {\n        this.modules.formatter = module;\n      }\n\n      if (module.type === '3rdParty') {\n        this.modules.external.push(module);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"setResolvedLanguage\",\n    value: function setResolvedLanguage(l) {\n      if (!l || !this.languages) return;\n      if (['cimode', 'dev'].indexOf(l) > -1) return;\n\n      for (var li = 0; li < this.languages.length; li++) {\n        var lngInLngs = this.languages[li];\n        if (['cimode', 'dev'].indexOf(lngInLngs) > -1) continue;\n\n        if (this.store.hasLanguageSomeTranslations(lngInLngs)) {\n          this.resolvedLanguage = lngInLngs;\n          break;\n        }\n      }\n    }\n  }, {\n    key: \"changeLanguage\",\n    value: function changeLanguage(lng, callback) {\n      var _this4 = this;\n\n      this.isLanguageChangingTo = lng;\n      var deferred = defer();\n      this.emit('languageChanging', lng);\n\n      var setLngProps = function setLngProps(l) {\n        _this4.language = l;\n        _this4.languages = _this4.services.languageUtils.toResolveHierarchy(l);\n        _this4.resolvedLanguage = undefined;\n\n        _this4.setResolvedLanguage(l);\n      };\n\n      var done = function done(err, l) {\n        if (l) {\n          setLngProps(l);\n\n          _this4.translator.changeLanguage(l);\n\n          _this4.isLanguageChangingTo = undefined;\n\n          _this4.emit('languageChanged', l);\n\n          _this4.logger.log('languageChanged', l);\n        } else {\n          _this4.isLanguageChangingTo = undefined;\n        }\n\n        deferred.resolve(function () {\n          return _this4.t.apply(_this4, arguments);\n        });\n        if (callback) callback(err, function () {\n          return _this4.t.apply(_this4, arguments);\n        });\n      };\n\n      var setLng = function setLng(lngs) {\n        if (!lng && !lngs && _this4.services.languageDetector) lngs = [];\n        var l = typeof lngs === 'string' ? lngs : _this4.services.languageUtils.getBestMatchFromCodes(lngs);\n\n        if (l) {\n          if (!_this4.language) {\n            setLngProps(l);\n          }\n\n          if (!_this4.translator.language) _this4.translator.changeLanguage(l);\n          if (_this4.services.languageDetector) _this4.services.languageDetector.cacheUserLanguage(l);\n        }\n\n        _this4.loadResources(l, function (err) {\n          done(err, l);\n        });\n      };\n\n      if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {\n        setLng(this.services.languageDetector.detect());\n      } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {\n        this.services.languageDetector.detect(setLng);\n      } else {\n        setLng(lng);\n      }\n\n      return deferred;\n    }\n  }, {\n    key: \"getFixedT\",\n    value: function getFixedT(lng, ns, keyPrefix) {\n      var _this5 = this;\n\n      var fixedT = function fixedT(key, opts) {\n        var options;\n\n        if (_typeof(opts) !== 'object') {\n          for (var _len3 = arguments.length, rest = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n            rest[_key3 - 2] = arguments[_key3];\n          }\n\n          options = _this5.options.overloadTranslationOptionHandler([key, opts].concat(rest));\n        } else {\n          options = _objectSpread$6({}, opts);\n        }\n\n        options.lng = options.lng || fixedT.lng;\n        options.lngs = options.lngs || fixedT.lngs;\n        options.ns = options.ns || fixedT.ns;\n        options.keyPrefix = options.keyPrefix || keyPrefix || fixedT.keyPrefix;\n        var keySeparator = _this5.options.keySeparator || '.';\n        var resultKey = options.keyPrefix ? \"\".concat(options.keyPrefix).concat(keySeparator).concat(key) : key;\n        return _this5.t(resultKey, options);\n      };\n\n      if (typeof lng === 'string') {\n        fixedT.lng = lng;\n      } else {\n        fixedT.lngs = lng;\n      }\n\n      fixedT.ns = ns;\n      fixedT.keyPrefix = keyPrefix;\n      return fixedT;\n    }\n  }, {\n    key: \"t\",\n    value: function t() {\n      var _this$translator;\n\n      return this.translator && (_this$translator = this.translator).translate.apply(_this$translator, arguments);\n    }\n  }, {\n    key: \"exists\",\n    value: function exists() {\n      var _this$translator2;\n\n      return this.translator && (_this$translator2 = this.translator).exists.apply(_this$translator2, arguments);\n    }\n  }, {\n    key: \"setDefaultNamespace\",\n    value: function setDefaultNamespace(ns) {\n      this.options.defaultNS = ns;\n    }\n  }, {\n    key: \"hasLoadedNamespace\",\n    value: function hasLoadedNamespace(ns) {\n      var _this6 = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (!this.isInitialized) {\n        this.logger.warn('hasLoadedNamespace: i18next was not initialized', this.languages);\n        return false;\n      }\n\n      if (!this.languages || !this.languages.length) {\n        this.logger.warn('hasLoadedNamespace: i18n.languages were undefined or empty', this.languages);\n        return false;\n      }\n\n      var lng = this.resolvedLanguage || this.languages[0];\n      var fallbackLng = this.options ? this.options.fallbackLng : false;\n      var lastLng = this.languages[this.languages.length - 1];\n      if (lng.toLowerCase() === 'cimode') return true;\n\n      var loadNotPending = function loadNotPending(l, n) {\n        var loadState = _this6.services.backendConnector.state[\"\".concat(l, \"|\").concat(n)];\n\n        return loadState === -1 || loadState === 2;\n      };\n\n      if (options.precheck) {\n        var preResult = options.precheck(this, loadNotPending);\n        if (preResult !== undefined) return preResult;\n      }\n\n      if (this.hasResourceBundle(lng, ns)) return true;\n      if (!this.services.backendConnector.backend || this.options.resources && !this.options.partialBundledLanguages) return true;\n      if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;\n      return false;\n    }\n  }, {\n    key: \"loadNamespaces\",\n    value: function loadNamespaces(ns, callback) {\n      var _this7 = this;\n\n      var deferred = defer();\n\n      if (!this.options.ns) {\n        callback && callback();\n        return Promise.resolve();\n      }\n\n      if (typeof ns === 'string') ns = [ns];\n      ns.forEach(function (n) {\n        if (_this7.options.ns.indexOf(n) < 0) _this7.options.ns.push(n);\n      });\n      this.loadResources(function (err) {\n        deferred.resolve();\n        if (callback) callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"loadLanguages\",\n    value: function loadLanguages(lngs, callback) {\n      var deferred = defer();\n      if (typeof lngs === 'string') lngs = [lngs];\n      var preloaded = this.options.preload || [];\n      var newLngs = lngs.filter(function (lng) {\n        return preloaded.indexOf(lng) < 0;\n      });\n\n      if (!newLngs.length) {\n        if (callback) callback();\n        return Promise.resolve();\n      }\n\n      this.options.preload = preloaded.concat(newLngs);\n      this.loadResources(function (err) {\n        deferred.resolve();\n        if (callback) callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"dir\",\n    value: function dir(lng) {\n      if (!lng) lng = this.resolvedLanguage || (this.languages && this.languages.length > 0 ? this.languages[0] : this.language);\n      if (!lng) return 'rtl';\n      var rtlLngs = ['ar', 'shu', 'sqr', 'ssh', 'xaa', 'yhd', 'yud', 'aao', 'abh', 'abv', 'acm', 'acq', 'acw', 'acx', 'acy', 'adf', 'ads', 'aeb', 'aec', 'afb', 'ajp', 'apc', 'apd', 'arb', 'arq', 'ars', 'ary', 'arz', 'auz', 'avl', 'ayh', 'ayl', 'ayn', 'ayp', 'bbz', 'pga', 'he', 'iw', 'ps', 'pbt', 'pbu', 'pst', 'prp', 'prd', 'ug', 'ur', 'ydd', 'yds', 'yih', 'ji', 'yi', 'hbo', 'men', 'xmn', 'fa', 'jpr', 'peo', 'pes', 'prs', 'dv', 'sam', 'ckb'];\n      return rtlLngs.indexOf(this.services.languageUtils.getLanguagePartFromCode(lng)) > -1 || lng.toLowerCase().indexOf('-arab') > 1 ? 'rtl' : 'ltr';\n    }\n  }, {\n    key: \"cloneInstance\",\n    value: function cloneInstance() {\n      var _this8 = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n\n      var mergedOptions = _objectSpread$6(_objectSpread$6(_objectSpread$6({}, this.options), options), {\n        isClone: true\n      });\n\n      var clone = new I18n(mergedOptions);\n      var membersToCopy = ['store', 'services', 'language'];\n      membersToCopy.forEach(function (m) {\n        clone[m] = _this8[m];\n      });\n      clone.services = _objectSpread$6({}, this.services);\n      clone.services.utils = {\n        hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n      };\n      clone.translator = new Translator(clone.services, clone.options);\n      clone.translator.on('*', function (event) {\n        for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n          args[_key4 - 1] = arguments[_key4];\n        }\n\n        clone.emit.apply(clone, [event].concat(args));\n      });\n      clone.init(mergedOptions, callback);\n      clone.translator.options = clone.options;\n      clone.translator.backendConnector.services.utils = {\n        hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n      };\n      return clone;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return {\n        options: this.options,\n        store: this.store,\n        language: this.language,\n        languages: this.languages,\n        resolvedLanguage: this.resolvedLanguage\n      };\n    }\n  }]);\n\n  return I18n;\n}(EventEmitter);\n\n_defineProperty(I18n, \"createInstance\", function () {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var callback = arguments.length > 1 ? arguments[1] : undefined;\n  return new I18n(options, callback);\n});\n\nvar instance = I18n.createInstance();\ninstance.createInstance = I18n.createInstance;\n\nvar createInstance = instance.createInstance;\nvar init = instance.init;\nvar loadResources = instance.loadResources;\nvar reloadResources = instance.reloadResources;\nvar use = instance.use;\nvar changeLanguage = instance.changeLanguage;\nvar getFixedT = instance.getFixedT;\nvar t = instance.t;\nvar exists = instance.exists;\nvar setDefaultNamespace = instance.setDefaultNamespace;\nvar hasLoadedNamespace = instance.hasLoadedNamespace;\nvar loadNamespaces = instance.loadNamespaces;\nvar loadLanguages = instance.loadLanguages;\n\nexport default instance;\nexport { changeLanguage, createInstance, exists, getFixedT, hasLoadedNamespace, init, loadLanguages, loadNamespaces, loadResources, reloadResources, setDefaultNamespace, t, use };\n","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableRest();\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import {hooks} from 'app/client/Hooks';\nimport {getGristConfig} from 'app/common/urlUtils';\nimport {DomContents} from 'grainjs';\nimport i18next from 'i18next';\nimport {G} from 'grainjs/dist/cjs/lib/browserGlobals';\n\nexport async function setupLocale() {\n  const now = Date.now();\n  const supportedLngs = getGristConfig().supportedLngs ?? ['en'];\n  const lng = detectCurrentLang();\n  const ns = getGristConfig().namespaces ?? ['client'];\n  // Initialize localization plugin\n  try {\n    // We don't await this promise, as it is resolved synchronously due to initImmediate: false.\n    i18next.init({\n      // By default we use english language.\n      fallbackLng: 'en',\n      // We will load resources ourselves.\n      initImmediate: false,\n      // Read language from navigator object.\n      lng,\n      // By default we use client namespace.\n      defaultNS: 'client',\n      // Read namespaces that are supported by the server.\n      // TODO: this can be converted to a dynamic list of namespaces, for async components.\n      // for now just import all what server offers.\n      // We can fallback to client namespace for any addons.\n      fallbackNS: 'client',\n      ns\n    }).catch((err: any) => {\n      // This should not happen, the promise should be resolved synchronously, without\n      // any errors reported.\n      console.error(\"i18next failed unexpectedly\", err);\n    });\n    // Detect what is resolved languages to load.\n    const languages = i18next.languages;\n    // Fetch all json files (all of which should be already preloaded);\n    const loadPath = `${hooks.baseURI || document.baseURI}locales/{{lng}}.{{ns}}.json`;\n    const pathsToLoad: Promise<any>[] = [];\n    async function load(lang: string, n: string) {\n      const resourceUrl = loadPath.replace('{{lng}}', lang.replace(\"-\", \"_\")).replace('{{ns}}', n);\n      const response = await fetch(resourceUrl);\n      if (!response.ok) {\n        // Throw only if we don't have any fallbacks.\n        if (lang === i18next.options.fallbackLng && n === i18next.options.defaultNS) {\n          throw new Error(`Failed to load ${resourceUrl}`);\n        } else {\n          console.warn(`Failed to load ${resourceUrl}`);\n          return;\n        }\n      }\n      i18next.addResourceBundle(lang, n, await response.json());\n    }\n    for (const lang of languages.filter((l) => supportedLngs.includes(l))) {\n      for (const n of ns) {\n        pathsToLoad.push(load(lang, n));\n      }\n    }\n    await Promise.all(pathsToLoad);\n    console.log(\"Localization initialized in \" + (Date.now() - now) + \"ms\");\n  } catch (error: any) {\n    reportError(error);\n  }\n}\n\nexport function detectCurrentLang() {\n  const { userLocale, supportedLngs } = getGristConfig();\n  const detected = userLocale\n    || document.cookie.match(/grist_user_locale=([^;]+)/)?.[1]\n    || window.navigator.language\n    || 'en';\n  const supportedList = supportedLngs ?? ['en'];\n  // If we have this language in the list (or more general version) mark it as selected.\n  // Compare languages in lower case, as navigator.language can return en-US, en-us (for older Safari).\n  const selected = supportedList.find(supported => supported.toLowerCase() === detected.toLowerCase()) ??\n    supportedList.find(supported => supported === detected.split(/[-_]/)[0]) ?? 'en';\n  return selected;\n}\n\nexport function setAnonymousLocale(lng: string) {\n  document.cookie = lng ? `grist_user_locale=${lng}; path=/; max-age=31536000`\n                        : 'grist_user_locale=; path=/; expires=Thu, 01 Jan 1970 00:00:00 UTC';\n}\n\n/**\n * Resolves the translation of the given key using the given options.\n */\nexport function tString(key: string, args?: any, instance = i18next): string {\n  if (!instance.exists(key, args || undefined)) {\n    const error = new Error(`Missing translation for key: ${key} and language: ${i18next.language}`);\n    reportError(error);\n  }\n  return instance.t(key, args);\n}\n\n// We will try to infer result from the arguments passed to `t` function.\n// For plain objects we expect string as a result. If any property doesn't look as a plain value\n// we assume that it might be a dom node and the result is DomContents.\ntype InferResult<T> = T extends Record<string, string | number | boolean>|undefined|null ? string : DomContents;\n\n/**\n * Resolves the translation of the given key and substitutes. Supports dom elements interpolation.\n */\nexport function t<T extends Record<string, any>>(key: string, args?: T|null, instance = i18next): InferResult<T> {\n  return domT(key, args, instance.t);\n}\n\nfunction domT(key: string, args: any, tImpl: typeof i18next.t) {\n  // If there are any DomElements in args, handle it with missingInterpolationHandler.\n  const domElements = !args ? [] : Object.entries(args).filter(([_, value]) => isLikeDomContents(value));\n  if (!args || !domElements.length) {\n    return tImpl(key, args || undefined);\n  } else {\n    // Make a copy of the arguments, and remove any dom elements from it. It will instruct\n    // i18next library to use `missingInterpolationHandler` handler.\n    const copy = {...args};\n    domElements.forEach(([prop]) => delete copy[prop]);\n\n    // Passing `missingInterpolationHandler` will allow as to resolve all missing keys\n    // and replace them with a marker.\n    const result: string = tImpl(key, {...copy, missingInterpolationHandler});\n\n    // Now replace all markers with dom elements passed as arguments.\n    const parts = result.split(/(\\[\\[\\[[^\\]]+?\\]\\]\\])/);\n    for (let i = 1; i < parts.length; i += 2) { // Every second element is our dom element.\n      const propName = parts[i].substring(3, parts[i].length - 3);\n      const domElement = args[propName] ?? `{{${propName}}}`; // If the prop is not there, simulate default behavior.\n      parts[i] = domElement;\n    }\n    return parts.filter(p => p !== '') as any; // Remove empty parts.\n  }\n}\n\n/**\n * Checks if the given key exists in the any supported language.\n */\nexport function hasTranslation(key: string) {\n  return i18next.exists(key);\n}\n\nfunction missingInterpolationHandler(key: string, value: any) {\n  return `[[[${value[1]}]]]`;\n}\n\n/**\n * Very naive detection if an element has DomContents type.\n */\nfunction isLikeDomContents(value: any): boolean {\n  // As null and undefined are valid DomContents values, we don't treat them as such.\n  if (value === null || value === undefined) { return false; }\n  return value instanceof G.Node || // Node\n    (Array.isArray(value) && isLikeDomContents(value[0])) || // DomComputed\n    typeof value === 'function'; // DomMethod\n}\n\n/**\n * Helper function to create a scoped t function. Scoped t function is bounded to a specific\n * namespace and a key prefix (a scope).\n */\nexport function makeT(scope: string, instance?: typeof i18next) {\n  // Can't create the scopedInstance yet as it might not be initialized.\n  let scopedInstance: null|typeof i18next = null;\n  let scopedResolver: null|typeof i18next.t = null;\n  return function<T extends Record<string, any>>(key: string, args?: T|null) {\n    // Create a scoped instance with disabled namespace and nested features.\n    // This enables keys like `key1.key2:key3` to be resolved properly.\n    if (!scopedInstance) {\n      scopedInstance = (instance ?? i18next).cloneInstance({\n        keySeparator: false,\n        nsSeparator: false,\n        saveMissing: true,\n        missingKeyHandler: (lng, ns, _key) => console.warn(`Missing translation for key: ${_key}`)\n      });\n\n      // Create a version of `t` function that will use the provided prefix as default.\n      const fixedResolver = scopedInstance.getFixedT(null, null, scope);\n\n      // Override the resolver with a custom one, that will use the argument as a default.\n      // This will remove all the overloads from the function, but we don't need them.\n      scopedResolver = (_key: string, _args?: any) => fixedResolver(_key, {defaultValue: _key, ..._args});\n    }\n    return domT(key, args, scopedResolver!);\n  };\n}\n","// Current version.\nexport var VERSION = '1.12.1';\n\n// Establish the root object, `window` (`self`) in the browser, `global`\n// on the server, or `this` in some virtual machines. We use `self`\n// instead of `window` for `WebWorker` support.\nexport var root = typeof self == 'object' && self.self === self && self ||\n          typeof global == 'object' && global.global === global && global ||\n          Function('return this')() ||\n          {};\n\n// Save bytes in the minified (but not gzipped) version:\nexport var ArrayProto = Array.prototype, ObjProto = Object.prototype;\nexport var SymbolProto = typeof Symbol !== 'undefined' ? Symbol.prototype : null;\n\n// Create quick reference variables for speed access to core prototypes.\nexport var push = ArrayProto.push,\n    slice = ArrayProto.slice,\n    toString = ObjProto.toString,\n    hasOwnProperty = ObjProto.hasOwnProperty;\n\n// Modern feature detection.\nexport var supportsArrayBuffer = typeof ArrayBuffer !== 'undefined',\n    supportsDataView = typeof DataView !== 'undefined';\n\n// All **ECMAScript 5+** native function implementations that we hope to use\n// are declared here.\nexport var nativeIsArray = Array.isArray,\n    nativeKeys = Object.keys,\n    nativeCreate = Object.create,\n    nativeIsView = supportsArrayBuffer && ArrayBuffer.isView;\n\n// Create references to these builtin functions because we override them.\nexport var _isNaN = isNaN,\n    _isFinite = isFinite;\n\n// Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\nexport var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\nexport var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\n  'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n\n// The largest integer that can be represented exactly.\nexport var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\n","// Some functions take a variable number of arguments, or a few expected\n// arguments at the beginning and then a variable number of values to operate\n// on. This helper accumulates all remaining arguments past the functions\n// argument length (or an explicit `startIndex`), into an array that becomes\n// the last argument. Similar to ES6s \"rest parameter\".\nexport default function restArguments(func, startIndex) {\n  startIndex = startIndex == null ? func.length - 1 : +startIndex;\n  return function() {\n    var length = Math.max(arguments.length - startIndex, 0),\n        rest = Array(length),\n        index = 0;\n    for (; index < length; index++) {\n      rest[index] = arguments[index + startIndex];\n    }\n    switch (startIndex) {\n      case 0: return func.call(this, rest);\n      case 1: return func.call(this, arguments[0], rest);\n      case 2: return func.call(this, arguments[0], arguments[1], rest);\n    }\n    var args = Array(startIndex + 1);\n    for (index = 0; index < startIndex; index++) {\n      args[index] = arguments[index];\n    }\n    args[startIndex] = rest;\n    return func.apply(this, args);\n  };\n}\n","// Is a given variable an object?\nexport default function isObject(obj) {\n  var type = typeof obj;\n  return type === 'function' || type === 'object' && !!obj;\n}\n","// Is a given value equal to null?\nexport default function isNull(obj) {\n  return obj === null;\n}\n","// Is a given variable undefined?\nexport default function isUndefined(obj) {\n  return obj === void 0;\n}\n","import { toString } from './_setup.js';\n\n// Is a given value a boolean?\nexport default function isBoolean(obj) {\n  return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\n}\n","// Is a given value a DOM element?\nexport default function isElement(obj) {\n  return !!(obj && obj.nodeType === 1);\n}\n","import { toString } from './_setup.js';\n\n// Internal function for creating a `toString`-based type tester.\nexport default function tagTester(name) {\n  var tag = '[object ' + name + ']';\n  return function(obj) {\n    return toString.call(obj) === tag;\n  };\n}\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('String');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Number');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Date');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('RegExp');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Error');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Symbol');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('ArrayBuffer');\n","import tagTester from './_tagTester.js';\nimport { root } from './_setup.js';\n\nvar isFunction = tagTester('Function');\n\n// Optimize `isFunction` if appropriate. Work around some `typeof` bugs in old\n// v8, IE 11 (#1621), Safari 8 (#1929), and PhantomJS (#2236).\nvar nodelist = root.document && root.document.childNodes;\nif (typeof /./ != 'function' && typeof Int8Array != 'object' && typeof nodelist != 'function') {\n  isFunction = function(obj) {\n    return typeof obj == 'function' || false;\n  };\n}\n\nexport default isFunction;\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Object');\n","import { supportsDataView } from './_setup.js';\nimport hasObjectTag from './_hasObjectTag.js';\n\n// In IE 10 - Edge 13, `DataView` has string tag `'[object Object]'`.\n// In IE 11, the most common among them, this problem also applies to\n// `Map`, `WeakMap` and `Set`.\nexport var hasStringTagBug = (\n      supportsDataView && hasObjectTag(new DataView(new ArrayBuffer(8)))\n    ),\n    isIE11 = (typeof Map !== 'undefined' && hasObjectTag(new Map));\n","import tagTester from './_tagTester.js';\nimport isFunction from './isFunction.js';\nimport isArrayBuffer from './isArrayBuffer.js';\nimport { hasStringTagBug } from './_stringTagBug.js';\n\nvar isDataView = tagTester('DataView');\n\n// In IE 10 - Edge 13, we need a different heuristic\n// to determine whether an object is a `DataView`.\nfunction ie10IsDataView(obj) {\n  return obj != null && isFunction(obj.getInt8) && isArrayBuffer(obj.buffer);\n}\n\nexport default (hasStringTagBug ? ie10IsDataView : isDataView);\n","import { nativeIsArray } from './_setup.js';\nimport tagTester from './_tagTester.js';\n\n// Is a given value an array?\n// Delegates to ECMA5's native `Array.isArray`.\nexport default nativeIsArray || tagTester('Array');\n","import { hasOwnProperty } from './_setup.js';\n\n// Internal function to check whether `key` is an own property name of `obj`.\nexport default function has(obj, key) {\n  return obj != null && hasOwnProperty.call(obj, key);\n}\n","import tagTester from './_tagTester.js';\nimport has from './_has.js';\n\nvar isArguments = tagTester('Arguments');\n\n// Define a fallback version of the method in browsers (ahem, IE < 9), where\n// there isn't any inspectable \"Arguments\" type.\n(function() {\n  if (!isArguments(arguments)) {\n    isArguments = function(obj) {\n      return has(obj, 'callee');\n    };\n  }\n}());\n\nexport default isArguments;\n","import { _isFinite } from './_setup.js';\nimport isSymbol from './isSymbol.js';\n\n// Is a given object a finite number?\nexport default function isFinite(obj) {\n  return !isSymbol(obj) && _isFinite(obj) && !isNaN(parseFloat(obj));\n}\n","import { _isNaN } from './_setup.js';\nimport isNumber from './isNumber.js';\n\n// Is the given value `NaN`?\nexport default function isNaN(obj) {\n  return isNumber(obj) && _isNaN(obj);\n}\n","// Predicate-generating function. Often useful outside of Underscore.\nexport default function constant(value) {\n  return function() {\n    return value;\n  };\n}\n","import { MAX_ARRAY_INDEX } from './_setup.js';\n\n// Common internal logic for `isArrayLike` and `isBufferLike`.\nexport default function createSizePropertyCheck(getSizeProperty) {\n  return function(collection) {\n    var sizeProperty = getSizeProperty(collection);\n    return typeof sizeProperty == 'number' && sizeProperty >= 0 && sizeProperty <= MAX_ARRAY_INDEX;\n  }\n}\n","// Internal helper to generate a function to obtain property `key` from `obj`.\nexport default function shallowProperty(key) {\n  return function(obj) {\n    return obj == null ? void 0 : obj[key];\n  };\n}\n","import shallowProperty from './_shallowProperty.js';\n\n// Internal helper to obtain the `byteLength` property of an object.\nexport default shallowProperty('byteLength');\n","import createSizePropertyCheck from './_createSizePropertyCheck.js';\nimport getByteLength from './_getByteLength.js';\n\n// Internal helper to determine whether we should spend extensive checks against\n// `ArrayBuffer` et al.\nexport default createSizePropertyCheck(getByteLength);\n","import { supportsArrayBuffer, nativeIsView, toString } from './_setup.js';\nimport isDataView from './isDataView.js';\nimport constant from './constant.js';\nimport isBufferLike from './_isBufferLike.js';\n\n// Is a given value a typed array?\nvar typedArrayPattern = /\\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\\]/;\nfunction isTypedArray(obj) {\n  // `ArrayBuffer.isView` is the most future-proof, so use it when available.\n  // Otherwise, fall back on the above regular expression.\n  return nativeIsView ? (nativeIsView(obj) && !isDataView(obj)) :\n                isBufferLike(obj) && typedArrayPattern.test(toString.call(obj));\n}\n\nexport default supportsArrayBuffer ? isTypedArray : constant(false);\n","import shallowProperty from './_shallowProperty.js';\n\n// Internal helper to obtain the `length` property of an object.\nexport default shallowProperty('length');\n","import { nonEnumerableProps, ObjProto } from './_setup.js';\nimport isFunction from './isFunction.js';\nimport has from './_has.js';\n\n// Internal helper to create a simple lookup structure.\n// `collectNonEnumProps` used to depend on `_.contains`, but this led to\n// circular imports. `emulatedSet` is a one-off solution that only works for\n// arrays of strings.\nfunction emulatedSet(keys) {\n  var hash = {};\n  for (var l = keys.length, i = 0; i < l; ++i) hash[keys[i]] = true;\n  return {\n    contains: function(key) { return hash[key]; },\n    push: function(key) {\n      hash[key] = true;\n      return keys.push(key);\n    }\n  };\n}\n\n// Internal helper. Checks `keys` for the presence of keys in IE < 9 that won't\n// be iterated by `for key in ...` and thus missed. Extends `keys` in place if\n// needed.\nexport default function collectNonEnumProps(obj, keys) {\n  keys = emulatedSet(keys);\n  var nonEnumIdx = nonEnumerableProps.length;\n  var constructor = obj.constructor;\n  var proto = isFunction(constructor) && constructor.prototype || ObjProto;\n\n  // Constructor is a special case.\n  var prop = 'constructor';\n  if (has(obj, prop) && !keys.contains(prop)) keys.push(prop);\n\n  while (nonEnumIdx--) {\n    prop = nonEnumerableProps[nonEnumIdx];\n    if (prop in obj && obj[prop] !== proto[prop] && !keys.contains(prop)) {\n      keys.push(prop);\n    }\n  }\n}\n","import isObject from './isObject.js';\nimport { nativeKeys, hasEnumBug } from './_setup.js';\nimport has from './_has.js';\nimport collectNonEnumProps from './_collectNonEnumProps.js';\n\n// Retrieve the names of an object's own properties.\n// Delegates to **ECMAScript 5**'s native `Object.keys`.\nexport default function keys(obj) {\n  if (!isObject(obj)) return [];\n  if (nativeKeys) return nativeKeys(obj);\n  var keys = [];\n  for (var key in obj) if (has(obj, key)) keys.push(key);\n  // Ahem, IE < 9.\n  if (hasEnumBug) collectNonEnumProps(obj, keys);\n  return keys;\n}\n","import getLength from './_getLength.js';\nimport isArray from './isArray.js';\nimport isString from './isString.js';\nimport isArguments from './isArguments.js';\nimport keys from './keys.js';\n\n// Is a given array, string, or object empty?\n// An \"empty\" object has no enumerable own-properties.\nexport default function isEmpty(obj) {\n  if (obj == null) return true;\n  // Skip the more expensive `toString`-based type checks if `obj` has no\n  // `.length`.\n  var length = getLength(obj);\n  if (typeof length == 'number' && (\n    isArray(obj) || isString(obj) || isArguments(obj)\n  )) return length === 0;\n  return getLength(keys(obj)) === 0;\n}\n","import keys from './keys.js';\n\n// Returns whether an object has a given set of `key:value` pairs.\nexport default function isMatch(object, attrs) {\n  var _keys = keys(attrs), length = _keys.length;\n  if (object == null) return !length;\n  var obj = Object(object);\n  for (var i = 0; i < length; i++) {\n    var key = _keys[i];\n    if (attrs[key] !== obj[key] || !(key in obj)) return false;\n  }\n  return true;\n}\n","import { VERSION } from './_setup.js';\n\n// If Underscore is called as a function, it returns a wrapped object that can\n// be used OO-style. This wrapper holds altered versions of all functions added\n// through `_.mixin`. Wrapped objects may be chained.\nexport default function _(obj) {\n  if (obj instanceof _) return obj;\n  if (!(this instanceof _)) return new _(obj);\n  this._wrapped = obj;\n}\n\n_.VERSION = VERSION;\n\n// Extracts the result from a wrapped and chained object.\n_.prototype.value = function() {\n  return this._wrapped;\n};\n\n// Provide unwrapping proxies for some methods used in engine operations\n// such as arithmetic and JSON stringification.\n_.prototype.valueOf = _.prototype.toJSON = _.prototype.value;\n\n_.prototype.toString = function() {\n  return String(this._wrapped);\n};\n","import getByteLength from './_getByteLength.js';\n\n// Internal function to wrap or shallow-copy an ArrayBuffer,\n// typed array or DataView to a new view, reusing the buffer.\nexport default function toBufferView(bufferSource) {\n  return new Uint8Array(\n    bufferSource.buffer || bufferSource,\n    bufferSource.byteOffset || 0,\n    getByteLength(bufferSource)\n  );\n}\n","import _ from './underscore.js';\nimport { toString, SymbolProto } from './_setup.js';\nimport getByteLength from './_getByteLength.js';\nimport isTypedArray from './isTypedArray.js';\nimport isFunction from './isFunction.js';\nimport { hasStringTagBug }  from './_stringTagBug.js';\nimport isDataView from './isDataView.js';\nimport keys from './keys.js';\nimport has from './_has.js';\nimport toBufferView from './_toBufferView.js';\n\n// We use this string twice, so give it a name for minification.\nvar tagDataView = '[object DataView]';\n\n// Internal recursive comparison function for `_.isEqual`.\nfunction eq(a, b, aStack, bStack) {\n  // Identical objects are equal. `0 === -0`, but they aren't identical.\n  // See the [Harmony `egal` proposal](https://wiki.ecmascript.org/doku.php?id=harmony:egal).\n  if (a === b) return a !== 0 || 1 / a === 1 / b;\n  // `null` or `undefined` only equal to itself (strict comparison).\n  if (a == null || b == null) return false;\n  // `NaN`s are equivalent, but non-reflexive.\n  if (a !== a) return b !== b;\n  // Exhaust primitive checks\n  var type = typeof a;\n  if (type !== 'function' && type !== 'object' && typeof b != 'object') return false;\n  return deepEq(a, b, aStack, bStack);\n}\n\n// Internal recursive comparison function for `_.isEqual`.\nfunction deepEq(a, b, aStack, bStack) {\n  // Unwrap any wrapped objects.\n  if (a instanceof _) a = a._wrapped;\n  if (b instanceof _) b = b._wrapped;\n  // Compare `[[Class]]` names.\n  var className = toString.call(a);\n  if (className !== toString.call(b)) return false;\n  // Work around a bug in IE 10 - Edge 13.\n  if (hasStringTagBug && className == '[object Object]' && isDataView(a)) {\n    if (!isDataView(b)) return false;\n    className = tagDataView;\n  }\n  switch (className) {\n    // These types are compared by value.\n    case '[object RegExp]':\n      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n    case '[object String]':\n      // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n      // equivalent to `new String(\"5\")`.\n      return '' + a === '' + b;\n    case '[object Number]':\n      // `NaN`s are equivalent, but non-reflexive.\n      // Object(NaN) is equivalent to NaN.\n      if (+a !== +a) return +b !== +b;\n      // An `egal` comparison is performed for other numeric values.\n      return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n    case '[object Date]':\n    case '[object Boolean]':\n      // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n      // millisecond representations. Note that invalid dates with millisecond representations\n      // of `NaN` are not equivalent.\n      return +a === +b;\n    case '[object Symbol]':\n      return SymbolProto.valueOf.call(a) === SymbolProto.valueOf.call(b);\n    case '[object ArrayBuffer]':\n    case tagDataView:\n      // Coerce to typed array so we can fall through.\n      return deepEq(toBufferView(a), toBufferView(b), aStack, bStack);\n  }\n\n  var areArrays = className === '[object Array]';\n  if (!areArrays && isTypedArray(a)) {\n      var byteLength = getByteLength(a);\n      if (byteLength !== getByteLength(b)) return false;\n      if (a.buffer === b.buffer && a.byteOffset === b.byteOffset) return true;\n      areArrays = true;\n  }\n  if (!areArrays) {\n    if (typeof a != 'object' || typeof b != 'object') return false;\n\n    // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n    // from different frames are.\n    var aCtor = a.constructor, bCtor = b.constructor;\n    if (aCtor !== bCtor && !(isFunction(aCtor) && aCtor instanceof aCtor &&\n                             isFunction(bCtor) && bCtor instanceof bCtor)\n                        && ('constructor' in a && 'constructor' in b)) {\n      return false;\n    }\n  }\n  // Assume equality for cyclic structures. The algorithm for detecting cyclic\n  // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n\n  // Initializing stack of traversed objects.\n  // It's done here since we only need them for objects and arrays comparison.\n  aStack = aStack || [];\n  bStack = bStack || [];\n  var length = aStack.length;\n  while (length--) {\n    // Linear search. Performance is inversely proportional to the number of\n    // unique nested structures.\n    if (aStack[length] === a) return bStack[length] === b;\n  }\n\n  // Add the first object to the stack of traversed objects.\n  aStack.push(a);\n  bStack.push(b);\n\n  // Recursively compare objects and arrays.\n  if (areArrays) {\n    // Compare array lengths to determine if a deep comparison is necessary.\n    length = a.length;\n    if (length !== b.length) return false;\n    // Deep compare the contents, ignoring non-numeric properties.\n    while (length--) {\n      if (!eq(a[length], b[length], aStack, bStack)) return false;\n    }\n  } else {\n    // Deep compare objects.\n    var _keys = keys(a), key;\n    length = _keys.length;\n    // Ensure that both objects contain the same number of properties before comparing deep equality.\n    if (keys(b).length !== length) return false;\n    while (length--) {\n      // Deep compare each member\n      key = _keys[length];\n      if (!(has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\n    }\n  }\n  // Remove the first object from the stack of traversed objects.\n  aStack.pop();\n  bStack.pop();\n  return true;\n}\n\n// Perform a deep comparison to check if two objects are equal.\nexport default function isEqual(a, b) {\n  return eq(a, b);\n}\n","import isObject from './isObject.js';\nimport { hasEnumBug } from './_setup.js';\nimport collectNonEnumProps from './_collectNonEnumProps.js';\n\n// Retrieve all the enumerable property names of an object.\nexport default function allKeys(obj) {\n  if (!isObject(obj)) return [];\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  // Ahem, IE < 9.\n  if (hasEnumBug) collectNonEnumProps(obj, keys);\n  return keys;\n}\n","import getLength from './_getLength.js';\nimport isFunction from './isFunction.js';\nimport allKeys from './allKeys.js';\n\n// Since the regular `Object.prototype.toString` type tests don't work for\n// some types in IE 11, we use a fingerprinting heuristic instead, based\n// on the methods. It's not great, but it's the best we got.\n// The fingerprint method lists are defined below.\nexport function ie11fingerprint(methods) {\n  var length = getLength(methods);\n  return function(obj) {\n    if (obj == null) return false;\n    // `Map`, `WeakMap` and `Set` have no enumerable keys.\n    var keys = allKeys(obj);\n    if (getLength(keys)) return false;\n    for (var i = 0; i < length; i++) {\n      if (!isFunction(obj[methods[i]])) return false;\n    }\n    // If we are testing against `WeakMap`, we need to ensure that\n    // `obj` doesn't have a `forEach` method in order to distinguish\n    // it from a regular `Map`.\n    return methods !== weakMapMethods || !isFunction(obj[forEachName]);\n  };\n}\n\n// In the interest of compact minification, we write\n// each string in the fingerprints only once.\nvar forEachName = 'forEach',\n    hasName = 'has',\n    commonInit = ['clear', 'delete'],\n    mapTail = ['get', hasName, 'set'];\n\n// `Map`, `WeakMap` and `Set` each have slightly different\n// combinations of the above sublists.\nexport var mapMethods = commonInit.concat(forEachName, mapTail),\n    weakMapMethods = commonInit.concat(mapTail),\n    setMethods = ['add'].concat(commonInit, forEachName, hasName);\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, mapMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(mapMethods) : tagTester('Map');\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, weakMapMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(weakMapMethods) : tagTester('WeakMap');\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, setMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(setMethods) : tagTester('Set');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('WeakSet');\n","import keys from './keys.js';\n\n// Retrieve the values of an object's properties.\nexport default function values(obj) {\n  var _keys = keys(obj);\n  var length = _keys.length;\n  var values = Array(length);\n  for (var i = 0; i < length; i++) {\n    values[i] = obj[_keys[i]];\n  }\n  return values;\n}\n","import keys from './keys.js';\n\n// Convert an object into a list of `[key, value]` pairs.\n// The opposite of `_.object` with one argument.\nexport default function pairs(obj) {\n  var _keys = keys(obj);\n  var length = _keys.length;\n  var pairs = Array(length);\n  for (var i = 0; i < length; i++) {\n    pairs[i] = [_keys[i], obj[_keys[i]]];\n  }\n  return pairs;\n}\n","import keys from './keys.js';\n\n// Invert the keys and values of an object. The values must be serializable.\nexport default function invert(obj) {\n  var result = {};\n  var _keys = keys(obj);\n  for (var i = 0, length = _keys.length; i < length; i++) {\n    result[obj[_keys[i]]] = _keys[i];\n  }\n  return result;\n}\n","import isFunction from './isFunction.js';\n\n// Return a sorted list of the function names available on the object.\nexport default function functions(obj) {\n  var names = [];\n  for (var key in obj) {\n    if (isFunction(obj[key])) names.push(key);\n  }\n  return names.sort();\n}\n","// An internal function for creating assigner functions.\nexport default function createAssigner(keysFunc, defaults) {\n  return function(obj) {\n    var length = arguments.length;\n    if (defaults) obj = Object(obj);\n    if (length < 2 || obj == null) return obj;\n    for (var index = 1; index < length; index++) {\n      var source = arguments[index],\n          keys = keysFunc(source),\n          l = keys.length;\n      for (var i = 0; i < l; i++) {\n        var key = keys[i];\n        if (!defaults || obj[key] === void 0) obj[key] = source[key];\n      }\n    }\n    return obj;\n  };\n}\n","import createAssigner from './_createAssigner.js';\nimport allKeys from './allKeys.js';\n\n// Extend a given object with all the properties in passed-in object(s).\nexport default createAssigner(allKeys);\n","import createAssigner from './_createAssigner.js';\nimport keys from './keys.js';\n\n// Assigns a given object with all the own properties in the passed-in\n// object(s).\n// (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\nexport default createAssigner(keys);\n","import createAssigner from './_createAssigner.js';\nimport allKeys from './allKeys.js';\n\n// Fill in a given object with default properties.\nexport default createAssigner(allKeys, true);\n","import isObject from './isObject.js';\nimport { nativeCreate } from './_setup.js';\n\n// Create a naked function reference for surrogate-prototype-swapping.\nfunction ctor() {\n  return function(){};\n}\n\n// An internal function for creating a new object that inherits from another.\nexport default function baseCreate(prototype) {\n  if (!isObject(prototype)) return {};\n  if (nativeCreate) return nativeCreate(prototype);\n  var Ctor = ctor();\n  Ctor.prototype = prototype;\n  var result = new Ctor;\n  Ctor.prototype = null;\n  return result;\n}\n","import baseCreate from './_baseCreate.js';\nimport extendOwn from './extendOwn.js';\n\n// Creates an object that inherits from the given prototype object.\n// If additional properties are provided then they will be added to the\n// created object.\nexport default function create(prototype, props) {\n  var result = baseCreate(prototype);\n  if (props) extendOwn(result, props);\n  return result;\n}\n","import isObject from './isObject.js';\nimport isArray from './isArray.js';\nimport extend from './extend.js';\n\n// Create a (shallow-cloned) duplicate of an object.\nexport default function clone(obj) {\n  if (!isObject(obj)) return obj;\n  return isArray(obj) ? obj.slice() : extend({}, obj);\n}\n","// Invokes `interceptor` with the `obj` and then returns `obj`.\n// The primary purpose of this method is to \"tap into\" a method chain, in\n// order to perform operations on intermediate results within the chain.\nexport default function tap(obj, interceptor) {\n  interceptor(obj);\n  return obj;\n}\n","import _ from './underscore.js';\nimport isArray from './isArray.js';\n\n// Normalize a (deep) property `path` to array.\n// Like `_.iteratee`, this function can be customized.\nexport default function toPath(path) {\n  return isArray(path) ? path : [path];\n}\n_.toPath = toPath;\n","import _ from './underscore.js';\nimport './toPath.js';\n\n// Internal wrapper for `_.toPath` to enable minification.\n// Similar to `cb` for `_.iteratee`.\nexport default function toPath(path) {\n  return _.toPath(path);\n}\n","// Internal function to obtain a nested property in `obj` along `path`.\nexport default function deepGet(obj, path) {\n  var length = path.length;\n  for (var i = 0; i < length; i++) {\n    if (obj == null) return void 0;\n    obj = obj[path[i]];\n  }\n  return length ? obj : void 0;\n}\n","import toPath from './_toPath.js';\nimport deepGet from './_deepGet.js';\nimport isUndefined from './isUndefined.js';\n\n// Get the value of the (deep) property on `path` from `object`.\n// If any property in `path` does not exist or if the value is\n// `undefined`, return `defaultValue` instead.\n// The `path` is normalized through `_.toPath`.\nexport default function get(object, path, defaultValue) {\n  var value = deepGet(object, toPath(path));\n  return isUndefined(value) ? defaultValue : value;\n}\n","import _has from './_has.js';\nimport toPath from './_toPath.js';\n\n// Shortcut function for checking if an object has a given property directly on\n// itself (in other words, not on a prototype). Unlike the internal `has`\n// function, this public version can also traverse nested properties.\nexport default function has(obj, path) {\n  path = toPath(path);\n  var length = path.length;\n  for (var i = 0; i < length; i++) {\n    var key = path[i];\n    if (!_has(obj, key)) return false;\n    obj = obj[key];\n  }\n  return !!length;\n}\n","// Keep the identity function around for default iteratees.\nexport default function identity(value) {\n  return value;\n}\n","import extendOwn from './extendOwn.js';\nimport isMatch from './isMatch.js';\n\n// Returns a predicate for checking whether an object has a given set of\n// `key:value` pairs.\nexport default function matcher(attrs) {\n  attrs = extendOwn({}, attrs);\n  return function(obj) {\n    return isMatch(obj, attrs);\n  };\n}\n","import deepGet from './_deepGet.js';\nimport toPath from './_toPath.js';\n\n// Creates a function that, when passed an object, will traverse that objects\n// properties down the given `path`, specified as an array of keys or indices.\nexport default function property(path) {\n  path = toPath(path);\n  return function(obj) {\n    return deepGet(obj, path);\n  };\n}\n","// Internal function that returns an efficient (for current engines) version\n// of the passed-in callback, to be repeatedly applied in other Underscore\n// functions.\nexport default function optimizeCb(func, context, argCount) {\n  if (context === void 0) return func;\n  switch (argCount == null ? 3 : argCount) {\n    case 1: return function(value) {\n      return func.call(context, value);\n    };\n    // The 2-argument case is omitted because were not using it.\n    case 3: return function(value, index, collection) {\n      return func.call(context, value, index, collection);\n    };\n    case 4: return function(accumulator, value, index, collection) {\n      return func.call(context, accumulator, value, index, collection);\n    };\n  }\n  return function() {\n    return func.apply(context, arguments);\n  };\n}\n","import identity from './identity.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isArray from './isArray.js';\nimport matcher from './matcher.js';\nimport property from './property.js';\nimport optimizeCb from './_optimizeCb.js';\n\n// An internal function to generate callbacks that can be applied to each\n// element in a collection, returning the desired result  either `_.identity`,\n// an arbitrary callback, a property matcher, or a property accessor.\nexport default function baseIteratee(value, context, argCount) {\n  if (value == null) return identity;\n  if (isFunction(value)) return optimizeCb(value, context, argCount);\n  if (isObject(value) && !isArray(value)) return matcher(value);\n  return property(value);\n}\n","import _ from './underscore.js';\nimport baseIteratee from './_baseIteratee.js';\n\n// External wrapper for our callback generator. Users may customize\n// `_.iteratee` if they want additional predicate/iteratee shorthand styles.\n// This abstraction hides the internal-only `argCount` argument.\nexport default function iteratee(value, context) {\n  return baseIteratee(value, context, Infinity);\n}\n_.iteratee = iteratee;\n","import _ from './underscore.js';\nimport baseIteratee from './_baseIteratee.js';\nimport iteratee from './iteratee.js';\n\n// The function we call internally to generate a callback. It invokes\n// `_.iteratee` if overridden, otherwise `baseIteratee`.\nexport default function cb(value, context, argCount) {\n  if (_.iteratee !== iteratee) return _.iteratee(value, context);\n  return baseIteratee(value, context, argCount);\n}\n","import cb from './_cb.js';\nimport keys from './keys.js';\n\n// Returns the results of applying the `iteratee` to each element of `obj`.\n// In contrast to `_.map` it returns an object.\nexport default function mapObject(obj, iteratee, context) {\n  iteratee = cb(iteratee, context);\n  var _keys = keys(obj),\n      length = _keys.length,\n      results = {};\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys[index];\n    results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\n  }\n  return results;\n}\n","// Predicate-generating function. Often useful outside of Underscore.\nexport default function noop(){}\n","import noop from './noop.js';\nimport get from './get.js';\n\n// Generates a function for a given object that returns a given property.\nexport default function propertyOf(obj) {\n  if (obj == null) return noop;\n  return function(path) {\n    return get(obj, path);\n  };\n}\n","import optimizeCb from './_optimizeCb.js';\n\n// Run a function **n** times.\nexport default function times(n, iteratee, context) {\n  var accum = Array(Math.max(0, n));\n  iteratee = optimizeCb(iteratee, context, 1);\n  for (var i = 0; i < n; i++) accum[i] = iteratee(i);\n  return accum;\n}\n","// Return a random integer between `min` and `max` (inclusive).\nexport default function random(min, max) {\n  if (max == null) {\n    max = min;\n    min = 0;\n  }\n  return min + Math.floor(Math.random() * (max - min + 1));\n}\n","// A (possibly faster) way to get the current timestamp as an integer.\nexport default Date.now || function() {\n  return new Date().getTime();\n};\n","import keys from './keys.js';\n\n// Internal helper to generate functions for escaping and unescaping strings\n// to/from HTML interpolation.\nexport default function createEscaper(map) {\n  var escaper = function(match) {\n    return map[match];\n  };\n  // Regexes for identifying a key that needs to be escaped.\n  var source = '(?:' + keys(map).join('|') + ')';\n  var testRegexp = RegExp(source);\n  var replaceRegexp = RegExp(source, 'g');\n  return function(string) {\n    string = string == null ? '' : '' + string;\n    return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n  };\n}\n","// Internal list of HTML entities for escaping.\nexport default {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#x27;',\n  '`': '&#x60;'\n};\n","import createEscaper from './_createEscaper.js';\nimport escapeMap from './_escapeMap.js';\n\n// Function for escaping strings to HTML interpolation.\nexport default createEscaper(escapeMap);\n","import createEscaper from './_createEscaper.js';\nimport unescapeMap from './_unescapeMap.js';\n\n// Function for unescaping strings from HTML interpolation.\nexport default createEscaper(unescapeMap);\n","import invert from './invert.js';\nimport escapeMap from './_escapeMap.js';\n\n// Internal list of HTML entities for unescaping.\nexport default invert(escapeMap);\n","import _ from './underscore.js';\n\n// By default, Underscore uses ERB-style template delimiters. Change the\n// following template settings to use alternative delimiters.\nexport default _.templateSettings = {\n  evaluate: /<%([\\s\\S]+?)%>/g,\n  interpolate: /<%=([\\s\\S]+?)%>/g,\n  escape: /<%-([\\s\\S]+?)%>/g\n};\n","import defaults from './defaults.js';\nimport _ from './underscore.js';\nimport './templateSettings.js';\n\n// When customizing `_.templateSettings`, if you don't want to define an\n// interpolation, evaluation or escaping regex, we need one that is\n// guaranteed not to match.\nvar noMatch = /(.)^/;\n\n// Certain characters need to be escaped so that they can be put into a\n// string literal.\nvar escapes = {\n  \"'\": \"'\",\n  '\\\\': '\\\\',\n  '\\r': 'r',\n  '\\n': 'n',\n  '\\u2028': 'u2028',\n  '\\u2029': 'u2029'\n};\n\nvar escapeRegExp = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\n\nfunction escapeChar(match) {\n  return '\\\\' + escapes[match];\n}\n\nvar bareIdentifier = /^\\s*(\\w|\\$)+\\s*$/;\n\n// JavaScript micro-templating, similar to John Resig's implementation.\n// Underscore templating handles arbitrary delimiters, preserves whitespace,\n// and correctly escapes quotes within interpolated code.\n// NB: `oldSettings` only exists for backwards compatibility.\nexport default function template(text, settings, oldSettings) {\n  if (!settings && oldSettings) settings = oldSettings;\n  settings = defaults({}, settings, _.templateSettings);\n\n  // Combine delimiters into one regular expression via alternation.\n  var matcher = RegExp([\n    (settings.escape || noMatch).source,\n    (settings.interpolate || noMatch).source,\n    (settings.evaluate || noMatch).source\n  ].join('|') + '|$', 'g');\n\n  // Compile the template source, escaping string literals appropriately.\n  var index = 0;\n  var source = \"__p+='\";\n  text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n    source += text.slice(index, offset).replace(escapeRegExp, escapeChar);\n    index = offset + match.length;\n\n    if (escape) {\n      source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n    } else if (interpolate) {\n      source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n    } else if (evaluate) {\n      source += \"';\\n\" + evaluate + \"\\n__p+='\";\n    }\n\n    // Adobe VMs need the match returned to produce the correct offset.\n    return match;\n  });\n  source += \"';\\n\";\n\n  var argument = settings.variable;\n  if (argument) {\n    if (!bareIdentifier.test(argument)) throw new Error(argument);\n  } else {\n    // If a variable is not specified, place data values in local scope.\n    source = 'with(obj||{}){\\n' + source + '}\\n';\n    argument = 'obj';\n  }\n\n  source = \"var __t,__p='',__j=Array.prototype.join,\" +\n    \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n    source + 'return __p;\\n';\n\n  var render;\n  try {\n    render = new Function(argument, '_', source);\n  } catch (e) {\n    e.source = source;\n    throw e;\n  }\n\n  var template = function(data) {\n    return render.call(this, data, _);\n  };\n\n  // Provide the compiled source as a convenience for precompilation.\n  template.source = 'function(' + argument + '){\\n' + source + '}';\n\n  return template;\n}\n","import isFunction from './isFunction.js';\nimport toPath from './_toPath.js';\n\n// Traverses the children of `obj` along `path`. If a child is a function, it\n// is invoked with its parent as context. Returns the value of the final\n// child, or `fallback` if any child is undefined.\nexport default function result(obj, path, fallback) {\n  path = toPath(path);\n  var length = path.length;\n  if (!length) {\n    return isFunction(fallback) ? fallback.call(obj) : fallback;\n  }\n  for (var i = 0; i < length; i++) {\n    var prop = obj == null ? void 0 : obj[path[i]];\n    if (prop === void 0) {\n      prop = fallback;\n      i = length; // Ensure we don't continue iterating.\n    }\n    obj = isFunction(prop) ? prop.call(obj) : prop;\n  }\n  return obj;\n}\n","// Generate a unique integer id (unique within the entire client session).\n// Useful for temporary DOM ids.\nvar idCounter = 0;\nexport default function uniqueId(prefix) {\n  var id = ++idCounter + '';\n  return prefix ? prefix + id : id;\n}\n","import _ from './underscore.js';\n\n// Start chaining a wrapped Underscore object.\nexport default function chain(obj) {\n  var instance = _(obj);\n  instance._chain = true;\n  return instance;\n}\n","import baseCreate from './_baseCreate.js';\nimport isObject from './isObject.js';\n\n// Internal function to execute `sourceFunc` bound to `context` with optional\n// `args`. Determines whether to execute a function as a constructor or as a\n// normal function.\nexport default function executeBound(sourceFunc, boundFunc, context, callingContext, args) {\n  if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\n  var self = baseCreate(sourceFunc.prototype);\n  var result = sourceFunc.apply(self, args);\n  if (isObject(result)) return result;\n  return self;\n}\n","import restArguments from './restArguments.js';\nimport executeBound from './_executeBound.js';\nimport _ from './underscore.js';\n\n// Partially apply a function by creating a version that has had some of its\n// arguments pre-filled, without changing its dynamic `this` context. `_` acts\n// as a placeholder by default, allowing any combination of arguments to be\n// pre-filled. Set `_.partial.placeholder` for a custom placeholder argument.\nvar partial = restArguments(function(func, boundArgs) {\n  var placeholder = partial.placeholder;\n  var bound = function() {\n    var position = 0, length = boundArgs.length;\n    var args = Array(length);\n    for (var i = 0; i < length; i++) {\n      args[i] = boundArgs[i] === placeholder ? arguments[position++] : boundArgs[i];\n    }\n    while (position < arguments.length) args.push(arguments[position++]);\n    return executeBound(func, bound, this, this, args);\n  };\n  return bound;\n});\n\npartial.placeholder = _;\nexport default partial;\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport executeBound from './_executeBound.js';\n\n// Create a function bound to a given object (assigning `this`, and arguments,\n// optionally).\nexport default restArguments(function(func, context, args) {\n  if (!isFunction(func)) throw new TypeError('Bind must be called on a function');\n  var bound = restArguments(function(callArgs) {\n    return executeBound(func, bound, context, this, args.concat(callArgs));\n  });\n  return bound;\n});\n","import createSizePropertyCheck from './_createSizePropertyCheck.js';\nimport getLength from './_getLength.js';\n\n// Internal helper for collection methods to determine whether a collection\n// should be iterated as an array or as an object.\n// Related: https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\n// Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094\nexport default createSizePropertyCheck(getLength);\n","import getLength from './_getLength.js';\nimport isArrayLike from './_isArrayLike.js';\nimport isArray from './isArray.js';\nimport isArguments from './isArguments.js';\n\n// Internal implementation of a recursive `flatten` function.\nexport default function flatten(input, depth, strict, output) {\n  output = output || [];\n  if (!depth && depth !== 0) {\n    depth = Infinity;\n  } else if (depth <= 0) {\n    return output.concat(input);\n  }\n  var idx = output.length;\n  for (var i = 0, length = getLength(input); i < length; i++) {\n    var value = input[i];\n    if (isArrayLike(value) && (isArray(value) || isArguments(value))) {\n      // Flatten current level of array or arguments object.\n      if (depth > 1) {\n        flatten(value, depth - 1, strict, output);\n        idx = output.length;\n      } else {\n        var j = 0, len = value.length;\n        while (j < len) output[idx++] = value[j++];\n      }\n    } else if (!strict) {\n      output[idx++] = value;\n    }\n  }\n  return output;\n}\n","import restArguments from './restArguments.js';\nimport flatten from './_flatten.js';\nimport bind from './bind.js';\n\n// Bind a number of an object's methods to that object. Remaining arguments\n// are the method names to be bound. Useful for ensuring that all callbacks\n// defined on an object belong to it.\nexport default restArguments(function(obj, keys) {\n  keys = flatten(keys, false, false);\n  var index = keys.length;\n  if (index < 1) throw new Error('bindAll must be passed function names');\n  while (index--) {\n    var key = keys[index];\n    obj[key] = bind(obj[key], obj);\n  }\n  return obj;\n});\n","import has from './_has.js';\n\n// Memoize an expensive function by storing its results.\nexport default function memoize(func, hasher) {\n  var memoize = function(key) {\n    var cache = memoize.cache;\n    var address = '' + (hasher ? hasher.apply(this, arguments) : key);\n    if (!has(cache, address)) cache[address] = func.apply(this, arguments);\n    return cache[address];\n  };\n  memoize.cache = {};\n  return memoize;\n}\n","import restArguments from './restArguments.js';\n\n// Delays a function for the given number of milliseconds, and then calls\n// it with the arguments supplied.\nexport default restArguments(function(func, wait, args) {\n  return setTimeout(function() {\n    return func.apply(null, args);\n  }, wait);\n});\n","import partial from './partial.js';\nimport delay from './delay.js';\nimport _ from './underscore.js';\n\n// Defers a function, scheduling it to run after the current call stack has\n// cleared.\nexport default partial(delay, _, 1);\n","import now from './now.js';\n\n// Returns a function, that, when invoked, will only be triggered at most once\n// during a given window of time. Normally, the throttled function will run\n// as much as it can, without ever going more than once per `wait` duration;\n// but if you'd like to disable the execution on the leading edge, pass\n// `{leading: false}`. To disable execution on the trailing edge, ditto.\nexport default function throttle(func, wait, options) {\n  var timeout, context, args, result;\n  var previous = 0;\n  if (!options) options = {};\n\n  var later = function() {\n    previous = options.leading === false ? 0 : now();\n    timeout = null;\n    result = func.apply(context, args);\n    if (!timeout) context = args = null;\n  };\n\n  var throttled = function() {\n    var _now = now();\n    if (!previous && options.leading === false) previous = _now;\n    var remaining = wait - (_now - previous);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      previous = _now;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(later, remaining);\n    }\n    return result;\n  };\n\n  throttled.cancel = function() {\n    clearTimeout(timeout);\n    previous = 0;\n    timeout = context = args = null;\n  };\n\n  return throttled;\n}\n","import restArguments from './restArguments.js';\nimport now from './now.js';\n\n// When a sequence of calls of the returned function ends, the argument\n// function is triggered. The end of a sequence is defined by the `wait`\n// parameter. If `immediate` is passed, the argument function will be\n// triggered at the beginning of the sequence instead of at the end.\nexport default function debounce(func, wait, immediate) {\n  var timeout, previous, args, result, context;\n\n  var later = function() {\n    var passed = now() - previous;\n    if (wait > passed) {\n      timeout = setTimeout(later, wait - passed);\n    } else {\n      timeout = null;\n      if (!immediate) result = func.apply(context, args);\n      // This check is needed because `func` can recursively invoke `debounced`.\n      if (!timeout) args = context = null;\n    }\n  };\n\n  var debounced = restArguments(function(_args) {\n    context = this;\n    args = _args;\n    previous = now();\n    if (!timeout) {\n      timeout = setTimeout(later, wait);\n      if (immediate) result = func.apply(context, args);\n    }\n    return result;\n  });\n\n  debounced.cancel = function() {\n    clearTimeout(timeout);\n    timeout = args = context = null;\n  };\n\n  return debounced;\n}\n","import partial from './partial.js';\n\n// Returns the first function passed as an argument to the second,\n// allowing you to adjust arguments, run code before and after, and\n// conditionally execute the original function.\nexport default function wrap(func, wrapper) {\n  return partial(wrapper, func);\n}\n","// Returns a negated version of the passed-in predicate.\nexport default function negate(predicate) {\n  return function() {\n    return !predicate.apply(this, arguments);\n  };\n}\n","// Returns a function that is the composition of a list of functions, each\n// consuming the return value of the function that follows.\nexport default function compose() {\n  var args = arguments;\n  var start = args.length - 1;\n  return function() {\n    var i = start;\n    var result = args[start].apply(this, arguments);\n    while (i--) result = args[i].call(this, result);\n    return result;\n  };\n}\n","// Returns a function that will only be executed on and after the Nth call.\nexport default function after(times, func) {\n  return function() {\n    if (--times < 1) {\n      return func.apply(this, arguments);\n    }\n  };\n}\n","// Returns a function that will only be executed up to (but not including) the\n// Nth call.\nexport default function before(times, func) {\n  var memo;\n  return function() {\n    if (--times > 0) {\n      memo = func.apply(this, arguments);\n    }\n    if (times <= 1) func = null;\n    return memo;\n  };\n}\n","import partial from './partial.js';\nimport before from './before.js';\n\n// Returns a function that will be executed at most one time, no matter how\n// often you call it. Useful for lazy initialization.\nexport default partial(before, 2);\n","import cb from './_cb.js';\nimport keys from './keys.js';\n\n// Returns the first key on an object that passes a truth test.\nexport default function findKey(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = keys(obj), key;\n  for (var i = 0, length = _keys.length; i < length; i++) {\n    key = _keys[i];\n    if (predicate(obj[key], key, obj)) return key;\n  }\n}\n","import cb from './_cb.js';\nimport getLength from './_getLength.js';\n\n// Internal function to generate `_.findIndex` and `_.findLastIndex`.\nexport default function createPredicateIndexFinder(dir) {\n  return function(array, predicate, context) {\n    predicate = cb(predicate, context);\n    var length = getLength(array);\n    var index = dir > 0 ? 0 : length - 1;\n    for (; index >= 0 && index < length; index += dir) {\n      if (predicate(array[index], index, array)) return index;\n    }\n    return -1;\n  };\n}\n","import createPredicateIndexFinder from './_createPredicateIndexFinder.js';\n\n// Returns the first index on an array-like that passes a truth test.\nexport default createPredicateIndexFinder(1);\n","import createPredicateIndexFinder from './_createPredicateIndexFinder.js';\n\n// Returns the last index on an array-like that passes a truth test.\nexport default createPredicateIndexFinder(-1);\n","import cb from './_cb.js';\nimport getLength from './_getLength.js';\n\n// Use a comparator function to figure out the smallest index at which\n// an object should be inserted so as to maintain order. Uses binary search.\nexport default function sortedIndex(array, obj, iteratee, context) {\n  iteratee = cb(iteratee, context, 1);\n  var value = iteratee(obj);\n  var low = 0, high = getLength(array);\n  while (low < high) {\n    var mid = Math.floor((low + high) / 2);\n    if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\n  }\n  return low;\n}\n","import getLength from './_getLength.js';\nimport { slice } from './_setup.js';\nimport isNaN from './isNaN.js';\n\n// Internal function to generate the `_.indexOf` and `_.lastIndexOf` functions.\nexport default function createIndexFinder(dir, predicateFind, sortedIndex) {\n  return function(array, item, idx) {\n    var i = 0, length = getLength(array);\n    if (typeof idx == 'number') {\n      if (dir > 0) {\n        i = idx >= 0 ? idx : Math.max(idx + length, i);\n      } else {\n        length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;\n      }\n    } else if (sortedIndex && idx && length) {\n      idx = sortedIndex(array, item);\n      return array[idx] === item ? idx : -1;\n    }\n    if (item !== item) {\n      idx = predicateFind(slice.call(array, i, length), isNaN);\n      return idx >= 0 ? idx + i : -1;\n    }\n    for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {\n      if (array[idx] === item) return idx;\n    }\n    return -1;\n  };\n}\n","import sortedIndex from './sortedIndex.js';\nimport findIndex from './findIndex.js';\nimport createIndexFinder from './_createIndexFinder.js';\n\n// Return the position of the first occurrence of an item in an array,\n// or -1 if the item is not included in the array.\n// If the array is large and already in sort order, pass `true`\n// for **isSorted** to use binary search.\nexport default createIndexFinder(1, findIndex, sortedIndex);\n","import findLastIndex from './findLastIndex.js';\nimport createIndexFinder from './_createIndexFinder.js';\n\n// Return the position of the last occurrence of an item in an array,\n// or -1 if the item is not included in the array.\nexport default createIndexFinder(-1, findLastIndex);\n","import isArrayLike from './_isArrayLike.js';\nimport findIndex from './findIndex.js';\nimport findKey from './findKey.js';\n\n// Return the first value which passes a truth test.\nexport default function find(obj, predicate, context) {\n  var keyFinder = isArrayLike(obj) ? findIndex : findKey;\n  var key = keyFinder(obj, predicate, context);\n  if (key !== void 0 && key !== -1) return obj[key];\n}\n","import find from './find.js';\nimport matcher from './matcher.js';\n\n// Convenience version of a common use case of `_.find`: getting the first\n// object containing specific `key:value` pairs.\nexport default function findWhere(obj, attrs) {\n  return find(obj, matcher(attrs));\n}\n","import optimizeCb from './_optimizeCb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// The cornerstone for collection functions, an `each`\n// implementation, aka `forEach`.\n// Handles raw objects in addition to array-likes. Treats all\n// sparse array-likes as if they were dense.\nexport default function each(obj, iteratee, context) {\n  iteratee = optimizeCb(iteratee, context);\n  var i, length;\n  if (isArrayLike(obj)) {\n    for (i = 0, length = obj.length; i < length; i++) {\n      iteratee(obj[i], i, obj);\n    }\n  } else {\n    var _keys = keys(obj);\n    for (i = 0, length = _keys.length; i < length; i++) {\n      iteratee(obj[_keys[i]], _keys[i], obj);\n    }\n  }\n  return obj;\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Return the results of applying the iteratee to each element.\nexport default function map(obj, iteratee, context) {\n  iteratee = cb(iteratee, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length,\n      results = Array(length);\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    results[index] = iteratee(obj[currentKey], currentKey, obj);\n  }\n  return results;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\nimport optimizeCb from './_optimizeCb.js';\n\n// Internal helper to create a reducing function, iterating left or right.\nexport default function createReduce(dir) {\n  // Wrap code that reassigns argument variables in a separate function than\n  // the one that accesses `arguments.length` to avoid a perf hit. (#1991)\n  var reducer = function(obj, iteratee, memo, initial) {\n    var _keys = !isArrayLike(obj) && keys(obj),\n        length = (_keys || obj).length,\n        index = dir > 0 ? 0 : length - 1;\n    if (!initial) {\n      memo = obj[_keys ? _keys[index] : index];\n      index += dir;\n    }\n    for (; index >= 0 && index < length; index += dir) {\n      var currentKey = _keys ? _keys[index] : index;\n      memo = iteratee(memo, obj[currentKey], currentKey, obj);\n    }\n    return memo;\n  };\n\n  return function(obj, iteratee, memo, context) {\n    var initial = arguments.length >= 3;\n    return reducer(obj, optimizeCb(iteratee, context, 4), memo, initial);\n  };\n}\n","import createReduce from './_createReduce.js';\n\n// **Reduce** builds up a single result from a list of values, aka `inject`,\n// or `foldl`.\nexport default createReduce(1);\n","import createReduce from './_createReduce.js';\n\n// The right-associative version of reduce, also known as `foldr`.\nexport default createReduce(-1);\n","import cb from './_cb.js';\nimport each from './each.js';\n\n// Return all the elements that pass a truth test.\nexport default function filter(obj, predicate, context) {\n  var results = [];\n  predicate = cb(predicate, context);\n  each(obj, function(value, index, list) {\n    if (predicate(value, index, list)) results.push(value);\n  });\n  return results;\n}\n","import filter from './filter.js';\nimport negate from './negate.js';\nimport cb from './_cb.js';\n\n// Return all the elements for which a truth test fails.\nexport default function reject(obj, predicate, context) {\n  return filter(obj, negate(cb(predicate)), context);\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Determine whether all of the elements pass a truth test.\nexport default function every(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length;\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    if (!predicate(obj[currentKey], currentKey, obj)) return false;\n  }\n  return true;\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Determine if at least one element in the object passes a truth test.\nexport default function some(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length;\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    if (predicate(obj[currentKey], currentKey, obj)) return true;\n  }\n  return false;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport indexOf from './indexOf.js';\n\n// Determine if the array or object contains a given item (using `===`).\nexport default function contains(obj, item, fromIndex, guard) {\n  if (!isArrayLike(obj)) obj = values(obj);\n  if (typeof fromIndex != 'number' || guard) fromIndex = 0;\n  return indexOf(obj, item, fromIndex) >= 0;\n}\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport map from './map.js';\nimport deepGet from './_deepGet.js';\nimport toPath from './_toPath.js';\n\n// Invoke a method (with arguments) on every item in a collection.\nexport default restArguments(function(obj, path, args) {\n  var contextPath, func;\n  if (isFunction(path)) {\n    func = path;\n  } else {\n    path = toPath(path);\n    contextPath = path.slice(0, -1);\n    path = path[path.length - 1];\n  }\n  return map(obj, function(context) {\n    var method = func;\n    if (!method) {\n      if (contextPath && contextPath.length) {\n        context = deepGet(context, contextPath);\n      }\n      if (context == null) return void 0;\n      method = context[path];\n    }\n    return method == null ? method : method.apply(context, args);\n  });\n});\n","import map from './map.js';\nimport property from './property.js';\n\n// Convenience version of a common use case of `_.map`: fetching a property.\nexport default function pluck(obj, key) {\n  return map(obj, property(key));\n}\n","import filter from './filter.js';\nimport matcher from './matcher.js';\n\n// Convenience version of a common use case of `_.filter`: selecting only\n// objects containing specific `key:value` pairs.\nexport default function where(obj, attrs) {\n  return filter(obj, matcher(attrs));\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport cb from './_cb.js';\nimport each from './each.js';\n\n// Return the maximum element (or element-based computation).\nexport default function max(obj, iteratee, context) {\n  var result = -Infinity, lastComputed = -Infinity,\n      value, computed;\n  if (iteratee == null || typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null) {\n    obj = isArrayLike(obj) ? obj : values(obj);\n    for (var i = 0, length = obj.length; i < length; i++) {\n      value = obj[i];\n      if (value != null && value > result) {\n        result = value;\n      }\n    }\n  } else {\n    iteratee = cb(iteratee, context);\n    each(obj, function(v, index, list) {\n      computed = iteratee(v, index, list);\n      if (computed > lastComputed || computed === -Infinity && result === -Infinity) {\n        result = v;\n        lastComputed = computed;\n      }\n    });\n  }\n  return result;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport cb from './_cb.js';\nimport each from './each.js';\n\n// Return the minimum element (or element-based computation).\nexport default function min(obj, iteratee, context) {\n  var result = Infinity, lastComputed = Infinity,\n      value, computed;\n  if (iteratee == null || typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null) {\n    obj = isArrayLike(obj) ? obj : values(obj);\n    for (var i = 0, length = obj.length; i < length; i++) {\n      value = obj[i];\n      if (value != null && value < result) {\n        result = value;\n      }\n    }\n  } else {\n    iteratee = cb(iteratee, context);\n    each(obj, function(v, index, list) {\n      computed = iteratee(v, index, list);\n      if (computed < lastComputed || computed === Infinity && result === Infinity) {\n        result = v;\n        lastComputed = computed;\n      }\n    });\n  }\n  return result;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport clone from './clone.js';\nimport values from './values.js';\nimport getLength from './_getLength.js';\nimport random from './random.js';\n\n// Sample **n** random values from a collection using the modern version of the\n// [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/FisherYates_shuffle).\n// If **n** is not specified, returns a single random element.\n// The internal `guard` argument allows it to work with `_.map`.\nexport default function sample(obj, n, guard) {\n  if (n == null || guard) {\n    if (!isArrayLike(obj)) obj = values(obj);\n    return obj[random(obj.length - 1)];\n  }\n  var sample = isArrayLike(obj) ? clone(obj) : values(obj);\n  var length = getLength(sample);\n  n = Math.max(Math.min(n, length), 0);\n  var last = length - 1;\n  for (var index = 0; index < n; index++) {\n    var rand = random(index, last);\n    var temp = sample[index];\n    sample[index] = sample[rand];\n    sample[rand] = temp;\n  }\n  return sample.slice(0, n);\n}\n","import sample from './sample.js';\n\n// Shuffle a collection.\nexport default function shuffle(obj) {\n  return sample(obj, Infinity);\n}\n","import cb from './_cb.js';\nimport pluck from './pluck.js';\nimport map from './map.js';\n\n// Sort the object's values by a criterion produced by an iteratee.\nexport default function sortBy(obj, iteratee, context) {\n  var index = 0;\n  iteratee = cb(iteratee, context);\n  return pluck(map(obj, function(value, key, list) {\n    return {\n      value: value,\n      index: index++,\n      criteria: iteratee(value, key, list)\n    };\n  }).sort(function(left, right) {\n    var a = left.criteria;\n    var b = right.criteria;\n    if (a !== b) {\n      if (a > b || a === void 0) return 1;\n      if (a < b || b === void 0) return -1;\n    }\n    return left.index - right.index;\n  }), 'value');\n}\n","import cb from './_cb.js';\nimport each from './each.js';\n\n// An internal function used for aggregate \"group by\" operations.\nexport default function group(behavior, partition) {\n  return function(obj, iteratee, context) {\n    var result = partition ? [[], []] : {};\n    iteratee = cb(iteratee, context);\n    each(obj, function(value, index) {\n      var key = iteratee(value, index, obj);\n      behavior(result, value, key);\n    });\n    return result;\n  };\n}\n","import group from './_group.js';\nimport has from './_has.js';\n\n// Groups the object's values by a criterion. Pass either a string attribute\n// to group by, or a function that returns the criterion.\nexport default group(function(result, value, key) {\n  if (has(result, key)) result[key].push(value); else result[key] = [value];\n});\n","import group from './_group.js';\n\n// Indexes the object's values by a criterion, similar to `_.groupBy`, but for\n// when you know that your index values will be unique.\nexport default group(function(result, value, key) {\n  result[key] = value;\n});\n","import group from './_group.js';\nimport has from './_has.js';\n\n// Counts instances of an object that group by a certain criterion. Pass\n// either a string attribute to count by, or a function that returns the\n// criterion.\nexport default group(function(result, value, key) {\n  if (has(result, key)) result[key]++; else result[key] = 1;\n});\n","import group from './_group.js';\n\n// Split a collection into two arrays: one whose elements all pass the given\n// truth test, and one whose elements all do not pass the truth test.\nexport default group(function(result, value, pass) {\n  result[pass ? 0 : 1].push(value);\n}, true);\n","import isArray from './isArray.js';\nimport { slice } from './_setup.js';\nimport isString from './isString.js';\nimport isArrayLike from './_isArrayLike.js';\nimport map from './map.js';\nimport identity from './identity.js';\nimport values from './values.js';\n\n// Safely create a real, live array from anything iterable.\nvar reStrSymbol = /[^\\ud800-\\udfff]|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff]/g;\nexport default function toArray(obj) {\n  if (!obj) return [];\n  if (isArray(obj)) return slice.call(obj);\n  if (isString(obj)) {\n    // Keep surrogate pair characters together.\n    return obj.match(reStrSymbol);\n  }\n  if (isArrayLike(obj)) return map(obj, identity);\n  return values(obj);\n}\n","import isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Return the number of elements in a collection.\nexport default function size(obj) {\n  if (obj == null) return 0;\n  return isArrayLike(obj) ? obj.length : keys(obj).length;\n}\n","// Internal `_.pick` helper function to determine whether `key` is an enumerable\n// property name of `obj`.\nexport default function keyInObj(value, key, obj) {\n  return key in obj;\n}\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport optimizeCb from './_optimizeCb.js';\nimport allKeys from './allKeys.js';\nimport keyInObj from './_keyInObj.js';\nimport flatten from './_flatten.js';\n\n// Return a copy of the object only containing the allowed properties.\nexport default restArguments(function(obj, keys) {\n  var result = {}, iteratee = keys[0];\n  if (obj == null) return result;\n  if (isFunction(iteratee)) {\n    if (keys.length > 1) iteratee = optimizeCb(iteratee, keys[1]);\n    keys = allKeys(obj);\n  } else {\n    iteratee = keyInObj;\n    keys = flatten(keys, false, false);\n    obj = Object(obj);\n  }\n  for (var i = 0, length = keys.length; i < length; i++) {\n    var key = keys[i];\n    var value = obj[key];\n    if (iteratee(value, key, obj)) result[key] = value;\n  }\n  return result;\n});\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport negate from './negate.js';\nimport map from './map.js';\nimport flatten from './_flatten.js';\nimport contains from './contains.js';\nimport pick from './pick.js';\n\n// Return a copy of the object without the disallowed properties.\nexport default restArguments(function(obj, keys) {\n  var iteratee = keys[0], context;\n  if (isFunction(iteratee)) {\n    iteratee = negate(iteratee);\n    if (keys.length > 1) context = keys[1];\n  } else {\n    keys = map(flatten(keys, false, false), String);\n    iteratee = function(value, key) {\n      return !contains(keys, key);\n    };\n  }\n  return pick(obj, iteratee, context);\n});\n","import { slice } from './_setup.js';\n\n// Returns everything but the last entry of the array. Especially useful on\n// the arguments object. Passing **n** will return all the values in\n// the array, excluding the last N.\nexport default function initial(array, n, guard) {\n  return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\n}\n","import initial from './initial.js';\n\n// Get the first element of an array. Passing **n** will return the first N\n// values in the array. The **guard** check allows it to work with `_.map`.\nexport default function first(array, n, guard) {\n  if (array == null || array.length < 1) return n == null || guard ? void 0 : [];\n  if (n == null || guard) return array[0];\n  return initial(array, array.length - n);\n}\n","import { slice } from './_setup.js';\n\n// Returns everything but the first entry of the `array`. Especially useful on\n// the `arguments` object. Passing an **n** will return the rest N values in the\n// `array`.\nexport default function rest(array, n, guard) {\n  return slice.call(array, n == null || guard ? 1 : n);\n}\n","import rest from './rest.js';\n\n// Get the last element of an array. Passing **n** will return the last N\n// values in the array.\nexport default function last(array, n, guard) {\n  if (array == null || array.length < 1) return n == null || guard ? void 0 : [];\n  if (n == null || guard) return array[array.length - 1];\n  return rest(array, Math.max(0, array.length - n));\n}\n","import filter from './filter.js';\n\n// Trim out all falsy values from an array.\nexport default function compact(array) {\n  return filter(array, Boolean);\n}\n","import _flatten from './_flatten.js';\n\n// Flatten out an array, either recursively (by default), or up to `depth`.\n// Passing `true` or `false` as `depth` means `1` or `Infinity`, respectively.\nexport default function flatten(array, depth) {\n  return _flatten(array, depth, false);\n}\n","import restArguments from './restArguments.js';\nimport flatten from './_flatten.js';\nimport filter from './filter.js';\nimport contains from './contains.js';\n\n// Take the difference between one array and a number of other arrays.\n// Only the elements present in just the first array will remain.\nexport default restArguments(function(array, rest) {\n  rest = flatten(rest, true, true);\n  return filter(array, function(value){\n    return !contains(rest, value);\n  });\n});\n","import restArguments from './restArguments.js';\nimport difference from './difference.js';\n\n// Return a version of the array that does not contain the specified value(s).\nexport default restArguments(function(array, otherArrays) {\n  return difference(array, otherArrays);\n});\n","import isBoolean from './isBoolean.js';\nimport cb from './_cb.js';\nimport getLength from './_getLength.js';\nimport contains from './contains.js';\n\n// Produce a duplicate-free version of the array. If the array has already\n// been sorted, you have the option of using a faster algorithm.\n// The faster algorithm will not work with an iteratee if the iteratee\n// is not a one-to-one function, so providing an iteratee will disable\n// the faster algorithm.\nexport default function uniq(array, isSorted, iteratee, context) {\n  if (!isBoolean(isSorted)) {\n    context = iteratee;\n    iteratee = isSorted;\n    isSorted = false;\n  }\n  if (iteratee != null) iteratee = cb(iteratee, context);\n  var result = [];\n  var seen = [];\n  for (var i = 0, length = getLength(array); i < length; i++) {\n    var value = array[i],\n        computed = iteratee ? iteratee(value, i, array) : value;\n    if (isSorted && !iteratee) {\n      if (!i || seen !== computed) result.push(value);\n      seen = computed;\n    } else if (iteratee) {\n      if (!contains(seen, computed)) {\n        seen.push(computed);\n        result.push(value);\n      }\n    } else if (!contains(result, value)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n","import restArguments from './restArguments.js';\nimport uniq from './uniq.js';\nimport flatten from './_flatten.js';\n\n// Produce an array that contains the union: each distinct element from all of\n// the passed-in arrays.\nexport default restArguments(function(arrays) {\n  return uniq(flatten(arrays, true, true));\n});\n","import getLength from './_getLength.js';\nimport contains from './contains.js';\n\n// Produce an array that contains every item shared between all the\n// passed-in arrays.\nexport default function intersection(array) {\n  var result = [];\n  var argsLength = arguments.length;\n  for (var i = 0, length = getLength(array); i < length; i++) {\n    var item = array[i];\n    if (contains(result, item)) continue;\n    var j;\n    for (j = 1; j < argsLength; j++) {\n      if (!contains(arguments[j], item)) break;\n    }\n    if (j === argsLength) result.push(item);\n  }\n  return result;\n}\n","import max from './max.js';\nimport getLength from './_getLength.js';\nimport pluck from './pluck.js';\n\n// Complement of zip. Unzip accepts an array of arrays and groups\n// each array's elements on shared indices.\nexport default function unzip(array) {\n  var length = array && max(array, getLength).length || 0;\n  var result = Array(length);\n\n  for (var index = 0; index < length; index++) {\n    result[index] = pluck(array, index);\n  }\n  return result;\n}\n","import restArguments from './restArguments.js';\nimport unzip from './unzip.js';\n\n// Zip together multiple lists into a single array -- elements that share\n// an index go together.\nexport default restArguments(unzip);\n","import getLength  from './_getLength.js';\n\n// Converts lists into objects. Pass either a single array of `[key, value]`\n// pairs, or two parallel arrays of the same length -- one of keys, and one of\n// the corresponding values. Passing by pairs is the reverse of `_.pairs`.\nexport default function object(list, values) {\n  var result = {};\n  for (var i = 0, length = getLength(list); i < length; i++) {\n    if (values) {\n      result[list[i]] = values[i];\n    } else {\n      result[list[i][0]] = list[i][1];\n    }\n  }\n  return result;\n}\n","// Generate an integer Array containing an arithmetic progression. A port of\n// the native Python `range()` function. See\n// [the Python documentation](https://docs.python.org/library/functions.html#range).\nexport default function range(start, stop, step) {\n  if (stop == null) {\n    stop = start || 0;\n    start = 0;\n  }\n  if (!step) {\n    step = stop < start ? -1 : 1;\n  }\n\n  var length = Math.max(Math.ceil((stop - start) / step), 0);\n  var range = Array(length);\n\n  for (var idx = 0; idx < length; idx++, start += step) {\n    range[idx] = start;\n  }\n\n  return range;\n}\n","import { slice } from './_setup.js';\n\n// Chunk a single array into multiple arrays, each containing `count` or fewer\n// items.\nexport default function chunk(array, count) {\n  if (count == null || count < 1) return [];\n  var result = [];\n  var i = 0, length = array.length;\n  while (i < length) {\n    result.push(slice.call(array, i, i += count));\n  }\n  return result;\n}\n","import _ from './underscore.js';\n\n// Helper function to continue chaining intermediate results.\nexport default function chainResult(instance, obj) {\n  return instance._chain ? _(obj).chain() : obj;\n}\n","import _ from './underscore.js';\nimport each from './each.js';\nimport functions from './functions.js';\nimport { push } from './_setup.js';\nimport chainResult from './_chainResult.js';\n\n// Add your own custom functions to the Underscore object.\nexport default function mixin(obj) {\n  each(functions(obj), function(name) {\n    var func = _[name] = obj[name];\n    _.prototype[name] = function() {\n      var args = [this._wrapped];\n      push.apply(args, arguments);\n      return chainResult(this, func.apply(_, args));\n    };\n  });\n  return _;\n}\n","import _ from './underscore.js';\nimport each from './each.js';\nimport { ArrayProto } from './_setup.js';\nimport chainResult from './_chainResult.js';\n\n// Add all mutator `Array` functions to the wrapper.\neach(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n  var method = ArrayProto[name];\n  _.prototype[name] = function() {\n    var obj = this._wrapped;\n    if (obj != null) {\n      method.apply(obj, arguments);\n      if ((name === 'shift' || name === 'splice') && obj.length === 0) {\n        delete obj[0];\n      }\n    }\n    return chainResult(this, obj);\n  };\n});\n\n// Add all accessor `Array` functions to the wrapper.\neach(['concat', 'join', 'slice'], function(name) {\n  var method = ArrayProto[name];\n  _.prototype[name] = function() {\n    var obj = this._wrapped;\n    if (obj != null) obj = method.apply(obj, arguments);\n    return chainResult(this, obj);\n  };\n});\n\nexport default _;\n","// Default Export\n// ==============\n// In this module, we mix our bundled exports into the `_` object and export\n// the result. This is analogous to setting `module.exports = _` in CommonJS.\n// Hence, this module is also the entry point of our UMD bundle and the package\n// entry point for CommonJS and AMD users. In other words, this is (the source\n// of) the module you are interfacing with when you do any of the following:\n//\n// ```js\n// // CommonJS\n// var _ = require('underscore');\n//\n// // AMD\n// define(['underscore'], function(_) {...});\n//\n// // UMD in the browser\n// // _ is available as a global variable\n// ```\nimport * as allExports from './index.js';\nimport { mixin } from './index.js';\n\n// Add all of the Underscore functions to the wrapper object.\nvar _ = mixin(allExports);\n// Legacy Node.js API.\n_._ = _;\n// Export the Underscore API.\nexport default _;\n","/**\n * Commands are invoked by the user via keyboard shortcuts or mouse clicks, for example, to move\n * the cursor or to delete the selected records.\n *\n * This module provides APIs for other components to implement groups of commands. Any given\n * command may be implemented by different components, but at most one implementation of any\n * command is active at any time.\n */\n\nimport * as Mousetrap from 'app/client/lib/Mousetrap';\nimport {arrayRemove, unwrap} from 'app/common/gutil';\nimport dom from 'app/client/lib/dom';\nimport {get as getBrowserGlobals} from 'app/client/lib/browserGlobals';\nimport {CommandDef, CommandName, CommendGroupDef, groups} from 'app/client/components/commandList';\n\nimport {Disposable, Observable} from 'grainjs';\nimport * as _ from 'underscore';\nimport * as ko from 'knockout';\n\nconst G = getBrowserGlobals('window');\ntype BoolLike = boolean|ko.Observable<boolean>|ko.Computed<boolean>|Observable<boolean>;\n\n/**\n * A helper method that can create a subscription to ko or grains observables.\n */\nfunction subscribe(value: Exclude<BoolLike, boolean>, fn: (value: boolean) => void) {\n  if (ko.isObservable(value)) {\n    return value.subscribe(fn);\n  } else if (value instanceof Observable) {\n    return value.addListener(fn);\n  } else {\n    throw new Error('Expected an observable');\n  }\n}\n\n// Same logic as used by mousetrap to map 'Mod' key to platform-specific key.\nexport const isMac = (typeof navigator !== 'undefined' && navigator &&\n               /Mac|iPod|iPhone|iPad/.test(navigator.platform));\n\n/**\n * Globally-exposed map of command names to Command objects. E.g. typing \"cmd.cursorDown.run()\" in\n * the browser console should move the cursor down as long as it makes sense in the currently\n * shown view. If the command is inactive, its run() function is a no-op.\n *\n * See also Command object below.\n */\nexport const allCommands: { [key in CommandName]: Command } = {} as any;\n\n/**\n * This is an internal variable, mapping key combinations to the stack of CommandGroups which\n * include them (see also CommandGroup.knownKeys). It's used for deciding which CommandGroup to\n * use when different Commands use the same key.\n */\nconst _allKeys: Record<string, CommandGroup[]> = {};\n\n/**\n * Populate allCommands from those provided, or listed in commandList.js. Also populates the\n * globally exposed `cmd` object whose properties invoke commands: e.g. typing `cmd.cursorDown` in\n * the browser console will run allCommands.cursorDown.run().\n */\nexport function init(optCommandGroups?: CommendGroupDef[]) {\n  const commandGroups = optCommandGroups || groups;\n\n  // Clear out the objects holding the global state.\n  Object.keys(allCommands).forEach(function(c) {\n    delete allCommands[c as CommandName];\n  });\n  Object.keys(_allKeys).forEach(function(k) {\n    delete _allKeys[k as CommandName];\n  });\n\n  commandGroups.forEach(function(commandGroup) {\n    commandGroup.commands.forEach(function(c) {\n      if (allCommands[c.name]) {\n        console.error(\"Ignoring duplicate command %s in commandList\", c.name);\n      } else {\n        allCommands[c.name] = new Command(c.name, c.desc, c.keys, {\n          bindKeys: c.bindKeys,\n          deprecated: c.deprecated,\n        });\n      }\n    });\n  });\n\n  // Define the browser console interface.\n  G.window.cmd = {};\n  _.each(allCommands, function(cmd, name) {\n    Object.defineProperty(G.window.cmd, name, {get: cmd.run});\n  });\n}\n\n//----------------------------------------------------------------------\n\nconst KEY_MAP_MAC = {\n  Mod: '',\n  Alt: '',\n  Shift: '',\n  Ctrl: '',\n  Left: '',\n  Right: '',\n  Up: '',\n  Down: '',\n};\n\nconst KEY_MAP_WIN = {\n  Mod: 'Ctrl',\n  Left: '',\n  Right: '',\n  Up: '',\n  Down: '',\n};\n\nexport function getHumanKey(key: string, mac: boolean): string {\n  const keyMap = mac ? KEY_MAP_MAC : KEY_MAP_WIN;\n  let keys = key.split('+').map(s => s.trim());\n  keys = keys.map(k => {\n    if (k in keyMap) { return (keyMap as any)[k]; }\n    if (k.length === 1) { return k.toUpperCase(); }\n    return k;\n  });\n  return keys.join( mac ? '' : ' + ');\n}\n\nexport interface CommandOptions {\n  bindKeys?: boolean;\n  deprecated?: boolean;\n}\n\n/**\n * Command represents a single command. It is exposed via the `allCommands` map.\n * @property {String} name: The name of the command, same as the key into the `allCommands` map.\n * @property {String} desc: The description of the command.\n * @property {Array}  keys: The array of keyboard shortcuts for the command.\n * @property {Function} run: A bound function that will run the currently active implementation.\n * @property {Observable} isActive: Knockout observable for whether this command is active.\n */\nexport class Command implements CommandDef {\n  public name: CommandName;\n  public desc: string|null;\n  public humanKeys: string[];\n  public keys: string[];\n  public bindKeys: boolean;\n  public isActive: ko.Observable<boolean>;\n  public deprecated: boolean;\n  public run: (...args: any[]) => any;\n  private _implGroupStack: CommandGroup[] = [];\n  private _activeFunc: (...args: any[]) => any = _.noop;\n\n  constructor(name: CommandName, desc: string|null, keys: string[], options: CommandOptions = {}) {\n    this.name = name;\n    this.desc = desc;\n    this.humanKeys = keys.map(key => getHumanKey(key, isMac));\n    this.keys = keys.map(function(k) { return k.trim().toLowerCase().replace(/ *\\+ */g, '+'); });\n    this.bindKeys = options.bindKeys ?? true;\n    this.isActive = ko.observable(false);\n    this._implGroupStack = [];\n    this._activeFunc = _.noop; // The function to run when this command is invoked.\n    this.deprecated = options.deprecated || false;\n    // Let .run bind the Command object, so that it can be used as a stand-alone callback.\n    this.run = this._run.bind(this);\n  }\n  /**\n   * Returns a comma-separated string of all keyboard shortcuts, or `null` if no\n   * shortcuts exist.\n   */\n  public getKeysDesc() {\n    if (this.humanKeys.length === 0) { return null; }\n\n    return `(${this.humanKeys.join(', ')})`;\n  }\n  /**\n   * Returns the text description for the command, including the keyboard shortcuts.\n   */\n  public getDesc() {\n    const parts = [this.desc];\n\n    const keysDesc = this.getKeysDesc();\n    if (keysDesc) { parts.push(keysDesc); }\n\n    return parts.join(' ');\n  }\n  /**\n   * Returns DOM for the keyboard shortcuts, wrapped in cute boxes that look like keyboard keys.\n   */\n  public getKeysDom(separator?: ko.Observable<string>) {\n    return dom('span.shortcut_keys',\n      separator ? this.humanKeys.map((key, i) => [i ? separator() : null, dom('span.shortcut_key_image', key)])\n        : this.humanKeys.map(key => dom('span.shortcut_key_image', key))\n    );\n  }\n  /**\n   * Adds a CommandGroup that implements this Command to the top of the stack of groups.\n   */\n  public addGroup(cmdGroup: CommandGroup) {\n    this._implGroupStack.push(cmdGroup);\n    this._updateActive();\n  }\n  /**\n   * Removes a CommandGroup from the stack of groups implementing this Command.\n   */\n  public removeGroup(cmdGroup: CommandGroup) {\n    arrayRemove(this._implGroupStack, cmdGroup);\n    this._updateActive();\n  }\n  /**\n   * Updates the command's state to reflect the currently active group, if any.\n   */\n  private _updateActive() {\n    if (this._implGroupStack.length > 0) {\n      this.isActive(true);\n      this._activeFunc = _.last(this._implGroupStack)!.commands[this.name];\n    } else {\n      this.isActive(false);\n      this._activeFunc = _.noop;\n    }\n\n    if (this.bindKeys) {\n      // Now bind or unbind the affected key combinations.\n      this.keys.forEach(function(key) {\n        const keyGroups = _allKeys[key];\n        if (keyGroups && keyGroups.length > 0) {\n          const commandGroup = _.last(keyGroups)!;\n          // Command name might be different from this.name in case we are deactivating a command, and\n          // the previous meaning of the key points to a different command.\n          const commandName = commandGroup.knownKeys[key];\n          Mousetrap.bind(key, wrapKeyCallback(commandGroup.commands[commandName]));\n        } else {\n          Mousetrap.unbind(key);\n        }\n      });\n    }\n  }\n\n  private _run(...args: any[]) {\n    return this._activeFunc(...args);\n  }\n}\n\n/**\n * Helper for mousetrap callbacks, which returns a version of the callback that by default stops\n * the propagation of the keyboard event (unless the callback returns a true value).\n */\nfunction wrapKeyCallback(callback: Func) {\n  return function() {\n    return callback(...arguments) || false;\n  };\n}\n\n//----------------------------------------------------------------------\n\ntype Func = (...args: any[]) => any;\ntype CommandMap = { [key in CommandName]?: Func };\n\n/**\n * CommandGroup is the way for other components to provide implementations for a group of\n * commands. Note that CommandGroups are stacked, with groups activated later having priority over\n * groups activated earlier.\n * @param {String->Function} commands: The map of command names to implementations.\n * @param {Object} context: \"this\" context with which to invoke implementation functions.\n * @param {Boolean|Observable<boolean>} activate: Whether to activate this group immediately, false if\n *      omitted. This may be an Observable.\n */\nexport class CommandGroup extends Disposable {\n  public commands: Record<string, Func>;\n  public isActive: boolean;\n  public knownKeys: Record<string, string>;\n  /**\n   * Attach this CommandGroup to a DOM element, to allow it to accept key events, limiting them to\n   * this group only. This is useful for inputs and textareas, where only a limited set of keyboard\n   * shortcuts should be applicable and where by default mousetrap ignores shortcuts completely.\n   *\n   * See also stopCallback in app/client/lib/Mousetrap.js.\n   */\n  public attach = dom.inlinable(function(this: any, elem: any) {\n    Mousetrap.setCustomStopCallback(elem, (combo: any) => !this.knownKeys.hasOwnProperty(combo));\n  });\n\n  constructor(commands: CommandMap, context: any, activate?: BoolLike) {\n    super();\n    // Keep only valid commands, so that we don't have to check for validity elsewhere, and bind\n    // each to the passed-in context object.\n    this.commands = {};\n    this.isActive = false;\n\n    for (const name in commands) {\n      if (allCommands[name as CommandName]) {\n        this.commands[name] = commands[name as CommandName]!.bind(context);\n      } else {\n        console.warn(\"Ignoring unknown command %s\", name);\n      }\n    }\n\n    // Map recognized key combinations to the corresponding command names.\n    this.knownKeys = {};\n    for (const name in this.commands) {\n      const keys = allCommands[name as CommandName]!.keys;\n      for (let i = 0; i < keys.length; i++) {\n        this.knownKeys[keys[i]] = name;\n      }\n    }\n\n    // On disposal, remove the CommandGroup from all the commands and keys.\n    this.onDispose(this._removeGroup.bind(this));\n\n    // Finally, set the activation status of the command group, subscribing if an observable.\n    if (typeof activate === 'boolean' || activate === undefined) {\n      this.activate(activate ?? false);\n    } else if (activate) {\n      this.autoDispose(subscribe(activate, (val) => this.activate(val)));\n      this.activate(unwrap(activate));\n    }\n  }\n\n  /**\n   * Activate or deactivate this implementation group.\n   */\n  public activate(yesNo: boolean) {\n    if (yesNo) {\n      this._addGroup();\n    } else {\n      this._removeGroup();\n    }\n  }\n\n  private _addGroup() {\n    if (!this.isActive) {\n      this.isActive = true;\n      // Add this CommandGroup to each key combination that it recognizes.\n      for (const key in this.knownKeys) {\n        (_allKeys[key] || (_allKeys[key] = [])).push(this);\n      }\n      // Add this CommandGroup to each command that it implements.\n      for (const name in this.commands) {\n        allCommands[name as CommandName]!.addGroup(this);\n      }\n    }\n  }\n  private _removeGroup() {\n    if (this.isActive) {\n      // On disposal, remove the CommandGroup from all the commands and keys.\n      for (const key in this.knownKeys) {\n        arrayRemove(_allKeys[key], this);\n      }\n      for (const name in this.commands) {\n        allCommands[name as CommandName]!.removeGroup(this);\n      }\n      this.isActive = false;\n    }\n  }\n}\n\n\ntype BoundedFunc<T> = (this: T, ...args: any[]) => any;\ntype BoundedMap<T> = { [key in CommandName]?: BoundedFunc<T> };\n\n/**\n * Just a shorthand for CommandGroup.create constructor.\n */\nexport function createGroup<T>(commands: BoundedMap<T>|null, context: T, activate?: BoolLike) {\n  return CommandGroup.create(null, commands ?? {}, context, activate);\n}\n\n//----------------------------------------------------------------------\n\n/**\n * Tie the button to an command listed in commandList.js, triggering the callback from the\n * currently active CommandLayer (if any), and showing a description and keyboard shortcuts in its\n * tooltip.\n *\n * You may use this inline while building dom, as in\n *      dom('button', commands.setButtonCommand(dom, 'command'))\n */\nexport const setButtonCommand = dom.inlinable(function(elem: Element, commandName: CommandName) {\n  const cmd = allCommands[commandName]!;\n  elem.setAttribute('title', cmd.getDesc());\n  dom.on(elem, 'click', cmd.run);\n});\n","/**\n * RefCountMap maintains a reference-counted key-value map. Its sole method is use(key) which\n * increments the counter for the key, and returns a disposable object which exposes the value via\n * the get() method, and decrements the counter back on disposal.\n *\n * The value is constructed on first reference using options.create(key) callback. After the last\n * reference is gone, and an optional gracePeriodMs elapsed, the value is cleaned up using\n * options.dispose(key, value) callback.\n */\nimport {IDisposable} from 'grainjs';\n\nexport interface IRefCountSub<Value> extends IDisposable {\n  get(): Value;\n  dispose(): void;\n}\n\nexport class RefCountMap<Key, Value> implements IDisposable {\n  private _map: Map<Key, RefCountValue<Value>> = new Map();\n  private _createKey: (key: Key) => Value;\n  private _disposeKey: (key: Key, value: Value) => void;\n  private _gracePeriodMs: number;\n\n  /**\n   * Values are created using options.create(key) on first use. They are disposed after last use,\n   * using options.dispose(key, value). If options.gracePeriodMs is greater than zero, values\n   * stick around for this long after last use.\n   */\n  constructor(options: {\n    create: (key: Key) => Value,\n    dispose: (key: Key, value: Value) => void,\n    gracePeriodMs: number,\n  }) {\n    this._createKey = options.create;\n    this._disposeKey = options.dispose;\n    this._gracePeriodMs = options.gracePeriodMs;\n  }\n\n  /**\n   * Use a value, constructing it if needed, or only incrementing the reference count if this key\n   * is already in the map. The returned subscription object has a get() method which returns the\n   * actual value, and a dispose() method, which must be called to release this subscription (i.e.\n   * decrement back the reference count).\n   */\n  public use(key: Key): IRefCountSub<Value> {\n    const rcValue = this._useKey(key);\n    return {\n      get: () => rcValue.value,\n      dispose: () => this._releaseKey(rcValue, key),\n    };\n  }\n\n  /**\n   * Return the value for the key, if one is set, or undefined otherwise, without touching\n   * reference counts.\n   */\n  public get(key: Key): Value|undefined {\n    return this._map.get(key)?.value;\n  }\n\n  /**\n   * Purge a key by immediately removing it from the map. Disposing the remaining IRefCountSub\n   * values will be no-ops.\n   */\n  public purgeKey(key: Key): void {\n    // Note that we must be careful that disposing stale IRefCountSub values is a no-op even when\n    // the same key gets re-added to the map after purgeKey.\n    this._doDisposeKey(key);\n  }\n\n  /**\n   * Disposing clears the map immediately, and calls options.dispose on all values.\n   */\n  public dispose(): void {\n    // Note that a clear() method like this one would not be OK. If the map were to continue being\n    // used after clear(), subscriptions created before clear() would wreak havoc when disposed.\n    for (const [key, r] of this._map) {\n      r.count = 0;\n      this._disposeKey.call(null, key, r.value);\n    }\n    this._map.clear();\n  }\n\n  // For testing: set gracePeriodMs, returning the previous value.\n  public testSetGracePeriodMs(ms: number): number {\n    const prev = this._gracePeriodMs;\n    this._gracePeriodMs = ms;\n    return prev;\n  }\n\n  private _useKey(key: Key): RefCountValue<Value> {\n    const r = this._map.get(key);\n    if (r) {\n      r.count += 1;\n      r.unsetTimeout();\n      return r;\n    }\n    const value = this._createKey.call(null, key);\n    const rcValue = new RefCountValue(value);\n    this._map.set(key, rcValue);\n    return rcValue;\n  }\n\n  private _releaseKey(r: RefCountValue<Value>, key: Key): void {\n    if (r.count > 0) {\n      r.count -= 1;\n      if (r.count === 0) {\n        if (this._gracePeriodMs > 0) {\n          if (!r.disposeTimeout) {\n            r.disposeTimeout = setTimeout(() => this._doDisposeKey(key), this._gracePeriodMs);\n          }\n        } else {\n          this._doDisposeKey(key);\n        }\n      }\n    }\n  }\n\n  private _doDisposeKey(key: Key): void {\n    const r = this._map.get(key);\n    if (r) {\n      this._map.delete(key);\n      r.count = 0;\n      r.unsetTimeout();   // Important, to avoid timeout triggering after the same key is re-added.\n      this._disposeKey.call(null, key, r.value);\n    }\n  }\n}\n\n/**\n * This is an implementation detail of the RefCountMap, which represents a single item.\n */\nclass RefCountValue<Value> {\n  public count: number = 1;\n  public disposeTimeout?: ReturnType<typeof setTimeout> = undefined;\n  constructor(public value: Value) {}\n\n  public unsetTimeout() {\n    if (this.disposeTimeout) {\n      clearTimeout(this.disposeTimeout);\n      this.disposeTimeout = undefined;\n    }\n  }\n}\n","/**\n * FocusLayer addresses the issue of where focus goes \"by default\". In most of Grist operation,\n * the focus is on the special Clipboard element to support typing into cells, and copy-pasting.\n * When a modal is open, the focus is on the modal.\n *\n * When the focus moves to some specific element such as a textbox or a dropdown menu, the\n * FocusLayerManager will watch for this element to lose focus or to get disposed, and will\n * restore focus to the default element.\n */\nimport * as Mousetrap from 'app/client/lib/Mousetrap';\nimport {arrayRemove} from 'app/common/gutil';\nimport {RefCountMap} from 'app/common/RefCountMap';\nimport {Disposable, dom, DomMethod} from 'grainjs';\n\n/**\n * The default focus is organized into layers. A layer determines when focus should move to the\n * default element, and what that element should be. Only the top (most recently created) layer is\n * active at any given time.\n */\nexport interface FocusLayerOptions {\n  // The default element that should have focus while this layer is active.\n  defaultFocusElem: HTMLElement;\n\n  // When true for an element, that element may hold focus even while this layer is active.\n  // Defaults to any element except document.body.\n  allowFocus?: (elem: Element) => boolean;\n\n  // If set, pause mousetrap keyboard shortcuts while this FocusLayer is active. Without it, arrow\n  // keys will navigate in a grid underneath this layer, and Enter may open a cell there.\n  pauseMousetrap?: boolean;\n\n  // Called when the defaultFocusElem gets focused.\n  onDefaultFocus?: () => void;\n\n  // Called when the defaultFocusElem gets blurred.\n  onDefaultBlur?: () => void;\n}\n\n// Use RefCountMap to have a reference-counted instance of the global FocusLayerManager. It will\n// be active as long as at least one FocusLayer is active (i.e. not disposed).\nconst _focusLayerManager = new RefCountMap<null, FocusLayerManager>({\n  create: (key) => FocusLayerManager.create(null),\n  dispose: (key, value) => value.dispose(),\n  gracePeriodMs: 10,\n});\n\n/**\n * The FocusLayerManager implements the functionality, using the top (most recently created) layer\n * to determine when and to what to move focus.\n */\nclass FocusLayerManager extends Disposable {\n  private _timeoutId: ReturnType<typeof setTimeout> | null = null;\n  private _focusLayers: FocusLayer[] = [];\n\n  constructor() {\n    super();\n\n    const grabFocus = this.grabFocus.bind(this);\n\n    this.autoDispose(dom.onElem(window, 'focus', grabFocus));\n    this.grabFocus();\n\n    // The following block of code deals with what happens when the window is in the background.\n    // When it is, focus and blur events are unreliable, and we'll watch explicitly for events which\n    // may cause a change in focus. These wouldn't happen normally for a background window, but do\n    // happen in Selenium Webdriver testing.\n    function setBackgroundCapture(onOff: boolean) {\n      const addRemove = onOff ? window.addEventListener : window.removeEventListener;\n      // Note the third argument useCapture=true, which lets us notice these events before other\n      // code that might call .stopPropagation on them.\n      addRemove.call(window, 'click', grabFocus, true);\n      addRemove.call(window, 'mousedown', grabFocus, true);\n      addRemove.call(window, 'keydown', grabFocus, true);\n    }\n    this.autoDispose(dom.onElem(window, 'blur', setBackgroundCapture.bind(null, true)));\n    this.autoDispose(dom.onElem(window, 'focus', setBackgroundCapture.bind(null, false)));\n    setBackgroundCapture(!document.hasFocus());\n  }\n\n  public addLayer(layer: FocusLayer) {\n    this.getCurrentLayer()?.onDefaultBlur();\n    this._focusLayers.push(layer);\n    // Move the focus to the new layer. Not just grabFocus, because if the focus is on the previous\n    // layer's defaultFocusElem, the new layer might consider it \"allowed\" and never get the focus.\n    setTimeout(() => layer.defaultFocusElem.focus({preventScroll: true}), 0);\n  }\n\n  public removeLayer(layer: FocusLayer) {\n    arrayRemove(this._focusLayers, layer);\n    // Give the remaining layers a chance to check focus.\n    this.grabFocus();\n  }\n\n  public getCurrentLayer(): FocusLayer|undefined {\n    return this._focusLayers[this._focusLayers.length - 1];\n  }\n\n  /**\n   * Select the default focus element, or wait until the current element loses focus.\n   */\n  public grabFocus() {\n    if (!this._timeoutId) {\n      this._timeoutId = setTimeout(() => this._doGrabFocus(), 0);\n    }\n  }\n\n  private _doGrabFocus() {\n    if (this.isDisposed()) { return; }\n    this._timeoutId = null;\n    const layer = this.getCurrentLayer();\n    if (!layer || document.activeElement === layer.defaultFocusElem) {\n      layer?.onDefaultFocus();\n      return;\n    }\n    // If the window doesn't have focus, don't rush to grab it, or we can interfere with focus\n    // outside the frame when embedded. We'll grab focus when setBackgroundCapture tells us to.\n    if (!document.hasFocus()) {\n      return;\n    }\n    if (document.activeElement && layer.allowFocus(document.activeElement)) {\n      watchElementForBlur(document.activeElement, () => this.grabFocus());\n      layer.onDefaultBlur();\n    } else {\n      layer.defaultFocusElem.focus({preventScroll: true});\n      layer.onDefaultFocus();\n    }\n  }\n}\n\n/**\n * An individual FocusLayer determines where focus should default to while this layer is active.\n */\nexport class FocusLayer extends Disposable implements FocusLayerOptions {\n  // FocusLayer.grabFocus() allows triggering the focus check manually.\n  public static grabFocus() {\n    _focusLayerManager.get(null)?.grabFocus();\n  }\n\n  /**\n   * Creates a new FocusLayer and attaches it to the given element. The layer will be disposed\n   * automatically when the element is removed from the DOM.\n   */\n  public static attach(options: Partial<FocusLayerOptions>): DomMethod<HTMLElement> {\n    return (element: HTMLElement) => {\n      const layer = FocusLayer.create(null, {defaultFocusElem: element, ...options});\n      dom.autoDisposeElem(element, layer);\n    };\n  }\n\n  public defaultFocusElem: HTMLElement;\n  public allowFocus: (elem: Element) => boolean;\n  public _onDefaultFocus?: () => void;\n  public _onDefaultBlur?: () => void;\n  private _isDefaultFocused: boolean|null = null;\n\n  constructor(options: FocusLayerOptions) {\n    super();\n    this.defaultFocusElem = options.defaultFocusElem;\n    this.allowFocus = options.allowFocus || (elem => elem !== document.body);\n    this._onDefaultFocus = options.onDefaultFocus;\n    this._onDefaultBlur = options.onDefaultBlur;\n\n    // Make sure the element has a tabIndex attribute, to make it focusable.\n    if (!this.defaultFocusElem.hasAttribute('tabindex')) {\n      this.defaultFocusElem.setAttribute('tabindex', '-1');\n    }\n\n    if (options.pauseMousetrap) {\n      Mousetrap.setPaused(true);\n      this.onDispose(() => Mousetrap.setPaused(false));\n    }\n\n    const managerRefCount = this.autoDispose(_focusLayerManager.use(null));\n    const manager = managerRefCount.get();\n    manager.addLayer(this);\n    this.onDispose(() => manager.removeLayer(this));\n    this.autoDispose(dom.onElem(this.defaultFocusElem, 'blur', () => manager.grabFocus()));\n  }\n\n  public onDefaultFocus() {\n    // Only trigger onDefaultFocus() callback when the focus status actually changed.\n    if (this._isDefaultFocused) { return; }\n    this._isDefaultFocused = true;\n    this._onDefaultFocus?.();\n  }\n\n  public onDefaultBlur() {\n    // Only trigger onDefaultBlur() callback when the focus status actually changed.\n    if (this._isDefaultFocused === false) { return; }\n    this._isDefaultFocused = false;\n    this._onDefaultBlur?.();\n  }\n}\n\n/**\n * Helper to watch a focused element to lose focus, at which point callback() will get called.\n * Because elements getting removed from the DOM don't always trigger 'blur' event, this also\n * uses MutationObserver to watch for the element to get removed from DOM.\n */\nexport function watchElementForBlur(elem: Element, callback: () => void) {\n  const maybeDone = () => {\n    if (document.activeElement !== elem) {\n      lis.dispose();\n      observer.disconnect();\n      callback();\n    }\n  };\n  const lis = dom.onElem(elem, 'blur', maybeDone);\n\n  // Watch for the removal of elem by observing the childList of all its ancestors.\n  // (Just guessing that it is more efficient than watching document.body with {subtree: true}).\n  const observer = new MutationObserver(maybeDone);\n  let parent = elem.parentNode;\n  while (parent) {\n    observer.observe(parent, {childList: true});\n    parent = parent.parentNode;\n  }\n}\n","/**\n * Client-side debug logging.\n * At the moment this simply logs to the browser console, but it's still useful to have dedicated\n * methods to allow collecting them in the future, or silencing them in production or in mocha\n * tests.\n */\n\nexport type LogMethod = (message: string, ...args: any[]) => void;\n\n// tslint:disable:no-console\nexport const debug: LogMethod = console.debug.bind(console);\nexport const info: LogMethod = console.info.bind(console);\nexport const log: LogMethod = console.log.bind(console);\nexport const warn: LogMethod = console.warn.bind(console);\nexport const error: LogMethod = console.error.bind(console);\n","import {get as getBrowserGlobals} from 'app/client/lib/browserGlobals';\nimport * as log from 'app/client/lib/log';\nimport {INotification, INotifyOptions, MessageType, Notifier} from 'app/client/models/NotifyModel';\nimport {ApiErrorDetails} from 'app/common/ApiError';\nimport {fetchFromHome, pageHasHome} from 'app/common/urlUtils';\nimport isError = require('lodash/isError');\nimport pick = require('lodash/pick');\n\nconst G = getBrowserGlobals('document', 'window');\n\nlet _notifier: Notifier;\n\nexport class UserError extends Error {\n  public name: string = \"UserError\";\n  public key?: string;\n  constructor(message: string, options: {key?: string} = {}) {\n    super(message);\n    this.key = options.key;\n  }\n}\n\n/**\n * This error causes Notifier to show the message with an upgrade link.\n */\nexport class NeedUpgradeError extends Error {\n  public name: string = 'NeedUpgradeError';\n  constructor(message: string = 'This feature is not available in your plan') {\n    super(message);\n  }\n}\n\n/**\n * Set the global Notifier instance used by subsequent reportError calls.\n */\nexport function setErrorNotifier(notifier: Notifier) {\n  _notifier = notifier;\n}\n\n// Returns application errors collected by NotifyModel. Used in tests.\nexport function getAppErrors(): string[] {\n  return _notifier.getFullAppErrors().map((e) => e.error.message);\n}\n\n/**\n * Shows normal notification without any styling or icon.\n */\nexport function reportMessage(msg: MessageType, options?: Partial<INotifyOptions>): INotification|undefined {\n  if (_notifier && !_notifier.isDisposed()) {\n    return _notifier.createUserMessage(msg, {\n      ...options\n    });\n  }\n}\n\n/**\n * Shows warning toast notification (with yellow styling), and log to server and to console. Pass\n * {level: 'error'} for same behavior with adjusted styling.\n */\nexport function reportWarning(msg: string, options?: Partial<INotifyOptions>) {\n  options = {level: 'warning', ...options};\n  log.warn(`${options.level}: `, msg);\n  logError(msg);\n  return reportMessage(msg, options);\n}\n\n/**\n * Shows success toast notification (with green styling).\n */\nexport function reportSuccess(msg: MessageType, options?: Partial<INotifyOptions>) {\n  return reportMessage(msg, {level: 'success', ...options});\n}\n\n// Errors from cross-origin scripts, and some add-ons, show up as unhelpful sanitized \"Script\n// error.\" messages. We want to know if they occur, but they are useless to the user, and useless\n// to report multiple times. We report them just once to the server.\n//\n// In particular, this addresses a bug on iOS version of Firefox, which produces uncaught\n// sanitized errors on load AND on attempts to report them, leading to a loop that hangs the\n// browser. Reporting just once is a sufficient workaround.\nfunction isUnhelpful(ev: ErrorEvent) {\n  return !ev.filename && !ev.lineno && ev.message?.toLowerCase().includes('script error');\n}\nlet unhelpfulErrors = 0;\n\n/**\n * Report an error to the user using the global Notifier instance. If the argument is a UserError\n * or an error with a status in the 400 range, it indicates a user error. Otherwise, it's an\n * application error, which the user can report to us as a bug.\n *\n * Not all errors will be shown as an error toast, depending on the content of the error\n * this function might show a simple toast message.\n */\nexport function reportError(err: Error|string, ev?: ErrorEvent): void {\n  log.error(`ERROR:`, err);\n  if (String(err).match(/GristWSConnection disposed/)) {\n    // This error can be emitted while a page is reloaded, and isn't worth reporting.\n    return;\n  }\n  if (ev && isUnhelpful(ev)) {\n    // Report just once to the server. There is little point reporting subsequent such errors once\n    // we know they happen, since each individual error has no useful information.\n    if (++unhelpfulErrors <= 1) {\n      logError(err);\n    }\n    return;\n  }\n\n  logError(err);\n  if (_notifier && !_notifier.isDisposed()) {\n    if (!isError(err)) {\n      err = new Error(String(err));\n    }\n\n    const details: ApiErrorDetails|undefined = (err as any).details;\n    const code: unknown = (err as any).code;\n    const status: unknown = (err as any).status;\n    const message = (details && details.userError) || err.message;\n    if (details && details.limit) {\n      // This is a notification about reaching a plan limit. Key prevents showing multiple\n      // notifications for the same type of limit.\n      const options: Partial<INotifyOptions> = {\n        title: \"Reached plan limit\",\n        key: `limit:${details.limit.quantity || message}`,\n        actions: details.tips?.some(t => t.action === 'manage') ? ['manage'] : ['upgrade'],\n      };\n      if (details.tips && details.tips.some(tip => tip.action === 'add-members')) {\n        // When adding members would fix a problem, give more specific advice.\n        options.title = \"Add users as team members first\";\n        options.actions = [];\n      }\n      // Show the error as a message\n      _notifier.createUserMessage(message, options);\n    } else if (err.name === 'UserError' || (typeof status === 'number' && status >= 400 && status < 500)) {\n      // This is explicitly a user error, or one in the \"Client Error\" range, so treat it as user\n      // error rather than a bug. Using message as the key causes same-message notifications to\n      // replace previous ones rather than accumulate.\n      const options: Partial<INotifyOptions> = {key: (err as UserError).key || message};\n      if (details && details.tips && details.tips.some(tip => tip.action === 'ask-for-help')) {\n        options.actions = ['ask-for-help'];\n      }\n      _notifier.createUserMessage(message, options);\n    } else if (err.name === 'NeedUpgradeError') {\n      // Show the error as a message\n      _notifier.createUserMessage(err.message, {actions: ['upgrade'], key: 'NEED_UPGRADE'});\n    } else if (code === 'AUTH_NO_EDIT' || code === 'ACL_DENY') {\n      // Show the error as a message\n      _notifier.createUserMessage(err.message, {key: code, memos: details?.memos});\n    } else if (message.match(/\\[Sandbox\\].*between formula and data/)) {\n      // Show nicer error message for summary tables.\n      _notifier.createUserMessage(\"Summary tables can only contain formula columns.\",\n        {key: 'summary', actions: ['ask-for-help']});\n    }  else {\n      // If we don't recognize it, consider it an application error (bug) that the user should be\n      // able to report.\n      if (details?.userError) {\n        // If we have user friendly error, show it instead.\n        _notifier.createAppError(Error(details.userError));\n      } else {\n        _notifier.createAppError(err);\n      }\n    }\n  }\n}\n\n/**\n * Set up error handlers, to report uncaught errors and rejections. These are logged to the\n * console and displayed as notifications, when the notifications UI is set up.\n *\n * koUtil, if passed, will enable reporting errors from the evaluation of knockout computeds. It\n * is passed-in as an argument to avoid creating a dependency when knockout isn't used otherwise.\n */\nexport function setUpErrorHandling(doReportError = reportError, koUtil?: any) {\n  if (koUtil) {\n    koUtil.setComputedErrorHandler((err: any) => doReportError(err));\n  }\n\n  // Report also uncaught JS errors and unhandled Promise rejections.\n  G.window.addEventListener('error', (ev: ErrorEvent) => doReportError(ev.error || ev.message, ev));\n\n  G.window.addEventListener('unhandledrejection', (ev: any) => {\n    const reason = ev.reason || (ev.detail && ev.detail.reason);\n    doReportError(reason || ev);\n  });\n\n  // Expose globally a function to report a notification. This is for compatibility with old UI;\n  // in new UI, it renders messages as user errors. New code should use `reportError()` instead.\n  G.window.gristNotify = (message: string) => doReportError(new UserError(message));\n\n  // Expose the function used in tests to get a list of errors in the notifier.\n  G.window.getAppErrors = getAppErrors;\n}\n\n/**\n * Send information about a problem to the backend.  This is crude; there is some\n * over-logging (regular errors such as access rights or account limits) and\n * under-logging (javascript errors during startup might never get reported).\n */\nexport function logError(error: Error|string) {\n  if (!pageHasHome()) { return; }\n  const docId = G.window.gristDocPageModel?.currentDocId?.get();\n  fetchFromHome('/api/log', {\n    method: 'POST',\n    body: JSON.stringify({\n      // Errors don't stringify, so pick out properties explicitly for errors.\n      event: (error instanceof Error) ? pick(error, Object.getOwnPropertyNames(error)) : error,\n      docId,\n      page: G.window.location.href,\n      browser: pick(G.window.navigator, ['language', 'platform', 'userAgent'])\n    }),\n    credentials: 'include',\n    headers: {\n      'Content-Type': 'application/json',\n      'X-Requested-With': 'XMLHttpRequest',\n    }\n  }).catch(e => {\n    // There ... isn't much we can do about this.\n    // tslint:disable-next-line:no-console\n    console.warn('Failed to log event', e);\n  });\n}\n","/**\n * Expose localStorage and sessionStorage with fallbacks for cases when they don't work (e.g.\n * cross-domain embeds in Firefox and Safari).\n *\n * Usage:\n *    import {getStorage, getSessionStorage} from 'app/client/lib/storage';\n *    ... use getStorage() in place of localStorage...\n *    ... use getSessionStorage() in place of sessionStorage...\n */\n\n/**\n * Returns localStorage if functional, or sessionStorage, or an in-memory storage. The fallbacks\n * help with tests, and when Grist is embedded.\n */\nexport function getStorage(): Storage {\n  _storage ??= testStorage('localStorage') || getSessionStorage();\n  return _storage;\n}\n\n/**\n * Return window.sessionStorage, or when not available, an in-memory storage.\n */\nexport function getSessionStorage(): Storage {\n  // If can't use sessionStorage, fall back to a Map-based non-persistent implementation.\n  _sessionStorage ??= testStorage('sessionStorage') || createInMemoryStorage();\n  return _sessionStorage;\n}\n\n\nlet _storage: Storage|undefined;\nlet _sessionStorage: Storage|undefined;\n\n/**\n * Returns the result of window[storageName] if storage is functional, or null otherwise. In some\n * cases (e.g. when embedded), using localStorage may throw errors, in which case we return null.\n * This is similar to the approach taken by store.js.\n */\nfunction testStorage(storageName: 'localStorage'|'sessionStorage'): Storage|null {\n  try {\n    const testStr = '__localStorage_test';\n    const storage = window[storageName];\n    storage.setItem(testStr, testStr);\n    const ok = (storage.getItem(testStr) === testStr);\n    storage.removeItem(testStr);\n    if (ok) {\n      return storage;\n    }\n  } catch (e) {\n    // Fall through\n  }\n  console.warn(`${storageName} is not available; will use fallback`);\n  return null;\n}\n\nfunction createInMemoryStorage(): Storage {\n  const values = new Map<string, string>();\n  return {\n    setItem(key: string, val: string) { values.set(key, val); },\n    getItem(key: string) { return values.get(key) ?? null; },\n    removeItem(key: string) { values.delete(key); },\n    clear() { values.clear(); },\n    get length() { return values.size; },\n    key(index: number): string|null { throw new Error('Not implemented'); },\n  };\n}\n","/**\n * Module to help deal with unsaved changes when closing a page.\n */\nimport {Disposable} from 'grainjs';\n\n/**\n * Create an UnsavedChanges object to indicate there are UnsavedChanges. Dispose it when this is\n * no longer the case. The optional callback will be called to confirm there are indeed unsaved\n * changes. If omitted, it is assumed that there are.\n */\nexport class UnsavedChange extends Disposable {\n  constructor(\n    // If given, saveChanges() will call it to save changes.\n    private _saveCB?: () => Promise<void>,\n    // If given, it may return false to indicate that actually nothing has changed.\n    private _haveChanges?: () => boolean,\n  ) {\n    super();\n    unsavedChanges.add(this);\n    this.onDispose(() => unsavedChanges.delete(this));\n  }\n  public haveUnsavedChanges() { return !this._haveChanges || this._haveChanges(); }\n  public async save(): Promise<void> { return this._saveCB && this._saveCB(); }\n}\n\nexport class UnsavedChangeSet {\n  private _changes = new Set<UnsavedChange>();\n\n  /**\n   * Check if there are any unsaved changes out there.\n   */\n  public haveUnsavedChanges(): boolean {\n    return Array.from(this._changes).some((c) => c.haveUnsavedChanges());\n  }\n\n  /**\n   * Save any unsaved changes out there.\n   */\n  public async saveChanges(): Promise<void> {\n    await Promise.all(Array.from(this._changes).map((c) => c.save()));\n  }\n\n  public add(unsaved: UnsavedChange) { this._changes.add(unsaved); }\n  public delete(unsaved: UnsavedChange) { this._changes.delete(unsaved); }\n}\n\n// Global set of UnsavedChanges, checked on page unload.\nexport const unsavedChanges = new UnsavedChangeSet();\n","/**\n * Generic support of observable state represented by the current page's URL. The state is\n * initialized on first use, and updated on navigation events, such as Back/Forward button clicks,\n * and on calls to pushUrl().\n *\n * Application-specific module should instantiate UrlState with the desired way to encode state in\n * URLs. Other code may then use the UrlState object exposed by that app-specific module.\n *\n * UrlState also provides functions to navigate: makeUrl(), pushUrl(), and setLinkUrl(). The\n * preferred option is to use actual <a> links for navigation, creating them like so:\n *\n *    import {urlState} from '...appUrlState';\n *    dom('a', urlState().setLinkUrl({org: 'foo'}))\n *    dom('a', urlState().setLinkUrl({docPage: pageId}))\n *\n * These will set actual hrefs (e.g. allowing links to be opened in a new tab), and also will\n * intercept clicks and update history (using pushUrl()) without reloading the page.\n */\nimport * as log from 'app/client/lib/log';\nimport {BaseObservable, Disposable, dom, DomElementMethod, observable} from 'grainjs';\n\nexport interface UrlStateSpec<IUrlState> {\n  encodeUrl(state: IUrlState, baseLocation: Location | URL): string;\n  decodeUrl(location: Location | URL): IUrlState;\n  updateState(prevState: IUrlState, newState: IUrlState): IUrlState;\n\n  // If present, the return value is checked by pushUrl() to decide if we can stay on the page or\n  // need to load the new URL. The new URL is always loaded if origin changes.\n  needPageLoad(prevState: IUrlState, newState: IUrlState): boolean;\n\n  // Give the implementation a chance to complete outstanding work, e.g. if there is unsaved\n  // data in the page state that would get destroyed.\n  delayPushUrl(prevState: IUrlState, newState: IUrlState): Promise<void>;\n}\n\nexport type UpdateFunc<IUrlState> = (prevState: IUrlState) => IUrlState;\n\n/**\n * Represents the state of a page in browser history, as encoded in window.location URL.\n */\nexport class UrlState<IUrlState extends object> extends Disposable {\n  // Current state. This gets initialized in the constructor, and updated on navigation events.\n  public state = observable<IUrlState>(this._getState());\n\n  constructor(private _window: HistWindow, private _stateImpl: UrlStateSpec<IUrlState>) {\n    super();\n\n    // Create a hook for navigation. It's exposed on the window for overriding in tests.\n    if (!_window._urlStateLoadPage) {\n      _window._urlStateLoadPage = (href) => { _window.location.href = href; };\n    }\n\n    // On navigation events, update our current state, including the observables.\n    this.autoDispose(dom.onElem(this._window, 'popstate', (ev) => this.loadState()));\n  }\n\n  /**\n   * Creates a new history entry (navigable with Back/Forward buttons), encoding the given state\n   * in the URL. This is similar to navigating to a new URL, but does not reload the page.\n   */\n  public async pushUrl(urlState: IUrlState|UpdateFunc<IUrlState>,\n                       options: {replace?: boolean, avoidReload?: boolean} = {}) {\n    const prevState = this.state.get();\n    const newState = this._mergeState(prevState, urlState);\n\n    const newUrl = this._stateImpl.encodeUrl(newState, this._window.location);\n\n    // Don't create a new history entry if nothing changed as it would only be annoying.\n    if (newUrl === this._window.location.href) { return; }\n\n    const oldOrigin = this._window.location.origin;\n    const newOrigin = new URL(newUrl).origin;\n\n    // We can only pushState() without reloading the page if going to a same-origin URL.\n    const samePage = (oldOrigin === newOrigin &&\n      (options.avoidReload || !this._stateImpl.needPageLoad(prevState, newState)));\n\n    if (samePage) {\n      await this._stateImpl.delayPushUrl(prevState, newState);\n      try {\n        if (options.replace) {\n          this._window.history.replaceState(null, '', newUrl);\n        } else {\n          this._window.history.pushState(null, '', newUrl);\n        }\n        // pushState/replaceState above do not trigger 'popstate' event, so we call loadState() manually.\n        this.loadState();\n      } catch (e) {\n        // If we fail, we may be in a context where Grist doesn't have\n        // control over history, e.g. an iframe with srcdoc. Go ahead\n        // and apply the application state change (e.g. switching to a\n        // different Grist page). The back button won't work, but what\n        // it should do in an embedded context is full of nuance anyway.\n        log.debug(`pushUrl failure: ${e}`);\n        this.state.set(this._stateImpl.decodeUrl(new URL(newUrl)));\n      }\n    } else {\n      this._window._urlStateLoadPage!(newUrl);\n    }\n  }\n\n  /**\n   * Creates a URL (e.g. to use in a link's href) encoding the given state. The `use` argument\n   * allows for this to be used in a computed, and is used by setLinkUrl() and setHref().\n   *\n   * If urlState is an object (such as IGristUrlState), it gets merged with previous state\n   * according to rules (in gristUrlState's updateState). Alternatively, it can be a function that\n   * takes previous state and returns the new one (without mutating the previous state).\n   */\n  public makeUrl(urlState: IUrlState|UpdateFunc<IUrlState>, use: UseCB = unwrap): string {\n    const fullState = this._mergeState(use(this.state), urlState);\n    return this._stateImpl.encodeUrl(fullState, this._window.location);\n  }\n\n  /**\n   * Sets href on a dom element, e.g. dom('a', setHref({...})).\n   * This is similar to {href: makeUrl(urlState)}, but the destination URL will reflect the\n   * current url state (e.g. due to switching pages).\n   */\n  public setHref(urlState: IUrlState|UpdateFunc<IUrlState>): DomElementMethod {\n    return dom.attr('href', (use) => this.makeUrl(urlState, use));\n  }\n\n  /**\n   * Applies to an <a> element to create a smart link, e.g. dom('a', setLinkUrl({ws: wsId})). It\n   * both sets the href (e.g. to allow the link to be opened to a new tab), AND intercepts plain\n   * clicks on it to \"follow\" the link without reloading the page.\n   */\n  public setLinkUrl(urlState: IUrlState|UpdateFunc<IUrlState>): DomElementMethod[] {\n    return [\n      dom.attr('href', (use) => this.makeUrl(urlState, use)),\n      dom.on('click', (ev) => {\n        // Only override plain-vanilla clicks.\n        if (ev.shiftKey || ev.metaKey || ev.ctrlKey || ev.altKey) { return; }\n        ev.preventDefault();\n        return this.pushUrl(urlState);\n      }),\n    ];\n  }\n\n  /**\n   * Reset the state from the current URL. This shouldn't normally need to get called. It's called\n   * automatically when needed. It's also used by tests.\n   */\n  public loadState() {\n    log.debug(`loadState ${this._window.location.href}`);\n    this.state.set(this._getState());\n  }\n\n  private _getState(): IUrlState {\n    return this._stateImpl.decodeUrl(this._window.location);\n  }\n\n  private _mergeState(prevState: IUrlState, newState: IUrlState|UpdateFunc<IUrlState>): IUrlState {\n    return (typeof newState === 'object') ?\n      this._stateImpl.updateState(prevState, newState) :\n      newState(prevState);\n  }\n}\n\n// This is what we expect from the global Window object. Tests may override with a mock.\nexport interface HistWindow extends EventTarget {\n  history: History;\n  location: Location;\n\n  // This is a hook we create, to allow stubbing or overriding in tests.\n  _urlStateLoadPage?: (href: string) => void;\n}\n\n// The type of a 'use' callback as used in a computed(). It's what makes a computed subscribe to\n// its dependencies. The unwrap() helper allows using a dependency without any subscribing.\ntype UseCB = <T>(obs: BaseObservable<T>) => T;\nconst unwrap: UseCB = (obs) => obs.get();\n","/**\n * This module provides a urlState() function returning a singleton UrlState, which represents\n * Grist application state as encoded into a URL, and navigation functions.\n *\n * For example, the current org is available as a value or as an observable:\n *\n *    urlState().state.get().org\n *    computed((use) => use(urlState().state).org);\n *\n * Creating a link which has an href but changes state without reloading page is possible with:\n *\n *    dom('a', urlState().setLinkUrl({ws: 10}), \"...\")\n *\n * Grist URLs have the form:\n *    <org-base>/\n *    <org-base>/ws/<ws>/\n *    <org-base>/doc/<doc>[/p/<docPage>]\n *\n * where <org-base> depends on whether subdomains are in use, i.e. one of:\n *    <org>.getgrist.com\n *    localhost:8080/o/<org>\n *\n * Note that the form of URLs depends on the settings in window.gristConfig object.\n */\nimport {unsavedChanges} from 'app/client/components/UnsavedChanges';\nimport {hooks} from 'app/client/Hooks';\nimport {UrlState} from 'app/client/lib/UrlState';\nimport {decodeUrl, encodeUrl, getSlugIfNeeded, GristLoadConfig, IGristUrlState,\n        parseFirstUrlPart} from 'app/common/gristUrls';\nimport {addOrgToPath} from 'app/common/urlUtils';\nimport {Document} from 'app/common/UserAPI';\nimport isEmpty = require('lodash/isEmpty');\nimport isEqual = require('lodash/isEqual');\nimport {CellValue} from \"app/plugin/GristData\";\n\n/**\n * Returns a singleton UrlState object, initializing it on first use.\n */\nexport function urlState(): UrlState<IGristUrlState> {\n  return _urlState || (_urlState = new UrlState(window, new UrlStateImpl(window as any)));\n}\nlet _urlState: UrlState<IGristUrlState>|undefined;\n\n/**\n * Returns url parameters appropriate for the specified document.\n *\n * In addition to setting `doc` and `slug`, it sets additional parameters\n * from `params` if any are supplied.\n */\nexport function docUrl(doc: Document, params: {org?: string} = {}): IGristUrlState {\n  const state: IGristUrlState = {\n    doc: doc.urlId || doc.id,\n    slug: getSlugIfNeeded(doc),\n  };\n\n  // TODO: Get non-sample documents with `org` set to fully work (a few tests fail).\n  if (params.org) {\n    state.org = params.org;\n  }\n  return state;\n}\n\n// Returns the home page for the current org.\nexport function getMainOrgUrl(): string { return urlState().makeUrl({}); }\n\n// When on a document URL, returns the URL with just the doc ID, omitting other bits (like page).\nexport function getCurrentDocUrl(): string { return urlState().makeUrl({docPage: undefined}); }\n\n// Get url for the login page, which will then redirect to `nextUrl` (current page by default).\nexport function getLoginUrl(nextUrl: string | null = _getCurrentUrl()): string {\n  return _getLoginLogoutUrl('login', nextUrl);\n}\n\n// Get url for the signup page, which will then redirect to `nextUrl` (current page by default).\nexport function getSignupUrl(nextUrl: string = _getCurrentUrl()): string {\n  return _getLoginLogoutUrl('signup', nextUrl);\n}\n\n// Get url for the logout page.\nexport function getLogoutUrl(): string {\n  return _getLoginLogoutUrl('logout');\n}\n\n// Get url for the signin page, which will then redirect to `nextUrl` (current page by default).\nexport function getLoginOrSignupUrl(nextUrl: string = _getCurrentUrl()): string {\n  return _getLoginLogoutUrl('signin', nextUrl);\n}\n\nexport function getWelcomeHomeUrl() {\n  return _buildUrl('welcome/home').href;\n}\n\n// Returns the relative URL (i.e. path) of the current page, except when it's the\n// \"/signed-out\" page, in which case it returns the home page (\"/\").\n// This is a good URL to use for a post-login redirect.\nfunction _getCurrentUrl(): string {\n  const {hash, pathname, search} = new URL(window.location.href);\n  if (pathname.endsWith('/signed-out')) { return '/'; }\n\n  return parseFirstUrlPart('o', pathname).path + search + hash;\n}\n\n// Returns the URL for the given login page, with 'next' param optionally set.\nfunction _getLoginLogoutUrl(page: 'login'|'logout'|'signin'|'signup', nextUrl?: string | null): string {\n  const startUrl = _buildUrl(page);\n  if (nextUrl) { startUrl.searchParams.set('next', nextUrl); }\n  return startUrl.href;\n}\n\nfunction _buildUrl(page?: string): URL {\n  const startUrl = new URL(window.location.href);\n  startUrl.pathname = addOrgToPath('', window.location.href, true) + '/' + (page ?? '');\n  startUrl.search = '';\n  startUrl.hash = '';\n  return startUrl;\n}\n\n/**\n * Implements the interface expected by UrlState. It is only exported for the sake of tests; the\n * only public interface is the urlState() accessor.\n */\nexport class UrlStateImpl {\n  constructor(private _window: {gristConfig?: Partial<GristLoadConfig>}) {}\n\n  /**\n   * The actual serialization of a url state into a URL. The URL has the form\n   *    <org-base>/\n   *    <org-base>/ws/<ws>/\n   *    <org-base>/doc/<doc>[/p/<docPage>]\n   *    <org-base>/doc/<doc>[/m/fork][/p/<docPage>]\n   *\n   * where <org-base> depends on whether subdomains are in use, e.g.\n   *    <org>.getgrist.com\n   *    localhost:8080/o/<org>\n   */\n  public encodeUrl(state: IGristUrlState, baseLocation: Location | URL): string {\n    const gristConfig = this._window.gristConfig || {};\n    return encodeUrl(gristConfig, state, baseLocation, {\n      tweaks: hooks.urlTweaks,\n    });\n  }\n\n  /**\n   * Parse a URL location into an IGristUrlState object. See encodeUrl() documentation.\n   */\n  public decodeUrl(location: Location | URL): IGristUrlState {\n    const gristConfig = this._window.gristConfig || {};\n    return decodeUrl(gristConfig, location, {\n      tweaks: hooks.urlTweaks,\n    });\n  }\n\n  /**\n   * Updates existing state with new state, with attention to Grist-specific meanings.\n   * E.g. setting 'docPage' will reuse previous 'doc', but setting 'org' or 'ws' will ignore it.\n   */\n  public updateState(prevState: IGristUrlState, newState: IGristUrlState): IGristUrlState {\n    const keepState = (newState.org || newState.ws || newState.homePage || newState.doc || isEmpty(newState) ||\n                       newState.account || newState.billing  || newState.activation || newState.welcome ||\n                       newState.supportGrist) ?\n      (prevState.org ? {org: prevState.org} : {}) :\n      prevState;\n    return {...keepState, ...newState};\n  }\n\n  /**\n   * The account page, billing pages, and doc-specific pages for now require a page load.\n   * TODO: Make it so doc pages do NOT require a page load, since we are actually serving the same\n   * single-page app for home and for docs, and should only need a reload triggered if it's\n   * a matter of DocWorker requiring a different version (e.g. /v/OTHER/doc/...).\n   */\n  public needPageLoad(prevState: IGristUrlState, newState: IGristUrlState): boolean {\n    const gristConfig = this._window.gristConfig || {};\n    const orgReload = prevState.org !== newState.org;\n    // Reload when moving to/from a document or between doc and non-doc.\n    const docReload = prevState.doc !== newState.doc;\n    // Reload when moving to/from the account page.\n    const accountReload = Boolean(prevState.account) !== Boolean(newState.account);\n    // Reload when moving to/from a billing page.\n    const billingReload = Boolean(prevState.billing) !== Boolean(newState.billing);\n    // Reload when moving to/from an activation page.\n    const activationReload = Boolean(prevState.activation) !== Boolean(newState.activation);\n    // Reload when moving to/from a welcome page.\n    const welcomeReload = Boolean(prevState.welcome) !== Boolean(newState.welcome);\n    // Reload when link keys change, which changes what the user can access\n    const linkKeysReload = !isEqual(prevState.params?.linkParameters, newState.params?.linkParameters);\n    // Reload when moving to/from the Grist sign-up page.\n    const signupReload = [prevState.login, newState.login].includes('signup')\n      && prevState.login !== newState.login;\n    // Reload when moving to/from the support Grist page.\n    const supportGristReload = Boolean(prevState.supportGrist) !== Boolean(newState.supportGrist);\n    return Boolean(orgReload || accountReload || billingReload || activationReload ||\n      gristConfig.errPage || docReload || welcomeReload || linkKeysReload || signupReload ||\n      supportGristReload);\n  }\n\n  /**\n   * Complete outstanding work before changes that would destroy page state, e.g. if there are\n   * edits to be saved.\n   */\n  public async delayPushUrl(prevState: IGristUrlState, newState: IGristUrlState): Promise<void> {\n    if (newState.docPage !== prevState.docPage) {\n      return unsavedChanges.saveChanges();\n    }\n  }\n}\n\n/**\n * Given value like `foo bar baz`, constructs URL by checking if `baz` is a valid URL and,\n * if not, prepending `http://`.\n */\nexport function constructUrl(value: CellValue): string {\n  if (typeof value !== 'string') {\n    return '';\n  }\n  const url = value.slice(value.lastIndexOf(' ') + 1);\n  try {\n    // Try to construct a valid URL\n    return (new URL(url)).toString();\n  } catch (e) {\n    // Not a valid URL, so try to prefix it with http\n    return 'http://' + url;\n  }\n}\n\n/**\n * If urlValue contains a URL to the current document that can be navigated to without a page reload,\n * returns a parsed IGristUrlState that can be passed to urlState().pushState() to do that navigation.\n * Otherwise, returns null.\n */\nexport function sameDocumentUrlState(urlValue: CellValue): IGristUrlState | null {\n  const urlString = constructUrl(urlValue);\n  let url: URL;\n  try {\n    url = new URL(urlString);\n  } catch {\n    return null;\n  }\n  const oldOrigin = window.location.origin;\n  const newOrigin = url.origin;\n  if (oldOrigin !== newOrigin) {\n    return null;\n  }\n\n  const urlStateImpl = new UrlStateImpl(window as any);\n  const result = urlStateImpl.decodeUrl(url);\n  if (urlStateImpl.needPageLoad(urlState().state.get(), result)) {\n    return null;\n  } else {\n    return result;\n  }\n}\n","import {GristLoadConfig} from 'app/common/gristUrls';\nimport {styled} from 'grainjs';\n\nexport type ProductFlavor = 'grist' | 'fieldlink';\n\nexport interface CustomTheme {\n  bodyClassName?: string;\n  wideLogo?: boolean;   // Stretch the logo and hide the org name.\n}\n\nexport function getFlavor(org?: string): ProductFlavor {\n  // Using a URL parameter e.g. __themeOrg=fieldlink allows overriding the org used for custom\n  // theming, for testing.\n  const themeOrg = new URLSearchParams(window.location.search).get('__themeOrg');\n  if (themeOrg) { org = themeOrg; }\n\n  if (!org) {\n    const gristConfig: GristLoadConfig = (window as any).gristConfig;\n    org = gristConfig && gristConfig.org;\n  }\n  if (org === 'fieldlink') {\n    return 'fieldlink';\n  }\n  return 'grist';\n}\n\nexport function getTheme(flavor: ProductFlavor): CustomTheme {\n  switch (flavor) {\n    case 'fieldlink':\n      return {\n        wideLogo: true,\n        bodyClassName: cssFieldLinkBody.className,\n      };\n    default:\n      return {};\n  }\n}\n\nconst cssFieldLinkBody = styled('body', `\n  --icon-GristLogo: url(\"icons/logo-fieldlink.png\");\n  --icon-GristWideLogo: url(\"icons/logo-fieldlink.png\");\n  --grist-logo-bg: white;\n`);\n","/**\n * CSS Variables. To use in your web application, add `cssRootVars` to the class list for your app's\n * root node, typically `<body>`.\n *\n * The fonts used attempt to default to system fonts as described here:\n *  https://css-tricks.com/snippets/css/system-font-stack/\n *\n */\nimport {createPausableObs, PausableObservable} from 'app/client/lib/pausableObs';\nimport {getStorage} from 'app/client/lib/storage';\nimport {urlState} from 'app/client/models/gristUrlState';\nimport {getTheme, ProductFlavor} from 'app/client/ui/CustomThemes';\nimport {Theme, ThemeAppearance} from 'app/common/ThemePrefs';\nimport {dom, DomElementMethod, makeTestId, Observable, styled, TestId} from 'grainjs';\nimport debounce = require('lodash/debounce');\nimport values = require('lodash/values');\n\nconst VAR_PREFIX = 'grist';\n\nclass CustomProp {\n  constructor(public name: string, public value?: string, public fallback?: string | CustomProp) {\n\n  }\n\n  public decl(): string | undefined {\n    if (this.value === undefined) { return undefined; }\n\n    return `--${VAR_PREFIX}-${this.name}: ${this.value};`;\n  }\n\n  public toString(): string {\n    let value = `--${VAR_PREFIX}-${this.name}`;\n    if (this.fallback) {\n      value += `, ${this.fallback}`;\n    }\n    return `var(${value})`;\n  }\n}\n\n/**\n * Theme-agnostic color properties.\n *\n * These are appropriate for UI elements whose color should not change based on the active\n * theme. Generally, you should instead use the properties defined in `theme`, which will change\n * based on the active theme.\n */\nexport const colors = {\n  lightGrey: new CustomProp('color-light-grey', '#F7F7F7'),\n  mediumGrey: new CustomProp('color-medium-grey', 'rgba(217,217,217,0.6)'),\n  mediumGreyOpaque: new CustomProp('color-medium-grey-opaque', '#E8E8E8'),\n  darkGrey: new CustomProp('color-dark-grey', '#D9D9D9'),\n\n  light: new CustomProp('color-light', '#FFFFFF'),\n  dark: new CustomProp('color-dark', '#262633'),\n  darkText: new CustomProp('color-dark-text', '#494949'),\n  darkBg: new CustomProp('color-dark-bg', '#262633'),\n  slate: new CustomProp('color-slate', '#929299'),\n\n  lightGreen: new CustomProp('color-light-green', '#16B378'),\n  darkGreen: new CustomProp('color-dark-green', '#009058'),\n  darkerGreen: new CustomProp('color-darker-green', '#007548'),\n  lighterGreen: new CustomProp('color-lighter-green', '#b1ffe2'),\n\n  lighterBlue: new CustomProp('color-lighter-blue', '#87b2f9'),\n  lightBlue: new CustomProp('color-light-blue', '#3B82F6'),\n  orange: new CustomProp('color-orange', '#F9AE41'),\n\n  cursor: new CustomProp('color-cursor', '#16B378'),\n  selection: new CustomProp('color-selection', 'rgba(22,179,120,0.15)'),\n  selectionOpaque: new CustomProp('color-selection-opaque', '#DCF4EB'),\n  selectionDarkerOpaque: new CustomProp('color-selection-darker-opaque', '#d6eee5'),\n\n  inactiveCursor: new CustomProp('color-inactive-cursor', '#A2E1C9'),\n\n  hover: new CustomProp('color-hover', '#bfbfbf'),\n  error: new CustomProp('color-error', '#D0021B'),\n  warning: new CustomProp('color-warning', '#F9AE41'),\n  warningBg: new CustomProp('color-warning-bg', '#dd962c'),\n  backdrop: new CustomProp('color-backdrop', 'rgba(38,38,51,0.9)')\n\n};\n\nexport const vars = {\n  /* Fonts */\n  fontFamily: new CustomProp('font-family', `-apple-system,BlinkMacSystemFont,Segoe UI,Liberation Sans,\n    Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol`),\n\n  // This is more monospace and looks better for data that should often align (e.g. to have 00000\n  // take similar space to 11111). This is the main font for user data.\n  fontFamilyData: new CustomProp('font-family-data',\n    `Liberation Sans,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol`),\n\n  /* Font sizes */\n  xxsmallFontSize:  new CustomProp('xx-font-size',        '8px'),\n  xsmallFontSize:   new CustomProp('x-small-font-size',   '10px'),\n  smallFontSize:    new CustomProp('small-font-size',     '11px'),\n  mediumFontSize:   new CustomProp('medium-font-size',    '13px'),\n  introFontSize:    new CustomProp('intro-font-size',     '14px'),    // feels friendlier\n  largeFontSize:    new CustomProp('large-font-size',     '16px'),\n  xlargeFontSize:   new CustomProp('x-large-font-size',   '18px'),\n  xxlargeFontSize:  new CustomProp('xx-large-font-size',  '20px'),\n  xxxlargeFontSize: new CustomProp('xxx-large-font-size', '22px'),\n\n  /* Controls size and space */\n  controlFontSize: new CustomProp('control-font-size', '12px'),\n  smallControlFontSize: new CustomProp('small-control-font-size', '10px'),\n  bigControlFontSize: new CustomProp('big-control-font-size', '13px'),\n  headerControlFontSize: new CustomProp('header-control-font-size', '22px'),\n  bigControlTextWeight: new CustomProp('big-text-weight', '500'),\n  headerControlTextWeight: new CustomProp('header-text-weight', '600'),\n\n  /* Labels */\n  labelTextSize:  new CustomProp('label-text-size', 'medium'),\n  labelTextBg:    new CustomProp('label-text-bg', '#FFFFFF'),\n  labelActiveBg:  new CustomProp('label-active-bg', '#F0F0F0'),\n\n  controlMargin:  new CustomProp('normal-margin', '2px'),\n  controlPadding: new CustomProp('normal-padding', '3px 5px'),\n  tightPadding:   new CustomProp('tight-padding',  '1px 2px'),\n  loosePadding:   new CustomProp('loose-padding',  '5px 15px'),\n\n  /* Control colors and borders */\n  primaryBg:        new CustomProp('primary-fg', '#16B378'),\n  primaryBgHover:   new CustomProp('primary-fg-hover', '#009058'),\n  primaryFg:        new CustomProp('primary-bg', '#ffffff'),\n\n  controlBg:      new CustomProp('control-bg', '#ffffff'),\n  controlFg:      new CustomProp('control-fg', '#16B378'),\n  controlFgHover: new CustomProp('primary-fg-hover', '#009058'),\n\n  controlBorder:        new CustomProp('control-border', '1px solid #11B683'),\n  controlBorderRadius:  new CustomProp('border-radius', '4px'),\n\n  logoBg: new CustomProp('logo-bg', '#040404'),\n  logoSize: new CustomProp('logo-size', '22px 22px'),\n  toastBg: new CustomProp('toast-bg', '#040404'),\n\n  /* Z indexes */\n  menuZIndex: new CustomProp('menu-z-index', '999'),\n  modalZIndex: new CustomProp('modal-z-index', '999'),\n  onboardingBackdropZIndex: new CustomProp('onboarding-backdrop-z-index', '999'),\n  onboardingPopupZIndex: new CustomProp('onboarding-popup-z-index', '1000'),\n  floatingPopupZIndex: new CustomProp('floating-popup-z-index', '1002'),\n  tutorialModalZIndex: new CustomProp('tutorial-modal-z-index', '1003'),\n  pricingModalZIndex: new CustomProp('pricing-modal-z-index', '1004'),\n  floatingPopupMenuZIndex: new CustomProp('floating-popup-menu-z-index', '1004'),\n  notificationZIndex: new CustomProp('notification-z-index', '1100'),\n  browserCheckZIndex: new CustomProp('browser-check-z-index', '5000'),\n  tooltipZIndex: new CustomProp('tooltip-z-index', '5000'),\n  // TODO: Add properties for remaining hard-coded z-indexes.\n};\n\n/**\n * Theme-related color properties.\n *\n * Unlike `colors`, these properties don't define any values as they aren't known ahead of time.\n * Instead, when the application loads, CSS variables mapped to these properties are attached to\n * the document based on the user's theme preferences.\n *\n * In the case that CSS variables aren't attached to the document, their fallback values will be\n * used. This ensures that styles are still applied even when there's trouble fetching preferences,\n * and also serves as a method of maintaining backwards compatibility with custom CSS rules that\n * use legacy variable names (prefixed with `grist-color-`).\n */\nexport const theme = {\n  /* Text */\n  text: new CustomProp('theme-text', undefined, colors.dark),\n  lightText: new CustomProp('theme-text-light', undefined, colors.slate),\n  darkText: new CustomProp('theme-text-dark', undefined, 'black'),\n  errorText: new CustomProp('theme-text-error', undefined, colors.error),\n  dangerText: new CustomProp('theme-text-danger', undefined, '#FFA500'),\n  disabledText: new CustomProp('theme-text-disabled', undefined, colors.slate),\n\n  /* Page */\n  pageBg: new CustomProp('theme-page-bg', undefined, colors.lightGrey),\n  pageBackdrop: new CustomProp('theme-page-backdrop', undefined, 'grey'),\n\n  /* Page Panels */\n  mainPanelBg: new CustomProp('theme-page-panels-main-panel-bg', undefined, 'white'),\n  leftPanelBg: new CustomProp('theme-page-panels-left-panel-bg', undefined, colors.lightGrey),\n  rightPanelBg: new CustomProp('theme-page-panels-right-panel-bg', undefined, colors.lightGrey),\n  topHeaderBg: new CustomProp('theme-page-panels-top-header-bg', undefined, 'white'),\n  bottomFooterBg: new CustomProp('theme-page-panels-bottom-footer-bg', undefined, 'white'),\n  pagePanelsBorder: new CustomProp('theme-page-panels-border', undefined, colors.mediumGrey),\n  pagePanelsBorderResizing: new CustomProp('theme-page-panels-border-resizing', undefined,\n    colors.lightGreen),\n  sidePanelOpenerFg: new CustomProp('theme-page-panels-side-panel-opener-fg', undefined,\n    colors.slate),\n  sidePanelOpenerActiveFg: new CustomProp('theme-page-panels-side-panel-opener-active-fg',\n    undefined, 'white'),\n  sidePanelOpenerActiveBg: new CustomProp('theme-page-panels-side-panel-opener-active-bg',\n    undefined, colors.lightGreen),\n\n  /* Add New */\n  addNewCircleFg: new CustomProp('theme-add-new-circle-fg', undefined, colors.light),\n  addNewCircleBg: new CustomProp('theme-add-new-circle-bg', undefined, colors.darkGreen),\n  addNewCircleHoverBg: new CustomProp('theme-add-new-circle-hover-bg', undefined,\n    colors.darkerGreen),\n  addNewCircleSmallFg: new CustomProp('theme-add-new-circle-small-fg', undefined, colors.light),\n  addNewCircleSmallBg: new CustomProp('theme-add-new-circle-small-bg', undefined,\n    colors.lightGreen),\n  addNewCircleSmallHoverBg: new CustomProp('theme-add-new-circle-small-hover-bg', undefined,\n    colors.darkGreen),\n\n  /* Top Bar */\n  topBarButtonPrimaryFg: new CustomProp('theme-top-bar-button-primary-fg', undefined,\n    colors.lightGreen),\n  topBarButtonSecondaryFg: new CustomProp('theme-top-bar-button-secondary-fg', undefined,\n    colors.slate),\n  topBarButtonDisabledFg: new CustomProp('theme-top-bar-button-disabled-fg', undefined,\n    colors.darkGrey),\n  topBarButtonErrorFg: new CustomProp('theme-top-bar-button-error-fg', undefined, colors.error),\n\n  /* Notifications */\n  notificationsPanelHeaderBg: new CustomProp('theme-notifications-panel-header-bg', undefined,\n    colors.lightGrey),\n  notificationsPanelBodyBg: new CustomProp('theme-notifications-panel-body-bg', undefined,\n    'white'),\n  notificationsPanelBorder: new CustomProp('theme-notifications-panel-border', undefined,\n    colors.darkGrey),\n\n  /* Toasts */\n  toastText: new CustomProp('theme-toast-text', undefined, colors.light),\n  toastLightText: new CustomProp('theme-toast-text-light', undefined, colors.slate),\n  toastBg: new CustomProp('theme-toast-bg', undefined, vars.toastBg),\n  toastMemoText: new CustomProp('theme-toast-memo-text', undefined, colors.light),\n  toastMemoBg: new CustomProp('theme-toast-memo-bg', undefined, colors.dark),\n  toastErrorIcon: new CustomProp('theme-toast-error-icon', undefined, colors.error),\n  toastErrorBg: new CustomProp('theme-toast-error-bg', undefined, colors.error),\n  toastSuccessIcon: new CustomProp('theme-toast-success-icon', undefined, colors.darkGreen),\n  toastSuccessBg: new CustomProp('theme-toast-success-bg', undefined, colors.darkGreen),\n  toastWarningIcon: new CustomProp('theme-toast-warning-icon', undefined, colors.warning),\n  toastWarningBg: new CustomProp('theme-toast-warning-bg', undefined, colors.warningBg),\n  toastInfoIcon: new CustomProp('theme-toast-info-icon', undefined, colors.lightBlue),\n  toastInfoBg: new CustomProp('theme-toast-info-bg', undefined, colors.lightBlue),\n  toastControlFg: new CustomProp('theme-toast-control-fg', undefined, colors.lightGreen),\n  toastInfoControlFg: new CustomProp('theme-toast-control-info-fg', undefined, colors.lighterBlue),\n\n  /* Tooltips */\n  tooltipFg: new CustomProp('theme-tooltip-fg', undefined, 'white'),\n  tooltipBg: new CustomProp('theme-tooltip-bg', undefined, 'rgba(0, 0, 0, 0.75)'),\n  tooltipIcon: new CustomProp('theme-tooltip-icon', undefined, colors.slate),\n  tooltipCloseButtonFg: new CustomProp('theme-tooltip-close-button-fg', undefined, 'white'),\n  tooltipCloseButtonHoverFg: new CustomProp('theme-tooltip-close-button-hover-fg', undefined,\n    'black'),\n  tooltipCloseButtonHoverBg: new CustomProp('theme-tooltip-close-button-hover-bg', undefined,\n    'white'),\n  tooltipPopupHeaderFg: new CustomProp('theme-tooltip-popup-header-fg', undefined, colors.light),\n  tooltipPopupHeaderBg: new CustomProp('theme-tooltip-popup-header-bg', undefined, colors.lightGreen),\n\n  /* Modals */\n  modalBg: new CustomProp('theme-modal-bg', undefined, 'white'),\n  modalBackdrop: new CustomProp('theme-modal-backdrop', undefined, colors.backdrop),\n  modalBorder: new CustomProp('theme-modal-border', undefined, colors.mediumGreyOpaque),\n  modalBorderDark: new CustomProp('theme-modal-border-dark', undefined, colors.darkGrey),\n  modalBorderHover: new CustomProp('theme-modal-border-hover', undefined, colors.slate),\n  modalInnerShadow: new CustomProp('theme-modal-shadow-inner', undefined,\n    'rgba(31, 37, 50, 0.31)'),\n  modalOuterShadow: new CustomProp('theme-modal-shadow-outer', undefined,\n    'rgba(76, 86, 103, 0.24)'),\n  modalCloseButtonFg: new CustomProp('theme-modal-close-button-fg', undefined, colors.slate),\n  modalBackdropCloseButtonFg: new CustomProp('theme-modal-backdrop-close-button-fg', undefined,\n    vars.primaryBg),\n  modalBackdropCloseButtonHoverFg: new CustomProp('theme-modal-backdrop-close-button-hover-fg',\n    undefined, colors.lighterGreen),\n\n  /* Popups */\n  popupBg: new CustomProp('theme-popup-bg', undefined, 'white'),\n  popupInnerShadow: new CustomProp('theme-popup-shadow-inner', undefined,\n    'rgba(31, 37, 50, 0.31)'),\n  popupOuterShadow: new CustomProp('theme-popup-shadow-outer', undefined,\n    'rgba(76, 86, 103, 0.24)'),\n  popupCloseButtonFg: new CustomProp('theme-popup-close-button-fg', undefined, colors.slate),\n\n  /* Prompts */\n  promptFg: new CustomProp('theme-prompt-fg', undefined, '#606060'),\n\n  /* Progress Bars */\n  progressBarFg: new CustomProp('theme-progress-bar-fg', undefined, colors.lightGreen),\n  progressBarErrorFg: new CustomProp('theme-progress-bar-error-fg', undefined, colors.error),\n  progressBarBg: new CustomProp('theme-progress-bar-bg', undefined, colors.darkGrey),\n\n  /* Links */\n  link: new CustomProp('theme-link', undefined, colors.lightGreen),\n  linkHover: new CustomProp('theme-link-hover', undefined, colors.lightGreen),\n\n  /* Hover */\n  hover: new CustomProp('theme-hover', undefined, colors.mediumGrey),\n  lightHover: new CustomProp('theme-hover-light', undefined, colors.lightGrey),\n\n  /* Cell Editor */\n  cellEditorFg: new CustomProp('theme-cell-editor-fg', undefined, colors.dark),\n  cellEditorBg: new CustomProp('theme-cell-editor-bg', undefined, colors.light),\n\n  /* Cursor */\n  cursor: new CustomProp('theme-cursor', undefined, colors.cursor),\n  cursorInactive: new CustomProp('theme-cursor-inactive', undefined, colors.inactiveCursor),\n  cursorReadonly: new CustomProp('theme-cursor-readonly', undefined, colors.slate),\n\n  /* Tables */\n  tableHeaderFg: new CustomProp('theme-table-header-fg', undefined, 'unset'),\n  tableHeaderSelectedFg: new CustomProp('theme-table-header-selected-fg', undefined, 'unset'),\n  tableHeaderBg: new CustomProp('theme-table-header-bg', undefined, colors.lightGrey),\n  tableHeaderSelectedBg: new CustomProp('theme-table-header-selected-bg', undefined,\n    colors.mediumGreyOpaque),\n  tableHeaderBorder: new CustomProp('theme-table-header-border', undefined, 'lightgray'),\n  tableHeaderBorderDark: new CustomProp('theme-table-header-border-dark', undefined,\n    colors.darkGrey),\n  tableBodyBg: new CustomProp('theme-table-body-bg', undefined, 'white'),\n  tableBodyBorder: new CustomProp('theme-table-body-border', undefined, colors.darkGrey),\n  tableAddNewBg: new CustomProp('theme-table-add-new-bg', undefined, 'inherit'),\n  tableScrollShadow: new CustomProp('theme-table-scroll-shadow', undefined, '#444444'),\n  tableFrozenColumnsBorder: new CustomProp('theme-table-frozen-columns-border', undefined,\n    '#999999'),\n  tableDragDropIndicator: new CustomProp('theme-table-drag-drop-indicator', undefined, 'gray'),\n  tableDragDropShadow: new CustomProp('theme-table-drag-drop-shadow', undefined, '#F0F0F0'),\n\n  /* Cards */\n  cardCompactWidgetBg: new CustomProp('theme-card-compact-widget-bg', undefined,\n    colors.mediumGrey),\n  cardCompactRecordBg: new CustomProp('theme-card-compact-record-bg', undefined, 'white'),\n  cardBlocksBg: new CustomProp('theme-card-blocks-bg', undefined, colors.mediumGrey),\n  cardFormLabel: new CustomProp('theme-card-form-label', undefined, colors.slate),\n  cardCompactLabel: new CustomProp('theme-card-compact-label', undefined, colors.slate),\n  cardBlocksLabel: new CustomProp('theme-card-blocks-label', undefined, colors.slate),\n  cardFormBorder: new CustomProp('theme-card-form-border', undefined, 'lightgrey'),\n  cardCompactBorder: new CustomProp('theme-card-compact-border', undefined, colors.darkGrey),\n  cardEditingLayoutBg: new CustomProp('theme-card-editing-layout-bg', undefined,\n    'rgba(192, 192, 192, 0.2)'),\n  cardEditingLayoutBorder: new CustomProp('theme-card-editing-layout-border', undefined,\n    colors.darkGrey),\n\n  /* Card Lists */\n  cardListFormBorder: new CustomProp('theme-card-list-form-border', undefined, colors.darkGrey),\n  cardListBlocksBorder: new CustomProp('theme-card-list-blocks-border', undefined,\n    colors.darkGrey),\n\n  /* Selection */\n  selection: new CustomProp('theme-selection', undefined, colors.selection),\n  selectionDarker: new CustomProp('theme-selection-darker', undefined, 'rgba(22,179,120,0.25)'),\n  selectionDarkest: new CustomProp('theme-selection-darkest', undefined, 'rgba(22,179,120,0.35)'),\n  selectionOpaqueFg: new CustomProp('theme-selection-opaque-fg', undefined, 'unset'),\n  selectionOpaqueBg: new CustomProp('theme-selection-opaque-bg', undefined,\n    colors.selectionOpaque),\n  selectionOpaqueDarkBg: new CustomProp('theme-selection-opaque-dark-bg', undefined,\n    colors.selectionDarkerOpaque),\n  selectionHeader: new CustomProp('theme-selection-header', undefined, colors.mediumGrey),\n\n  /* Widgets */\n  widgetBg: new CustomProp('theme-widget-bg', undefined, 'white'),\n  widgetBorder: new CustomProp('theme-widget-border', undefined, colors.darkGrey),\n  widgetActiveBorder: new CustomProp('theme-widget-active-border', undefined, colors.lightGreen),\n  widgetInactiveStripesLight: new CustomProp('theme-widget-inactive-stripes-light', undefined,\n    colors.lightGrey),\n  widgetInactiveStripesDark: new CustomProp('theme-widget-inactive-stripes-dark', undefined,\n    colors.mediumGreyOpaque),\n\n  /* Pinned Docs */\n  pinnedDocFooterBg: new CustomProp('theme-pinned-doc-footer-bg', undefined, colors.light),\n  pinnedDocBorder: new CustomProp('theme-pinned-doc-border', undefined, colors.mediumGrey),\n  pinnedDocBorderHover: new CustomProp('theme-pinned-doc-border-hover', undefined, colors.slate),\n  pinnedDocEditorBg: new CustomProp('theme-pinned-doc-editor-bg', undefined, colors.mediumGrey),\n\n  /* Raw Data */\n  rawDataTableBorder: new CustomProp('theme-raw-data-table-border', undefined, colors.mediumGrey),\n  rawDataTableBorderHover: new CustomProp('theme-raw-data-table-border-hover',\n    undefined, colors.slate),\n\n  /* Controls */\n  controlFg: new CustomProp('theme-control-fg', undefined, vars.controlFg),\n  controlPrimaryFg: new CustomProp('theme-control-primary-fg', undefined, vars.primaryFg),\n  controlPrimaryBg: new CustomProp('theme-control-primary-bg', undefined, vars.primaryBg),\n  controlSecondaryFg: new CustomProp('theme-control-secondary-fg', undefined, colors.slate),\n  controlHoverFg: new CustomProp('theme-control-hover-fg', undefined, vars.controlFgHover),\n  controlPrimaryHoverBg: new CustomProp('theme-control-primary-hover-bg', undefined,\n    vars.primaryBgHover),\n  controlSecondaryHoverFg: new CustomProp('theme-control-secondary-hover-fg', undefined,\n    colors.dark),\n  controlSecondaryHoverBg: new CustomProp('theme-control-secondary-hover-bg', undefined,\n    colors.darkGrey),\n  controlDisabledFg: new CustomProp('theme-control-disabled-fg', undefined, colors.light),\n  controlDisabledBg: new CustomProp('theme-control-disabled-bg', undefined, colors.slate),\n  controlPrimaryDisabled: new CustomProp('theme-control-primary-disabled', undefined,\n    colors.inactiveCursor),\n  controlBorder: new CustomProp('theme-control-border', undefined, vars.controlBorder),\n\n  /* Checkboxes */\n  checkboxBg: new CustomProp('theme-checkbox-bg', undefined, colors.light),\n  checkboxDisabledBg: new CustomProp('theme-checkbox-disabled-bg', undefined, colors.darkGrey),\n  checkboxBorder: new CustomProp('theme-checkbox-border', undefined, colors.darkGrey),\n  checkboxBorderHover: new CustomProp('theme-checkbox-border-hover', undefined, colors.hover),\n\n  /* Move Docs */\n  moveDocsSelectedFg: new CustomProp('theme-move-docs-selected-fg', undefined, 'white'),\n  moveDocsSelectedBg: new CustomProp('theme-move-docs-selected-bg', undefined, colors.lightGreen),\n  moveDocsDisabledFg: new CustomProp('theme-move-docs-disabled-bg', undefined, colors.darkGrey),\n\n  /* Filter Bar */\n  filterBarButtonSavedFg: new CustomProp('theme-filter-bar-button-saved-fg', undefined,\n    colors.light),\n  filterBarButtonSavedBg: new CustomProp('theme-filter-bar-button-saved-bg', undefined,\n    colors.slate),\n  filterBarButtonSavedHoverBg: new CustomProp('theme-filter-bar-button-saved-hover-bg', undefined,\n    colors.darkGrey),\n\n  /* Icons */\n  iconDisabled: new CustomProp('theme-icon-disabled', undefined, colors.slate),\n  iconError: new CustomProp('theme-icon-error', undefined, colors.error),\n\n  /* Icon Buttons */\n  iconButtonFg: new CustomProp('theme-icon-button-fg', undefined, colors.light),\n  iconButtonPrimaryBg: new CustomProp('theme-icon-button-primary-bg', undefined,\n    colors.lightGreen),\n  iconButtonPrimaryHoverBg: new CustomProp('theme-icon-button-primary-hover-bg',\n    undefined, colors.darkGreen),\n  iconButtonSecondaryBg: new CustomProp('theme-icon-button-secondary-bg', undefined,\n    colors.darkGrey),\n  iconButtonSecondaryHoverBg: new CustomProp('theme-icon-button-secondary-hover-bg',\n    undefined, colors.slate),\n\n  /* Left Panel */\n  pageHoverBg: new CustomProp('theme-left-panel-page-hover-bg', undefined, colors.mediumGrey),\n  activePageFg: new CustomProp('theme-left-panel-active-page-fg', undefined, 'white'),\n  activePageBg: new CustomProp('theme-left-panel-active-page-bg', undefined, colors.darkBg),\n  disabledPageFg: new CustomProp('theme-left-panel-disabled-page-fg', undefined, colors.darkGrey),\n  pageOptionsFg: new CustomProp('theme-left-panel-page-options-bg', undefined, colors.slate),\n  pageOptionsHoverFg: new CustomProp('theme-left-panel-page-options-hover-fg', undefined, 'white'),\n  pageOptionsHoverBg: new CustomProp('theme-left-panel-page-options-hover-bg', undefined,\n    colors.darkGrey),\n  pageOptionsSelectedHoverBg: new CustomProp('theme-left-panel-page-options-selected-hover-bg',\n    undefined, colors.slate),\n  pageInitialsFg: new CustomProp('theme-left-panel-page-initials-fg', undefined, 'white'),\n  pageInitialsBg: new CustomProp('theme-left-panel-page-initials-bg', undefined, colors.slate),\n  pageInitialsEmojiBg: new CustomProp('theme-left-panel-page-emoji-fg', undefined, 'white'),\n  pageInitialsEmojiOutline: new CustomProp('theme-left-panel-page-emoji-outline', undefined,\n    colors.darkGrey),\n\n  /* Right Panel */\n  rightPanelTabFg: new CustomProp('theme-right-panel-tab-fg', undefined, colors.dark),\n  rightPanelTabBg: new CustomProp('theme-right-panel-tab-bg', undefined, colors.lightGrey),\n  rightPanelTabIcon: new CustomProp('theme-right-panel-tab-icon', undefined, colors.slate),\n  rightPanelTabIconHover: new CustomProp('theme-right-panel-tab-icon-hover', undefined,\n    colors.lightGreen),\n  rightPanelTabHoverBg: new CustomProp('theme-right-panel-tab-hover-bg', undefined,\n    colors.mediumGrey),\n  rightPanelTabSelectedFg: new CustomProp('theme-right-panel-tab-selected-fg', undefined,\n    colors.light),\n  rightPanelTabSelectedBg: new CustomProp('theme-right-panel-tab-selected-bg', undefined,\n    colors.lightGreen),\n  rightPanelTabButtonHoverBg: new CustomProp('theme-right-panel-tab-button-hover-bg',\n    undefined, colors.darkGreen),\n  rightPanelSubtabFg: new CustomProp('theme-right-panel-subtab-fg', undefined, colors.lightGreen),\n  rightPanelSubtabSelectedFg: new CustomProp('theme-right-panel-subtab-selected-fg', undefined,\n    colors.dark),\n  rightPanelSubtabSelectedUnderline: new CustomProp('theme-right-panel-subtab-selected-underline',\n    undefined, colors.lightGreen),\n  rightPanelSubtabHoverFg: new CustomProp('theme-right-panel-subtab-hover-fg', undefined,\n    colors.darkGreen),\n  rightPanelSubtabHoverUnderline: new CustomProp('theme-right-panel-subtab-hover-underline',\n    undefined, colors.lightGreen),\n  rightPanelDisabledOverlay: new CustomProp('theme-right-panel-disabled-overlay', undefined,\n    'white'),\n  rightPanelToggleButtonEnabledFg: new CustomProp('theme-right-panel-toggle-button-enabled-fg',\n    undefined, colors.light),\n  rightPanelToggleButtonEnabledBg: new CustomProp('theme-right-panel-toggle-button-enabled-bg',\n    undefined, colors.dark),\n  rightPanelToggleButtonEnabledHoverFg: new CustomProp(\n    'theme-right-panel-toggle-button-enabled-hover-fg', undefined, colors.darkGrey),\n  rightPanelToggleButtonDisabledFg: new CustomProp('theme-right-panel-toggle-button-disabled-fg',\n    undefined, colors.light),\n  rightPanelToggleButtonDisabledBg: new CustomProp('theme-right-panel-toggle-button-disabled-bg',\n    undefined, colors.mediumGreyOpaque),\n  rightPanelFieldSettingsBg: new CustomProp('theme-right-panel-field-settings-bg',\n    undefined, colors.mediumGreyOpaque),\n  rightPanelFieldSettingsButtonBg: new CustomProp('theme-right-panel-field-settings-button-bg',\n    undefined, 'lightgrey'),\n\n  /* Document History */\n  documentHistorySnapshotFg: new CustomProp('theme-document-history-snapshot-fg', undefined,\n    colors.dark),\n  documentHistorySnapshotSelectedFg: new CustomProp('theme-document-history-snapshot-selected-fg',\n    undefined, colors.light),\n  documentHistorySnapshotBg: new CustomProp('theme-document-history-snapshot-bg', undefined,\n    'white'),\n  documentHistorySnapshotSelectedBg: new CustomProp('theme-document-history-snapshot-selected-bg',\n    undefined, colors.dark),\n  documentHistorySnapshotBorder: new CustomProp('theme-document-history-snapshot-border',\n    undefined, colors.mediumGrey),\n  documentHistoryActivityText: new CustomProp('theme-document-history-activity-text', undefined,\n    'unset'),\n  documentHistoryActivityLightText: new CustomProp('theme-document-history-activity-text-light',\n    undefined, '#333333'),\n\n  /* Accents */\n  accentIcon: new CustomProp('theme-accent-icon', undefined, colors.lightGreen),\n  accentBorder: new CustomProp('theme-accent-border', undefined, colors.lightGreen),\n  accentText: new CustomProp('theme-accent-text', undefined, colors.lightGreen),\n\n  /* Inputs */\n  inputFg: new CustomProp('theme-input-fg', undefined, 'black'),\n  inputBg: new CustomProp('theme-input-bg', undefined, 'white'),\n  inputDisabledFg: new CustomProp('theme-input-disabled-fg', undefined, colors.slate),\n  inputDisabledBg: new CustomProp('theme-input-disabled-bg', undefined, colors.lightGrey),\n  inputPlaceholderFg: new CustomProp('theme-input-placeholder-fg', undefined, '#757575'),\n  inputBorder: new CustomProp('theme-input-border', undefined, colors.darkGrey),\n  inputValid: new CustomProp('theme-input-valid', undefined, colors.lightGreen),\n  inputInvalid: new CustomProp('theme-input-invalid', undefined, colors.error),\n  inputFocus: new CustomProp('theme-input-focus', undefined, '#5E9ED6'),\n  inputReadonlyBg: new CustomProp('theme-input-readonly-bg', undefined, colors.lightGrey),\n  inputReadonlyBorder: new CustomProp('theme-input-readonly-border', undefined, colors.mediumGreyOpaque),\n\n  /* Choice Entry */\n  choiceEntryBg: new CustomProp('theme-choice-entry-bg', undefined, 'white'),\n  choiceEntryBorder: new CustomProp('theme-choice-entry-border', undefined, colors.darkGrey),\n  choiceEntryBorderHover: new CustomProp('theme-choice-entry-border-hover', undefined,\n    colors.hover),\n\n  /* Select Buttons */\n  selectButtonFg: new CustomProp('theme-select-button-fg', undefined, colors.dark),\n  selectButtonPlaceholderFg: new CustomProp('theme-select-button-placeholder-fg', undefined,\n    colors.slate),\n  selectButtonDisabledFg: new CustomProp('theme-select-button-disabled-fg', undefined, 'grey'),\n  selectButtonBg: new CustomProp('theme-select-button-bg', undefined, 'white'),\n  selectButtonBorder: new CustomProp('theme-select-button-border', undefined, colors.darkGrey),\n  selectButtonBorderInvalid: new CustomProp('theme-select-button-border-invalid', undefined,\n    colors.error),\n\n  /* Menus */\n  menuText: new CustomProp('theme-menu-text', undefined, colors.slate),\n  menuLightText: new CustomProp('theme-menu-light-text', undefined, colors.slate),\n  menuBg: new CustomProp('theme-menu-bg', undefined, 'white'),\n  menuSubheaderFg: new CustomProp('theme-menu-subheader-fg', undefined, 'unset'),\n  menuBorder: new CustomProp('theme-menu-border', undefined, colors.mediumGreyOpaque),\n  menuShadow: new CustomProp('theme-menu-shadow', undefined, 'rgba(38, 38, 51, 0.6)'),\n\n  /* Menu Items */\n  menuItemFg: new CustomProp('theme-menu-item-fg', undefined, 'black'),\n  menuItemSelectedFg: new CustomProp('theme-menu-item-selected-fg', undefined, colors.light),\n  menuItemSelectedBg: new CustomProp('theme-menu-item-selected-bg', undefined, vars.primaryBg),\n  menuItemDisabledFg: new CustomProp('theme-menu-item-disabled-fg', undefined, '#D9D9D9'),\n  menuItemIconFg: new CustomProp('theme-menu-item-icon-fg', undefined, colors.slate),\n  menuItemIconSelectedFg: new CustomProp('theme-menu-item-icon-selected-fg', undefined, 'white'),\n  menuItemLinkFg: new CustomProp('theme-menu-item-link-fg', undefined, colors.lightGreen),\n  menuItemLinkSelectedFg: new CustomProp('theme-menu-item-link-selected-fg', undefined,\n    colors.darkGreen),\n  menuItemLinkselectedBg: new CustomProp('theme-menu-item-link-selected-bg', undefined,\n    colors.mediumGreyOpaque),\n\n  /* Autocomplete */\n  autocompleteMatchText: new CustomProp('theme-autocomplete-match-text', undefined,\n    colors.lightGreen),\n  autocompleteSelectedMatchText: new CustomProp('theme-autocomplete-selected-match-text',\n    undefined, colors.lighterGreen),\n  autocompleteChoiceSelectedBg: new CustomProp('theme-autocomplete-item-selected-bg', undefined,\n    colors.mediumGreyOpaque),\n\n  /* Search */\n  searchBorder: new CustomProp('theme-search-border', undefined, 'grey'),\n  searchPrevNextButtonFg: new CustomProp('theme-search-prev-next-button-fg', undefined,\n    colors.slate),\n  searchPrevNextButtonBg: new CustomProp('theme-search-prev-next-button-bg', undefined,\n    colors.mediumGrey),\n\n  /* Loaders */\n  loaderFg: new CustomProp('theme-loader-fg', undefined, colors.lightGreen),\n  loaderBg: new CustomProp('theme-loader-bg', undefined, colors.darkGrey),\n\n  /* Site Switcher */\n  siteSwitcherActiveFg: new CustomProp('theme-site-switcher-active-fg', undefined, colors.light),\n  siteSwitcherActiveBg: new CustomProp('theme-site-switcher-active-bg', undefined, colors.dark),\n\n  /* Doc Menu */\n  docMenuDocOptionsFg: new CustomProp('theme-doc-menu-doc-options-fg', undefined, colors.darkGrey),\n  docMenuDocOptionsHoverFg: new CustomProp('theme-doc-menu-doc-options-hover-fg', undefined,\n    colors.slate),\n  docMenuDocOptionsHoverBg: new CustomProp('theme-doc-menu-doc-options-hover-bg', undefined,\n    colors.darkGrey),\n\n  /* Shortcut Keys */\n  shortcutKeyFg: new CustomProp('theme-shortcut-key-fg', undefined, 'black'),\n  shortcutKeyPrimaryFg: new CustomProp('theme-shortcut-key-primary-fg', undefined,\n    colors.darkGreen),\n  shortcutKeySecondaryFg: new CustomProp('theme-shortcut-key-secondary-fg', undefined,\n    colors.slate),\n  shortcutKeyBg: new CustomProp('theme-shortcut-key-bg', undefined, 'white'),\n  shortcutKeyBorder: new CustomProp('theme-shortcut-key-border', undefined, colors.slate),\n\n  /* Breadcrumbs */\n  breadcrumbsTagFg: new CustomProp('theme-breadcrumbs-tag-fg', undefined, 'white'),\n  breadcrumbsTagBg: new CustomProp('theme-breadcrumbs-tag-bg', undefined, colors.slate),\n  breadcrumbsTagAlertBg: new CustomProp('theme-breadcrumbs-tag-alert-fg', undefined, colors.error),\n\n  /* Page Widget Picker */\n  widgetPickerPrimaryBg: new CustomProp('theme-widget-picker-primary-bg', undefined, 'white'),\n  widgetPickerSecondaryBg: new CustomProp('theme-widget-picker-secondary-bg', undefined,\n    colors.lightGrey),\n  widgetPickerItemFg: new CustomProp('theme-widget-picker-item-fg', undefined, 'unset'),\n  widgetPickerItemSelectedBg: new CustomProp('theme-widget-picker-item-selected-bg', undefined,\n    colors.mediumGrey),\n  widgetPickerItemDisabledBg: new CustomProp('theme-widget-picker-item-disabled-bg', undefined,\n    colors.mediumGrey),\n  widgetPickerIcon: new CustomProp('theme-widget-picker-icon', undefined, colors.slate),\n  widgetPickerPrimaryIcon: new CustomProp('theme-widget-picker-primary-icon', undefined,\n    colors.lightGreen),\n  widgetPickerSummaryIcon: new CustomProp('theme-widget-picker-summary-icon', undefined,\n    colors.darkGreen),\n  widgetPickerBorder: new CustomProp('theme-widget-picker-border', undefined, colors.mediumGrey),\n  widgetPickerShadow: new CustomProp('theme-widget-picker-shadow', undefined,\n    'rgba(38,38,51,0.20)'),\n\n  /* Code View */\n  codeViewText: new CustomProp('theme-code-view-text', undefined, '#444'),\n  codeViewKeyword: new CustomProp('theme-code-view-keyword', undefined, '#444'),\n  codeViewComment: new CustomProp('theme-code-view-comment', undefined, '#888888'),\n  codeViewMeta: new CustomProp('theme-code-view-meta', undefined, '#1F7199'),\n  codeViewTitle: new CustomProp('theme-code-view-title', undefined, '#880000'),\n  codeViewParams: new CustomProp('theme-code-view-params', undefined, '#444'),\n  codeViewString: new CustomProp('theme-code-view-string', undefined, '#880000'),\n  codeViewNumber: new CustomProp('theme-code-view-number', undefined, '#880000'),\n  codeViewBuiltin: new CustomProp('theme-code-view-builtin', undefined, '#397300'),\n  codeViewLiteral: new CustomProp('theme-code-view-literal', undefined, '#78A960'),\n\n  /* Importer */\n  importerTableInfoBorder: new CustomProp('theme-importer-table-info-border', undefined, colors.darkGrey),\n  importerPreviewBorder: new CustomProp('theme-importer-preview-border', undefined,\n    colors.darkGrey),\n  importerSkippedTableOverlay: new CustomProp('theme-importer-skipped-table-overlay', undefined,\n    colors.mediumGrey),\n  importerMatchIcon: new CustomProp('theme-importer-match-icon', undefined, colors.darkGrey),\n  importerOutsideBg: new CustomProp('theme-importer-outside-bg', undefined, colors.lightGrey),\n  importerMainContentBg: new CustomProp('theme-importer-main-content-bg', undefined, '#FFFFFF'),\n\n  // tabs\n  importerActiveFileBg: new CustomProp('theme-importer-active-file-bg', undefined, colors.lightGreen),\n  importerActiveFileFg: new CustomProp('theme-importer-active-file-fg', undefined, colors.light),\n  importerInactiveFileBg: new CustomProp('theme-importer-inactive-file-bg', undefined, colors.mediumGrey),\n  importerInactiveFileFg: new CustomProp('theme-importer-inactive-file-fg', undefined, colors.light),\n\n  /* Menu Toggles */\n  menuToggleFg: new CustomProp('theme-menu-toggle-fg', undefined, colors.slate),\n  menuToggleHoverFg: new CustomProp('theme-menu-toggle-hover-fg', undefined, colors.darkGreen),\n  menuToggleActiveFg: new CustomProp('theme-menu-toggle-active-fg', undefined, colors.darkerGreen),\n  menuToggleBg: new CustomProp('theme-menu-toggle-bg', undefined, 'white'),\n  menuToggleBorder: new CustomProp('theme-menu-toggle-border', undefined, colors.slate),\n\n  /* Info Button */\n  infoButtonFg: new CustomProp('theme-info-button-fg', undefined, \"#8F8F8F\"),\n  infoButtonHoverFg: new CustomProp('theme-info-button-hover-fg', undefined, \"#707070\"),\n  infoButtonActiveFg: new CustomProp('theme-info-button-active-fg', undefined, \"#5C5C5C\"),\n\n  /* Button Groups */\n  buttonGroupFg: new CustomProp('theme-button-group-fg', undefined, colors.dark),\n  buttonGroupLightFg: new CustomProp('theme-button-group-light-fg', undefined, colors.slate),\n  buttonGroupBg: new CustomProp('theme-button-group-bg', undefined, 'unset'),\n  buttonGroupIcon: new CustomProp('theme-button-group-icon', undefined, colors.slate),\n  buttonGroupBorder: new CustomProp('theme-button-group-border', undefined, colors.darkGrey),\n  buttonGroupBorderHover: new CustomProp('theme-button-group-border-hover', undefined,\n    colors.hover),\n  buttonGroupSelectedFg: new CustomProp('theme-button-group-selected-fg', undefined, colors.light),\n  buttonGroupLightSelectedFg: new CustomProp('theme-button-group-light-selected-fg', undefined,\n    colors.lightGreen),\n  buttonGroupSelectedBg: new CustomProp('theme-button-group-selected-bg', undefined, colors.dark),\n  buttonGroupSelectedBorder: new CustomProp('theme-button-group-selected-border', undefined,\n    colors.dark),\n\n  /* Access Rules */\n  accessRulesTableHeaderFg: new CustomProp('theme-access-rules-table-header-fg', undefined,\n    colors.dark),\n  accessRulesTableHeaderBg: new CustomProp('theme-access-rules-table-header-bg', undefined,\n    colors.mediumGrey),\n  accessRulesTableBodyFg: new CustomProp('theme-access-rules-table-body-fg', undefined,\n    colors.dark),\n  accessRulesTableBorder: new CustomProp('theme-access-rules-table-border', undefined,\n    colors.slate),\n  accessRulesColumnListBorder: new CustomProp('theme-access-rules-column-list-border', undefined,\n    colors.darkGrey),\n  accessRulesColumnItemFg: new CustomProp('theme-access-rules-column-item-fg', undefined,\n    colors.dark),\n  accessRulesColumnItemBg: new CustomProp('theme-access-rules-column-item-bg', undefined,\n    colors.mediumGreyOpaque),\n  accessRulesColumnItemIconFg: new CustomProp('theme-access-rules-column-item-icon-fg', undefined,\n    colors.slate),\n  accessRulesColumnItemIconHoverFg: new CustomProp('theme-access-rules-column-item-icon-hover-fg',\n    undefined, colors.light),\n  accessRulesColumnItemIconHoverBg: new CustomProp('theme-access-rules-column-item-icon-hover-bg',\n    undefined, colors.slate),\n  accessRulesFormulaEditorBg: new CustomProp('theme-access-rules-formula-editor-bg', undefined,\n    'white'),\n  accessRulesFormulaEditorBorderHover: new CustomProp(\n    'theme-access-rules-formula-editor-border-hover', undefined, colors.darkGrey),\n  accessRulesFormulaEditorBgDisabled: new CustomProp(\n    'theme-access-rules-formula-editor-bg-disabled', undefined, colors.mediumGreyOpaque),\n  accessRulesFormulaEditorFocus: new CustomProp('theme-access-rules-formula-editor-focus',\n    undefined, colors.cursor),\n\n  /* Cells */\n  cellFg: new CustomProp('theme-cell-fg', undefined, 'unset'),\n  cellBg: new CustomProp('theme-cell-bg', undefined, '#FFFFFF00'),\n  cellZebraBg: new CustomProp('theme-cell-zebra-bg', undefined, '#F8F8F8'),\n\n  /* Charts */\n  chartFg: new CustomProp('theme-chart-fg', undefined, '#444'),\n  chartBg: new CustomProp('theme-chart-bg', undefined, '#fff'),\n  chartLegendBg: new CustomProp('theme-chart-legend-bg', undefined, '#FFFFFF80'),\n  chartXAxis: new CustomProp('theme-chart-x-axis', undefined, '#444'),\n  chartYAxis: new CustomProp('theme-chart-y-axis', undefined, '#444'),\n\n  /* Comments */\n  commentsPopupHeaderBg: new CustomProp('theme-comments-popup-header-bg', undefined,\n    colors.lightGrey),\n  commentsPopupBodyBg: new CustomProp('theme-comments-popup-body-bg', undefined, 'white'),\n  commentsPopupBorder: new CustomProp('theme-comments-popup-border', undefined, colors.darkGrey),\n  commentsUserNameFg: new CustomProp('theme-comments-user-name-fg', undefined, colors.darkText),\n  commentsPanelTopicBg: new CustomProp('theme-comments-panel-topic-bg', undefined, 'white'),\n  commentsPanelTopicBorder: new CustomProp('theme-comments-panel-topic-border', undefined, '#ccc'),\n  commentsPanelResolvedTopicBg: new CustomProp('theme-comments-panel-resolved-topic-bg', undefined,\n    vars.labelActiveBg),\n\n  /* Date Picker */\n  datePickerSelectedFg: new CustomProp('theme-date-picker-selected-fg', undefined,\n    colors.light),\n  datePickerSelectedBg: new CustomProp('theme-date-picker-selected-bg', undefined,\n    '#286090'),\n  datePickerSelectedBgHover: new CustomProp('theme-date-picker-selected-bg-hover',\n    undefined, '#204d74'),\n  datePickerTodayFg: new CustomProp('theme-date-picker-today-fg', undefined,\n    colors.light),\n  datePickerTodayBg: new CustomProp('theme-date-picker-today-bg', undefined,\n    colors.lightGreen),\n  datePickerTodayBgHover: new CustomProp('theme-date-picker-today-bg-hover', undefined,\n    colors.darkGreen),\n  datePickerRangeStartEndBg: new CustomProp('theme-date-picker-range-start-end-bg', undefined,\n    '#777'),\n  datePickerRangeStartEndBgHover: new CustomProp('theme-date-picker-range-start-end-bg-hover',\n    undefined, '#5E5E5E'),\n  datePickerRangeBg: new CustomProp('theme-date-picker-range-bg', undefined,\n    colors.mediumGreyOpaque),\n  datePickerRangeBgHover: new CustomProp('theme-date-picker-range-bg-hover', undefined,\n    colors.darkGrey),\n\n  /* Tutorials */\n  tutorialsPopupBorder: new CustomProp('theme-tutorials-popup-border', undefined,\n    colors.darkGrey),\n  tutorialsPopupHeaderFg: new CustomProp('theme-tutorials-popup-header-fg', undefined,\n    colors.lightGreen),\n  tutorialsPopupBoxBg: new CustomProp('theme-tutorials-popup-box-bg', undefined, '#F5F5F5'),\n\n  /* Ace */\n  aceEditorBg: new CustomProp('theme-ace-editor-bg', undefined, 'white'),\n  aceAutocompletePrimaryFg: new CustomProp('theme-ace-autocomplete-primary-fg', undefined, '#444'),\n  aceAutocompleteSecondaryFg: new CustomProp('theme-ace-autocomplete-secondary-fg', undefined,\n    '#8f8f8f'),\n  aceAutocompleteHighlightedFg: new CustomProp('theme-ace-autocomplete-highlighted-fg', undefined, '#000'),\n  aceAutocompleteBg: new CustomProp('theme-ace-autocomplete-bg', undefined, '#FBFBFB'),\n  aceAutocompleteBorder: new CustomProp('theme-ace-autocomplete-border', undefined, 'lightgray'),\n  aceAutocompleteLink: new CustomProp('theme-ace-autocomplete-link', undefined, colors.lightGreen),\n  aceAutocompleteLinkHighlighted: new CustomProp('theme-ace-autocomplete-link-highlighted',\n    undefined, colors.darkGreen),\n  aceAutocompleteActiveLineBg: new CustomProp('theme-ace-autocomplete-active-line-bg',\n    undefined, '#CAD6FA'),\n  aceAutocompleteLineBorderHover: new CustomProp('theme-ace-autocomplete-line-border-hover',\n    undefined, '#abbffe'),\n  aceAutocompleteLineBgHover: new CustomProp('theme-ace-autocomplete-line-bg-hover',\n    undefined, 'rgba(233,233,253,0.4)'),\n\n  /* Color Select */\n  colorSelectFg: new CustomProp('theme-color-select-fg', undefined, colors.dark),\n  colorSelectBg: new CustomProp('theme-color-select-bg', undefined, 'white'),\n  colorSelectShadow: new CustomProp('theme-color-select-shadow', undefined,\n    'rgba(38,38,51,0.6)'),\n  colorSelectFontOptionsBorder: new CustomProp('theme-color-select-font-options-border',\n    undefined, colors.darkGrey),\n  colorSelectFontOptionFg: new CustomProp('theme-color-select-font-option-fg',\n    undefined, colors.dark),\n  colorSelectFontOptionBg: new CustomProp('theme-color-select-font-option-bg',\n    undefined, colors.light),\n  colorSelectFontOptionBgHover: new CustomProp('theme-color-select-font-option-bg-hover',\n    undefined, colors.lightGrey),\n  colorSelectFontOptionFgSelected: new CustomProp('theme-color-select-font-option-selected-fg',\n    undefined, colors.light),\n  colorSelectFontOptionBgSelected: new CustomProp('theme-color-select-font-option-selected-bg',\n    undefined, colors.dark),\n  colorSelectColorSquareBorder: new CustomProp('theme-color-select-color-square-border',\n    undefined, '#D9D9D9'),\n  colorSelectColorSquareBorderEmpty: new CustomProp('theme-color-select-color-square-border-empty',\n    undefined, colors.dark),\n  colorSelectInputFg: new CustomProp('theme-color-select-input-fg',\n    undefined, colors.slate),\n  colorSelectInputBg: new CustomProp('theme-color-select-input-bg',\n    undefined, 'white'),\n  colorSelectInputBorder: new CustomProp('theme-color-select-input-border',\n    undefined, colors.darkGrey),\n\n  /* Highlighted Code */\n  highlightedCodeBlockBg: new CustomProp('theme-highlighted-code-block-bg', undefined,\n    colors.light),\n  highlightedCodeBlockBgDisabled: new CustomProp('theme-highlighted-code-block-bg-disabled',\n    undefined, colors.mediumGreyOpaque),\n  highlightedCodeFg: new CustomProp('theme-highlighted-code-fg',\n    undefined, colors.slate),\n  highlightedCodeBorder: new CustomProp('theme-highlighted-code-border',\n    undefined, colors.darkGrey),\n  highlightedCodeBgDisabled: new CustomProp('theme-highlighted-code-bg-disabled',\n    undefined, colors.mediumGreyOpaque),\n\n  /* Login Page */\n  loginPageBg: new CustomProp('theme-login-page-bg', undefined, 'white'),\n  loginPageBackdrop: new CustomProp('theme-login-page-backdrop', undefined, '#F5F8FA'),\n  loginPageLine: new CustomProp('theme-login-page-line', undefined, colors.lightGrey),\n\n  /* Formula Assistant */\n  formulaAssistantHeaderBg: new CustomProp(\n    'theme-formula-assistant-header-bg', undefined, colors.lightGrey),\n  formulaAssistantBorder: new CustomProp(\n    'theme-formula-assistant-border', undefined, colors.darkGrey),\n  formulaAssistantPreformattedTextBg: new CustomProp(\n    'theme-formula-assistant-preformatted-text-bg', undefined, colors.lightGrey),\n};\n\nconst cssColors = values(colors).map(v => v.decl()).join('\\n');\nconst cssVars = values(vars).map(v => v.decl()).join('\\n');\nconst cssFontParams = `\n  font-family: ${vars.fontFamily};\n  font-size: ${vars.mediumFontSize};\n  -moz-osx-font-smoothing: grayscale;\n  -webkit-font-smoothing: antialiased;\n`;\n\n// We set box-sizing globally to match bootstrap's setting of border-box, since we are integrating\n// into an app which already has it set, and it's impossible to make things look consistently with\n// AND without it. This duplicates bootstrap's setting.\nconst cssBorderBox = `\n  *, *:before, *:after {\n  -webkit-box-sizing: border-box;\n     -moz-box-sizing: border-box;\n          box-sizing: border-box;\n  }\n`;\n\n// These styles duplicate bootstrap's global settings, which we rely on even on pages that don't\n// have bootstrap.\nconst cssInputFonts = `\n  button, input, select, textarea {\n    font-family: inherit;\n    font-size: inherit;\n    line-height: inherit;\n  }\n`;\n\n// Font style classes used by style selector.\nconst cssFontStyles = `\n  .font-italic {\n    font-style: italic;\n  }\n  .font-bold {\n    font-weight: 800;\n  }\n  .font-underline {\n    text-decoration: underline;\n  }\n  .font-strikethrough {\n    text-decoration: line-through;\n  }\n  .font-strikethrough.font-underline {\n    text-decoration: line-through underline;\n  }\n`;\n\nconst cssVarsOnly = styled('div', cssColors + cssVars);\nconst cssBodyVars = styled('div', cssFontParams + cssColors + cssVars + cssBorderBox + cssInputFonts + cssFontStyles);\n\nconst cssBody = styled('body', `\n  margin: 0;\n  height: 100%;\n`);\n\nconst cssRoot = styled('html', `\n  height: 100%;\n  overflow: hidden;\n`);\n\nexport const cssRootVars = cssBodyVars.className;\n\n// Also make a globally available testId, with a simple \"test-\" prefix (i.e. in tests, query css\n// class \".test-{name}\". Ideally, we'd use noTestId() instead in production.\nexport const testId: TestId = makeTestId('test-');\n\n// Min width for normal screen layout (in px). Note: <768px is bootstrap's definition of small\n// screen (covers phones, including landscape, but not tablets).\nconst largeScreenWidth = 992;\nconst mediumScreenWidth = 768;\nconst smallScreenWidth = 576;   // Anything below this is extra-small (e.g. portrait phones).\n\n// Fractional width for max-query follows https://getbootstrap.com/docs/4.0/layout/overview/#responsive-breakpoints\nexport const mediaMedium = `(max-width: ${largeScreenWidth - 0.02}px)`;\nexport const mediaSmall = `(max-width: ${mediumScreenWidth - 0.02}px)`;\nexport const mediaNotSmall = `(min-width: ${mediumScreenWidth}px)`;\nexport const mediaXSmall = `(max-width: ${smallScreenWidth - 0.02}px)`;\n\nexport const mediaDeviceNotSmall = `(min-device-width: ${mediumScreenWidth}px)`;\n\nexport function isNarrowScreen() {\n  return window.innerWidth < mediumScreenWidth;\n}\n\nlet _isNarrowScreenObs: Observable<boolean>|undefined;\n\n// Returns a singleton observable for whether the screen is a small one.\nexport function isNarrowScreenObs(): Observable<boolean> {\n  if (!_isNarrowScreenObs) {\n    const obs = Observable.create<boolean>(null, isNarrowScreen());\n    window.addEventListener('resize', () => obs.set(isNarrowScreen()));\n    _isNarrowScreenObs = obs;\n  }\n  return _isNarrowScreenObs;\n}\n\nexport const cssHideForNarrowScreen = styled('div', `\n  @media ${mediaSmall} {\n    & {\n      display: none !important;\n    }\n  }\n`);\n\nlet _isScreenResizingObs: Observable<boolean>|undefined;\n\n// Returns a singleton observable for whether user is currently resizing the window. (listen to\n// `resize` events and uses a timer of 1000ms).\nexport function isScreenResizing(): Observable<boolean> {\n  if (!_isScreenResizingObs) {\n    const obs = Observable.create<boolean>(null, false);\n    const ping = debounce(() => obs.set(false), 1000);\n    window.addEventListener('resize', () => { obs.set(true); ping(); });\n    _isScreenResizingObs = obs;\n  }\n  return _isScreenResizingObs;\n}\n\nexport function prefersDarkMode(): boolean {\n  return window.matchMedia('(prefers-color-scheme: dark)').matches;\n}\n\nlet _prefersDarkModeObs: PausableObservable<boolean>|undefined;\n\n/**\n * Returns a singleton observable for whether the user agent prefers dark mode.\n */\nexport function prefersDarkModeObs(): PausableObservable<boolean> {\n  if (!_prefersDarkModeObs) {\n    const query = window.matchMedia('(prefers-color-scheme: dark)');\n    const obs = createPausableObs<boolean>(null, query.matches);\n    query.addEventListener('change', event => obs.set(event.matches));\n    _prefersDarkModeObs = obs;\n  }\n  return _prefersDarkModeObs;\n}\n\n/**\n * Attaches the global css properties to the document's root to make them available in the page.\n */\nexport function attachCssRootVars(productFlavor: ProductFlavor, varsOnly: boolean = false) {\n  dom.update(document.documentElement, varsOnly ? dom.cls(cssVarsOnly.className) : dom.cls(cssRootVars));\n  document.documentElement.classList.add(cssRoot.className);\n  document.body.classList.add(cssBody.className);\n  const customTheme = getTheme(productFlavor);\n  if (customTheme.bodyClassName) {\n    document.body.classList.add(customTheme.bodyClassName);\n  }\n  const interfaceStyle = urlState().state.get().params?.style || 'full';\n  document.body.classList.add(`interface-${interfaceStyle}`);\n}\n\n/**\n * Attaches theme-related css properties to the theme style element.\n */\nexport function attachCssThemeVars({appearance, colors: themeColors}: Theme) {\n  // Prepare the custom properties needed for applying the theme.\n  const properties = Object.entries(themeColors)\n    .map(([name, value]) => `--grist-theme-${name}: ${value};`);\n\n  // Include properties for styling the scrollbar.\n  properties.push(...getCssScrollbarProperties(appearance));\n\n  // Include properties for picking an appropriate background image.\n  properties.push(...getCssThemeBackgroundProperties(appearance));\n\n  // Apply the properties to the theme style element.\n  getOrCreateStyleElement('grist-theme').textContent = `:root {\n${properties.join('\\n')}\n  }`;\n\n  // Make the browser aware of the color scheme.\n  document.documentElement.style.setProperty(`color-scheme`, appearance);\n\n  // Cache the appearance in local storage; this is currently used to apply a suitable\n  // background image that's shown while the application is loading.\n  getStorage().setItem('appearance', appearance);\n}\n\n/**\n * Gets scrollbar-related css properties that are appropriate for the given `appearance`.\n *\n * Note: Browser support for customizing scrollbars is still a mixed bag; the bulk of customization\n * is non-standard and unsupported by Firefox. If support matures, we could expose some of these in\n * custom themes, but for now we'll just go with reasonable presets.\n */\nfunction getCssScrollbarProperties(appearance: ThemeAppearance) {\n  return [\n    '--scroll-bar-fg: ' +\n      (appearance === 'dark' ? '#6B6B6B;' : '#A8A8A8;'),\n    '--scroll-bar-hover-fg: ' +\n      (appearance === 'dark' ? '#7B7B7B;' : '#8F8F8F;'),\n    '--scroll-bar-active-fg: ' +\n      (appearance === 'dark' ? '#8B8B8B;' : '#7C7C7C;'),\n    '--scroll-bar-bg: ' +\n      (appearance === 'dark' ? '#2B2B2B;' : '#F0F0F0;'),\n  ];\n}\n\n/**\n * Gets background-related css properties that are appropriate for the given `appearance`.\n *\n * Currently, this sets a property for showing a background image that's visible while a page\n * is loading.\n */\nfunction getCssThemeBackgroundProperties(appearance: ThemeAppearance) {\n  const value = appearance === 'dark'\n    ? 'url(\"img/prismpattern.png\")'\n    : 'url(\"img/gplaypattern.png\")';\n  return [`--grist-theme-bg: ${value};`];\n}\n\n/**\n * Gets or creates a style element in the head of the document with the given `id`.\n *\n * Useful for grouping CSS values such as theme custom properties without needing to\n * pollute the document with in-line styles.\n */\nfunction getOrCreateStyleElement(id: string) {\n  let style = document.head.querySelector(id);\n  if (style) { return style; }\n  style = document.createElement('style');\n  style.setAttribute('id', id);\n  document.head.append(style);\n  return style;\n}\n\n// A dom method to hide element in print view\nexport function hideInPrintView(): DomElementMethod {\n  return cssHideInPrint.cls('');\n}\n\nconst cssHideInPrint = styled('div', `\n  @media print {\n    & {\n      display: none !important;\n    }\n  }\n`);\n","/**\n * UI 2018 Buttons\n *\n * Four styles are include: basicButton, primaryButton, bigBasicButton, bigPrimaryButton.\n *\n * Buttons support passing in DomElementArgs, which can be used to register click handlers, set\n * the disabled property, and other HTML <button> element behaviors.\n *\n * Examples:\n *\n * `basicButton('Basic button', dom.on('click', () => alert('Basic button')))`\n * `primaryButton('Primary button', dom.prop('disabled', true))`\n */\n\nimport { theme, vars } from 'app/client/ui2018/cssVars';\nimport { tbind } from 'app/common/tbind';\nimport { dom, DomElementArg, styled } from 'grainjs';\n\nexport const cssButton = styled('button', `\n  /* Resets */\n  position: relative;\n  outline: none;\n  border-style: none;\n  line-height: normal;\n  user-select: none;\n\n  /* Vars */\n  font-size:     ${vars.mediumFontSize};\n  letter-spacing: -0.08px;\n  padding: 4px 8px;\n\n  background-color: transparent;\n  color:            ${theme.controlFg};\n  --icon-color:     ${theme.controlFg};\n\n  border:        ${theme.controlBorder};\n  border-radius: ${vars.controlBorderRadius};\n\n  cursor: pointer;\n\n  &-large {\n    font-weight: 500;\n    padding: 10px 24px;\n    min-height: 40px;\n  }\n\n  &-primary {\n    background-color: ${theme.controlPrimaryBg};\n    color:            ${theme.controlPrimaryFg};\n    --icon-color:     ${theme.controlPrimaryFg};\n    border-color:     ${theme.controlPrimaryBg};\n  }\n\n  &:hover {\n    color:        ${theme.controlHoverFg};\n    --icon-color: ${theme.controlHoverFg};\n    border-color: ${theme.controlHoverFg};\n  }\n  &-primary:hover {\n    color:            ${theme.controlPrimaryFg};\n    --icon-color:     ${theme.controlPrimaryFg};\n    background-color: ${theme.controlPrimaryHoverBg};\n    border-color: ${theme.controlPrimaryHoverBg};\n  }\n  &:disabled {\n    cursor: not-allowed;\n    color:        ${theme.controlDisabledFg};\n    --icon-color: ${theme.controlDisabledFg};\n    background-color: ${theme.controlDisabledBg};\n    border-color: ${theme.controlDisabledBg};\n  }\n\n`);\n\ninterface IButtonProps {\n  large?: boolean;\n  primary?: boolean;\n  link?: boolean;\n}\n\n/**\n * Helper to create a button or button-like link with requested properties.\n */\nfunction button(props: IButtonProps, ...domArgs: DomElementArg[]) {\n  const elem = props.link ? cssButtonLink(dom.cls(cssButton.className)) : cssButton();\n  return dom.update(elem,\n    cssButton.cls('-large', Boolean(props.large)),\n    cssButton.cls('-primary', Boolean(props.primary)),\n    ...domArgs\n  );\n}\n\n// Button-creating functions, each taking ...DomElementArg arguments.\nexport const basicButton = tbind(button, null, {});\nexport const bigBasicButton = tbind(button, null, {large: true});\nexport const primaryButton = tbind(button, null, {primary: true});\nexport const bigPrimaryButton = tbind(button, null, {large: true, primary: true});\n\n// Functions that create button-like <a> links, each taking ...DomElementArg arguments.\nexport const basicButtonLink = tbind(button, null, {link: true});\nexport const bigBasicButtonLink = tbind(button, null, {link: true, large: true});\nexport const primaryButtonLink = tbind(button, null, {link: true, primary: true});\nexport const bigPrimaryButtonLink = tbind(button, null, {link: true, large: true, primary: true});\n\n// Button that looks like a link (have no background and no border).\nexport const textButton = styled(cssButton, `\n  border: none;\n  padding: 0px;\n  text-align: left;\n  background-color: inherit !important;\n  &:disabled {\n    color: ${theme.controlPrimaryDisabled};\n  }\n`);\n\nconst cssButtonLink = styled('a', `\n  display: inline-block;\n  &, &:hover, &:focus {\n    text-decoration: none;\n  }\n`);\n\nexport const cssButtonGroup = styled('div', `\n  display: flex;\n  flex-direction: row;\n\n  & > .${cssButton.className} {\n    border-radius: 0;\n  }\n\n  & > .${cssButton.className}:first-child {\n    border-top-left-radius: ${vars.controlBorderRadius};\n    border-bottom-left-radius: ${vars.controlBorderRadius};\n  }\n\n  & > .${cssButton.className}:last-child {\n    border-top-right-radius: ${vars.controlBorderRadius};\n    border-bottom-right-radius: ${vars.controlBorderRadius};\n  }\n`);\n","/**\n * UI 2018 Checkboxes\n *\n * Includes:\n *  - squareCheckbox\n *  - circleCheckbox\n *  - labeledSquareCheckbox\n *  - labeledCircleCheckbox\n *\n * Checkboxes support passing in DomElementArgs, which can be used to register click handlers, set\n * the disabled property, and other HTML <input> element behaviors.\n *\n * Examples:\n *  squareCheckbox(observable(true)),\n *  labeledSquareCheckbox(observable(false), 'Include other values', dom.prop('disabled', true)),\n */\n\nimport {testId, theme} from 'app/client/ui2018/cssVars';\nimport {Computed, dom, DomArg, DomContents, Observable, styled} from 'grainjs';\n\nexport const cssLabel = styled('label', `\n  position: relative;\n  display: inline-flex;\n  min-width: 0px;\n  margin-bottom: 0px;\n\n  outline: none;\n  user-select: none;\n\n  --color: ${theme.checkboxBorder};\n  &:hover {\n    --color: ${theme.checkboxBorderHover};\n  }\n`);\n\n\n\n// TODO: the !important markings are to trump bootstrap, and should be removed when it's gone.\nexport const cssCheckboxSquare = styled('input', `\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  margin: 0 !important;\n  padding: 0;\n\n  flex-shrink: 0;\n\n  display: inline-block;\n  width: 16px;\n  height: 16px;\n  outline: none !important;\n\n  --radius: 3px;\n\n  &:checked:enabled, &:indeterminate:enabled {\n    --color: ${theme.controlPrimaryBg};\n  }\n\n  &:disabled {\n    --color: ${theme.checkboxDisabledBg};\n    cursor: not-allowed;\n  }\n\n  &::before, &::after {\n    content: '';\n\n    position: absolute;\n    top: 0;\n    left: 0;\n\n    height: 16px;\n    width: 16px;\n\n    box-sizing: border-box;\n    border: 1px solid var(--color);\n    border-radius: var(--radius);\n  }\n\n  &:checked::before, &:disabled::before, &:indeterminate::before {\n    background-color: var(--color);\n  }\n\n  &:not(:checked):indeterminate::after {\n    -webkit-mask-image: var(--icon-Minus);\n  }\n\n  &:not(:disabled)::after {\n    background-color: ${theme.checkboxBg};\n  }\n\n  &:checked::after, &:indeterminate::after {\n    content: '';\n    position: absolute;\n    height: 16px;\n    width: 16px;\n    -webkit-mask-image: var(--icon-Tick);\n    -webkit-mask-size: contain;\n    -webkit-mask-position: center;\n    -webkit-mask-repeat: no-repeat;\n    background-color: ${theme.controlPrimaryFg};\n  }\n`);\n\nexport const cssCheckboxCircle = styled(cssCheckboxSquare, `\n  --radius: 100%;\n`);\n\nexport const cssLabelText = styled('span', `\n  margin-left: 8px;\n  color: ${theme.text};\n  font-weight: initial;   /* negate bootstrap */\n  overflow: hidden;\n  text-overflow: ellipsis;\n`);\n\ntype CheckboxArg = DomArg<HTMLInputElement>;\n\nfunction checkbox(\n  obs: Observable<boolean>, cssCheckbox: typeof cssCheckboxSquare,\n  label: DomArg, right: boolean,  ...domArgs: CheckboxArg[]\n) {\n  const field = cssCheckbox(\n      { type: 'checkbox' },\n      dom.prop('checked', obs),\n      dom.on('change', (ev, el) => obs.set(el.checked)),\n      ...domArgs\n    );\n  const text = label ? cssLabelText(label) : null;\n  if (right) {\n    return cssReversedLabel([text, cssInlineRelative(field)]);\n  }\n  return cssLabel(field, text);\n}\n\nexport function squareCheckbox(obs: Observable<boolean>, ...domArgs: CheckboxArg[]) {\n  return checkbox(obs, cssCheckboxSquare, '', false, ...domArgs);\n}\n\nexport function circleCheckbox(obs: Observable<boolean>, ...domArgs: CheckboxArg[]) {\n  return checkbox(obs, cssCheckboxCircle, '', false, ...domArgs);\n}\n\nexport function labeledSquareCheckbox(obs: Observable<boolean>, label: DomArg, ...domArgs: CheckboxArg[]) {\n  return checkbox(obs, cssCheckboxSquare, label, false, ...domArgs);\n}\n\nexport function labeledLeftSquareCheckbox(obs: Observable<boolean>, label: DomArg, ...domArgs: CheckboxArg[]) {\n  return checkbox(obs, cssCheckboxSquare, label, true, ...domArgs);\n}\n\nexport function labeledCircleCheckbox(obs: Observable<boolean>, label: DomArg, ...domArgs: CheckboxArg[]) {\n  return checkbox(obs, cssCheckboxCircle, label, false, ...domArgs);\n}\n\nexport const Indeterminate = 'indeterminate';\nexport type TriState = boolean|'indeterminate';\n\nfunction triStateCheckbox(\n  obs: Observable<TriState>, cssCheckbox: typeof cssCheckboxSquare, label: string = '',  ...domArgs: CheckboxArg[]\n) {\n  const checkboxObs = Computed.create(null, obs, (_use, state) => state === true)\n    .onWrite((checked) => obs.set(checked));\n  return checkbox(\n    checkboxObs, cssCheckbox, label, false,\n    dom.prop('indeterminate', (use) => use(obs) === 'indeterminate'),\n    dom.autoDispose(checkboxObs),\n    ...domArgs\n  );\n}\n\nexport function triStateSquareCheckbox(obs: Observable<TriState>, ...domArgs: CheckboxArg[]) {\n  return triStateCheckbox(obs, cssCheckboxSquare, '', ...domArgs);\n}\n\nexport function labeledTriStateSquareCheckbox(obs: Observable<TriState>, label: string, ...domArgs: CheckboxArg[]) {\n  return triStateCheckbox(obs, cssCheckboxSquare, label, ...domArgs);\n}\n\nexport function radioCheckboxOption<T>(selectedObservable: Observable<T>, optionId: T, content: DomContents) {\n  const selected = Computed.create(null, use => use(selectedObservable) === optionId)\n    .onWrite(val => val ? selectedObservable.set(optionId) : void 0);\n  return dom.update(\n    labeledCircleCheckbox(selected, content, dom.autoDispose(selected)),\n    testId(`option-${optionId}`),\n    cssBlockCheckbox.cls(''),\n    cssBlockCheckbox.cls('-block', selected),\n  );\n}\n\nexport const cssRadioCheckboxOptions = styled('div', `\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n`);\n\n// We need to reset top and left of ::before element, as it is wrongly set\n// on the inline checkbox.\n// To simulate radio button behavior, we will block user input after option is selected, because\n// checkbox doesn't support two-way binding.\nconst cssBlockCheckbox = styled('div', `\n  display: flex;\n  padding: 10px 8px;\n  border: 1px solid ${theme.modalBorder};\n  border-radius: 3px;\n  cursor: pointer;\n  & input::before, & input::after  {\n    top: unset;\n    left: unset;\n  }\n  &:hover {\n    border-color: ${theme.accentBorder};\n  }\n  &-block {\n    pointer-events: none;\n  }\n  &-block a {\n    pointer-events: all;\n  }\n`);\n\nconst cssInlineRelative = styled('div', `\n  display: inline-block;\n  position: relative;\n  height: 16px;\n`);\n\nconst cssReversedLabel = styled(cssLabel, `\n  justify-content: space-between;\n  gap: 8px;\n  & .${cssLabelText.className} {\n    margin: 0px;\n  }\n`);\n","/**\n * Exports a single `icon` function which returns a DOM Element for the given icon name.\n * Names are of type `IconName` imported from `IconList.ts`, which is auto-generated during the\n * build process.\n *\n * In order to use the icons, you must first include the generated CSS file:\n *\n *   <link rel=\"stylesheet\" href=\"icons.css\">\n *\n * The CSS file encodes each icon as a `url()` with base64 DataURI of the icon SVG and saves it\n * as a CSS :root var of the form --icon-${name}. It also includes a class for each icon that\n * uses the variable to set the mask-image (vs background-image, allowing you to change colors\n * using background-color):\n *\n *   .icon.Search_icon { -webkit-mask-image: var(--icon-Search); }\n *\n * This approach is more performant than inlining SVGs or using <symbol> with <use>.\n *\n * Examples:\n *\n *   // Display icon with default color and size\n *   dom('div',\n *     icon('Search')\n *   );\n *\n *   // Display bigger icon in blue\n *   const bigBlueIcon = styled(icon, `\n *     background-color: blue;\n *     width: 32px;\n *     height: 32px;\n *   `);\n *   dom('div',\n *     bigBlueIcon('Search')\n *   )\n *\n *   // Use icon image directly in css to style a checkbox\n *   // Refer to https://developer.mozilla.org/en-US/docs/Learn/HTML/Forms/Advanced_styling_for_HTML_forms\n *   const checkbox = styled('input#checkbox', `\n *     -webkit-appearance: none;\n *     -moz-appearance: none;\n *      width: 1rem;\n *      height: 1rem;\n *      border: 1px solid blue;\n *\n *      &:checked::before {\n *        position: absolute;\n *        content: var(--icon-Select);\n *      }\n *   `);\n */\n\nimport { theme } from 'app/client/ui2018/cssVars';\nimport { dom, DomElementArg, styled } from 'grainjs';\nimport { IconName } from './IconList';\n\n/**\n * Defaults for all icons.\n */\nconst iconDiv = styled('div', `\n  position: relative;\n  display: inline-block;\n  vertical-align: middle;\n  -webkit-mask-repeat: no-repeat;\n  -webkit-mask-position: center;\n  -webkit-mask-size: contain;\n  width: 16px;\n  height: 16px;\n  background-color: var(--icon-color, var(--grist-theme-text, black));\n`);\n\nexport const cssIconBackground = styled(iconDiv, `\n  background-color: var(--icon-background, inherit);\n  -webkit-mask: none;\n  & .${iconDiv.className} {\n    transition: inherit;\n    display: block;\n  }\n`);\n\nexport function icon(name: IconName, ...domArgs: DomElementArg[]): HTMLElement {\n  return iconDiv(\n    dom.style('-webkit-mask-image', `var(--icon-${name})`),\n    ...domArgs\n  );\n}\n\n/**\n * Container box for an icon to serve as a button..\n */\nexport const cssIconButton = styled('div', `\n  flex: none;\n  height: 24px;\n  width: 24px;\n  padding: 4px;\n  border-radius: 3px;\n  line-height: 0px;\n  cursor: default;\n  --icon-color: ${theme.controlSecondaryFg};\n  &:hover, &.weasel-popup-open {\n    background-color: ${theme.controlSecondaryHoverBg};\n    --icon-color: ${theme.controlSecondaryFg};\n  }\n`);\n","import {theme, vars} from 'app/client/ui2018/cssVars';\nimport {styled} from 'grainjs';\n\nexport const cssInput = styled('input', `\n  color: ${theme.inputFg};\n  background-color: ${theme.inputBg};\n  height: 30px;\n  width: 100%;\n  font-size: ${vars.mediumFontSize};\n  border-radius: 3px;\n  padding: 5px;\n  border: 1px solid ${theme.inputBorder};\n  outline: none;\n\n  &::placeholder {\n    color: ${theme.inputPlaceholderFg};\n  }\n`);\n","import {theme} from 'app/client/ui2018/cssVars';\nimport {DomArg, keyframes, styled} from 'grainjs';\n\nconst rotate360 = keyframes(`\n  from { transform: rotate(45deg); }\n  75% { transform: rotate(405deg); }\n  to { transform: rotate(405deg); }\n`);\n\nconst flash = keyframes(`\n  0% {\n    background-color: ${theme.loaderFg};\n  }\n  50%, 100% {\n    background-color: ${theme.loaderBg};\n  }\n`);\n\n/**\n * Creates a 32x32 pixel loading spinner. Use by calling `loadingSpinner()`.\n */\nexport const loadingSpinner = styled('div', `\n  display: inline-block;\n  box-sizing: border-box;\n  width: 32px;\n  height: 32px;\n  border-radius: 32px;\n  border: 4px solid ${theme.loaderBg};\n  border-top-color: ${theme.loaderFg};\n  animation: ${rotate360} 1s ease-out infinite;\n`);\n\n/**\n * Creates a three-dots loading animation. Use by calling `loadingDots()`.\n */\nexport function loadingDots(...args: DomArg<HTMLDivElement>[]) {\n  return cssLoadingDotsContainer(\n    cssLoadingDot(cssLoadingDot.cls('-left')),\n    cssLoadingDot(cssLoadingDot.cls('-middle')),\n    cssLoadingDot(cssLoadingDot.cls('-right')),\n    ...args,\n  );\n}\n\nconst cssLoadingDotsContainer = styled('div', `\n  --dot-size: 10px;\n  display: inline-flex;\n  column-gap: calc(var(--dot-size) / 2);\n`);\n\nconst cssLoadingDot = styled('div', `\n  border-radius: 50%;\n  width: var(--dot-size);\n  height: var(--dot-size);\n  background-color: ${theme.loaderFg};\n  color: ${theme.loaderFg};\n  animation: ${flash} 1s alternate infinite;\n\n  &-left {\n    animation-delay: 0s;\n  }\n  &-middle {\n    animation-delay: 0.25s;\n  }\n  &-right {\n    animation-delay: 0.5s;\n  }\n`);\n","import {theme, vars} from 'app/client/ui2018/cssVars';\nimport {styled} from 'grainjs';\n\n// Import popweasel so that the styles we define here are included later in CSS, and take priority\n// over popweasel styles, when used together.\nimport 'popweasel';\n\n/**\n * Style for a select dropdown button.\n *\n * This incorporates styling from popweasel's select, so that it can be used to style buttons that\n * don't use it.\n */\nexport const cssSelectBtn = styled('div', `\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  height: 30px;\n  line-height: 16px;\n  background-color: ${theme.selectButtonBg};\n  color: ${theme.selectButtonFg};\n  --icon-color: ${theme.selectButtonFg};\n  font-size: ${vars.mediumFontSize};\n  padding: 5px;\n  border: 1px solid ${theme.selectButtonBorder};\n  border-radius: 3px;\n  cursor: pointer;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  user-select: none;\n  -moz-user-select: none;\n  outline: none;\n\n  &:focus {\n    outline: none;\n    box-shadow: 0px 0px 2px 2px #5E9ED6;\n  }\n\n  &.disabled, &-disabled {\n    --icon-color: ${theme.selectButtonDisabledFg};\n    color: ${theme.selectButtonDisabledFg};\n    cursor: pointer;\n  }\n`);\n","import { Command } from 'app/client/components/commands';\nimport { FocusLayer } from 'app/client/lib/FocusLayer';\nimport { makeT } from 'app/client/lib/localization';\nimport { NeedUpgradeError, reportError } from 'app/client/models/errors';\nimport { textButton } from 'app/client/ui2018/buttons';\nimport { cssCheckboxSquare, cssLabel, cssLabelText } from 'app/client/ui2018/checkbox';\nimport { testId, theme, vars } from 'app/client/ui2018/cssVars';\nimport { IconName } from 'app/client/ui2018/IconList';\nimport { icon } from 'app/client/ui2018/icons';\nimport { cssSelectBtn } from 'app/client/ui2018/select';\nimport { BindableValue, Computed, dom, DomElementArg, DomElementMethod, IDomArgs,\n         MaybeObsArray, MutableObsArray, Observable, styled } from 'grainjs';\nimport * as weasel from 'popweasel';\n\nconst t = makeT('menus');\n\nexport interface IOptionFull<T> {\n  value: T;\n  label: string;\n  disabled?: boolean;\n  icon?: IconName;\n}\n\nlet _lastOpenedController: weasel.IOpenController|null = null;\n\n// Close opened menu if any, otherwise do nothing.\n// WARN: current implementation does not handle submenus correctly. Does not seem a problem as of\n// today though, as there is no submenu in UI.\nexport function closeRegisteredMenu() {\n  if (_lastOpenedController) { _lastOpenedController.close(); }\n}\n\n// Register `ctl` to make sure it is closed when `closeMenu()` is called.\nexport function registerMenuOpen(ctl: weasel.IOpenController) {\n  _lastOpenedController = ctl;\n  ctl.onDispose(() => _lastOpenedController = null);\n}\n\n// For string options, we can use a string for label and value without wrapping into an object.\nexport type IOption<T> = (T & string) | IOptionFull<T>;\n\nexport function menu(createFunc: weasel.MenuCreateFunc, options?: weasel.IMenuOptions): DomElementMethod {\n  const wrappedCreateFunc = (ctl: weasel.IOpenController) => {\n    registerMenuOpen(ctl);\n    return createFunc(ctl);\n  };\n  return weasel.menu(wrappedCreateFunc, {...defaults, ...options});\n}\n\n// TODO Weasel doesn't allow other options for submenus, but probably should.\nexport type ISubMenuOptions = weasel.ISubMenuOptions & weasel.IPopupOptions;\n\nexport function menuItemSubmenu(\n  submenu: weasel.MenuCreateFunc,\n  options: ISubMenuOptions,\n  ...args: DomElementArg[]\n): Element {\n  return weasel.menuItemSubmenu(submenu, {...defaults, ...options}, ...args);\n}\n\nexport const cssMenuElem = styled('div', `\n  font-family: ${vars.fontFamily};\n  font-size: ${vars.mediumFontSize};\n  line-height: initial;\n  max-width: 400px;\n  padding: 8px 0px 16px 0px;\n  box-shadow: 0 2px 20px 0 ${theme.menuShadow};\n  min-width: 160px;\n  z-index: ${vars.menuZIndex};\n  --weaseljs-selected-background-color: ${theme.menuItemSelectedBg};\n  --weaseljs-menu-item-padding: 8px 24px;\n  background-color: ${theme.menuBg};\n\n  @media print {\n    & {\n      display: none;\n    }\n  }\n`);\n\nconst menuItemStyle = `\n  justify-content: flex-start;\n  align-items: center;\n  color: ${theme.menuItemFg};\n  --icon-color: ${theme.accentIcon};\n  .${weasel.cssMenuItem.className}-sel {\n    color: ${theme.menuItemSelectedFg};\n    --icon-color: ${theme.menuItemSelectedFg};\n  }\n  &.disabled {\n    cursor: default;\n    color: ${theme.menuItemDisabledFg};\n    --icon-color: ${theme.menuItemDisabledFg};\n  }\n`;\n\nexport const menuCssClass = cssMenuElem.className;\n\n// Add grist-floating-menu class to support existing browser tests\nconst defaults = { menuCssClass: menuCssClass + ' grist-floating-menu' };\n\nexport interface SelectOptions<T> extends weasel.ISelectUserOptions {\n  /** Additional DOM element args to pass to each select option. */\n  renderOptionArgs?: (option: IOptionFull<T | null>) => DomElementArg;\n}\n\n/**\n * Creates a select dropdown widget. The observable `obs` reflects the value of the selected\n * option, and `optionArray` is an array (regular or observable) of option values and labels.\n * These may be either strings, or {label, value, icon, disabled} objects. Icons are optional\n * and must be IconName strings from 'app/client/ui2018/IconList'.\n *\n * The type of value may be any type at all; it is opaque to this widget.\n *\n * If obs is set to an invalid or disabled value, then defLabel option is used to determine the\n * label that the select box will show, blank by default.\n *\n * Usage:\n *    const fruit = observable(\"apple\");\n *    select(fruit, [\"apple\", \"banana\", \"mango\"]);\n *\n *    const employee = observable(17);\n *    const allEmployees = Observable.create(owner, [\n *      {value: 12, label: \"Bob\", disabled: true},\n *      {value: 17, label: \"Alice\"},\n *      {value: 21, label: \"Eve\"},\n *    ]);\n *    select(employee, allEmployees, {defLabel: \"Select employee:\"});\n *\n *    const name = observable(\"alice\");\n *    const names = [\"alice\", \"bob\", \"carol\"];\n *    select(name, names, {renderOptionArgs: (op) => console.log(`Rendered option ${op.value}`)});\n *\n * Note that this select element is not compatible with browser address autofill for usage in\n * forms, and that formSelect should be used for this purpose.\n */\nexport function select<T>(obs: Observable<T>, optionArray: MaybeObsArray<IOption<T>>,\n                          options: SelectOptions<T> = {}) {\n  const {renderOptionArgs, ...weaselOptions} = options;\n  const _menu = cssSelectMenuElem(testId('select-menu'));\n  const _btn = cssSelectBtn(testId('select-open'));\n\n  const {menuCssClass: menuClass, ...otherOptions} = weaselOptions;\n  const selectOptions = {\n    buttonArrow: cssInlineCollapseIcon('Collapse'),\n    menuCssClass: _menu.className + ' ' + (menuClass || ''),\n    buttonCssClass: _btn.className,\n    ...otherOptions,\n  };\n\n  return weasel.select(obs, optionArray, selectOptions, (op) =>\n    cssOptionRow(\n      op.icon ? cssOptionRowIcon(op.icon) : null,\n      cssOptionLabel(t(op.label)),\n      renderOptionArgs ? renderOptionArgs(op) : null,\n      testId('select-row')\n    )\n  ) as HTMLElement; // TODO: should be changed in weasel\n}\n\n/**\n * Same as select(), but the main element looks like a link rather than a button.\n */\nexport function linkSelect<T>(obs: Observable<T>, optionArray: MaybeObsArray<IOption<T>>,\n                              options: weasel.ISelectUserOptions = {}) {\n  const _btn = cssSelectBtnLink(testId('select-open'));\n  const elem = select(obs, optionArray, {buttonCssClass: _btn.className, ...options});\n  // It feels strange to have focus stay on this link; remove tabIndex that makes it focusable.\n  elem.removeAttribute('tabIndex');\n  return elem;\n}\n\nexport interface IMultiSelectUserOptions {\n  placeholder?: string;\n  error?: Observable<boolean>;\n}\n\n/**\n * Creates a select dropdown widget that supports selecting multiple options.\n *\n * The observable array `selectedOptions` reflects the selected options, and\n * `availableOptions` is an array (normal or observable) of selectable options.\n * These may either be strings, or {label, value} objects.\n */\nexport function multiSelect<T>(selectedOptions: MutableObsArray<T>,\n                               availableOptions: MaybeObsArray<IOption<T>>,\n                               options: IMultiSelectUserOptions = {},\n                               ...domArgs: DomElementArg[]) {\n  const selectedOptionsSet = Computed.create(null, selectedOptions, (_use, opts) => new Set(opts));\n\n  const selectedOptionsText = Computed.create(null, selectedOptionsSet, (use, selectedOpts) => {\n    if (selectedOpts.size === 0) {\n      return options.placeholder ?? t(\"Select fields\");\n    }\n\n    const optionArray = Array.isArray(availableOptions) ? availableOptions : use(availableOptions);\n    return optionArray\n      .filter(opt => selectedOpts.has(weasel.getOptionFull(opt).value))\n      .map(opt => weasel.getOptionFull(opt).label)\n      .join(', ');\n  });\n\n  function buildMultiSelectMenu(ctl: weasel.IOpenController) {\n    return cssMultiSelectMenu(\n      { tabindex: '-1' }, // Allow menu to be focused.\n      dom.cls(menuCssClass),\n      FocusLayer.attach({pauseMousetrap: true}),\n      dom.onKeyDown({\n        Enter: () => ctl.close(),\n        Escape: () => ctl.close()\n      }),\n      elem => {\n        // Set focus on open, so that keyboard events work.\n        setTimeout(() => elem.focus(), 0);\n\n        // Sets menu width to match parent container (button) width.\n        const style = elem.style;\n        style.minWidth = ctl.getTriggerElem().getBoundingClientRect().width + 'px';\n        style.marginLeft = style.marginRight = '0';\n      },\n      dom.domComputed(selectedOptionsSet, selectedOpts => {\n        return dom.forEach(availableOptions, option => {\n          const fullOption = weasel.getOptionFull(option);\n          return cssCheckboxLabel(\n            cssCheckboxSquare(\n              {type: 'checkbox'},\n              dom.prop('checked', selectedOpts.has(fullOption.value)),\n              dom.on('change', (_ev, elem) => {\n                if (elem.checked) {\n                  selectedOptions.push(fullOption.value);\n                } else {\n                  selectedOpts.delete(fullOption.value);\n                  selectedOptions.set([...selectedOpts]);\n                }\n              }),\n              dom.style('position', 'relative'),\n              testId('multi-select-menu-option-checkbox')\n            ),\n            cssCheckboxText(fullOption.label, testId('multi-select-menu-option-text')),\n            testId('multi-select-menu-option')\n          );\n        });\n      }),\n      testId('multi-select-menu')\n    );\n  }\n\n  return cssSelectBtn(\n    dom.autoDispose(selectedOptionsSet),\n    dom.autoDispose(selectedOptionsText),\n    cssMultiSelectSummary(\n      dom.text(selectedOptionsText),\n      cssMultiSelectSummary.cls('-placeholder', use => use(selectedOptionsSet).size === 0)\n    ),\n    icon('Dropdown'),\n    elem => {\n      weasel.setPopupToCreateDom(elem, ctl => buildMultiSelectMenu(ctl), weasel.defaultMenuOptions);\n    },\n    dom.style('border', use => {\n      return options.error && use(options.error)\n        ? `1px solid ${theme.selectButtonBorderInvalid}`\n        : `1px solid ${theme.selectButtonBorder}`;\n    }),\n    ...domArgs\n  );\n}\n\n/**\n * Creates a select dropdown widget that is more ideal for forms. Implemented using the <select>\n * element to work with browser form autofill and typing in the desired value to quickly set it.\n * The appearance of the opened menu is OS dependent.\n *\n * The observable `obs` reflects the value of the selected option, and `optionArray` is an\n * array (regular or observable) of option values and labels. These may be either strings,\n * or {label, value} objects.\n *\n * If obs is set to an empty string value, then defLabel option is used to determine the\n * label that the select box will show, blank by default.\n *\n * Usage:\n *    const fruit = observable(\"\");\n *    formSelect(fruit, [\"apple\", \"banana\", \"mango\"], {defLabel: \"Select fruit:\"});\n */\nexport function formSelect(obs: Observable<string>, optionArray: MaybeObsArray<IOption<string>>,\n                           options: {defaultLabel?: string} = {}) {\n  const {defaultLabel = \"\"} = options;\n  const container: Element = cssSelectBtnContainer(\n    dom('select', {class: cssSelectBtn.className, style: 'height: 42px; padding: 12px 30px 12px 12px;'},\n      dom.prop('value', obs),\n      dom.on('change', (_, elem) => { obs.set(elem.value); }),\n      dom('option', {value: '', hidden: 'hidden'}, defaultLabel),\n      dom.forEach(optionArray, (option) => {\n        const obj: weasel.IOptionFull<string> = weasel.getOptionFull(option);\n        return dom('option', {value: obj.value}, obj.label);\n      })\n    ),\n    cssCollapseIcon('Collapse')\n  );\n  return container;\n}\n\nexport function inputMenu(createFunc: weasel.MenuCreateFunc, options?: weasel.IMenuOptions): DomElementMethod {\n  // Triggers the input menu on 'input' events, if the input has text inside.\n  function inputTrigger(triggerElem: Element, ctl: weasel.PopupControl): void {\n    dom.onElem(triggerElem, 'input', () => {\n      (triggerElem as HTMLInputElement).value.length > 0 ? ctl.open() : ctl.close();\n    });\n  }\n  return weasel.inputMenu(createFunc, {\n    trigger: [inputTrigger],\n    menuCssClass: `${cssMenuElem.className} ${cssInputButtonMenuElem.className}`,\n    ...options\n  });\n}\n\n// A menu item that leads to the billing page if the desired operation requires an upgrade.\n// Such menu items are marked with a little sparkle unicode.\nexport function upgradableMenuItem(needUpgrade: boolean, action: () => void, ...rem: any[]) {\n  if (needUpgrade) {\n    return menuItem(() => reportError(new NeedUpgradeError()), ...rem, \" *\");\n  } else {\n    return menuItem(action, ...rem);\n  }\n}\n\nexport function upgradeText(needUpgrade: boolean, onClick: () => void) {\n  if (!needUpgrade) { return null; }\n  return menuText(dom('span', t(\"* Workspaces are available on team plans. \"),\n    cssUpgradeTextButton(t(\"Upgrade now\"), dom.on('click', () => onClick()))));\n}\n\n/**\n * Create an autocomplete element and tie it to an input or textarea element.\n *\n * Usage:\n *      const employees = ['Thomas', 'June', 'Bethany', 'Mark', 'Marjorey', 'Zachary'];\n *      const inputElem = input(...);\n *      autocomplete(inputElem, employees);\n */\nexport function autocomplete(\n  inputElem: HTMLInputElement,\n  choices: MaybeObsArray<string>,\n  options: weasel.IAutocompleteOptions = {}\n) {\n  return weasel.autocomplete(inputElem, choices, {\n    ...defaults, ...options,\n    menuCssClass: defaults.menuCssClass + ' ' + cssSelectMenuElem.className + ' ' + (options.menuCssClass || '')\n  });\n}\n\n/**\n * Creates simple (not reactive) static menu that looks like a select-box.\n * Primary usage is for menus, where you want to control how the options and a default\n * label will look. Label is not updated or changed when one of the option is clicked, for those\n * use cases use a select component.\n * Icons are optional, can use custom elements instead of labels and options.\n *\n * Usage:\n *\n *  selectMenu(selectTitle(\"Title\", \"Script\"), () => [\n *    selectOption(() => ..., \"Option1\", \"Database\"),\n *    selectOption(() => ..., \"Option2\", \"Script\"),\n *  ]);\n *\n *  // Control disabled state (if the menu will be opened or not)\n *\n *  const disabled = observable(false);\n *  selectMenu(selectTitle(\"Title\", \"Script\"), () => [\n *    selectOption(() => ..., \"Option1\", \"Database\"),\n *    selectOption(() => ..., \"Option2\", \"Script\"),\n *  ], disabled);\n *\n */\nexport function selectMenu(\n  label: DomElementArg,\n  items: () => DomElementArg[],\n  ...args: IDomArgs<HTMLDivElement>\n) {\n  const _menu = cssSelectMenuElem(testId('select-menu'));\n  return cssSelectBtn(\n    label,\n    icon('Dropdown'),\n    menu(\n      items,\n      {\n        ...weasel.defaultMenuOptions,\n        menuCssClass: _menu.className + ' grist-floating-menu',\n        stretchToSelector : `.${cssSelectBtn.className}`,\n        trigger : [(triggerElem, ctl) => {\n          const isDisabled = () => triggerElem.classList.contains('disabled');\n          dom.onElem(triggerElem, 'click', () => isDisabled() || ctl.toggle());\n          dom.onKeyElem(triggerElem as HTMLElement, 'keydown', {\n            ArrowDown: () => isDisabled() || ctl.open(),\n            ArrowUp: () => isDisabled() || ctl.open()\n          });\n        }]\n      },\n    ),\n    ...args,\n  );\n}\n\nexport function selectTitle(label: BindableValue<string>, iconName?: BindableValue<IconName>) {\n  return cssOptionRow(\n    iconName ? dom.domComputed(iconName, (name) => cssOptionRowIcon(name)) : null,\n    dom.text(label)\n  );\n}\n\nexport function selectOption(\n  action: (item: HTMLElement) => void,\n  label: BindableValue<string>,\n  iconName?: BindableValue<IconName>,\n  ...args: IDomArgs<HTMLElement>) {\n  return menuItem(action, selectTitle(label, iconName), ...args);\n}\n\nexport const menuSubHeader = styled('div', `\n  color: ${theme.menuSubheaderFg};\n  font-size: ${vars.xsmallFontSize};\n  text-transform: uppercase;\n  font-weight: ${vars.bigControlTextWeight};\n  padding: 8px 24px 16px 24px;\n  cursor: default;\n`);\n\nexport const menuText = styled('div', `\n  display: flex;\n  align-items: center;\n  font-size: ${vars.smallFontSize};\n  color: ${theme.menuText};\n  padding: 8px 24px 4px 24px;\n  max-width: 250px;\n  cursor: default;\n`);\n\nexport const menuItem = styled(weasel.menuItem, menuItemStyle);\n\nexport const menuItemLink = styled(weasel.menuItemLink, menuItemStyle);\n\n/**\n * A version of menuItem which runs the action on next tick, allowing the menu to close even when\n * the action causes the disabling of the element being clicked.\n * TODO disabling the element should not prevent the menu from closing; once fixed in weasel, this\n * can be removed.\n */\nexport const menuItemAsync: typeof weasel.menuItem = function(action, ...args) {\n  return menuItem(() => setTimeout(action, 0), ...args);\n};\n\nexport function menuItemCmd(cmd: Command, label: string, ...args: DomElementArg[]) {\n  return menuItem(\n    cmd.run,\n    dom('span', label, testId('cmd-name')),\n    cmd.humanKeys.length ? cssCmdKey(cmd.humanKeys[0]) : null,\n    cssMenuItemCmd.cls(''), // overrides some menu item styles\n    ...args\n  );\n}\n\nexport function menuAnnotate(text: string, ...args: DomElementArg[]) {\n  return cssAnnotateMenuItem(text, ...args);\n}\n\nexport const menuDivider = styled(weasel.cssMenuDivider, `\n  background-color: ${theme.menuBorder};\n  margin: 8px 0;\n`);\n\nexport const menuIcon = styled(icon, `\n  flex: none;\n  margin-right: 8px;\n`);\n\nconst cssSelectMenuElem = styled(cssMenuElem, `\n  max-height: 400px;\n  overflow-y: auto;\n\n  --weaseljs-menu-item-padding: 8px 16px;\n`);\n\nconst cssSelectBtnContainer = styled('div', `\n  position: relative;\n  width: 100%;\n`);\n\nconst cssSelectBtnLink = styled('div', `\n  display: flex;\n  align-items: center;\n  font-size: ${vars.mediumFontSize};\n  color: ${theme.controlFg};\n  --icon-color: ${theme.controlFg};\n  width: initial;\n  height: initial;\n  line-height: inherit;\n  background-color: initial;\n  padding: initial;\n  border: initial;\n  border-radius: initial;\n  box-shadow: initial;\n  cursor: pointer;\n  outline: none;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n\n  &:hover, &:focus, &:active {\n    color: ${theme.controlHoverFg};\n    --icon-color: ${theme.controlHoverFg};\n    box-shadow: initial;\n  }\n`);\n\n\nexport const cssOptionRow = styled('span', `\n  display: flex;\n  align-items: center;\n  width: 100%;\n`);\n\nexport const cssOptionRowIcon = styled(icon, `\n  height: 16px;\n  width: 16px;\n  background-color: var(--icon-color, ${theme.menuItemIconFg});\n  margin: -3px 8px 0 2px;\n  margin: 0 8px 0 0;\n  flex: none;\n\n  .${weasel.cssMenuItem.className}-sel & {\n    background-color: ${theme.menuItemSelectedFg};\n  }\n\n  .${weasel.cssMenuItem.className}.disabled & {\n    background-color: ${theme.menuItemDisabledFg};\n  }\n`);\n\nconst cssOptionLabel = styled('div', `\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  .${weasel.cssMenuItem.className} & {\n    color: ${theme.menuItemFg};\n  }\n\n  .${weasel.cssMenuItem.className}-sel & {\n    color: ${theme.menuItemSelectedFg};\n    background-color: ${theme.menuItemSelectedBg};\n  }\n\n  .${weasel.cssMenuItem.className}.disabled & {\n    color: ${theme.menuItemDisabledFg};\n  }\n`);\n\nconst cssInlineCollapseIcon = styled(icon, `\n  margin: 0 2px;\n  pointer-events: none;\n`);\n\nconst cssCollapseIcon = styled(icon, `\n  position: absolute;\n  right: 12px;\n  top: calc(50% - 8px);\n  pointer-events: none;\n  background-color: ${theme.selectButtonFg};\n`);\n\nconst cssInputButtonMenuElem = styled(cssMenuElem, `\n  padding: 4px 0px;\n`);\n\nconst cssMenuItemCmd = styled('div', `\n  justify-content: space-between;\n`);\n\nconst cssCmdKey = styled('span', `\n  margin-left: 16px;\n  color: ${theme.menuItemIconFg};\n  margin-right: -12px;\n\n  .${weasel.cssMenuItem.className}-sel > & {\n    color: ${theme.menuItemIconSelectedFg};\n  }\n\n  .${weasel.cssMenuItem.className}.disabled > & {\n    color: ${theme.menuItemDisabledFg};\n  }\n`);\n\nconst cssAnnotateMenuItem = styled('span', `\n  color: ${theme.accentText};\n  text-transform: uppercase;\n  font-size: 8px;\n  vertical-align: super;\n  margin-top: -4px;\n  margin-left: 4px;\n  font-weight: bold;\n\n  .${weasel.cssMenuItem.className}-sel > & {\n    color: ${theme.menuItemIconSelectedFg};\n  }\n`);\n\nconst cssMultiSelectSummary = styled('div', `\n  flex: 1 1 0px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: ${theme.selectButtonFg};\n\n  &-placeholder {\n    color: ${theme.selectButtonPlaceholderFg};\n  }\n`);\n\nconst cssMultiSelectMenu = styled(weasel.cssMenu, `\n  display: flex;\n  flex-direction: column;\n  max-height: calc(max(300px, 95vh - 300px));\n  max-width: 400px;\n  padding-bottom: 0px;\n  background-color: ${theme.menuBg};\n`);\n\nconst cssCheckboxLabel = styled(cssLabel, `\n  padding: 8px 16px;\n`);\n\nconst cssCheckboxText = styled(cssLabelText, `\n  margin-right: 12px;\n  color: ${theme.text};\n  white-space: pre;\n`);\n\nconst cssUpgradeTextButton = styled(textButton, `\n  font-size: ${vars.smallFontSize};\n`);\n","import {FocusLayer} from 'app/client/lib/FocusLayer';\nimport {makeT} from 'app/client/lib/localization';\nimport {reportError} from 'app/client/models/errors';\nimport {cssInput} from 'app/client/ui/cssInput';\nimport {prepareForTransition, TransitionWatcher} from 'app/client/ui/transitions';\nimport {bigBasicButton, bigPrimaryButton, cssButton} from 'app/client/ui2018/buttons';\nimport {mediaSmall, testId, theme, vars} from 'app/client/ui2018/cssVars';\nimport {loadingSpinner} from 'app/client/ui2018/loaders';\nimport {waitGrainObs} from 'app/common/gutil';\nimport {IOpenController, IPopupOptions, PopupControl, popupOpen} from 'popweasel';\nimport {Computed, Disposable, dom, DomContents, DomElementArg, input, keyframes,\n  MultiHolder, Observable, styled} from 'grainjs';\nimport {cssMenuElem} from 'app/client/ui2018/menus';\n\nconst t = makeT('modals');\n\n// IModalControl is passed into the function creating the body of the modal.\nexport interface IModalControl {\n  // Observable for whether there is work in progress that's delaying the closing of the modal. It\n  // is useful for disabling a Save or Close button.\n  workInProgress: Computed<boolean>;\n\n  // Focus the modal dialog.\n  focus(): void;\n\n  // Request to close, without waiting. It's possible for closing to get prevented.\n  close(): void;\n\n  // Returns true if closed, false if closing was prevented.\n  closeAndWait(): Promise<boolean>;\n\n  // Prevents closing, if close has been called and is pending. No-op otherwise.\n  preventClose(): void;\n\n  // Wraps the passed-in function, so that closing is delayed while the function is running. If\n  // {close: true} is passed in, then requests closing of the modal when the function is done.\n  //\n  // With catchErrors set, errors are caught and reported, and prevent the dialog from closing.\n  // Otherwise, only StayOpen exception prevents closing; other errors will be propagated.\n  doWork<Args extends any[]>(\n    func: (...args: Args) => Promise<unknown>,\n    options?: {close?: boolean, catchErrors?: boolean},\n  ): (...args: Args) => Promise<void>;\n}\n\nexport class ModalControl extends Disposable implements IModalControl {\n  private _inProgress = Observable.create<number>(this, 0);\n  private _workInProgress = Computed.create(this, this._inProgress, (use, n) => (n > 0));\n  private _closePromise: Promise<boolean>|undefined;\n  private _shouldClose = false;\n\n  constructor(\n    private _doClose: () => void,\n    private _doFocus?: () => void,\n  ) {\n    super();\n  }\n\n  public focus() {\n    this._doFocus?.();\n  }\n\n  public close(): void {\n    this.closeAndWait().catch(() => {});\n  }\n\n  public async closeAndWait(): Promise<boolean> {\n    return this._closePromise || (this._closePromise = this._doCloseAndWait());\n  }\n\n  public preventClose(): void {\n    this._shouldClose = false;\n  }\n\n  public get workInProgress() {\n    return this._workInProgress;\n  }\n\n  public doWork<Args extends any[]>(\n    func: (...args: Args) => Promise<unknown>,\n    options: {close?: boolean, catchErrors?: boolean} = {},\n  ): (...args: Args) => Promise<void> {\n    return async (...args) => {\n      this._inProgress.set(this._inProgress.get() + 1);\n      const closePromise = options.close ? this.closeAndWait() : null;\n      try {\n        await func(...args);\n      } catch (err) {\n        if (err instanceof StayOpen) {\n          this.preventClose();\n        } else if (options.catchErrors) {\n          reportError(err);\n          this.preventClose();\n        } else {\n          throw err;\n        }\n      } finally {\n        this._inProgress.set(this._inProgress.get() - 1);\n        if (closePromise) {\n          await closePromise;\n        }\n      }\n    };\n  }\n\n  private async _doCloseAndWait(): Promise<boolean> {\n    this._shouldClose = true;\n    try {\n      // Since some modals expect an immediate close; avoid an await when no work is pending.\n      if (this.workInProgress.get()) {\n        await waitGrainObs(this.workInProgress, wip => !wip);\n      }\n      if (this._shouldClose) { this._doClose(); }\n      return this._shouldClose;\n    } finally {\n      this._closePromise = undefined;\n    }\n  }\n}\n\n/**\n * The modal variant.\n *\n * Fade-in modals open with a fade-in background animation, and close immediately.\n *\n * Collapsing modals open with a expanding animation from a referenced DOM element, and\n * close with a collapsing animation into the referenced element.\n */\nexport type IModalVariant = 'fade-in' | 'collapsing';\n\nexport interface IModalOptions {\n  // The modal variant. Defaults to \"fade-in\".\n  variant?: IModalVariant;\n  // Required for \"collapsing\" variant modals. This is the anchor element for animations.\n  refElement?: HTMLElement;\n  // If set, escape key does not close the dialog.\n  noEscapeKey?: boolean;\n  // If set, clicking into background does not close dialog.\n  noClickAway?: boolean;\n  // DOM arguments to pass to the modal backer.\n  backerDomArgs?: DomElementArg[];\n  // If given, call and wait for this before closing the dialog. If it returns false, don't close.\n  // Error also prevents closing, and is reported as an unexpected error.\n  beforeClose?: () => Promise<boolean>;\n}\n\n// A custom error type to signal to the modal that it should stay open, but not report any error\n// (presumably because the error was already reported).\nexport class StayOpen extends Error {\n}\n\nexport type ModalWidth =\n  'normal' |          // Normal dialog, from 428px to 480px in width.\n  'fixed-wide';       // Fixed 600px width.\n\n/**\n * A simple modal. Shows up in the middle of the screen with a tinted backdrop.\n * Created with the given body content and width.\n *\n * Closed via clicking anywhere outside the modal. May also be closed by\n * calling ctl.close().\n *\n * The createFn callback may tie the disposal of temporary objects to its `owner` argument.\n *\n * Example usage:\n *  modal((ctl, owner) => [\n *    cssModalTitle(`Pin doc`),\n *    cssModalBody('Are you sure you want to pin doc?')\n *    cssModalButtons(\n *      primary('Yes', dom.on('click', () => { onClick(true); ctl.close(); })),\n *      secondary('Cancel', dom.on('click', () => { onClick(false); ctl.close(); }))\n *    )\n *  ])\n */\nexport function modal(\n  createFn: (ctl: IModalControl, owner: MultiHolder) => DomElementArg,\n  options: IModalOptions = {}\n): void {\n  const {\n    noEscapeKey,\n    noClickAway,\n    refElement = document.body,\n    variant = 'fade-in',\n    backerDomArgs = [],\n  } = options;\n\n  function doClose() {\n    if (!modalDom.isConnected) { return; }\n\n    variant === 'collapsing' ? collapseAndCloseModal() : closeModal();\n  }\n\n  function closeModal() {\n    document.body.removeChild(modalDom);\n    // Ensure we run the disposers for the DOM contained in the modal.\n    dom.domDispose(modalDom);\n  }\n\n  function collapseAndCloseModal() {\n    const watcher = new TransitionWatcher(dialogDom);\n    watcher.onDispose(() => closeModal());\n    modalDom.classList.add(cssModalBacker.className + '-collapsing');\n    collapseModal();\n  }\n\n  function expandModal() {\n    prepareForTransition(dialogDom, () => collapseModal());\n    Object.assign(dialogDom.style, {\n      transform: '',\n      opacity: '',\n      visibility: 'visible',\n    });\n  }\n\n  function collapseModal() {\n    const rect = dialogDom.getBoundingClientRect();\n    const collapsedRect = refElement.getBoundingClientRect();\n    const originX = (collapsedRect.left + collapsedRect.width / 2) - rect.left;\n    const originY = (collapsedRect.top + collapsedRect.height / 2) - rect.top;\n    Object.assign(dialogDom.style, {\n      transform: `scale(${collapsedRect.width / rect.width}, ${collapsedRect.height / rect.height})`,\n      transformOrigin: `${originX}px ${originY}px`,\n      opacity: '0',\n    });\n  }\n\n  let close = doClose;\n  let dialogDom: HTMLElement;\n\n  const modalDom = cssModalBacker(\n    dom.create((owner) => {\n      const focus = () => dialogDom.focus();\n      const ctl = ModalControl.create(owner, doClose, focus);\n      close = () => ctl.close();\n\n      dialogDom = cssModalDialog(\n        createFn(ctl, owner),\n        cssModalDialog.cls('-collapsing', variant === 'collapsing'),\n        dom.on('click', (ev) => ev.stopPropagation()),\n        noEscapeKey ? null : dom.onKeyDown({ Escape: close }),\n        testId('modal-dialog'),\n      );\n      FocusLayer.create(owner, {\n        defaultFocusElem: dialogDom,\n        allowFocus: (elem) => (elem !== document.body),\n        // Pause mousetrap keyboard shortcuts while the modal is shown. Without this, arrow keys\n        // will navigate in a grid underneath the modal, and Enter may open a cell there.\n        pauseMousetrap: true\n      });\n      return dialogDom;\n    }),\n    noClickAway ? null : dom.on('click', () => close()),\n    ...backerDomArgs,\n  );\n\n  document.body.appendChild(modalDom);\n  if (variant === 'collapsing') { expandModal(); }\n}\n\nexport interface ISaveModalOptions {\n  title: DomElementArg;           // Normally just a string.\n  body: DomElementArg;            // Content of the dialog.\n  saveLabel?: DomElementArg;      // Normally just a string; defaults to \"Save\".\n  saveDisabled?: Observable<boolean>;   // Optional observable for when to disable Save button.\n  saveFunc: () => Promise<unknown>;     // Called on Save; dialog closes when promise is fulfilled.\n  hideCancel?: boolean;           // If set, hide the Cancel button\n  width?: ModalWidth;             // Set a width style for the dialog.\n  modalArgs?: DomElementArg;      // Extra args to apply to the outer cssModalDialog element.\n  extraButtons?: DomContents;     // More buttons!\n}\n\n/**\n * Creates a modal dialog with a title, body, and Save/Cancel buttons. The provided createFunc()\n * is called immediately to get the dialog's contents and options (see ISaveModalOptions for\n * details). For example:\n *\n *    saveModal((ctl, owner) => {\n *      const myObs = Computed.create(owner, ...);\n *      return {\n *        title: 'My Dialog',\n *        body: dom('div', 'Hello', dom.text(myObs)),\n *        saveDisabled: Computed.create(owner, (use) => !use(myObs)),\n *        saveFunc: () => server.ping(),\n *        modalArgs: {style: 'background-color: blue'},\n *      };\n *    });\n *\n * On Save, the dialog calls saveFunc(), disables the Save button, and stays open until saveFunc()\n * is resolved. It then closes on success, or reports the error and stays open on rejection. To\n * stay open without reporting an error (if one is already reported), throw StayOpen exception.\n *\n * The dialog interprets Enter/Escape keys as if the Save/Cancel buttons were clicked.\n *\n * Note that it's possible to close the dialog via Cancel while saveFunc() is pending. That's\n * probably desirable, but keep in mind that the dialog may be disposed before saveFunc() returns.\n *\n * Error handling examples:\n *  1.  saveFunc: doSomething\n *      (Most common) If doSomething fails, the error is reported and the dialog stays open.\n *  2.  saveFunc: () => doSomething().catch(reportError)\n *      If doSomething fails, the error is reported but the dialog closes anyway.\n *  3.  saveFunc: () => doSomething().catch((e) => { alert(\"BOOM\"); throw new StayOpen(); })\n *      If doSomething fails, an alert is shown, and the dialog stays open.\n */\nexport function saveModal(\n  createFunc: (ctl: IModalControl, owner: MultiHolder) => ISaveModalOptions,\n  modalOptions?: IModalOptions\n) {\n  return modal((ctl, owner) => {\n    const options = createFunc(ctl, owner);\n\n    const isSaveDisabled = Computed.create(owner, (use) =>\n      use(ctl.workInProgress) || (options.saveDisabled ? use(options.saveDisabled) : false));\n\n    const save = ctl.doWork(options.saveFunc, {close: true, catchErrors: true});\n\n    return [\n      cssModalTitle(options.title, testId('modal-title')),\n      cssModalBody(options.body),\n      cssModalButtons(\n        bigPrimaryButton(options.saveLabel || t(\"Save\"),\n          dom.boolAttr('disabled', isSaveDisabled),\n          dom.on('click', save),\n          testId('modal-confirm'),\n        ),\n        options.extraButtons,\n        options.hideCancel ? null : bigBasicButton(t(\"Cancel\"),\n          dom.on('click', () => ctl.close()),\n          testId('modal-cancel'),\n        ),\n      ),\n      dom.onKeyDown({ Enter: () => isSaveDisabled.get() || save() }),\n      options.width && cssModalWidth(options.width),\n      options.modalArgs,\n    ];\n  }, modalOptions);\n}\n\nexport interface ConfirmModalOptions {\n  explanation?: DomElementArg,\n  hideCancel?: boolean;\n  extraButtons?: DomContents;\n  modalOptions?: IModalOptions;\n}\n\n/**\n * Builds a simple confirm modal with 'Enter' bound to the confirm action.\n *\n * See saveModal() for error handling notes that here apply to the onConfirm callback.\n */\nexport function confirmModal(\n  title: DomElementArg,\n  btnText: DomElementArg,\n  onConfirm: () => Promise<void>,\n  {explanation, hideCancel, extraButtons, modalOptions}: ConfirmModalOptions = {},\n): void {\n  return saveModal((ctl, owner): ISaveModalOptions => ({\n    title,\n    body: explanation || null,\n    saveLabel: btnText,\n    saveFunc: onConfirm,\n    hideCancel,\n    width: 'normal',\n    extraButtons,\n  }), modalOptions);\n}\n\n\n/**\n * Creates a simple prompt modal (replacement for the native one).\n * Closed via clicking anywhere outside the modal or Cancel button.\n *\n * Example usage:\n *  promptModal(\n *    \"Enter your name\",\n *    (name: string) => alert(`Hello ${name}`),\n *    \"Ok\" // Confirm button name,\n *    \"John doe\", // Initial text (can be empty or undefined)\n *    \"Enter your name\", // input placeholder\n *    () => console.log('User cancelled') // Called when user cancels, or clicks outside.\n *  )\n *\n * @param title: Prompt text.\n * @param onConfirm: Handler for Confirm button.\n * @param btnText: Text of the confirm button.\n * @param initial: Initial value in the input element.\n * @param placeholder: Placeholder for the input element.\n * @param onCancel: Optional cancel handler.\n */\nexport function promptModal(\n  title: string,\n  onConfirm: (text: string) => Promise<unknown>,\n  btnText: string,\n  initial?: string,\n  placeholder?: string,\n  onCancel?: () => void\n): void {\n  saveModal((ctl, owner): ISaveModalOptions => {\n    let confirmed = false;\n    const text = Observable.create(owner, initial ?? '');\n    const txtInput = input(text, { onInput : true }, { placeholder }, cssInput.cls(''), testId('modal-prompt'));\n    const options: ISaveModalOptions = {\n      title,\n      body: txtInput,\n      saveLabel: btnText,\n      saveFunc: () => {\n        // Mark that confirm was invoked.\n        confirmed = true;\n        return onConfirm(text.get() || '');\n      },\n      width: 'normal'\n    };\n    owner.onDispose(() => {\n      if (confirmed) { return; }\n      onCancel?.();\n    });\n    setTimeout(() => txtInput.focus(), 10);\n    return options;\n  });\n}\n\n/**\n * Wraps prompt modal in a promise that is resolved either when user confirms or cancels.\n * When user cancels the returned value is always undefined.\n *\n * Example usage:\n *  async handler() {\n *    const name = await invokePrompt(\"Please enter your name\");\n *    if (name !== undefined) alert(`Hello ${name}`);\n *  }\n *\n * @param title: Prompt text.\n * @param btnText: Text of the confirm button, default is \"Ok\".\n * @param initial: Initial value in the input element.\n * @param placeholder: Placeholder for the input element.\n */\nexport function invokePrompt(\n  title: string,\n  btnText?: string,\n  initial?: string,\n  placeholder?: string\n): Promise<string|undefined> {\n  let onResolve: (text: string|undefined) => any;\n  const prom = new Promise<string|undefined>((resolve) => {\n    onResolve = resolve;\n  });\n  promptModal(title, onResolve!, btnText ?? t(\"Ok\"), initial, placeholder, () => {\n    if (onResolve) {\n      onResolve(undefined);\n    }\n  });\n  return prom;\n}\n\n/**\n * Builds a simple spinner modal. The modal gets removed when `promise` resolves.\n */\nexport async function spinnerModal<T>(\n  title: string,\n  promise: Promise<T>): Promise<T> {\n\n  modal((ctl, owner) => {\n\n    // `finally` is missing from es2016, below is a work-around.\n    const close = () => ctl.close();\n    promise.then(close, close);\n\n    return [\n      cssModalSpinner.cls(''),\n      cssModalTitle(\n        title,\n        testId('modal-spinner-title'),\n      ),\n      cssSpinner(loadingSpinner()),\n      testId('modal-spinner'),\n    ];\n  }, {\n    noClickAway: true,\n    noEscapeKey: true,\n  });\n  return await promise;\n}\n\n/**\n * Apply this to a modal as\n *    modal(() => [cssModalBody(...), cssModalWidth('normal')])\n * or\n *    saveModal(() => {..., width: 'normal'})\n */\nexport function cssModalWidth(style: ModalWidth) {\n  return cssModalDialog.cls('-' + style);\n}\n\n/**\n * Shows a little modal as a tooltip.\n *\n * Example:\n * dom.on('click', (_, element) => modalTooltip(element, (ctl) => {\n *  return dom('div', 'Hello world', dom.on('click', () => ctl.close()));\n * }))\n */\nexport function modalTooltip(\n  reference: Element,\n  domCreator: (ctl: IOpenController) => DomElementArg,\n  options: IPopupOptions = {}\n): PopupControl {\n  return popupOpen(reference, (ctl: IOpenController) => {\n    const element = cssModalTooltip(\n      domCreator(ctl)\n    );\n    return element;\n  }, options);\n}\n\n/* CSS styled components */\n\nexport const cssModalTooltip = styled(cssMenuElem, `\n  padding: 16px 24px;\n  background: ${theme.modalBg};\n  border-radius: 3px;\n  outline: none;\n  & > div {\n    outline: none;\n  }\n`);\n\nexport const cssModalTopPadding = styled('div', `\n  padding-top: var(--css-modal-dialog-padding-vertical);\n`);\n\nexport const cssModalBottomPadding = styled('div', `\n  padding-bottom: var(--css-modal-dialog-padding-vertical);\n`);\n\nexport const cssModalHorizontalPadding = styled('div', `\n  padding-left: var(--css-modal-dialog-padding-horizontal);\n  padding-right: var(--css-modal-dialog-padding-horizontal);\n`);\n\n// For centering, we use 'margin: auto' on the flex item instead of 'justify-content: center' on\n// the flex container, to ensure the full item can be scrolled in case of overflow.\n// See https://stackoverflow.com/a/33455342/328565\n//\n// If you want to control the padding yourself, use the cssModalTopPadding and other classes above and add -full-body\n// variant to the modal.\nexport const cssModalDialog = styled('div', `\n  --css-modal-dialog-padding-horizontal: 64px;\n  --css-modal-dialog-padding-vertical: 40px;\n  background-color: ${theme.modalBg};\n  min-width: 428px;\n  color: ${theme.darkText};\n  margin: auto;\n  border-radius: 3px;\n  box-shadow: 0 2px 18px 0 ${theme.modalInnerShadow}, 0 0 1px 0 ${theme.modalOuterShadow};\n  padding: var(--css-modal-dialog-padding-vertical) var(--css-modal-dialog-padding-horizontal);\n  outline: none;\n\n  &-normal {\n    max-width: 480px;\n  }\n  &-fixed-wide {\n    width: 600px;\n  }\n  &-collapsing {\n    transition-property: opacity, transform;\n    transition-duration: 0.4s;\n    transition-timing-function: ease-in-out;\n  }\n  @media ${mediaSmall} {\n    & {\n      width: unset;\n      min-width: unset;\n      --css-modal-dialog-padding-horizontal: 16px;\n      --css-modal-dialog-padding-vertical: 24px;\n    }\n  }\n  &-full-body {\n    padding: 0;\n  }\n`);\n\nexport const cssModalTitle = styled('div', `\n  font-size: ${vars.xxxlargeFontSize};\n  font-weight: ${vars.headerControlTextWeight};\n  color: ${theme.text};\n  margin: 0 0 16px 0;\n  line-height: 32px;\n  overflow-wrap: break-word;\n`);\n\nexport const cssModalBody = styled('div', `\n  color: ${theme.text};\n  margin: 16px 0;\n`);\n\nexport const cssModalButtons = styled('div', `\n  margin: 40px 0 0 0;\n\n  & > button,\n  & > .${cssButton.className} {\n    margin: 0 8px 0 0;\n  }\n`);\n\nexport const cssModalCloseButton = styled('div', `\n  align-self: flex-end;\n  margin: -8px;\n  padding: 4px;\n  border-radius: 4px;\n  cursor: pointer;\n  --icon-color: ${theme.modalCloseButtonFg};\n\n  &:hover {\n    background-color: ${theme.hover};\n  }\n`);\n\nconst cssFadeIn = keyframes(`\n  from {background-color: transparent}\n`);\n\nconst cssFadeOut = keyframes(`\n  from {background-color: ${theme.modalBackdrop}}\n`);\n\nconst cssModalBacker = styled('div', `\n  position: fixed;\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  padding: 16px;\n  z-index: ${vars.modalZIndex};\n  background-color: ${theme.modalBackdrop};\n  overflow-y: auto;\n  animation-name: ${cssFadeIn};\n  animation-duration: 0.4s;\n\n  &-collapsing {\n    animation-name: ${cssFadeOut};\n    background-color: transparent;\n  }\n`);\n\nconst cssSpinner = styled('div', `\n  display: flex;\n  align-items: center;\n  height: 80px;\n  margin: auto;\n`);\n\nconst cssModalSpinner = styled('div', `\n  display: flex;\n  flex-direction: column;\n`);\n\nconst cssFadeInFromTop = keyframes(`\n  from {top: -250px; opacity: 0}\n  to {top: 0; opacity: 1}\n`);\n\nexport const cssAnimatedModal = styled('div', `\n  animation-name: ${cssFadeInFromTop};\n  animation-duration: 0.4s;\n  position: relative;\n`);\n","import * as commands from 'app/client/components/commands';\nimport {GristDoc} from 'app/client/components/GristDoc';\nimport {FocusLayer} from 'app/client/lib/FocusLayer';\nimport {reportSuccess} from 'app/client/models/errors';\nimport {basicButton, bigPrimaryButton, primaryButton} from 'app/client/ui2018/buttons';\nimport {labeledSquareCheckbox} from 'app/client/ui2018/checkbox';\nimport {mediaXSmall, testId, theme, vars} from 'app/client/ui2018/cssVars';\nimport {icon} from 'app/client/ui2018/icons';\nimport {cssModalTooltip, modalTooltip} from 'app/client/ui2018/modals';\nimport {dom, DomContents, keyframes, observable, styled, svg} from 'grainjs';\nimport {IPopupOptions} from 'popweasel';\nimport merge = require('lodash/merge');\n\n/**\n * This is a file for all custom and pre-configured popups, modals, toasts and tooltips, used\n * in more then one component.\n */\n\n/**\n * Tooltip or popup to confirm row deletion.\n */\nexport function buildConfirmDelete(\n  refElement: Element,\n  onSave: (remember: boolean) => void,\n  single = true,\n) {\n  const remember = observable(false);\n  const tooltip = modalTooltip(refElement, (ctl) =>\n    cssContainer(\n      dom.autoDispose(remember),\n      testId('confirm-deleteRows'),\n      testId('confirm-popup'),\n      elem => { FocusLayer.create(ctl, {defaultFocusElem: elem, pauseMousetrap: true}); },\n      dom.onKeyDown({\n        Escape: () => ctl.close(),\n        Enter: () => { onSave(remember.get()); ctl.close(); },\n      }),\n      dom('div', `Are you sure you want to delete ${single ? 'this' : 'these'} record${single ? '' : 's'}?`,\n        dom.style('margin-bottom', '10px'),\n      ),\n      dom('div',\n        labeledSquareCheckbox(remember, \"Don't ask again.\", testId('confirm-remember')),\n        dom.style('margin-bottom', '10px'),\n      ),\n      cssButtons(\n        primaryButton('Delete', testId('confirm-save'), dom.on('click', () => {\n          onSave(remember.get());\n          ctl.close();\n        })),\n        basicButton('Cancel', testId('confirm-cancel'), dom.on('click', () => ctl.close()))\n      )\n    ), {}\n  );\n  // Attach this tooltip to a cell so that it is automatically closed when the cell is disposed.\n  // or scrolled out of view (and then disposed).\n  dom.onDisposeElem(refElement, () => {\n    if (!tooltip.isDisposed()) {\n      tooltip.close();\n    }\n  });\n  return tooltip;\n}\n\nexport function showDeprecatedWarning(\n  refElement: Element,\n  content: DomContents,\n  onClose: (checked: boolean) => void,\n) {\n  const remember = observable(false);\n  const tooltip = modalTooltip(refElement, (ctl) =>\n    cssWideContainer(\n      testId('popup-warning-deprecated'),\n      elem => { FocusLayer.create(ctl, {defaultFocusElem: elem, pauseMousetrap: true}); },\n      dom.onKeyDown({\n        Escape: () => { ctl.close(); onClose(remember.get()); },\n        Enter: () => { ctl.close(); onClose(remember.get()); },\n      }),\n      content,\n      cssButtons(\n        dom.style('margin-top', '12px'),\n        dom.style('justify-content', 'space-between'),\n        dom.style('align-items', 'center'),\n        dom('div',\n          labeledSquareCheckbox(remember, \"Don't show again.\", testId('confirm-remember')),\n        ),\n        basicButton('Dismiss', testId('confirm-save'),\n          dom.on('click', () => { ctl.close(); onClose(remember.get()); })\n        )\n      ),\n    )\n  );\n  // Attach this warning to a cell so that it is automatically closed when the cell is disposed.\n  // or scrolled out of view (and then disposed).\n  dom.onDisposeElem(refElement, () => {\n    if (!tooltip.isDisposed()) {\n      tooltip.close();\n    }\n  });\n  return tooltip;\n}\n\n/**\n * Shows notification with a single button 'Undo' delete.\n */\nexport function reportUndo(\n  doc: GristDoc,\n  messageLabel: string,\n  buttonLabel = 'Undo to restore'\n) {\n  // First create a notification with a button to undo the delete.\n  let notification = reportSuccess(messageLabel, {\n    key: 'undo',\n    actions: [{\n      label: buttonLabel,\n      action: () => {\n        // When user clicks on the button, undo the last action.\n        commands.allCommands.undo.run();\n        // And remove this notification.\n        close();\n      },\n    }]\n  });\n\n  // When we received some actions from the server, cancel this popup,\n  // as the undo might do something else.\n  doc.on('onDocUserAction', close);\n  notification?.onDispose(() => doc.off('onDocUserAction', close));\n\n  function close() {\n    if (notification && !notification?.isDisposed()) {\n      notification.dispose();\n      notification = undefined;\n    }\n  }\n}\n\nexport interface ShowBehavioralPromptOptions {\n  onClose: (dontShowTips: boolean) => void;\n  /** Defaults to false. */\n  hideArrow?: boolean;\n  /** Defaults to false. */\n  hideDontShowTips?: boolean;\n  popupOptions?: IPopupOptions;\n}\n\nexport function showBehavioralPrompt(\n  refElement: Element,\n  title: string,\n  content: DomContents,\n  options: ShowBehavioralPromptOptions\n) {\n  const {onClose, hideArrow = false, hideDontShowTips = false, popupOptions} = options;\n  const arrow = hideArrow ? null : buildArrow();\n  const dontShowTips = observable(false);\n  const tooltip = modalTooltip(refElement,\n    (ctl) => [\n      cssBehavioralPromptModal.cls(''),\n      arrow,\n      cssBehavioralPromptContainer(\n        dom.autoDispose(dontShowTips),\n        testId('behavioral-prompt'),\n        elem => { FocusLayer.create(ctl, {defaultFocusElem: elem, pauseMousetrap: true}); },\n        dom.onKeyDown({\n          Escape: () => ctl.close(),\n          Enter: () => { onClose(dontShowTips.get()); ctl.close(); },\n        }),\n        cssBehavioralPromptHeader(\n          cssHeaderIconAndText(\n            icon('Idea'),\n            cssHeaderText('TIP'),\n          ),\n        ),\n        cssBehavioralPromptBody(\n          cssBehavioralPromptTitle(title, testId('behavioral-prompt-title')),\n          content,\n          cssButtons(\n            dom.style('margin-top', '12px'),\n            dom.style('justify-content', 'space-between'),\n            dom.style('align-items', 'center'),\n            dom('div',\n              cssSkipTipsCheckbox(dontShowTips,\n                cssSkipTipsCheckboxLabel(\"Don't show tips\"),\n                testId('behavioral-prompt-dont-show-tips')\n              ),\n              dom.style('visibility', hideDontShowTips ? 'hidden' : ''),\n            ),\n            cssDismissPromptButton('Got it', testId('behavioral-prompt-dismiss'),\n              dom.on('click', () => { onClose(dontShowTips.get()); ctl.close(); })\n            ),\n          ),\n        ),\n      ),\n    ],\n    merge(popupOptions, {\n      modifiers: {\n        ...(arrow ? {arrow: {element: arrow}}: {}),\n        offset: {\n          offset: '0,12',\n        },\n        preventOverflow: {\n          boundariesElement: 'window',\n          padding: 32,\n        },\n      }\n    })\n  );\n  dom.onDisposeElem(refElement, () => {\n    if (!tooltip.isDisposed()) {\n      tooltip.close();\n    }\n  });\n  return tooltip;\n}\n\nfunction buildArrow() {\n  return cssArrowContainer(\n    svg('svg',\n      {style: 'width: 13px; height: 18px;'},\n      svg('path', {'d': 'M 0 0 h 13 v 18 Z'}),\n    ),\n  );\n}\n\nfunction sideSelectorChunk(side: 'top'|'bottom'|'left'|'right') {\n  return `.${cssModalTooltip.className}[x-placement^=${side}]`;\n}\n\nfunction fadeInFromSide(side: 'top'|'bottom'|'left'|'right') {\n  let startPosition: string;\n  switch(side) {\n    case 'top': {\n      startPosition = '0px -25px';\n      break;\n    }\n    case 'bottom': {\n      startPosition = '0px 25px';\n      break;\n    }\n    case'left': {\n      startPosition = '-25px 0px';\n      break;\n    }\n    case 'right': {\n      startPosition = '25px 0px';\n      break;\n    }\n  }\n  return keyframes(`\n  from {translate: ${startPosition}; opacity: 0;}\n  to {translate: 0px 0px; opacity: 1;}\n  `);\n}\n\nconst HEADER_HEIGHT_PX = 30;\n\nconst cssArrowContainer = styled('div', `\n  position: absolute;\n\n  & path {\n    stroke: ${theme.popupBg};\n    stroke-width: 2px;\n    fill: ${theme.popupBg};\n  }\n\n  ${sideSelectorChunk('bottom')} > & path {\n    stroke: ${theme.controlPrimaryBg};\n    fill: ${theme.controlPrimaryBg};\n  }\n\n  ${sideSelectorChunk('top')} > & {\n    bottom: -17px;\n  }\n\n  ${sideSelectorChunk('bottom')} > & {\n    top: -14px;\n  }\n\n  ${sideSelectorChunk('right')} > & {\n    left: -12px;\n    margin: ${HEADER_HEIGHT_PX}px 0px ${HEADER_HEIGHT_PX}px 0px;\n  }\n\n  ${sideSelectorChunk('left')} > & {\n    right: -12px;\n    margin: ${HEADER_HEIGHT_PX}px 0px ${HEADER_HEIGHT_PX}px 0px;\n  }\n\n  ${sideSelectorChunk('top')} svg {\n    transform: rotate(-90deg);\n  }\n\n  ${sideSelectorChunk('bottom')} svg {\n    transform: rotate(90deg);\n  }\n\n  ${sideSelectorChunk('left')} svg {\n    transform: scalex(-1);\n  }\n`);\n\nconst cssTheme = styled('div', `\n  color: ${theme.text};\n`);\n\nconst cssButtons = styled('div', `\n  display: flex;\n  gap: 6px;\n`);\n\nconst cssContainer = styled(cssTheme, `\n  max-width: 270px;\n`);\n\nconst cssWideContainer = styled(cssTheme, `\n  max-width: 340px;\n`);\n\nconst cssFadeInFromTop = fadeInFromSide('top');\n\nconst cssFadeInFromBottom = fadeInFromSide('bottom');\n\nconst cssFadeInFromLeft = fadeInFromSide('left');\n\nconst cssFadeInFromRight = fadeInFromSide('right');\n\nconst cssBehavioralPromptModal = styled('div', `\n  margin: 0px;\n  padding: 0px;\n  width: 400px;\n  border-radius: 4px;\n\n  animation-duration: 0.4s;\n  position: absolute;\n\n  &[x-placement^=top] {\n    animation-name: ${cssFadeInFromTop};\n  }\n\n  &[x-placement^=bottom] {\n    animation-name: ${cssFadeInFromBottom};\n  }\n\n  &[x-placement^=left] {\n    animation-name: ${cssFadeInFromLeft};\n  }\n\n  &[x-placement^=right] {\n    animation-name: ${cssFadeInFromRight};\n  }\n\n  @media ${mediaXSmall} {\n    & {\n      width: 320px;\n    }\n  }\n`);\n\nconst cssBehavioralPromptContainer = styled(cssTheme, `\n  line-height: 18px;\n`);\n\nconst cssBehavioralPromptHeader = styled('div', `\n  display: flex;\n  justify-content: center;\n  background-color: ${theme.controlPrimaryBg};\n  color: ${theme.controlPrimaryFg};\n  --icon-color: ${theme.controlPrimaryFg};\n  border-radius: 4px 4px 0px 0px;\n  line-height: ${HEADER_HEIGHT_PX}px;\n`);\n\nconst cssBehavioralPromptBody = styled('div', `\n  padding: 16px;\n`);\n\nconst cssHeaderIconAndText = styled('div', `\n  display: flex;\n  align-items: center;\n  column-gap: 8px;\n`);\n\nconst cssHeaderText = styled('div', `\n  font-weight: 600;\n`);\n\nconst cssDismissPromptButton = styled(bigPrimaryButton, `\n  margin-right: 8px;\n`);\n\nconst cssBehavioralPromptTitle = styled('div', `\n  font-size: ${vars.xxxlargeFontSize};\n  font-weight: ${vars.headerControlTextWeight};\n  color: ${theme.text};\n  margin: 0 0 16px 0;\n  line-height: 32px;\n`);\n\nconst cssSkipTipsCheckbox = styled(labeledSquareCheckbox, `\n  line-height: normal;\n`);\n\n\nconst cssSkipTipsCheckboxLabel = styled('span', `\n  color: ${theme.lightText};\n`);\n","import {safeJsonParse} from 'app/common/gutil';\nimport {Observable} from 'grainjs';\nimport {getSessionStorage, getStorage} from 'app/client/lib/storage';\n\nfunction getStorageBoolObs(store: Storage, key: string, defValue: boolean) {\n  const storedNegation = defValue ? 'false' : 'true';\n  const obs = Observable.create(null, store.getItem(key) === storedNegation ? !defValue : defValue);\n  obs.addListener((val) => val === defValue ? store.removeItem(key) : store.setItem(key, storedNegation));\n  return obs;\n}\n\n/**\n * Helper to create a boolean observable whose state is stored in localStorage.\n *\n * Optionally, a default value of true will make the observable start off as true. Note that the\n * same default value should be used for an observable every time it's created.\n */\nexport function localStorageBoolObs(key: string, defValue = false): Observable<boolean> {\n  return getStorageBoolObs(getStorage(), key, defValue);\n}\n\n/**\n * Similar to `localStorageBoolObs`, but always uses sessionStorage (or an in-memory equivalent).\n */\nexport function sessionStorageBoolObs(key: string, defValue = false): Observable<boolean> {\n  return getStorageBoolObs(getSessionStorage(), key, defValue);\n}\n\nfunction getStorageObs(store: Storage, key: string, defaultValue?: string) {\n  const obs = Observable.create<string|null>(null, store.getItem(key) ?? defaultValue ?? null);\n  obs.addListener((val) => (val === null) ? store.removeItem(key) : store.setItem(key, val));\n  return obs;\n}\n\n/**\n * Helper to create a string observable whose state is stored in localStorage.\n */\nexport function localStorageObs(key: string, defaultValue?: string): Observable<string|null> {\n  return getStorageObs(getStorage(), key, defaultValue);\n}\n\n/**\n * Similar to `localStorageObs`, but always uses sessionStorage (or an in-memory equivalent).\n */\nexport function sessionStorageObs(key: string, defaultValue?: string): Observable<string|null> {\n  return getStorageObs(getSessionStorage(), key, defaultValue);\n}\n\n/**\n * Helper to create a JSON observable whose state is stored in localStorage.\n */\n export function localStorageJsonObs<T>(key: string, defaultValue: T): Observable<T> {\n  const store = getStorage();\n  const currentValue = safeJsonParse(store.getItem(key) || '', defaultValue ?? null);\n  const obs = Observable.create<T>(null, currentValue);\n  obs.addListener((val) => (val === null) ? store.removeItem(key) : store.setItem(key, JSON.stringify(val ?? null)));\n  return obs;\n}\n","import {localStorageObs} from 'app/client/lib/localStorageObs';\nimport {AppModel} from 'app/client/models/AppModel';\nimport {UserOrgPrefs, UserPrefs} from 'app/common/Prefs';\nimport {Computed, Observable} from 'grainjs';\nimport {CheckerT} from 'ts-interface-checker';\n\ninterface PrefsTypes {\n  userOrgPrefs: UserOrgPrefs;\n  userPrefs: UserPrefs;\n}\n\nfunction makePrefFunctions<P extends keyof PrefsTypes>(prefsTypeName: P) {\n  type PrefsType = PrefsTypes[P];\n\n  /**\n   * Creates an observable that returns a PrefsType, and which stores changes when set.\n   *\n   * For anon user, the prefs live in localStorage. Note that the observable isn't actually watching\n   * for changes on the server, it will only change when set.\n   */\n  function getPrefsObs(appModel: AppModel): Observable<PrefsType> {\n    if (appModel.currentValidUser) {\n      let prefs: PrefsType | undefined;\n      if (prefsTypeName === 'userPrefs') {\n        prefs = appModel.currentValidUser.prefs;\n      } else {\n        prefs = appModel.currentOrg?.[prefsTypeName];\n      }\n      const prefsObs = Observable.create<PrefsType>(null, prefs ?? {});\n      return Computed.create(null, (use) => use(prefsObs))\n        .onWrite(newPrefs => {\n          prefsObs.set(newPrefs);\n          return appModel.api.updateOrg('current', {[prefsTypeName]: newPrefs});\n        });\n    } else {\n      const userId = appModel.currentUser?.id || 0;\n      const jsonPrefsObs = localStorageObs(`${prefsTypeName}:u=${userId}`);\n      return Computed.create(null, jsonPrefsObs, (use, p) => (p && JSON.parse(p) || {}) as PrefsType)\n        .onWrite(newPrefs => {\n          jsonPrefsObs.set(JSON.stringify(newPrefs));\n        });\n    }\n  }\n\n  /**\n   * Creates an observable that returns a particular preference value from `prefsObs`, and which\n   * stores it when set.\n   */\n  function getPrefObs<Name extends keyof PrefsType>(\n    prefsObs: Observable<PrefsType>,\n    prefName: Name,\n    options: {\n      defaultValue?: Exclude<PrefsType[Name], undefined>;\n      checker?: CheckerT<PrefsType[Name]>;\n    } = {}\n  ): Observable<PrefsType[Name] | undefined> {\n    const {defaultValue, checker} = options;\n    return Computed.create(null, (use) => {\n      const prefs = use(prefsObs);\n      if (!(prefName in prefs)) { return defaultValue; }\n\n      const value = prefs[prefName];\n      if (checker) {\n        try {\n          checker.check(value);\n        } catch (e) {\n          console.error(`getPrefObs: preference ${prefName.toString()} has value of invalid type`, e);\n          return defaultValue;\n        }\n      }\n\n      return value;\n    }).onWrite(value => prefsObs.set({...prefsObs.get(), [prefName]: value}));\n  }\n\n  return {getPrefsObs, getPrefObs};\n}\n\n// Functions actually exported are:\n// - getUserOrgPrefsObs(appModel): Observable<UserOrgPrefs>\n// - getUserOrgPrefObs(userOrgPrefsObs, prefName): Observable<PrefType[prefName]>\n// - getUserPrefsObs(appModel): Observable<UserPrefs>\n// - getUserPrefObs(userPrefsObs, prefName): Observable<PrefType[prefName]>\n\nexport const {getPrefsObs: getUserOrgPrefsObs, getPrefObs: getUserOrgPrefObs} = makePrefFunctions('userOrgPrefs');\nexport const {getPrefsObs: getUserPrefsObs, getPrefObs: getUserPrefObs} = makePrefFunctions('userPrefs');\n\n\n// For preferences that store a list of items (such as seen docTours), this helper updates the\n// preference to add itemId to it (e.g. to avoid auto-starting the docTour again in the future).\n// prefKey is used only to log a more informative warning on error.\nexport function markAsSeen<T>(seenIdsObs: Observable<T[] | undefined>, itemId: T) {\n  const seenIds = seenIdsObs.get() || [];\n  try {\n    if (!seenIds.includes(itemId)) {\n      const seen = new Set(seenIds);\n      seen.add(itemId);\n      seenIdsObs.set([...seen].sort());\n    }\n  } catch (e) {\n    // If we fail to save this preference, it's probably not worth alerting the user about,\n    // so just log to console.\n    // tslint:disable-next-line:no-console\n    console.warn(\"Failed to save preference in markAsSeen\", e);\n  }\n}\n\nexport function markAsUnSeen<T>(seenIdsObs: Observable<T[] | undefined>, itemId: T) {\n  const seenIds = seenIdsObs.get() || [];\n  try {\n    if (seenIds.includes(itemId)) {\n      const seen = new Set(seenIds);\n      seen.delete(itemId);\n      seenIdsObs.set([...seen].sort());\n    }\n  } catch (e) {\n    // tslint:disable-next-line:no-console\n    console.warn(\"Failed to save preference in markAsUnSeen\", e);\n  }\n}\n","import {theme} from 'app/client/ui2018/cssVars';\nimport {styled} from 'grainjs';\n\nexport const ShortcutKeyContent = styled('span', `\n  font-style: normal;\n  font-family: inherit;\n  color: ${theme.shortcutKeyPrimaryFg};\n`);\n\nexport const ShortcutKeyContentStrong = styled(ShortcutKeyContent, `\n  font-weight: 700;\n`);\n\nexport const ShortcutKey = styled('div', `\n  display: inline-block;\n  padding: 2px 5px;\n  border-radius: 4px;\n  margin: 0px 2px;\n  border: 1px solid ${theme.shortcutKeyBorder};\n  color: ${theme.shortcutKeyFg};\n  background-color: ${theme.shortcutKeyBg};\n  font-family: inherit;\n  font-style: normal;\n  white-space: nowrap;\n`);\n","import {findLinks} from 'app/client/lib/textUtils';\nimport { sameDocumentUrlState, urlState } from 'app/client/models/gristUrlState';\nimport { colors, hideInPrintView, testId, theme } from 'app/client/ui2018/cssVars';\nimport {cssIconBackground, icon} from 'app/client/ui2018/icons';\nimport { CellValue } from 'app/plugin/GristData';\nimport { dom, DomArg, IDomArgs, Observable, styled } from 'grainjs';\n\n/**\n * Styling for a simple <A HREF> link.\n */\n\nexport const cssLink = styled('a', `\n  color: ${theme.link};\n  --icon-color: ${theme.link};\n  text-decoration: none;\n  &:hover, &:focus {\n    color: ${theme.linkHover};\n    --icon-color: ${theme.linkHover};\n    text-decoration: underline;\n  }\n`);\n\nexport function gristLink(href: string|Observable<string>, ...args: IDomArgs<HTMLElement>) {\n  return dom(\"a\",\n    dom.attr(\"href\", href),\n    dom.attr(\"target\", \"_blank\"),\n    dom.on(\"click\", ev => onClickHyperLink(ev, typeof href === 'string' ? href : href.get())),\n    // stop propagation to prevent the grist custom context menu to show up and let the default one\n    // to show up instead.\n    dom.on(\"contextmenu\", ev => ev.stopPropagation()),\n    // As per Google and Mozilla recommendations to prevent opened links\n    // from running on the same process as Grist:\n    // https://developers.google.com/web/tools/lighthouse/audits/noopener\n    dom.attr(\"rel\", \"noopener noreferrer\"),\n    hideInPrintView(),\n    args\n  );\n}\n\n/**\n * If possible (i.e. if `url` points to somewhere in the current document)\n * use pushUrl to navigate without reloading or opening a new tab\n */\nexport async function onClickHyperLink(ev: MouseEvent, url: CellValue) {\n  // Only override plain-vanilla clicks.\n  if (ev.shiftKey || ev.metaKey || ev.ctrlKey || ev.altKey) { return; }\n\n  const newUrlState = sameDocumentUrlState(url);\n  if (!newUrlState) { return; }\n\n  ev.preventDefault();\n  await urlState().pushUrl(newUrlState);\n}\n\n/**\n * Generates dom contents out of a text with clickable links.\n */\nexport function makeLinks(text: string) {\n  try {\n    const domElements: DomArg[] = [];\n    for (const {value, isLink} of findLinks(text)) {\n      if (isLink) {\n        // Wrap link with a span to provide hover on and to override wrapping.\n        domElements.push(cssMaybeWrap(\n          gristLink(value,\n            cssIconBackground(\n              icon(\"FieldLink\", testId('tb-link-icon')),\n              dom.cls(cssHoverInText.className),\n            ),\n          ),\n          linkColor(value),\n          testId(\"text-link\")\n        ));\n      } else {\n        domElements.push(value);\n      }\n    }\n    return domElements;\n  } catch(ex) {\n    // In case when something went wrong, simply log and return original text, as showing\n    // links is not that important.\n    console.warn(\"makeLinks failed\", ex);\n    return text;\n  }\n}\n\n// For links we want to break all the parts, not only words.\nconst cssMaybeWrap = styled('span', `\n  white-space: inherit;\n  .text_wrapping & {\n    word-break: break-all;\n    white-space: pre-wrap;\n  }\n`);\n\n// A gentle transition effect on hover in, and the same effect on hover out with a little delay.\nexport const cssHoverIn = (parentClass: string) => styled('span', `\n  --icon-color: var(--grist-actual-cell-color, ${colors.lightGreen});\n  margin: -1px 2px 2px 0;\n  border-radius: 3px;\n  transition-property: background-color;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 150ms;\n  transition-delay: 90ms;\n  .${parentClass}:hover & {\n    --icon-background: ${colors.lightGreen};\n    --icon-color: white;\n    transition-duration: 80ms;\n    transition-delay: 0ms;\n  }\n`);\n\nconst cssHoverInText = cssHoverIn(cssMaybeWrap.className);\n\nconst linkColor = styled('span', `\n  color: var(--grist-actual-cell-color, ${colors.lightGreen});;\n`);\n","import * as commands from 'app/client/components/commands';\nimport {makeT} from 'app/client/lib/localization';\nimport {ShortcutKey, ShortcutKeyContent} from 'app/client/ui/ShortcutKey';\nimport {icon} from 'app/client/ui2018/icons';\nimport {cssLink} from 'app/client/ui2018/links';\nimport {commonUrls, GristDeploymentType} from 'app/common/gristUrls';\nimport {BehavioralPrompt} from 'app/common/Prefs';\nimport {dom, DomContents, DomElementArg, styled} from 'grainjs';\n\nconst t = makeT('GristTooltips');\n\nconst cssTooltipContent = styled('div', `\n  display: flex;\n  flex-direction: column;\n  row-gap: 8px;\n`);\n\nconst cssBoldText = styled('span', `\n  font-weight: 600;\n`);\n\nconst cssItalicizedText = styled('span', `\n  font-style: italic;\n`);\n\nconst cssIcon = styled(icon, `\n  height: 18px;\n  width: 18px;\n`);\n\nexport type Tooltip =\n  | 'dataSize'\n  | 'setTriggerFormula'\n  | 'selectBy'\n  | 'workOnACopy'\n  | 'openAccessRules'\n  | 'addRowConditionalStyle'\n  | 'addColumnConditionalStyle';\n\nexport type TooltipContentFunc = (...domArgs: DomElementArg[]) => DomContents;\n\nexport const GristTooltips: Record<Tooltip, TooltipContentFunc> = {\n  dataSize: (...args: DomElementArg[]) => cssTooltipContent(\n    dom('div', t('The total size of all data in this document, excluding attachments.')),\n    dom('div', t('Updates every 5 minutes.')),\n    ...args,\n  ),\n  setTriggerFormula: (...args: DomElementArg[]) => cssTooltipContent(\n    dom('div',\n      t('Formulas that trigger in certain cases, and store the calculated value as data.')\n    ),\n    dom('div',\n      t('Useful for storing the timestamp or author of a new record, data cleaning, and more.')\n    ),\n    dom('div',\n      cssLink({href: commonUrls.helpTriggerFormulas, target: '_blank'}, t('Learn more.')),\n    ),\n    ...args,\n  ),\n  selectBy: (...args: DomElementArg[]) => cssTooltipContent(\n    dom('div', t('Link your new widget to an existing widget on this page.')),\n    dom('div',\n      cssLink({href: commonUrls.helpLinkingWidgets, target: '_blank'}, t('Learn more.')),\n    ),\n    ...args,\n  ),\n  workOnACopy: (...args: DomElementArg[]) => cssTooltipContent(\n    dom('div',\n      t('Try out changes in a copy, then decide whether to replace the original with your edits.')\n    ),\n    dom('div',\n      cssLink({href: commonUrls.helpTryingOutChanges, target: '_blank'}, 'Learn more.'),\n    ),\n    ...args,\n  ),\n  openAccessRules: (...args: DomElementArg[]) => cssTooltipContent(\n    dom('div',\n      t('Access rules give you the power to create nuanced rules to determine who can \\\nsee or edit which parts of your document.')\n    ),\n    dom('div',\n      cssLink({href: commonUrls.helpAccessRules, target: '_blank'}, t('Learn more.')),\n    ),\n    ...args,\n  ),\n  addRowConditionalStyle: (...args: DomElementArg[]) => cssTooltipContent(\n    dom('div', t('Apply conditional formatting to rows based on formulas.')),\n    dom('div',\n      cssLink({href: commonUrls.helpConditionalFormatting, target: '_blank'}, t('Learn more.')),\n    ),\n    ...args,\n  ),\n  addColumnConditionalStyle: (...args: DomElementArg[]) => cssTooltipContent(\n    dom('div', t('Apply conditional formatting to cells in this column when formula conditions are met.')),\n    dom('div', t('Click on Open row styles to apply conditional formatting to rows.')),\n    dom('div',\n      cssLink({href: commonUrls.helpConditionalFormatting, target: '_blank'}, t('Learn more.')),\n    ),\n    ...args,\n  ),\n};\n\nexport interface BehavioralPromptContent {\n  title: () => string;\n  content: (...domArgs: DomElementArg[]) => DomContents;\n  deploymentTypes: GristDeploymentType[] | '*';\n}\n\nexport const GristBehavioralPrompts: Record<BehavioralPrompt, BehavioralPromptContent> = {\n  referenceColumns: {\n    title: () => t('Reference Columns'),\n    content: (...args: DomElementArg[]) => cssTooltipContent(\n      dom('div', t('Reference columns are the key to {{relational}} data in Grist.', {\n        relational: cssBoldText(t('relational'))\n      })),\n      dom('div', t('They allow for one record to point (or refer) to another.')),\n      dom('div',\n        cssLink({href: commonUrls.helpColRefs, target: '_blank'}, t('Learn more.')),\n      ),\n      ...args,\n    ),\n    deploymentTypes: ['saas'],\n  },\n  referenceColumnsConfig: {\n    title: () => t('Reference Columns'),\n    content: (...args: DomElementArg[]) => cssTooltipContent(\n      dom('div', t('Select the table to link to.')),\n      dom('div', t('Cells in a reference column always identify an {{entire}} \\\nrecord in that table, but you may select which column from that record to show.', {\n          entire: cssItalicizedText(t('entire'))\n        })),\n      dom('div',\n        cssLink({href: commonUrls.helpUnderstandingReferenceColumns, target: '_blank'}, t('Learn more.')),\n      ),\n      ...args,\n    ),\n    deploymentTypes: ['saas'],\n  },\n  rawDataPage: {\n    title: () => t('Raw Data page'),\n    content: (...args: DomElementArg[]) => cssTooltipContent(\n      dom('div', t('The Raw Data page lists all data tables in your document, \\\nincluding summary tables and tables not included in page layouts.')),\n      dom('div', cssLink({href: commonUrls.helpRawData, target: '_blank'}, t('Learn more.'))),\n      ...args,\n    ),\n    deploymentTypes: ['saas'],\n  },\n  accessRules: {\n    title: () => t('Access Rules'),\n    content: (...args: DomElementArg[]) => cssTooltipContent(\n      dom('div', t('Access rules give you the power to create nuanced rules \\\nto determine who can see or edit which parts of your document.')),\n      dom('div', cssLink({href: commonUrls.helpAccessRules, target: '_blank'}, t('Learn more.'))),\n      ...args,\n    ),\n    deploymentTypes: ['saas'],\n  },\n  filterButtons: {\n    title: () => t('Pinning Filters'),\n    content: (...args: DomElementArg[]) => cssTooltipContent(\n      dom('div', t('Pinned filters are displayed as buttons above the widget.')),\n      dom('div', t('Unpin to hide the the button while keeping the filter.')),\n      dom('div', cssLink({href: commonUrls.helpFilterButtons, target: '_blank'}, t('Learn more.'))),\n      ...args,\n    ),\n    deploymentTypes: ['saas'],\n  },\n  nestedFiltering: {\n    title: () => t('Nested Filtering'),\n    content: (...args: DomElementArg[]) => cssTooltipContent(\n      dom('div', t('You can filter by more than one column.')),\n      dom('div', t('Only those rows will appear which match all of the filters.')),\n      ...args,\n    ),\n    deploymentTypes: ['saas'],\n  },\n  pageWidgetPicker: {\n    title: () => t('Selecting Data'),\n    content: (...args: DomElementArg[]) => cssTooltipContent(\n      dom('div', t('Select the table containing the data to show.')),\n      dom('div', t('Use the  icon to create summary (or pivot) tables, for totals or subtotals.')),\n      ...args,\n    ),\n    deploymentTypes: ['saas'],\n  },\n  pageWidgetPickerSelectBy: {\n    title: () => t('Linking Widgets'),\n    content: (...args: DomElementArg[]) => cssTooltipContent(\n      dom('div', t('Link your new widget to an existing widget on this page.')),\n      dom('div', t('This is the secret to Grist\\'s dynamic and productive layouts.')),\n      dom('div', cssLink({href: commonUrls.helpLinkingWidgets, target: '_blank'}, t('Learn more.'))),\n      ...args,\n    ),\n    deploymentTypes: ['saas'],\n  },\n  editCardLayout: {\n    title: () => t('Editing Card Layout'),\n    content: (...args: DomElementArg[]) => cssTooltipContent(\n      dom('div', t('Rearrange the fields in your card by dragging and resizing cells.')),\n      dom('div', t('Clicking {{EyeHideIcon}} in each cell hides the field from this view without deleting it.', {\n        EyeHideIcon: cssIcon('EyeHide')\n      })),\n      ...args,\n    ),\n    deploymentTypes: ['saas'],\n  },\n  addNew: {\n    title: () => t('Add New'),\n    content: (...args: DomElementArg[]) => cssTooltipContent(\n      dom('div', t('Click the Add New button to create new documents or workspaces, or import data.')),\n      ...args,\n    ),\n    deploymentTypes: ['saas'],\n  },\n  rickRow: {\n    title: () => t('Anchor Links'),\n    content: (...args: DomElementArg[]) => cssTooltipContent(\n      dom('div',\n        t('To make an anchor link that takes the user to a specific cell, click on a row and press {{shortcut}}.',\n          {\n            shortcut: ShortcutKey(ShortcutKeyContent(commands.allCommands.copyLink.humanKeys[0])),\n          }\n        ),\n      ),\n      ...args,\n    ),\n    deploymentTypes: '*',\n  },\n  customURL: {\n    title: () => t('Custom Widgets'),\n    content: (...args: DomElementArg[]) => cssTooltipContent(\n      dom('div',\n        t(\n          'You can choose one of our pre-made widgets or embed your own by providing its full URL.'\n        ),\n      ),\n      dom('div', cssLink({href: commonUrls.helpCustomWidgets, target: '_blank'}, t('Learn more.'))),\n      ...args,\n    ),\n    deploymentTypes: ['saas'],\n  },\n};\n","import {StringUnion} from 'app/common/StringUnion';\nimport {ThemePrefs} from 'app/common/ThemePrefs';\n\nexport const SortPref = StringUnion(\"name\", \"date\");\nexport type SortPref = typeof SortPref.type;\n\nexport const ViewPref = StringUnion(\"list\", \"icons\");\nexport type ViewPref = typeof ViewPref.type;\n\n// A collection of preferences related to a user or org (or combination).\nexport interface Prefs {\n  // A dummy field used only in tests.\n  placeholder?: string;\n}\n\n// A collection of preferences related to a user.\nexport interface UserPrefs extends Prefs {\n  // Whether to ask the user to fill out a form about their use-case, on opening the DocMenu page.\n  // Set to true on first login, then reset when the form is closed, so that it only shows once.\n  showNewUserQuestions?: boolean;\n  // Whether to record a new sign-up event via Google Tag Manager. Set to true on first login, then\n  // reset on first page load (after the event is sent), so that it's only recorded once.\n  recordSignUpEvent?: boolean;\n  // Theme-related preferences.\n  theme?: ThemePrefs;\n  // List of deprecated warnings user have seen. Kept for historical reasons as some users have them in their prefs.\n  seenDeprecatedWarnings?: DeprecationWarning[];\n  // List of dismissedPopups user have seen.\n  dismissedPopups?: DismissedPopup[];\n  // Behavioral prompt preferences.\n  behavioralPrompts?: BehavioralPromptPrefs;\n  // Welcome popups a user has dismissed.\n  dismissedWelcomePopups?: DismissedReminder[];\n  // Localization support.\n  locale?: string;\n}\n\n// A collection of preferences related to a combination of user and org.\nexport interface UserOrgPrefs extends Prefs {\n  docMenuSort?: SortPref;\n  docMenuView?: ViewPref;\n\n  // List of example docs that the user has seen and dismissed the welcome card for.\n  // The numbers are the `id` from IExampleInfo in app/client/ui/ExampleInfo.\n  // By living in UserOrgPrefs, this applies only to the examples-containing org.\n  seenExamples?: number[];\n\n  // Whether the user should see the onboarding tour of Grist. False by default, since existing\n  // users should not see it. New users get this set to true when the user is created. This\n  // applies to the personal org only; the tour is currently only shown there.\n  showGristTour?: boolean;\n\n  // List of document IDs where the user has seen and dismissed the document tour.\n  seenDocTours?: string[];\n}\n\nexport type OrgPrefs = Prefs;\n\n/**\n * List of all deprecated warnings that user can see and dismiss.\n * All of them are marked as seen for new users in FlexServer.ts (welcomeNewUser handler).\n * For now we use then to mark which keyboard shortcuts are deprecated, so those keys\n * are also used in commandList.js.\n *\n * Source code for this feature was deprecated itself :). Here is a link to the latest revision:\n * https://github.com/gristlabs/grist-core/blob/ec20e7fb68786e10979f238c16c432c50a9a7464/app/client/components/DeprecatedCommands.ts\n */\nexport const DeprecationWarning = StringUnion(\n  // Those are not checked anymore. They are kept here for historical reasons (as some users have them marked as seen\n  // so they should not be reused).\n  // 'deprecatedInsertRowBefore',\n  // 'deprecatedInsertRecordAfter',\n  // 'deprecatedDeleteRecords',\n);\nexport type DeprecationWarning = typeof DeprecationWarning.type;\n\nexport const BehavioralPrompt = StringUnion(\n  'referenceColumns',\n  'referenceColumnsConfig',\n  'rawDataPage',\n  'accessRules',\n  'filterButtons',\n  'nestedFiltering',\n  'pageWidgetPicker',\n  'pageWidgetPickerSelectBy',\n  'editCardLayout',\n  'addNew',\n  'rickRow',\n  'customURL',\n);\nexport type BehavioralPrompt = typeof BehavioralPrompt.type;\n\nexport interface BehavioralPromptPrefs {\n  /** Defaults to false. */\n  dontShowTips: boolean;\n  /** List of tips that have been dismissed. */\n  dismissedTips: BehavioralPrompt[];\n}\n\n/**\n * List of all popups that user can see and dismiss\n */\nexport const DismissedPopup = StringUnion(\n  'deleteRecords', // confirmation for deleting records keyboard shortcut,\n  'deleteFields',  // confirmation for deleting columns keyboard shortcut,\n  'tutorialFirstCard', // first card of the tutorial,\n  'formulaHelpInfo', // formula help info shown in the popup editor,\n  'formulaAssistantInfo', // formula assistant info shown in the popup editor,\n  'supportGrist', // nudge to opt in to telemetry,\n);\nexport type DismissedPopup = typeof DismissedPopup.type;\n\nexport const WelcomePopup = StringUnion(\n  'coachingCall',\n);\nexport type WelcomePopup = typeof WelcomePopup.type;\n\nexport interface DismissedReminder {\n  /** The name of the popup. */\n  id: WelcomePopup;\n  /** Unix timestamp in ms when the popup was last dismissed. */\n  lastDismissedAt: number;\n  /** If non-null, Unix timestamp in ms when the popup will reappear. */\n  nextAppearanceAt: number | null;\n  /**  The number of times this popup has been dismissed. */\n  timesDismissed: number;\n}\n","import {showBehavioralPrompt} from 'app/client/components/modals';\nimport {AppModel} from 'app/client/models/AppModel';\nimport {getUserPrefObs} from 'app/client/models/UserPrefs';\nimport {GristBehavioralPrompts} from 'app/client/ui/GristTooltips';\nimport {isNarrowScreen} from 'app/client/ui2018/cssVars';\nimport {BehavioralPrompt, BehavioralPromptPrefs} from 'app/common/Prefs';\nimport {getGristConfig} from 'app/common/urlUtils';\nimport {Computed, Disposable, dom, Observable} from 'grainjs';\nimport {IPopupOptions} from 'popweasel';\n\nexport interface AttachOptions {\n  /** Defaults to false. */\n  forceShow?: boolean;\n  /** Defaults to false. */\n  hideArrow?: boolean;\n  /** Defaults to false. */\n  hideDontShowTips?: boolean;\n  /** Defaults to true. */\n  markAsSeen?: boolean;\n  /** Defaults to false. */\n  showOnMobile?: boolean;\n  popupOptions?: IPopupOptions;\n  onDispose?(): void;\n}\n\ninterface QueuedTip {\n  prompt: BehavioralPrompt;\n  refElement: Element;\n  options: AttachOptions;\n}\n\n/**\n * Manages tips that are shown the first time a user performs some action.\n *\n * Tips are shown in the order that they are attached.\n */\nexport class BehavioralPromptsManager extends Disposable {\n  private _isDisabled: boolean = false;\n\n  private readonly _prefs = getUserPrefObs(this._appModel.userPrefsObs, 'behavioralPrompts',\n    { defaultValue: { dontShowTips: false, dismissedTips: [] } }) as Observable<BehavioralPromptPrefs>;\n\n  private _dismissedTips: Computed<Set<BehavioralPrompt>> = Computed.create(this, use => {\n    const {dismissedTips} = use(this._prefs);\n    return new Set(dismissedTips.filter(BehavioralPrompt.guard));\n  });\n\n  private _queuedTips: QueuedTip[] = [];\n\n  constructor(private _appModel: AppModel) {\n    super();\n  }\n\n  public showTip(refElement: Element, prompt: BehavioralPrompt, options: AttachOptions = {}) {\n    this._queueTip(refElement, prompt, options);\n  }\n\n  public attachTip(prompt: BehavioralPrompt, options: AttachOptions = {}) {\n    return (element: Element) => {\n      this._queueTip(element, prompt, options);\n    };\n  }\n\n  public hasSeenTip(prompt: BehavioralPrompt) {\n    return this._dismissedTips.get().has(prompt);\n  }\n\n  public shouldShowTips() {\n    return !this._prefs.get().dontShowTips;\n  }\n\n  public enable() {\n    this._isDisabled = false;\n  }\n\n  public disable() {\n    this._isDisabled = true;\n  }\n\n  public reset() {\n    this._prefs.set({...this._prefs.get(), dismissedTips: [], dontShowTips: false});\n    this.enable();\n  }\n\n  private _queueTip(refElement: Element, prompt: BehavioralPrompt, options: AttachOptions) {\n    if (!this._shouldQueueTip(prompt, options)) { return; }\n\n    this._queuedTips.push({prompt, refElement, options});\n    if (this._queuedTips.length > 1) {\n      // If we're already showing a tip, wait for that one to be dismissed, which will\n      // cause the next one in the queue to be shown.\n      return;\n    }\n\n    this._showTip(refElement, prompt, options);\n  }\n\n  private _showTip(refElement: Element, prompt: BehavioralPrompt, options: AttachOptions) {\n    const close = () => {\n      if (!ctl.isDisposed()) {\n        ctl.close();\n      }\n    };\n\n    const {hideArrow, hideDontShowTips, markAsSeen = true, onDispose, popupOptions} = options;\n    const {title, content} = GristBehavioralPrompts[prompt];\n    const ctl = showBehavioralPrompt(refElement, title(), content(), {\n      onClose: (dontShowTips) => {\n        if (dontShowTips) { this._dontShowTips(); }\n        if (markAsSeen) { this._markAsSeen(prompt); }\n      },\n      hideArrow,\n      popupOptions,\n      hideDontShowTips,\n    });\n\n    ctl.onDispose(() => {\n      onDispose?.();\n      this._showNextQueuedTip();\n    });\n    dom.onElem(refElement, 'click', () => close());\n    dom.onDisposeElem(refElement, () => close());\n  }\n\n  private _showNextQueuedTip() {\n    this._queuedTips.shift();\n    if (this._queuedTips.length !== 0) {\n      const [nextTip] = this._queuedTips;\n      const {refElement, prompt, options} = nextTip;\n      this._showTip(refElement, prompt, options);\n    }\n  }\n\n  private _markAsSeen(prompt: BehavioralPrompt) {\n    const {dismissedTips} = this._prefs.get();\n    const newDismissedTips = new Set(dismissedTips);\n    newDismissedTips.add(prompt);\n    this._prefs.set({...this._prefs.get(), dismissedTips: [...newDismissedTips]});\n  }\n\n  private _dontShowTips() {\n    this._prefs.set({...this._prefs.get(), dontShowTips: true});\n    this._queuedTips = [];\n  }\n\n  private _shouldQueueTip(prompt: BehavioralPrompt, options: AttachOptions) {\n    if (\n      this._isDisabled ||\n      (isNarrowScreen() && !options.showOnMobile) ||\n      (this._prefs.get().dontShowTips && !options.forceShow) ||\n      this.hasSeenTip(prompt)\n    ) {\n      return false;\n    }\n\n    const {deploymentType} = getGristConfig();\n    const {deploymentTypes} = GristBehavioralPrompts[prompt];\n    if (\n      deploymentTypes !== '*' &&\n      (!deploymentType || !deploymentTypes.includes(deploymentType))\n    ) {\n      return false;\n    }\n\n    return true;\n  }\n}\n","/**\n * The ConnectStateManager helper class helps maintain the connection state. A disconnect goes\n * through multiple stages, to inform the user of long disconnects while minimizing the disruption\n * for short ones. This class manages these timings, and triggers ConnectState changes.\n */\nimport {Disposable, Observable} from 'grainjs';\n\n// Describes the connection state, which is shown as part of the notifications UI.\n// See https://grist.quip.com/X92IAHZV3uoo/Notifications\nexport enum ConnectState { Connected, JustDisconnected, RecentlyDisconnected, ReallyDisconnected }\n\nexport class ConnectStateManager extends Disposable {\n  // On disconnect, ConnectState changes to JustDisconnected. These intervals set how long after\n  // the disconnect ConnectState should change to other values.\n  public static timeToRecentlyDisconnected = 5000;\n  public static timeToReallyDisconnected = 30000;\n\n  public readonly connectState = Observable.create<ConnectState>(this, ConnectState.Connected);\n\n  private _timers: Array<ReturnType<typeof setTimeout>> = [];\n\n  public setConnected(yesNo: boolean) {\n    if (yesNo) {\n      this._timers.forEach((t) => clearTimeout(t));\n      this._timers = [];\n      this._setState(ConnectState.Connected);\n    } else if (this.connectState.get() === ConnectState.Connected) {\n      this._timers = [\n        setTimeout(() => this._setState(ConnectState.RecentlyDisconnected),\n                   ConnectStateManager.timeToRecentlyDisconnected),\n        setTimeout(() => this._setState(ConnectState.ReallyDisconnected),\n                   ConnectStateManager.timeToReallyDisconnected),\n      ];\n      this._setState(ConnectState.JustDisconnected);\n    }\n  }\n\n  private _setState(state: ConnectState) {\n    this.connectState.set(state);\n  }\n}\n","/**\n * InactivityTimer allows to set a function that executes after a certain time of\n * inactivity. Activities can be of two kinds: synchronous or asynchronous. Asynchronous activities,\n * are handle with the `disableUntiFinish` method that takes in a Promise and makes sure that the\n * timer does not start before the promise resolves. Synchronous activities are monitored with the\n * `ping` method which resets the timer if called during inactivity.\n *\n * Timer won't start before any activity happens, but you may simply call ping() after construction\n * to start it. After cb is called, timer is disabled but enabled again if there is more activity.\n *\n * Example usage: InactivityTimer is used internally for implementing the plugins' component\n * deactivation after a certain time of inactivity.\n *\n */\n\nexport class InactivityTimer {\n\n  private _timeout?: NodeJS.Timer | null;\n  private _counter: number = 0;\n  private _enabled: boolean = true;\n\n  constructor(private _callback: () => void, private _delay: number) {}\n\n  // Returns the delay used by InactivityTimer, in ms.\n  public getDelay(): number {\n    return this._delay;\n  }\n\n  // Sets a different delay to use, in ms.\n  public setDelay(delayMs: number): void {\n    this._delay = delayMs;\n    this.ping();\n  }\n\n  /**\n   * Enable the InactivityTimer and schedule the callback.\n   */\n  public enable(): void {\n    this._enabled = true;\n    this.ping();\n  }\n\n  /**\n   * Clears the timeout and prevents the callback from being called until enable() is called.\n   */\n  public disable(): void {\n    this._enabled = false;\n    this._clearTimeout();\n  }\n\n  /**\n   * Returns whether the InactivityTimer is enabled. If not, the callback will not be scheduled.\n   */\n  public isEnabled(): boolean {\n    return this._enabled;\n  }\n\n  /**\n   * Whether the callback is currently scheduled, and would trigger if there is no activity and if\n   * it's not disabled before it triggers.\n   */\n  public isScheduled(): boolean {\n    return Boolean(this._timeout);\n  }\n\n  /**\n   * Resets the timer if called during inactivity.\n   */\n  public ping() {\n    if (!this._counter && this._enabled) {\n      this._setTimeout();\n    }\n  }\n\n  /**\n   * The `disableUntilFinish` method takes in a promise and makes sure the timer won't start before\n   * it resolves. It returns a promise that resolves to the same object.\n   */\n  public async disableUntilFinish<T>(promise: Promise<T>): Promise<T> {\n    this._beginActivity();\n    try {\n      return await promise;\n    } finally {\n      this._endActivity();\n    }\n  }\n\n  private _beginActivity() {\n    this._counter++;\n    this._clearTimeout();\n  }\n\n  private _endActivity() {\n    this._counter = Math.max(this._counter - 1, 0);\n    this.ping();\n  }\n\n  private _clearTimeout() {\n    if (this._timeout) {\n      clearTimeout(this._timeout);\n      this._timeout = null;\n    }\n  }\n\n  private _setTimeout() {\n    this._clearTimeout();\n    this._timeout = setTimeout(() => this._onTimeoutTriggered(), this._delay);\n  }\n\n  private _onTimeoutTriggered() {\n    this._clearTimeout();\n    // _counter is set to 0, even if there's no reason why it should be any thing else.\n    this._counter = 0;\n    this._callback();\n  }\n}\n","/**\n * timeFormat(format, date) formats the passed-in Date object using the format string. The format\n * string may contain the following:\n *    'h': hour (00 - 23)\n *    'm': minute (00 - 59)\n *    's': second (00 - 59)\n *    'd': day of the month (01 - 31)\n *    'n': month (01 - 12)\n *    'y': 4-digit year\n *    'M': milliseconds (000 - 999)\n *    'Y': date as 20140212\n *    'D': date as 2014-02-12\n *    'T': time as 00:51:06\n *    'A': full time and date, as 2014-02-12 00:51:06.123\n * @param {String} format The format string.\n * @param {Date} date The date/time object to format.\n * @returns {String} The formatted date and/or time.\n */\n\nfunction pad(num: number, len: number): string {\n  const s = num.toString();\n  return s.length >= len ? s : \"00000000\".slice(0, len - s.length) + s;\n}\n\ntype FormatHelper = (out: string[], date: Date) => void;\nconst timeFormatKeys: {[spec: string]: FormatHelper} = {\n  h: (out, date) => out.push(pad(date.getHours(), 2)),\n  m: (out, date) => out.push(pad(date.getMinutes(), 2)),\n  s: (out, date) => out.push(pad(date.getSeconds(), 2)),\n  d: (out, date) => out.push(pad(date.getDate(), 2)),\n  n: (out, date) => out.push(pad(date.getMonth() + 1, 2)),\n  y: (out, date) => out.push(\"\" + date.getFullYear()),\n  M: (out, date) => out.push(pad(date.getMilliseconds(), 3)),\n  Y: (out, date) => timeFormatHelper(out, 'ynd', date),\n  D: (out, date) => timeFormatHelper(out, 'y-n-d', date),\n  T: (out, date) => timeFormatHelper(out, 'h:m:s', date),\n  A: (out, date) => timeFormatHelper(out, 'D T.M', date),\n};\n\nfunction timeFormatHelper(out: string[], format: string, date: Date) {\n  for (let i = 0, len = format.length; i < len; i++) {\n    const c = format[i];\n    const helper = timeFormatKeys[c];\n    if (helper) {\n      helper(out, date);\n    } else {\n      out.push(c);\n    }\n  }\n}\n\nexport function timeFormat(format: string, date: Date): string {\n  const out: string[] = [];\n  timeFormatHelper(out, format, date);\n  return out.join(\"\");\n}\n","import * as log from 'app/client/lib/log';\nimport {ConnectState, ConnectStateManager} from 'app/client/models/ConnectState';\nimport {isNarrowScreenObs, testId} from 'app/client/ui2018/cssVars';\nimport {delay} from 'app/common/delay';\nimport {isLongerThan} from 'app/common/gutil';\nimport {InactivityTimer} from 'app/common/InactivityTimer';\nimport {timeFormat} from 'app/common/timeFormat';\nimport {\n  bundleChanges,\n  Computed,\n  Disposable,\n  dom,\n  DomElementArg,\n  Holder,\n  IDisposable,\n  IDisposableOwner,\n  MutableObsArray,\n  obsArray,\n  Observable\n} from 'grainjs';\nimport clamp = require('lodash/clamp');\nimport defaults = require('lodash/defaults');\n\n// When rendering app errors, we'll only show the last few.\nconst maxAppErrors = 5;\n\ninterface INotifier {\n  createUserMessage(message: string, options?: INotifyOptions): INotification;\n  // If you are looking to report errors, please do that via reportError rather\n  // than these methods so that we have a chance to send the error to our logs.\n  createAppError(error: Error): void;\n\n  createProgressIndicator(name: string, size: string, expireOnComplete: boolean): IProgress;\n  createNotification(options: INotifyOptions): INotification;\n  setConnectState(isConnected: boolean): void;\n  slowNotification<T>(promise: Promise<T>, optTimeout?: number): Promise<T>;\n  getFullAppErrors(): IAppError[];\n}\n\nexport interface INotification extends Expirable {\n  expire(): Promise<void>;\n}\n\nexport interface IProgress extends Expirable {\n  setProgress(percent: number): void;\n}\n\n/**\n * Custom action to be shown as a notification with a handler.\n */\nexport interface CustomAction { label: string, action: () => void }\n/**\n * A string, or a function that builds dom.\n */\nexport type MessageType = string | (() => DomElementArg);\n// Identifies supported actions. These are implemented in NotifyUI.\nexport type NotifyAction = 'upgrade' | 'renew' | 'personal' | 'report-problem'\n                           | 'ask-for-help' | 'manage' | CustomAction;\nexport interface INotifyOptions {\n  message: MessageType;     // A string, or a function that builds dom.\n  timestamp?: number;\n  title?: string;\n  canUserClose?: boolean;\n  inToast?: boolean;\n  inDropdown?: boolean;\n  expireSec?: number;\n  badgeCounter?: boolean;\n  level: 'message' | 'info' | 'success' | 'warning' | 'error';\n\n  memos?: string[];  // A list of relevant notes.\n\n  // cssToastAction class from NotifyUI will be applied automatically to action elements.\n  actions?: NotifyAction[];\n\n  // When set, the notification will replace any previous notification with the same key.\n  // This way, we can avoid accumulating many of substantially identical notifications.\n  key?: string|null;\n}\n\ntype Status = 'active' | 'expiring';\n\nexport class Expirable extends Disposable {\n  public static readonly fadeDelay = 250;\n  public readonly status = Observable.create<Status>(this, 'active');\n\n  constructor() {\n    super();\n  }\n\n  /**\n   * Sets status to 'expiring', then calls dispose after a short delay.\n   */\n  public async expire(withoutDelay: boolean = false): Promise<void> {\n    this.status.set('expiring');\n    if(!withoutDelay) {\n      await delay(Expirable.fadeDelay);\n    }\n    if (!this.isDisposed()) {\n      this.dispose();\n    }\n  }\n}\n\nexport class Notification extends Expirable implements INotification {\n\n  public options: Required<INotifyOptions> = {\n    title: '',\n    message: '',\n    timestamp: Date.now(),\n    inDropdown: false,\n    badgeCounter: false,\n    inToast: true,\n    expireSec: 0,\n    canUserClose: false,\n    actions: [],\n    memos: [],\n    key: null,\n    level: 'message'\n  };\n\n  constructor(_opts: INotifyOptions) {\n    super();\n    this.options = defaults({}, _opts, this.options);\n\n    if (this.options.expireSec > 0) {\n      const expireTimer = setTimeout(() => this.expire(), 1000 * this.options.expireSec);\n      this.onDispose(() => clearTimeout(expireTimer));\n    }\n  }\n}\n\ninterface IProgressOptions {\n  name: string;\n  size: string;\n  expireOnComplete?: boolean;\n}\n\nexport class Progress extends Expirable implements IProgress {\n\n  public readonly progress = Observable.create(this, 0);\n\n  constructor(public options: IProgressOptions) {\n    super();\n\n    if (options.expireOnComplete) {\n      this.autoDispose(this.progress.addListener(async progress => {\n        if (progress >= 100) {\n          await this.expire();\n        }\n      }));\n    }\n  }\n\n  /**\n   * progress should be between 0 and 100.\n   */\n  public setProgress(progress: number) {\n    this.progress.set(clamp(progress, 0, 100));\n  }\n}\n\n/**\n * Similar to grainjs MultiHolder, but knows when items are disposed externally and releases them\n * (avoiding the \"already disposed\" warnings in that case). This is probably how grainjs's\n * MultiHolder should actually work, and maybe how `Disposable.autoDispose` should generally work.\n */\nexport class BetterMultiHolder implements IDisposableOwner {\n  private _items = new Set<IDisposable>();\n\n  public autoDispose<T extends IDisposable>(obj: T): T {\n    this._items.add(obj);\n    if (obj instanceof Disposable) {\n      obj.onDispose(() => this._items.delete(obj));\n    }\n    return obj;\n  }\n\n  public dispose() {\n    for (const item of this._items) {\n      item.dispose();\n    }\n    this._items.clear();\n  }\n}\n\nexport interface IAppError {\n  error: Error;\n  timestamp: number;\n  seen?: boolean;       // If seen, this will be hidden from the \"app errors\" toast\n}\n\nexport class Notifier extends Disposable implements INotifier {\n  private _itemsHolder = this.autoDispose(new BetterMultiHolder());\n\n  private _toasts = this.autoDispose(obsArray<Notification>());\n  private _dropdownItems = this.autoDispose(obsArray<Notification>());\n  private _progressItems = this.autoDispose(obsArray<Progress>([]));\n  private _keyedItems = new Map<string, Notification>();\n\n  private _connectStateManager = ConnectStateManager.create(this);\n  private _connectState = this._connectStateManager.connectState;\n  private _disconnectMsg = Computed.create(this, (use) => getDisconnectMessage(use(this._connectState)));\n\n  // Holds recent application errors, which the user may report to us.\n  private _appErrorList = this.autoDispose(obsArray<IAppError>());\n\n  // The dropdown will show all recent errors; the toast only the \"new\" ones, i.e. those since the\n  // last toast was closed.\n  private _appErrorDropdownItem = Holder.create<INotification>(this);\n  private _appErrorToast = Holder.create<INotification>(this);\n  private _slowNotificationToast = Holder.create<INotification>(this);\n  private _slowNotificationInactivityTimer = new InactivityTimer(() => this._slowNotificationToast.clear(), 0);\n\n  constructor() {\n    super();\n    Computed.create(this, this._disconnectMsg, (use, msg) =>\n      msg ? use.owner.autoDispose(this.createNotification({\n        message: msg.message,\n        title: msg.title,\n        canUserClose: true,\n        inToast: true,\n        level : 'message'\n      })) : null);\n  }\n\n  /**\n   * Exposes all the state needed for building UI. This is simply to clarify the intended usage:\n   * these members aren't intended to be exposed, except to the UI-building code.\n   */\n  public getStateForUI() {\n    return {\n      toasts: this._toasts,\n      dropdownItems: this._dropdownItems,\n      progressItems: this._progressItems,\n      connectState: this._connectState,\n      disconnectMsg: this._disconnectMsg,\n    };\n  }\n\n  /**\n   * Creates a basic toast notification. By default, expires in 10 seconds.\n   * Takes an options objects to configure `expireSec` and `canUserClose`.\n   * Set `expireSec` to 0 to prevent expiration.\n   *\n   * Additional option level, can be used to style the notification to like a success, warning,\n   * info or error message.\n   */\n  public createUserMessage(message: MessageType, options: Partial<INotifyOptions> = {}): INotification {\n    const timestamp = Date.now();\n    if (options.actions && options.actions.includes('ask-for-help')) {\n      // If user should be able to ask for help, add this error to the notifier dropdown too for a\n      // good while, so the user can find it after the toast disappears.\n      this.createNotification({\n        timestamp,\n        message,\n        inToast: false,\n        expireSec: 300,\n        canUserClose: true,\n        level: 'message',\n        inDropdown: true,\n        ...options,\n        key: options.key && (\"dropdown:\" + options.key),\n      });\n    }\n    return this.createNotification({\n      timestamp,\n      message,\n      inToast: true,\n      expireSec: 10,\n      canUserClose: true,\n      inDropdown: false,\n      level: 'message',\n      ...options,\n    });\n  }\n\n  /**\n   * If you are looking to report errors, please do that via reportError so\n   * that we have a chance to send the error to our logs.\n   */\n  public createAppError(error: Error): void {\n    bundleChanges(() => {\n      // Remove old messages, to keep a max of maxAppErrors.\n      if (this._appErrorList.get().length >= maxAppErrors) {\n        this._appErrorList.splice(0, this._appErrorList.get().length - maxAppErrors + 1);\n      }\n      this._appErrorList.push({error, timestamp: Date.now()});\n    });\n\n    // Create a dropdown item for errors if we don't have one yet.\n    if (this._appErrorDropdownItem.isEmpty()) {\n      this._appErrorDropdownItem.autoDispose(this._createAppErrorItem('dropdown'));\n    }\n\n    // Create a toast for errors if we don't have one yet. When it's closed, mark the items as\n    // \"seen\" (i.e. not to be shown when the toast pops up again).\n    if (this._appErrorToast.isEmpty()) {\n      const n = this._appErrorToast.autoDispose(this._createAppErrorItem('toast'));\n      n.onDispose(() => this._appErrorList.get().forEach((appErr) => { appErr.seen = true; }));\n    }\n  }\n\n  public createNotification(opts: INotifyOptions): INotification {\n    const n = Notification.create(this._itemsHolder, opts);\n    this._addNotification(n).catch((e) => { log.warn('_addNotification failed', e); });\n    return n;\n  }\n\n  public createProgressIndicator(name: string, size: string, expireOnComplete = false): IProgress {\n    // Progress objects normally dispose themselves; constructor disposes any leftover items.\n    const p = Progress.create(this._itemsHolder, {name, size, expireOnComplete});\n    this._progressItems.push(p);\n    p.onDispose(() => this.isDisposed() || arrayRemove(this._progressItems, p));\n    return p;\n  }\n\n  public setConnectState(isConnected: boolean): void {\n    this._connectStateManager.setConnected(isConnected);\n  }\n\n  public getFullAppErrors() {\n    return this._appErrorList.get();\n  }\n\n  // This is exposed primarily for tests.\n  public clearAppErrors() {\n    this._appErrorList.splice(0);\n    this._appErrorToast.clear();\n  }\n\n  /**\n   * Show a notification when promise takes longer than optTimeout to resolve. Returns the passed in\n   * promise.\n   */\n  public async slowNotification<T>(promise: Promise<T>, optTimeout: number = 1000): Promise<T> {\n    if (await isLongerThan(promise, optTimeout)) {\n      if (this._slowNotificationToast.isEmpty()) {\n        this._slowNotificationToast.autoDispose(this.createNotification({\n          message: \"Still working...\",\n          canUserClose: false,\n          inToast: true,\n          level: 'message',\n        }));\n      }\n      await this._slowNotificationInactivityTimer.disableUntilFinish(promise);\n    }\n    return promise;\n  }\n\n  private async _addNotification(n: Notification): Promise<void> {\n    const key = n.options.key;\n    if (key) {\n      const prev = this._keyedItems.get(key);\n      if (prev) {\n        await prev.expire(true);\n      }\n      this._keyedItems.set(key, n);\n      n.onDispose(() => this.isDisposed() || this._keyedItems.delete(key));\n    }\n    if (n.options.inToast) {\n      this._toasts.push(n);\n      n.onDispose(() => this.isDisposed() || arrayRemove(this._toasts, n));\n    }\n    if (n.options.inDropdown) {\n      this._dropdownItems.push(n);\n      n.onDispose(() => this.isDisposed() || arrayRemove(this._dropdownItems, n));\n    }\n  }\n\n  private _createAppErrorItem(where: 'toast' | 'dropdown') {\n    return this.createNotification({\n      // Building DOM here in NotifyModel seems wrong, but I haven't come up with a better way.\n      message: () => dom.domComputed((use) => {\n        let appErrors = use(this._appErrorList);\n\n        // On narrow screens, only show the most recent error in toasts to conserve space.\n        if (where === 'toast' && use(isNarrowScreenObs())) {\n          appErrors = appErrors.length > 0 ? [appErrors[appErrors.length - 1]] : [];\n        }\n\n        return dom('div',\n          dom.forEach(appErrors, (appErr: IAppError) =>\n            (where === 'toast' && appErr.seen ? null :\n              dom('div', timeFormat('T', new Date(appErr.timestamp)), ' ',\n                  appErr.error.message, testId('notification-app-error'))\n            )\n          ),\n          testId('notification-app-errors')\n        );\n      }),\n      title: 'Unexpected error',\n      canUserClose: true,\n      inToast: where === 'toast',\n      expireSec: where === 'toast' ? 10 : 0,\n      inDropdown: where === 'dropdown',\n      actions: ['report-problem'],\n      level: 'error',\n    });\n  }\n}\n\nfunction arrayRemove<T>(arr: MutableObsArray<T>, elem: T) {\n  const removeIdx = arr.get().findIndex(e => e === elem);\n  if (removeIdx !== -1) {\n    arr.splice(removeIdx, 1);\n  }\n}\n\nfunction getDisconnectMessage(state: ConnectState): {title: string, message: string}|undefined {\n  switch (state) {\n    case ConnectState.RecentlyDisconnected:\n      return {title: 'Connection is lost', message: 'Attempting to reconnect...'};\n    case ConnectState.ReallyDisconnected:\n      return {title: 'Not connected', message: 'The document is in read-only mode until you are back online.'};\n  }\n}\n","export default function getBoundingClientRect(element) {\n  var rect = element.getBoundingClientRect();\n  return {\n    width: rect.width,\n    height: rect.height,\n    top: rect.top,\n    right: rect.right,\n    bottom: rect.bottom,\n    left: rect.left,\n    x: rect.left,\n    y: rect.top\n  };\n}","export var top = 'top';\nexport var bottom = 'bottom';\nexport var right = 'right';\nexport var left = 'left';\nexport var auto = 'auto';\nexport var basePlacements = [top, bottom, right, left];\nexport var start = 'start';\nexport var end = 'end';\nexport var clippingParents = 'clippingParents';\nexport var viewport = 'viewport';\nexport var popper = 'popper';\nexport var reference = 'reference';\nexport var variationPlacements = /*#__PURE__*/basePlacements.reduce(function (acc, placement) {\n  return acc.concat([placement + \"-\" + start, placement + \"-\" + end]);\n}, []);\nexport var placements = /*#__PURE__*/[].concat(basePlacements, [auto]).reduce(function (acc, placement) {\n  return acc.concat([placement, placement + \"-\" + start, placement + \"-\" + end]);\n}, []); // modifiers that need to read the DOM\n\nexport var beforeRead = 'beforeRead';\nexport var read = 'read';\nexport var afterRead = 'afterRead'; // pure-logic modifiers\n\nexport var beforeMain = 'beforeMain';\nexport var main = 'main';\nexport var afterMain = 'afterMain'; // modifier with the purpose to write to the DOM (or write into a framework state)\n\nexport var beforeWrite = 'beforeWrite';\nexport var write = 'write';\nexport var afterWrite = 'afterWrite';\nexport var modifierPhases = [beforeRead, read, afterRead, beforeMain, main, afterMain, beforeWrite, write, afterWrite];","/*:: import type { Window } from '../types'; */\n\n/*:: declare function getWindow(node: Node | Window): Window; */\nexport default function getWindow(node) {\n  if (node.toString() !== '[object Window]') {\n    var ownerDocument = node.ownerDocument;\n    return ownerDocument ? ownerDocument.defaultView : window;\n  }\n\n  return node;\n}","import getWindow from \"./getWindow.js\";\nexport default function getWindowScroll(node) {\n  var win = getWindow(node);\n  var scrollLeft = win.pageXOffset;\n  var scrollTop = win.pageYOffset;\n  return {\n    scrollLeft: scrollLeft,\n    scrollTop: scrollTop\n  };\n}","import getWindow from \"./getWindow.js\";\n/*:: declare function isElement(node: mixed): boolean %checks(node instanceof\n  Element); */\n\nfunction isElement(node) {\n  var OwnElement = getWindow(node).Element;\n  return node instanceof OwnElement || node instanceof Element;\n}\n/*:: declare function isHTMLElement(node: mixed): boolean %checks(node instanceof\n  HTMLElement); */\n\n\nfunction isHTMLElement(node) {\n  var OwnElement = getWindow(node).HTMLElement;\n  return node instanceof OwnElement || node instanceof HTMLElement;\n}\n\nexport { isElement, isHTMLElement };","export default function getNodeName(element) {\n  return element ? (element.nodeName || '').toLowerCase() : null;\n}","import { isElement } from \"./instanceOf.js\";\nexport default function getDocumentElement(element) {\n  // $FlowFixMe: assume body is always available\n  return (isElement(element) ? element.ownerDocument : element.document).documentElement;\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nexport default function getWindowScrollBarX(element) {\n  // If <html> has a CSS width greater than the viewport, then this will be\n  // incorrect for RTL.\n  // Popper 1 is broken in this case and never had a bug report so let's assume\n  // it's not an issue. I don't think anyone ever specifies width on <html>\n  // anyway.\n  // Browsers where the left scrollbar doesn't cause an issue report `0` for\n  // this (e.g. Edge 2019, IE11, Safari)\n  return getBoundingClientRect(getDocumentElement(element)).left + getWindowScroll(element).scrollLeft;\n}","import getNodeName from \"./getNodeName.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nexport default function getParentNode(element) {\n  if (getNodeName(element) === 'html') {\n    return element;\n  }\n\n  return (// $FlowFixMe: this is a quicker (but less type safe) way to save quite some bytes from the bundle\n    element.assignedSlot || // step into the shadow DOM of the parent of a slotted node\n    element.parentNode || // DOM Element detected\n    // $FlowFixMe: need a better way to handle this...\n    element.host || // ShadowRoot detected\n    // $FlowFixMe: HTMLElement is a Node\n    getDocumentElement(element) // fallback\n\n  );\n}","import getWindow from \"./getWindow.js\";\nexport default function getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}","import getParentNode from \"./getParentNode.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nexport default function getScrollParent(node) {\n  if (['html', 'body', '#document'].indexOf(getNodeName(node)) >= 0) {\n    // $FlowFixMe: assume body is always available\n    return node.ownerDocument.body;\n  }\n\n  if (isHTMLElement(node)) {\n    // Firefox wants us to check `-x` and `-y` variations as well\n    var _getComputedStyle = getComputedStyle(node),\n        overflow = _getComputedStyle.overflow,\n        overflowX = _getComputedStyle.overflowX,\n        overflowY = _getComputedStyle.overflowY;\n\n    if (/auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX)) {\n      return node;\n    }\n  }\n\n  return getScrollParent(getParentNode(node));\n}","import getScrollParent from \"./getScrollParent.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport getWindow from \"./getWindow.js\";\nexport default function listScrollParents(element, list) {\n  if (list === void 0) {\n    list = [];\n  }\n\n  var scrollParent = getScrollParent(element);\n  var isBody = getNodeName(scrollParent) === 'body';\n  var win = getWindow(scrollParent);\n  var target = isBody ? [win].concat(win.visualViewport || []) : scrollParent;\n  var updatedList = list.concat(target);\n  return isBody ? updatedList : // $FlowFixMe: isBody tells us target will be an HTMLElement here\n  updatedList.concat(listScrollParents(getParentNode(target)));\n}","import getNodeName from \"./getNodeName.js\";\nexport default function isTableElement(element) {\n  return ['table', 'td', 'th'].indexOf(getNodeName(element)) >= 0;\n}","import getWindow from \"./getWindow.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport isTableElement from \"./isTableElement.js\";\n\nfunction getTrueOffsetParent(element) {\n  if (!isHTMLElement(element) || // https://github.com/popperjs/popper-core/issues/837\n  getComputedStyle(element).position === 'fixed') {\n    return null;\n  }\n\n  return element.offsetParent;\n}\n\nexport default function getOffsetParent(element) {\n  var window = getWindow(element);\n  var offsetParent = getTrueOffsetParent(element); // Find the nearest non-table offsetParent\n\n  while (offsetParent && isTableElement(offsetParent)) {\n    offsetParent = getTrueOffsetParent(offsetParent);\n  }\n\n  if (offsetParent && getNodeName(offsetParent) === 'body' && getComputedStyle(offsetParent).position === 'static') {\n    return window;\n  }\n\n  return offsetParent || window;\n}","import getComputedStyle from \"./getComputedStyle.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\n\nfunction toNumber(cssValue) {\n  return parseFloat(cssValue) || 0;\n}\n\nexport default function getBorders(element) {\n  var computedStyle = isHTMLElement(element) ? getComputedStyle(element) : {};\n  return {\n    top: toNumber(computedStyle.borderTopWidth),\n    right: toNumber(computedStyle.borderRightWidth),\n    bottom: toNumber(computedStyle.borderBottomWidth),\n    left: toNumber(computedStyle.borderLeftWidth)\n  };\n}","export default function rectToClientRect(rect) {\n  return Object.assign({}, rect, {\n    left: rect.x,\n    top: rect.y,\n    right: rect.x + rect.width,\n    bottom: rect.y + rect.height\n  });\n}","import { viewport } from \"../enums.js\";\nimport getViewportRect from \"./getViewportRect.js\";\nimport getDocumentRect from \"./getDocumentRect.js\";\nimport listScrollParents from \"./listScrollParents.js\";\nimport getOffsetParent from \"./getOffsetParent.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getDecorations from \"./getDecorations.js\";\nimport contains from \"./contains.js\";\nimport rectToClientRect from \"../utils/rectToClientRect.js\";\n\nfunction getClientRectFromMixedType(element, clippingParent) {\n  return clippingParent === viewport ? rectToClientRect(getViewportRect(element)) : isHTMLElement(clippingParent) ? getBoundingClientRect(clippingParent) : rectToClientRect(getDocumentRect(getDocumentElement(element)));\n} // A \"clipping parent\" is an overflowable container with the characteristic of\n// clipping (or hiding) overflowing elements with a position different from\n// `initial`\n\n\nfunction getClippingParents(element) {\n  var clippingParents = listScrollParents(element);\n  var canEscapeClipping = ['absolute', 'fixed'].indexOf(getComputedStyle(element).position) >= 0;\n  var clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;\n\n  if (!isElement(clipperElement)) {\n    return [];\n  } // $FlowFixMe: https://github.com/facebook/flow/issues/1414\n\n\n  return clippingParents.filter(function (clippingParent) {\n    return isElement(clippingParent) && contains(clippingParent, clipperElement);\n  });\n} // Gets the maximum area that the element is visible in due to any number of\n// clipping parents\n\n\nexport default function getClippingRect(element, boundary, rootBoundary) {\n  var mainClippingParents = boundary === 'clippingParents' ? getClippingParents(element) : [].concat(boundary);\n  var clippingParents = [].concat(mainClippingParents, [rootBoundary]);\n  var firstClippingParent = clippingParents[0];\n  var clippingRect = clippingParents.reduce(function (accRect, clippingParent) {\n    var rect = getClientRectFromMixedType(element, clippingParent);\n    var decorations = getDecorations(isHTMLElement(clippingParent) ? clippingParent : getDocumentElement(element));\n    accRect.top = Math.max(rect.top + decorations.top, accRect.top);\n    accRect.right = Math.min(rect.right - decorations.right, accRect.right);\n    accRect.bottom = Math.min(rect.bottom - decorations.bottom, accRect.bottom);\n    accRect.left = Math.max(rect.left + decorations.left, accRect.left);\n    return accRect;\n  }, getClientRectFromMixedType(element, firstClippingParent));\n  clippingRect.width = clippingRect.right - clippingRect.left;\n  clippingRect.height = clippingRect.bottom - clippingRect.top;\n  clippingRect.x = clippingRect.left;\n  clippingRect.y = clippingRect.top;\n  return clippingRect;\n}","import getWindow from \"./getWindow.js\";\nexport default function getViewportRect(element) {\n  var win = getWindow(element);\n  var visualViewport = win.visualViewport;\n  var width = win.innerWidth;\n  var height = win.innerHeight; // We don't know which browsers have buggy or odd implementations of this, so\n  // for now we're only applying it to iOS to fix the keyboard issue.\n  // Investigation required\n\n  if (visualViewport && /iPhone|iPod|iPad/.test(navigator.platform)) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: 0,\n    y: 0\n  };\n}","import getCompositeRect from \"./getCompositeRect.js\";\nimport getWindow from \"./getWindow.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nexport default function getDocumentRect(element) {\n  var win = getWindow(element);\n  var winScroll = getWindowScroll(element);\n  var documentRect = getCompositeRect(getDocumentElement(element), win);\n  documentRect.height = Math.max(documentRect.height, win.innerHeight);\n  documentRect.width = Math.max(documentRect.width, win.innerWidth);\n  documentRect.x = -winScroll.scrollLeft;\n  documentRect.y = -winScroll.scrollTop;\n  return documentRect;\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getNodeScroll from \"./getNodeScroll.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getDocumentElement from \"./getDocumentElement.js\"; // Returns the composite rect of an element relative to its offsetParent.\n// Composite means it takes into account transforms as well as layout.\n\nexport default function getCompositeRect(elementOrVirtualElement, offsetParent, isFixed) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n\n  var documentElement;\n  var rect = getBoundingClientRect(elementOrVirtualElement);\n  var scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  var offsets = {\n    x: 0,\n    y: 0\n  };\n\n  if (!isFixed) {\n    if (getNodeName(offsetParent) !== 'body') {\n      scroll = getNodeScroll(offsetParent);\n    }\n\n    if (isHTMLElement(offsetParent)) {\n      offsets = getBoundingClientRect(offsetParent);\n      offsets.x += offsetParent.clientLeft;\n      offsets.y += offsetParent.clientTop;\n    } else if (documentElement = getDocumentElement(offsetParent)) {\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n\n  return {\n    x: rect.left + scroll.scrollLeft - offsets.x,\n    y: rect.top + scroll.scrollTop - offsets.y,\n    width: rect.width,\n    height: rect.height\n  };\n}","import getWindowScroll from \"./getWindowScroll.js\";\nimport getWindow from \"./getWindow.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getHTMLElementScroll from \"./getHTMLElementScroll.js\";\nexport default function getNodeScroll(node) {\n  if (node === getWindow(node) || !isHTMLElement(node)) {\n    return getWindowScroll(node);\n  } else {\n    return getHTMLElementScroll(node);\n  }\n}","export default function getHTMLElementScroll(element) {\n  return {\n    scrollLeft: element.scrollLeft,\n    scrollTop: element.scrollTop\n  };\n}","import getBoundingClientRect from \"../dom-utils/getBoundingClientRect.js\";\nimport getClippingRect from \"../dom-utils/getClippingRect.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport computeOffsets from \"./computeOffsets.js\";\nimport rectToClientRect from \"./rectToClientRect.js\";\nimport { clippingParents, reference, popper, bottom, top, right, basePlacements, viewport } from \"../enums.js\";\nimport { isElement } from \"../dom-utils/instanceOf.js\";\nimport mergePaddingObject from \"./mergePaddingObject.js\";\nimport expandToHashMap from \"./expandToHashMap.js\";\nexport default function detectOverflow(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      _options$placement = _options.placement,\n      placement = _options$placement === void 0 ? state.placement : _options$placement,\n      _options$boundary = _options.boundary,\n      boundary = _options$boundary === void 0 ? clippingParents : _options$boundary,\n      _options$rootBoundary = _options.rootBoundary,\n      rootBoundary = _options$rootBoundary === void 0 ? viewport : _options$rootBoundary,\n      _options$elementConte = _options.elementContext,\n      elementContext = _options$elementConte === void 0 ? popper : _options$elementConte,\n      _options$altBoundary = _options.altBoundary,\n      altBoundary = _options$altBoundary === void 0 ? false : _options$altBoundary,\n      _options$padding = _options.padding,\n      padding = _options$padding === void 0 ? 0 : _options$padding;\n  var paddingObject = mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n  var altContext = elementContext === popper ? reference : popper;\n  var referenceElement = state.elements.reference;\n  var popperRect = state.rects.popper;\n  var element = state.elements[altBoundary ? altContext : elementContext];\n  var clippingClientRect = getClippingRect(isElement(element) ? element : element.contextElement || getDocumentElement(state.elements.popper), boundary, rootBoundary);\n  var referenceClientRect = getBoundingClientRect(referenceElement);\n  var popperOffsets = computeOffsets({\n    reference: referenceClientRect,\n    element: popperRect,\n    strategy: 'absolute',\n    placement: placement\n  });\n  var popperClientRect = rectToClientRect(Object.assign({}, popperRect, {}, popperOffsets));\n  var elementClientRect = elementContext === popper ? popperClientRect : referenceClientRect; // positive = overflowing the clipping rect\n  // 0 or negative = within the clipping rect\n\n  var overflowOffsets = {\n    top: clippingClientRect.top - elementClientRect.top + paddingObject.top,\n    bottom: elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom,\n    left: clippingClientRect.left - elementClientRect.left + paddingObject.left,\n    right: elementClientRect.right - clippingClientRect.right + paddingObject.right\n  };\n  var offsetData = state.modifiersData.offset; // Offsets can be applied only to the popper element\n\n  if (elementContext === popper && offsetData) {\n    var offset = offsetData[placement];\n    Object.keys(overflowOffsets).forEach(function (key) {\n      var multiply = [right, bottom].indexOf(key) >= 0 ? 1 : -1;\n      var axis = [top, bottom].indexOf(key) >= 0 ? 'y' : 'x';\n      overflowOffsets[key] += offset[axis] * multiply;\n    });\n  }\n\n  return overflowOffsets;\n}","import getFreshSideObject from \"./getFreshSideObject.js\";\nexport default function mergePaddingObject(paddingObject) {\n  return Object.assign({}, getFreshSideObject(), {}, paddingObject);\n}","export default function getFreshSideObject() {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  };\n}","export default function expandToHashMap(value, keys) {\n  return keys.reduce(function (hashMap, key) {\n    hashMap[key] = value;\n    return hashMap;\n  }, {});\n}","export default function contains(parent, child) {\n  // $FlowFixMe: hasOwnProperty doesn't seem to work in tests\n  var isShadow = Boolean(child.getRootNode && child.getRootNode().host); // First, attempt with faster native method\n\n  if (parent.contains(child)) {\n    return true;\n  } // then fallback to custom implementation with Shadow DOM support\n  else if (isShadow) {\n      var next = child;\n\n      do {\n        if (next && parent.isSameNode(next)) {\n          return true;\n        } // $FlowFixMe: need a better way to handle this...\n\n\n        next = next.parentNode || next.host;\n      } while (next);\n    } // Give up, the result is false\n\n\n  return false;\n}","import getBorders from \"./getBorders.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport getWindow from \"./getWindow.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\"; // Borders + scrollbars\n\nexport default function getDecorations(element) {\n  var win = getWindow(element);\n  var borders = getBorders(element);\n  var isHTML = getNodeName(element) === 'html';\n  var winScrollBarX = getWindowScrollBarX(element);\n  var x = element.clientWidth + borders.right;\n  var y = element.clientHeight + borders.bottom; // HACK:\n  // document.documentElement.clientHeight on iOS reports the height of the\n  // viewport including the bottom bar, even if the bottom bar isn't visible.\n  // If the difference between window innerHeight and html clientHeight is more\n  // than 50, we assume it's a mobile bottom bar and ignore scrollbars.\n  // * A 50px thick scrollbar is likely non-existent (macOS is 15px and Windows\n  //   is about 17px)\n  // * The mobile bar is 114px tall\n\n  if (isHTML && win.innerHeight - element.clientHeight > 50) {\n    y = win.innerHeight - borders.bottom;\n  }\n\n  return {\n    top: isHTML ? 0 : element.clientTop,\n    right: // RTL scrollbar (scrolling containers only)\n    element.clientLeft > borders.left ? borders.right : // LTR scrollbar\n    isHTML ? win.innerWidth - x - winScrollBarX : element.offsetWidth - x,\n    bottom: isHTML ? win.innerHeight - y : element.offsetHeight - y,\n    left: isHTML ? winScrollBarX : element.clientLeft\n  };\n}","import getBasePlacement from \"./getBasePlacement.js\";\nimport getVariation from \"./getVariation.js\";\nimport getMainAxisFromPlacement from \"./getMainAxisFromPlacement.js\";\nimport { top, right, bottom, left, start, end } from \"../enums.js\";\nexport default function computeOffsets(_ref) {\n  var reference = _ref.reference,\n      element = _ref.element,\n      placement = _ref.placement;\n  var basePlacement = placement ? getBasePlacement(placement) : null;\n  var variation = placement ? getVariation(placement) : null;\n  var commonX = reference.x + reference.width / 2 - element.width / 2;\n  var commonY = reference.y + reference.height / 2 - element.height / 2;\n  var offsets;\n\n  switch (basePlacement) {\n    case top:\n      offsets = {\n        x: commonX,\n        y: reference.y - element.height\n      };\n      break;\n\n    case bottom:\n      offsets = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n\n    case right:\n      offsets = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n\n    case left:\n      offsets = {\n        x: reference.x - element.width,\n        y: commonY\n      };\n      break;\n\n    default:\n      offsets = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n\n  var mainAxis = basePlacement ? getMainAxisFromPlacement(basePlacement) : null;\n\n  if (mainAxis != null) {\n    var len = mainAxis === 'y' ? 'height' : 'width';\n\n    switch (variation) {\n      case start:\n        offsets[mainAxis] = Math.floor(offsets[mainAxis]) - Math.floor(reference[len] / 2 - element[len] / 2);\n        break;\n\n      case end:\n        offsets[mainAxis] = Math.floor(offsets[mainAxis]) + Math.ceil(reference[len] / 2 - element[len] / 2);\n        break;\n\n      default:\n    }\n  }\n\n  return offsets;\n}","import { auto } from \"../enums.js\";\nexport default function getBasePlacement(placement) {\n  return placement.split('-')[0];\n}","export default function getVariation(placement) {\n  return placement.split('-')[1];\n}","export default function getMainAxisFromPlacement(placement) {\n  return ['top', 'bottom'].indexOf(placement) >= 0 ? 'x' : 'y';\n}","import { detectOverflow } from '@popperjs/core';\n\nvar maxSize = {\n  name: 'maxSize',\n  enabled: true,\n  phase: 'main',\n  requiresIfExists: ['offset', 'preventOverflow', 'flip'],\n  fn: function fn(_ref) {\n    var state = _ref.state,\n        name = _ref.name,\n        options = _ref.options;\n    var overflow = detectOverflow(state, options);\n\n    var _ref2 = state.modifiersData.preventOverflow || {\n      x: 0,\n      y: 0\n    },\n        x = _ref2.x,\n        y = _ref2.y;\n\n    var _state$rects$popper = state.rects.popper,\n        width = _state$rects$popper.width,\n        height = _state$rects$popper.height;\n\n    var _state$placement$spli = state.placement.split('-'),\n        basePlacement = _state$placement$spli[0];\n\n    var widthProp = basePlacement === 'left' ? 'left' : 'right';\n    var heightProp = basePlacement === 'top' ? 'top' : 'bottom';\n    state.modifiersData[name] = {\n      width: width - overflow[widthProp] - x,\n      height: height - overflow[heightProp] - y\n    };\n  }\n};\n\nexport default maxSize;\n","/**\n * Implements an autocomplete dropdown.\n */\nimport {createPopper, Modifier, Instance as Popper, Options as PopperOptions} from '@popperjs/core';\nimport {ACItem, ACResults, HighlightFunc} from 'app/client/lib/ACIndex';\nimport {reportError} from 'app/client/models/errors';\nimport {Disposable, dom, EventCB, IDisposable} from 'grainjs';\nimport {obsArray, onKeyElem, styled} from 'grainjs';\nimport merge = require('lodash/merge');\nimport maxSize from 'popper-max-size-modifier';\nimport {cssMenu} from 'popweasel';\n\n\nexport interface IAutocompleteOptions<Item extends ACItem> {\n  // If provided, applies the css class to the menu container. Could be multiple, space-separated.\n  menuCssClass?: string;\n\n  // A single class name to add for the selected item, or 'selected' by default.\n  selectedCssClass?: string;\n\n  // Popper options for positioning the popup.\n  popperOptions?: Partial<PopperOptions>;\n\n  // To which element to append the popup content. Null means triggerElem.parentNode; string is\n  // a selector for the closest matching ancestor of triggerElem, e.g. 'body'.\n  // Defaults to the document body.\n  attach?: Element|string|null;\n\n  // Given a search term, return the list of Items to render.\n  search(searchText: string): Promise<ACResults<Item>>;\n\n  // Function to render a single item.\n  renderItem(item: Item, highlightFunc: HighlightFunc): HTMLElement;\n\n  // Get text for the text input for a selected item, i.e. the text to present to the user.\n  getItemText(item: Item): string;\n\n  // A callback triggered when user clicks one of the choices.\n  onClick?(): void;\n}\n\n/**\n * An instance of an open Autocomplete dropdown.\n */\nexport class Autocomplete<Item extends ACItem> extends Disposable {\n  // The UL element containing the actual menu items.\n  protected _menuContent: HTMLElement;\n\n  // Index into _items as well as into _menuContent, -1 if nothing selected.\n  protected _selectedIndex: number = -1;\n\n  // Currently selected element.\n  protected _selected: HTMLElement|null = null;\n\n  private _popper: Popper;\n  private _mouseOver: {reset(): void};\n  private _lastAsTyped: string;\n  private _items = this.autoDispose(obsArray<Item>([]));\n  private _highlightFunc: HighlightFunc;\n\n  constructor(\n    private _triggerElem: HTMLInputElement | HTMLTextAreaElement,\n    private readonly _options: IAutocompleteOptions<Item>,\n  ) {\n    super();\n\n    const content = cssMenuWrap(\n      this._menuContent = cssMenu({class: _options.menuCssClass || ''},\n        dom.forEach(this._items, (item) => _options.renderItem(item, this._highlightFunc)),\n        dom.style('min-width', _triggerElem.getBoundingClientRect().width + 'px'),\n        dom.on('mouseleave', (ev) => this._setSelected(-1, true)),\n        dom.on('click', (ev) => {\n          this._setSelected(this._findTargetItem(ev.target), true);\n          if (_options.onClick) { _options.onClick(); }\n        })\n      ),\n      // Prevent trigger element from being blurred on click.\n      dom.on('mousedown', (ev) => ev.preventDefault()),\n    );\n\n    this._mouseOver = attachMouseOverOnMove(this._menuContent,\n      (ev) => this._setSelected(this._findTargetItem(ev.target), true));\n\n    // Add key handlers to the trigger element as well as the menu if it is an input.\n    this.autoDispose(onKeyElem(_triggerElem, 'keydown', {\n      ArrowDown: () => this._setSelected(this._getNext(1), true),\n      ArrowUp: () => this._setSelected(this._getNext(-1), true),\n    }));\n\n    // Keeps track of the last value as typed by the user.\n    this.search();\n    this.autoDispose(dom.onElem(_triggerElem, 'input', () => this.search()));\n\n    const attachElem = _options.attach === undefined ? document.body : _options.attach;\n    const containerElem = getContainer(_triggerElem, attachElem) ?? document.body;\n    containerElem.appendChild(content);\n\n    this.onDispose(() => { dom.domDispose(content); content.remove(); });\n\n    // Prepare and create the Popper instance, which places the content according to the options.\n    const popperOptions = merge({}, defaultPopperOptions, _options.popperOptions);\n    this._popper = createPopper(_triggerElem, content, popperOptions);\n    this.onDispose(() => this._popper.destroy());\n  }\n\n  public getSelectedItem(): Item|undefined {\n    return this._items.get()[this._selectedIndex];\n  }\n\n  public search(findMatch?: (items: Item[]) => number) {\n    this._updateChoices(this._triggerElem.value, findMatch).catch(reportError);\n  }\n\n  // When the selected element changes, update the classes of the formerly and newly-selected\n  // elements and optionally update the text input.\n  private _setSelected(index: number, updateValue: boolean) {\n    const elem = (this._menuContent.children[index] as HTMLElement) || null;\n    const prev = this._selected;\n    if (elem !== prev) {\n      const clsName = this._options.selectedCssClass || 'selected';\n      if (prev) { prev.classList.remove(clsName); }\n      if (elem) {\n        elem.classList.add(clsName);\n        elem.scrollIntoView({block: 'nearest'});\n      }\n    }\n    this._selected = elem;\n    this._selectedIndex = elem ? index : -1;\n\n    if (updateValue) {\n      // Update trigger's value with the selected choice, or else with the last typed value.\n      if (elem) {\n        this._triggerElem.value = this._options.getItemText(this.getSelectedItem()!);\n      } else {\n        this._triggerElem.value = this._lastAsTyped;\n      }\n    }\n  }\n\n  private _findTargetItem(target: EventTarget|null): number {\n    // Find immediate child of this._menuContent which is an ancestor of ev.target.\n    const elem = findAncestorChild(this._menuContent, target as Element|null);\n    return Array.prototype.indexOf.call(this._menuContent.children, elem);\n  }\n\n  private _getNext(step: 1 | -1): number {\n    // Pretend there is an extra element at the end to mean \"nothing selected\".\n    const xsize = this._items.get().length + 1;\n    const next = (this._selectedIndex + step + xsize) % xsize;\n    return (next === xsize - 1) ? -1 : next;\n  }\n\n  private async _updateChoices(inputVal: string, findMatch?: (items: Item[]) => number): Promise<void> {\n    this._lastAsTyped = inputVal;\n    // TODO We should perhaps debounce the search() call in some clever way, to avoid unnecessary\n    // searches while typing. Today, search() is synchronous in practice, so it doesn't matter.\n    const acResults = await this._options.search(inputVal);\n    this._highlightFunc = acResults.highlightFunc;\n    this._items.set(acResults.items);\n\n    // Plain update() (which is deferred) may be better, but if _setSelected() causes scrolling\n    // before the positions are updated, it causes the entire page to scroll horizontally.\n    this._popper.forceUpdate();\n\n    this._mouseOver.reset();\n\n    let index: number;\n    if (findMatch) {\n      index = findMatch(this._items.get());\n    } else {\n      index = inputVal ? acResults.selectIndex : -1;\n    }\n    this._setSelected(index, false);\n  }\n}\n\n\n// The maxSize modifiers follow recommendations at https://www.npmjs.com/package/popper-max-size-modifier\nconst calcMaxSize = {\n  ...maxSize,\n  options: {padding: 4},\n};\n\nconst applyMaxSize: Modifier<any, any> = {\n  name: 'applyMaxSize',\n  enabled: true,\n  phase: 'beforeWrite',\n  requires: ['maxSize'],\n  fn({state}: any) {\n    // The `maxSize` modifier provides this data\n    const {height} = state.modifiersData.maxSize;\n    Object.assign(state.styles.popper, {\n      maxHeight: `${Math.max(160, height)}px`\n    });\n  }\n};\n\nexport const defaultPopperOptions: Partial<PopperOptions> = {\n  placement: 'bottom-start',\n  modifiers: [\n    calcMaxSize,\n    applyMaxSize,\n    {name: \"computeStyles\", options: {gpuAcceleration: false}},\n  ],\n};\n\n\n/**\n * Helper that finds the container according to attachElem. Null means\n * elem.parentNode; string is a selector for the closest matching ancestor, e.g. 'body'.\n */\n function getContainer(elem: Element, attachElem: Element|string|null): Node|null {\n  return (typeof attachElem === 'string') ? elem.closest(attachElem) :\n    (attachElem || elem.parentNode);\n}\n\n/**\n * Helper function which returns the direct child of ancestor which is an ancestor of elem, or\n * null if elem is not a descendant of ancestor.\n */\nexport function findAncestorChild(ancestor: Element, elem: Element|null): Element|null {\n  while (elem && elem.parentElement !== ancestor) {\n    elem = elem.parentElement;\n  }\n  return elem;\n}\n\n/**\n * A version of dom.onElem('mouseover') that doesn't start firing until there is first a 'mousemove'.\n * This way if an element is created under the mouse cursor (triggered by the keyboard, for\n * instance) it's not immediately highlighted, but only when a user moves the mouse.\n * Returns an object with a reset() method, which restarts the wait for mousemove.\n */\nexport function attachMouseOverOnMove<T extends EventTarget>(elem: T, callback: EventCB<MouseEvent, T>) {\n  let lis: IDisposable|undefined;\n  function setListener(eventType: 'mouseover'|'mousemove', cb: EventCB<MouseEvent, T>) {\n    if (lis) { lis.dispose(); }\n    lis = dom.onElem(elem, eventType, cb);\n  }\n  function reset() {\n    setListener('mousemove', (ev, _elem) => {\n      setListener('mouseover', callback);\n      callback(ev, _elem);\n    });\n  }\n  reset();\n  return {reset};\n}\n\nconst cssMenuWrap = styled('div', `\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  outline: none;\n`);\n","/**\n * A full-featured implementation of tokenfield (aka \"pillbox\", \"tag list\", etc).\n *\n * Supported features:\n * - Each token includes an \"x\" button to delete it.\n * - Click on a token to select;\n *   Shift+click to extend selection;\n *   Ctrl+click for non-contigous selection.\n * - Arrow keys to move selection.\n *   Shift + arrow keys to extend selection.\n * - Cmd+A to select all options.\n * - Delete/Backspace delete selection. If no selection, Backspace deletes the last item.\n * - Copy-cut is supported for a selection. By default CSV-encodes token labels.\n * - Paste is supported into input textbox, or to replace a selection.\n * - Tokens or a selection of tokens may be dragged to move within the tokenfield.\n * - Supports undo/redo for token changes.\n */\nimport { ACItem } from 'app/client/lib/ACIndex';\nimport { modKeyProp } from 'app/client/lib/browserInfo';\nimport { Autocomplete, IAutocompleteOptions } from 'app/client/lib/autocomplete';\nimport { colors, testId, theme } from 'app/client/ui2018/cssVars';\nimport { icon } from 'app/client/ui2018/icons';\nimport { csvDecodeRow, csvEncodeRow } from 'app/common/csvFormat';\nimport { computedArray, IDisposableCtor, IObsArraySplice, ObsArray, obsArray, Observable } from 'grainjs';\nimport { Disposable, dom, DomElementArg, Holder, styled } from 'grainjs';\n\nexport interface IToken {\n  label: string;\n}\n\nexport interface ITokenFieldOptions<Token extends IToken> {\n  initialValue: Token[];\n  renderToken: (token: Token) => DomElementArg;\n  createToken: (inputText: string) => Token|undefined;\n  acOptions?: IAutocompleteOptions<Token & ACItem>;\n  openAutocompleteOnFocus?: boolean;\n  styles?: ITokenFieldStyles;\n  readonly?: boolean;\n  trimLabels?: boolean;\n  keyBindings?: ITokenFieldKeyBindings;\n\n  // Allows overriding how tokens are copied to the clipboard, or retrieved from it.\n  // By default, tokens are placed into clipboard as text/plain comma-separated token labels, with\n  // CSV escaping, and pasted from clipboard by applying createToken() to parsed CSV text.\n  tokensToClipboard?: (tokens: Token[], clipboard: DataTransfer) => void;\n  clipboardToTokens?: (clipboard: DataTransfer) => Token[];\n\n  // Defaults to horizontal.\n  variant?: ITokenFieldVariant;\n}\n\n/**\n * Overrides for default TokenField shortcut bindings.\n *\n * Values should be Key Values (https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values).\n */\nexport interface ITokenFieldKeyBindings {\n  previous?: string;\n  next?: string;\n}\n\nexport type ITokenFieldVariant = 'horizontal' | 'vertical';\n\nconst defaultKeyBindings: Required<ITokenFieldKeyBindings> = {\n  previous: 'ArrowLeft',\n  next: 'ArrowRight'\n};\n\n// TokenWrap serves to distinguish multiple instances of the same token in the list.\nclass TokenWrap<Token extends IToken> {\n  constructor(public token: Token) {}\n}\n\nclass UndoItem {\n  constructor(public redo: () => void, public undo: () => void) {}\n}\n\nexport class TokenField<Token extends IToken = IToken> extends Disposable {\n  public static ctor<T extends IToken>(): IDisposableCtor<TokenField<T>, [ITokenFieldOptions<T>]> {\n    return this;\n  }\n\n  public tokensObs: ObsArray<Token>;\n\n  private _acHolder = Holder.create<Autocomplete<Token & ACItem>>(this);\n  private _acOptions: IAutocompleteOptions<Token & ACItem>|undefined;\n  private _rootElem: HTMLElement;\n  private _textInput: HTMLInputElement;\n  private _styles: Required<ITokenFieldStyles>;\n\n  // ClipboardAPI events work as expected only when the focus is in an actual input.\n  // This is where we place focus when we have some tokens selected.\n  private _hiddenInput: HTMLInputElement;\n\n  // Keys to navigate tokens. In a vertical list, these would be changed to Up/Down.\n  private _keyBindings: Required<ITokenFieldKeyBindings>;\n\n  private _tokens = this.autoDispose(obsArray<TokenWrap<Token>>());\n  private _selection = Observable.create(this, new Set<TokenWrap<Token>>());\n  private _selectionAnchor: TokenWrap<Token>|null = null;\n  private _undoStack: UndoItem[] = [];\n  private _undoIndex = 0;   // The last action done; next to undo.\n  private _inUndoRedo = false;\n  private _variant: ITokenFieldVariant = this._options.variant ?? 'horizontal';\n\n  constructor(private _options: ITokenFieldOptions<Token>) {\n    super();\n    const addSelectedItem = this._addSelectedItem.bind(this);\n    const openAutocomplete = this._openAutocomplete.bind(this);\n    this._acOptions = _options.acOptions && {..._options.acOptions, onClick: addSelectedItem};\n\n    this.setTokens(_options.initialValue);\n    this.tokensObs = this.autoDispose(computedArray(this._tokens, t => t.token));\n    this._keyBindings = {...defaultKeyBindings, ..._options.keyBindings};\n\n    // We can capture undo info in a consistent way as long as we change _tokens using its\n    // obsArray interface, by listening to the splice events.\n    this.autoDispose(this._tokens.addListener(this._recordUndo.bind(this)));\n\n    // Use overridden styles if any were provided.\n    this._styles = {...tokenFieldStyles, ..._options.styles};\n    const {cssTokenField, cssToken, cssInputWrapper, cssTokenInput, cssDeleteButton, cssDeleteIcon} = this._styles;\n\n    function stop(ev: Event) {\n      ev.stopPropagation();\n      ev.preventDefault();\n    }\n\n    this._rootElem = cssTokenField(\n      {tabIndex: '-1'},\n      dom.forEach(this._tokens, (t) =>\n        cssToken(this._options.renderToken(t.token),\n          dom.cls('selected', (use) => use(this._selection).has(t)),\n          _options.readonly ? null : [\n            cssDeleteButton(\n              // Ignore mousedown events, so that tokens aren't draggable by the delete button.\n              dom.on('mousedown', (ev) => ev.stopPropagation()),\n              cssDeleteIcon('CrossSmall'),\n              testId('tokenfield-delete')\n            ),\n            dom.on('click', (ev) =>  this._onTokenClick(ev, t)),\n            dom.on('mousedown', (ev) => this._onMouseDown(ev, t))\n          ],\n          testId('tokenfield-token')\n        ),\n      ),\n      cssInputWrapper(\n        this._textInput = cssTokenInput(\n          dom.boolAttr(\"readonly\", this._options.readonly ?? false),\n          dom.on('focus', this._onInputFocus.bind(this)),\n          dom.on('blur', () => { this._acHolder.clear(); }),\n          (this._acOptions ?\n            // Toggle the autocomplete on clicking the input box.\n            dom.on('click', () => this._acHolder.isEmpty() ? openAutocomplete() : this._acHolder.clear()) :\n            null\n          ),\n          dom.onKeyDown({\n            Escape$: (ev) => { this._acHolder.clear(); },\n            Enter$: (ev) => addSelectedItem() && stop(ev),\n            ArrowDown$: openAutocomplete,\n            Tab$: (ev) => addSelectedItem() && stop(ev),\n          }),\n          dom.on('input', openAutocomplete),\n          testId('tokenfield-input'),\n        ),\n      ),\n      dom.onKeyDown({\n        a$: this._maybeSelectAllTokens.bind(this),\n        Backspace$: this._maybeBackspace.bind(this),\n        Delete$: this._maybeDelete.bind(this),\n        [this._keyBindings.previous + '$']: (ev) => this._maybeAdvance(ev, -1),\n        [this._keyBindings.next + '$']: (ev) => this._maybeAdvance(ev, +1),\n        // ['Mod+z'] triggers undo; ['Mod+Shift+Z', 'Ctrl+y' ] trigger redo\n        z$: (ev) => { if (ev[modKeyProp()]) { ev.shiftKey ? this._redo(ev) : this._undo(ev); } },\n        y$: (ev) => { if (ev.ctrlKey && !ev.shiftKey) { this._redo(ev); } },\n      }),\n      this._hiddenInput = cssHiddenInput({type: 'text', tabIndex: '-1'},\n        dom.on('blur', (ev) => {\n          if (ev.relatedTarget && ev.relatedTarget !== this._rootElem) {\n            this._selectionAnchor = null;\n            this._selection.set(new Set());\n          }\n        }),\n      ),\n      dom.on('focus', () => this._hiddenInput.focus({preventScroll: true})),\n      dom.on('copy', this._onCopyEvent.bind(this)),\n      dom.on('cut', this._onCutEvent.bind(this)),\n      dom.on('paste', this._onPasteEvent.bind(this)),\n      testId('tokenfield'),\n    );\n  }\n\n  public attach(elem: HTMLElement): void {\n    elem.appendChild(this._rootElem);\n  }\n\n  // Outer container for the tokens and new-entry input field.\n  public getRootElem(): HTMLElement {\n    return this._rootElem;\n  }\n\n  // The new-entry input field.\n  public getTextInput(): HTMLInputElement {\n    return this._textInput;\n  }\n\n  /**\n   * Returns the current value of the text input.\n   */\n  public getTextInputValue(): string {\n    return this._options.trimLabels ? this._textInput.value.trim() : this._textInput.value;\n  }\n\n  // The invisible input that has focus while we have some tokens selected.\n  public getHiddenInput(): HTMLInputElement {\n    return this._hiddenInput;\n  }\n\n  /**\n   * Returns the Autocomplete instance used by the TokenField.\n   */\n  public getAutocomplete(): Autocomplete<Token & ACItem> | null {\n    return this._acHolder.get();\n  }\n\n  /**\n   * Sets the `tokens` that the TokenField should be populated with.\n   *\n   * Can be called after the TokenField is created to override the\n   * stored tokens. This is useful for delayed token initialization,\n   * where `tokens` may need to be set shortly after the TokenField\n   * is opened (e.g. ReferenceListEditor).\n   */\n  public setTokens(tokens: Token[]): void {\n    const formattedTokens = this._maybeTrimTokens(tokens);\n    this._tokens.set(formattedTokens.map(t => new TokenWrap(t)));\n  }\n\n  // Replaces a token (if it exists).\n  public replaceToken(label: string, newToken: Token): void {\n    const tokenIdx = this._tokens.get().findIndex(t => t.token.label === label);\n    if (tokenIdx === -1) { return; }\n    this._tokens.splice(tokenIdx, 1, new TokenWrap(newToken));\n  }\n\n  // Open the autocomplete dropdown, if autocomplete was configured in the options.\n  private _openAutocomplete() {\n    // don't open dropdown in a readonly mode\n    if (this._options.readonly) { return; }\n    if (this._acOptions && this._acHolder.isEmpty()) {\n      Autocomplete.create(this._acHolder, this._textInput, this._acOptions);\n    }\n  }\n\n  // Adds the typed-in or selected item. If an item is selected in autocomplete dropdown, adds\n  // that; otherwise if options.createToken is present, creates a token from text input value.\n  private _addSelectedItem(): boolean {\n    let item: Token|undefined = this._acHolder.get()?.getSelectedItem();\n    const textInput = this.getTextInputValue();\n    if (!item && this._options.createToken && textInput) {\n      item = this._options.createToken(textInput);\n    }\n    if (item) {\n      this._tokens.push(new TokenWrap(item));\n      this._textInput.value = '';\n      this._acHolder.clear();\n      return true;\n    }\n    return false;\n  }\n\n  // Handler for when text input is focused: clears selection, optionally opens dropdown.\n  private _onInputFocus() {\n    this._selectionAnchor = null;\n    this._selection.set(new Set());\n    if (this._options.openAutocompleteOnFocus) {\n      this._openAutocomplete();\n    }\n  }\n\n  // Handle for a click on a token or the token's delete button. This handles selection, including\n  // Shift+Click and Ctrl+Click.\n  private _onTokenClick(ev: MouseEvent, t: TokenWrap<Token>) {\n    const idx = this._tokens.get().indexOf(t);\n    if (idx < 0) { return; }\n    if (ev.target && (ev.target as HTMLElement).matches('.' + this._styles.cssDeleteIcon.className)) {\n      // Delete token.\n      this._tokens.splice(idx, 1);\n    } else {\n      const fromIdx = this._selectionAnchor ? this._tokens.get().indexOf(this._selectionAnchor) : -1;\n      if (ev.shiftKey && fromIdx >= 0) {\n        // Shift+Click selects range from selectionAnchor to the clicked token.\n        const [first, last] = fromIdx <= idx ? [fromIdx, idx] : [idx, fromIdx];\n        this._selection.set(new Set(this._tokens.get().slice(first, last + 1)));\n      } else if (ev[modKeyProp()] && fromIdx >= 0) {\n        // Ctrl+Click (or Command+Click on mac) toggles the clicked token.\n        this._toggleTokenSelection(t);\n      } else {\n        // Plain click, or any click in the absence of an anchor element, sets the anchor and\n        // selects just this element.\n        this._resetTokenSelection(t);\n      }\n    }\n    this._setFocus();\n  }\n\n  private _maybeSelectAllTokens(ev: KeyboardEvent) {\n    if (ev[modKeyProp()] && this._textInput.value === '') {\n      ev.stopPropagation();\n      ev.preventDefault();\n      const tokens = this._tokens.get();\n      this._selection.set(new Set(tokens));\n      this._selectionAnchor = tokens ? tokens[0] : null;\n      this._setFocus();\n    }\n  }\n\n  // Set focus appropriately to the textInput or to the outer container.\n  private _setFocus() {\n    if (this._selection.get().size === 0) {\n      this._textInput.focus();\n    } else {\n      this._hiddenInput.focus();\n    }\n  }\n\n  private _maybeBackspace(ev: KeyboardEvent) {\n    if (this._textInput.value === '') {\n      ev.stopPropagation();\n      ev.preventDefault();\n      if (ev.repeat) { return; }\n      if (this._selection.get().size === 0) {\n        this._tokens.pop();\n      } else {\n        this._deleteTokens(this._selection.get(), -1);\n      }\n    }\n  }\n\n  private _maybeDelete(ev: KeyboardEvent) {\n    if (this._textInput.value === '' && this._selection.get().size > 0) {\n      ev.stopPropagation();\n      ev.preventDefault();\n      this._deleteTokens(this._selection.get(), 1);\n    }\n  }\n\n  // Handle arrow and shift+arrow keys, when the text input is empty.\n  private _maybeAdvance(ev: KeyboardEvent, advance: 1|-1): void {\n    if (this._textInput.value !== '') {\n      return;\n    }\n    const tokens = this._tokens.get();\n    const anchorIdx = this._selectionAnchor ? tokens.indexOf(this._selectionAnchor) : -1;\n\n    if (ev.shiftKey && this._selection.get().size > 0 && anchorIdx >= 0) {\n      // For shift+arrows, we either extend or reduce the selection, depending on whether we are\n      // walking away from the anchor or back towards it.\n      const [first, last] = this._getSelectedIndexRange(this._selection.get());\n      if (last < 0) { return; }\n      const toggleIdx = (advance > 0) ?\n        (last === anchorIdx && first < anchorIdx ? first : last + 1) :\n        (first === anchorIdx && last > anchorIdx ? last : first - 1);\n      const t = tokens[toggleIdx];\n      if (t) {\n        ev.stopPropagation();\n        ev.preventDefault();\n        this._toggleTokenSelection(t);\n        this._setFocus();\n      }\n    } else {\n      // For arrow keys, move to the next token after the selection.\n      let next: TokenWrap<Token>|null = null;\n      if (this._selection.get().size > 0) {\n        next = this._getNextToken(this._selection.get(), advance);\n      } else if (advance < 0 && tokens.length > 0) {\n        next = tokens[tokens.length - 1];\n      }\n      // If no next token and we are moving to the right, we should end up back in the text input.\n      if (next || advance > 0) {\n        ev.stopPropagation();\n        ev.preventDefault();\n        this._resetTokenSelection(next);\n        this._setFocus();\n      }\n    }\n  }\n\n  private _toggleTokenSelection(token: TokenWrap<Token>) {\n    const selection = this._selection.get();\n    if (selection.has(token)) {\n      selection.delete(token);\n    } else {\n      selection.add(token);\n    }\n    // We use .setAndTrigger() to set a value that's identical (by reference) to the previous one.\n    this._selection.setAndTrigger(selection);\n  }\n\n  private _resetTokenSelection(token: TokenWrap<Token>|null) {\n    this._selectionAnchor = token;\n    this._selection.set(token ? new Set([token]) : new Set());\n  }\n\n  // Delete the given set of tokens, and select either the following or the preceding one.\n  private _deleteTokens(toDelete: Set<TokenWrap<Token>>, advance: 1|-1|0) {\n    if (this._selection.get().size === 0) { return; }\n    const selectAfter = advance ? this._getNextToken(toDelete, advance) : null;\n    this._tokens.set(this._tokens.get().filter(t => !toDelete.has(t)));\n    this._resetTokenSelection(selectAfter);\n    this._setFocus();\n  }\n\n  private _getNextToken(selection: Set<TokenWrap<Token>>, advance: 1|-1): TokenWrap<Token>|null {\n    const [first, last] = this._getSelectedIndexRange(selection);\n    if (last < 0) { return null; }\n    return this._tokens.get()[advance > 0 ? last + 1 : first - 1] || null;\n  }\n\n  private _getSelectedIndexRange(selection: Set<TokenWrap<Token>>): [number, number] {\n    const tokens = this._tokens.get();\n    let first = -1, last = -1;\n    for (let i = 0; i < tokens.length; i++) {\n      if (selection.has(tokens[i])) {\n        if (first === -1) { first = i; }\n        last = i;\n      }\n    }\n    return [first, last];\n  }\n\n  private _onCopyEvent(ev: ClipboardEvent): boolean {\n    if (!ev.clipboardData || !this._selection.get().size) { return false; }\n    ev.preventDefault();  // Required for overriding: https://www.w3.org/TR/clipboard-apis/#override-copy\n\n    const selected = this._selection.get();\n    const tokens = this._tokens.get().filter(t => selected.has(t));\n    if (this._options.tokensToClipboard) {\n      this._options.tokensToClipboard(tokens.map(t => t.token), ev.clipboardData);\n    } else {\n      const values = tokens.map(t => t.token.label);\n      ev.clipboardData.setData('text/plain', csvEncodeRow(values, {prettier: true}));\n    }\n    return true;\n  }\n\n  private _onCutEvent(ev: ClipboardEvent) {\n    if (this._onCopyEvent(ev)) {\n      this._deleteTokens(this._selection.get(), 0);\n    }\n  }\n\n  private _onPasteEvent(ev: ClipboardEvent) {\n    if (!ev.clipboardData) { return; }\n    ev.preventDefault();\n    let tokens: Token[];\n    if (this._options.clipboardToTokens) {\n      tokens = this._options.clipboardToTokens(ev.clipboardData);\n    } else {\n      const text = ev.clipboardData.getData('text/plain');\n      const values = csvDecodeRow(text);\n      tokens = values.map(v => this._options.createToken(v)).filter((t): t is Token => Boolean(t));\n    }\n    if (!tokens.length) { return; }\n    tokens = this._maybeTrimTokens(tokens);\n    tokens = this._getNonEmptyTokens(tokens);\n    const wrappedTokens = tokens.map(t => new TokenWrap(t));\n    this._combineUndo(() => {\n      this._deleteTokens(this._selection.get(), 1);\n      const anchorIdx = this._selectionAnchor ? this._tokens.get().indexOf(this._selectionAnchor) : -1;\n      if (anchorIdx >= 0) {\n        this._tokens.splice(anchorIdx, 0, ...wrappedTokens);\n        this._selectionAnchor = wrappedTokens[0];\n        this._selection.set(new Set(wrappedTokens));\n      } else {\n        this._tokens.push(...wrappedTokens);\n        this._resetTokenSelection(null);\n      }\n    });\n    this._setFocus();\n  }\n\n  // For a mousedown on a token, register events for mousemove/mouseup, and start dragging as soon\n  // as mousemove occurs.\n  private _onMouseDown(startEvent: MouseEvent, t: TokenWrap<Token>) {\n    const xInitial = startEvent.clientX;\n    const yInitial = startEvent.clientY;\n    const dragTargetSelector = `.${this._styles.cssToken.className}, .${this._styles.cssInputWrapper.className}`;\n    const dragTargetStyle = this._variant === 'horizontal' ? cssDragTarget : cssVerticalDragTarget;\n\n    let started = false;\n    let allTargets: HTMLElement[];\n    let tokenList: HTMLElement[];\n    let nextUnselectedToken: HTMLElement|undefined;\n\n    const onMove = (ev: MouseEvent) => {\n      if (!started) {\n        started = true;\n        // If we started dragging an element that's not part of the selection, reset the selection\n        // to just that element. After this, we are always dragging the active selection.\n        if (!this._selection.get().has(t)) {\n          this._resetTokenSelection(t);\n        }\n\n        this._rootElem.classList.add('token-dragactive');\n\n        // Get a list of all drag targets, and add a CSS class that shows drop location on hover.\n        allTargets = Array.prototype.filter.call(this._rootElem.children, el => el.matches(dragTargetSelector));\n        allTargets.forEach(el => el.classList.add(dragTargetStyle.className));\n\n        // Get a list of element we are dragging, and add a CSS class to show them as dragged.\n        tokenList = allTargets.filter(el => el.matches('.selected'));\n        tokenList.forEach(el => el.classList.add('token-dragging'));\n\n        // Add a CSS class to the first unselected token after the current selection; we use it for showing\n        // the drag/drop markers when hovering over a token.\n        nextUnselectedToken = allTargets.find(el => el.previousElementSibling === tokenList[tokenList.length - 1]);\n        nextUnselectedToken?.classList.add(dragTargetStyle.className + \"-next\");\n        nextUnselectedToken?.style.setProperty('--count', String(tokenList.length));\n      }\n      const xOffset = ev.clientX - xInitial;\n      const yOffset = ev.clientY - yInitial;\n      const transform = `translate(${xOffset}px, ${yOffset}px)`;\n      tokenList.forEach(el => { el.style.transform = transform; });\n    };\n\n    const onStop = (ev: MouseEvent) => {\n      moveLis.dispose();\n      stopLis.dispose();\n\n      // Stop here if dragging never started.\n      if (!started) { return; }\n\n      // Restore all style changes.\n      this._rootElem.classList.remove('token-dragactive');\n      allTargets.forEach(el => el.classList.remove(dragTargetStyle.className));\n      tokenList.forEach(el => el.classList.remove('token-dragging'));\n      tokenList.forEach(el => { el.style.transform = ''; });\n      nextUnselectedToken?.classList.remove(dragTargetStyle.className + \"-next\");\n\n      // Find the token before which we are inserting the dragged elements. If inserting at the\n      // end (just before or over the input box), destToken will be undefined.\n      const index = allTargets.findIndex((target) => target.contains(ev.target as Node));\n      if (index < 0) { return; }\n\n      const destToken: TokenWrap<Token>|undefined = this._tokens.get()[index];\n\n      const selection = this._selection.get();\n      if (selection.has(destToken)) { return; }   // Not actually moving anywhere new.\n\n      const movedTokens = this._tokens.get().filter(tok => selection.has(tok));\n      if (!movedTokens.length) { return; }        // Didn't find any tokens to move.\n\n      this._combineUndo(() => {\n        this._deleteTokens(selection, 0);\n        // Find destination again after the deletion (it's likely to have changed).\n        const destIndex = destToken ? this._tokens.get().indexOf(destToken) : this._tokens.get().length;\n        // Move the tokens and mark them as selected.\n        this._tokens.splice(destIndex, 0, ...movedTokens);\n        this._selectionAnchor = movedTokens[0];\n        this._selection.set(new Set(movedTokens));\n      });\n    };\n\n    const moveLis = dom.onElem(document, 'mousemove', onMove, {useCapture: true});\n    const stopLis = dom.onElem(document, 'mouseup', onStop, {useCapture: true});\n  }\n\n  private _recordUndo(val: TokenWrap<Token>[], prev: TokenWrap<Token>[], change?: IObsArraySplice<TokenWrap<Token>>) {\n    if (this._inUndoRedo) { return; }\n    const splice = change || {start: 0, numAdded: val.length, deleted: [...prev]};\n    const newTokens = val.slice(splice.start, splice.start + splice.numAdded);\n    const redo = () => this._tokens.splice(splice.start, splice.deleted.length, ...newTokens);\n    const undo = () => this._tokens.splice(splice.start, splice.numAdded, ...splice.deleted);\n    this._undoIndex = Math.min(this._undoIndex + 1, this._undoStack.length);\n    this._undoStack.splice(this._undoIndex, this._undoStack.length, new UndoItem(redo, undo));\n  }\n\n  private _combineUndo(callback: () => void) {\n    const nextAction = this._undoIndex + 1;\n    try {\n      callback();\n    } finally {\n      if (this._undoStack.length > nextAction + 1) {\n        // If multiple actions were added, combine them into one.\n        const actions = this._undoStack.slice(nextAction);\n        const redo = () => actions.forEach(a => a.redo());\n        const undo = () => actions.slice().reverse().forEach(a => a.undo());\n        this._undoIndex = nextAction;\n        this._undoStack.splice(this._undoIndex, actions.length, new UndoItem(redo, undo));\n      }\n    }\n  }\n\n  private _undo(ev: KeyboardEvent): void {\n    if (this._textInput.value === '' && this._undoIndex >= 0 && this._undoIndex < this._undoStack.length) {\n      ev.stopPropagation();\n      ev.preventDefault();\n      this._inUndoRedo = true;\n      try {\n        this._undoStack[this._undoIndex].undo();\n        this._undoIndex--;\n      } finally {\n        this._inUndoRedo = false;\n      }\n    }\n  }\n\n  private _redo(ev: KeyboardEvent): void {\n    if (this._undoIndex + 1 < this._undoStack.length) {\n      ev.stopPropagation();\n      ev.preventDefault();\n      this._inUndoRedo = true;\n      try {\n        this._undoIndex += 1;\n        this._undoStack[this._undoIndex].redo();\n      } finally {\n        this._inUndoRedo = false;\n      }\n    }\n  }\n\n  /**\n   * Returns an array of tokens formatted according to the `trimLabels` option.\n   */\n  private _maybeTrimTokens(tokens: Token[]): Token[] {\n    if (!this._options.trimLabels) { return tokens; }\n    return tokens.map(t => ({...t, label: t.label.trim()}));\n  }\n\n  /**\n   * Returns a filtered array of tokens that don't have empty labels.\n   */\n  private _getNonEmptyTokens(tokens: Token[]): Token[] {\n    return tokens.filter(t => t.label !== '');\n  }\n}\n\nconst cssTokenField = styled('div', `\n  display: flex;\n  border: 1px solid ${colors.darkGrey};\n  border-radius: 3px;\n  padding: 0 4px;\n  line-height: 16px;\n\n  &.token-dragactive {\n    cursor: grabbing;\n  }\n`);\n\nconst cssToken = styled('div', `\n  position: relative;\n  flex: none;\n  border-radius: 3px;\n  background-color: ${colors.mediumGreyOpaque};\n  padding: 4px;\n  margin: 3px 2px;\n  user-select: none;\n  cursor: grab;\n\n  &.selected {\n    background-color: ${colors.darkGrey};\n  }\n  &.token-dragging {\n    pointer-events: none;\n    z-index: 1;\n    opacity: 0.7;\n  }\n  .${cssTokenField.className}.token-dragactive & {\n    cursor: unset;\n  }\n`);\n\nconst cssInputWrapper = styled('div', `\n  position: relative;\n  flex: auto;\n  margin: 3px 2px;\n  display: flex;\n`);\n\nconst cssTokenInput = styled('input', `\n  color: ${theme.cellEditorFg};\n  background-color: ${theme.cellEditorBg};\n  flex: auto;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  padding: 0;\n  border: none;\n  outline: none;\n  line-height: inherit;\n`);\n\n// This class is applied to tokens and the input box on start of dragging, to use them as drag\n// targets. Insertion point will always be to the left of them. While dragging, these include a\n// transparent pseudo-element to cover some area to the left, to know when it's a suitable drop\n// position. While the drag is over the element (or its extension), it gets shifted to show\n// the user the location of the drop using another pseudo-element.\nconst cssDragTarget = styled('div', `\n  &::before {\n    content: \"\";\n    position: absolute;\n    left: -8px;\n    right: 50%;\n    top: 0px;\n    bottom: 0px;\n  }\n  &:hover {\n    transform: translateX(2px);\n  }\n  &:hover::after {\n    content: \"\";\n    position: absolute;\n    background-color: ${colors.lightGreen};\n    width: 2px;\n    top: 0px;\n    bottom: 0px;\n    left: -4px;\n  }\n`);\n\nconst cssVerticalDragTarget = styled('div', `\n  /* This pseudo-element prevents small, flickering height changes when\n   * dragging the selection over targets. */\n  &::before {\n    content: \"\";\n    position: absolute;\n    top: -8px;\n    bottom: 0px;\n    left: 0px;\n    right: 0px;\n  }\n  &-next::before {\n    /* 27.75px is the height of a token. */\n    top: calc(-27.75px * var(--count, 1) - 8px);\n  }\n  &:hover {\n    transform: translateY(4px);\n    margin-bottom: 8px;\n  }\n  &:hover::after {\n    content: \"\";\n    position: absolute;\n    background-color: ${colors.lightGreen};\n    height: 2px;\n    top: -5px;\n    bottom: 0px;\n    left: 0px;\n    right: 0px;\n  }\n`);\n\nconst cssHiddenInput = styled('input', `\n  left: -10000px;\n  width: 1px;\n  position: absolute;\n`);\n\nconst cssDeleteButton = styled('div', `\n  display: inline;\n  margin-left: 4px;\n  vertical-align: bottom;\n  line-height: 1;\n  cursor: pointer;\n  .${cssTokenField.className}.token-dragactive & {\n    cursor: unset;\n  }\n`);\n\nconst cssDeleteIcon = styled(icon, `\n  --icon-color: ${colors.slate};\n  &:hover {\n    --icon-color: ${colors.dark};\n  }\n`);\n\nexport const tokenFieldStyles = {\n  cssTokenField,\n  cssToken,\n  cssInputWrapper,\n  cssTokenInput,\n  cssDeleteButton,\n  cssDeleteIcon,\n};\n\nexport type ITokenFieldStyles = Partial<typeof tokenFieldStyles>;\n","import {BaseAPI, IOptions} from 'app/common/BaseAPI';\nimport {InstallPrefs} from 'app/common/Install';\nimport {TelemetryLevel} from 'app/common/Telemetry';\nimport {addCurrentOrgToPath} from 'app/common/urlUtils';\n\nexport const installPropertyKeys = ['prefs'];\n\nexport interface InstallProperties {\n  prefs: InstallPrefs;\n}\n\nexport interface InstallPrefsWithSources {\n  telemetry: {\n    telemetryLevel: PrefWithSource<TelemetryLevel>;\n  },\n}\n\nexport type TelemetryPrefsWithSources = InstallPrefsWithSources['telemetry'];\n\nexport interface PrefWithSource<T> {\n  value: T;\n  source: PrefSource;\n}\n\nexport type PrefSource = 'environment-variable' | 'preferences';\n\nexport interface InstallAPI {\n  getInstallPrefs(): Promise<InstallPrefsWithSources>;\n  updateInstallPrefs(prefs: Partial<InstallPrefs>): Promise<void>;\n}\n\nexport class InstallAPIImpl extends BaseAPI implements InstallAPI {\n  constructor(private _homeUrl: string, options: IOptions = {}) {\n    super(options);\n  }\n\n  public async getInstallPrefs(): Promise<InstallPrefsWithSources> {\n    return this.requestJson(`${this._url}/api/install/prefs`, {method: 'GET'});\n  }\n\n  public async updateInstallPrefs(prefs: Partial<InstallPrefs>): Promise<void> {\n    await this.request(`${this._url}/api/install/prefs`, {\n      method: 'PATCH',\n      body: JSON.stringify({...prefs}),\n    });\n  }\n\n  private get _url(): string {\n    return addCurrentOrgToPath(this._homeUrl);\n  }\n}\n","import {AppModel, getHomeUrl} from 'app/client/models/AppModel';\nimport {TelemetryPrefs} from 'app/common/Install';\nimport {InstallAPI, InstallAPIImpl, TelemetryPrefsWithSources} from 'app/common/InstallAPI';\nimport {bundleChanges, Disposable, Observable} from 'grainjs';\n\nexport interface TelemetryModel {\n  /** Telemetry preferences (e.g. the current telemetry level). */\n  readonly prefs: Observable<TelemetryPrefsWithSources | null>;\n  fetchTelemetryPrefs(): Promise<void>;\n  updateTelemetryPrefs(prefs: Partial<TelemetryPrefs>): Promise<void>;\n}\n\nexport class TelemetryModelImpl extends Disposable implements TelemetryModel {\n  public readonly prefs: Observable<TelemetryPrefsWithSources | null> = Observable.create(this, null);\n  private readonly _installAPI: InstallAPI = new InstallAPIImpl(getHomeUrl());\n\n  constructor(_appModel: AppModel) {\n    super();\n  }\n\n  public async fetchTelemetryPrefs(): Promise<void> {\n    const prefs = await this._installAPI.getInstallPrefs();\n    bundleChanges(() => {\n      this.prefs.set(prefs.telemetry);\n    });\n  }\n\n  public async updateTelemetryPrefs(prefs: Partial<TelemetryPrefs>): Promise<void> {\n    await this._installAPI.updateInstallPrefs({telemetry: prefs});\n    await this.fetchTelemetryPrefs();\n  }\n}\n","import {makeT} from 'app/client/lib/localization';\nimport {localStorageObs} from 'app/client/lib/localStorageObs';\nimport {getStorage} from 'app/client/lib/storage';\nimport {tokenFieldStyles} from 'app/client/lib/TokenField';\nimport {AppModel} from 'app/client/models/AppModel';\nimport {urlState} from 'app/client/models/gristUrlState';\nimport {TelemetryModel, TelemetryModelImpl} from 'app/client/models/TelemetryModel';\nimport {bigPrimaryButton} from 'app/client/ui2018/buttons';\nimport {colors, isNarrowScreenObs, theme, vars} from 'app/client/ui2018/cssVars';\nimport {icon} from 'app/client/ui2018/icons';\nimport {cssLink} from 'app/client/ui2018/links';\nimport {commonUrls} from 'app/common/gristUrls';\nimport {getGristConfig} from 'app/common/urlUtils';\nimport {Disposable, dom, makeTestId, Observable, styled} from 'grainjs';\n\nconst testId = makeTestId('test-support-grist-nudge-');\n\nconst t = makeT('SupportGristNudge');\n\ntype ButtonState =\n  | 'collapsed'\n  | 'expanded';\n\ntype CardPage =\n  | 'support-grist'\n  | 'opted-in';\n\n/**\n * Nudges users to support Grist by opting in to telemetry.\n *\n * This currently includes a button that opens a card with the nudge.\n * The button is hidden when the card is visible, and vice versa.\n */\nexport class SupportGristNudge extends Disposable {\n  private readonly _telemetryModel: TelemetryModel = new TelemetryModelImpl(this._appModel);\n\n  private readonly _buttonState: Observable<ButtonState>;\n  private readonly _currentPage: Observable<CardPage>;\n  private readonly _isClosed: Observable<boolean>;\n\n  constructor(private _appModel: AppModel) {\n    super();\n    if (!this._shouldShowCardOrButton()) { return; }\n\n    this._buttonState = localStorageObs(\n      `u=${this._appModel.currentValidUser?.id ?? 0};supportGristNudge`, 'expanded'\n    ) as Observable<ButtonState>;\n    this._currentPage = Observable.create(null, 'support-grist');\n    this._isClosed = Observable.create(this, false);\n  }\n\n  public showButton() {\n    if (!this._shouldShowCardOrButton()) { return null; }\n\n    return dom.maybe(\n      use => !use(isNarrowScreenObs()) && (use(this._buttonState) === 'collapsed' && !use(this._isClosed)),\n      () => this._buildButton()\n    );\n  }\n\n  public showCard() {\n    if (!this._shouldShowCardOrButton()) { return null; }\n\n    return dom.maybe(\n      use => !use(isNarrowScreenObs()) && (use(this._buttonState) === 'expanded' && !use(this._isClosed)),\n      () => this._buildCard()\n    );\n  }\n\n  private _markAsDismissed() {\n    this._appModel.dismissedPopup('supportGrist').set(true);\n    getStorage().removeItem(\n      `u=${this._appModel.currentValidUser?.id ?? 0};supportGristNudge`);\n\n  }\n\n  private _close() {\n    this._isClosed.set(true);\n  }\n\n  private _dismissAndClose() {\n    this._markAsDismissed();\n    this._close();\n  }\n\n  private _shouldShowCardOrButton() {\n    if (this._appModel.dismissedPopups.get().includes('supportGrist')) {\n      return false;\n    }\n\n    const {activation, deploymentType, telemetry} = getGristConfig();\n    if (deploymentType !== 'core' || !activation?.isManager) {\n      return false;\n    }\n\n    if (telemetry && telemetry.telemetryLevel !== 'off') {\n      return false;\n    }\n\n    return true;\n  }\n\n  private _buildButton() {\n    return cssContributeButton(\n      cssButtonIconAndText(\n        icon('Fireworks'),\n        t('Contribute'),\n      ),\n      cssContributeButtonCloseButton(\n        icon('CrossSmall'),\n        dom.on('click', (ev) => {\n          ev.stopPropagation();\n          this._dismissAndClose();\n        }),\n        testId('contribute-button-close'),\n      ),\n      dom.on('click', () => { this._buttonState.set('expanded'); }),\n      testId('contribute-button'),\n    );\n  }\n\n  private _buildCard() {\n    return cssCard(\n      dom.domComputed(this._currentPage, page => {\n        if (page === 'support-grist') {\n          return this._buildSupportGristCardContent();\n        } else {\n          return this._buildOptedInCardContent();\n        }\n      }),\n      testId('card'),\n    );\n  }\n\n  private _buildSupportGristCardContent() {\n    return [\n      cssCloseButton(\n        icon('CrossBig'),\n        dom.on('click', () => this._buttonState.set('collapsed')),\n        testId('card-close'),\n      ),\n      cssLeftAlignedHeader(t('Support Grist')),\n      cssParagraph(t(\n        'Opt in to telemetry to help us understand how the product ' +\n        'is used, so that we can prioritize future improvements.'\n      )),\n      cssParagraph(\n        t(\n          'We only collect usage statistics, as detailed in our {{helpCenterLink}}, never ' +\n          'document contents. Opt out any time from the {{supportGristLink}} in the user menu.',\n          {\n            helpCenterLink: helpCenterLink(),\n            supportGristLink: supportGristLink(),\n          },\n        ),\n      ),\n      cssFullWidthButton(\n        t('Opt in to Telemetry'),\n        dom.on('click', () => this._optInToTelemetry()),\n        testId('card-opt-in'),\n      ),\n    ];\n  }\n\n  private _buildOptedInCardContent() {\n    return [\n      cssCloseButton(\n        icon('CrossBig'),\n        dom.on('click', () => this._close()),\n        testId('card-close-icon-button'),\n      ),\n      cssCenteredFlex(cssSparks()),\n      cssCenterAlignedHeader(t('Opted In')),\n      cssParagraph(\n        t(\n          'Thank you! Your trust and support is greatly appreciated. ' +\n          'Opt out any time from the {{link}} in the user menu.',\n          {link: supportGristLink()},\n        ),\n      ),\n      cssCenteredFlex(\n        cssPrimaryButton(\n          t('Close'),\n          dom.on('click', () => this._close()),\n          testId('card-close-button'),\n        ),\n      ),\n    ];\n  }\n\n  private async _optInToTelemetry() {\n    await this._telemetryModel.updateTelemetryPrefs({telemetryLevel: 'limited'});\n    this._currentPage.set('opted-in');\n    this._markAsDismissed();\n  }\n}\n\nfunction helpCenterLink() {\n  return cssLink(\n    t('Help Center'),\n    {href: commonUrls.helpTelemetryLimited, target: '_blank'},\n  );\n}\n\nfunction supportGristLink() {\n  return cssLink(\n    t('Support Grist page'),\n    {href: urlState().makeUrl({supportGrist: 'support-grist'}), target: '_blank'},\n  );\n}\n\nconst cssCenteredFlex = styled('div', `\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`);\n\nconst cssContributeButton = styled('div', `\n  position: relative;\n  background: ${theme.controlPrimaryBg};\n  color: ${theme.controlPrimaryFg};\n  border-radius: 25px;\n  padding: 4px 12px 4px 8px;\n  font-style: normal;\n  font-weight: medium;\n  font-size: 13px;\n  line-height: 16px;\n  cursor: pointer;\n  --icon-color: ${theme.controlPrimaryFg};\n\n  &:hover {\n    background: ${theme.controlPrimaryHoverBg};\n  }\n`);\n\nconst cssButtonIconAndText = styled('div', `\n  display: flex;\n  gap: 8px;\n`);\n\nconst cssContributeButtonCloseButton = styled(tokenFieldStyles.cssDeleteButton, `\n  margin-left: 4px;\n  vertical-align: bottom;\n  line-height: 1;\n  position: absolute;\n  top: -4px;\n  right: -8px;\n  border-radius: 16px;\n  background-color: ${colors.dark};\n  width: 18px;\n  height: 18px;\n  cursor: pointer;\n  z-index: 1;\n  display: none;\n  align-items: center;\n  justify-content: center;\n\n  .${cssContributeButton.className}:hover & {\n    display: flex;\n  }\n`);\n\nconst cssCard = styled('div', `\n  width: 297px;\n  padding: 24px;\n  background: #DCF4EB;\n  border-radius: 4px;\n  align-self: flex-start;\n  position: sticky;\n  flex-shrink: 0;\n  top: 0px;\n`);\n\nconst cssHeader = styled('div', `\n  font-size: ${vars.xxxlargeFontSize};\n  font-weight: 600;\n  margin-bottom: 16px;\n`);\n\nconst cssLeftAlignedHeader = styled(cssHeader, `\n  text-align: left;\n`);\n\nconst cssCenterAlignedHeader = styled(cssHeader, `\n  text-align: center;\n`);\n\nconst cssParagraph = styled('div', `\n  font-size: 13px;\n  line-height: 18px;\n  margin-bottom: 12px;\n`);\n\nconst cssPrimaryButton = styled(bigPrimaryButton, `\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: 32px;\n  text-align: center;\n`);\n\nconst cssFullWidthButton = styled(cssPrimaryButton, `\n  width: 100%;\n`);\n\nconst cssCloseButton = styled('div', `\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  padding: 4px;\n  border-radius: 4px;\n  cursor: pointer;\n  --icon-color: ${colors.slate};\n\n  &:hover {\n    background-color: ${colors.mediumGreyOpaque};\n  }\n`);\n\nconst cssSparks = styled('div', `\n  height: 48px;\n  width: 48px;\n  background-image: var(--icon-Sparks);\n  display: inline-block;\n  background-repeat: no-repeat;\n`);\n","export interface SnapshotWindow {\n  count: number;\n  unit: 'days' | 'month' | 'year';\n}\n\n// Information about the product associated with an org or orgs.\nexport interface Product {\n  name: string;\n  features: Features;\n}\n\n\n// A product is essentially a list of flags and limits that we may enforce/support.\nexport interface Features {\n  vanityDomain?: boolean;   // are user-selected domains allowed (unenforced) (default: true)\n\n  workspaces?: boolean;     // are workspaces shown in web interface (default: true)\n                            // (this was intended as something we can turn off to shut down\n                            // web access to content while leaving access to billing)\n\n  /**\n   * Some optional limits.  Since orgs can change plans, limits will typically be checked\n   * at the point of creation.  E.g. adding someone new to a document, or creating a\n   * new document.  If, after an operation, the limit would be exceeded, that operation\n   * is denied.  That means it is possible to exceed limits if the limits were not in\n   * place when shares/docs were originally being added.  The action that would need\n   * to be taken when infringement is pre-existing is not so obvious.\n   */\n\n  maxSharesPerDoc?: number; // Maximum number of users that can be granted access to a\n                            // particular doc.  Doesn't count users granted access at\n                            // workspace or organization level.  Doesn't count billable\n                            // users if applicable (default: unlimited)\n\n  maxSharesPerDocPerRole?: {[role: string]: number};  // As maxSharesPerDoc, but\n                            // for specific roles.  Roles are named as in app/common/roles.\n                            // Applied independently to maxSharesPerDoc.\n                            // (default: unlimited)\n  maxSharesPerWorkspace?: number;  // Maximum number of users that can be granted access to\n                            // a particular workspace.  Doesn't count users granted access\n                            // at organizational level, or billable users (default: unlimited)\n\n  maxDocsPerOrg?: number;   // Maximum number of documents allowed per org.\n                            // (default: unlimited)\n  maxWorkspacesPerOrg?: number;   // Maximum number of workspaces allowed per org.\n                            // (default: unlimited)\n\n  readOnlyDocs?: boolean;   // if set, docs can only be read, not written.\n\n  snapshotWindow?: SnapshotWindow;  // if set, controls how far back snapshots are kept.\n\n  baseMaxRowsPerDocument?: number;  // If set, establishes a default maximum on the\n                                 // number of rows (total) in a single document.\n                                 // Actual max for a document may be higher.\n  baseMaxApiUnitsPerDocumentPerDay?: number;  // Similar for api calls.\n  baseMaxDataSizePerDocument?: number;  // Similar maximum for number of bytes of 'normal' data in a document\n  baseMaxAttachmentsBytesPerDocument?: number;  // Similar maximum for total number of bytes used\n                                                // for attached files in a document\n\n  gracePeriodDays?: number;  // Duration of the grace period in days, before entering delete-only mode\n\n  baseMaxAssistantCalls?: number; // Maximum number of AI assistant calls. Defaults to 0 if not set, use -1 to indicate\n                                  // unbound limit. This is total limit, not per month or per day, it is used as a seed\n                                  // value for the limits table. To create a per-month limit, there must be a separate\n                                  // task that resets the usage in the limits table.\n}\n\n// Check whether it is possible to add members at the org level.  There's no flag\n// for this right now, it isn't enforced at the API level, it is just a bluff.\n// For now, when maxWorkspacesPerOrg is 1, we should assume members can't be added\n// to org (even though this is not enforced).\nexport function canAddOrgMembers(features: Features): boolean {\n  return features.maxWorkspacesPerOrg !== 1;\n}\n\n\nexport const PERSONAL_LEGACY_PLAN = 'starter';\nexport const PERSONAL_FREE_PLAN = 'personalFree';\nexport const TEAM_FREE_PLAN = 'teamFree';\nexport const TEAM_PLAN = 'team';\n\nexport const displayPlanName: { [key: string]: string } = {\n  [PERSONAL_LEGACY_PLAN]: 'Free Personal (Legacy)',\n  [PERSONAL_FREE_PLAN]: 'Free Personal',\n  [TEAM_FREE_PLAN]: 'Team Free',\n  [TEAM_PLAN]: 'Pro'\n} as const;\n\n// Returns true if `planName` is for a personal product.\nexport function isPersonalPlan(planName: string): boolean {\n  return isFreePersonalPlan(planName);\n}\n\n// Returns true if `planName` is for a free personal product.\nexport function isFreePersonalPlan(planName: string): boolean {\n  return [PERSONAL_LEGACY_PLAN, PERSONAL_FREE_PLAN].includes(planName);\n}\n\n// Returns true if `planName` is for a legacy product.\nexport function isLegacyPlan(planName: string): boolean {\n  return isFreeLegacyPlan(planName);\n}\n\n// Returns true if `planName` is for a free legacy product.\nexport function isFreeLegacyPlan(planName: string): boolean {\n  return [PERSONAL_LEGACY_PLAN].includes(planName);\n}\n\n// Returns true if `planName` is for a team product.\nexport function isTeamPlan(planName: string): boolean {\n  return !isPersonalPlan(planName);\n}\n\n// Returns true if `planName` is for a free team product.\nexport function isFreeTeamPlan(planName: string): boolean {\n  return [TEAM_FREE_PLAN].includes(planName);\n}\n\n// Returns true if `planName` is for a free product.\nexport function isFreePlan(planName: string): boolean {\n  return (\n    isFreePersonalPlan(planName) ||\n    isFreeTeamPlan(planName) ||\n    isFreeLegacyPlan(planName) ||\n    planName === 'Free'\n  );\n}\n","import {Organization} from 'app/common/UserAPI';\n\nexport const OWNER  = 'owners';\nexport const EDITOR = 'editors';\nexport const VIEWER = 'viewers';\nexport const GUEST  = 'guests';\nexport const MEMBER = 'members';\n\n// Roles ordered from most to least permissive.\nconst roleOrder: Array<Role|null> = [OWNER, EDITOR, VIEWER, MEMBER, GUEST, null];\n\nexport type BasicRole = 'owners'|'editors'|'viewers';\nexport type NonMemberRole = BasicRole|'guests';\nexport type NonGuestRole = BasicRole|'members';\nexport type Role = NonMemberRole|'members';\n\n// Returns the BasicRole (or null) with the same effective access as the given role.\nexport function getEffectiveRole(role: Role|null): BasicRole|null {\n  if (role === GUEST || role === MEMBER) {\n    return VIEWER;\n  } else {\n    return role;\n  }\n}\n\nexport function canEditAccess(role: string|null): boolean {\n  return role === OWNER;\n}\n\n// Note that while canEdit has the same return value as canDelete, the functions are\n// kept separate as they may diverge in the future.\nexport function canEdit(role: string|null): boolean {\n  return role === OWNER || role === EDITOR;\n}\n\nexport function canDelete(role: string|null): boolean {\n  return role === OWNER || role === EDITOR;\n}\n\nexport function canView(role: string|null): boolean {\n  return role !== null;\n}\n\nexport function isOwner(resource: {access: Role}|null): resource is {access: Role} {\n  return resource?.access === OWNER;\n}\n\nexport function isOwnerOrEditor(resource: {access: Role}|null): resource is {access: Role} {\n  return canEdit(resource?.access ?? null);\n}\n\nexport function canUpgradeOrg(org: Organization|null): org is Organization {\n  // TODO: Need to consider billing managers and support user.\n  return isOwner(org);\n}\n\n// Returns true if the role string is a valid role or null.\nexport function isValidRole(role: string|null): role is Role|null {\n  return (roleOrder as Array<string|null>).includes(role);\n}\n\n// Returns true if the role string is a valid non-Guest, non-Member, non-null role.\nexport function isBasicRole(role: string|null): role is BasicRole {\n  return Boolean(role && role !== GUEST && role !== MEMBER && isValidRole(role));\n}\n\n// Returns true if the role string is a valid non-Guest, non-null role.\nexport function isNonGuestRole(role: string|null): role is NonGuestRole {\n  return Boolean(role && role !== GUEST && isValidRole(role));\n}\n\n/**\n * Returns out of any number of group role names the one that offers more permissions. The function\n * is overloaded so that the output type matches the specificity of the input values.\n */\nexport function getStrongestRole<T extends Role|null>(...args: T[]): T {\n  return getFirstMatchingRole(roleOrder, args);\n}\n\n/**\n * Returns out of any number of group role names the one that offers fewer permissions. The function\n * is overloaded so that the output type matches the specificity of the input values.\n */\nexport function getWeakestRole<T extends Role|null>(...args: T[]): T {\n  return getFirstMatchingRole(roleOrder.slice().reverse(), args);\n}\n\n// Returns which of the `anyOf` args comes first in `array`. Helper for getStrongestRole\n// and getWeakestRole.\nfunction getFirstMatchingRole<T extends Role|null>(array: Array<Role|null>, anyOf: T[]): T {\n  if (anyOf.length === 0) {\n    throw new Error(`getFirstMatchingRole: No roles given`);\n  }\n  for (const role of anyOf) {\n    if (!isValidRole(role)) {\n      throw new Error(`getFirstMatchingRole: Invalid role ${role}`);\n    }\n  }\n  return array.find((item) => anyOf.includes(item as T)) as T;\n}\n","import {ThemeColors} from 'app/common/ThemePrefs';\n\nexport const GristDark: ThemeColors = {\n  /* Text */\n  'text': '#EFEFEF',\n  'text-light': '#A4A4A4',\n  'text-dark': '#FFFFFF',\n  'text-error': '#FF6666',\n  'text-danger': '#FFA500',\n  'text-disabled': '#A4A4A4',\n\n  /* Page */\n  'page-bg': '#262633',\n  'page-backdrop': 'black',\n\n  /* Page Panels */\n  'page-panels-main-panel-bg': '#32323F',\n  'page-panels-left-panel-bg': '#262633',\n  'page-panels-right-panel-bg': '#262633',\n  'page-panels-top-header-bg': '#32323F',\n  'page-panels-bottom-footer-bg': '#32323F',\n  'page-panels-border': '#57575F',\n  'page-panels-border-resizing': '#1DA270',\n  'page-panels-side-panel-opener-fg': '#A4A4A4',\n  'page-panels-side-panel-opener-active-fg': '#FFFFFF',\n  'page-panels-side-panel-opener-active-bg': '#1DA270',\n\n  /* Add New */\n  'add-new-circle-fg': '#FFFFFF',\n  'add-new-circle-bg': '#157A54',\n  'add-new-circle-hover-bg': '#0A5438',\n  'add-new-circle-small-fg': '#FFFFFF',\n  'add-new-circle-small-bg': '#1DA270',\n  'add-new-circle-small-hover-bg': '#157A54',\n\n  /* Top Bar */\n  'top-bar-button-primary-fg': '#1DA270',\n  'top-bar-button-secondary-fg': '#A4A4A4',\n  'top-bar-button-disabled-fg': '#69697D',\n  'top-bar-button-error-fg': 'FF6666',\n\n  /* Notifications */\n  'notifications-panel-header-bg': '#262633',\n  'notifications-panel-body-bg': '#32323F',\n  'notifications-panel-border': '#69697D',\n\n  /* Toasts */\n  'toast-text': '#FFFFFF',\n  'toast-text-light': '#929299',\n  'toast-bg': '#040404',\n  'toast-memo-text': '#EFEFEF',\n  'toast-memo-bg': '#555563',\n  'toast-error-icon': '#D0021B',\n  'toast-error-bg': '#D0021B',\n  'toast-success-icon': '#009058',\n  'toast-success-bg': '#009058',\n  'toast-warning-icon': '#F9AE41',\n  'toast-warning-bg': '#DD962C',\n  'toast-info-icon': '#3B82F6',\n  'toast-info-bg': '#3B82F6',\n  'toast-control-fg': '#16B378',\n  'toast-control-info-fg': '#87B2F9',\n\n  /* Tooltips */\n  'tooltip-fg': 'white',\n  'tooltip-bg': 'rgba(0, 0, 0, 0.75)',\n  'tooltip-icon': '#A4A4A4',\n  'tooltip-close-button-fg': 'white',\n  'tooltip-close-button-hover-fg': 'black',\n  'tooltip-close-button-hover-bg': 'white',\n  'tooltip-popup-header-fg': '#EFEFEF',\n  'tooltip-popup-header-bg': '#1DA270',\n\n  /* Modals */\n  'modal-bg': '#32323F',\n  'modal-backdrop': 'rgba(0,0,0,0.6)',\n  'modal-border': '#57575F',\n  'modal-border-dark': '#69697D',\n  'modal-border-hover': '#A4A4A4',\n  'modal-shadow-inner': '#000000',\n  'modal-shadow-outer': '#000000',\n  'modal-close-button-fg': '#A4A4A4',\n  'modal-backdrop-close-button-fg': '#1DA270',\n  'modal-backdrop-close-button-hover-fg': '#157A54',\n\n  /* Popups */\n  'popup-bg': '#32323F',\n  'popup-shadow-inner': '#000000',\n  'popup-shadow-outer': '#000000',\n  'popup-close-button-fg': '#A4A4A4',\n\n  /* Prompts */\n  'prompt-fg': '#A4A4A4',\n\n  /* Progress Bars */\n  'progress-bar-fg': '#1DA270',\n  'progress-bar-error-fg': '#FF6666',\n  'progress-bar-bg': '#69697D',\n\n  /* Links */\n  'link': '#1DA270',\n  'link-hover': '#1DA270',\n\n  /* Hover */\n  'hover': 'rgba(111,111,117,0.6)',\n  'hover-light': 'rgba(111,111,117,0.4)',\n\n  /* Cell Editor */\n  'cell-editor-fg': '#FFFFFF',\n  'cell-editor-bg': '#32323F',\n\n  /* Cursor */\n  'cursor': '#1DA270',\n  'cursor-inactive': 'rgba(29,162,112,0.5)',\n  'cursor-readonly': '#A4A4A4',\n\n  /* Tables */\n  'table-header-fg': '#EFEFEF',\n  'table-header-selected-fg': '#EFEFEF',\n  'table-header-bg': '#262633',\n  'table-header-selected-bg': '#414358',\n  'table-header-border': '#57575F',\n  'table-header-border-dark': '#69697D',\n  'table-body-bg': '#32323F',\n  'table-body-border': '#69697D',\n  'table-add-new-bg': '#4A4A5D',\n  'table-scroll-shadow': '#000000',\n  'table-frozen-columns-border': '#A4A4A4',\n  'table-drag-drop-indicator': '#A4A4A4',\n  'table-drag-drop-shadow': 'rgba(111,111,117,0.6)',\n\n  /* Cards */\n  'card-compact-widget-bg': '#262633',\n  'card-compact-record-bg': '#32323F',\n  'card-blocks-bg': '#404150',\n  'card-form-label': '#A4A4A4',\n  'card-compact-label': '#A4A4A4',\n  'card-blocks-label': '#A4A4A4',\n  'card-form-border': '#69697D',\n  'card-compact-border': '#69697D',\n  'card-editing-layout-bg': 'rgba(85, 85, 99, 0.2)',\n  'card-editing-layout-border': '#69697D',\n\n  /* Card Lists */\n  'card-list-form-border': '#57575F',\n  'card-list-blocks-border': '#57575F',\n\n  /* Selection */\n  'selection': 'rgba(22,179,120,0.15)',\n  'selection-darker': 'rgba(22,179,120,0.25)',\n  'selection-darkest': 'rgba(22,179,120,0.35)',\n  'selection-opaque-fg': 'white',\n  'selection-opaque-bg': '#2F4748',\n  'selection-opaque-dark-bg': '#253E3E',\n  'selection-header': 'rgba(107,107,144,0.4)',\n\n  /* Widgets */\n  'widget-bg': '#32323F',\n  'widget-border': '#57575F',\n  'widget-active-border': '#1DA270',\n  'widget-inactive-stripes-light': '#262633',\n  'widget-inactive-stripes-dark': '#32323F',\n\n  /* Pinned Docs */\n  'pinned-doc-footer-bg': '#32323F',\n  'pinned-doc-border': '#57575F',\n  'pinned-doc-border-hover': '#A4A4A4',\n  'pinned-doc-editor-bg': '#57575F',\n\n  /* Raw Data */\n  'raw-data-table-border': '#57575F',\n  'raw-data-table-border-hover': '#A4A4A4',\n\n  /* Controls */\n  'control-fg': '#1DA270',\n  'control-primary-fg': '#FFFFFF',\n  'control-primary-bg': '#1DA270',\n  'control-secondary-fg': '#A4A4A4',\n  'control-hover-fg': '#157A54',\n  'control-primary-hover-bg': '#157A54',\n  'control-secondary-hover-fg': '#EFEFEF',\n  'control-secondary-hover-bg': '#57575F',\n  'control-disabled-fg': '#A4A4A4',\n  'control-disabled-bg': '#69697D',\n  'control-primary-disabled': '#5F8C7B',\n  'control-border': '1px solid #1DA270',\n\n  /* Checkboxes */\n  'checkbox-bg': '#32323F',\n  'checkbox-disabled-bg': '#69697D',\n  'checkbox-border': '#69697D',\n  'checkbox-border-hover': '#57575F',\n\n  /* Move Docs */\n  'move-docs-selected-fg': '#FFFFFF',\n  'move-docs-selected-bg': '#1DA270',\n  'move-docs-disabled-bg': '#69697D',\n\n  /* Filter Bar */\n  'filter-bar-button-saved-fg': '#FFFFFF',\n  'filter-bar-button-saved-bg': '#555563',\n  'filter-bar-button-saved-hover-bg': '#69697D',\n\n  /* Icons */\n  'icon-disabled': '#A4A4A4',\n  'icon-error': '#FFA500',\n\n  /* Icon Buttons */\n  'icon-button-fg': '#FFFFFF',\n  'icon-button-primary-bg': '#1DA270',\n  'icon-button-primary-hover-bg': '#157A54',\n  'icon-button-secondary-bg': '#69697D',\n  'icon-button-secondary-hover-bg': '#A4A4A4',\n\n  /* Left Panel */\n  'left-panel-page-hover-bg': 'rgba(111,111,117,0.25)',\n  'left-panel-active-page-fg': '#EFEFEF',\n  'left-panel-active-page-bg': '#555563',\n  'left-panel-disabled-page-fg': '#69697D',\n  'left-panel-page-options-fg': '#A4A4A4',\n  'left-panel-page-options-hover-fg': '#FFFFFF',\n  'left-panel-page-options-hover-bg': '#69697D',\n  'left-panel-page-options-selected-hover-bg': '#A4A4A4',\n  'left-panel-page-initials-fg': 'white',\n  'left-panel-page-initials-bg': '#929299',\n  'left-panel-page-emoji-fg': 'black',\n  'left-panel-page-emoji-outline': '#69697D',\n\n  /* Right Panel */\n  'right-panel-tab-fg': '#EFEFEF',\n  'right-panel-tab-bg': '#262633',\n  'right-panel-tab-icon': '#A4A4A4',\n  'right-panel-tab-icon-hover': '#1DA270',\n  'right-panel-tab-hover-bg': 'rgba(111,111,117,0.6)',\n  'right-panel-tab-selected-fg': '#FFFFFF',\n  'right-panel-tab-selected-bg': '#1DA270',\n  'right-panel-tab-button-hover-bg': '#157A54',\n  'right-panel-subtab-fg': '#1DA270',\n  'right-panel-subtab-selected-fg': '#EFEFEF',\n  'right-panel-subtab-selected-underline': '#1DA270',\n  'right-panel-subtab-hover-fg': '#157A54',\n  'right-panel-subtab-hover-underline': '#1DA270',\n  'right-panel-disabled-overlay': '#262633',\n  'right-panel-toggle-button-enabled-fg': '#FFFFFF',\n  'right-panel-toggle-button-enabled-bg': '#555563',\n  'right-panel-toggle-button-enabled-hover-fg': '#D9D9D9',\n  'right-panel-toggle-button-disabled-fg': '#FFFFFF',\n  'right-panel-toggle-button-disabled-bg': '#333333',\n  'right-panel-field-settings-bg': '#414358',\n  'right-panel-field-settings-button-bg': '#57575F',\n\n  /* Document History */\n  'document-history-snapshot-fg': '#EFEFEF',\n  'document-history-snapshot-selected-fg': '#EFEFEF',\n  'document-history-snapshot-bg': '#32323F',\n  'document-history-snapshot-selected-bg': '#555563',\n  'document-history-snapshot-border': '#69697D',\n  'document-history-activity-text': '#EFEFEF',\n  'document-history-activity-text-light': '#A4A4A4',\n\n  /* Accents */\n  'accent-icon': '#1DA270',\n  'accent-border': '#1DA270',\n  'accent-text': '#1DA270',\n\n  /* Inputs */\n  'input-fg': '#EFEFEF',\n  'input-bg': '#32323F',\n  'input-disabled-fg': '#A4A4A4',\n  'input-disabled-bg': '#262633',\n  'input-placeholder-fg': '#A4A4A4',\n  'input-border': '#69697D',\n  'input-valid': '#1DA270',\n  'input-invalid': '#FF6666',\n  'input-focus': '#5E9ED6',\n  'input-readonly-bg': '#262633',\n  'input-readonly-border': '#69697D',\n\n  /* Choice Entry */\n  'choice-entry-bg': '#32323F',\n  'choice-entry-border': '#69697D',\n  'choice-entry-border-hover': '#A4A4A4',\n\n  /* Select Buttons */\n  'select-button-fg': '#EFEFEF',\n  'select-button-placeholder-fg': '#A4A4A4',\n  'select-button-disabled-fg': '#A4A4A4',\n  'select-button-bg': '#32323F',\n  'select-button-border': '#69697D',\n  'select-button-border-invalid': '#FF6666',\n\n  /* Menus */\n  'menu-text': '#A4A4A4',\n  'menu-light-text': '#A4A4A4',\n  'menu-bg': '#32323F',\n  'menu-subheader-fg': '#EFEFEF',\n  'menu-border': '#69697D',\n  'menu-shadow': '#000000',\n\n  /* Menu Items */\n  'menu-item-fg': '#FFFFFF',\n  'menu-item-selected-fg': '#FFFFFF',\n  'menu-item-selected-bg': '#1DA270',\n  'menu-item-disabled-fg': '#69697D',\n  'menu-item-icon-fg': '#A4A4A4',\n  'menu-item-icon-selected-fg': '#FFFFFF',\n  'menu-item-link-fg': '#1DA270',\n  'menu-item-link-selected-fg': '#157A54',\n  'menu-item-link-selected-bg': '#484859',\n\n  /* Autocomplete */\n  'autocomplete-match-text': '#1DA270',\n  'autocomplete-selected-match-text': '#0A5438',\n  'autocomplete-item-selected-bg': '#69697D',\n\n  /* Search */\n  'search-border': '#69697D',\n  'search-prev-next-button-fg': '#A4A4A4',\n  'search-prev-next-button-bg': '#24242F',\n\n  /* Loading Spinners */\n  'loader-fg': '#1DA270',\n  'loader-bg': '#69697D',\n\n  /* Site Switcher */\n  'site-switcher-active-fg': '#FFFFFF',\n  'site-switcher-active-bg': '#000000',\n\n  /* Doc Menu */\n  'doc-menu-doc-options-fg': '#69697D',\n  'doc-menu-doc-options-hover-fg': '#A4A4A4',\n  'doc-menu-doc-options-hover-bg': '#69697D',\n\n  /* Shortcut Keys */\n  'shortcut-key-fg': '#FFFFFF',\n  'shortcut-key-primary-fg': '#17B378',\n  'shortcut-key-secondary-fg': '#A4A4A4',\n  'shortcut-key-bg': '#32323F',\n  'shortcut-key-border': '#A4A4A4',\n\n  /* Breadcrumbs */\n  'breadcrumbs-tag-fg': 'white',\n  'breadcrumbs-tag-bg': '#929299',\n  'breadcrumbs-tag-alert-bg': '#D0021B',\n\n  /* Page Widget Picker */\n  'widget-picker-primary-bg': '#32323F',\n  'widget-picker-secondary-bg': '#262633',\n  'widget-picker-item-fg': '#FFFFFF',\n  'widget-picker-item-selected-bg': 'rgba(111,111,117,0.6)',\n  'widget-picker-item-disabled-bg': 'rgba(111,111,117,0.6)',\n  'widget-picker-icon': '#A4A4A4',\n  'widget-picker-primary-icon': '#1DA270',\n  'widget-picker-summary-icon': '#1DA270',\n  'widget-picker-border': 'rgba(111,111,117,0.6)',\n  'widget-picker-shadow': '#000000',\n\n  /* Code View */\n  'code-view-text': '#D2D2D2',\n  'code-view-keyword': '#D2D2D2',\n  'code-view-comment': '#888888',\n  'code-view-meta': '#7CD4FF',\n  'code-view-title': '#ED7373',\n  'code-view-params': '#D2D2D2',\n  'code-view-string': '#ED7373',\n  'code-view-number': '#ED7373',\n  'code-view-builtin': '#BFE6D8',\n  'code-view-literal': '#9ED682',\n\n  /* Importer */\n  'importer-table-info-border': '#69697D',\n  'importer-preview-border': '#69697D',\n  'importer-skipped-table-overlay': 'rgba(111,111,117,0.6)',\n  'importer-match-icon': '#69697D',\n  'importer-outside-bg': '#32323F',\n  'importer-main-content-bg': '#262633',\n  'importer-active-file-bg': '#16B378',\n  'importer-active-file-fg': '#FFFFFF',\n  'importer-inactive-file-bg': '#808080',\n  'importer-inactive-file-fg': '#FFFFFF',\n\n  /* Menu Toggles */\n  'menu-toggle-fg': '#A4A4A4',\n  'menu-toggle-hover-fg': '#1DA270',\n  'menu-toggle-active-fg': '#157A54',\n  'menu-toggle-bg': '#32323F',\n  'menu-toggle-border': '#A4A4A4',\n\n  /* Info Button */\n  'info-button-fg': '#8F8F8F',\n  'info-button-hover-fg': '#707070',\n  'info-button-active-fg': '#5C5C5C',\n\n  /* Button Groups */\n  'button-group-fg': '#EFEFEF',\n  'button-group-light-fg': '#A4A4A4',\n  'button-group-bg': 'unset',\n  'button-group-icon': '#A4A4A4',\n  'button-group-border': '#69697D',\n  'button-group-border-hover': '#555563',\n  'button-group-selected-fg': '#EFEFEF',\n  'button-group-light-selected-fg': '#1DA270',\n  'button-group-selected-bg': '#555563',\n  'button-group-selected-border': '#555563',\n\n  /* Access Rules */\n  'access-rules-table-header-fg': '#EFEFEF',\n  'access-rules-table-header-bg': '#57575F',\n  'access-rules-table-body-fg': '#A4A4A4',\n  'access-rules-table-border': '#A4A4A4',\n  'access-rules-column-list-border': '#69697D',\n  'access-rules-column-item-fg': '#EFEFEF',\n  'access-rules-column-item-bg': '#57575F',\n  'access-rules-column-item-icon-fg': '#A4A4A4',\n  'access-rules-column-item-icon-hover-fg': '#EFEFEF',\n  'access-rules-column-item-icon-hover-bg': '#A4A4A4',\n  'access-rules-formula-editor-bg': '#32323F',\n  'access-rules-formula-editor-border-hover': '#69697D',\n  'access-rules-formula-editor-bg-disabled': '#57575F',\n  'access-rules-formula-editor-focus': '#1DA270',\n\n  /* Cells */\n  'cell-fg': '#FFFFFF',\n  'cell-bg': '#32323F',\n  'cell-zebra-bg': '#262633',\n\n  /* Charts */\n  'chart-fg': '#A4A4A4',\n  'chart-bg': '#32323F',\n  'chart-legend-bg': '#32323F80',\n  'chart-x-axis': '#A4A4A4',\n  'chart-y-axis': '#A4A4A4',\n\n  /* Comments */\n  'comments-popup-header-bg': '#262633',\n  'comments-popup-body-bg': '#32323F',\n  'comments-popup-border': '#69697D',\n  'comments-user-name-fg': '#DFDFDF',\n  'comments-panel-topic-bg': '#32323F',\n  'comments-panel-topic-border': '#555563',\n  'comments-panel-resolved-topic-bg': '#262634',\n\n  /* Date Picker */\n  'date-picker-selected-fg': '#FFFFFF',\n  'date-picker-selected-bg': '#7F7F7F',\n  'date-picker-selected-bg-hover': '#8F8F8F',\n  'date-picker-today-fg': '#FFFFFF',\n  'date-picker-today-bg': '#1DA270',\n  'date-picker-today-bg-hover': '#157A54',\n  'date-picker-range-start-end-bg': '#7F7F7F',\n  'date-picker-range-start-end-bg-hover': '#8F8F8F',\n  'date-picker-range-bg': '#57575F',\n  'date-picker-range-bg-hover': '#7F7F7F',\n\n  /* Tutorials */\n  'tutorials-popup-border': '#69697D',\n  'tutorials-popup-header-fg': '#FFFFFF',\n  'tutorials-popup-box-bg': '#57575F',\n\n  /* Ace */\n  'ace-editor-bg': '#32323F',\n  'ace-autocomplete-primary-fg': '#EFEFEF',\n  'ace-autocomplete-secondary-fg': '#A4A4A4',\n  'ace-autocomplete-highlighted-fg': '#FFFFFF',\n  'ace-autocomplete-bg': '#32323F',\n  'ace-autocomplete-border': '#69697D',\n  'ace-autocomplete-link': '#28BE86',\n  'ace-autocomplete-link-highlighted': '#45D48B',\n  'ace-autocomplete-active-line-bg': '#555563',\n  'ace-autocomplete-line-border-hover': 'rgba(111,111,117,0.3)',\n  'ace-autocomplete-line-bg-hover': 'rgba(111,111,117,0.3)',\n\n  /* Color Select */\n  'color-select-fg': '#EFEFEF',\n  'color-select-bg': '#32323F',\n  'color-select-shadow': '#000000',\n  'color-select-font-options-border': '#69697D',\n  'color-select-font-option-fg': '#EFEFEF',\n  'color-select-font-option-bg': '#32323F',\n  'color-select-font-option-bg-hover': '#262633',\n  'color-select-font-option-fg-selected': '#EFEFEF',\n  'color-select-font-option-bg-selected': '#555563',\n  'color-select-color-square-border': '#A4A4A4',\n  'color-select-color-square-border-empty': '#EFEFEF',\n  'color-select-input-fg': '#EFEFEF',\n  'color-select-input-bg': '#32323F',\n  'color-select-input-border': '#69697D',\n\n  /* Highlighted Code */\n  'highlighted-code-block-bg': '#262633',\n  'highlighted-code-block-bg-disabled': '#555563',\n  'highlighted-code-fg': '#A4A4A4',\n  'highlighted-code-border': '#69697D',\n  'highlighted-code-bg-disabled': '#555563',\n\n  /* Login Page */\n  'login-page-bg': '#32323F',\n  'login-page-backdrop': '#404150',\n  'login-page-line': '#57575F',\n\n  /* Formula Assistant */\n  'formula-assistant-header-bg': '#262633',\n  'formula-assistant-border': '#69697D',\n  'formula-assistant-preformatted-text-bg': '#262633',\n};\n","import {ThemeColors, ThemeName} from 'app/common/ThemePrefs';\nimport {GristDark} from 'app/common/themes/GristDark';\nimport {GristLight} from 'app/common/themes/GristLight';\n\nconst THEMES: Readonly<Record<ThemeName, ThemeColors>> = {\n  GristLight,\n  GristDark,\n};\n\nexport function getThemeColors(themeName: ThemeName): ThemeColors {\n  return THEMES[themeName];\n}\n\n/**\n * A simple JS script that handles setting an appropriate background image\n * based on the appearance setting most recently set by the client.\n *\n * The motivation for this snippet is to avoid the FOUC-like effect that can\n * occur when Grist is loading a page, typically manifesting as a momentary flash\n * from a light background to a dark background (and vice versa). By predicting what\n * the appearance should be based on what was last stored in local storage, we can set\n * a suitable background image before the application (and consequently, the user's\n * theme preferences) have loaded, which should avoid the flash in most cases.\n *\n * Simpler alternatives exist, like using the user agent's preferred color scheme, but\n * don't account for the fact that Grist allows users to manually set their preferred\n * appearance. While this solution isn't perfect, it's a significant improvement over the\n * default behavior.\n */\nexport function getThemeBackgroundSnippet() {\n  /* Note that we only need to set the property if the appearance is dark; a fallback\n   * to the light background (gplaypattern.png) already exists in App.css. */\n  return `\n<script>\ntry {\n  if (localStorage.getItem('appearance') === 'dark' && !window.gristConfig.enableCustomCss) {\n    const style = document.createElement('style');\n    style.setAttribute('id', 'grist-theme');\n    style.textContent = ':root {\\\\n' +\n      '  --grist-theme-bg: url(\"img/prismpattern.png\");\\\\n' +\n      '  --grist-theme-bg-color: #333333;\\\\n' +\n      '}';\n    document.head.append(style);\n  }\n} catch {\n  /* Do nothing. */\n}\n</script>\n`;\n}\n","import {ThemeColors} from 'app/common/ThemePrefs';\n\nexport const GristLight: ThemeColors = {\n  /* Text */\n  'text': '#262633',\n  'text-light': '#929299',\n  'text-dark': 'black',\n  'text-error': '#D0021B',\n  'text-danger': '#FFA500',\n  'text-disabled': '#929299',\n\n  /* Page */\n  'page-bg': '#F7F7F7',\n  'page-backdrop': 'grey',\n\n  /* Page Panels */\n  'page-panels-main-panel-bg': 'white',\n  'page-panels-left-panel-bg': '#F7F7F7',\n  'page-panels-right-panel-bg': '#F7F7F7',\n  'page-panels-top-header-bg': 'white',\n  'page-panels-bottom-footer-bg': 'white',\n  'page-panels-border': 'rgba(217,217,217,0.6)',\n  'page-panels-border-resizing': '#16B378',\n  'page-panels-side-panel-opener-fg': '#929299',\n  'page-panels-side-panel-opener-active-fg': 'white',\n  'page-panels-side-panel-opener-active-bg': '#16B378',\n\n  /* Add New */\n  'add-new-circle-fg': '#FFFFFF',\n  'add-new-circle-bg': '#009058',\n  'add-new-circle-hover-bg': '#007548',\n  'add-new-circle-small-fg': '#FFFFFF',\n  'add-new-circle-small-bg': '#16B378',\n  'add-new-circle-small-hover-bg': '#009058',\n\n  /* Top Bar */\n  'top-bar-button-primary-fg': '#16B378',\n  'top-bar-button-secondary-fg': '#929299',\n  'top-bar-button-disabled-fg': '#D9D9D9',\n  'top-bar-button-error-fg': '#D0021B',\n\n  /* Notifications */\n  'notifications-panel-header-bg': '#F7F7F7',\n  'notifications-panel-body-bg': 'white',\n  'notifications-panel-border': '#D9D9D9',\n\n  /* Toasts */\n  'toast-text': '#FFFFFF',\n  'toast-text-light': '#929299',\n  'toast-bg': '#040404',\n  'toast-memo-text': '#FFFFFF',\n  'toast-memo-bg': '#262633',\n  'toast-error-icon': '#D0021B',\n  'toast-error-bg': '#D0021B',\n  'toast-success-icon': '#009058',\n  'toast-success-bg': '#009058',\n  'toast-warning-icon': '#F9AE41',\n  'toast-warning-bg': '#DD962C',\n  'toast-info-icon': '#3B82F6',\n  'toast-info-bg': '#3B82F6',\n  'toast-control-fg': '#16B378',\n  'toast-control-info-fg': '#87B2F9',\n\n  /* Tooltips */\n  'tooltip-fg': 'white',\n  'tooltip-bg': 'rgba(0, 0, 0, 0.75)',\n  'tooltip-icon': '#929299',\n  'tooltip-close-button-fg': 'white',\n  'tooltip-close-button-hover-fg': 'black',\n  'tooltip-close-button-hover-bg': 'white',\n  'tooltip-popup-header-fg': 'white',\n  'tooltip-popup-header-bg': '#16B378',\n\n  /* Modals */\n  'modal-bg': 'white',\n  'modal-backdrop': 'rgba(38,38,51,0.9)',\n  'modal-border': '#E8E8E8',\n  'modal-border-dark': '#D9D9D9',\n  'modal-border-hover': '#929299',\n  'modal-shadow-inner': 'rgba(31,37,50,0.31)',\n  'modal-shadow-outer': 'rgba(76,86,103,0.24)',\n  'modal-close-button-fg': '#929299',\n  'modal-backdrop-close-button-fg': '#16B378',\n  'modal-backdrop-close-button-hover-fg': '#B1FFE2',\n\n  /* Popups */\n  'popup-bg': 'white',\n  'popup-shadow-inner': 'rgba(31, 37, 50, 0.31)',\n  'popup-shadow-outer': 'rgba(76, 86, 103, 0.24)',\n  'popup-close-button-fg': '#929299',\n\n  /* Prompts */\n  'prompt-fg': '#606060',\n\n  /* Progress Bars */\n  'progress-bar-fg': '#16B378',\n  'progress-bar-error-fg': '#D0021B',\n  'progress-bar-bg': '#D9D9D9',\n\n  /* Links */\n  'link': '#16B378',\n  'link-hover': '#16B378',\n\n  /* Hover */\n  'hover': 'rgba(217,217,217,0.6)',\n  'hover-light': '#F7F7F7',\n\n  /* Cell Editor */\n  'cell-editor-fg': '#262633',\n  'cell-editor-bg': '#FFFFFF',\n\n  /* Cursor */\n  'cursor': '#16B378',\n  'cursor-inactive': '#A2E1C9',\n  'cursor-readonly': '#929299',\n\n  /* Tables */\n  'table-header-fg': 'unset',\n  'table-header-selected-fg': 'unset',\n  'table-header-bg': '#F7F7F7',\n  'table-header-selected-bg': '#E8E8E8',\n  'table-header-border': 'lightgray',\n  'table-header-border-dark': '#D9D9D9',\n  'table-body-bg': 'white',\n  'table-body-border': '#D9D9D9',\n  'table-add-new-bg': 'inherit',\n  'table-scroll-shadow': '#444444',\n  'table-frozen-columns-border': '#999999',\n  'table-drag-drop-indicator': 'gray',\n  'table-drag-drop-shadow': '#F0F0F0',\n\n  /* Cards */\n  'card-compact-widget-bg': 'rgba(217,217,217,0.6)',\n  'card-compact-record-bg': 'white',\n  'card-blocks-bg': 'rgba(217,217,217,0.6)',\n  'card-form-label': '#929299',\n  'card-compact-label': '#929299',\n  'card-blocks-label': '#929299',\n  'card-form-border': 'lightgrey',\n  'card-compact-border': '#D9D9D9',\n  'card-editing-layout-bg': 'rgba(192, 192, 192, 0.2)',\n  'card-editing-layout-border': '#D9D9D9',\n\n  /* Card Lists */\n  'card-list-form-border': '#D9D9D9',\n  'card-list-blocks-border': '#D9D9D9',\n\n  /* Selection */\n  'selection': 'rgba(22,179,120,0.15)',\n  'selection-darker': 'rgba(22,179,120,0.25)',\n  'selection-darkest': 'rgba(22,179,120,0.35)',\n  'selection-opaque-fg': 'black',\n  'selection-opaque-bg': '#DCF4EB',\n  'selection-opaque-dark-bg': '#D6EEE5',\n  'selection-header': 'rgba(217,217,217,0.6)',\n\n  /* Widgets */\n  'widget-bg': 'white',\n  'widget-border': '#D9D9D9',\n  'widget-active-border': '#16B378',\n  'widget-inactive-stripes-light': '#F7F7F7',\n  'widget-inactive-stripes-dark': '#E8E8E8',\n\n  /* Pinned Docs */\n  'pinned-doc-footer-bg': 'white',\n  'pinned-doc-border': 'rgba(217,217,217,0.6)',\n  'pinned-doc-border-hover': '#929299',\n  'pinned-doc-editor-bg': 'rgba(217,217,217,0.6)',\n\n  /* Raw Data */\n  'raw-data-table-border': 'rgba(217,217,217,0.6)',\n  'raw-data-table-border-hover': '#929299',\n\n  /* Controls */\n  'control-fg': '#16B378',\n  'control-primary-fg': '#FFFFFF',\n  'control-primary-bg': '#16B378',\n  'control-secondary-fg': '#929299',\n  'control-hover-fg': '#009058',\n  'control-primary-hover-bg': '#009058',\n  'control-secondary-hover-fg': '#262633',\n  'control-secondary-hover-bg': '#D9D9D9',\n  'control-disabled-fg': '#FFFFFF',\n  'control-disabled-bg': '#929299',\n  'control-primary-disabled': '#A2E1C9',\n  'control-border': '1px solid #11B683',\n\n  /* Checkboxes */\n  'checkbox-bg': '#FFFFFF',\n  'checkbox-disabled-bg': '#D9D9D9',\n  'checkbox-border': '#D9D9D9',\n  'checkbox-border-hover': '#BFBFBF',\n\n  /* Move Docs */\n  'move-docs-selected-fg': 'white',\n  'move-docs-selected-bg': '#16B378',\n  'move-docs-disabled-bg': '#D9D9D9',\n\n  /* Filter Bar */\n  'filter-bar-button-saved-fg': '#FFFFFF',\n  'filter-bar-button-saved-bg': '#929299',\n  'filter-bar-button-saved-hover-bg': '#D9D9D9',\n\n  /* Icons */\n  'icon-disabled': '#929299',\n  'icon-error': '#D0021B',\n\n  /* Icon Buttons */\n  'icon-button-fg': '#FFFFFF',\n  'icon-button-primary-bg': '#16B378',\n  'icon-button-primary-hover-bg': '#009058',\n  'icon-button-secondary-bg': '#D9D9D9',\n  'icon-button-secondary-hover-bg': '#929299',\n\n  /* Left Panel */\n  'left-panel-page-hover-bg': 'rgba(217,217,217,0.6)',\n  'left-panel-active-page-fg': '#FFFFFF',\n  'left-panel-active-page-bg': '#262633',\n  'left-panel-disabled-page-fg': '#BDBDBD',\n  'left-panel-page-options-fg': '#929299',\n  'left-panel-page-options-hover-fg': 'white',\n  'left-panel-page-options-hover-bg': '#D9D9D9',\n  'left-panel-page-options-selected-hover-bg': '#929299',\n  'left-panel-page-initials-fg': 'white',\n  'left-panel-page-initials-bg': '#929299',\n  'left-panel-page-emoji-fg': 'white',\n  'left-panel-page-emoji-outline': '#BDBDBD',\n\n  /* Right Panel */\n  'right-panel-tab-fg': '#262633',\n  'right-panel-tab-bg': '#F7F7F7',\n  'right-panel-tab-icon': '#929299',\n  'right-panel-tab-icon-hover': '#16B378',\n  'right-panel-tab-hover-bg': 'rgba(217,217,217,0.6)',\n  'right-panel-tab-selected-fg': '#FFFFFF',\n  'right-panel-tab-selected-bg': '#16B378',\n  'right-panel-tab-button-hover-bg': '#009058',\n  'right-panel-subtab-fg': '#16B378',\n  'right-panel-subtab-selected-fg': '#262633',\n  'right-panel-subtab-selected-underline': '#16B378',\n  'right-panel-subtab-hover-fg': '#009058',\n  'right-panel-subtab-hover-underline': '#16B378',\n  'right-panel-disabled-overlay': '#F7F7F7',\n  'right-panel-toggle-button-enabled-fg': '#FFFFFF',\n  'right-panel-toggle-button-enabled-bg': '#262633',\n  'right-panel-toggle-button-enabled-hover-fg': '#D9D9D9',\n  'right-panel-toggle-button-disabled-fg': '#FFFFFF',\n  'right-panel-toggle-button-disabled-bg': '#E8E8E8',\n  'right-panel-field-settings-bg': '#E8E8E8',\n  'right-panel-field-settings-button-bg': 'lightgrey',\n\n  /* Document History */\n  'document-history-snapshot-fg': '#262633',\n  'document-history-snapshot-selected-fg': '#FFFFFF',\n  'document-history-snapshot-bg': 'white',\n  'document-history-snapshot-selected-bg': '#262633',\n  'document-history-snapshot-border': 'rgba(217,217,217,0.6)',\n  'document-history-activity-text': '#000000',\n  'document-history-activity-text-light': '#333333',\n\n  /* Accents */\n  'accent-icon': '#16B378',\n  'accent-border': '#16B378',\n  'accent-text': '#16B378',\n\n  /* Inputs */\n  'input-fg': 'black',\n  'input-bg': 'white',\n  'input-disabled-fg': '#929299',\n  'input-disabled-bg': '#F7F7F7',\n  'input-placeholder-fg': '#929299',\n  'input-border': '#D9D9D9',\n  'input-valid': '#16B378',\n  'input-invalid': '#D0021B',\n  'input-focus': '#5E9ED6',\n  'input-readonly-bg': '#F7F7F7',\n  'input-readonly-border': '#E8E8E8',\n\n  /* Choice Entry */\n  'choice-entry-bg': 'white',\n  'choice-entry-border': '#D9D9D9',\n  'choice-entry-border-hover': '#BFBFBF',\n\n  /* Select Buttons */\n  'select-button-fg': '#262633',\n  'select-button-placeholder-fg': '#929299',\n  'select-button-disabled-fg': 'grey',\n  'select-button-bg': 'white',\n  'select-button-border': '#D9D9D9',\n  'select-button-border-invalid': '#D0021B',\n\n  /* Menus */\n  'menu-text': '#929299',\n  'menu-light-text': '#929299',\n  'menu-bg': 'white',\n  'menu-subheader-fg': 'unset',\n  'menu-border': '#E8E8E8',\n  'menu-shadow': 'rgba(38, 38, 51, 0.6)',\n\n  /* Menu Items */\n  'menu-item-fg': 'black',\n  'menu-item-selected-fg': '#FFFFFF',\n  'menu-item-selected-bg': '#16B378',\n  'menu-item-disabled-fg': '#D9D9D9',\n  'menu-item-icon-fg': '#929299',\n  'menu-item-icon-selected-fg': 'white',\n  'menu-item-link-fg': '#16B378',\n  'menu-item-link-selected-fg': '#009058',\n  'menu-item-link-selected-bg': '#E8E8E8',\n\n  /* Autocomplete */\n  'autocomplete-match-text': '#16B378',\n  'autocomplete-selected-match-text': '#B1FFE2',\n  'autocomplete-item-selected-bg': '#E8E8E8',\n\n  /* Search */\n  'search-border': 'grey',\n  'search-prev-next-button-fg': '#929299',\n  'search-prev-next-button-bg': 'rgba(217,217,217,0.6)',\n\n  /* Loaders */\n  'loader-fg': '#16B378',\n  'loader-bg': '#D9D9D9',\n\n  /* Site Switcher */\n  'site-switcher-active-fg': '#FFFFFF',\n  'site-switcher-active-bg': '#262633',\n\n  /* Doc Menu */\n  'doc-menu-doc-options-fg': '#D9D9D9',\n  'doc-menu-doc-options-hover-fg': '#929299',\n  'doc-menu-doc-options-hover-bg': '#D9D9D9',\n\n  /* Shortcut Keys */\n  'shortcut-key-fg': 'black',\n  'shortcut-key-primary-fg': '#009058',\n  'shortcut-key-secondary-fg': '#929299',\n  'shortcut-key-bg': 'white',\n  'shortcut-key-border': '#929299',\n\n  /* Breadcrumbs */\n  'breadcrumbs-tag-fg': 'white',\n  'breadcrumbs-tag-bg': '#929299',\n  'breadcrumbs-tag-alert-bg': '#D0021B',\n\n  /* Page Widget Picker */\n  'widget-picker-primary-bg': 'white',\n  'widget-picker-secondary-bg': '#F7F7F7',\n  'widget-picker-item-fg': 'unset',\n  'widget-picker-item-selected-bg': 'rgba(217,217,217,0.6)',\n  'widget-picker-item-disabled-bg': 'rgba(217,217,217,0.6)',\n  'widget-picker-icon': '#929299',\n  'widget-picker-primary-icon': '#16B378',\n  'widget-picker-summary-icon': '#009058',\n  'widget-picker-border': 'rgba(217,217,217,0.6)',\n  'widget-picker-shadow': 'rgba(38,38,51,0.20)',\n\n  /* Code View */\n  'code-view-text': '#444',\n  'code-view-keyword': '#444',\n  'code-view-comment': '#888888',\n  'code-view-meta': '#1F7199',\n  'code-view-title': '#880000',\n  'code-view-params': '#444',\n  'code-view-string': '#880000',\n  'code-view-number': '#880000',\n  'code-view-builtin': '#397300',\n  'code-view-literal': '#78A960',\n\n  /* Importer */\n  'importer-table-info-border': '#D9D9D9',\n  'importer-preview-border': '#D9D9D9',\n  'importer-skipped-table-overlay': 'rgba(217,217,217,0.6)',\n  'importer-match-icon': '#D9D9D9',\n  'importer-outside-bg': '#F7F7F7',\n  'importer-main-content-bg': '#FFFFFF',\n  'importer-active-file-bg': '#16B378',\n  'importer-active-file-fg': '#FFFFFF',\n  'importer-inactive-file-bg': 'rgba(217,217,217,0.6)',\n  'importer-inactive-file-fg': '#FFFFFF',\n\n  /* Menu Toggles */\n  'menu-toggle-fg': '#929299',\n  'menu-toggle-hover-fg': '#009058',\n  'menu-toggle-active-fg': '#007548',\n  'menu-toggle-bg': 'white',\n  'menu-toggle-border': '#929299',\n\n  /* Info Button */\n  'info-button-fg': '#8F8F8F',\n  'info-button-hover-fg': '#707070',\n  'info-button-active-fg': '#5C5C5C',\n\n  /* Button Groups */\n  'button-group-fg': '#262633',\n  'button-group-light-fg': '#929299',\n  'button-group-bg': 'unset',\n  'button-group-icon': '#929299',\n  'button-group-border': '#D9D9D9',\n  'button-group-border-hover': '#BFBFBF',\n  'button-group-selected-fg': '#FFFFFF',\n  'button-group-light-selected-fg': '#16B378',\n  'button-group-selected-bg': '#262633',\n  'button-group-selected-border': '#262633',\n\n  /* Access Rules */\n  'access-rules-table-header-fg': '#262633',\n  'access-rules-table-header-bg': 'rgba(217,217,217,0.6)',\n  'access-rules-table-body-fg': '#929299',\n  'access-rules-table-border': '#929299',\n  'access-rules-column-list-border': '#D9D9D9',\n  'access-rules-column-item-fg': '#262633',\n  'access-rules-column-item-bg': '#E8E8E8',\n  'access-rules-column-item-icon-fg': '#929299',\n  'access-rules-column-item-icon-hover-fg': '#FFFFFF',\n  'access-rules-column-item-icon-hover-bg': '#929299',\n  'access-rules-formula-editor-bg': 'white',\n  'access-rules-formula-editor-border-hover': '#D9D9D9',\n  'access-rules-formula-editor-bg-disabled': '#E8E8E8',\n  'access-rules-formula-editor-focus': '#16B378',\n\n  /* Cells */\n  'cell-fg': 'black',\n  'cell-bg': 'white',\n  'cell-zebra-bg': '#F8F8F8',\n\n  /* Charts */\n  'chart-fg': '#444',\n  'chart-bg': '#fff',\n  'chart-legend-bg': '#FFFFFF80',\n  'chart-x-axis': '#444',\n  'chart-y-axis': '#444',\n\n  /* Comments */\n  'comments-popup-header-bg': '#F7F7F7',\n  'comments-popup-body-bg': 'white',\n  'comments-popup-border': '#D9D9D9',\n  'comments-user-name-fg': '#494949',\n  'comments-panel-topic-bg': 'white',\n  'comments-panel-topic-border': '#ccc',\n  'comments-panel-resolved-topic-bg': '#F0F0F0',\n\n  /* Date Picker */\n  'date-picker-selected-fg': '#262633',\n  'date-picker-selected-bg': '#D9D9D9',\n  'date-picker-selected-bg-hover': '#CFCFCF',\n  'date-picker-today-fg': '#FFFFFF',\n  'date-picker-today-bg': '#16B378',\n  'date-picker-today-bg-hover': '#009058',\n  'date-picker-range-start-end-bg': '#D9D9D9',\n  'date-picker-range-start-end-bg-hover': '#CFCFCF',\n  'date-picker-range-bg': '#EEEEEE',\n  'date-picker-range-bg-hover': '#D9D9D9',\n\n  /* Tutorials */\n  'tutorials-popup-border': '#D9D9D9',\n  'tutorials-popup-header-fg': '#FFFFFF',\n  'tutorials-popup-box-bg': '#F5F5F5',\n\n  /* Ace */\n  'ace-editor-bg': 'white',\n  'ace-autocomplete-primary-fg': '#444',\n  'ace-autocomplete-secondary-fg': '#8F8F8F',\n  'ace-autocomplete-highlighted-fg': '#000',\n  'ace-autocomplete-bg': '#FBFBFB',\n  'ace-autocomplete-border': 'lightgray',\n  'ace-autocomplete-link': '#16B378',\n  'ace-autocomplete-link-highlighted': '#009058',\n  'ace-autocomplete-active-line-bg': '#CAD6FA',\n  'ace-autocomplete-line-border-hover': '#ABBFFE',\n  'ace-autocomplete-line-bg-hover': 'rgba(233,233,253,0.4)',\n\n  /* Color Select */\n  'color-select-fg': '#262633',\n  'color-select-bg': 'white',\n  'color-select-shadow': 'rgba(38,38,51,0.6)',\n  'color-select-font-options-border': '#D9D9D9',\n  'color-select-font-option-fg': '#262633',\n  'color-select-font-option-bg': '#FFFFFF',\n  'color-select-font-option-bg-hover': '#F7F7F7',\n  'color-select-font-option-fg-selected': '#FFFFFF',\n  'color-select-font-option-bg-selected': '#262633',\n  'color-select-color-square-border': '#D9D9D9',\n  'color-select-color-square-border-empty': '#262633',\n  'color-select-input-fg': '#929299',\n  'color-select-input-bg': 'white',\n  'color-select-input-border': '#D9D9D9',\n\n  /* Highlighted Code */\n  'highlighted-code-block-bg': '#FFFFFF',\n  'highlighted-code-block-bg-disabled': '#E8E8E8',\n  'highlighted-code-fg': '#929299',\n  'highlighted-code-border': '#D9D9D9',\n  'highlighted-code-bg-disabled': '#E8E8E8',\n\n  /* Login Page */\n  'login-page-bg': 'white',\n  'login-page-backdrop': '#F5F8FA',\n  'login-page-line': '#F7F7F7',\n\n  /* Formula Assistant */\n  'formula-assistant-header-bg': '#F7F7F7',\n  'formula-assistant-border': '#D9D9D9',\n  'formula-assistant-preformatted-text-bg': '#F7F7F7',\n};\n","import {ActionSummary} from 'app/common/ActionSummary';\nimport {ApplyUAResult, ForkResult, PermissionDataWithExtraUsers, QueryFilters} from 'app/common/ActiveDocAPI';\nimport {AssistanceRequest, AssistanceResponse} from 'app/common/AssistancePrompts';\nimport {BaseAPI, IOptions} from 'app/common/BaseAPI';\nimport {BillingAPI, BillingAPIImpl} from 'app/common/BillingAPI';\nimport {BrowserSettings} from 'app/common/BrowserSettings';\nimport {ICustomWidget} from 'app/common/CustomWidget';\nimport {BulkColValues, TableColValues, TableRecordValue, TableRecordValues, UserAction} from 'app/common/DocActions';\nimport {DocCreationInfo, OpenDocMode} from 'app/common/DocListAPI';\nimport {OrgUsageSummary} from 'app/common/DocUsage';\nimport {Product} from 'app/common/Features';\nimport {isClient} from 'app/common/gristUrls';\nimport {encodeQueryParams} from 'app/common/gutil';\nimport {FullUser, UserProfile} from 'app/common/LoginSessionAPI';\nimport {OrgPrefs, UserOrgPrefs, UserPrefs} from 'app/common/Prefs';\nimport * as roles from 'app/common/roles';\nimport {\n  WebhookFields,\n  WebhookSubscribe,\n  WebhookSummaryCollection,\n  WebhookUpdate\n} from 'app/common/Triggers';\nimport {addCurrentOrgToPath, getGristConfig} from 'app/common/urlUtils';\nimport omitBy from 'lodash/omitBy';\n\n\nexport type {FullUser, UserProfile};\n\n// Nominal email address of the anonymous user.\nexport const ANONYMOUS_USER_EMAIL = 'anon@getgrist.com';\n\n// Nominal email address of a user who, if you share with them, everyone gets access.\nexport const EVERYONE_EMAIL = 'everyone@getgrist.com';\n\n// A special 'docId' that means to create a new document.\nexport const NEW_DOCUMENT_CODE = 'new';\n\n// Properties shared by org, workspace, and doc resources.\nexport interface CommonProperties {\n  name: string;\n  createdAt: string;  // ISO date string\n  updatedAt: string;  // ISO date string\n  removedAt?: string; // ISO date string - only can appear on docs and workspaces currently\n  public?: boolean;   // If set, resource is available to the public\n}\nexport const commonPropertyKeys = ['createdAt', 'name', 'updatedAt'];\n\nexport interface OrganizationProperties extends CommonProperties {\n  domain: string|null;\n  // Organization includes preferences relevant to interacting with its content.\n  userOrgPrefs?: UserOrgPrefs;  // Preferences specific to user and org\n  orgPrefs?: OrgPrefs;          // Preferences specific to org (but not a particular user)\n  userPrefs?: UserPrefs;        // Preferences specific to user (but not a particular org)\n}\nexport const organizationPropertyKeys = [...commonPropertyKeys, 'domain',\n                                         'orgPrefs', 'userOrgPrefs', 'userPrefs'];\n\n// Basic information about an organization, excluding the user's access level\nexport interface OrganizationWithoutAccessInfo extends OrganizationProperties {\n  id: number;\n  owner: FullUser|null;\n  billingAccount?: BillingAccount;\n  host: string|null;  // if set, org's preferred domain (e.g. www.thing.com)\n}\n\n// Organization information plus the user's access level\nexport interface Organization extends OrganizationWithoutAccessInfo {\n  access: roles.Role;\n}\n\n// Basic information about a billing account associated with an org or orgs.\nexport interface BillingAccount {\n  id: number;\n  individual: boolean;\n  product: Product;\n  isManager: boolean;\n  inGoodStanding: boolean;\n  externalOptions?: {\n    invoiceId?: string;\n  };\n}\n\n// The upload types vary based on which fetch implementation is in use.  This is\n// an incomplete list.  For example, node streaming types are supported by node-fetch.\nexport type UploadType = string | Blob | Buffer;\n\n/**\n * Returns a user-friendly org name, which is either org.name, or \"@User Name\" for personal orgs.\n */\nexport function getOrgName(org: Organization): string {\n  return org.owner ? `@` + org.owner.name : org.name;\n}\n\n/**\n * Returns whether the given org is the templates org, which contains the public\n * templates and tutorials.\n */\nexport function isTemplatesOrg(org: {domain: Organization['domain']}|null): boolean {\n  if (!org) { return false; }\n\n  const {templateOrg} = getGristConfig();\n  return org.domain === templateOrg;\n}\n\nexport type WorkspaceProperties = CommonProperties;\nexport const workspacePropertyKeys = ['createdAt', 'name', 'updatedAt'];\n\nexport interface Workspace extends WorkspaceProperties {\n  id: number;\n  docs: Document[];\n  org: Organization;\n  orgDomain?: string;\n  access: roles.Role;\n  owner?: FullUser;  // Set when workspaces are in the \"docs\" pseudo-organization,\n                     // assembled from multiple personal organizations.\n                     // Not set when workspaces are all from the same organization.\n\n  // Set when the workspace belongs to support@getgrist.com. We expect only one such workspace\n  // (\"Examples & Templates\"), containing sample documents.\n  isSupportWorkspace?: boolean;\n}\n\nexport type DocumentType = 'tutorial'|'template';\n\n// Non-core options for a document.\n// \"Non-core\" means bundled into a single options column in the database.\n// TODO: consider smoothing over this distinction in the API.\nexport interface DocumentOptions {\n  description?: string|null;\n  icon?: string|null;\n  openMode?: OpenDocMode|null;\n  externalId?: string|null;  // A slot for storing an externally maintained id.\n                             // Not used in grist-core, but handy for Electron app.\n  tutorial?: TutorialMetadata|null;\n}\n\nexport interface TutorialMetadata {\n  lastSlideIndex?: number;\n  numSlides?: number;\n}\n\nexport interface DocumentProperties extends CommonProperties {\n  isPinned: boolean;\n  urlId: string|null;\n  trunkId: string|null;\n  type: DocumentType|null;\n  options: DocumentOptions|null;\n}\n\nexport const documentPropertyKeys = [...commonPropertyKeys, 'isPinned', 'urlId', 'options', 'type'];\n\nexport interface Document extends DocumentProperties {\n  id: string;\n  workspace: Workspace;\n  access: roles.Role;\n  trunkAccess?: roles.Role|null;\n  forks?: Fork[];\n}\n\nexport interface Fork {\n  id: string;\n  trunkId: string;\n  updatedAt: string;  // ISO date string\n  options: DocumentOptions|null;\n}\n\n// Non-core options for a user.\nexport interface UserOptions {\n  // Whether signing in with Google is allowed. Defaults to true if unset.\n  allowGoogleLogin?: boolean;\n  // The \"sub\" (subject) from the JWT issued by the password-based authentication provider.\n  authSubject?: string;\n  // Whether user is a consultant. Consultant users can be added to sites\n  // without being counted for billing. Defaults to false if unset.\n  isConsultant?: boolean;\n  // Locale selected by the user. Defaults to 'en' if unset.\n  locale?: string;\n}\n\nexport interface PermissionDelta {\n  maxInheritedRole?: roles.BasicRole|null;\n  users?: {\n    // Maps from email to group name, or null to inherit.\n    [email: string]: roles.NonGuestRole|null\n  };\n}\n\nexport interface PermissionData {\n  // True if permission data is restricted to current user.\n  personal?: true;\n  // True if current user is a public member.\n  public?: boolean;\n  maxInheritedRole?: roles.BasicRole|null;\n  users: UserAccessData[];\n}\n\n// A structure for modifying managers of a billing account.\nexport interface ManagerDelta {\n  users: {\n    // To add a manager, link their email to 'managers'.\n    // To remove a manager, link their email to null.\n    // This format is used to rhyme with the ACL PermissionDelta format.\n    [email: string]: 'managers'|null\n  };\n}\n\n// Information about a user and their access to an unspecified resource of interest.\nexport interface UserAccessData {\n  id: number;\n  name: string;\n  email: string;\n  ref?: string|null;\n  picture?: string|null; // When present, a url to a public image of unspecified dimensions.\n  // Represents the user's direct access to the resource of interest. Lack of access to a resource\n  // is represented by a null value.\n  access: roles.Role|null;\n  // A user's parentAccess represent their effective inheritable access to the direct parent of the resource\n  // of interest. The user's effective access to the resource of interest can be determined based\n  // on the user's parentAccess, the maxInheritedRole setting of the resource and the user's direct\n  // access to the resource. Lack of access to the parent resource is represented by a null value.\n  // If parent has non-inheritable access, this should be null.\n  parentAccess?: roles.BasicRole|null;\n  orgAccess?: roles.BasicRole|null;\n  anonymous?: boolean;    // If set to true, the user is the anonymous user.\n  isMember?: boolean;\n}\n\n/**\n * Combines access, parentAccess, and maxInheritedRole info into the resulting access role.\n */\nexport function getRealAccess(user: UserAccessData, permissionData: PermissionData): roles.Role|null {\n  const inheritedAccess = roles.getWeakestRole(user.parentAccess || null, permissionData.maxInheritedRole || null);\n  return roles.getStrongestRole(user.access, inheritedAccess);\n}\n\nconst roleNames: {[role: string]: string} = {\n  [roles.OWNER]: 'Owner',\n  [roles.EDITOR]: 'Editor',\n  [roles.VIEWER]: 'Viewer',\n};\n\nexport function getUserRoleText(user: UserAccessData) {\n  return roleNames[user.access!] || user.access || 'no access';\n}\n\nexport interface ActiveSessionInfo {\n  user: FullUser & {helpScoutSignature?: string};\n  org: Organization|null;\n  orgError?: OrgError;\n}\n\nexport interface OrgError {\n  error: string;\n  status: number;\n}\n\n/**\n * Options to control the source of a document being replaced.  For\n * example, a document could be initialized from another document\n * (e.g. a fork) or from a snapshot.\n */\nexport interface DocReplacementOptions {\n  /**\n   * The docId to copy from.\n   */\n  sourceDocId?: string;\n  /**\n   * The s3 version ID.\n   */\n  snapshotId?: string;\n  /**\n   * True if tutorial metadata should be reset.\n   *\n   * Metadata that's reset includes the doc (i.e. tutorial) name, and the\n   * properties under options.tutorial (e.g. lastSlideIndex).\n   */\n  resetTutorialMetadata?: boolean;\n}\n\n/**\n * Information about a single document snapshot/backup.\n */\nexport interface DocSnapshot {\n  lastModified: string;  // when the snapshot was made\n  snapshotId: string;    // the id of the snapshot in the underlying store\n  docId: string;         // an id for accessing the snapshot as a Grist document\n}\n\n/**\n * A list of document snapshots.\n */\nexport interface DocSnapshots {\n  snapshots: DocSnapshot[];  // snapshots, freshest first.\n}\n\n/**\n * Information about a single document state.\n */\nexport interface DocState {\n  n: number;  // a sequential identifier\n  h: string;  // a hash identifier\n}\n\n/**\n * A list of document states.  Most recent is first.\n */\nexport interface DocStates {\n  states: DocState[];\n}\n\n/**\n * A comparison between two documents, called \"left\" and \"right\".\n * The comparison is based on the action histories in the documents.\n * If those histories have been truncated, the comparison may report\n * two documents as being unrelated even if they do in fact have some\n * shared history.\n */\nexport interface DocStateComparison {\n  left: DocState;         // left / local document\n  right: DocState;        // right / remote document\n  parent: DocState|null;  // most recent common ancestor of left and right\n  // summary of the relationship between the two documents.\n  //        same: documents have the same most recent state\n  //        left: the left document has actions not yet in the right\n  //       right: the right document has actions not yet in the left\n  //        both: both documents have changes (possible divergence)\n  //   unrelated: no common history found\n  summary: 'same' | 'left' | 'right' | 'both' | 'unrelated';\n  // optionally, details of what changed may be included.\n  details?: DocStateComparisonDetails;\n}\n\n/**\n * Detailed comparison between document versions.  For now, this\n * is provided as a pair of ActionSummary objects, relative to\n * the most recent common ancestor.\n */\nexport interface DocStateComparisonDetails {\n  leftChanges: ActionSummary;\n  rightChanges: ActionSummary;\n}\n\nexport interface UserAPI {\n  getSessionActive(): Promise<ActiveSessionInfo>;\n  setSessionActive(email: string, org?: string): Promise<void>;\n  getSessionAll(): Promise<{users: FullUser[], orgs: Organization[]}>;\n  getOrgs(merged?: boolean): Promise<Organization[]>;\n  getWorkspace(workspaceId: number): Promise<Workspace>;\n  getOrg(orgId: number|string): Promise<Organization>;\n  getOrgWorkspaces(orgId: number|string): Promise<Workspace[]>;\n  getOrgUsageSummary(orgId: number|string): Promise<OrgUsageSummary>;\n  getTemplates(onlyFeatured?: boolean): Promise<Workspace[]>;\n  getDoc(docId: string): Promise<Document>;\n  newOrg(props: Partial<OrganizationProperties>): Promise<number>;\n  newWorkspace(props: Partial<WorkspaceProperties>, orgId: number|string): Promise<number>;\n  newDoc(props: Partial<DocumentProperties>, workspaceId: number): Promise<string>;\n  newUnsavedDoc(options?: {timezone?: string}): Promise<string>;\n  renameOrg(orgId: number|string, name: string): Promise<void>;\n  renameWorkspace(workspaceId: number, name: string): Promise<void>;\n  renameDoc(docId: string, name: string): Promise<void>;\n  updateOrg(orgId: number|string, props: Partial<OrganizationProperties>): Promise<void>;\n  updateDoc(docId: string, props: Partial<DocumentProperties>): Promise<void>;\n  deleteOrg(orgId: number|string): Promise<void>;\n  deleteWorkspace(workspaceId: number): Promise<void>;     // delete workspace permanently\n  softDeleteWorkspace(workspaceId: number): Promise<void>; // soft-delete workspace\n  undeleteWorkspace(workspaceId: number): Promise<void>;   // recover soft-deleted workspace\n  deleteDoc(docId: string): Promise<void>;      // delete doc permanently\n  softDeleteDoc(docId: string): Promise<void>;  // soft-delete doc\n  undeleteDoc(docId: string): Promise<void>;    // recover soft-deleted doc\n  updateOrgPermissions(orgId: number|string, delta: PermissionDelta): Promise<void>;\n  updateWorkspacePermissions(workspaceId: number, delta: PermissionDelta): Promise<void>;\n  updateDocPermissions(docId: string, delta: PermissionDelta): Promise<void>;\n  getOrgAccess(orgId: number|string): Promise<PermissionData>;\n  getWorkspaceAccess(workspaceId: number): Promise<PermissionData>;\n  getDocAccess(docId: string): Promise<PermissionData>;\n  pinDoc(docId: string): Promise<void>;\n  unpinDoc(docId: string): Promise<void>;\n  moveDoc(docId: string, workspaceId: number): Promise<void>;\n  getUserProfile(): Promise<FullUser>;\n  updateUserName(name: string): Promise<void>;\n  updateUserLocale(locale: string|null): Promise<void>;\n  updateAllowGoogleLogin(allowGoogleLogin: boolean): Promise<void>;\n  updateIsConsultant(userId: number, isConsultant: boolean): Promise<void>;\n  getWorker(key: string): Promise<string>;\n  getWorkerAPI(key: string): Promise<DocWorkerAPI>;\n  getBillingAPI(): BillingAPI;\n  getDocAPI(docId: string): DocAPI;\n  fetchApiKey(): Promise<string>;\n  createApiKey(): Promise<string>;\n  deleteApiKey(): Promise<void>;\n  getTable(docId: string, tableName: string): Promise<TableColValues>;\n  applyUserActions(docId: string, actions: UserAction[]): Promise<ApplyUAResult>;\n  importUnsavedDoc(material: UploadType, options?: {\n    filename?: string,\n    timezone?: string,\n    onUploadProgress?: (ev: ProgressEvent) => void,\n  }): Promise<string>;\n  deleteUser(userId: number, name: string): Promise<void>;\n  getBaseUrl(): string;  // Get the prefix for all the endpoints this object wraps.\n  forRemoved(): UserAPI; // Get a version of the API that works on removed resources.\n  getWidgets(): Promise<ICustomWidget[]>;\n}\n\n/**\n * Parameters for the download CSV and XLSX endpoint (/download/table-schema & /download/csv & /download/csv).\n */\n export interface DownloadDocParams {\n  tableId: string;\n  viewSection?: number;\n  activeSortSpec?: string;\n  filters?: string;\n}\n\ninterface GetRowsParams {\n  filters?: QueryFilters;\n  immediate?: boolean;\n}\n\n/**\n * Collect endpoints related to the content of a single document that we've been thinking\n * of as the (restful) \"Doc API\".  A few endpoints that could be here are not, for historical\n * reasons, such as downloads.\n */\nexport interface DocAPI {\n  // Immediate flag is a currently not-advertised feature, allowing a query to proceed without\n  // waiting for a document to be initialized. This is useful if the calculations done when\n  // opening a document are irrelevant.\n  getRows(tableId: string, options?: GetRowsParams): Promise<TableColValues>;\n  getRecords(tableId: string, options?: GetRowsParams): Promise<TableRecordValue[]>;\n  updateRows(tableId: string, changes: TableColValues): Promise<number[]>;\n  addRows(tableId: string, additions: BulkColValues): Promise<number[]>;\n  removeRows(tableId: string, removals: number[]): Promise<number[]>;\n  fork(): Promise<ForkResult>;\n  replace(source: DocReplacementOptions): Promise<void>;\n  // Get list of document versions (specify raw to bypass caching, which should only make\n  // a difference if snapshots have \"leaked\")\n  getSnapshots(raw?: boolean): Promise<DocSnapshots>;\n  // remove selected snapshots, or all snapshots that have \"leaked\" from inventory (should\n  // be empty), or all but the current snapshot.\n  removeSnapshots(snapshotIds: string[] | 'unlisted' | 'past'): Promise<{snapshotIds: string[]}>;\n  forceReload(): Promise<void>;\n  recover(recoveryMode: boolean): Promise<void>;\n  // Compare two documents, optionally including details of the changes.\n  compareDoc(remoteDocId: string, options?: { detail: boolean }): Promise<DocStateComparison>;\n  // Compare two versions within a document, including details of the changes.\n  // Versions are identified by action hashes, or aliases understood by HashUtil.\n  // Currently, leftHash is expected to be an ancestor of rightHash.  If rightHash\n  // is HEAD, the result will contain a copy of any rows added or updated.\n  compareVersion(leftHash: string, rightHash: string): Promise<DocStateComparison>;\n  getDownloadUrl(options: {template: boolean, removeHistory: boolean}): string;\n  getDownloadXlsxUrl(params?: DownloadDocParams): string;\n  getDownloadCsvUrl(params: DownloadDocParams): string;\n  getDownloadTableSchemaUrl(params: DownloadDocParams): string;\n  /**\n   * Exports current document to the Google Drive as a spreadsheet file. To invoke this method, first\n   * acquire \"code\" via Google Auth Endpoint (see ShareMenu.ts for an example).\n   * @param code Authorization code returned from Google (requested via Grist's Google Auth Endpoint)\n   * @param title Name of the spreadsheet that will be created (should use a Grist document's title)\n   */\n  sendToDrive(code: string, title: string): Promise<{url: string}>;\n  // Upload a single attachment and return the resulting metadata row ID.\n  // The arguments are passed to FormData.append.\n  uploadAttachment(value: string | Blob, filename?: string): Promise<number>;\n\n  // Get users that are worth proposing to \"View As\" for access control purposes.\n  getUsersForViewAs(): Promise<PermissionDataWithExtraUsers>;\n\n  getWebhooks(): Promise<WebhookSummaryCollection>;\n  addWebhook(webhook: WebhookFields): Promise<{webhookId: string}>;\n  removeWebhook(webhookId: string, tableId: string): Promise<void>;\n  // Update webhook\n  updateWebhook(webhook: WebhookUpdate): Promise<void>;\n  flushWebhooks(): Promise<void>;\n  flushWebhook(webhookId: string): Promise<void>;\n\n  getAssistance(params: AssistanceRequest): Promise<AssistanceResponse>;\n}\n\n// Operations that are supported by a doc worker.\nexport interface DocWorkerAPI {\n  readonly url: string;\n  importDocToWorkspace(uploadId: number, workspaceId: number, settings?: BrowserSettings): Promise<DocCreationInfo>;\n  upload(material: UploadType, filename?: string): Promise<number>;\n  downloadDoc(docId: string, template?: boolean): Promise<Response>;\n  copyDoc(docId: string, template?: boolean, name?: string): Promise<number>;\n}\n\nexport class UserAPIImpl extends BaseAPI implements UserAPI {\n  constructor(private _homeUrl: string, private _options: IOptions = {}) {\n    super(_options);\n  }\n\n  public forRemoved(): UserAPI {\n    const extraParameters = new Map<string, string>([['showRemoved', '1']]);\n    return new UserAPIImpl(this._homeUrl, {...this._options, extraParameters});\n  }\n\n  public async getSessionActive(): Promise<ActiveSessionInfo> {\n    return this.requestJson(`${this._url}/api/session/access/active`, {method: 'GET'});\n  }\n\n  public async setSessionActive(email: string, org?: string): Promise<void> {\n    const body = JSON.stringify({ email, org });\n    return this.requestJson(`${this._url}/api/session/access/active`, {method: 'POST', body});\n  }\n\n  public async getSessionAll(): Promise<{users: FullUser[], orgs: Organization[]}> {\n    return this.requestJson(`${this._url}/api/session/access/all`, {method: 'GET'});\n  }\n\n  public async getOrgs(merged: boolean = false): Promise<Organization[]> {\n    return this.requestJson(`${this._url}/api/orgs?merged=${merged ? 1 : 0}`, { method: 'GET' });\n  }\n\n  public async getWorkspace(workspaceId: number): Promise<Workspace> {\n    return this.requestJson(`${this._url}/api/workspaces/${workspaceId}`, { method: 'GET' });\n  }\n\n  public async getOrg(orgId: number|string): Promise<Organization> {\n    return this.requestJson(`${this._url}/api/orgs/${orgId}`, { method: 'GET' });\n  }\n\n  public async getOrgWorkspaces(orgId: number|string): Promise<Workspace[]> {\n    return this.requestJson(`${this._url}/api/orgs/${orgId}/workspaces?includeSupport=1`,\n      { method: 'GET' });\n  }\n\n  public async getOrgUsageSummary(orgId: number|string): Promise<OrgUsageSummary> {\n    return this.requestJson(`${this._url}/api/orgs/${orgId}/usage`, { method: 'GET' });\n  }\n\n  public async getTemplates(onlyFeatured: boolean = false): Promise<Workspace[]> {\n    return this.requestJson(`${this._url}/api/templates?onlyFeatured=${onlyFeatured ? 1 : 0}`, { method: 'GET' });\n  }\n\n  public async getWidgets(): Promise<ICustomWidget[]> {\n    return await this.requestJson(`${this._url}/api/widgets`, { method: 'GET' });\n  }\n\n  public async getDoc(docId: string): Promise<Document> {\n    return this.requestJson(`${this._url}/api/docs/${docId}`, { method: 'GET' });\n  }\n\n  public async newOrg(props: Partial<OrganizationProperties>): Promise<number> {\n    return this.requestJson(`${this._url}/api/orgs`, {\n      method: 'POST',\n      body: JSON.stringify(props)\n    });\n  }\n\n  public async newWorkspace(props: Partial<WorkspaceProperties>, orgId: number|string): Promise<number> {\n    return this.requestJson(`${this._url}/api/orgs/${orgId}/workspaces`, {\n      method: 'POST',\n      body: JSON.stringify(props)\n    });\n  }\n\n  public async newDoc(props: Partial<DocumentProperties>, workspaceId: number): Promise<string> {\n    return this.requestJson(`${this._url}/api/workspaces/${workspaceId}/docs`, {\n      method: 'POST',\n      body: JSON.stringify(props)\n    });\n  }\n\n  public async newUnsavedDoc(options: {timezone?: string} = {}): Promise<string> {\n    return this.requestJson(`${this._url}/api/docs`, {\n      method: 'POST',\n      body: JSON.stringify(options),\n    });\n  }\n\n  public async renameOrg(orgId: number|string, name: string): Promise<void> {\n    await this.request(`${this._url}/api/orgs/${orgId}`, {\n      method: 'PATCH',\n      body: JSON.stringify({ name })\n    });\n  }\n\n  public async renameWorkspace(workspaceId: number, name: string): Promise<void> {\n    await this.request(`${this._url}/api/workspaces/${workspaceId}`, {\n      method: 'PATCH',\n      body: JSON.stringify({ name })\n    });\n  }\n\n  public async renameDoc(docId: string, name: string): Promise<void> {\n    return this.updateDoc(docId, {name});\n  }\n\n  public async updateOrg(orgId: number|string, props: Partial<OrganizationProperties>): Promise<void> {\n    await this.request(`${this._url}/api/orgs/${orgId}`, {\n      method: 'PATCH',\n      body: JSON.stringify(props)\n    });\n  }\n\n  public async updateDoc(docId: string, props: Partial<DocumentProperties>): Promise<void> {\n    await this.request(`${this._url}/api/docs/${docId}`, {\n      method: 'PATCH',\n      body: JSON.stringify(props)\n    });\n  }\n\n  public async deleteOrg(orgId: number|string): Promise<void> {\n    await this.request(`${this._url}/api/orgs/${orgId}`, { method: 'DELETE' });\n  }\n\n  public async deleteWorkspace(workspaceId: number): Promise<void> {\n    await this.request(`${this._url}/api/workspaces/${workspaceId}`, { method: 'DELETE' });\n  }\n\n  public async softDeleteWorkspace(workspaceId: number): Promise<void> {\n    await this.request(`${this._url}/api/workspaces/${workspaceId}/remove`, { method: 'POST' });\n  }\n\n  public async undeleteWorkspace(workspaceId: number): Promise<void> {\n    await this.request(`${this._url}/api/workspaces/${workspaceId}/unremove`, { method: 'POST' });\n  }\n\n  public async deleteDoc(docId: string): Promise<void> {\n    await this.request(`${this._url}/api/docs/${docId}`, { method: 'DELETE' });\n  }\n\n  public async softDeleteDoc(docId: string): Promise<void> {\n    await this.request(`${this._url}/api/docs/${docId}/remove`, { method: 'POST' });\n  }\n\n  public async undeleteDoc(docId: string): Promise<void> {\n    await this.request(`${this._url}/api/docs/${docId}/unremove`, { method: 'POST' });\n  }\n\n  public async updateOrgPermissions(orgId: number|string, delta: PermissionDelta): Promise<void> {\n    await this.request(`${this._url}/api/orgs/${orgId}/access`, {\n      method: 'PATCH',\n      body: JSON.stringify({ delta })\n    });\n  }\n\n  public async updateWorkspacePermissions(workspaceId: number, delta: PermissionDelta): Promise<void> {\n    await this.request(`${this._url}/api/workspaces/${workspaceId}/access`, {\n      method: 'PATCH',\n      body: JSON.stringify({ delta })\n    });\n  }\n\n  public async updateDocPermissions(docId: string, delta: PermissionDelta): Promise<void> {\n    await this.request(`${this._url}/api/docs/${docId}/access`, {\n      method: 'PATCH',\n      body: JSON.stringify({ delta })\n    });\n  }\n\n  public async getOrgAccess(orgId: number|string): Promise<PermissionData> {\n    return this.requestJson(`${this._url}/api/orgs/${orgId}/access`, { method: 'GET' });\n  }\n\n  public async getWorkspaceAccess(workspaceId: number): Promise<PermissionData> {\n    return this.requestJson(`${this._url}/api/workspaces/${workspaceId}/access`, { method: 'GET' });\n  }\n\n  public async getDocAccess(docId: string): Promise<PermissionData> {\n    return this.requestJson(`${this._url}/api/docs/${docId}/access`, { method: 'GET' });\n  }\n\n  public async pinDoc(docId: string): Promise<void> {\n    await this.request(`${this._url}/api/docs/${docId}/pin`, {\n      method: 'PATCH'\n    });\n  }\n\n  public async unpinDoc(docId: string): Promise<void> {\n    await this.request(`${this._url}/api/docs/${docId}/unpin`, {\n      method: 'PATCH'\n    });\n  }\n\n  public async moveDoc(docId: string, workspaceId: number): Promise<void> {\n    await this.request(`${this._url}/api/docs/${docId}/move`, {\n      method: 'PATCH',\n      body: JSON.stringify({ workspace: workspaceId })\n    });\n  }\n\n  public async getUserProfile(): Promise<FullUser> {\n    return this.requestJson(`${this._url}/api/profile/user`);\n  }\n\n  public async updateUserName(name: string): Promise<void> {\n    await this.request(`${this._url}/api/profile/user/name`, {\n      method: 'POST',\n      body: JSON.stringify({name})\n    });\n  }\n\n  public async updateUserLocale(locale: string|null): Promise<void> {\n    await this.request(`${this._url}/api/profile/user/locale`, {\n      method: 'POST',\n      body: JSON.stringify({locale})\n    });\n  }\n\n  public async updateAllowGoogleLogin(allowGoogleLogin: boolean): Promise<void> {\n    await this.request(`${this._url}/api/profile/allowGoogleLogin`, {\n      method: 'POST',\n      body: JSON.stringify({allowGoogleLogin})\n    });\n  }\n\n  public async updateIsConsultant(userId: number, isConsultant: boolean): Promise<void> {\n    await this.request(`${this._url}/api/profile/isConsultant`, {\n      method: 'POST',\n      body: JSON.stringify({userId, isConsultant})\n    });\n  }\n\n  public async getWorker(key: string): Promise<string> {\n    const json = await this.requestJson(`${this._url}/api/worker/${key}`, {\n      method: 'GET',\n      credentials: 'include'\n    });\n    return getDocWorkerUrl(this._homeUrl, json);\n  }\n\n  public async getWorkerAPI(key: string): Promise<DocWorkerAPI> {\n    const docUrl = this._urlWithOrg(await this.getWorker(key));\n    return new DocWorkerAPIImpl(docUrl, this._options);\n  }\n\n  public getBillingAPI(): BillingAPI {\n    return new BillingAPIImpl(this._url, this._options);\n  }\n\n  public getDocAPI(docId: string): DocAPI {\n    return new DocAPIImpl(this._url, docId, this._options);\n  }\n\n  public async fetchApiKey(): Promise<string> {\n    const resp = await this.request(`${this._url}/api/profile/apiKey`);\n    return await resp.text();\n  }\n\n  public async createApiKey(): Promise<string> {\n    const res = await this.request(`${this._url}/api/profile/apiKey`, {\n      method: 'POST'\n    });\n    return await res.text();\n  }\n\n  public async deleteApiKey(): Promise<void> {\n    await this.request(`${this._url}/api/profile/apiKey`, {\n      method: 'DELETE'\n    });\n  }\n\n  // This method is not strictly needed anymore, but is widely used by\n  // tests so supporting as a handy shortcut for getDocAPI(docId).getRows(tableName)\n  public async getTable(docId: string, tableName: string): Promise<TableColValues> {\n    return this.getDocAPI(docId).getRows(tableName);\n  }\n\n  public async applyUserActions(docId: string, actions: UserAction[]): Promise<ApplyUAResult> {\n    return this.requestJson(`${this._url}/api/docs/${docId}/apply`, {\n      method: 'POST',\n      body: JSON.stringify(actions)\n    });\n  }\n\n  public async importUnsavedDoc(material: UploadType, options?: {\n    filename?: string,\n    timezone?: string,\n    onUploadProgress?: (ev: ProgressEvent) => void,\n  }): Promise<string> {\n    options = options || {};\n    const formData = this.newFormData();\n    formData.append('upload', material as any, options.filename);\n    if (options.timezone) { formData.append('timezone', options.timezone); }\n    const resp = await this.requestAxios(`${this._url}/api/docs`, {\n      method: 'POST',\n      data: formData,\n      onUploadProgress: options.onUploadProgress,\n      // On browser, it is important not to set Content-Type so that the browser takes care\n      // of setting HTTP headers appropriately.  Outside browser, requestAxios has logic\n      // for setting the HTTP headers.\n      headers: {...this.defaultHeadersWithoutContentType()},\n    });\n    return resp.data;\n  }\n\n  public async deleteUser(userId: number, name: string) {\n    await this.request(`${this._url}/api/users/${userId}`,\n                       {method: 'DELETE',\n                        body: JSON.stringify({name})});\n  }\n\n  public getBaseUrl(): string { return this._url; }\n\n  // Recomputes the URL on every call to pick up changes in the URL when switching orgs.\n  // (Feels inefficient, but probably doesn't matter, and it's simpler than the alternatives.)\n  private get _url(): string {\n    return this._urlWithOrg(this._homeUrl);\n  }\n\n  private _urlWithOrg(base: string): string {\n    return isClient() ? addCurrentOrgToPath(base) : base.replace(/\\/$/, '');\n  }\n}\n\nexport class DocWorkerAPIImpl extends BaseAPI implements DocWorkerAPI {\n  constructor(public readonly url: string, _options: IOptions = {}) {\n    super(_options);\n  }\n\n  public async importDocToWorkspace(uploadId: number, workspaceId: number, browserSettings?: BrowserSettings):\n      Promise<DocCreationInfo> {\n    return this.requestJson(`${this.url}/api/workspaces/${workspaceId}/import`, {\n      method: 'POST',\n      body: JSON.stringify({ uploadId, browserSettings })\n    });\n  }\n\n  public async upload(material: UploadType, filename?: string): Promise<number> {\n    const formData = this.newFormData();\n    formData.append('upload', material as any, filename);\n    const json = await this.requestJson(`${this.url}/uploads`, {\n      // On browser, it is important not to set Content-Type so that the browser takes care\n      // of setting HTTP headers appropriately.  Outside of browser, node-fetch also appears\n      // to take care of this - https://github.github.io/fetch/#request-body\n      headers: {...this.defaultHeadersWithoutContentType()},\n      method: 'POST',\n      body: formData\n    });\n    return json.uploadId;\n  }\n\n  public async downloadDoc(docId: string, template: boolean = false): Promise<Response> {\n    const extra = template ? '?template=1' : '';\n    const result = await this.request(`${this.url}/api/docs/${docId}/download${extra}`, {\n      method: 'GET',\n    });\n    if (!result.ok) { throw new Error(await result.text()); }\n    return result;\n  }\n\n  public async copyDoc(docId: string, template: boolean = false, name?: string): Promise<number> {\n    const url = new URL(`${this.url}/copy?doc=${docId}`);\n    if (template) {\n      url.searchParams.append('template', '1');\n    }\n    if (name) {\n      url.searchParams.append('name', name);\n    }\n    const json = await this.requestJson(url.href, {\n      method: 'POST',\n    });\n    return json.uploadId;\n  }\n}\n\nexport class DocAPIImpl extends BaseAPI implements DocAPI {\n  private _url: string;\n\n  constructor(url: string, public readonly docId: string, options: IOptions = {}) {\n    super(options);\n    this._url = `${url}/api/docs/${docId}`;\n  }\n\n  public async getRows(tableId: string, options?: GetRowsParams): Promise<TableColValues> {\n    return this._getRecords(tableId, 'data', options);\n  }\n\n  public async getRecords(tableId: string, options?: GetRowsParams): Promise<TableRecordValue[]> {\n    const response: TableRecordValues = await this._getRecords(tableId, 'records', options);\n    return response.records;\n  }\n\n  public async updateRows(tableId: string, changes: TableColValues): Promise<number[]> {\n    return this.requestJson(`${this._url}/tables/${tableId}/data`, {\n      body: JSON.stringify(changes),\n      method: 'PATCH'\n    });\n  }\n\n  public async addRows(tableId: string, additions: BulkColValues): Promise<number[]> {\n    return this.requestJson(`${this._url}/tables/${tableId}/data`, {\n      body: JSON.stringify(additions),\n      method: 'POST'\n    });\n  }\n\n  public async removeRows(tableId: string, removals: number[]): Promise<number[]> {\n    return this.requestJson(`${this._url}/tables/${tableId}/data/delete`, {\n      body: JSON.stringify(removals),\n      method: 'POST'\n    });\n  }\n\n  public async fork(): Promise<ForkResult> {\n    return this.requestJson(`${this._url}/fork`, {\n      method: 'POST'\n    });\n  }\n\n  public async replace(source: DocReplacementOptions): Promise<void> {\n    return this.requestJson(`${this._url}/replace`, {\n      body: JSON.stringify(source),\n      method: 'POST'\n    });\n  }\n\n  public async getSnapshots(raw?: boolean): Promise<DocSnapshots> {\n    return this.requestJson(`${this._url}/snapshots?raw=${raw}`);\n  }\n\n  public async removeSnapshots(snapshotIds: string[] | 'unlisted' | 'past') {\n    const body = typeof snapshotIds === 'string' ? { select: snapshotIds } : { snapshotIds };\n    return await this.requestJson(`${this._url}/snapshots/remove`, {\n      method: 'POST',\n      body: JSON.stringify(body)\n    });\n  }\n\n  public async getUsersForViewAs(): Promise<PermissionDataWithExtraUsers> {\n    return this.requestJson(`${this._url}/usersForViewAs`);\n  }\n\n  public async getWebhooks(): Promise<WebhookSummaryCollection> {\n    return this.requestJson(`${this._url}/webhooks`);\n  }\n\n  public async addWebhook(webhook: WebhookSubscribe & {tableId: string}): Promise<{webhookId: string}> {\n    const {tableId} = webhook;\n    return this.requestJson(`${this._url}/tables/${tableId}/_subscribe`, {\n      method: 'POST',\n      body: JSON.stringify(\n        omitBy(webhook, (val, key) => key === 'tableId' || val === null)),\n    });\n  }\n\n  public async updateWebhook(webhook: WebhookUpdate): Promise<void> {\n    return this.requestJson(`${this._url}/webhooks/${webhook.id}`, {\n      method: 'PATCH',\n      body: JSON.stringify(webhook.fields),\n    });\n  }\n\n  public removeWebhook(webhookId: string, tableId: string) {\n    // unsubscribeKey is not required for owners\n    const unsubscribeKey = '';\n    return this.requestJson(`${this._url}/tables/${tableId}/_unsubscribe`, {\n      method: 'POST',\n      body: JSON.stringify({webhookId, unsubscribeKey}),\n    });\n  }\n\n  public async flushWebhooks(): Promise<void> {\n    await this.request(`${this._url}/webhooks/queue`, {\n      method: 'DELETE'\n    });\n  }\n\n  public async flushWebhook(id: string): Promise<void> {\n    await this.request(`${this._url}/webhooks/queue/${id}`, {\n      method: 'DELETE'\n    });\n  }\n\n  public async forceReload(): Promise<void> {\n    await this.request(`${this._url}/force-reload`, {\n      method: 'POST'\n    });\n  }\n\n  public async recover(recoveryMode: boolean): Promise<void> {\n    await this.request(`${this._url}/recover`, {\n      body: JSON.stringify({recoveryMode}),\n      method: 'POST'\n    });\n  }\n\n  public async compareDoc(remoteDocId: string, options: {\n    detail?: boolean\n  } = {}): Promise<DocStateComparison> {\n     const q = options.detail ? '?detail=true' : '';\n     return this.requestJson(`${this._url}/compare/${remoteDocId}${q}`);\n  }\n\n  public async compareVersion(leftHash: string, rightHash: string): Promise<DocStateComparison> {\n    const url = new URL(`${this._url}/compare`);\n    url.searchParams.append('left', leftHash);\n    url.searchParams.append('right', rightHash);\n    return this.requestJson(url.href);\n  }\n\n  public getDownloadUrl({template, removeHistory}: {template: boolean, removeHistory: boolean}): string {\n    return this._url + `/download?template=${template}&nohistory=${removeHistory}`;\n  }\n\n  public getDownloadXlsxUrl(params: DownloadDocParams) {\n    return this._url + '/download/xlsx?' + encodeQueryParams({...params});\n  }\n\n  public getDownloadCsvUrl(params: DownloadDocParams) {\n    // We spread `params` to work around TypeScript being overly cautious.\n    return this._url + '/download/csv?' + encodeQueryParams({...params});\n  }\n\n  public getDownloadTableSchemaUrl(params: DownloadDocParams) {\n    // We spread `params` to work around TypeScript being overly cautious.\n    return this._url + '/download/table-schema?' + encodeQueryParams({...params});\n  }\n\n  public async sendToDrive(code: string, title: string): Promise<{url: string}> {\n    const url = new URL(`${this._url}/send-to-drive`);\n    url.searchParams.append('title', title);\n    url.searchParams.append('code', code);\n    return this.requestJson(url.href);\n  }\n\n  public async uploadAttachment(value: string | Blob, filename?: string): Promise<number> {\n    const formData = this.newFormData();\n    formData.append('upload', value, filename);\n    const response = await this.requestAxios(`${this._url}/attachments`, {\n      method: 'POST',\n      data: formData,\n      // On browser, it is important not to set Content-Type so that the browser takes care\n      // of setting HTTP headers appropriately.  Outside browser, requestAxios has logic\n      // for setting the HTTP headers.\n      headers: {...this.defaultHeadersWithoutContentType()},\n    });\n    return response.data[0];\n  }\n\n  public async getAssistance(params: AssistanceRequest): Promise<AssistanceResponse> {\n    return await this.requestJson(`${this._url}/assistant`, {\n      method: 'POST',\n      body: JSON.stringify(params),\n    });\n  }\n\n  private _getRecords(tableId: string, endpoint: 'data' | 'records', options?: GetRowsParams): Promise<any> {\n    const url = new URL(`${this._url}/tables/${tableId}/${endpoint}`);\n    if (options?.filters) {\n      url.searchParams.append('filter', JSON.stringify(options.filters));\n    }\n    if (options?.immediate) {\n      url.searchParams.append('immediate', 'true');\n    }\n    return this.requestJson(url.href);\n  }\n}\n\n/**\n * Get a docWorkerUrl from information returned from backend. When the backend\n * is fully configured, and there is a pool of workers, this is straightforward,\n * just return the docWorkerUrl reported by the backend. For single-instance\n * installs, the backend returns a null docWorkerUrl, and a client can simply\n * use the homeUrl of the backend, with extra path prefix information\n * given by selfPrefix. At the time of writing, the selfPrefix contains a\n * doc-worker id, and a tag for the codebase (used in consistency checks).\n */\nexport function getDocWorkerUrl(homeUrl: string, docWorkerInfo: {\n  docWorkerUrl: string|null,\n  selfPrefix?: string,\n}): string {\n  if (!docWorkerInfo.docWorkerUrl) {\n    if (!docWorkerInfo.selfPrefix) {\n      // This should never happen.\n      throw new Error('missing selfPrefix for docWorkerUrl');\n    }\n    const url = new URL(homeUrl);\n    url.pathname = docWorkerInfo.selfPrefix + url.pathname;\n    return url.href;\n  }\n  return docWorkerInfo.docWorkerUrl;\n}\n","import {BehavioralPromptsManager} from 'app/client/components/BehavioralPromptsManager';\nimport {hooks} from 'app/client/Hooks';\nimport {get as getBrowserGlobals} from 'app/client/lib/browserGlobals';\nimport {makeT} from 'app/client/lib/localization';\nimport {sessionStorageObs} from 'app/client/lib/localStorageObs';\nimport {error} from 'app/client/lib/log';\nimport {reportError, setErrorNotifier} from 'app/client/models/errors';\nimport {urlState} from 'app/client/models/gristUrlState';\nimport {Notifier} from 'app/client/models/NotifyModel';\nimport {getFlavor, ProductFlavor} from 'app/client/ui/CustomThemes';\nimport {buildNewSiteModal, buildUpgradeModal} from 'app/client/ui/ProductUpgrades';\nimport {SupportGristNudge} from 'app/client/ui/SupportGristNudge';\nimport {attachCssThemeVars, prefersDarkModeObs} from 'app/client/ui2018/cssVars';\nimport {OrgUsageSummary} from 'app/common/DocUsage';\nimport {Features, isLegacyPlan, Product} from 'app/common/Features';\nimport {GristLoadConfig, IGristUrlState} from 'app/common/gristUrls';\nimport {FullUser} from 'app/common/LoginSessionAPI';\nimport {LocalPlugin} from 'app/common/plugin';\nimport {DismissedPopup, DismissedReminder, UserPrefs} from 'app/common/Prefs';\nimport {isOwner, isOwnerOrEditor} from 'app/common/roles';\nimport {getTagManagerScript} from 'app/common/tagManager';\nimport {getDefaultThemePrefs, Theme, ThemeColors, ThemePrefs,\n        ThemePrefsChecker} from 'app/common/ThemePrefs';\nimport {getThemeColors} from 'app/common/Themes';\nimport {getGristConfig} from 'app/common/urlUtils';\nimport {getOrgName, isTemplatesOrg, Organization, OrgError, UserAPI, UserAPIImpl} from 'app/common/UserAPI';\nimport {getUserPrefObs, getUserPrefsObs, markAsSeen, markAsUnSeen} from 'app/client/models/UserPrefs';\nimport {bundleChanges, Computed, Disposable, Observable, subscribe} from 'grainjs';\n\nconst t = makeT('AppModel');\n\n// Reexported for convenience.\nexport {reportError} from 'app/client/models/errors';\n\nexport type PageType =\n  | \"doc\"\n  | \"home\"\n  | \"billing\"\n  | \"welcome\"\n  | \"account\"\n  | \"support-grist\"\n  | \"activation\";\n\nconst G = getBrowserGlobals('document', 'window');\n\n// TopAppModel is the part of the app model that persists across org and user switches.\nexport interface TopAppModel {\n  api: UserAPI;\n  isSingleOrg: boolean;\n  productFlavor: ProductFlavor;\n  currentSubdomain: Observable<string|undefined>;\n\n  notifier: Notifier;\n  plugins: LocalPlugin[];\n\n  // Everything else gets fully rebuilt when the org/user changes. This is to ensure that\n  // different parts of the code aren't using different users/orgs while the switch is pending.\n  appObs: Observable<AppModel|null>;\n\n  orgs: Observable<Organization[]>;\n  users: Observable<FullUser[]>;\n\n  // Reinitialize the app. This is called when org or user changes.\n  initialize(): void;\n\n  // Rebuilds the AppModel and consequently the AppUI, without changing the user or the org.\n  reload(): void;\n\n  /**\n   * Returns the UntrustedContentOrigin use settings. Throws if not defined.\n   */\n  getUntrustedContentOrigin(): string;\n  /**\n   * Reloads orgs and accounts for current user.\n   */\n  fetchUsersAndOrgs(): Promise<void>;\n}\n\n/**\n * AppModel is specific to the currently loaded organization and active user. It gets rebuilt when\n * we switch the current organization or the current user.\n */\nexport interface AppModel {\n  topAppModel: TopAppModel;\n  api: UserAPI;\n\n  currentUser: FullUser|null;\n  currentValidUser: FullUser|null;      // Like currentUser, but null when anonymous\n\n  currentOrg: Organization|null;        // null if no access to currentSubdomain\n  currentOrgName: string;               // Our best guess for human-friendly name.\n  currentOrgUsage: Observable<OrgUsageSummary|null>;\n  isPersonal: boolean;                  // Is it a personal site?\n  isTeamSite: boolean;                  // Is it a team site?\n  isLegacySite: boolean;                // Is it a legacy site?\n  isTemplatesSite: boolean;             // Is it the templates site?\n  orgError?: OrgError;                  // If currentOrg is null, the error that caused it.\n  lastVisitedOrgDomain: Observable<string|null>;\n\n  currentProduct: Product|null;         // The current org's product.\n  currentFeatures: Features;            // Features of the current org's product.\n\n  userPrefsObs: Observable<UserPrefs>;\n  themePrefs: Observable<ThemePrefs>;\n  currentTheme: Computed<Theme>;\n  /**\n   * Popups that user has seen.\n   */\n  dismissedPopups: Observable<DismissedPopup[]>;\n  dismissedWelcomePopups: Observable<DismissedReminder[]>;\n\n  pageType: Observable<PageType>;\n  needsOrg: Observable<boolean>;\n\n  notifier: Notifier;\n  planName: string|null;\n\n  behavioralPromptsManager: BehavioralPromptsManager;\n\n  supportGristNudge: SupportGristNudge;\n\n  refreshOrgUsage(): Promise<void>;\n  showUpgradeModal(): void;\n  showNewSiteModal(): void;\n  isBillingManager(): boolean;          // If user is a billing manager for this org\n  isSupport(): boolean;                 // If user is a Support user\n  isOwner(): boolean;                   // If user is an owner of this org\n  isOwnerOrEditor(): boolean;           // If user is an owner or editor of this org\n  /** Creates an computed observable to dismiss a popup or check if it was dismissed */\n  dismissedPopup(name: DismissedPopup): Observable<boolean>;\n}\n\nexport class TopAppModelImpl extends Disposable implements TopAppModel {\n  public readonly isSingleOrg: boolean;\n  public readonly productFlavor: ProductFlavor;\n\n  public readonly currentSubdomain = Computed.create(this, urlState().state, (use, s) => s.org);\n  public readonly notifier = Notifier.create(this);\n  public readonly appObs = Observable.create<AppModel|null>(this, null);\n  public readonly orgs = Observable.create<Organization[]>(this, []);\n  public readonly users = Observable.create<FullUser[]>(this, []);\n  public readonly plugins: LocalPlugin[] = [];\n  private readonly _gristConfig?: GristLoadConfig;\n\n  constructor(\n    window: {gristConfig?: GristLoadConfig},\n    public readonly api: UserAPI = newUserAPIImpl(),\n  ) {\n    super();\n    setErrorNotifier(this.notifier);\n    this.isSingleOrg = Boolean(window.gristConfig && window.gristConfig.singleOrg);\n    this.productFlavor = getFlavor(window.gristConfig && window.gristConfig.org);\n    this._gristConfig = window.gristConfig;\n\n    // Initially, and on any change to subdomain, call initialize() to get the full Organization\n    // and the FullUser to use for it (the user may change when switching orgs).\n    this.autoDispose(subscribe(this.currentSubdomain, (use) => this.initialize()));\n    this.plugins = this._gristConfig?.plugins || [];\n\n    this.fetchUsersAndOrgs().catch(reportError);\n  }\n\n  public initialize(): void {\n    this._doInitialize().catch(reportError);\n  }\n\n  // Rebuilds the AppModel and consequently the AppUI, etc, without changing the user or the org.\n  public reload(): void {\n    const app = this.appObs.get();\n    if (app) {\n      const {currentUser, currentOrg, orgError} = app;\n      AppModelImpl.create(this.appObs, this, currentUser, currentOrg, orgError);\n    }\n  }\n\n  public getUntrustedContentOrigin() {\n    if (G.window.isRunningUnderElectron) {\n      // when loaded within webviews it is safe to serve plugin's content from the same domain\n      return \"\";\n    }\n\n    const origin =  this._gristConfig?.pluginUrl;\n    if (!origin) {\n      throw new Error(\"Missing untrustedContentOrigin configuration\");\n    }\n    if (origin.match(/:[0-9]+$/)) {\n      // Port number already specified, no need to add.\n      return origin;\n    }\n    return origin + \":\" + G.window.location.port;\n  }\n\n  public async fetchUsersAndOrgs() {\n    const data = await this.api.getSessionAll();\n    if (this.isDisposed()) { return; }\n    bundleChanges(() => {\n      this.users.set(data.users);\n      this.orgs.set(data.orgs);\n    });\n  }\n\n  private async _doInitialize() {\n    this.appObs.set(null);\n    try {\n      const {user, org, orgError} = await this.api.getSessionActive();\n      if (this.isDisposed()) { return; }\n      if (org) {\n        // Check that our domain matches what the api returns.\n        const state = urlState().state.get();\n        if (state.org !== org.domain && org.domain !== null) {\n          // If not, redirect.  This is to allow vanity domains\n          // to \"stick\" only if paid for.\n          await urlState().pushUrl({...state, org: org.domain});\n        }\n        if (org.billingAccount && org.billingAccount.product &&\n            org.billingAccount.product.name === 'suspended') {\n          this.notifier.createUserMessage(\n            t(\"This team site is suspended. Documents can be read, but not modified.\"),\n            {actions: ['renew', 'personal']}\n          );\n        }\n      }\n      AppModelImpl.create(this.appObs, this, user, org, orgError);\n    } catch (err) {\n      // tslint:disable-next-line:no-console\n      console.log(`getSessionActive() failed: ${err}`);\n      if (this.isDisposed()) { return; }\n      AppModelImpl.create(this.appObs, this, null, null, {error: err.message, status: err.status || 500});\n    }\n  }\n}\n\nexport class AppModelImpl extends Disposable implements AppModel {\n  public readonly api: UserAPI = this.topAppModel.api;\n\n  // Compute currentValidUser, turning anonymous into null.\n  public readonly currentValidUser: FullUser|null =\n    this.currentUser && !this.currentUser.anonymous ? this.currentUser : null;\n\n  // Figure out the org name, or blank if details are unavailable.\n  public readonly currentOrgName = getOrgNameOrGuest(this.currentOrg, this.currentUser);\n\n  public readonly currentOrgUsage: Observable<OrgUsageSummary|null> = Observable.create(this, null);\n\n  public readonly lastVisitedOrgDomain = this.autoDispose(sessionStorageObs('grist-last-visited-org-domain'));\n\n  public readonly currentProduct = this.currentOrg?.billingAccount?.product ?? null;\n  public readonly currentFeatures = this.currentProduct?.features ?? {};\n\n  public readonly isPersonal = Boolean(this.currentOrg?.owner);\n  public readonly isTeamSite = Boolean(this.currentOrg) && !this.isPersonal;\n  public readonly isLegacySite = Boolean(this.currentProduct && isLegacyPlan(this.currentProduct.name));\n  public readonly isTemplatesSite = isTemplatesOrg(this.currentOrg);\n\n  public readonly userPrefsObs = getUserPrefsObs(this);\n  public readonly themePrefs = getUserPrefObs(this.userPrefsObs, 'theme', {\n    defaultValue: getDefaultThemePrefs(),\n    checker: ThemePrefsChecker,\n  }) as Observable<ThemePrefs>;\n  public readonly currentTheme = this._getCurrentThemeObs();\n\n  public readonly dismissedPopups = getUserPrefObs(this.userPrefsObs, 'dismissedPopups',\n    { defaultValue: [] }) as Observable<DismissedPopup[]>;\n  public readonly dismissedWelcomePopups = getUserPrefObs(this.userPrefsObs, 'dismissedWelcomePopups',\n    { defaultValue: [] }) as Observable<DismissedReminder[]>;\n\n  // Get the current PageType from the URL.\n  public readonly pageType: Observable<PageType> = Computed.create(this, urlState().state,\n    (_use, state) => {\n      if (state.doc) {\n        return 'doc';\n      } else if (state.billing) {\n        return 'billing';\n      } else if (state.welcome) {\n        return 'welcome';\n      } else if (state.account) {\n        return 'account';\n      } else if (state.supportGrist) {\n        return 'support-grist';\n      } else if (state.activation) {\n        return 'activation';\n      } else {\n        return 'home';\n      }\n    });\n\n  public readonly needsOrg: Observable<boolean> = Computed.create(\n    this, urlState().state, (use, state) => {\n      return !(\n        Boolean(state.welcome) ||\n        state.billing === 'scheduled' ||\n        Boolean(state.account) ||\n        Boolean(state.activation) ||\n        Boolean(state.supportGrist)\n      );\n    });\n\n  public readonly notifier = this.topAppModel.notifier;\n\n  public readonly behavioralPromptsManager: BehavioralPromptsManager =\n    BehavioralPromptsManager.create(this, this);\n\n  public readonly supportGristNudge: SupportGristNudge = SupportGristNudge.create(this, this);\n\n  constructor(\n    public readonly topAppModel: TopAppModel,\n    public readonly currentUser: FullUser|null,\n    public readonly currentOrg: Organization|null,\n    public readonly orgError?: OrgError,\n  ) {\n    super();\n\n    this._applyTheme();\n    this.autoDispose(this.currentTheme.addListener(() => this._applyTheme()));\n\n    this._recordSignUpIfIsNewUser();\n\n    const state = urlState().state.get();\n    if (state.createTeam) {\n      // Remove params from the URL.\n      urlState().pushUrl({createTeam: false, params: {}}, {avoidReload: true, replace: true}).catch(() => {});\n      this.showNewSiteModal(state.params?.planType);\n    }\n\n    G.window.resetDismissedPopups = (seen = false) => {\n      this.dismissedPopups.set(seen ? DismissedPopup.values : []);\n      this.behavioralPromptsManager.reset();\n    };\n\n    this.autoDispose(subscribe(urlState().state, this.topAppModel.orgs, async (_use, s, orgs) => {\n      this._updateLastVisitedOrgDomain(s, orgs);\n    }));\n  }\n\n  public get planName() {\n    return this.currentProduct?.name ?? null;\n  }\n\n  public async showUpgradeModal() {\n    if (this.planName && this.currentOrg) {\n      if (this.isPersonal) {\n        this.showNewSiteModal();\n      } else if (this.isTeamSite) {\n        buildUpgradeModal(this, this.planName);\n      } else {\n        throw new Error(\"Unexpected state\");\n      }\n    }\n  }\n\n  public showNewSiteModal(selectedPlan?: string) {\n    if (this.planName) {\n      buildNewSiteModal(this, {\n        planName: this.planName,\n        selectedPlan,\n        onCreate: () => this.topAppModel.fetchUsersAndOrgs().catch(reportError)\n      });\n    }\n  }\n\n  public isSupport() {\n    return Boolean(this.currentValidUser?.isSupport);\n  }\n\n  public isBillingManager() {\n    return Boolean(this.currentOrg?.billingAccount?.isManager);\n  }\n\n  public isOwner() {\n    return Boolean(this.currentOrg && isOwner(this.currentOrg));\n  }\n\n  public isOwnerOrEditor() {\n    return Boolean(this.currentOrg && isOwnerOrEditor(this.currentOrg));\n  }\n\n  /**\n   * Fetch and update the current org's usage.\n   */\n  public async refreshOrgUsage() {\n    if (!this.isOwner()) {\n      // Note: getOrgUsageSummary already checks for owner access; we do an early return\n      // here to skip making unnecessary API calls.\n      return;\n    }\n\n    const usage = await this.api.getOrgUsageSummary(this.currentOrg!.id);\n    if (!this.isDisposed()) {\n      this.currentOrgUsage.set(usage);\n    }\n  }\n\n  public dismissedPopup(name: DismissedPopup): Computed<boolean> {\n    const computed = Computed.create(null, use => use(this.dismissedPopups).includes(name));\n    computed.onWrite(value => {\n      if (value) {\n        markAsSeen(this.dismissedPopups, name);\n      } else {\n        markAsUnSeen(this.dismissedPopups, name);\n      }\n    });\n    return computed;\n  }\n\n  private _updateLastVisitedOrgDomain({doc, org}: IGristUrlState, availableOrgs: Organization[]) {\n    if (\n      !org ||\n      // Invalid or inaccessible sites shouldn't be counted as visited.\n      !this.currentOrg ||\n      // Visits to a document shouldn't be counted either.\n      doc\n    ) {\n      return;\n    }\n\n    // Only count sites that a user has access to (i.e. those listed in the Site Switcher).\n    if (!availableOrgs.some(({domain}) => domain === org)) { return; }\n\n    this.lastVisitedOrgDomain.set(org);\n  }\n\n  /**\n   * If the current user is a new user, record a sign-up event via Google Tag Manager.\n   */\n  private _recordSignUpIfIsNewUser() {\n    const isNewUser = this.userPrefsObs.get().recordSignUpEvent;\n    if (!isNewUser) { return; }\n\n    // If Google Tag Manager isn't configured, don't record anything.\n    const {tagManagerId} = getGristConfig();\n    if (!tagManagerId) { return; }\n\n    let dataLayer = (window as any).dataLayer;\n    if (!dataLayer) {\n      // Load the Google Tag Manager script into the document.\n      const script = document.createElement('script');\n      script.innerHTML = getTagManagerScript(tagManagerId);\n      document.head.appendChild(script);\n      dataLayer = (window as any).dataLayer;\n      if (!dataLayer) {\n        error(`_recordSignUpIfIsNewUser() failed to load Google Tag Manager`);\n      }\n    }\n\n    // Send the sign-up event, and remove the recordSignUpEvent flag from preferences.\n    dataLayer.push({event: 'new-sign-up'});\n    getUserPrefObs(this.userPrefsObs, 'recordSignUpEvent').set(undefined);\n  }\n\n  private _getCurrentThemeObs() {\n    return Computed.create(this, this.themePrefs, prefersDarkModeObs(),\n      (_use, themePrefs, prefersDarkMode) => {\n        let {appearance, syncWithOS} = themePrefs;\n\n        const urlParams = urlState().state.get().params;\n        if (urlParams?.themeAppearance) {\n          appearance = urlParams?.themeAppearance;\n        }\n\n        if (urlParams?.themeSyncWithOs !== undefined) {\n          syncWithOS = urlParams?.themeSyncWithOs;\n        }\n\n        if (syncWithOS) {\n          appearance = prefersDarkMode ? 'dark' : 'light';\n        }\n\n        let nameOrColors = themePrefs.colors[appearance];\n        if (urlParams?.themeName) {\n          nameOrColors = urlParams?.themeName;\n        }\n\n        let colors: ThemeColors;\n        if (typeof nameOrColors === 'string') {\n          colors = getThemeColors(nameOrColors);\n        } else {\n          colors = nameOrColors;\n        }\n\n        return {appearance, colors};\n      },\n    );\n  }\n\n  /**\n   * Applies a theme based on the user's current theme preferences.\n   */\n  private _applyTheme() {\n    // Custom CSS is incompatible with custom themes.\n    if (getGristConfig().enableCustomCss) { return; }\n\n    attachCssThemeVars(this.currentTheme.get());\n  }\n}\n\nexport function getHomeUrl(): string {\n  const {host, protocol} = window.location;\n  const gristConfig: any = (window as any).gristConfig;\n  return (gristConfig && gristConfig.homeUrl) || `${protocol}//${host}`;\n}\n\nexport function newUserAPIImpl(): UserAPIImpl {\n  return new UserAPIImpl(getHomeUrl(), {\n    fetch: hooks.fetch,\n  });\n}\n\nexport function getOrgNameOrGuest(org: Organization|null, user: FullUser|null) {\n  if (!org) { return ''; }\n  if (user && user.anonymous && org.owner && org.owner.id === user.id) {\n    return \"@Guest\";\n  }\n  return getOrgName(org);\n}\n","import type {AppModel} from 'app/client/models/AppModel';\nimport {commonUrls} from 'app/common/gristUrls';\nimport {Disposable, DomArg, DomContents, IDisposableOwner} from 'grainjs';\n\nexport function buildNewSiteModal(context: Disposable, options: {\n  planName: string,\n  selectedPlan?: string,\n  onCreate?: () => void\n}) {\n  window.location.href = commonUrls.plans;\n}\n\nexport function buildUpgradeModal(owner: Disposable, planName: string)  {\n  window.location.href = commonUrls.plans;\n}\n\nexport function showTeamUpgradeConfirmation(owner: Disposable) {\n}\n\nexport interface UpgradeButton  {\n  showUpgradeCard(...args: DomArg<HTMLElement>[]): DomContents;\n  showUpgradeButton(...args: DomArg<HTMLElement>[]): DomContents;\n}\n\nexport function buildUpgradeButton(owner: IDisposableOwner, app: AppModel): UpgradeButton {\n  return {\n    showUpgradeCard : () => null,\n    showUpgradeButton : () => null,\n  };\n}\n","/**\n * Returns the Google Tag Manager snippet to insert into <head> of the page, if\n * `tagId` is set to a non-empty value. Otherwise returns an empty string.\n */\nexport function getTagManagerSnippet(tagId?: string) {\n  // Note also that we only insert the snippet for the <head>. The second recommended part (for\n  // <body>) is for <noscript> scenario, which doesn't apply to the Grist app (such visits, if\n  // any, wouldn't work and shouldn't be counted for any metrics we care about).\n  if (!tagId) { return \"\"; }\n\n  return `\n<!-- Google Tag Manager -->\n<script>${getTagManagerScript(tagId)}</script>\n<!-- End Google Tag Manager -->\n`;\n}\n\n/**\n * Returns the body of the Google Tag Manager script. This is suitable for use by the client,\n * since it must dynamically load it by calling `document.createElement('script')` and setting\n * its `innerHTML`.\n */\nexport function getTagManagerScript(tagId: string) {\n  return `(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','${tagId}');`;\n}\n","import {IDisposableOwner, Observable} from 'grainjs';\n\nexport interface PausableObservable<T> extends Observable<T> {\n  pause(shouldPause?: boolean): void;\n}\n\n/**\n * Creates and returns an `Observable` that can be paused, effectively causing all\n * calls to `set` to become noops until unpaused, at which point the last value\n * passed to set, if any, will be applied.\n *\n * NOTE: It's only advisable to use this when there are no other alternatives; pausing\n * updates and notifications to subscribers increases the chances of introducing bugs.\n */\nexport function createPausableObs<T>(\n  owner: IDisposableOwner|null,\n  value: T,\n): PausableObservable<T> {\n  let _isPaused = false;\n  let _lastValue: T | undefined = undefined;\n  const obs = Observable.create<T>(owner, value);\n  const set = Symbol('set');\n  return Object.assign(obs, {\n    pause(shouldPause: boolean = true) {\n      _isPaused = shouldPause;\n      if (shouldPause) {\n        _lastValue = undefined;\n      } else if (_lastValue) {\n        obs.set(_lastValue);\n        _lastValue = undefined;\n      }\n    },\n    [set]: obs.set,\n    set(val: T) {\n      _lastValue = val;\n      if (_isPaused) { return; }\n\n      this[set](val);\n    }\n  });\n}\n","import {StringUnion} from 'app/common/StringUnion';\n\n/**\n * Telemetry levels, in increasing order of data collected.\n */\nexport enum Level {\n  off = 0,\n  limited = 1,\n  full = 2,\n}\n\n/**\n * A set of contracts that all telemetry events must follow prior to being\n * logged.\n *\n * Currently, this includes meeting minimum telemetry levels for events\n * and their metadata, and passing in the correct data type for the value of\n * each metadata property.\n *\n * The `minimumTelemetryLevel` defined at the event level will also be applied\n * to all metadata properties of an event, and can be overridden at the metadata\n * level.\n */\nexport const TelemetryContracts: TelemetryContracts = {\n  apiUsage: {\n    description: 'Triggered when an HTTP request with an API key is made.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      method: {\n        description: 'The HTTP request method (e.g. GET, POST, PUT).',\n        dataType: 'string',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n      },\n      userAgent: {\n        description: 'The User-Agent HTTP request header.',\n        dataType: 'string',\n      },\n    },\n  },\n  assistantOpen: {\n    description: 'Triggered when the AI Assistant is first opened.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'short',\n    metadataContracts: {\n      docIdDigest: {\n        description: 'A hash of the doc id.',\n        dataType: 'string',\n      },\n      conversationId: {\n        description: 'A random identifier for the current conversation with the assistant.',\n        dataType: 'string',\n      },\n      context: {\n        description: 'The type of assistant (e.g. \"formula\"), table id, and column id.',\n        dataType: 'object',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n      },\n    },\n  },\n  assistantSend: {\n    description: 'Triggered when a message is sent to the AI Assistant.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'short',\n    metadataContracts: {\n      docIdDigest: {\n        description: 'A hash of the doc id.',\n        dataType: 'string',\n      },\n      siteId: {\n        description: 'The id of the site.',\n        dataType: 'number',\n      },\n      siteType: {\n        description: 'The type of the site.',\n        dataType: 'string',\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n      },\n      access: {\n        description: 'The document access level of the user that triggered this event.',\n        dataType: 'string',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n      },\n      conversationId: {\n        description: 'A random identifier for the current conversation with the assistant.',\n        dataType: 'string',\n      },\n      context: {\n        description: 'The type of assistant (e.g. \"formula\"), table id, and column id.',\n        dataType: 'object',\n      },\n      prompt: {\n        description: 'The role (\"user\" or \"system\"), content, and index of the message sent to the AI Assistant.',\n        dataType: 'object',\n      },\n    },\n  },\n  assistantReceive: {\n    description: 'Triggered when a message is received from the AI Assistant is received.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'short',\n    metadataContracts: {\n      docIdDigest: {\n        description: 'A hash of the doc id.',\n        dataType: 'string',\n      },\n      siteId: {\n        description: 'The id of the site.',\n        dataType: 'number',\n      },\n      siteType: {\n        description: 'The type of the site.',\n        dataType: 'string',\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n      },\n      access: {\n        description: 'The document access level of the user that triggered this event.',\n        dataType: 'string',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n      },\n      conversationId: {\n        description: 'A random identifier for the current conversation with the assistant.',\n        dataType: 'string',\n      },\n      context: {\n        description: 'The type of assistant (e.g. \"formula\"), table id, and column id.',\n        dataType: 'object',\n      },\n      message: {\n        description: 'The content and index of the message received from the AI Assistant.',\n        dataType: 'object',\n      },\n      suggestedFormula: {\n        description: 'The formula suggested by the AI Assistant, if present.',\n        dataType: 'string',\n      },\n    },\n  },\n  assistantSave: {\n    description: 'Triggered when changes in the expanded formula editor are saved after the AI Assistant ' +\n      'was opened.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'short',\n    metadataContracts: {\n      docIdDigest: {\n        description: 'A hash of the doc id.',\n        dataType: 'string',\n      },\n      conversationId: {\n        description: 'A random identifier for the current conversation with the assistant.',\n        dataType: 'string',\n      },\n      context: {\n        description: 'The type of assistant (e.g. \"formula\"), table id, and column id.',\n        dataType: 'object',\n      },\n      newFormula: {\n        description: 'The formula that was saved.',\n        dataType: 'string',\n      },\n      oldFormula: {\n        description: 'The formula that was overwritten.',\n        dataType: 'string',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n      },\n    },\n  },\n  assistantCancel: {\n    description: 'Triggered when changes in the expanded formula editor are discarded after the AI Assistant ' +\n      'was opened.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'short',\n    metadataContracts: {\n      docIdDigest: {\n        description: 'A hash of the doc id.',\n        dataType: 'string',\n      },\n      conversationId: {\n        description: 'A random identifier for the current conversation with the assistant.',\n        dataType: 'string',\n      },\n      context: {\n        description: 'The type of assistant (e.g. \"formula\"), table id, and column id.',\n        dataType: 'object',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n      },\n    },\n  },\n  assistantClearConversation: {\n    description: 'Triggered when a conversation in the AI Assistant is cleared.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'short',\n    metadataContracts: {\n      docIdDigest: {\n        description: 'A hash of the doc id.',\n        dataType: 'string',\n      },\n      conversationId: {\n        description: 'A random identifier for the current conversation with the assistant.',\n        dataType: 'string',\n      },\n      context: {\n        description: 'The type of assistant (e.g. \"formula\"), table id, and column id.',\n        dataType: 'object',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n      },\n    },\n  },\n  assistantClose: {\n    description: 'Triggered when a formula is saved or discarded after the AI Assistant was opened.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      docIdDigest: {\n        description: 'A hash of the doc id.',\n        dataType: 'string',\n      },\n      conversationId: {\n        description: 'A random identifier for the current conversation with the assistant.',\n        dataType: 'string',\n      },\n      suggestionApplied: {\n        description: 'True if a suggested formula from one of the received messages was applied.',\n        dataType: 'boolean',\n      },\n      conversationLength: {\n        description: 'The number of messages sent and received since opening the AI Assistant.',\n        dataType: 'number',\n      },\n      conversationHistoryLength: {\n        description: \"The number of messages in the conversation's history. May be less than conversationLength \"\n          + \"if the conversation history was cleared in the same session.\",\n        dataType: 'number',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n      },\n    },\n  },\n  beaconOpen: {\n    description: 'Triggered when HelpScout Beacon is opened.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n      },\n    },\n  },\n  beaconArticleViewed: {\n    description: 'Triggered when an article is opened in HelpScout Beacon.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      articleId: {\n        description: 'The id of the article.',\n        dataType: 'string',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n      },\n    },\n  },\n  beaconEmailSent: {\n    description: 'Triggered when an email is sent in HelpScout Beacon.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n      },\n    },\n  },\n  beaconSearch: {\n    description: 'Triggered when a search is made in HelpScout Beacon.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      searchQuery: {\n        description: 'The search query.',\n        dataType: 'string',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n      },\n    },\n  },\n  documentForked: {\n    description: 'Triggered when a document is forked.',\n    minimumTelemetryLevel: Level.limited,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      docIdDigest: {\n        description: 'A hash of the doc id.',\n        dataType: 'string',\n      },\n      siteId: {\n        description: 'The id of the site containing the forked document.',\n        dataType: 'number',\n        minimumTelemetryLevel: Level.full,\n      },\n      siteType: {\n        description: 'The type of the site.',\n        dataType: 'string',\n        minimumTelemetryLevel: Level.full,\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n        minimumTelemetryLevel: Level.full,\n      },\n      access: {\n        description: 'The document access level of the user that triggered this event.',\n        dataType: 'string',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n        minimumTelemetryLevel: Level.full,\n      },\n      forkIdDigest: {\n        description: 'A hash of the fork id.',\n        dataType: 'string',\n      },\n      forkDocIdDigest: {\n        description: 'A hash of the full id of the fork, including the trunk id and fork id.',\n        dataType: 'string',\n      },\n      trunkIdDigest: {\n        description: 'A hash of the trunk id.',\n        dataType: 'string',\n      },\n      isTemplate: {\n        description: 'Whether the trunk is a template.',\n        dataType: 'boolean',\n      },\n      lastActivity: {\n        description: 'Timestamp of the last update to the trunk document.',\n        dataType: 'date',\n      },\n    },\n  },\n  documentOpened: {\n    description: 'Triggered when a public document or template is opened.',\n    minimumTelemetryLevel: Level.limited,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      docIdDigest: {\n        description: 'A hash of the doc id.',\n        dataType: 'string',\n      },\n      siteId: {\n        description: 'The site id.',\n        dataType: 'number',\n        minimumTelemetryLevel: Level.full,\n      },\n      siteType: {\n        description: 'The site type.',\n        dataType: 'string',\n        minimumTelemetryLevel: Level.full,\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n        minimumTelemetryLevel: Level.full,\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n        minimumTelemetryLevel: Level.full,\n      },\n      access: {\n        description: 'The document access level of the user that triggered this event.',\n        dataType: 'string',\n      },\n      isPublic: {\n        description: 'Whether the document is public.',\n        dataType: 'boolean',\n      },\n      isSnapshot: {\n        description: 'Whether a snapshot was opened.',\n        dataType: 'boolean',\n      },\n      isTemplate: {\n        description: 'Whether the document is a template.',\n        dataType: 'boolean',\n      },\n      lastUpdated: {\n        description: 'Timestamp of when the document was last updated.',\n        dataType: 'date',\n      },\n    },\n  },\n  documentUsage: {\n    description: 'Triggered on doc open and close, as well as hourly while a document is open.',\n    minimumTelemetryLevel: Level.limited,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      docIdDigest: {\n        description: 'A hash of the doc id.',\n        dataType: 'string',\n      },\n      siteId: {\n        description: 'The site id.',\n        dataType: 'number',\n        minimumTelemetryLevel: Level.full,\n      },\n      siteType: {\n        description: 'The site type.',\n        dataType: 'string',\n        minimumTelemetryLevel: Level.full,\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n        minimumTelemetryLevel: Level.full,\n      },\n      access: {\n        description: 'The document access level of the user that triggered this event.',\n        dataType: 'string',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n        minimumTelemetryLevel: Level.full,\n      },\n      triggeredBy: {\n        description: 'What caused this event to trigger. May be either \"docOpen\", \"interval\", or \"docClose\".',\n        dataType: 'string',\n      },\n      isPublic: {\n        description: 'Whether the document is public.',\n        dataType: 'boolean',\n      },\n      rowCount: {\n        description: 'The number of rows in the document.',\n        dataType: 'number',\n      },\n      dataSizeBytes: {\n        description: 'The total size of all data in the document, excluding attachments.',\n        dataType: 'number',\n      },\n      attachmentsSize: {\n        description: 'The total size of all attachments in the document.',\n        dataType: 'number',\n      },\n      numAccessRules: {\n        description: 'The number of access rules in the document.',\n        dataType: 'number',\n      },\n      numUserAttributes: {\n        description: 'The number of user attributes in the document.',\n        dataType: 'number',\n      },\n      numAttachments: {\n        description: 'The number of attachments in the document.',\n        dataType: 'number',\n      },\n      attachmentTypes: {\n        description: \"A list of unique file extensions compiled from all of the document's attachments.\",\n        dataType: 'string[]',\n      },\n      numCharts: {\n        description: 'The number of charts in the document.',\n        dataType: 'number',\n      },\n      chartTypes: {\n        description: 'A list of chart types of every chart in the document.',\n        dataType: 'string[]',\n      },\n      numLinkedCharts: {\n        description: 'The number of linked charts in the document.',\n        dataType: 'number',\n      },\n      numLinkedWidgets: {\n        description: 'The number of linked widgets in the document.',\n        dataType: 'number',\n      },\n      numColumns: {\n        description: 'The number of columns in the document.',\n        dataType: 'number',\n      },\n      numColumnsWithConditionalFormatting: {\n        description: 'The number of columns with conditional formatting in the document.',\n        dataType: 'number',\n      },\n      numFormulaColumns: {\n        description: 'The number of formula columns in the document.',\n        dataType: 'number',\n      },\n      numTriggerFormulaColumns: {\n        description: 'The number of trigger formula columns in the document.',\n        dataType: 'number',\n      },\n      numSummaryFormulaColumns: {\n        description: 'The number of summary formula columns in the document.',\n        dataType: 'number',\n      },\n      numFieldsWithConditionalFormatting: {\n        description: 'The number of fields with conditional formatting in the document.',\n        dataType: 'number',\n      },\n      numTables: {\n        description: 'The number of tables in the document.',\n        dataType: 'number',\n      },\n      numOnDemandTables: {\n        description: 'The number of on-demand tables in the document.',\n        dataType: 'number',\n      },\n      numTablesWithConditionalFormatting: {\n        description: 'The number of tables with conditional formatting in the document.',\n        dataType: 'number',\n      },\n      numSummaryTables: {\n        description: 'The number of summary tables in the document.',\n        dataType: 'number',\n      },\n      numCustomWidgets: {\n        description: 'The number of custom widgets in the document.',\n        dataType: 'number',\n      },\n      customWidgetIds: {\n        description: 'A list of plugin ids for every custom widget in the document. '\n          + 'The ids of widgets not created by Grist Labs are replaced with \"externalId\".',\n        dataType: 'string[]',\n      },\n    },\n  },\n  processMonitor: {\n    description: 'Triggered every 5 seconds.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      heapUsedMB: {\n        description: 'Size of JS heap in use, in MiB.',\n        dataType: 'number',\n      },\n      heapTotalMB: {\n        description: 'Total heap size, in MiB, allocated for JS by V8. ',\n        dataType: 'number',\n      },\n      cpuAverage: {\n        description: 'Fraction (typically between 0 and 1) of CPU usage. Includes all threads, so may exceed 1.',\n        dataType: 'number',\n      },\n      intervalMs: {\n        description: 'Interval (in milliseconds) over which `cpuAverage` is reported.',\n        dataType: 'number',\n      },\n    },\n  },\n  sendingWebhooks: {\n    description: 'Triggered when sending webhooks.',\n    minimumTelemetryLevel: Level.limited,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      numEvents: {\n        description: 'The number of events in the batch of webhooks being sent.',\n        dataType: 'number',\n      },\n      docIdDigest: {\n        description: 'A hash of the doc id.',\n        dataType: 'string',\n      },\n      siteId: {\n        description: 'The site id.',\n        dataType: 'number',\n        minimumTelemetryLevel: Level.full,\n      },\n      siteType: {\n        description: 'The site type.',\n        dataType: 'string',\n        minimumTelemetryLevel: Level.full,\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n        minimumTelemetryLevel: Level.full,\n      },\n      access: {\n        description: 'The document access level of the user that triggered this event.',\n        dataType: 'string',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n        minimumTelemetryLevel: Level.full,\n      },\n    },\n  },\n  signupFirstVisit: {\n    description: 'Triggered when a new user first opens the Grist app',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      siteId: {\n        description: 'The site id of first visit after signup.',\n        dataType: 'number',\n      },\n      siteType: {\n        description: 'The site type of first visit after signup.',\n        dataType: 'string',\n      },\n      userId: {\n        description: 'The id of the user that signed up.',\n        dataType: 'number',\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n      },\n    },\n  },\n  signupVerified: {\n    description: 'Triggered after a user successfully verifies their account during sign-up. '\n      + 'Not triggered in grist-core.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      isAnonymousTemplateSignup: {\n        description: 'Whether the user viewed any templates before signing up.',\n        dataType: 'boolean',\n      },\n      templateId: {\n        description: 'The doc id of the template the user last viewed before signing up, if any.',\n        dataType: 'string',\n      },\n    },\n  },\n  siteMembership: {\n    description: 'Triggered daily.',\n    minimumTelemetryLevel: Level.limited,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      siteId: {\n        description: 'The site id.',\n        dataType: 'number',\n      },\n      siteType: {\n        description: 'The site type.',\n        dataType: 'string',\n      },\n      numOwners: {\n        description: 'The number of users with an owner role in this site.',\n        dataType: 'number',\n      },\n      numEditors: {\n        description: 'The number of users with an editor role in this site.',\n        dataType: 'number',\n      },\n      numViewers: {\n        description: 'The number of users with a viewer role in this site.',\n        dataType: 'number',\n      },\n    },\n  },\n  siteUsage: {\n    description: 'Triggered daily.',\n    minimumTelemetryLevel: Level.limited,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      siteId: {\n        description: 'The site id.',\n        dataType: 'number',\n      },\n      siteType: {\n        description: 'The site type.',\n        dataType: 'string',\n      },\n      inGoodStanding: {\n        description: \"Whether the site's subscription is in good standing.\",\n        dataType: 'boolean',\n      },\n      stripePlanId: {\n        description: 'The Stripe Plan id associated with this site.',\n        dataType: 'string',\n        minimumTelemetryLevel: Level.full,\n      },\n      numDocs: {\n        description: 'The number of docs in this site.',\n        dataType: 'number',\n      },\n      numWorkspaces: {\n        description: 'The number of workspaces in this site.',\n        dataType: 'number',\n      },\n      numMembers: {\n        description: 'The number of site members.',\n        dataType: 'number',\n      },\n      lastActivity: {\n        description: 'A timestamp of the most recent update made to a site document.',\n        dataType: 'date',\n      },\n      earliestDocCreatedAt: {\n        description: 'A timestamp of the earliest non-deleted document creation time.',\n        dataType: 'date',\n      },\n    },\n  },\n  tutorialProgressChanged: {\n    description: 'Triggered on changes to tutorial progress.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      tutorialForkIdDigest: {\n        description: 'A hash of the tutorial fork id.',\n        dataType: 'string',\n      },\n      tutorialTrunkIdDigest: {\n        description: 'A hash of the tutorial trunk id.',\n        dataType: 'string',\n      },\n      lastSlideIndex: {\n        description: 'The 0-based index of the last tutorial slide the user had open.',\n        dataType: 'number',\n      },\n      numSlides: {\n        description: 'The total number of slides in the tutorial.',\n        dataType: 'number',\n      },\n      percentComplete: {\n        description: 'Percentage of tutorial completion.',\n        dataType: 'number',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n      },\n    },\n  },\n  tutorialRestarted: {\n    description: 'Triggered when a tutorial is restarted.',\n    minimumTelemetryLevel: Level.full,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      tutorialForkIdDigest: {\n        description: 'A hash of the tutorial fork id.',\n        dataType: 'string',\n      },\n      tutorialTrunkIdDigest: {\n        description: 'A hash of the tutorial trunk id.',\n        dataType: 'string',\n      },\n      docIdDigest: {\n        description: 'A hash of the doc id.',\n        dataType: 'string',\n      },\n      siteId: {\n        description: 'The site id.',\n        dataType: 'number',\n      },\n      siteType: {\n        description: 'The site type.',\n        dataType: 'string',\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n      },\n      access: {\n        description: 'The document access level of the user that triggered this event.',\n        dataType: 'string',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n      },\n    },\n  },\n  watchedVideoTour: {\n    description: 'Triggered when the video tour is closed.',\n    minimumTelemetryLevel: Level.limited,\n    retentionPeriod: 'indefinitely',\n    metadataContracts: {\n      watchTimeSeconds: {\n        description: 'The number of seconds elapsed in the video player.',\n        dataType: 'number',\n      },\n      userId: {\n        description: 'The id of the user that triggered this event.',\n        dataType: 'number',\n        minimumTelemetryLevel: Level.full,\n      },\n      altSessionId: {\n        description: 'A random, session-based identifier for the user that triggered this event.',\n        dataType: 'string',\n        minimumTelemetryLevel: Level.full,\n      },\n    },\n  },\n};\n\ntype TelemetryContracts = Record<TelemetryEvent, TelemetryEventContract>;\n\nexport const TelemetryEvents = StringUnion(\n  'apiUsage',\n  'assistantOpen',\n  'assistantSend',\n  'assistantReceive',\n  'assistantSave',\n  'assistantCancel',\n  'assistantClearConversation',\n  'assistantClose',\n  'beaconOpen',\n  'beaconArticleViewed',\n  'beaconEmailSent',\n  'beaconSearch',\n  'documentForked',\n  'documentOpened',\n  'documentUsage',\n  'processMonitor',\n  'sendingWebhooks',\n  'signupFirstVisit',\n  'signupVerified',\n  'siteMembership',\n  'siteUsage',\n  'tutorialProgressChanged',\n  'tutorialRestarted',\n  'watchedVideoTour',\n);\nexport type TelemetryEvent = typeof TelemetryEvents.type;\n\ninterface TelemetryEventContract {\n  description: string;\n  minimumTelemetryLevel: Level;\n  retentionPeriod: TelemetryRetentionPeriod;\n  metadataContracts?: Record<string, MetadataContract>;\n}\n\nexport type TelemetryRetentionPeriod = 'short' | 'indefinitely';\n\ninterface MetadataContract {\n  description: string;\n  dataType: 'boolean' | 'number' | 'string' | 'string[]' | 'date' | 'object';\n  minimumTelemetryLevel?: Level;\n}\n\nexport type TelemetryMetadataByLevel = Partial<Record<EnabledTelemetryLevel, TelemetryMetadata>>;\n\nexport type EnabledTelemetryLevel = Exclude<TelemetryLevel, 'off'>;\n\nexport const TelemetryLevels = StringUnion('off', 'limited', 'full');\nexport type TelemetryLevel = typeof TelemetryLevels.type;\n\nexport type TelemetryMetadata = Record<string, any>;\n\n/**\n * The name of a cookie that's set whenever a template is opened.\n *\n * The cookie remembers the last template that was opened, which is then read during\n * sign-up to track which templates were viewed before sign-up.\n */\nexport const TELEMETRY_TEMPLATE_SIGNUP_COOKIE_NAME = 'gr_template_signup_trk';\n\n/**\n * Returns a function that accepts a telemetry event and metadata, and performs various\n * checks on it based on a set of contracts and the `telemetryLevel`.\n *\n * The function throws if any checks fail.\n */\nexport function buildTelemetryEventChecker(telemetryLevel: TelemetryLevel) {\n  const currentTelemetryLevel = Level[telemetryLevel];\n\n  return (event: TelemetryEvent, metadata?: TelemetryMetadata) => {\n    const eventContract = TelemetryContracts[event];\n    if (!eventContract) {\n      throw new Error(`Unknown telemetry event: ${event}`);\n    }\n\n    const eventMinimumTelemetryLevel = eventContract.minimumTelemetryLevel;\n    if (currentTelemetryLevel < eventMinimumTelemetryLevel) {\n      throw new Error(\n        `Telemetry event ${event} requires a minimum telemetry level of ${eventMinimumTelemetryLevel} ` +\n        `but the current level is ${currentTelemetryLevel}`\n      );\n    }\n\n    for (const [key, value] of Object.entries(metadata ?? {})) {\n      const metadataContract = eventContract.metadataContracts?.[key];\n      if (!metadataContract) {\n        throw new Error(`Unknown metadata for telemetry event ${event}: ${key}`);\n      }\n\n      const metadataMinimumTelemetryLevel = metadataContract.minimumTelemetryLevel;\n      if (metadataMinimumTelemetryLevel && currentTelemetryLevel < metadataMinimumTelemetryLevel) {\n        throw new Error(\n          `Telemetry metadata ${key} of event ${event} requires a minimum telemetry level of ` +\n          `${metadataMinimumTelemetryLevel} but the current level is ${currentTelemetryLevel}`\n        );\n      }\n\n      const {dataType} = metadataContract;\n      if (dataType.endsWith('[]')) {\n        if (!Array.isArray(value)) {\n          throw new Error(\n            `Telemetry metadata ${key} of event ${event} expected a value of type array ` +\n            `but received a value of type ${typeof value}`\n          );\n        }\n\n        const elementDataType = dataType.slice(0, -2);\n        if (value.some(element => typeof element !== elementDataType)) {\n          throw new Error(\n            `Telemetry metadata ${key} of event ${event} expected a value of type ${elementDataType}[] ` +\n            `but received a value of type ${typeof value}[]`\n          );\n        }\n      } else if (dataType === 'date') {\n        if (!(value instanceof Date) && typeof value !== 'string') {\n          throw new Error(\n            `Telemetry metadata ${key} of event ${event} expected a value of type Date or string ` +\n            `but received a value of type ${typeof value}`\n          );\n        }\n      } else if (dataType !== typeof value) {\n        throw new Error(\n          `Telemetry metadata ${key} of event ${event} expected a value of type ${dataType} ` +\n          `but received a value of type ${typeof value}`\n        );\n      }\n    }\n  };\n}\n\nexport type TelemetryEventChecker = (event: TelemetryEvent, metadata?: TelemetryMetadata) => void;\n","import {logError} from 'app/client/models/errors';\nimport {Level, TelemetryContracts, TelemetryEvent, TelemetryMetadataByLevel} from 'app/common/Telemetry';\nimport {fetchFromHome, getGristConfig, pageHasHome} from 'app/common/urlUtils';\n\nexport function logTelemetryEvent(event: TelemetryEvent, metadata?: TelemetryMetadataByLevel) {\n  if (!pageHasHome()) { return; }\n\n  const {telemetry} = getGristConfig();\n  if (!telemetry) { return; }\n\n  const {telemetryLevel} = telemetry;\n  if (Level[telemetryLevel] < TelemetryContracts[event].minimumTelemetryLevel) { return; }\n\n  fetchFromHome('/api/telemetry', {\n    method: 'POST',\n    body: JSON.stringify({\n      event,\n      metadata,\n    }),\n    credentials: 'include',\n    headers: {\n      'Content-Type': 'application/json',\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  }).catch((e: Error) => {\n    console.warn(`Failed to log telemetry event ${event}`, e);\n    logError(e);\n  });\n}\n","/**\n * This module contains tools and helpers to open HelpScout \"Beacon\" -- a popup which may contain\n * an email form, chat, and help docs -- and to include info relevant to support requests.\n *\n * Usage:\n *    import {Beacon} from 'app/client/lib/helpScout';\n *    Beacon('open')\n *    Beacon('prefill', {...})\n * It takes care of initialization automatically.\n *\n * This is essentially a prettified typescript version of the snippet for the HelpScout Beacon\n * available under Beacon settings in HelpScout. It offers the API documented at\n * https://developer.helpscout.com/beacon-2/web/javascript-api/\n */\n\n// tslint:disable:unified-signatures\n\nimport {logTelemetryEvent} from 'app/client/lib/telemetry';\nimport {AppModel} from 'app/client/models/AppModel';\nimport {reportWarning} from 'app/client/models/errors';\nimport {IAppError} from 'app/client/models/NotifyModel';\nimport {GristLoadConfig} from 'app/common/gristUrls';\nimport {timeFormat} from 'app/common/timeFormat';\nimport {ActiveSessionInfo} from 'app/common/UserAPI';\nimport * as version from 'app/common/version';\nimport {dom} from 'grainjs';\nimport identity = require('lodash/identity');\nimport pickBy = require('lodash/pickBy');\n\nexport type BeaconCmd = 'init' | 'destroy' | 'open' | 'close' | 'toggle' | 'search' | 'suggest' |\n  'article' | 'navigate' | 'identify' | 'prefill' | 'reset' | 'logout' | 'config' | 'on' | 'off' |\n  'once' | 'event' | 'session-data';\n\nexport type BeaconRoute = '/ask/message/' | '/answers/';\n\nexport interface IUserObj {\n  name?: string;\n  email?: string;\n  company?: string;\n  jobTitle?: string;\n  avatar?: string;\n  signature?: string;\n  [customKey: string]: string|number|boolean|null|undefined;\n}\n\ninterface IFormObj {\n  name?: string;\n  email?: string;\n  subject?: string;\n  text?: string;\n  fields?: Array<{id: number, value: string|number|boolean}>;\n}\n\ninterface ISessionData {\n  [key: string]: string;\n}\n\ninterface ICallbackAttributes {\n  id?: string;\n  query?: string;\n}\n\n/**\n * This provides the HelpScout Beacon API, taking care of initializing Beacon on first use.\n */\nexport function Beacon(method: 'init', beaconId: string): void;\nexport function Beacon(method: 'search', query: string): void;\nexport function Beacon(method: 'suggest', articles?: string[]): void;\nexport function Beacon(method: 'article', articleId: string, options?: unknown): void;\nexport function Beacon(method: 'navigate', route: string): void;\nexport function Beacon(method: 'identify', userObj: IUserObj): void;\nexport function Beacon(method: 'prefill', formObj: IFormObj): void;\nexport function Beacon(method: 'config', configObj: object): void;\nexport function Beacon(method: 'on'|'once', event: string,\n  callback: (attrs?: ICallbackAttributes) => void): void;\nexport function Beacon(method: 'off', event: string, callback?: () => void): void;\nexport function Beacon(method: 'session-data', data: ISessionData): void;\nexport function Beacon(method: BeaconCmd): void;\nexport function Beacon(method: BeaconCmd, options?: unknown, data?: unknown) {\n  initBeacon();\n  (window as any).Beacon(method, options, data);\n}\n\n// This is essentially what's done by the code snippet that HelpScout suggests to install in every\n// page. In Grist app pages, we only load HelpScout code when the beacon is opened.\nfunction _beacon(method: BeaconCmd, options?: unknown, data?: unknown) {\n  _beacon.readyQueue.push({method, options, data});\n}\n_beacon.readyQueue = [] as unknown[];\n\nfunction initBeacon(): void {\n  if (!(window as any).Beacon) {\n    const gristConfig: GristLoadConfig|undefined = (window as any).gristConfig;\n    const beaconId = gristConfig && gristConfig.helpScoutBeaconId;\n    if (beaconId) {\n      (window as any).Beacon = _beacon;\n      document.head.appendChild(dom('script',\n        {\n          type: 'text/javascript',\n          src: 'https://beacon-v2.helpscout.net',\n          async: true,\n        },\n        // Report when the beacon fails to load so that the user knows something is wrong, and we\n        // have a log of the error. (Note: might not report all failures due to ad-blockers.)\n        dom.on('error', (e) => {\n          reportWarning(\"Support form failed to load. \" +\n            \"Please email support@getgrist.com with questions instead.\");\n        }),\n      ));\n      _beacon('init', beaconId);\n      _beacon('config', {display: {style: \"manual\"}});\n    } else {\n      (window as any).Beacon = () => null;\n      reportWarning(\"Support form is not configured\");\n    }\n  }\n}\n\nlet lastOpenType: 'error' | 'message' = 'message';\nlet lastRoute: BeaconRoute|null = null;\n\n/**\n * Helper to open a beacon, taking care of setting focus appropriately. Calls optional onOpen\n * callback when the beacon has opened.\n * If errors is given, prepares a form for submitting an error report, and includes stack traces\n * into the session-data.\n */\nfunction _beaconOpen(userObj: IUserObj|null, options: IBeaconOpenOptions) {\n  const {onOpen, errors} = options;\n\n  // The beacon remembers its content, so reset it when switching between reporting errors and\n  // sending a message.\n  const openType = errors?.length ? 'error' : 'message';\n  if (openType !== lastOpenType) {\n    Beacon('reset');\n    lastOpenType = openType;\n  }\n\n  const route: BeaconRoute = options.route || (errors?.length ? '/ask/message/' : '/answers/');\n  // If beacon was and still is being opened for help articles, avoid the 'navigate' call\n  // altogether, to keep the beacon at the last article it was on.\n  const skipNav = (route === lastRoute && route === '/answers/');\n  lastRoute = route;\n\n  Beacon('once', 'open', () => {\n    const iframe = document.querySelector('#beacon-container iframe') as HTMLIFrameElement;\n    if (iframe) { iframe.focus(); }\n    if (onOpen) { onOpen(); }\n  });\n  // Fix base-href tag when opening an article.\n  Beacon('once', 'article-viewed', () => fixBeaconBaseHref());\n  // We duplicate this check for 'ready' event, because 'open' and 'article-viewed' events don't\n  // trigger on page reload when a beacon article is already open (seems to be a HelpScout bug).\n  Beacon('once', 'ready', () => fixBeaconBaseHref());\n\n  Beacon('once', 'close', () => {\n    const iframe = document.querySelector('#beacon-container iframe') as HTMLIFrameElement;\n    if (iframe) { iframe.blur(); }\n    Beacon('off', 'article-viewed');\n  });\n  if (userObj) {\n    Beacon('identify', userObj);\n  }\n\n  const attrs: ISessionData = {};\n  if (errors?.length) {\n    // If sending errors, prefill part of the message (the user sees this and can add to it), and\n    // include more detailed errors with stack traces into session-data.\n    const messages = errors.map(({error, timestamp}) =>\n      (timeFormat('T', new Date(timestamp)) + ' ' + error.message));\n    const lastMessage = errors.length > 0 ? errors[errors.length - 1].error.message : '';\n    const prefill: IFormObj = {\n      subject: `Application Error: ${lastMessage}`.slice(0, 250), // subject has max-length of 250\n      text: `\\n-- Include your description above --\\nErrors encountered:\\n${messages.join('\\n')}\\n`,\n    };\n    Beacon('prefill', prefill);\n    Beacon('config', {messaging: {contactForm: {showSubject: false}}});\n\n    errors.forEach(({error, timestamp}, i) => {\n      attrs[`error-${i}`] =  timeFormat('D T', new Date(timestamp)) + ' ' + error.message;\n      if (error.stack) {\n        attrs[`error-${i}-stack`] = JSON.stringify(error.stack.trim().split('\\n'));\n      }\n    });\n  } else {\n    Beacon('config', {messaging: {contactForm: {showSubject: true}}});\n  }\n\n  Beacon('session-data', {\n    'Grist Version': `${version.version} (${version.gitcommit})`,\n    ...attrs,\n  });\n  Beacon('open');\n  if (!skipNav) {\n    Beacon('navigate', route);\n  }\n\n  Beacon('once', 'open', () => logTelemetryEvent('beaconOpen'));\n  Beacon('on', 'article-viewed', (article) => logTelemetryEvent('beaconArticleViewed', {\n    full: {articleId: article!.id},\n  }));\n  Beacon('on', 'email-sent', () => logTelemetryEvent('beaconEmailSent'));\n  Beacon('on', 'search', (search) => logTelemetryEvent('beaconSearch', {\n    full: {searchQuery: search!.query},\n  }));\n}\n\nfunction fixBeaconBaseHref() {\n  // HelpScout creates an iframe with an empty 'src' attribute, then writes to it. In such an\n  // iframe, different browsers interpret relative links differently: Chrome's are relative to\n  // the parent page's URL; Firefox's are relative to the parent page's <base href>.\n  //\n  // Here we set a <base href> explicitly in the iframe to get consistent behavior of links\n  // relative to the top page's URL (HelpScout then seems to handle clicks on them correctly).\n  const iframe = document.querySelector('#beacon-container iframe') as HTMLIFrameElement;\n  const iframeDoc = iframe?.contentDocument;\n  if (iframeDoc && !iframeDoc.querySelector('head > base')) {\n    iframeDoc.head.appendChild(dom('base', {href: ''}));\n  }\n}\n\nexport interface IBeaconOpenOptions {\n  appModel: AppModel|null;\n  includeAppErrors?: boolean;\n  onOpen?: () => void;\n  errors?: IAppError[];\n  route?: BeaconRoute;\n}\n\n/**\n * Open the helpScout beacon to send us a message. Calls optional onOpen callback when the beacon\n * has opened. The topAppModel is used to get the current user.\n *\n * If includeAppErrors or errors is set, the beacon will open to submit an error report. With\n * includeAppErrors, it will include stack traces of errors in the notifier into the session-data.\n * If errors is set, it will include the specified errors.\n */\nexport function beaconOpenMessage(options: IBeaconOpenOptions) {\n  const app = options.appModel;\n  const errors = options.errors || [];\n  if (options.includeAppErrors && app) {\n    errors.push(...app.notifier.getFullAppErrors());\n  }\n  _beaconOpen(getBeaconUserObj(app), {...options, errors});\n}\n\n\nfunction getBeaconUserObj(appModel: AppModel|null): IUserObj|null {\n  if (!appModel) { return null; }\n\n  // ActiveSessionInfo[\"user\"] includes optional helpScoutSignature too.\n  const user = appModel.currentValidUser as ActiveSessionInfo[\"user\"]|null;\n\n  // For anon user, don't attempt to identify anything. Even the \"company\" field (when anon on a\n  // team doc) isn't useful, because the user may be external to the company.\n  if (!user) { return null; }\n\n  // Use the company name only when it's not a personal org. Otherwise, it adds no information and\n  // overrides more useful company name gleaned by HelpScout from the web.\n  const org = appModel.currentOrg;\n  const company = org && !org.owner ? appModel.currentOrgName : undefined;\n\n  return pickBy({\n    name: user.name,\n    email: user.email,\n    company,\n    avatar: user.picture,\n    signature: user.helpScoutSignature,\n  }, identity);\n}\n","/**\n * This module implements tooltips of two kinds:\n * - to be shown on hover, similar to the native \"title\" attribute (popweasel meant to provide\n *   that, but its machinery isn't really needed). TODO these aren't yet implemented.\n * - to be shown briefly, as a transient notification next to some action element.\n */\n\nimport {prepareForTransition} from 'app/client/ui/transitions';\nimport {testId, theme, vars} from 'app/client/ui2018/cssVars';\nimport {icon} from 'app/client/ui2018/icons';\nimport {makeLinks} from 'app/client/ui2018/links';\nimport {menuCssClass} from 'app/client/ui2018/menus';\nimport {dom, DomContents, DomElementArg, DomElementMethod, styled} from 'grainjs';\nimport Popper from 'popper.js';\nimport {cssMenu, defaultMenuOptions, IMenuOptions, setPopupToCreateDom} from 'popweasel';\nimport merge = require('lodash/merge');\n\nexport interface ITipOptions {\n  /**\n   * Where to place the tooltip relative to the reference element.\n   *\n   * Defaults to 'top'.\n   *\n   * See https://popper.js.org/docs/v1/#popperplacements--codeenumcode.\n   */\n  placement?: Popper.Placement;\n\n  /** When set, a tooltip will replace any previous tooltip with the same key. */\n  key?: string;\n\n  /**\n   * Optionally, popper modifiers (e.g. {offset: {offset: 8}}),\n   * See https://popper.js.org/docs/v1/#modifiers.\n   */\n  modifiers?: Popper.Modifiers;\n}\n\nexport interface ITransientTipOptions extends ITipOptions {\n  /** When to remove the transient tooltip. Defaults to 2000ms. */\n  timeoutMs?: number;\n}\n\nexport interface IHoverTipOptions extends ITransientTipOptions {\n  /** How soon after mouseenter to show it. Defaults to 200 ms. */\n  openDelay?: number;\n\n  /** If set and non-zero, remove the tip automatically after this time. */\n  timeoutMs?: number;\n\n  /**\n   * How soon after mouseleave to hide it.\n   *\n   * Defaults to 100 ms.\n   *\n   * A non-zero delay gives the pointer some time to be outside of the trigger\n   * and the tooltip content if the user moves the pointer from one to the other.\n   */\n  closeDelay?: number;\n\n  /**\n   * Also show the tip on clicking the element it's attached to.\n   *\n   * Defaults to false.\n   *\n   * Should only be set to true if `closeOnClick` is false.\n   */\n  openOnClick?: boolean;\n\n  /**\n   * Hide the tip on clicking the element it's attached to.\n   *\n   * Defaults to true.\n   *\n   * Should only be set to true if `openOnClick` is false.\n   */\n  closeOnClick?: boolean;\n\n  /** Whether to show the tooltip only when the ref element overflows horizontally. */\n  overflowOnly?: boolean;\n}\n\nexport type ITooltipContent = ITooltipContentFunc | DomContents;\n\nexport type ITooltipContentFunc = (ctl: ITooltipControl) => DomContents;\n\nexport interface ITooltipControl {\n  close(): void;\n  getDom(): HTMLElement;       // The tooltip DOM.\n}\n\n/**\n * Map of open tooltips, mapping the key (from ITipOptions) to ITooltipControl that allows removing\n * the tooltip.\n */\nconst openTooltips = new Map<string, ITooltipControl>();\n\n/**\n * Show tipContent briefly (2s by default), in a tooltip next to refElem (on top of it, by default).\n * See also ITipOptions.\n */\nexport function showTransientTooltip(\n  refElem: Element,\n  tipContent: ITooltipContent,\n  options: ITransientTipOptions = {}) {\n  const ctl = showTooltip(refElem, typeof tipContent == 'function' ? tipContent : () => tipContent, options);\n  const origClose = ctl.close;\n  ctl.close = () => { clearTimeout(timer); origClose(); };\n\n  const timer = setTimeout(ctl.close, options.timeoutMs || 2000);\n  return ctl;\n}\n\n/**\n * Show the return value of tipContent(ctl) in a tooltip next to refElem (on top of it, by default).\n * Returns ctl. In both places, ctl is an object with a close() method, which closes the tooltip.\n * See also ITipOptions.\n */\nexport function showTooltip(\n  refElem: Element, tipContent: ITooltipContentFunc, options: ITipOptions = {}\n): ITooltipControl {\n  const placement: Popper.Placement = options.placement ?? 'top';\n  const key = options.key;\n  const hasKey = key && openTooltips.has(key);\n  let closed = false;\n\n  // If we had a previous tooltip with the same key, clean it up.\n  if (key) { openTooltips.get(key)?.close(); }\n\n  // Cleanup involves destroying the Popper instance, removing the element, etc.\n  function close() {\n    if (closed) { return; }\n    closed = true;\n    popper.destroy();\n    dom.domDispose(content);\n    content.remove();\n    if (key) { openTooltips.delete(key); }\n  }\n  const ctl: ITooltipControl = {close, getDom: () => content};\n\n  // Add the content element.\n  const content = cssTooltip({role: 'tooltip'}, tipContent(ctl), testId(`tooltip`));\n  // Prepending instead of appending allows better text selection, as this element is on top.\n  document.body.prepend(content);\n\n  // Create a popper for positioning the tooltip content relative to refElem.\n  const popperOptions: Popper.PopperOptions = {\n    modifiers: merge(\n      { preventOverflow: {boundariesElement: 'viewport'} },\n      options.modifiers\n    ),\n    placement,\n  };\n\n  const popper = new Popper(refElem, content, popperOptions);\n\n  // If refElem is disposed we close the tooltip.\n  dom.onDisposeElem(refElem, close);\n\n  // If we're not replacing the tooltip, fade in the content using transitions.\n  if (!hasKey) {\n    prepareForTransition(content, () => { content.style.opacity = '0'; });\n    content.style.opacity = '';\n  }\n\n  if (key) { openTooltips.set(key, ctl); }\n  return ctl;\n}\n\n/**\n * Render a tooltip on hover. Suitable for use during dom construction, e.g.\n *    dom('div', 'Trigger', hoverTooltip('Hello!')\n */\nexport function hoverTooltip(tipContent: ITooltipContent, options?: IHoverTipOptions): DomElementMethod {\n  const defaultOptions: IHoverTipOptions = {placement: 'bottom'};\n  return (elem) => setHoverTooltip(elem, tipContent, {...defaultOptions, ...options});\n}\n\n/**\n * On hover, show the full text of this element when it overflows horizontally. It is intended\n * mainly for styled with \"text-overflow: ellipsis\".\n * E.g. dom('label', 'Long text...', overflowTooltip()).\n */\nexport function overflowTooltip(options?: IHoverTipOptions): DomElementMethod {\n  const defaultOptions: IHoverTipOptions = {\n    placement: 'bottom-start',\n    overflowOnly: true,\n    modifiers: {offset: {offset: '40, 0'}},\n  };\n  return (elem) => setHoverTooltip(elem, () => elem.textContent,  {...defaultOptions, ...options});\n}\n\n/**\n * Attach a tooltip to the given element, to be rendered on hover.\n */\nexport function setHoverTooltip(\n  refElem: Element,\n  tipContent: ITooltipContent,\n  options: IHoverTipOptions = {}\n) {\n  const {key, openDelay = 200, timeoutMs, closeDelay = 100, openOnClick, closeOnClick = true,\n    overflowOnly = false} = options;\n\n  const tipContentFunc = typeof tipContent === 'function' ? tipContent : () => tipContent;\n\n  // Controller for closing the tooltip, if one is open.\n  let tipControl: ITooltipControl|undefined;\n\n  // A marker, that the tooltip should be closed, but we are waiting for the mouseup event.\n  const POSTPONED = Symbol();\n\n  // Timer to open or close the tooltip, depending on whether tipControl is set.\n  let timer: ReturnType<typeof setTimeout>|undefined|typeof POSTPONED;\n\n  // To allow user select text, we will monitor if the selection has started in the tooltip (by listening\n  // to the mousedown event). If it has and mouse goes outside, we will mark that the tooltip should be closed.\n  // When the selection is over (by listening to mouseup on window), a new close is scheduled with 1.4s, to allow\n  // user to press Ctrl+C (but only if the marker - POSTPONED - is still set).\n  let mouseGrabbed = false;\n  function grabMouse(tip: Element) {\n    mouseGrabbed = true;\n    const listener = dom.onElem(window, 'mouseup', () => {\n      mouseGrabbed = false;\n      if (timer === POSTPONED) {\n        scheduleCloseIfOpen(1400);\n      }\n    });\n    dom.autoDisposeElem(tip, listener);\n\n    // Disable text selection in any other element except this one. This class sets user-select: none to all\n    // elements except the tooltip. This helps to avoid accidental selection of text in other elements, once\n    // the mouse leaves the tooltip.\n    document.body.classList.add(cssDisableSelectOnAll.className);\n    dom.onDisposeElem(tip, () => document.body.classList.remove(cssDisableSelectOnAll.className));\n  }\n\n  function clearTimer() {\n    if (timer !== POSTPONED) { clearTimeout(timer); }\n    timer = undefined;\n  }\n  function resetTimer(func: () => void, delay: number|typeof POSTPONED) {\n    clearTimer();\n    timer = delay === POSTPONED ? POSTPONED : setTimeout(func, delay);\n  }\n  function scheduleCloseIfOpen(timeout = closeDelay) {\n    clearTimer();\n    if (tipControl) {\n      resetTimer(close, mouseGrabbed ? POSTPONED : timeout);\n    }\n  }\n  function open() {\n    clearTimer();\n    tipControl = showTooltip(refElem, ctl => tipContentFunc({...ctl, close}), options);\n    const tipDom = tipControl.getDom();\n    dom.onElem(tipDom, 'mouseenter', clearTimer);\n    dom.onElem(tipDom, 'mouseleave', () => scheduleCloseIfOpen());\n    dom.onElem(tipDom, 'mousedown', grabMouse.bind(null, tipDom));\n    dom.onDisposeElem(tipDom, () => close());\n    if (timeoutMs) { resetTimer(close, timeoutMs); }\n  }\n  function close() {\n    clearTimer();\n    tipControl?.close();\n    tipControl = undefined;\n  }\n\n  // We simulate hover effect by handling mouseenter/mouseleave.\n  dom.onElem(refElem, 'mouseenter', () => {\n    if (overflowOnly && (refElem as HTMLElement).offsetWidth >= refElem.scrollWidth) {\n      return;\n    }\n    if (!tipControl && !timer) {\n      // If we're replacing a tooltip, open without delay.\n      const delay = key && openTooltips.has(key) ? 0 : openDelay;\n      resetTimer(open, delay);\n    } else if (tipControl) {\n      // Already shown, reset to newly-shown state.\n      clearTimer();\n      if (timeoutMs) { resetTimer(close, timeoutMs); }\n    }\n  });\n\n  dom.onElem(refElem, 'mouseleave', () => scheduleCloseIfOpen());\n\n  if (openOnClick) {\n    // If requested, re-open on click.\n    dom.onElem(refElem, 'click', () => { close(); open(); });\n  } else if (closeOnClick) {\n    // If requested, close on click.\n    dom.onElem(refElem, 'click', () => { close(); });\n  }\n\n  // Close tooltip if refElem is disposed.\n  dom.onDisposeElem(refElem, close);\n}\n\n/**\n * Build a handy button for closing a tooltip.\n */\nexport function tooltipCloseButton(ctl: ITooltipControl): HTMLElement {\n  return cssTooltipCloseButton(icon('CrossSmall'),\n    dom.on('mousedown', (ev) =>{\n      ev.stopPropagation();\n      ev.preventDefault();\n      ctl.close();\n    }),\n    testId('tooltip-close'),\n  );\n}\n\n/**\n * Renders an info icon that shows a tooltip with the specified `content` on click.\n */\nexport function infoTooltip(content: DomContents, menuOptions?: IMenuOptions, ...domArgs: DomElementArg[]) {\n  return cssInfoTooltipButton('?',\n    (elem) => {\n      setPopupToCreateDom(\n        elem,\n        (ctl) => {\n          return cssInfoTooltipPopup(\n            cssInfoTooltipPopupCloseButton(\n              icon('CrossSmall'),\n              dom.on('click', () => ctl.close()),\n              testId('info-tooltip-close'),\n            ),\n            cssInfoTooltipPopupBody(\n              content,\n              testId('info-tooltip-popup-body'),\n            ),\n            dom.cls(menuCssClass),\n            dom.cls(cssMenu.className),\n            dom.onKeyDown({\n              Enter: () => ctl.close(),\n              Escape: () => ctl.close(),\n            }),\n            (popup) => { setTimeout(() => popup.focus(), 0); },\n            testId('info-tooltip-popup'),\n          );\n        },\n        {...defaultMenuOptions, ...{placement: 'bottom-end'}, ...menuOptions},\n      );\n    },\n    testId('info-tooltip'),\n    ...domArgs,\n  );\n}\n\nexport interface WithInfoTooltipOptions {\n  domArgs?: DomElementArg[];\n  tooltipButtonDomArgs?: DomElementArg[];\n  tooltipMenuOptions?: IMenuOptions;\n}\n\n/**\n * Wraps `domContent` with a info tooltip button that displays the provided\n * `tooltipContent` on click, and returns the wrapped element.\n *\n * The tooltip button is displayed to the right of `domContents`, and displays\n * a popup on click. The popup can be dismissed by clicking away from it, clicking\n * the close button in the top-right corner, or pressing Enter or Escape.\n *\n * Arguments can be passed to both the top-level wrapped DOM element and the\n * tooltip button element with `options.domArgs` and `options.tooltipButtonDomArgs`\n * respectively.\n *\n * Usage:\n *\n *   withInfoTooltip(\n *     dom('div', 'Hello World!'),\n *     dom('p', 'This is some text to show inside the tooltip.'),\n *   )\n */\nexport function withInfoTooltip(\n  domContents: DomContents,\n  tooltipContent: DomContents,\n  options: WithInfoTooltipOptions = {},\n) {\n  const {domArgs, tooltipButtonDomArgs, tooltipMenuOptions} = options;\n  return cssDomWithTooltip(\n    domContents,\n    infoTooltip(tooltipContent, tooltipMenuOptions, tooltipButtonDomArgs),\n    ...(domArgs ?? [])\n  );\n}\n\n/**\n * Renders an description info icon that shows a tooltip with the specified `content` on click.\n */\nexport function descriptionInfoTooltip(\n  content: string,\n  testPrefix: string,\n  ...domArgs: DomElementArg[]) {\n  const body = makeLinks(content);\n  const options = {\n    closeDelay: 200,\n    key: 'columnDescription',\n    openOnClick: true,\n  };\n  const builder = () => cssDescriptionInfoTooltip(\n    body,\n    // Used id test to find the origin of the tooltip regardless webdriver implementation (some of them start)\n    cssTooltipCorner(testId('tooltip-origin')),\n    testId(`${testPrefix}-info-tooltip-popup`),\n    {tabIndex: '-1'}\n  );\n  return cssDescriptionInfoTooltipButton(\n    icon('Info', dom.cls(\"info_toggle_icon\")),\n    testId(`${testPrefix}-info-tooltip`),\n    dom.on('mousedown', (e) => e.stopPropagation()),\n    dom.on('click', (e) => e.stopPropagation()),\n    hoverTooltip(builder, options),\n    dom.cls(\"info_toggle_icon_wrapper\"),\n    ...domArgs,\n  );\n}\n\nconst cssTooltipCorner = styled('div', `\n  position: absolute;\n  width: 0;\n  height: 0;\n  top: 0;\n  left: 0;\n  visibility: hidden;\n`);\n\nconst cssDescriptionInfoTooltip = styled('div', `\n  position: relative;\n  white-space: pre-wrap;\n  text-align: left;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  line-height: 1.4;\n  max-width: min(500px, calc(100vw - 80px)); /* can't use 100%, 500px and 80px are picked by hand */\n`);\n\nconst cssDescriptionInfoTooltipButton = styled('div', `\n  cursor: pointer;\n  --icon-color: ${theme.infoButtonFg};\n  border-radius: 50%;\n  display: inline-block;\n  padding-left: 5px;\n  line-height: 0px;\n\n  &:hover  {\n    --icon-color: ${theme.infoButtonHoverFg};\n  }\n  &:active  {\n    --icon-color: ${theme.infoButtonActiveFg};\n  }\n`);\n\n\nconst cssTooltip = styled('div', `\n  position: absolute;\n  z-index: ${vars.tooltipZIndex};      /* should be higher than a modal */\n  background-color: ${theme.tooltipBg};\n  border-radius: 3px;\n  box-shadow: 0 0 2px rgba(0,0,0,0.5);\n  text-align: center;\n  color: ${theme.tooltipFg};\n  width: auto;\n  font-family: sans-serif;\n  font-size: 10pt;\n  padding: 8px 16px;\n  margin: 4px;\n  transition: opacity 0.2s;\n  user-select: auto;\n`);\n\nconst cssDisableSelectOnAll = styled('div', `\n  & *:not(.${cssTooltip.className}, .${cssTooltip.className} *) {\n    user-select: none;\n  }\n`);\n\nconst cssTooltipCloseButton = styled('div', `\n  cursor: pointer;\n  user-select: none;\n  width: 16px;\n  height: 16px;\n  line-height: 16px;\n  text-align: center;\n  margin: -4px -4px -4px 8px;\n  --icon-color: ${theme.tooltipCloseButtonFg};\n  border-radius: 16px;\n\n  &:hover {\n    background-color: ${theme.tooltipCloseButtonHoverBg};\n    --icon-color: ${theme.tooltipCloseButtonHoverFg};\n  }\n`);\n\nconst cssInfoTooltipButton = styled('div', `\n  flex-shrink: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: ${vars.largeFontSize};\n  width: ${vars.largeFontSize};\n  border: 1px solid ${theme.controlSecondaryFg};\n  color: ${theme.controlSecondaryFg};\n  border-radius: 50%;\n  cursor: pointer;\n  user-select: none;\n\n  &:hover {\n    border: 1px solid ${theme.controlSecondaryHoverFg};\n    color: ${theme.controlSecondaryHoverFg};\n  }\n`);\n\nconst cssInfoTooltipPopup = styled('div', `\n  display: flex;\n  flex-direction: column;\n  background-color: ${theme.popupBg};\n  max-width: 200px;\n  margin: 4px;\n  padding: 0px;\n`);\n\nconst cssInfoTooltipPopupBody = styled('div', `\n  color: ${theme.text};\n  text-align: left;\n  padding: 0px 16px 16px 16px;\n`);\n\nconst cssInfoTooltipPopupCloseButton = styled('div', `\n  flex-shrink: 0;\n  align-self: flex-end;\n  cursor: pointer;\n  --icon-color: ${theme.controlSecondaryFg};\n  margin: 8px 8px 4px 0px;\n  padding: 2px;\n  border-radius: 4px;\n\n  &:hover {\n    background-color: ${theme.hover};\n  }\n`);\n\nconst cssDomWithTooltip = styled('div', `\n  display: flex;\n  align-items: center;\n  column-gap: 8px;\n`);\n","import {theme} from 'app/client/ui2018/cssVars';\nimport {icon} from 'app/client/ui2018/icons';\nimport {styled} from 'grainjs';\n\nexport const cssHoverCircle = styled('div', `\n  width: 32px;\n  height: 32px;\n  background: none;\n  border-radius: 16px;\n\n  &:hover, &.weasel-popup-open {\n    background-color: ${theme.hover};\n  }\n\n  &-disabled:hover {\n    background: none;\n  }\n`);\n\nexport const cssTopBarBtn = styled(icon, `\n  width: 32px;\n  height: 32px;\n  padding: 8px 8px;\n  cursor: pointer;\n  -webkit-mask-size: 16px 16px;\n  background-color: ${theme.topBarButtonPrimaryFg};\n\n  .${cssHoverCircle.className}-disabled & {\n    background-color: ${theme.topBarButtonDisabledFg};\n    cursor: default;\n  }\n  &-slate { background-color: ${theme.topBarButtonSecondaryFg}; }\n  &-error { background-color: ${theme.topBarButtonErrorFg}; }\n`);\n","import {beaconOpenMessage, IBeaconOpenOptions} from 'app/client/lib/helpScout';\nimport {makeT} from 'app/client/lib/localization';\nimport {AppModel} from 'app/client/models/AppModel';\nimport {ConnectState} from 'app/client/models/ConnectState';\nimport {urlState} from 'app/client/models/gristUrlState';\nimport {Expirable, IAppError, Notification, Notifier, NotifyAction, Progress} from 'app/client/models/NotifyModel';\nimport {hoverTooltip} from 'app/client/ui/tooltips';\nimport {cssHoverCircle, cssTopBarBtn} from 'app/client/ui/TopBarCss';\nimport {theme, vars} from 'app/client/ui2018/cssVars';\nimport {icon} from 'app/client/ui2018/icons';\nimport {IconName} from \"app/client/ui2018/IconList\";\nimport {menuCssClass} from 'app/client/ui2018/menus';\nimport {commonUrls, isFeatureEnabled} from 'app/common/gristUrls';\nimport {dom, makeTestId, styled} from 'grainjs';\nimport {cssMenu, defaultMenuOptions, IOpenController, setPopupToCreateDom} from 'popweasel';\n\nconst t = makeT('NotifyUI');\n\nconst testId = makeTestId('test-notifier-');\n\n\nfunction buildAction(action: NotifyAction, item: Notification, options: IBeaconOpenOptions): HTMLElement|null {\n  const appModel = options.appModel;\n  switch (action) {\n    case 'upgrade':\n      if (appModel) {\n        return cssToastAction(t(\"Upgrade Plan\"), dom.on('click', () =>\n          appModel.showUpgradeModal()));\n      } else {\n        return dom('a', cssToastAction.cls(''), t(\"Upgrade Plan\"), {target: '_blank'},\n          {href: commonUrls.plans});\n      }\n    case 'manage':\n      if (urlState().state.get().billing === 'billing') { return null; }\n      return dom('a', cssToastAction.cls(''), t(\"Manage billing\"), {target: '_blank'},\n        {href: urlState().makeUrl({billing: 'billing'})});\n    case 'renew':\n      // If already on the billing page, nothing to return.\n      if (urlState().state.get().billing === 'billing') { return null; }\n      // If not a billing manager, nothing to return.\n      if (appModel && appModel.currentOrg && appModel.currentOrg.billingAccount &&\n          !appModel.currentOrg.billingAccount.isManager) { return null; }\n      // Otherwise return a link to the billing page.\n      return dom('a', cssToastAction.cls(''), t(\"Renew\"), {target: '_blank'},\n                 {href: urlState().makeUrl({billing: 'billing'})});\n\n    case 'personal':\n      if (!appModel) { return null; }\n      return cssToastAction(t(\"Go to your free personal site\"), dom.on('click', async () => {\n        const info = await appModel.api.getSessionAll();\n        const orgs = info.orgs.filter(org => org.owner && org.owner.id === appModel.currentUser?.id);\n        if (orgs.length !== 1) {\n          throw new Error(t(\"Cannot find personal site, sorry!\"));\n        }\n        window.location.assign(urlState().makeUrl({org: orgs[0].domain || undefined}));\n      }));\n\n    case 'report-problem':\n      return cssToastAction(t(\"Report a problem\"), testId('toast-report-problem'),\n        dom.on('click', () => beaconOpenMessage({...options, includeAppErrors: true})));\n\n    case 'ask-for-help': {\n      const errors: IAppError[] = [{\n        error: new Error(item.options.message as string),\n        timestamp: item.options.timestamp,\n      }];\n      return cssToastAction(t(\"Ask for help\"),\n        dom.on('click', () => beaconOpenMessage({...options, includeAppErrors: true, errors})));\n    }\n\n    default:\n      return cssToastAction(action.label, testId('toast-custom-action'),\n        dom.on('click', action.action));\n  }\n}\n\nfunction notificationIcon(item: Notification) {\n let iconName: IconName|null = null;\n  switch(item.options.level) {\n    case \"error\":   iconName = \"Warning\"; break;\n    case \"warning\": iconName = \"Warning\"; break;\n    case \"success\": iconName = \"TickSolid\"; break;\n    case \"info\": iconName = \"Info\"; break;\n  }\n  return iconName ? icon(iconName, dom.cls(cssToastIcon.className)) : null;\n}\n\nfunction buildNotificationDom(item: Notification, options: IBeaconOpenOptions) {\n  const iconElement = notificationIcon(item);\n  const hasLeftIcon = Boolean(!item.options.title && iconElement);\n  return cssToastWrapper(testId('toast-wrapper'),\n    cssToastWrapper.cls(use => `-${use(item.status)}`),\n    cssToastWrapper.cls(`-${item.options.level}`),\n    cssToastWrapper.cls('-memo', item.options.memos.length > 0),\n    cssToastWrapper.cls(hasLeftIcon ? '-left-icon' : ''),\n    item.options.title ? null : iconElement,\n    cssToastBody(\n      item.options.title ? cssToastTitle(notificationIcon(item), cssToastTitle(item.options.title)) : null,\n      cssToastText(testId('toast-message'),\n        item.options.message,\n      ),\n      item.options.actions.length ? cssToastActions(\n        item.options.actions.map((action) => buildAction(action, item, options))\n      ) : null,\n      item.options.memos.length ? cssToastMemos(\n        item.options.memos.map(memo => cssToastMemo(\n          cssToastMemoIcon('Memo'),\n          dom('div', memo, testId('toast-memo')),\n        ))\n      ) : null,\n    ),\n    dom.maybe(item.options.canUserClose, () =>\n      cssToastClose(testId('toast-close'),\n        '',\n        dom.on('click', () => item.dispose())\n      )\n    )\n  );\n}\n\nfunction buildProgressDom(item: Progress) {\n  return cssToastWrapper(testId('progress-wrapper'),\n    cssToastBody(\n      cssToastText(testId('progress-message'),\n        dom.text(item.options.name),\n        dom.maybe(item.options.size, size => cssProgressBarSize(` (${size})`))\n      ),\n      cssProgressBarWrapper(\n        cssProgressBarStatus(\n          dom.style('width', use => `${use(item.progress)}%`)\n        )\n      )\n    )\n  );\n}\n\nexport function buildNotifyMenuButton(notifier: Notifier, appModel: AppModel|null) {\n  const {connectState} = notifier.getStateForUI();\n  return cssHoverCircle({style: `margin: 5px;`},\n    dom.domComputed(connectState, (state) => buildConnectStateButton(state)),\n    (elem) => {\n      setPopupToCreateDom(elem, (ctl) => buildNotifyDropdown(ctl, notifier, appModel),\n        {...defaultMenuOptions, placement: 'bottom-end'});\n    },\n    hoverTooltip('Notifications', {key: 'topBarBtnTooltip'}),\n    testId('menu-btn'),\n  );\n}\n\nfunction buildNotifyDropdown(ctl: IOpenController, notifier: Notifier, appModel: AppModel|null): Element {\n  const {connectState, disconnectMsg, dropdownItems} = notifier.getStateForUI();\n\n  return cssDropdownWrapper(\n    // Reuse css classes for menus (combination of popweasel classes and those from Grist menus)\n    dom.cls(cssMenu.className),\n    dom.cls(menuCssClass),\n\n    // Close on Escape.\n    dom.onKeyDown({Escape: () => ctl.close()}),\n    // Once attached, focus this element, so that it accepts keyboard events.\n    (elem) => { setTimeout(() => elem.focus(), 0); },\n\n    cssDropdownContent(\n      cssDropdownHeader(\n        cssDropdownHeaderTitle(t(\"Notifications\")),\n        !isFeatureEnabled(\"helpCenter\") ? null :\n        cssDropdownFeedbackLink(\n          cssDropdownFeedbackIcon('Feedback'),\n          t(\"Give feedback\"),\n          dom.on('click', () => beaconOpenMessage({appModel, onOpen: () => ctl.close(), route: '/ask/message/'})),\n          testId('feedback'),\n        )\n      ),\n      dom.maybe(disconnectMsg, (msg) =>\n        cssDropdownStatus(\n          buildConnectStateButton(connectState.get()),\n          dom('div', cssDropdownStatusText(msg.message), testId('disconnect-msg')),\n        )\n      ),\n      dom.maybe((use) => use(dropdownItems).length === 0 && !use(disconnectMsg), () =>\n        cssDropdownStatus(\n          dom('div', cssDropdownStatusText(t(\"No notifications\"))),\n        )\n      ),\n      dom.forEach(dropdownItems, item =>\n        buildNotificationDom(item, {appModel, onOpen: () => ctl.close()})),\n    ),\n    testId('dropdown'),\n  );\n}\n\nexport function buildSnackbarDom(notifier: Notifier, appModel: AppModel|null): Element {\n  const {progressItems, toasts} = notifier.getStateForUI();\n  return cssSnackbarWrapper(testId('snackbar-wrapper'),\n    dom.forEach(progressItems, item => buildProgressDom(item)),\n    dom.forEach(toasts, toast => buildNotificationDom(toast, {appModel})),\n  );\n}\n\nfunction buildConnectStateButton(state: ConnectState): Element {\n  switch (state) {\n    case ConnectState.JustDisconnected: return cssTopBarBtn('Notification', cssTopBarBtn.cls('-slate'));\n    case ConnectState.RecentlyDisconnected: return cssTopBarBtn('Offline', cssTopBarBtn.cls('-slate'));\n    case ConnectState.ReallyDisconnected: return cssTopBarBtn('Offline', cssTopBarBtn.cls('-error'));\n    case ConnectState.Connected:\n    default:\n      return cssTopBarBtn('Notification');\n  }\n}\n\n\nconst cssDropdownWrapper = styled('div', `\n  background-color: ${theme.notificationsPanelBodyBg};\n  border: 1px solid ${theme.notificationsPanelBorder};\n  padding: 0px;\n`);\n\nconst cssDropdownContent = styled('div', `\n  min-width: 320px;\n  max-width: 320px;\n`);\n\nconst cssDropdownHeader = styled('div', `\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 24px;\n  background-color: ${theme.notificationsPanelHeaderBg};\n  outline: 1px solid ${theme.notificationsPanelBorder};\n`);\n\nconst cssDropdownHeaderTitle = styled('span', `\n  color: ${theme.text};\n  font-weight: bold;\n`);\n\nconst cssDropdownFeedbackLink = styled('div', `\n  display: flex;\n  color: ${theme.controlFg};\n  cursor: pointer;\n  user-select: none;\n  &:hover {\n    text-decoration: underline;\n  }\n`);\n\nconst cssDropdownFeedbackIcon = styled(icon, `\n  background-color: ${theme.controlFg};\n  margin-right: 4px;\n`);\n\nconst cssDropdownStatus = styled('div', `\n  padding: 16px 48px 24px 48px;\n  text-align: center;\n  border-top: 1px solid ${theme.notificationsPanelBorder};\n`);\n\nconst cssDropdownStatusText = styled('div', `\n  display: inline-block;\n  margin: 8px 0 0 0;\n  text-align: left;\n  color: ${theme.lightText};\n`);\n\n// z-index below is set above other assorted children of <body>, which includes\n// indexes such as 999 for modals.\nconst cssSnackbarWrapper = styled('div', `\n  position: fixed;\n  bottom: 8px;\n  right: 8px;\n  z-index: ${vars.notificationZIndex};\n\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n\n  font-size: ${vars.mediumFontSize};\n\n  pointer-events: none; /* Allow mouse clicks through */\n`);\n\nconst cssToastBody = styled('div', `\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  padding: 0 12px;\n  overflow-wrap: anywhere;\n`);\n\nconst cssToastIcon = styled('div', `\n  flex-shrink: 0;\n  height: 18px;\n  width: 18px;\n`);\n\nconst cssToastActions = styled('div', `\n  display: flex;\n  align-items: flex-end;\n  margin-top: 16px;\n  color: ${theme.toastControlFg};\n`);\n\nconst cssToastWrapper = styled('div', `\n  display: flex;\n  min-width: 240px;\n  max-width: 320px;\n  overflow: hidden;\n\n  margin: 4px;\n  padding: 12px;\n  border-radius: 3px;\n\n  color: ${theme.toastText};\n  background-color: ${theme.toastBg};\n\n  pointer-events: auto;\n\n  opacity: 1;\n  transition: opacity ${Expirable.fadeDelay}ms;\n\n  &-memo {\n    color: ${theme.toastMemoText};\n    background-color: ${theme.toastMemoBg};\n  }\n  &-error {\n    border-left: 6px solid ${theme.toastErrorBg};\n    padding-left: 6px;\n    --icon-color: ${theme.toastErrorIcon};\n  }\n  &-success {\n    border-left: 6px solid ${theme.toastSuccessBg};\n    padding-left: 6px;\n    --icon-color: ${theme.toastSuccessIcon};\n  }\n  &-warning {\n    border-left: 6px solid ${theme.toastWarningBg};\n    padding-left: 6px;\n    --icon-color: ${theme.toastWarningIcon};\n  }\n  &-info {\n    border-left: 6px solid ${theme.toastInfoBg};\n    padding-left: 6px;\n    --icon-color: ${theme.toastInfoIcon};\n  }\n  &-info .${cssToastActions.className} {\n    color: ${theme.toastInfoControlFg};\n  }\n\n  &-left-icon {\n    padding-left: 12px;\n  }\n  &-left-icon > .${cssToastBody.className} {\n    padding-left: 10px;\n  }\n\n  &-expiring, &-expired {\n    opacity: 0;\n  }\n  .${cssDropdownContent.className} > & > .notification-icon {\n    display: none;\n  }\n  .${cssDropdownContent.className} > & {\n    background-color: unset;\n    color: ${theme.text};\n    border-radius: 0px;\n    border-top: 1px solid ${theme.notificationsPanelBorder};\n    margin: 0px;\n    padding: 16px 20px;\n  }\n`);\n\n\nconst cssToastText = styled('div', `\n  .${cssToastWrapper.className}-memo & {\n    font-weight: 700;\n  }\n`);\n\nconst cssToastTitle = styled(cssToastText, `\n  display: flex;\n  gap: 8px;\n  font-weight: bold;\n  margin-bottom: 8px;\n`);\n\nconst cssToastClose = styled('div', `\n  cursor: pointer;\n  user-select: none;\n  width: 16px;\n  height: 16px;\n  line-height: 16px;\n  text-align: center;\n  margin: -4px -4px -4px 4px;\n`);\n\nconst cssToastAction = styled('div', `\n  cursor: pointer;\n  user-select: none;\n  margin-right: 24px;\n  &, &:hover, &:focus {\n    color: inherit;\n  }\n  &:hover {\n    text-decoration: underline;\n  }\n`);\n\nconst cssToastMemos = styled('div', `\n  margin-top: 8px;\n  display: flex;\n  flex-direction: column;\n`);\n\nconst cssToastMemo = styled('div', `\n  display: flex;\n  column-gap: 8px;\n  align-items: center;\n`);\n\nconst cssToastMemoIcon = styled(icon, `\n  --icon-color: ${theme.toastMemoText};\n  flex-shrink: 0;\n`);\n\nconst cssProgressBarWrapper = styled('div', `\n  margin-top: 18px;\n  margin-bottom: 11px;\n  height: 3px;\n  border-radius: 3px;\n  background-color: ${theme.progressBarBg};\n`);\n\nconst cssProgressBarSize = styled('span', `\n  color: ${theme.toastLightText};\n`);\n\nconst cssProgressBarStatus = styled('div', `\n  height: 3px;\n  min-width: 3px;\n  border-radius: 3px;\n  background-color: ${theme.progressBarFg};\n`);\n","import {isIOS} from 'app/client/lib/browserInfo';\nimport {localStorageBoolObs} from 'app/client/lib/localStorageObs';\nimport {dom} from 'grainjs';\n\nexport const viewportEnabled = localStorageBoolObs('viewportEnabled', true);\n\nexport function toggleViewport() {\n  viewportEnabled.set(!viewportEnabled.get());\n  if (!viewportEnabled.get()) {\n    // Removing the meta tag doesn't cause mobile browsers to reload automatically.\n    location.reload();\n  }\n}\n\nexport function addViewportTag() {\n  dom.update(document.head,\n    dom.maybe(viewportEnabled, () => {\n      // For the maximum-scale=1 advice, see https://stackoverflow.com/a/46254706/328565. On iOS,\n      // it prevents the auto-zoom when an input is focused, but does not prevent manual\n      // pinch-to-zoom. On Android, it's not needed, and would prevent manual zoom.\n      const viewportContent = \"width=device-width,initial-scale=1.0\" + (isIOS() ? \",maximum-scale=1\" : \"\");\n      return dom('meta', {name: \"viewport\", content: viewportContent});\n    })\n  );\n}\n","import {get as getBrowserGlobals} from 'app/client/lib/browserGlobals';\nimport {setupLocale} from 'app/client/lib/localization';\nimport {AppModel, TopAppModelImpl} from 'app/client/models/AppModel';\nimport {setUpErrorHandling} from 'app/client/models/errors';\nimport {buildSnackbarDom} from 'app/client/ui/NotifyUI';\nimport {addViewportTag} from 'app/client/ui/viewport';\nimport {attachCssRootVars} from 'app/client/ui2018/cssVars';\nimport {BaseAPI} from 'app/common/BaseAPI';\nimport {dom, DomContents} from 'grainjs';\n\nconst G = getBrowserGlobals('document', 'window');\n\n/**\n * Sets up error handling and global styles, and replaces the DOM body with\n * the result of calling `buildPage`.\n */\nexport function setupPage(buildPage: (appModel: AppModel) => DomContents) {\n  setUpErrorHandling();\n  const topAppModel = TopAppModelImpl.create(null, {});\n  attachCssRootVars(topAppModel.productFlavor);\n  addViewportTag();\n\n  void setupLocale();\n\n  // Add globals needed by test utils.\n  G.window.gristApp = {\n    testNumPendingApiRequests: () => BaseAPI.numPendingRequests(),\n  };\n\n  dom.update(document.body, dom.maybe(topAppModel.appObs, (appModel) => [\n    buildPage(appModel),\n    buildSnackbarDom(appModel.notifier, appModel),\n  ]));\n}\n","import * as Bowser from \"bowser\"; // TypeScript\n\nlet parser: Bowser.Parser.Parser|undefined;\n\nfunction getParser() {\n  return parser || (parser = Bowser.getParser(window.navigator.userAgent));\n}\n\n// Returns whether the browser we are in is a desktop browser.\nexport function isDesktop() {\n  const platformType = getParser().getPlatformType();\n  return (!platformType || platformType === 'desktop');\n}\n\n// Returns whether the browser is on mobile iOS.\n// This is used in particular in viewport.ts to set maximum-scale=1 (to prevent iOS auto-zoom when\n// an input is focused, without preventing manual pinch-to-zoom).\nexport function isIOS() {\n  return navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform);\n}\n\n// Returns 'metaKey' on Mac / iOS, and 'ctrlKey' elsewhere. This is useful for various keyboard\n// interactions that use Control on Windows and Linux, and Command key on Mac for the same\n// purpose. Suitable to use with KeyboardEvent and MouseEvent.\n// (Note: Mousetrap.js uses the same logic to interpret its \"mod\" key alias.)\nexport function modKeyProp(): 'metaKey'|'ctrlKey' {\n  return /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? 'metaKey' : 'ctrlKey';\n}\n\nexport function isWin() {\n  const os = getParser().getOSName();\n  return os === 'Windows';\n}\n","import {BillingPage} from 'app/client/ui/BillingPage';\nimport {setupPage} from 'app/client/ui/setupPage';\nimport {dom} from 'grainjs';\n\nsetupPage((appModel) => dom.create(BillingPage, appModel));\n"],"names":["delay","msec","Promise","resolve","setTimeout","identity","UP_TRIANGLE","DOWN_TRIANGLE","EMAIL_RE","RegExp","startsWith","str","prefix","lastIndexOf","endsWith","suffix","indexOf","length","removePrefix","slice","removeSuffix","removeTrailingSlash","result","padStart","targetLength","padString","capitalize","replace","c","toUpperCase","capitalizeFirstWord","isNumber","n","isNaN","parseFloat","isFinite","clamp","value","min","max","Math","between","bound1","bound2","lower","upper","mod","x","roundDownToMultiple","m","floor","undefDefault","y","undef","list","async","firstDefined","op","safeJsonParse","json","defaultVal","JSON","parse","e","encodeQueryParam","encodeURIComponent","String","encodeQueryParams","obj","Object","keys","map","k","join","maxsplit","sep","maxNumSplits","pos","start","i","push","arraysEqual","a","b","setDifference","Set","ai","has","add","arrayLike","item","Array","prototype","call","arrayRemove","array","index","splice","arrayInsertBefore","nextValue","arrayExtend","anotherArray","len","arrayCopyForward","toArray","toStart","fromArray","fromStart","count","end","xend","arrayCopyBackward","j","xStart","arrayAppend","arraySplice","target","arrToInsert","origLen","tailLen","insLen","sortedIndex","elem","compareFunc","mid","lo","hi","hasDuplicates","prevVals","create","countIf","callback","forEach","map2","array1","array2","mapFunc","growMatrix","dataMatrix","r","colArr","colVals","from","_v","multiCompareFunc","sortKeyFuncs","compareFuncs","optAscending","Error","ascending","compareOutcome","keyA","keyB","nativeCompare","propertyCompare","property","defaultLocale","defaultCollator","Intl","Collator","localeCompare","compare","setDefault","mapInst","key","val","set","get","getSetMapValue","buildValue","popFromMap","delete","addCountsToMap","valueCounts","values","v","mappedValue","isSubset","smaller","larger","deepExtend","_varArgObjects","arguments","object","name","hasOwnProperty","src","tgt","isArray","byteString","bytes","toFixed","mapToObject","keysArray","optThisArg","pruneArray","arr","indexes","arrAt","indexesAt","_kwlist","sanitizeIdent","ident","includes","cloneFunc","fn","eval","toString","genRandomId","optPrefix","chars","ret","random","sortedScan","arrA","arrB","optKeyFunc","keyFunc","getReconnectTimeout","attemptNumber","intervals","timeout","isEmail","email","test","toLowerCase","waitObs","observable","predicate","Boolean","_reject","peek","sub","subscribe","dispose","waitGrainObs","res","addListener","inlineStyle","valueObs","subscribeElem","style","setProperty","PromiseChain","_last","nextCB","next","this","catch","then","isColorDark","hexColor","isDarkBelow","substring","rgb","parseInt","isValidHex","isLongerThan","promise","timeoutMsec","isPending","done","race","isAffirmative","parameter","isNonNullish","unwrap","obs","not","use","getDistinctValues","Infinity","distinct","size","assertIsDefined","retryOnce","recover","notSet","ifNotSet","def","window","module","exports","bind","unbind","Mousetrap","addKeycodes","customStopCallbacks","WeakMap","MousetrapProtype","origStopCallback","stopCallback","element","combo","sequence","mousetrapBindingsPaused","custom","err","document","body","contains","setPaused","yesNo","setCustomStopCallback","allGlobals","globalVars","updateGlobals","neededNames","globals","varArgNames","setGlobals","oldVars","ko","G","dom","firstArg","args","Node","createElemFromString","createDOMElement","handleChildren","tagString","elemCreator","tag","id","classes","dotPos","hashPos","setAttribute","tagName","createElement","createSVGElement","createElementNS","children","child","appendChild","createTextNode","wrapInlinable","func","context","unshift","apply","makeFilterFunc","selectorOrFunc","matches","svg","frag","varArgNodes","createDocumentFragment","fwdArgs","startIndex","inlinable","inlineable","optElem","getElementById","hide","display","show","toggle","optYesNo","dragOverClass","className","counter","lastTarget","on","ev","originalEvent","dataTransfer","types","dropEffect","classList","remove","node","howMany","optNewChildren","childNodes","replaceChild","insertBefore","removeChild","childIndex","parentNode","findLastChild","parent","filterFunc","lastChild","previousSibling","findAncestor","optContainer","match","detachNode","events","optSelector","optData","handler","$","once","one","defer","optContext","onDispose","utils","domNodeDisposal","addDisposeCallback","autoDispose","disposableValue","testId","settle","cookies","buildURL","buildFullPath","parseHeaders","isURLSameOrigin","createError","config","reject","requestData","data","requestHeaders","headers","responseType","isFormData","request","XMLHttpRequest","auth","username","password","unescape","Authorization","btoa","fullPath","baseURL","url","onloadend","responseHeaders","getAllResponseHeaders","response","responseText","status","statusText","open","method","params","paramsSerializer","onreadystatechange","readyState","responseURL","onabort","onerror","ontimeout","timeoutErrorMessage","transitional","clarifyTimeoutError","isStandardBrowserEnv","xsrfValue","withCredentials","xsrfCookieName","read","undefined","xsrfHeaderName","setRequestHeader","isUndefined","onDownloadProgress","addEventListener","onUploadProgress","upload","cancelToken","cancel","abort","send","Axios","mergeConfig","createInstance","defaultConfig","instance","extend","axios","instanceConfig","defaults","Cancel","CancelToken","isCancel","all","promises","spread","isAxiosError","message","__CANCEL__","executor","TypeError","resolvePromise","token","reason","throwIfRequested","source","InterceptorManager","dispatchRequest","validator","validators","interceptors","assertOptions","silentJSONParsing","boolean","forcedJSONParsing","requestInterceptorChain","synchronousRequestInterceptors","interceptor","runWhen","synchronous","fulfilled","rejected","responseInterceptorChain","chain","concat","shift","newConfig","onFulfilled","onRejected","error","getUri","handlers","options","eject","h","isAbsoluteURL","combineURLs","requestedURL","enhanceError","code","transformData","throwIfCancellationRequested","transformRequest","merge","common","adapter","transformResponse","toJSON","description","number","fileName","lineNumber","columnNumber","stack","config1","config2","valueFromConfig2Keys","mergeDeepPropertiesKeys","defaultToConfig2Keys","directMergeKeys","getMergedValue","isPlainObject","mergeDeepProperties","prop","axiosKeys","otherKeys","filter","validateStatus","fns","normalizeHeaderName","DEFAULT_CONTENT_TYPE","setContentTypeIfUnset","process","isArrayBuffer","isBuffer","isStream","isFile","isBlob","isArrayBufferView","buffer","isURLSearchParams","isObject","stringify","strictJSONParsing","isString","maxContentLength","maxBodyLength","thisArg","encode","serializedParams","parts","isDate","toISOString","hashmarkIndex","relativeURL","write","expires","path","domain","secure","cookie","Date","toGMTString","decodeURIComponent","now","payload","originURL","msie","navigator","userAgent","urlParsingNode","resolveURL","href","protocol","host","search","hash","hostname","port","pathname","charAt","location","requestURL","parsed","normalizedName","ignoreDuplicateOf","split","line","trim","substr","pkg","type","thing","deprecatedWarnings","currentVerArr","version","isOlderVersion","thanVersion","pkgVersionArr","destVer","isDeprecated","formatMessage","opt","desc","opts","console","warn","schema","allowUnknown","getPrototypeOf","isFunction","l","constructor","FormData","ArrayBuffer","isView","pipe","URLSearchParams","product","assignValue","stripBOM","content","charCodeAt","byteLength","b64","lens","getLens","validLen","placeHoldersLen","toByteArray","tmp","Arr","_byteLength","curByte","revLookup","fromByteArray","uint8","extraBytes","maxChunkLength","len2","encodeChunk","lookup","Uint8Array","num","output","t","d","o","defineProperty","enumerable","Symbol","toStringTag","__esModule","default","p","s","getFirstMatch","getSecondMatch","matchAndReturnConst","getWindowsVersionName","getMacOSVersionName","getAndroidVersionName","getVersionPrecision","compareVersions","u","reverse","getBrowserAlias","BROWSER_ALIASES_MAP","getBrowserTypeByAlias","BROWSER_MAP","ENGINE_MAP","OS_MAP","PLATFORMS_MAP","Bada","BlackBerry","Chrome","Chromium","Epiphany","Firefox","Focus","Generic","Googlebot","Maxthon","Opera","PhantomJS","Puffin","QupZilla","QQ","QQLite","Safari","Sailfish","SeaMonkey","Sleipnir","Swing","Tizen","Vivaldi","WeChat","Roku","amazon_silk","android","bada","blackberry","chrome","chromium","epiphany","firefox","focus","generic","googlebot","google_search","ie","k_meleon","maxthon","edge","mz","naver","opera","opera_coast","phantomjs","puffin","qupzilla","qq","qqlite","safari","sailfish","samsung_internet","seamonkey","sleipnir","swing","tizen","uc","vivaldi","webos","wechat","yandex","tablet","mobile","desktop","tv","WindowsPhone","Windows","MacOS","iOS","Android","WebOS","Linux","ChromeOS","PlayStation4","EdgeHTML","Blink","Trident","Presto","Gecko","WebKit","configurable","writable","getParser","getResult","_ua","parsedResult","getUA","parseBrowser","browser","find","some","describe","getBrowser","getBrowserName","getBrowserVersion","getOS","os","parseOS","getOSName","getOSVersion","getPlatform","platform","parsePlatform","getPlatformType","getEngine","engine","parseEngine","getEngineName","assign","satisfies","isOS","isPlatform","f","isBrowser","compareVersion","isEngine","is","versionName","vendor","model","Number","base64","ieee754","customInspectSymbol","Buffer","SlowBuffer","alloc","INSPECT_MAX_BYTES","K_MAX_LENGTH","createBuffer","RangeError","buf","setPrototypeOf","arg","encodingOrOffset","allocUnsafe","string","encoding","isEncoding","actual","fromString","arrayView","isInstance","copy","fromArrayBuffer","byteOffset","fromArrayLike","fromArrayView","SharedArrayBuffer","valueOf","checked","numberIsNaN","fromObject","toPrimitive","assertSize","mustMatch","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","dir","arrayIndexOf","indexSize","arrLength","valLength","readUInt16BE","foundIndex","found","hexWrite","offset","remaining","strLen","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","base64Write","ucs2Write","units","utf16leToBytes","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","decodeCodePointsArray","kMaxLength","TYPED_ARRAY_SUPPORT","proto","foo","typedArraySupport","poolSize","fill","allocUnsafeSlow","_isBuffer","swap16","swap32","swap64","toLocaleString","equals","inspect","thisStart","thisEnd","thisCopy","targetCopy","_arr","out","hexSliceLookupTable","checkOffset","ext","checkInt","checkIEEE754","writeFloat","littleEndian","noAssert","writeDouble","newBuf","subarray","readUintLE","readUIntLE","mul","readUintBE","readUIntBE","readUint8","readUInt8","readUint16LE","readUInt16LE","readUint16BE","readUint32LE","readUInt32LE","readUint32BE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUintLE","writeUIntLE","writeUintBE","writeUIntBE","writeUint8","writeUInt8","writeUint16LE","writeUInt16LE","writeUint16BE","writeUInt16BE","writeUint32LE","writeUInt32LE","writeUint32BE","writeUInt32BE","writeIntLE","limit","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","copyWithin","INVALID_BASE64_RE","leadSurrogate","base64clean","dst","alphabet","table","i16","initial","dest","DocumentFragment","Element","_noopOwner","_defaultDisposableOwner","Disposable","_disposalList","DisposalList","static","owner","origDefaultOwner","holder","Holder","setDisposeOwner","clear","e2","release","wipeOnDispose","_wipeOutObject","isDisposed","disposalList","callAndDispose","_describe","_owned","_disposalListener","_onOutsideDispose","_unlisten","owned","isEmpty","disposalListener","MultiHolder","super","lis","DisposeListener","_insertBefore","_next","callAll","_disposeList","begin","_removeNode","DepItem","_priority","_enqueued","_creation","_nextCreationNum","_callback","_context","useDep","depItem","recompute","enqueue","queue","_isPrior","_items","items","isPrior","curIdx","parIdx","parItem","pop","leftIdx","rightIdx","bestIdx","isPrioritySmaller","_seen","bundleDepth","compute","bundleChanges","BaseObservable","_onChange","_value","setAndTrigger","prev","emit","_disposeOwned","hasListeners","setListenerChangeCB","changeCB","setChangeCB","_getDepItem","_setWithArg","Observable","obsHolder","_disposeMap","_walkDom","visitFunc","firstChild","nextSibling","_disposeNode","disposer","domDisposeHooks","disposeNode","disposeRecursive","domDispose","onDisposeElem","disposerFunc","prevDisposer","autoDisposeElem","disposable","fromKoWrappers","toKoWrappers","fromKo","koObs","KoWrapObs","_koObs","_koSub","toKo","knockout","grainObs","prevKoObs","newKoObs","koDisposalIsSetup","setupKoDisposal","koDomNodeDisposal","origKoCleanExternalData","cleanExternalData","origGrainDisposeRecursive","newKoCleanExternalData","cleanNode","emptyArray","Subscription","dependencies","_depItem","_evaluate","_dependencies","_depListeners","_subscribeTo","_dynDeps","Map","_useFunc","_useDependency","_obs","listener","_inUse","readArgs","_enqueue","cb","_noWrite","Computed","_write","_sub","_read","readCb","onWrite","writeFunc","computed","subscribeBindable","koValue","comp","_dataMap","attrsElem","attrsObj","attrs","attrElem","attrName","attrValue","removeAttribute","attr","attrValueObs","boolAttrElem","boolValue","boolAttr","boolValueObs","textElem","textNode","nodeValue","styleElem","propElem","showElem","hideElem","clsElem","cls","_clsDynamicPrefix","clsPrefix","prevClass","dataElem","getData","makeTestId","noTestId","_updateWithArgsOrDispose","_createFromTagString","_createElementHtml","_createElementSvg","createFunc","update","_updateWithArgs","_updateWithArg","selector","querySelector","findAll","querySelectorAll","replaceContent","nodeBefore","nodeAfter","domComputed","contentFunc","markerPre","createComment","markerPost","domComputedOwned","maybe","maybeOwned","buildDom","ObsArray","_ownedItems","_setWithSplice","deleted","oldOwnedItems","MutableObsArray","newLen","numAdded","deleteCount","newValues","obsArray","ComputedArray","obsArr","_mapper","_syncMap","obsArrayValue","_unsync","_source","_listener","_recordChange","_rebuild","_lastSplice","_applySplice","change","sourceArray","newItems","oldItems","computedArray","mapper","makeLiveIndex","initialIndex","LiveIndex","_obsArray","_isLive","_onArrayChange","setLive","idx","itemCreateFunc","nodes","newArr","oldArr","endIndex","nextElem","DomEventListener","eventType","useCapture","handleEvent","event","removeEventListener","DomEventMatchListener","inner","outer","el","parentElement","_findMatch","onElem","onMatchElem","onMatch","onKeyElem","evType","keyHandlers","tabIndex","_elem","plainHandler","stopPropagation","preventDefault","onKeyPress","onKeyDown","text","PureComputed","_inCall","_onListenerChange","_activate","pureComputed","styled","creator","styles","StylePiece","newCreator","addToElem","keyframes","KeyframePiece","_global","_styles","_mounted","_nextClassName","_unmounted","g","_grainNextStyleNum","getNextStyleNum","sheet","_createRules","head","piece","_mountAll","nestedStart","createCssRules","input","isValid","setValue","validity","valid","checkValidity","onInput","Enter","unwrapMaybeObsArray","getOptionValue","option","optionArray","defLabel","label","disabled","selected","obsValue","findIndex","selectedIndex","_noop","LLink","_prev","last","Emitter","_changeCB","_changeCBContext","Listener","_triggerChangeCB","emitter","bindB","bindUB","bindBU","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","abs","log","LN2","z","w","R","jQuery","H","S","T","K","W","X","Y","clearTimeout","Z","oc","bb","pc","aa","ba","pd","qa","Pb","kb","tc","F","da","Zc","Ka","fd","J","deferUpdates","useOnlyNativeEvents","foreachHidesDestroyed","__proto__","C","Oa","MouseEvents","propertychange","q","getElementsByTagName","innerHTML","Ic","A","Lb","hb","vc","Mb","fb","gb","$b","Ba","zb","O","Ha","Sb","removeNode","Xb","la","ownerDocument","na","Ca","cloneNode","ua","Wc","nodeType","Ua","Yc","Cb","Td","ud","compareDocumentPosition","Rb","documentElement","jd","P","zc","onError","Fc","attachEvent","I","za","detachEvent","Fb","createEvent","dispatchEvent","initEvent","click","fireEvent","trigger","N","Eb","baseVal","Ab","zd","Xc","mergeAttributes","zoom","vd","width","Od","Da","Xd","Yd","Kc","Md","Function","fc","Nd","includeFields","action","submitter","submit","getTime","Tb","xb","cleanData","thead","tbody","tfoot","tr","td","th","optgroup","ta","parseHTML","clean","parentWindow","defaultView","innerShiv","Ld","dc","html","Tc","sd","Jd","Wb","ad","bd","ma","MutationObserver","observe","attributes","scheduler","yb","resetForTesting","Rd","Ta","throttle","throttleEvaluation","rateLimit","Hb","tb","deferred","notifySubscribers","notify","equalityComparer","gc","kc","lc","Ib","ab","Jb","D","ob","rc","Qa","Gb","Wa","dd","wc","mb","Cd","mc","qb","qc","Ad","Pc","U","ac","nd","od","ed","pa","Va","rb","Wd","sa","xa","wa","Na","Ya","Mc","Ia","trackArrayChanges","removeAll","destroy","_destroy","destroyAll","sorted","sort","reversed","yc","Oc","Ob","Nb","sparse","L","Jc","lb","ka","Xa","ha","ra","pb","hc","vb","Vc","disposeWhenNodeIsRemoved","Sa","disposeWhen","Qb","V","Hc","pure","deferEvaluation","ea","ja","La","Ub","Ma","Ja","Id","Qd","Gc","yd","xd","Nc","Ed","wb","save","$c","Vd","Ga","__ko__hasDomDataOptionValue__","Yb","getAttributeNode","specified","ya","unknown","Ra","va","Zb","ub","getBindingHandler","preprocess","valueAccessors","bindingParams","Hd","$a","ul","ol","Ea","Uc","Vb","Bd","Ud","Rc","ga","md","nodeHasBindings","getAttribute","getComponentNameForNode","getBindings","getBindingsString","parseBindingsString","sc","getBindingAccessors","B","M","Sc","xc","ib","Kb","preprocessNode","bindingContextForDescendants","gd","Dc","oa","Bb","ca","after","Lc","init","$data","controlsDescendantBindings","shouldBindDescendants","fa","script","textarea","template","$parents","$root","$rawData","dataDependency","exportDependencies","createChildContext","as","noChildContext","$parentContext","$parent","rd","Bc","Fa","Sd","eb","kd","Pa","Cc","definition","Fd","loaders","suppressLoaderExceptions","Ac","nc","viewModel","require","register","sb","unregister","Ec","getConfig","loadComponent","loadTemplate","HTMLElement","loadViewModel","cd","$raw","component","createViewModel","templateNodes","$component","$componentTemplateNodes","koDescendantsComplete","lookupNamespaceURI","removeAttributeNS","setAttributeNS","uniqueName","checkedValue","__ko__cssValue","css","enable","disable","returnValue","cancelBubble","foreach","Qc","includeDestroyed","afterAdd","beforeRemove","afterRender","beforeMove","afterMove","templateEngine","hasfocus","__ko_hasfocusUpdating","activeElement","__ko_hasfocusLastValue","blur","hasFocus","let","Q","multiple","scrollTop","cc","selectedOptions","textInput","propertyName","textinput","qd","using","autocomplete","form","visible","hidden","renderTemplateSource","createJavaScriptEvaluatorBlock","makeTemplateSource","ia","renderTemplate","isTemplateRewritten","allowTemplateRewriting","rewriteTemplate","ic","wd","Kd","ld","nodeName","Db","jb","hd","jc","ec","bc","Pd","$index","ifnot","moved","dontLimitMoves","Aa","nb","_countWaitingForRemove","E","Dd","Za","Gd","tmpl","koBindingContext","templateOptions","appendTo","fragments","addTemplate","ko_code","ko_with","close","DataView","getNative","hashClear","hashDelete","hashGet","hashHas","hashSet","Hash","entries","entry","listCacheClear","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","ListCache","mapCacheClear","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","MapCache","setCacheAdd","setCacheHas","SetCache","__data__","stackClear","stackDelete","stackGet","stackHas","stackSet","Stack","iteratee","resIndex","baseTimes","isArguments","isIndex","isTypedArray","inherited","isArr","isArg","isBuff","isType","skipIndexes","baseAssignValue","eq","objValue","copyObject","keysIn","arrayEach","baseAssign","baseAssignIn","cloneBuffer","copyArray","copySymbols","copySymbolsIn","getAllKeys","getAllKeysIn","getTag","initCloneArray","initCloneByTag","initCloneObject","isMap","isSet","argsTag","funcTag","objectTag","cloneableTags","baseClone","bitmask","customizer","isDeep","isFlat","isFull","isFunc","stacked","subValue","props","objectCreate","baseCreate","arrayPush","isFlattenable","baseFlatten","depth","isStrict","baseFor","createBaseFor","castPath","toKey","keysFunc","symbolsFunc","getRawTag","objectToString","symToStringTag","baseGetTag","isObjectLike","baseIsEqualDeep","baseIsEqual","other","equalArrays","equalByTag","equalObjects","arrayTag","equalFunc","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","matchData","noCustomizer","srcValue","COMPARE_PARTIAL_FLAG","isMasked","toSource","reIsHostCtor","funcProto","objectProto","funcToString","reIsNative","isLength","typedArrayTags","baseMatches","baseMatchesProperty","isPrototype","nativeKeys","nativeKeysIn","isProto","baseIsMatch","getMatchData","matchesStrictComparable","hasIn","isKey","isStrictComparable","assignMergeValue","baseMergeDeep","safeGet","baseMerge","srcIndex","newValue","cloneTypedArray","isArrayLikeObject","toPlainObject","mergeFunc","isCommon","isTyped","basePickBy","paths","baseGet","baseSet","overRest","setToString","lastIndex","nested","constant","baseSetToString","arrayMap","isSymbol","symbolProto","symbolToString","baseToString","trimmedEndIndex","reTrimStart","cache","stringToPath","arrayBuffer","root","freeExports","freeModule","cloneArrayBuffer","dataView","reFlags","regexp","exec","symbolValueOf","symbol","typedArray","isNew","getSymbols","getSymbolsIn","coreJsData","baseRest","isIterateeCall","assigner","sources","guard","fromRight","iterable","customDefaultsMerge","arraySome","cacheHas","isPartial","othLength","arrStacked","othStacked","seen","arrValue","othValue","compared","othIndex","mapToArray","setToArray","convert","objProps","objLength","objStacked","skipCtor","objCtor","othCtor","flatten","freeGlobal","baseGetAllKeys","isKeyable","baseIsNative","getValue","getPrototype","overArg","nativeObjectToString","isOwn","unmasked","arrayFilter","stubArray","propertyIsEnumerable","nativeGetSymbols","getOwnPropertySymbols","mapTag","promiseTag","setTag","weakMapTag","dataViewTag","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","Ctor","ctorString","hasFunc","nativeCreate","cloneDataView","cloneRegExp","cloneSymbol","spreadableSymbol","isConcatSpreadable","reIsUint","isArrayLike","reIsDeepProp","reIsPlainProp","uid","maskSrcKey","IE_PROTO","assocIndexOf","getMapData","memoize","freeProcess","nodeUtil","binding","transform","nativeMax","otherArgs","freeSelf","self","shortOut","nativeNow","lastCalled","stamp","pairs","LARGE_ARRAY_SIZE","memoizeCapped","rePropName","reEscapeChar","quote","subString","reWhitespace","baseClamp","toNumber","nativeMin","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","invokeFunc","time","leadingEdge","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","flush","defaultValue","propsIndex","propsLength","mergeWith","defaultsDeep","baseHasIn","hasPath","baseIsArguments","stubFalse","baseKeys","baseIsMap","baseUnary","nodeIsMap","objectCtorString","baseIsSet","nodeIsSet","baseIsTypedArray","nodeIsTypedArray","arrayLikeKeys","baseKeysIn","resolver","memoized","Cache","createAssigner","baseIteratee","negate","pickBy","basePick","pick","flatRest","baseProperty","basePropertyDeep","castFunction","toInteger","MAX_ARRAY_LENGTH","toFinite","remainder","baseTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","isBinary","baseValues","_REVERSE_MAP","_MAP","_KEYCODE_MAP","_SHIFT_MAP","_SPECIAL_ALIASES","_bindMultiple","_directMap","reset","_callbacks","_belongsTo","isContentEditable","handleKey","_handleKey","documentMousetrap","_addEvent","_characterFromEvent","character","which","shiftKey","_isModifier","_pickBestAction","modifiers","_getReverseMap","_getKeyInfo","combination","_keysFromString","ancestor","targetElement","_resetTimer","_sequenceLevels","_ignoreNextKeyup","_ignoreNextKeypress","_nextExpectedAction","_resetSequences","doNotReset","activeSequences","_getMatches","sequenceName","level","modifiers1","modifiers2","seq","metaKey","ctrlKey","deleteCombo","deleteSequence","_fireCallback","srcElement","_preventDefault","_stopPropagation","_handleKeyEvent","keyCode","altKey","_eventModifiers","_bindSingle","info","_increaseSequence","nextAction","_callbackAndReset","wrappedCallback","_bindSequence","callbacks","maxLevel","processedSequenceCallback","ignoreThisKeypress","combinations","longerTimeoutBrowsers","timeoutDuration","called","scheduled","functionToCheck","getStyleComputedProperty","getComputedStyle","getParentNode","getScrollParent","overflow","overflowX","overflowY","isIE11","MSInputMethodContext","documentMode","isIE10","isIE","getOffsetParent","noOffsetParent","offsetParent","nextElementSibling","getRoot","findCommonOffsetParent","element1","element2","order","DOCUMENT_POSITION_FOLLOWING","range","createRange","setStart","setEnd","commonAncestorContainer","firstElementChild","element1root","getScroll","side","upperSide","scrollingElement","includeScroll","rect","subtract","scrollLeft","modifier","top","bottom","left","right","getBordersSize","axis","sideA","sideB","getSize","computedStyle","getWindowSizes","getClientRect","offsets","height","getBoundingClientRect","sizes","clientWidth","clientHeight","horizScrollbar","offsetWidth","vertScrollbar","offsetHeight","getOffsetRectRelativeToArbitraryNode","fixedPosition","runIsIE","isHTML","childrenRect","parentRect","scrollParent","borderTopWidth","borderLeftWidth","marginTop","marginLeft","getViewportOffsetRectRelativeToArtbitraryNode","excludeScroll","relativeOffset","innerWidth","innerHeight","isFixed","getFixedPositionOffsetParent","getBoundaries","popper","reference","padding","boundariesElement","boundaries","boundariesNode","isPaddingNumber","getArea","computeAutoPlacement","placement","refRect","rects","sortedAreas","area","filteredAreas","computedPlacement","variation","getReferenceOffsets","state","commonOffsetParent","getOuterSizes","marginBottom","marginRight","getOppositePlacement","matched","getPopperOffsets","referenceOffsets","popperRect","popperOffsets","isHoriz","mainSide","secondarySide","measurement","secondaryMeasurement","check","runModifiers","ends","cur","enabled","isDestroyed","positionFixed","flip","originalPlacement","position","isCreated","onUpdate","onCreate","isModifierEnabled","modifierName","getSupportedPropertyName","prefixes","upperProp","toCheck","willChange","disableEventListeners","removeOnDestroy","getWindow","attachToScrollParents","scrollParents","isBody","passive","setupEventListeners","updateBound","scrollElement","eventsEnabled","enableEventListeners","scheduleUpdate","isNumeric","setStyles","unit","isFirefox","isModifierRequired","requestingName","requestedName","requesting","isRequired","requested","validPlacements","placements","clockwise","basePlacement","shiftvariation","isVertical","shiftOffsets","useHeight","divider","splitRegex","ops","mergeWithPrevious","reduce","toValue","index2","parseOffset","transformProp","popperStyles","priority","escapeWithReference","opSide","arrowElement","sideCapitalized","altSide","arrowElementSize","center","popperMarginSide","popperBorderSide","sideValue","arrow","round","flipped","placementOpposite","flipOrder","behavior","step","refOffsets","overlapsRef","overflowsLeft","overflowsRight","overflowsTop","overflowsBottom","overflowsBoundaries","flippedVariationByRef","flipVariations","flippedVariationByContent","flipVariationsByContent","flippedVariation","getOppositeVariation","subtractLength","bound","legacyGpuAccelerationOption","gpuAcceleration","offsetParentRect","shouldRound","noRound","referenceWidth","popperWidth","isVariation","horizontalToInteger","verticalToInteger","getRoundedOffsets","devicePixelRatio","prefixedProperty","invertTop","invertLeft","arrowStyles","modifierOptions","Popper","requestAnimationFrame","debounce","Defaults","jquery","onLoad","Utils","global","PopperUtils","defaultFindMatch","textContent","inputElem","choices","menuOptions","defaultMenuOptions","triggerElem","ctl","ArrowDown","ArrowUp","stretchToSelector","setPopupToFunc","Autocomplete","menuItem","onClick","BaseMenu","_rows","_menuContent","focusOnSelected","findMatch","getTriggerElem","_lastAsTyped","nextIndex","_updateValue","prevIndex","Enter$","Tab$","Escape$","_selectRow","inputVal","setSelected","_selected","menu","menuElem","baseElem","Menu","inputMenuElem","InputMenu","createFn","cssMenuItem","cssMenuItemLink","tabindex","attach","showDelay","computeStyle","_focusOnSelected","stretchContainer","closest","parentSelectorToMark","setOpenClass","_allowNothingSelected","allowNothingSelected","cssMenuWrap","cssMenu","class","menuCssClass","menuEl","containerElem","minWidth","stretchMenuToContainer","_onMouseOver","_onMouseLeave","isSubMenu","ArrowLeft","findAncestorChild","isSelectable","isInSelectableItem","Escape","onRemove","_getNextSelectable","previousElementSibling","lastElementChild","bool","_findTargetItem","startElem","getNext","firstElem","_getNext","selectOnOpen","hasAttribute","submenu","PopupControl","popupOptions","preventOverflow","controller","ArrowRight","cssMenuDivider","openFunc","attachElem","openResult","noop","domCreator","openCtl","_holder","_open","_close","_showDelay","_hideDelay","_openTimer","_closeTimer","hideDelay","openOptions","OpenPopupHelper","reopen","defaultTo","delayMs","isOpen","helper","_triggerElem","_ctl","popupContent","popperOptions","_popper","evt","renderOption","keyState","SelectKeyState","_op","getOptionFull","defaultLabel","selectBtn","cssSelectBtn","buttonCssClass","cssBtnText","sel","buttonArrow","isDisabled","selectOptions","selectLabelOnOpen","Select","_selectRows","_selectOptions","_keyState","defaultToNext","_itemArray","_term","_cycleIndex","_timeoutId","char","_item","defaultTooltipOptions","tooltipElem","setPopupToCreateDom","title","theme","defaultTooltipTheme","tooltip","role","cssTooltipArrow","_createDom","cssTooltip","cssDarkTooltip","darkTooltipTheme","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","draining","queueIndex","cleanUpNextTick","drainQueue","run","marker","runClearTimeout","Item","nextTick","env","argv","versions","off","removeListener","removeAllListeners","prependListener","prependOnceListener","listeners","cwd","chdir","umask","__spreadArrays","il","jl","Checker","createCheckers","types_1","util_1","types_2","TArray","TEnumType","TEnumLiteral","TFunc","TIface","TLiteral","TName","TOptional","TParam","TParamList","TProp","TTuple","TType","TUnion","TIntersection","enumlit","enumtype","iface","lit","param","tuple","union","intersection","rest","indexKey","BasicType","util_2","VError","typeSuite","_i","fullSuite","basicTypes","checkers","_a","typeSuite_1","suite_1","_b","_c","suite","ttype","_path","checkerPlain","getChecker","checkerStrict","setReportedPath","_doCheck","NoopContext","validate","_doValidate","strictCheck","strictTest","strictValidate","getProp","methodArgs","methodName","tfunc","_getMethod","paramList","methodResult","getArgs","getType","checkerFunc","detailCtx","DetailContext","getError","getErrorDetails","extendStatics","__extends","__","RestType","parseSpec","typeSpec","getNamedType","_super","_this","_failMsg","strict","allowedProps","_checkerBeingBuilt","ctx","_getChecker","checker","fail","elementTypeName","getTypeName","itemChecker","_start","arrType","ttypes","_restType","itemCheckers","restChecker_1","names","otherTypes","ur","unionResolver","createContext","resolveUnion","every","fork","completeFork","failed","members","validValues","enumName","bases","makeIfaceProp","makeIfaceProps","indexType","propSet","baseCheckers","propCheckers","indexTypeChecker","testCtx","isPropRequired","isOpt","name_1","resultSpec","isParamRequired","any","void","null","never","getIsNativeChecker","nativeToString","_loop_1","array_1","Int8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","_failed","relPath","score","_propNames","_messages","_failedForks","_currentFork","_score","DetailUnionResolver","best","_d","contexts","fullMessage","errorLines","detail","details","forkErrors","maxForks","rootMessage","nestedErrors","nestedLines","first","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","getter","globalThis","nmd","BillingPage","_appModel","gristOverrides","hooks","iframeAttributes","credentialless","fetch","fetchHook","baseURI","bootstrapGristPrefix","urlTweaks","postEncode","fakeUrl","at","URL","queryStr","searchParams","preDecode","extra","singlePage","ApiError","tbind","boundArgs","_numPendingRequests","propertyKey","descriptor","originalMethod","countPendingRequest","requestJson","newFormData","_headers","_extraParameters","extraParameters","defaultHeaders","getHeaders","resp","throwApiError","credentials","BaseAPI","errorDetails","userError","memos","countRequest","StringUnion","freeze","valueSet","expected","unionNamespace","checkAll","BillingSubPage","BillingTask","BillingAPIImpl","_homeUrl","_url","planName","settings","delta","orgUrl","planType","checkoutUrl","tier","planId","active","addCurrentOrgToPath","OpenDocMode","ThemePrefs","ThemeAppearance","ThemeNameOrColors","ThemeName","Theme","ThemeColors","ThemePrefsChecker","ThemeAppearanceChecker","ThemeNameChecker","SpecialDocPage","HomePage","WelcomePage","AccountPage","ActivationPage","LoginPage","SupportGristPage","InterfaceStyle","commonUrls","isClient","gristConfig","helpCenterUrl","GRIST_HELP_CENTER","getHelpCenterUrl","parseSubdomain","org","base","subdomainRegex","getKnownOrg","singleOrg","GRIST_SINGLE_ORG","extractOrgParts","reqHost","reqPath","orgFromHost","pathOnly","GRIST_ORG_IN_PATH","isOrgInPathOnly","getOrgFromHost","part","sanitizePathTail","orgFromPath","mismatch","subdomain","pathRemainder","skipIfInDomain","page","srcParts","pageHasHome","homeUrl","fetchFromHome","baseUrl","_typeof","iterator","_classCallCheck","Constructor","_defineProperties","_createClass","protoProps","staticProps","_assertThisInitialized","ReferenceError","_setPrototypeOf","_inherits","subClass","superClass","_possibleConstructorReturn","_getPrototypeOf","_defineProperty","_arrayLikeToArray","arr2","ownKeys","enumerableOnly","symbols","sym","getOwnPropertyDescriptor","_objectSpread","getOwnPropertyDescriptors","defineProperties","consoleLogger","baseLogger","Logger","concreteLogger","logger","debug","_len","_key","forward","_len2","_key2","_len3","_key3","_len4","_key4","lvl","debugOnly","moduleName","EventEmitter","observers","cloned","observer","_cloned","rej","makeString","getLastOfPath","Empty","cleanKey","canNotTraverseDeeper","setPath","_getLastOfPath","getPath","_getLastOfPath3","getPathWithDefaults","defaultData","overwrite","regexEscape","_entityMap","userAgentData","ownKeys$1","_objectSpread$1","deepFind","keySeparator","current","mix","joinedPath","ResourceStore","_EventEmitter","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","_isNativeReflectConstruct","Super","NewTarget","ns","defaultNS","ignoreJSONStructure","lng","silent","addNamespaces","resources","addResource","deep","pack","hasResourceBundle","removeNamespaces","getResource","compatibilityAPI","getDataByLanguage","postProcessor","processors","addPostProcessor","handle","translator","processor","ownKeys$2","_objectSpread$2","checkedLoadedFor","Translator","_isNativeReflectConstruct$1","services","language","interpolation","resolved","nsSeparator","namespaces","wouldCheckForNsInKey","seemsNaturalLanguage","userDefinedKeySeparator","userDefinedNsSeparator","possibleChars","ki","looksLikeObjectPath","interpolator","nestingRegexp","lastKey","_this2","overloadTranslationOptionHandler","returnDetails","_this$extractFromKey","extractFromKey","namespace","appendNamespaceToCIMode","resUsedKey","usedKey","resExactUsedKey","exactUsedKey","resType","noObject","joinArrays","handleAsObjectInI18nFormat","i18nFormat","handleAsObject","returnObjects","returnedObjectHandler","resTypeIsArray","newKeyToUse","deepKey","translate","extendTranslation","usedDefault","needsPluralHandling","hasDefaultValue","defaultValueSuffix","pluralResolver","getSuffix","isValidLookup","missingKeyNoValueFallbackToKey","resForMissing","updateMissing","fk","lngs","fallbackLngs","languageUtils","getFallbackCodes","fallbackLng","saveMissingTo","toResolveHierarchy","specificDefaultValue","defaultForMissing","missingKeyHandler","backendConnector","saveMissing","saveMissingPlurals","getSuffixes","appendNamespaceToMissingKey","parseMissingKeyHandler","_this3","defaultVariables","usedLng","usedNS","skipInterpolation","nestBef","skipOnVariables","interpolate","nest","postProcess","postProcessorNames","applyPostProcessor","postProcessPassResolved","i18nResolved","_this4","extracted","fallbackNS","needsZeroSuffixLookup","ordinal","shouldUseIntlApi","needsContextHandling","codes","hasLoadedNamespace","possibleKey","finalKeys","addLookupKeys","pluralSuffix","zeroSuffix","pluralSeparator","contextKey","contextSeparator","returnNull","returnEmptyString","resourceStore","LanguageUtil","supportedLngs","formatLanguageCode","specialCases","lowerCaseLng","cleanCode","load","nonExplicitSupportedLngs","getLanguagePartFromCode","cleanedLng","isSupportedCode","lngOnly","supportedLng","fallbacks","getScriptPartFromCode","fallbackCode","fallbackCodes","addCode","sets","nr","_rulesPluralsTypes","deprecatedJsonVersions","suffixesOrder","zero","two","few","many","createRules","rules","numbers","plurals","PluralResolver","compatibilityJSON","PluralRules","_unused","rule","getRule","resolvedOptions","pluralCategories","pluralCategory1","pluralCategory2","pluralCategory","prepend","select","getSuffixRetroCompatible","noAbs","simplifyPluralSuffix","returnSuffix","ownKeys$3","_objectSpread$3","Interpolator","format","escapeValue","iOpts","escape","useRawValueToEscape","prefixEscaped","suffixEscaped","formatSeparator","unescapePrefix","unescapeSuffix","nestingPrefix","nestingPrefixEscaped","nestingSuffix","nestingSuffixEscaped","nestingOptionsSeparator","maxReplaces","alwaysFormat","resetRegExp","regexpStr","regexpUnescapeStr","regexpUnescape","nestingRegexpStr","replaces","regexSafe","handleFormat","interpolationkey","missingInterpolationHandler","regex","safeValue","todo","matchedVar","temp","clonedOptions","handleHasOptions","inheritedOptions","optionsString","formatters","doReduce","ownKeys$4","_objectSpread$4","Formatter","formats","NumberFormat","currency","datetime","DateTimeFormat","relativetime","RelativeTimeFormat","ListFormat","_format","mem","_parseFormatStr","formatStr","formatName","formatOptions","optStr","_opt$split2","iter","minLen","parseFormatStr","formatted","valOptions","formatParams","locale","ownKeys$5","_objectSpread$5","Connector","_isNativeReflectConstruct$2","backend","store","waitingReads","maxParallelReads","readingCalls","maxRetries","retryTimeout","languages","toLoad","pending","toLoadLanguages","toLoadNamespaces","hasAllNamespaces","reload","pendingCount","errors","addResourceBundle","_getLastOfPath2","pushPath","removePending","loadedKeys","fcName","tried","queueLoad","loadOne","prepareLoading","_this5","fallbackValue","isUpdate","initImmediate","preload","partialBundledLanguages","tDescription","transformOptions","ownKeys$6","_objectSpread$6","bindMemberFunctions","inst","getOwnPropertyNames","I18n","_isNativeReflectConstruct$3","modules","external","isInitialized","isClone","defOpts","createClassOnDemand","ClassOrObject","formatter","lu","languageDetector","detection","storeApi","_this2$store","storeApiChained","_this2$store2","finish","initializedStoreOnce","changeLanguage","usedCallback","append","resolvedLanguage","setResolvedLanguage","li","lngInLngs","hasLanguageSomeTranslations","isLanguageChangingTo","setLngProps","setLng","getBestMatchFromCodes","cacheUserLanguage","loadResources","detect","keyPrefix","fixedT","resultKey","_this$translator","_this$translator2","exists","_this6","lastLng","loadNotPending","loadState","precheck","preResult","_this7","preloaded","newLngs","_this8","mergedOptions","clone","membersToCopy","reloadResources","getFixedT","setDefaultNamespace","loadNamespaces","loadLanguages","domT","tImpl","domElements","_","isLikeDomContents","propName","domElement","makeT","scope","scopedInstance","scopedResolver","cloneInstance","fixedResolver","_args","VERSION","ArrayProto","ObjProto","SymbolProto","supportsArrayBuffer","supportsDataView","nativeIsArray","nativeIsView","_isNaN","_isFinite","hasEnumBug","nonEnumerableProps","MAX_ARRAY_INDEX","restArguments","isNull","isBoolean","isElement","tagTester","nodelist","hasStringTagBug","isDataView","getInt8","createSizePropertyCheck","getSizeProperty","collection","sizeProperty","shallowProperty","typedArrayPattern","collectNonEnumProps","emulatedSet","nonEnumIdx","isMatch","_keys","_wrapped","toBufferView","bufferSource","tagDataView","aStack","bStack","deepEq","areArrays","aCtor","bCtor","isEqual","allKeys","ie11fingerprint","methods","weakMapMethods","forEachName","commonInit","mapTail","mapMethods","setMethods","invert","functions","extendOwn","tap","toPath","deepGet","matcher","optimizeCb","argCount","accumulator","mapObject","results","currentKey","propertyOf","times","accum","createEscaper","escaper","testRegexp","replaceRegexp","evaluate","noMatch","escapes","escapeRegExp","escapeChar","bareIdentifier","oldSettings","render","argument","variable","fallback","idCounter","uniqueId","_chain","executeBound","sourceFunc","boundFunc","callingContext","partial","placeholder","callArgs","hasher","address","previous","later","throttled","_now","immediate","passed","wrap","wrapper","compose","before","memo","findKey","createPredicateIndexFinder","low","high","createIndexFinder","predicateFind","findLastIndex","findWhere","each","createReduce","reducer","fromIndex","contextPath","pluck","where","lastComputed","sample","rand","shuffle","sortBy","criteria","group","partition","pass","reStrSymbol","keyInObj","compact","otherArrays","difference","uniq","isSorted","arrays","argsLength","unzip","stop","ceil","chunk","chainResult","mixin","allCommands","commandName","cmd","getDesc","RefCountValue","disposeTimeout","_focusLayerManager","_map","_createKey","_disposeKey","_gracePeriodMs","gracePeriodMs","rcValue","_useKey","_releaseKey","_doDisposeKey","ms","unsetTimeout","FocusLayerManager","_focusLayers","grabFocus","onOff","addRemove","setBackgroundCapture","layer","getCurrentLayer","onDefaultBlur","defaultFocusElem","preventScroll","_doGrabFocus","allowFocus","maybeDone","disconnect","childList","watchElementForBlur","onDefaultFocus","_isDefaultFocused","_onDefaultFocus","_onDefaultBlur","pauseMousetrap","manager","addLayer","removeLayer","_notifier","UserError","getAppErrors","getFullAppErrors","reportWarning","msg","logError","createUserMessage","reportMessage","_storage","_sessionStorage","unhelpfulErrors","filename","lineno","isUnhelpful","quantity","actions","tips","tip","createAppError","docId","gristDocPageModel","currentDocId","testStorage","setItem","getItem","removeItem","createInMemoryStorage","storageName","testStr","storage","ok","unsavedChanges","_changes","haveUnsavedChanges","unsaved","UrlState","_window","_stateImpl","_getState","_urlStateLoadPage","urlState","prevState","newState","_mergeState","newUrl","encodeUrl","origin","avoidReload","needPageLoad","delayPushUrl","history","replaceState","pushState","decodeUrl","fullState","makeUrl","pushUrl","updateState","_urlState","UrlStateImpl","baseLocation","orgInPath","newOrg","currentHost","hostType","pluginUrl","baseDomain","getHostType","getOrgUrlInfo","api","ws","doc","slug","mode","docPage","homePage","account","billing","activation","login","welcome","supportGrist","queryParams","linkParameters","hashParts","rowId","popup","partValue","partKey","rickRow","welcomeTour","docTour","manageUsers","createTeam","tweaks","sp","urlId","snapshotId","bareParts","trunkId","forkId","forkUserId","parseUrlId","billingPlan","billingTask","embed","themeSyncWithOs","appearance","themeAppearance","themeName","hashMap","link","ch","keepState","orgReload","docReload","accountReload","billingReload","activationReload","welcomeReload","linkKeysReload","signupReload","supportGristReload","errPage","saveChanges","cssFieldLinkBody","CustomProp","colors","lightGrey","mediumGrey","mediumGreyOpaque","darkGrey","light","dark","darkText","darkBg","slate","lightGreen","darkGreen","darkerGreen","lighterGreen","lighterBlue","lightBlue","orange","cursor","selection","selectionOpaque","selectionDarkerOpaque","inactiveCursor","hover","warning","warningBg","backdrop","vars","fontFamily","fontFamilyData","xxsmallFontSize","xsmallFontSize","smallFontSize","mediumFontSize","introFontSize","largeFontSize","xlargeFontSize","xxlargeFontSize","xxxlargeFontSize","controlFontSize","smallControlFontSize","bigControlFontSize","headerControlFontSize","bigControlTextWeight","headerControlTextWeight","labelTextSize","labelTextBg","labelActiveBg","controlMargin","controlPadding","tightPadding","loosePadding","primaryBg","primaryBgHover","primaryFg","controlBg","controlFg","controlFgHover","controlBorder","controlBorderRadius","logoBg","logoSize","toastBg","menuZIndex","modalZIndex","onboardingBackdropZIndex","onboardingPopupZIndex","floatingPopupZIndex","tutorialModalZIndex","pricingModalZIndex","floatingPopupMenuZIndex","notificationZIndex","browserCheckZIndex","tooltipZIndex","cssColors","decl","cssVars","cssFontParams","cssVarsOnly","cssBodyVars","cssBody","cssRoot","cssRootVars","mediaSmall","isNarrowScreen","_isNarrowScreenObs","_prefersDarkModeObs","isNarrowScreenObs","cssButton","domArgs","cssButtonLink","large","primary","textButton","cssLabel","cssLabelText","cssInlineRelative","cssReversedLabel","iconDiv","rotate360","flash","cssMenuElem","menuItemStyle","cssModalTooltip","cssFadeIn","cssFadeOut","cssFadeInFromTop","sideSelectorChunk","fadeInFromSide","startPosition","cssArrowContainer","cssTheme","cssButtons","cssFadeInFromBottom","cssFadeInFromLeft","cssFadeInFromRight","cssBehavioralPromptModal","cssBehavioralPromptContainer","cssBehavioralPromptHeader","cssBehavioralPromptBody","cssHeaderIconAndText","cssHeaderText","cssDismissPromptButton","cssBehavioralPromptTitle","cssSkipTipsCheckbox","cssCheckbox","field","cssSkipTipsCheckboxLabel","getStorageObs","localStorageObs","makePrefFunctions","prefsTypeName","getPrefsObs","appModel","currentValidUser","prefs","currentOrg","prefsObs","newPrefs","updateOrg","userId","currentUser","jsonPrefsObs","getPrefObs","prefName","getUserOrgPrefsObs","getUserOrgPrefObs","getUserPrefsObs","getUserPrefObs","ShortcutKeyContent","ShortcutKey","cssLink","parentClass","cssTooltipContent","cssBoldText","cssItalicizedText","cssIcon","GristBehavioralPrompts","referenceColumns","relational","deploymentTypes","referenceColumnsConfig","entire","rawDataPage","accessRules","filterButtons","nestedFiltering","pageWidgetPicker","pageWidgetPickerSelectBy","editCardLayout","EyeHideIcon","addNew","shortcut","customURL","BehavioralPrompt","DismissedPopup","BehavioralPromptsManager","_isDisabled","_prefs","userPrefsObs","dontShowTips","dismissedTips","_dismissedTips","_queuedTips","refElement","prompt","_queueTip","_shouldQueueTip","_showTip","hideArrow","hideDontShowTips","markAsSeen","onClose","popupOpen","showBehavioralPrompt","_dontShowTips","_markAsSeen","_showNextQueuedTip","nextTip","newDismissedTips","showOnMobile","forceShow","hasSeenTip","deploymentType","connectState","_timers","_setState","timeToRecentlyDisconnected","timeToReallyDisconnected","ConnectStateManager","InactivityTimer","_delay","_counter","_enabled","ping","_clearTimeout","_timeout","_setTimeout","_beginActivity","_endActivity","_onTimeoutTriggered","pad","timeFormatKeys","date","getHours","getMinutes","getSeconds","getDate","getMonth","getFullYear","getMilliseconds","timeFormatHelper","timeFormat","withoutDelay","fadeDelay","Expirable","Notification","_opts","timestamp","inDropdown","badgeCounter","inToast","expireSec","canUserClose","expireTimer","expire","Progress","progress","expireOnComplete","BetterMultiHolder","Notifier","_itemsHolder","_toasts","_dropdownItems","_progressItems","_keyedItems","_connectStateManager","_connectState","_disconnectMsg","getDisconnectMessage","_appErrorList","_appErrorDropdownItem","_appErrorToast","_slowNotificationToast","_slowNotificationInactivityTimer","createNotification","toasts","dropdownItems","progressItems","disconnectMsg","_createAppErrorItem","appErr","_addNotification","isConnected","setConnected","optTimeout","disableUntilFinish","appErrors","removeIdx","basePlacements","viewport","getWindowScroll","win","pageXOffset","pageYOffset","isHTMLElement","getNodeName","getDocumentElement","getWindowScrollBarX","assignedSlot","_getComputedStyle","listScrollParents","visualViewport","updatedList","isTableElement","getTrueOffsetParent","cssValue","rectToClientRect","getClientRectFromMixedType","clippingParent","getViewportRect","winScroll","documentRect","elementOrVirtualElement","scroll","clientLeft","clientTop","getCompositeRect","getDocumentRect","detectOverflow","_options","_options$placement","_options$boundary","boundary","_options$rootBoundary","rootBoundary","_options$elementConte","elementContext","_options$altBoundary","altBoundary","_options$padding","paddingObject","mergePaddingObject","expandToHashMap","altContext","referenceElement","elements","clippingClientRect","mainClippingParents","clippingParents","clipperElement","isShadow","getRootNode","isSameNode","getClippingParents","firstClippingParent","clippingRect","accRect","decorations","borders","borderRightWidth","borderBottomWidth","getBorders","winScrollBarX","getDecorations","getClippingRect","contextElement","referenceClientRect","_ref","getBasePlacement","getVariation","commonX","commonY","mainAxis","getMainAxisFromPlacement","computeOffsets","strategy","popperClientRect","elementClientRect","overflowOffsets","offsetData","modifiersData","multiply","phase","requiresIfExists","_ref2","_state$rects$popper","widthProp","heightProp","cssTokenField","cssToken","cssInputWrapper","cssTokenInput","tokenFieldStyles","cssDeleteButton","cssDeleteIcon","InstallAPIImpl","TelemetryModelImpl","_installAPI","getHomeUrl","getInstallPrefs","telemetry","updateInstallPrefs","fetchTelemetryPrefs","SupportGristNudge","_telemetryModel","_shouldShowCardOrButton","_buttonState","_currentPage","_isClosed","_buildButton","_buildCard","dismissedPopup","_markAsDismissed","dismissedPopups","isManager","telemetryLevel","cssContributeButton","cssButtonIconAndText","cssContributeButtonCloseButton","_dismissAndClose","cssCard","_buildSupportGristCardContent","_buildOptedInCardContent","cssCloseButton","cssLeftAlignedHeader","cssParagraph","helpCenterLink","supportGristLink","cssFullWidthButton","_optInToTelemetry","cssCenteredFlex","cssSparks","cssCenterAlignedHeader","cssPrimaryButton","updateTelemetryPrefs","cssHeader","PERSONAL_LEGACY_PLAN","OWNER","THEMES","GristLight","GristDark","UserAPIImpl","merged","workspaceId","orgId","onlyFeatured","updateDoc","workspace","allowGoogleLogin","isConsultant","docWorkerInfo","docWorkerUrl","selfPrefix","getDocWorkerUrl","docUrl","_urlWithOrg","getWorker","DocWorkerAPIImpl","DocAPIImpl","tableName","getDocAPI","getRows","material","formData","timezone","requestAxios","defaultHeadersWithoutContentType","uploadId","browserSettings","tableId","_getRecords","records","changes","additions","removals","raw","snapshotIds","webhook","fields","webhookId","unsubscribeKey","recoveryMode","remoteDocId","leftHash","rightHash","removeHistory","endpoint","filters","TopAppModelImpl","newUserAPIImpl","notifier","currentSubdomain","appObs","orgs","users","plugins","isSingleOrg","productFlavor","themeOrg","getFlavor","_gristConfig","initialize","fetchUsersAndOrgs","_doInitialize","app","orgError","AppModelImpl","isRunningUnderElectron","getSessionAll","user","getSessionActive","billingAccount","topAppModel","anonymous","currentOrgName","getOrgName","currentOrgUsage","lastVisitedOrgDomain","currentProduct","currentFeatures","features","isPersonal","isTeamSite","isLegacySite","isTemplatesSite","templateOrg","isTemplatesOrg","themePrefs","syncWithOS","currentTheme","_getCurrentThemeObs","dismissedWelcomePopups","pageType","_use","needsOrg","behavioralPromptsManager","supportGristNudge","_applyTheme","_recordSignUpIfIsNewUser","showNewSiteModal","resetDismissedPopups","_updateLastVisitedOrgDomain","selectedPlan","isSupport","resource","access","isOwner","usage","getOrgUsageSummary","seenIdsObs","itemId","seenIds","markAsUnSeen","availableOrgs","recordSignUpEvent","tagManagerId","dataLayer","query","matchMedia","_lastValue","_isPaused","pause","shouldPause","createPausableObs","prefersDarkModeObs","prefersDarkMode","urlParams","nameOrColors","enableCustomCss","themeColors","properties","getCssScrollbarProperties","getCssThemeBackgroundProperties","getOrCreateStyleElement","attachCssThemeVars","Level","TelemetryContracts","apiUsage","minimumTelemetryLevel","retentionPeriod","metadataContracts","dataType","assistantOpen","docIdDigest","conversationId","altSessionId","assistantSend","siteId","siteType","assistantReceive","suggestedFormula","assistantSave","newFormula","oldFormula","assistantCancel","assistantClearConversation","assistantClose","suggestionApplied","conversationLength","conversationHistoryLength","beaconOpen","beaconArticleViewed","articleId","beaconEmailSent","beaconSearch","searchQuery","documentForked","forkIdDigest","forkDocIdDigest","trunkIdDigest","isTemplate","lastActivity","documentOpened","isPublic","isSnapshot","lastUpdated","documentUsage","triggeredBy","rowCount","dataSizeBytes","attachmentsSize","numAccessRules","numUserAttributes","numAttachments","attachmentTypes","numCharts","chartTypes","numLinkedCharts","numLinkedWidgets","numColumns","numColumnsWithConditionalFormatting","numFormulaColumns","numTriggerFormulaColumns","numSummaryFormulaColumns","numFieldsWithConditionalFormatting","numTables","numOnDemandTables","numTablesWithConditionalFormatting","numSummaryTables","numCustomWidgets","customWidgetIds","processMonitor","heapUsedMB","heapTotalMB","cpuAverage","intervalMs","sendingWebhooks","numEvents","signupFirstVisit","signupVerified","isAnonymousTemplateSignup","templateId","siteMembership","numOwners","numEditors","numViewers","siteUsage","inGoodStanding","stripePlanId","numDocs","numWorkspaces","numMembers","earliestDocCreatedAt","tutorialProgressChanged","tutorialForkIdDigest","tutorialTrunkIdDigest","lastSlideIndex","numSlides","percentComplete","tutorialRestarted","watchedVideoTour","watchTimeSeconds","logTelemetryEvent","metadata","Beacon","beaconId","helpScoutBeaconId","_beacon","initBeacon","readyQueue","lastOpenType","lastRoute","fixBeaconBaseHref","iframe","iframeDoc","contentDocument","includeAppErrors","userObj","onOpen","openType","route","skipNav","messages","subject","messaging","contactForm","showSubject","article","full","_beaconOpen","company","avatar","picture","signature","helpScoutSignature","getBeaconUserObj","notificationIcon","iconName","cssToastIcon","buildSnackbarDom","getStateForUI","cssSnackbarWrapper","cssToastWrapper","cssToastBody","cssToastText","cssProgressBarSize","cssProgressBarWrapper","cssProgressBarStatus","buildProgressDom","toast","iconElement","hasLeftIcon","cssToastTitle","cssToastActions","cssToastAction","showUpgradeModal","buildAction","cssToastMemos","cssToastMemo","cssToastMemoIcon","cssToastClose","buildNotificationDom","cssDropdownContent","viewportEnabled","defValue","storedNegation","getStorageBoolObs","localStorageBoolObs","buildPage","doReportError","koUtil","setComputedErrorHandler","gristNotify","setUpErrorHandling","varsOnly","customTheme","wideLogo","bodyClassName","interfaceStyle","attachCssRootVars","viewportContent","userLocale","detected","supportedList","supported","detectCurrentLang","loadPath","pathsToLoad","lang","resourceUrl","reportError","setupLocale","gristApp","testNumPendingApiRequests","numPendingRequests","setupPage"],"sourceRoot":""}