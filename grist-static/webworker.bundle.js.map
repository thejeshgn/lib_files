{"version":3,"file":"webworker.bundle.js","mappings":"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CJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJ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","sources":["./app/common/gutil.ts?","./app/plugin/gutil.ts?","./node_modules/moment/locale/ sync \\b\\B?","../src/parsers/Token.ts?","../src/parsers/Parser.ts?","../src/parsers/index.ts?","../src/refiners/index.ts?","../src/refiners/TimeFormatRefiner.ts?","../src/refiners/StandardFormatParsersRefiner.ts?","../src/assigners/YearFormatTokenAssigner.ts?","../src/assigners/MonthFormatTokenAssigner.ts?","../src/assigners/DayOfMonthFormatTokenAssigner.ts?","../src/assigners/DelimiterFormatTokenAssigner.ts?","../src/assigners/MinuteFormatTokenAssigner.ts?","../src/assigners/SecondFormatTokenAssigner.ts?","../src/assigners/MillisecondFormatTokenAssigner.ts?","../src/assigners/TimezoneFormatTokenAssigner.ts?","../src/assigners/DayOfYearFormatTokenAssigner.ts?","../src/assigners/EscapeTextFormatTokenAssigner.ts?","../src/assigners/ISODayOfWeekFormatTokenAssigner.ts?","../src/assigners/ISOWeekOfYearFormatTokenAssigner.ts?","../src/assigners/TwentyFourHourFormatTokenAssigner.ts?","../src/assigners/TwelveHourFormatTokenAssigner.ts?","../src/assigners/DayOfWeekFormatTokenAssigner.ts?","../src/assigners/MeridiemFormatTokenAssigner.ts?","../src/assigners/index.ts?","../src/Guesser.ts?","../src/index.ts?","./node_modules/grainjs/lib/emit.ts?","./node_modules/grainjs/lib/dispose.ts?","./node_modules/grainjs/lib/_computed_queue.ts?","./node_modules/grainjs/lib/PriorityQueue.ts?","./node_modules/grainjs/lib/observable.ts?","./node_modules/grainjs/lib/domDispose.ts?","./node_modules/grainjs/lib/kowrap.ts?","./node_modules/grainjs/lib/subscribe.ts?","./node_modules/grainjs/lib/computed.ts?","./node_modules/grainjs/lib/binding.ts?","./node_modules/grainjs/lib/browserGlobals.ts?","./node_modules/grainjs/lib/domMethods.ts?","./node_modules/grainjs/lib/domImpl.ts?","./node_modules/grainjs/lib/domComputed.ts?","./node_modules/grainjs/lib/domComponent.ts?","./node_modules/grainjs/lib/obsArray.ts?","./node_modules/grainjs/lib/domForEach.ts?","./node_modules/grainjs/lib/domevent.ts?","./node_modules/grainjs/lib/dom.ts?","./node_modules/grainjs/lib/styled.ts?","./node_modules/locale-currency/index.js?","./node_modules/locale-currency/map.js?","./node_modules/lodash/_DataView.js?","./node_modules/lodash/_Hash.js?","./node_modules/lodash/_ListCache.js?","./node_modules/lodash/_Map.js?","./node_modules/lodash/_MapCache.js?","./node_modules/lodash/_Promise.js?","./node_modules/lodash/_Set.js?","./node_modules/lodash/_SetCache.js?","./node_modules/lodash/_Stack.js?","./node_modules/lodash/_Symbol.js?","./node_modules/lodash/_Uint8Array.js?","./node_modules/lodash/_WeakMap.js?","./node_modules/lodash/_arrayAggregator.js?","./node_modules/lodash/_arrayFilter.js?","./node_modules/lodash/_arrayLikeKeys.js?","./node_modules/lodash/_arrayMap.js?","./node_modules/lodash/_arrayPush.js?","./node_modules/lodash/_arraySome.js?","./node_modules/lodash/_assocIndexOf.js?","./node_modules/lodash/_baseAggregator.js?","./node_modules/lodash/_baseAssignValue.js?","./node_modules/lodash/_baseEach.js?","./node_modules/lodash/_baseFlatten.js?","./node_modules/lodash/_baseFor.js?","./node_modules/lodash/_baseForOwn.js?","./node_modules/lodash/_baseGet.js?","./node_modules/lodash/_baseGetAllKeys.js?","./node_modules/lodash/_baseGetTag.js?","./node_modules/lodash/_baseHasIn.js?","./node_modules/lodash/_baseIsArguments.js?","./node_modules/lodash/_baseIsEqual.js?","./node_modules/lodash/_baseIsEqualDeep.js?","./node_modules/lodash/_baseIsMatch.js?","./node_modules/lodash/_baseIsNative.js?","./node_modules/lodash/_baseIsTypedArray.js?","./node_modules/lodash/_baseIteratee.js?","./node_modules/lodash/_baseKeys.js?","./node_modules/lodash/_baseMap.js?","./node_modules/lodash/_baseMatches.js?","./node_modules/lodash/_baseMatchesProperty.js?","./node_modules/lodash/_baseProperty.js?","./node_modules/lodash/_basePropertyDeep.js?","./node_modules/lodash/_baseTimes.js?","./node_modules/lodash/_baseToString.js?","./node_modules/lodash/_baseTrim.js?","./node_modules/lodash/_baseUnary.js?","./node_modules/lodash/_cacheHas.js?","./node_modules/lodash/_castFunction.js?","./node_modules/lodash/_castPath.js?","./node_modules/lodash/_coreJsData.js?","./node_modules/lodash/_createAggregator.js?","./node_modules/lodash/_createBaseEach.js?","./node_modules/lodash/_createBaseFor.js?","./node_modules/lodash/_defineProperty.js?","./node_modules/lodash/_equalArrays.js?","./node_modules/lodash/_equalByTag.js?","./node_modules/lodash/_equalObjects.js?","./node_modules/lodash/_freeGlobal.js?","./node_modules/lodash/_getAllKeys.js?","./node_modules/lodash/_getMapData.js?","./node_modules/lodash/_getMatchData.js?","./node_modules/lodash/_getNative.js?","./node_modules/lodash/_getPrototype.js?","./node_modules/lodash/_getRawTag.js?","./node_modules/lodash/_getSymbols.js?","./node_modules/lodash/_getTag.js?","./node_modules/lodash/_getValue.js?","./node_modules/lodash/_hasPath.js?","./node_modules/lodash/_hashClear.js?","./node_modules/lodash/_hashDelete.js?","./node_modules/lodash/_hashGet.js?","./node_modules/lodash/_hashHas.js?","./node_modules/lodash/_hashSet.js?","./node_modules/lodash/_isFlattenable.js?","./node_modules/lodash/_isIndex.js?","./node_modules/lodash/_isKey.js?","./node_modules/lodash/_isKeyable.js?","./node_modules/lodash/_isMasked.js?","./node_modules/lodash/_isPrototype.js?","./node_modules/lodash/_isStrictComparable.js?","./node_modules/lodash/_listCacheClear.js?","./node_modules/lodash/_listCacheDelete.js?","./node_modules/lodash/_listCacheGet.js?","./node_modules/lodash/_listCacheHas.js?","./node_modules/lodash/_listCacheSet.js?","./node_modules/lodash/_mapCacheClear.js?","./node_modules/lodash/_mapCacheDelete.js?","./node_modules/lodash/_mapCacheGet.js?","./node_modules/lodash/_mapCacheHas.js?","./node_modules/lodash/_mapCacheSet.js?","./node_modules/lodash/_mapToArray.js?","./node_modules/lodash/_matchesStrictComparable.js?","./node_modules/lodash/_memoizeCapped.js?","./node_modules/lodash/_nativeCreate.js?","./node_modules/lodash/_nativeKeys.js?","./node_modules/lodash/_nodeUtil.js?","./node_modules/lodash/_objectToString.js?","./node_modules/lodash/_overArg.js?","./node_modules/lodash/_root.js?","./node_modules/lodash/_setCacheAdd.js?","./node_modules/lodash/_setCacheHas.js?","./node_modules/lodash/_setToArray.js?","./node_modules/lodash/_stackClear.js?","./node_modules/lodash/_stackDelete.js?","./node_modules/lodash/_stackGet.js?","./node_modules/lodash/_stackHas.js?","./node_modules/lodash/_stackSet.js?","./node_modules/lodash/_stringToPath.js?","./node_modules/lodash/_toKey.js?","./node_modules/lodash/_toSource.js?","./node_modules/lodash/_trimmedEndIndex.js?","./node_modules/lodash/constant.js?","./node_modules/lodash/eq.js?","./node_modules/lodash/escapeRegExp.js?","./node_modules/lodash/flatMap.js?","./node_modules/lodash/fromPairs.js?","./node_modules/lodash/get.js?","./node_modules/lodash/groupBy.js?","./node_modules/lodash/hasIn.js?","./node_modules/lodash/identity.js?","./node_modules/lodash/isArguments.js?","./node_modules/lodash/isArray.js?","./node_modules/lodash/isArrayLike.js?","./node_modules/lodash/isBuffer.js?","./node_modules/lodash/isEqual.js?","./node_modules/lodash/isFunction.js?","./node_modules/lodash/isLength.js?","./node_modules/lodash/isObject.js?","./node_modules/lodash/isObjectLike.js?","./node_modules/lodash/isPlainObject.js?","./node_modules/lodash/isString.js?","./node_modules/lodash/isSymbol.js?","./node_modules/lodash/isTypedArray.js?","./node_modules/lodash/keys.js?","./node_modules/lodash/last.js?","./node_modules/lodash/map.js?","./node_modules/lodash/mapValues.js?","./node_modules/lodash/memoize.js?","./node_modules/lodash/property.js?","./node_modules/lodash/stubArray.js?","./node_modules/lodash/stubFalse.js?","./node_modules/lodash/times.js?","./node_modules/lodash/toFinite.js?","./node_modules/lodash/toInteger.js?","./node_modules/lodash/toNumber.js?","./node_modules/lodash/toString.js?","./node_modules/moment-timezone/index.js?","./node_modules/moment-timezone/moment-timezone.js?","./node_modules/moment/moment.js?","./node_modules/process/browser.js?","../src/js/node_modules/error-stack-parser/error-stack-parser.js?","../src/js/node_modules/stackframe/stackframe.js?","../src/js/compat.ts?","../src/js/node_modules/tslib/tslib.es6.js?","../src/js/nativefs.ts?","../src/js/module.ts?","../src/js/pyodide.ts?","../src/js/version.ts?","../src/js/pyodide.umd.ts?","webpack/bootstrap?","webpack/runtime/create fake namespace object?","webpack/runtime/compat get default export?","webpack/runtime/define property getters?","webpack/runtime/ensure chunk?","webpack/runtime/get javascript chunk filename?","webpack/runtime/global?","webpack/runtime/hasOwnProperty shorthand?","webpack/runtime/make namespace object?","webpack/runtime/node module decorator?","webpack/runtime/publicPath?","webpack/runtime/importScripts chunk loading?","./app/plugin/GristData.ts?","./app/common/gristTypes.ts?","./app/common/NumberFormat.ts?","./app/common/StringUnion.ts?","./app/common/NumberParse.ts?","./app/common/parseDate.ts?","./app/common/csvFormat.ts?","./app/plugin/objtypes.ts?","./app/common/ValueParser.ts?","./app/common/ValueFormatter.ts?","./app/common/isHiddenTable.ts?","./app/common/ValueGuesser.ts?","./app/common/schema.ts?","./app/common/ActionDispatcher.ts?","./app/common/DocActions.ts?","./app/common/TableData.ts?","./app/common/DocData.ts?","./app/common/ValueConverter.ts?","../ext/app/pipe/webworker.js?"],"sourcesContent":["import {delay} from 'app/common/delay';\nimport {BindableValue, DomElementMethod, IKnockoutReadObservable, ISubscribable, Listener, Observable,\n        subscribeElem, UseCB, UseCBOwner} from 'grainjs';\nimport {Observable as KoObservable} from 'knockout';\nimport identity = require('lodash/identity');\n\n// Some definitions have moved to be used by plugin API.\nexport {arrayRepeat} from 'app/plugin/gutil';\n\nexport const UP_TRIANGLE = '\\u25B2';\nexport const DOWN_TRIANGLE = '\\u25BC';\n\nconst EMAIL_RE = new RegExp(\"^\\\\w[\\\\w%+/='-]*(\\\\.[\\\\w%+/='-]+)*@([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z\" +\n  \"0-9])?\\\\.)+[A-Za-z]{2,6}$\", \"u\");\n\n// Returns whether str starts with prefix. (Note that this implementation avoids creating a new\n// string, and only checks a single location.)\nexport function startsWith(str: string, prefix: string): boolean {\n  return str.lastIndexOf(prefix, 0) === 0;\n}\n\n// Returns whether str ends with suffix.\nexport function endsWith(str: string, suffix: string): boolean {\n  return str.indexOf(suffix, str.length - suffix.length) !== -1;\n}\n\n// If str starts with prefix, removes it and returns what remains. Otherwise, returns null.\nexport function removePrefix(str: string, prefix: string): string|null {\n  return startsWith(str, prefix) ? str.slice(prefix.length) : null;\n}\n\n\n// If str ends with suffix, removes it and returns what remains. Otherwise, returns null.\nexport function removeSuffix(str: string, suffix: string): string|null {\n  return endsWith(str, suffix) ? str.slice(0, str.length - suffix.length) : null;\n}\n\nexport function removeTrailingSlash(str: string): string {\n  const result = removeSuffix(str, '/');\n  return result === null ? str : result;\n}\n\n// Expose <string>.padStart.  The version of node we use has it, but they typings\n// need the es2017 typescript target.  TODO: replace once typings in place.\nexport function padStart(str: string, targetLength: number, padString: string) {\n  return (str as any).padStart(targetLength, padString);\n}\n\n// Capitalizes every word in a string.\nexport function capitalize(str: string): string {\n  return str.replace(/\\b[a-z]/gi, c => c.toUpperCase());\n}\n\n// Capitalizes the first word in a string.\nexport function capitalizeFirstWord(str: string): string {\n  return str.replace(/\\b[a-z]/i, c => c.toUpperCase());\n}\n\n// Returns whether the string n represents a valid number.\n// http://stackoverflow.com/questions/18082/validate-numbers-in-javascript-isnumeric\nexport function isNumber(n: string): boolean {\n  // This wasn't right for a long time: isFinite() is key to failing on strings like \"5a\".\n  return !isNaN(parseFloat(n)) && isFinite(n as any);\n}\n\n/**\n * Returns a value clamped to the given min-max range.\n * @param {Number} value - some numeric value.\n * @param {Number} min - minimum value allowed.\n * @param {Number} max - maximum value allowed. Must have min <= max.\n * @returns {Number} - value restricted to the given range.\n */\nexport function clamp(value: number, min: number, max: number): number {\n  return Math.max(min, Math.min(max, value));\n}\n\n/**\n * Checks if ele is contained within the given bounds.\n * @param {Number} value\n * @param {Number} bound1 - does not have to be less than/equal to bound2\n * @param {Number} bound2\n * @returns {Boolean} - True/False\n */\nexport function between(value: number, bound1: number, bound2: number): boolean {\n  const lower = Math.min(bound1, bound2);\n  const upper = Math.max(bound1, bound2);\n  return lower <= value && value <= upper;\n}\n\n/**\n * Returns the positive modulo of x by n. (Javascript default allows negatives)\n */\nexport function mod(x: number, n: number): number {\n  return ((x % n) + n) % n;\n}\n\n/**\n * Returns a number that is n rounded down to the next nearest number divisible by m\n */\n\nexport function roundDownToMultiple(n: number, m: number): number {\n  return Math.floor(n / m) * m;\n}\n\n/**\n * Returns the first argument unless it's undefined, in which case returns the second one.\n */\nexport function undefDefault<T>(x: T|undefined, y: T): T {\n  return (x !== void 0) ? x : y;\n}\n\n// for typescript 4\n// type Undef<T> = T extends [infer A, ...infer B] ? undefined extends A ? NonNullable<A> | Undef<B> : A : unknown;\n\ntype Undef1<T> = T extends [infer A] ? A : unknown;\n\ntype Undef2<T> = T extends [infer A, infer B] ?\n    undefined extends A ? NonNullable<A> | Undef1<[B]> : A : Undef1<T>;\n\ntype Undef3<T> = T extends [infer A, infer B, infer C] ?\n    undefined extends A ? NonNullable<A> | Undef2<[B, C]> : A : Undef2<T>;\n\ntype Undef<T> = T extends [infer A, infer B, infer C, infer D] ?\n    undefined extends A ? NonNullable<A> | Undef3<[B, C, D]> : A : Undef3<T>;\n\n/*\n\nUndef<T> can detect correct type that will be returned as a first defined value:\n\nconst t1: number = undef(1, 1 as number | undefined);\nconst t1: number | undefined = undef(2 as number | undefined, 3 as number | undefined);\nconst t3: number = undef(3 as number | undefined, undefined, 4);\nconst t4: number = undef(1, '');\nconst t5: number = undef(1 as number | undefined, 4);\nconst t6: string = undef('1', 2);\nconst t7: string | number = undef(undefined, 2 as number | undefined, '3');\nconst t8: string = undef(undefined, undefined, '3');\nconst t9: string = undef(undefined, '2' as string | undefined, '3');\nconst ta: string | number | undefined = undef(undefined, '2' as string | undefined, 3 as number | undefined);\nconst tb: string | number = undef(undefined, '2' as string | undefined, 3 as number | undefined, 5);\n*/\n\n/**\n * Returns the first defined value from the list or unknown.\n * Use with typed result, so the typescript type checker can provide correct type.\n */\nexport function undef<T extends Array<any>>(...list: T): Undef<T> {\n  for(const value of list) {\n    if (value !== undefined) { return value; }\n  }\n  return undefined as any;\n}\n\n/**\n * Like undef, but each element of list is a method that is only called\n * if needed, and promises are supported. No fancy type inference though, sorry.\n */\nexport async function firstDefined<T>(...list: Array<() => Promise<T>>): Promise<T | undefined> {\n  for(const op of list) {\n    const value = await op();\n    if (value !== undefined) { return value; }\n  }\n  return undefined;\n}\n\n/**\n * Parses json and returns the result, or returns defaultVal if parsing fails.\n */\nexport function safeJsonParse(json: string, defaultVal: any): any {\n  try {\n    return json !== '' && json !== undefined ? JSON.parse(json) : defaultVal;\n  } catch (e) {\n    return defaultVal;\n  }\n}\n\n/**\n * Just like encodeURIComponent, but does not encode slashes. Slashes don't hurt to be included in\n * URL parameters, and look much friendlier not encoded.\n */\nexport function encodeQueryParam(str: string|number|undefined): string {\n  return encodeURIComponent(String(str === undefined ? null : str)).replace(/%2F/g, '/');\n}\n\n/**\n * Encode an object into a querystring (\"key=value&key2=value2\").\n * This is similar to JQuery's $.param, but only works on shallow objects.\n */\nexport function encodeQueryParams(obj: {[key: string]: string|number|undefined}): string {\n  return Object.keys(obj).map((k: string) => encodeQueryParam(k) + '=' + encodeQueryParam(obj[k])).join('&');\n}\n\n/**\n * Return a list of the words in the string, using the given separator string. At most\n * maxNumSplits splits are done, so the result will have at most maxNumSplits + 1 elements (this\n * is the main difference from how JS built-in string.split() works, and similar to Python split).\n * @param {String} str: String to split.\n * @param {String} sep: Separator to split on.\n * @param {Number} maxNumSplits: Maximum number of splits to do.\n * @return {Array[String]} Array of words, of length at most maxNumSplits + 1.\n */\nexport function maxsplit(str: string, sep: string, maxNumSplits: number): string[] {\n  const result: string[] = [];\n  let start = 0, pos;\n  for (let i = 0; i < maxNumSplits; i++) {\n    pos = str.indexOf(sep, start);\n    if (pos === -1) {\n      break;\n    }\n    result.push(str.slice(start, pos));\n    start = pos + sep.length;\n  }\n  result.push(str.slice(start));\n  return result;\n}\n\n\n// Compare arrays of scalars for equality.\nexport function arraysEqual(a: any[], b: any[]): boolean {\n  if (a === b) {\n    return true;\n  }\n  if (!a || !b) {\n    return false;\n  }\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  for (let i = 0; i < a.length; i++) {\n    if (a[i] !== b[i]) { return false; }\n  }\n  return true;\n}\n\n\n// Gives a set representing the set difference a - b.\nexport function setDifference<T>(a: Set<T>, b: Set<T>): Set<T> {\n  const c = new Set<T>();\n  for (const ai of a) {\n    if (!b.has(ai)) { c.add(ai); }\n  }\n  return c;\n}\n\n// Like array.indexOf, but works with array-like objects like HTMLCollection.\nexport function indexOf<T>(arrayLike: ArrayLike<T>, item: T): number {\n  return Array.prototype.indexOf.call(arrayLike, item);\n}\n\n\n/**\n * Removes a value from the given array. Only the first instance is removed.\n * Returns true on success, false if the value was not found.\n */\nexport function arrayRemove<T>(array: T[], value: T): boolean {\n  const index = array.indexOf(value);\n  if (index === -1) {\n    return false;\n  }\n  array.splice(index, 1);\n  return true;\n}\n\n\n/**\n * Inserts value into the array before nextValue, or at the end if nextValue is not found.\n */\nexport function arrayInsertBefore<T>(array: T[], value: T, nextValue: T): void {\n  const index = array.indexOf(nextValue);\n  if (index === -1) {\n    array.push(value);\n  } else {\n    array.splice(index, 0, value);\n  }\n}\n\n\n/**\n * Extends the first array with the second. Like native push, but adds all values in anotherArray.\n */\nexport function arrayExtend<T>(array: T[], anotherArray: T[]): void {\n  for (let i = 0, len = anotherArray.length; i < len; i++) {\n    array.push(anotherArray[i]);\n  }\n}\n\n\n/**\n * Copies count items from fromArray to toArray, copying in a forward direction (which matters\n * when the arrays are the same and source and destination indices overlap).\n *\n * See test/common/arraySplice.js for alternative implementations with timings, from which this\n * one is chosen as consistently among the faster ones.\n */\nexport function arrayCopyForward<T>(toArray: T[], toStart: number,\n                                    fromArray: ArrayLike<T>, fromStart: number, count: number): void {\n  const end = toStart + count;\n  for (const xend = end - 7; toStart < xend; fromStart += 8, toStart += 8) {\n    toArray[toStart] = fromArray[fromStart];\n    toArray[toStart + 1] = fromArray[fromStart + 1];\n    toArray[toStart + 2] = fromArray[fromStart + 2];\n    toArray[toStart + 3] = fromArray[fromStart + 3];\n    toArray[toStart + 4] = fromArray[fromStart + 4];\n    toArray[toStart + 5] = fromArray[fromStart + 5];\n    toArray[toStart + 6] = fromArray[fromStart + 6];\n    toArray[toStart + 7] = fromArray[fromStart + 7];\n  }\n  for (; toStart < end; ++fromStart, ++toStart) {\n    toArray[toStart] = fromArray[fromStart];\n  }\n}\n\n\n/**\n * Copies count items from fromArray to toArray, copying in a backward direction (which matters\n * when the arrays are the same and source and destination indices overlap).\n *\n * See test/common/arraySplice.js for alternative implementations with timings, from which this\n * one is chosen as consistently among the faster ones.\n */\nexport function arrayCopyBackward<T>(toArray: T[], toStart: number,\n                                     fromArray: ArrayLike<T>, fromStart: number, count: number): void {\n  let i = toStart + count - 1, j = fromStart + count - 1;\n  for (const xStart = toStart + 7; i >= xStart; i -= 8, j -= 8) {\n    toArray[i] = fromArray[j];\n    toArray[i - 1] = fromArray[j - 1];\n    toArray[i - 2] = fromArray[j - 2];\n    toArray[i - 3] = fromArray[j - 3];\n    toArray[i - 4] = fromArray[j - 4];\n    toArray[i - 5] = fromArray[j - 5];\n    toArray[i - 6] = fromArray[j - 6];\n    toArray[i - 7] = fromArray[j - 7];\n  }\n  for ( ; i >= toStart; --i, --j) {\n    toArray[i] = fromArray[j];\n  }\n}\n\n\n/**\n * Appends a slice of fromArray to the end of toArray.\n *\n * See test/common/arraySplice.js for alternative implementations with timings, from which this\n * one is chosen as consistently among the faster ones.\n */\nexport function arrayAppend<T>(toArray: T[], fromArray: ArrayLike<T>, fromStart: number, count: number): void {\n  if (count === 1) {\n    toArray.push(fromArray[fromStart]);\n  } else {\n    const len = toArray.length;\n    toArray.length = len + count;\n    arrayCopyForward(toArray, len, fromArray, fromStart, count);\n  }\n}\n\n\n/**\n * Splices array arrToInsert into target starting at the given start index.\n * This implementation tries to be smart by avoiding allocations, appending to the array\n * contiguously, then filling in the gap.\n *\n * See test/common/arraySplice.js for alternative implementations with timings, from which this\n * one is chosen as consistently among the faster ones.\n */\nexport function arraySplice<T>(target: T[], start: number, arrToInsert: ArrayLike<T>): T[] {\n  const origLen = target.length;\n  const tailLen = origLen - start;\n  const insLen = arrToInsert.length;\n  target.length = origLen + insLen;\n  if (insLen > tailLen) {\n    arrayCopyForward(target, origLen, arrToInsert, tailLen, insLen - tailLen);\n    arrayCopyForward(target, start + insLen, target, start, tailLen);\n    arrayCopyForward(target, start, arrToInsert, 0, tailLen);\n  } else {\n    arrayCopyForward(target, origLen, target, origLen - insLen, insLen);\n    arrayCopyBackward(target, start + insLen, target, start, tailLen - insLen);\n    arrayCopyForward(target, start, arrToInsert, 0, insLen);\n  }\n  return target;\n}\n\n\n// Type for a compare func that returns a positive, negative, or zero value, as used for sorting.\nexport type CompareFunc<T> = (a: T, b: T) => number;\n\n/**\n * Returns the index at which the given element can be inserted to keep the array sorted.\n * This is equivalent to underscore's sortedIndex and python's bisect_left.\n * @param {Array} array - sorted array of elements based on the given compareFunc\n * @param {object} elem - object to be inserted in the given array\n * @param {function} compareFunc - compares 2 elements. Returns a pos value if the 1st element is\n *                                 larger, 0 if they're equal, a neg value if the 2nd is larger.\n */\nexport function sortedIndex<T>(array: ArrayLike<T>, elem: T, compareFunc: CompareFunc<T>): number {\n  let lo = 0, mid;\n  let hi = array.length;\n\n  if (array.length === 0) { return 0; }\n  while (lo < hi) {\n    mid = Math.floor((lo + hi) / 2);\n    if (compareFunc(array[mid], elem) < 0) { // mid < elem\n      lo = mid + 1;\n    } else {\n      hi = mid;\n    }\n  }\n  return lo;\n}\n\n/**\n * Returns true if an array contains duplicate values.\n * Values are considered equal if their toString() representations are equal.\n */\nexport function hasDuplicates(array: any[]): boolean {\n  const prevVals = Object.create(null);\n  for (const value of array) {\n    if (value in prevVals) {\n      return true;\n    }\n    prevVals[value] = true;\n  }\n  return false;\n}\n\n/**\n * Counts the number of items in array which satisfy the callback.\n */\nexport function countIf<T>(array: ReadonlyArray<T>, callback: (item: T) => boolean): number {\n  let count = 0;\n  array.forEach(item => {\n    if (callback(item)) { count++; }\n  });\n  return count;\n}\n\n\n/**\n * For two parallel arrays, calls mapFunc(a[i], b[i]) for each pair of corresponding elements, and\n * returns an array of the results.\n */\nexport function map2<T, U, V>(array1: ArrayLike<T>, array2: ArrayLike<U>, mapFunc: (a: T, b: U) => V): V[] {\n  const len = array1.length;\n  const result: V[] = new Array(len);\n  for (let i = 0; i < len; i++) {\n    result[i] = mapFunc(array1[i], array2[i]);\n  }\n  return result;\n}\n\n/**\n * Takes a 2d array returns a new matrix with r rows and c columns\n * @param [Array] dataMatrix: a 2d array\n * @param [Number] r: final row length\n * @param [Number] c: final column length\n */\nexport function growMatrix<T>(dataMatrix: T[][], r: number, c: number): T[][] {\n  const colArr = dataMatrix.map(colVals =>\n    Array.from({length: c}, (_v, k) => colVals[k % colVals.length])\n  );\n  return Array.from({length: r}, (_v, k) => colArr[k % colArr.length]);\n}\n\n/**\n * Returns a function that compares two elements based on multiple sort keys and the\n * given compare functions.\n * Elements are compared using the sort key functions with index 0 having the greatest priority.\n * Subsequent sort key functions are used as tie breakers.\n * @param {function Array} sortKeyFuncs - a list of sort key functions.\n * @param {function Array} compareKeyFuncs - a list of comparison functions parallel to sortKeyFuncs\n * Each compare function  must satisfy the comparison invariant:\n *   If compare(a, b) > 0 then a > b,\n *   If compare(a, b) < 0 then a < b,\n *   If compare(a, b) == 0 then a == b,\n * @param {Array of 1/-1's} optAscending - Comparison on sortKeyFuncs[i] is inverted if optAscending[i] == -1\n */\nexport function multiCompareFunc<T, U>(sortKeyFuncs: ReadonlyArray<(a: T) => U>,\n                                       compareFuncs: ArrayLike<CompareFunc<U>>,\n                                       optAscending?: number[]): CompareFunc<T> {\n  if (sortKeyFuncs.length !== compareFuncs.length) {\n    throw new Error('Number of sort key funcs must be the same as the number of compare funcs');\n  }\n  const ascending = optAscending || sortKeyFuncs.map(() => 1);\n  return function(a: T, b: T): number {\n    let compareOutcome, keyA, keyB;\n    for (let i = 0; i < compareFuncs.length; i++) {\n      keyA = sortKeyFuncs[i](a);\n      keyB = sortKeyFuncs[i](b);\n      compareOutcome = compareFuncs[i](keyA, keyB);\n      if (compareOutcome !== 0) { return ascending[i] * compareOutcome; }\n    }\n    return 0;\n  };\n}\n\n\nexport function nativeCompare<T>(a: T, b: T): number {\n  return (a < b ? -1 : (a > b ? 1 : 0));\n}\n\n/**\n * Creates a function that compares objects by a property value.\n */\nexport function propertyCompare<T>(property: keyof T) {\n  return function(a: T, b: T) {\n    return nativeCompare(a[property], b[property]);\n  };\n}\n\n// TODO: In the future, locale should be a value associated with the document or the user.\nexport const defaultLocale = 'en-US';\nexport const defaultCollator = new Intl.Collator(defaultLocale);\nexport const localeCompare = defaultCollator.compare;\n\n/**\n * A copy of python`s `setdefault` function.\n * Sets key in mapInst to value, if key is not already set.\n * @param {Map} mapInst: Instance of Map.\n * @param {Object} key: Key into the map.\n * @param {Object} value: Value to insert, possibly.\n */\nexport function setDefault<K, V>(mapInst: Map<K, V>, key: K, val: V): V {\n  if (!mapInst.has(key)) { mapInst.set(key, val); }\n  return mapInst.get(key)!;\n}\n\n\n/**\n * Similar to Python's `setdefault`: returns the key `key` from `mapInst`, or if it's not there, sets\n * it to the result buildValue().\n */\nexport function getSetMapValue<K, V>(mapInst: Map<K, V>, key: K, buildValue: () => V): V {\n  if (!mapInst.has(key)) { mapInst.set(key, buildValue()); }\n  return mapInst.get(key)!;\n}\n\n\n/**\n * If key is in mapInst, remove it and return its value, else return `undefined`.\n * @param {Map} mapInst: Instance of Map.\n * @param {Object} key: Key into the map to remove.\n */\nexport function popFromMap<K, V>(mapInst: Map<K, V>, key: K): V|undefined {\n  const value = mapInst.get(key);\n  mapInst.delete(key);\n  return value;\n}\n\n/**\n * For each encountered value in `values`, increment the corresponding counter in `valueCounts`.\n */\nexport function addCountsToMap<T>(valueCounts: Map<T, number>, values: Iterable<T>,\n                                  mapFunc: (v: any) => any = identity) {\n  for (const v of values) {\n    const mappedValue = mapFunc(v);\n    valueCounts.set(mappedValue, (valueCounts.get(mappedValue) || 0) + 1);\n  }\n}\n\n/**\n * Returns whether one Set is a subset of another.\n */\nexport function isSubset(smaller: Set<any>, larger: Set<any>): boolean {\n  for (const value of smaller) {\n    if (!larger.has(value)) {\n      return false;\n    }\n  }\n  return true;\n}\n\n\n/**\n * Merges the contents of two or more objects together into the first object, recursing into\n * nested objects and arrays (like jquery.extend(true, ...)).\n * @param {Object} target - The object to modify. Use {} to create a new merged object.\n * @param {Object} ... - Additional objects from which to copy properties into target.\n * @returns {Object} The first argument, target, modified.\n */\nexport function deepExtend(target: any, _varArgObjects: any): any {\n  for (let i = 1; i < arguments.length; i++) {\n    const object = arguments[i];\n    // Extend the base object\n    for (const name in object) {\n      if (!object.hasOwnProperty(name)) { continue; }\n      let src = object[name];\n      if (src === target || src === undefined) {\n        // Prevent one kind of infinite loop, as JQuery's extend does, and skip undefined values.\n        continue;\n      }\n\n      if (src) {\n        // Recurse if we're merging plain objects or arrays\n        const tgt = target[name];\n        if (Array.isArray(src)) {\n          src = deepExtend(tgt && Array.isArray(tgt) ? tgt : [], src);\n        } else if (typeof src === 'object') {\n          src = deepExtend(tgt && typeof tgt === 'object' ? tgt : {}, src);\n        }\n      }\n      target[name] = src;\n    }\n  }\n  // Return the modified object\n  return target;\n}\n\n\n/**\n * Returns a human-readable string containing a number of bytes, KB, or MB.\n * @param {Number} bytes. Number of bytes.\n * @returns {String} A description such as \"4.1KB\".\n */\nexport function byteString(bytes: number): string {\n  if (bytes < 1024) {\n    return bytes + 'B';\n  } else if (bytes < 1024 * 1024) {\n    return (bytes / 1024).toFixed(1) + 'KB';\n  } else {\n    return (bytes / 1024 / 1024).toFixed(1) + 'MB';\n  }\n}\n\n\n/**\n * Creates a new object mapping each key in keysArray to the value returned by callback.\n * @param {Array} keysArray - Array of strings to use as the properties of the returned object.\n * @param {Function} callback - Function that produces the value for each key. Called in the same\n *    way as array.map() calls its callbacks.\n * @param {Object} optThisArg - Value to use as `this` when executing callback.\n * @returns {Object} - object mapping keys from `keysArray` to values returned by `callback`.\n */\nexport function mapToObject<T>(keysArray: string[], callback: (key: string) => T,\n                               optThisArg: any): {[key: string]: T} {\n  const values: T[] = keysArray.map(callback, optThisArg);\n  const map: {[key: string]: T} = {};\n  for (let i = 0; i < keysArray.length; i++) {\n    map[keysArray[i]] = values[i];\n  }\n  return map;\n}\n\n/**\n * Remove the specified elements from the array, with the elements specified by\n * their index.  The array arr is modified in-place.  The indexes must be provided\n * in order, sorted lowest to highest, with no duplicates, or out-of-bound indices,\n * etc (this method does no error checking; it is used in place of lodash-pullAt\n * for performance reasons).\n */\nexport function pruneArray<T>(arr: T[], indexes: number[]) {\n  if (indexes.length === 0) { return; }\n  if (indexes.length === 1) {\n    arr.splice(indexes[0], 1);\n    return;\n  }\n  const len = arr.length;\n  let arrAt = 0;\n  let indexesAt = 0;\n  for (let i = 0; i < len; i++) {\n    if (i === indexes[indexesAt]) {\n      indexesAt++;\n      continue;\n    }\n    if (i !== arrAt) {\n      arr[arrAt] = arr[i];\n    }\n    arrAt++;\n  }\n  arr.length = arrAt;\n}\n\n/**\n * A List of python identifiers; the result of running keywords.kwlist in Python 2.7.6,\n * plus additional illegal identifiers None, False, True\n * Using [] instead of new Array causes a \"comprehension error\" for some reason\n */\nconst _kwlist = ['and', 'as', 'assert', 'break', 'class', 'continue', 'def',\n             'del', 'elif', 'else', 'except', 'exec', 'finally', 'for', 'from', 'global',\n             'if', 'import', 'in', 'is', 'lambda', 'not', 'or', 'pass', 'print', 'raise',\n             'return', 'try', 'while', 'with', 'yield', 'None', 'False', 'True'];\n/**\n * Given an arbitrary string, makes substitutions to make it a valid SQL/Python identifier.\n * Corresponds to sandbox/grist/gencode.sanitize_ident\n */\nexport function sanitizeIdent(ident: string, prefix?: string) {\n  prefix = prefix || 'c';\n  // Remove non-alphanumeric non-_ chars\n  ident = ident.replace(/[^a-zA-Z0-9_]+/g, '_');\n  // Remove leading and trailing _\n  ident = ident.replace(/^_+|_+$/g, '');\n  // Place prefix at front if the beginning isn't a number\n  ident = ident.replace(/^(?=[0-9])/g, prefix);\n  // Append prefix until it is not  python keyword\n  while (_kwlist.includes(ident)) {\n    ident = prefix + ident;\n  }\n  return ident;\n}\n\n\n/**\n * Clone a function, returning a function object that represents a brand new function with the\n * same code. If the same function is used with different argument types, it would prevent JS V8\n * engine optimizations (or cause it to deoptimize it). If different clones are called with\n * different argument types, they can be optimized independently.\n *\n * As with all micro-optimizations, only do this when the optimization matters.\n */\nexport function cloneFunc(fn: Function): Function {     // tslint:disable-line:ban-types\n  /* jshint evil:true */  // suppress eval warning.\n  return eval('(' + fn.toString() + ')');   // tslint:disable-line:no-eval\n}\n\n\n/**\n * Generates a random id using a sequence of uppercase alphanumeric characters\n * preceded by an optional prefix.\n */\nexport function genRandomId(len: number, optPrefix?: string): string {\n  const chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n  let ret = optPrefix || '';\n  for (let i = 0; i < len; i++) {\n    ret += chars[Math.floor(Math.random() * chars.length)];\n  }\n  return ret;\n}\n\n/**\n * Scans through two sorted arrays, calling a function on each item or pair of items\n * for every present key in order.\n * @param {Array} arrA - First array to scan. NOTE: Should be sorted by the key value.\n * @param {Array} arrB - Second array to scan. NOTE: Should be sorted by the key value.\n * @param {Function} callback - Called with an item from arrA as the first argument and an\n *  item from arrB as the second. Called for every unique key in order, either with one of the\n *  arguments null if the key is present only in one array, or both non-null if the key is\n *  present in both arrays. NOTE: Key values should not be null.\n * @param {Function} optKeyFunc - Optional function to map each array value to a sort key.\n *  Defaults to the identity function.\n */\nexport function sortedScan<T, U>(arrA: ArrayLike<T>, arrB: ArrayLike<U>,\n                                 callback: (a: T|null, B: U|null) => void,\n                                 optKeyFunc?: (item: T|U) => any) {\n  const keyFunc = optKeyFunc || identity;\n  let i = 0, j = 0;\n  while (i < arrA.length || j < arrB.length) {\n    const a = arrA[i], b = arrB[j];\n    const keyA = i < arrA.length ? keyFunc(a) : null;\n    const keyB = j < arrB.length ? keyFunc(b) : null;\n    if (keyA !== null && (keyB === null || keyA < keyB)) {\n      callback(a, null);\n      i++;\n    } else if (keyA === null || keyA > keyB) {\n      callback(null, b);\n      j++;\n    } else {\n      callback(a, b);\n      i++;\n      j++;\n    }\n  }\n}\n\n/**\n * Returns the time in ms to wait until attempting another connection.\n * @param {Number} attemptNumber - Reconnect attempt number starting at 0.\n * @param {Array} intervals - Array of reconnect intervals in ms.\n * @returns {Number}\n */\nexport function getReconnectTimeout(attemptNumber: number, intervals: ArrayLike<number>): number {\n  if (attemptNumber >= intervals.length) {\n    // Add an additional wait time if already at max attempts.\n    const timeout = intervals[intervals.length - 1];\n    return timeout + Math.random() * timeout;\n  } else {\n    return intervals[attemptNumber];\n  }\n}\n\n/**\n * Returns whether the given email is a valid formatted email string.\n * @param {String} email - Email to test.\n * @returns {Boolean}\n */\nexport function isEmail(email: string): boolean {\n  return EMAIL_RE.test(email.toLowerCase());\n}\n\n/*\n * Takes an observable and returns a promise for when the observable's value matches the given\n * predicate. It then unsubscribes from the observable, and returns its value.\n * If a predicate is not given, resolves to the observable values as soon as it's truthy.\n */\nexport function waitObs<T>(observable: KoObservable<T>, predicate: (value: T) => boolean = Boolean): Promise<T> {\n  return new Promise((resolve, _reject) => {\n    const value = observable.peek();\n    if (predicate(value)) { return resolve(value); }\n    const sub = observable.subscribe((val: T) => {\n      if (predicate(val)) {\n        sub.dispose();\n        resolve(val);\n      }\n    });\n  });\n}\n\n/**\n * Same as waitObs but for grainjs observables.\n */\nexport async function waitGrainObs<T>(observable: Observable<T>): Promise<NonNullable<T>>;\nexport async function waitGrainObs<T>(observable: Observable<T>, predicate?: (value: T) => boolean): Promise<T>;\nexport async function waitGrainObs<T>(observable: Observable<T>,\n                                      predicate: (value: T) => boolean = Boolean): Promise<T> {\n  let sub: Listener|undefined;\n  const res: T = await new Promise((resolve, _reject) => {\n    const value = observable.get();\n    if (predicate(value)) { return resolve(value); }\n    sub = observable.addListener((val: T) => {\n      if (predicate(val)) {\n        resolve(val);\n      }\n    });\n  });\n  if (sub) { sub.dispose(); }\n  return res;\n}\n\n\n// `dom.style` does not work here because custom css property (ie: `--foo`) needs to be set using\n// `style.setProperty` (credit: https://vanseodesign.com/css/custom-properties-and-javascript/).\n// TODO: consider making PR to fix `dom.style` in grainjs.\nexport function inlineStyle(property: string, valueObs: BindableValue<string>): DomElementMethod {\n  return (elem) => subscribeElem(elem, valueObs, (val) => {\n    elem.style.setProperty(property, val);\n  });\n}\n\n\n/**\n * Class to maintain a chain of promise-returning callbacks. All scheduled callbacks will be\n * called in order as long as the previous one is successful. If a callback fails is rejected,\n * already-scheduled callbacks will be skipped, but newly-scheduled ones will be run.\n */\nexport class PromiseChain<T> {\n  private _last: Promise<T|void> = Promise.resolve();\n\n  // Adds a callback to the chain. If the callback runs, the return value is the return value of\n  // the callback. If it's skipped due to a failure earlier in the chain, the return value is the\n  // rejection with the message \"Skipped due to an earlier error\".\n  public add(nextCB: () => Promise<T>): Promise<T> {\n    const next = this._last.catch(() => { throw new Error(\"Skipped due to an earlier error\"); }).then(nextCB);\n    // If any callback fails, all queued ones will be skipped. Here we reset the chain, so that\n    // callbacks added later do get run.\n    next.catch(() => { this._last = Promise.resolve(); });\n    this._last = next;\n    return next;\n  }\n}\n\n/**\n * Indicates if a hex color value, e.g. '#000000', is darker than the given value.\n * Darkness is measured from 0..255, where 0 is the darkest and 255 is the lightest.\n *\n * Taken from: https://stackoverflow.com/questions/12043187/how-to-check-if-hex-color-is-too-black\n */\nexport function isColorDark(hexColor: string, isDarkBelow: number = 220): boolean {\n  const c = hexColor.substring(1);  // strip #\n  const rgb = parseInt(c, 16);      // convert rrggbb to decimal\n  // Extract RGB components\n  const r = (rgb >> 16) & 0xff;     // tslint:disable-line:no-bitwise\n  const g = (rgb >>  8) & 0xff;     // tslint:disable-line:no-bitwise\n  const b = (rgb >>  0) & 0xff;     // tslint:disable-line:no-bitwise\n\n  const luma = 0.2126 * r + 0.7152 * g + 0.0722 * b;  // per ITU-R BT.709\n  return luma < isDarkBelow;\n}\n\n/**\n * Returns true if val is a valid hex color value. For instance: #aabbaa is valid, #aabba is not. Do\n * not accept neither short notation nor hex with transparency, ie: #aab, #aabb and #aabbaabb are\n * invalid.\n */\nexport function isValidHex(val: string): boolean {\n  return /^#([0-9A-F]{6})$/i.test(val);\n}\n\n\n/**\n * Returns a promise that resolves to true if promise takes longer than timeoutMsec to resolve. If not\n * or if promise throws returns false.\n */\nexport async function isLongerThan(promise: Promise<any>, timeoutMsec: number): Promise<boolean> {\n  let isPending = true;\n  const done = () => { isPending = false; };\n  await Promise.race([\n    promise.then(done, done),\n    delay(timeoutMsec)\n  ]);\n  return isPending;\n}\n\n/**\n * Returns true if the parameter, when rendered as a string, matches\n * 1, on, or true (case insensitively).  Useful for processing query\n * parameters that may have been manually set.\n */\nexport function isAffirmative(parameter: any): boolean {\n  return ['1', 'on', 'true', 'yes'].includes(String(parameter).toLowerCase());\n}\n\n/**\n * Returns whether a value is neither null nor undefined, with a type guard for the return type.\n *\n * This is particularly useful for filtering, e.g. if `array` includes values of type\n * T|null|undefined, then TypeScript can tell that `array.filter(isNonNullish)` has the type T[].\n */\nexport function isNonNullish<T>(value: T | null | undefined): value is T {\n  return value !== null && value !== undefined;\n}\n\n/**\n * Returns the value of both grainjs and knockout observable without creating a dependency.\n */\nexport const unwrap: UseCB = (obs: ISubscribable) => {\n  if ('_getDepItem' in obs) {\n    return obs.get();\n  }\n  return (obs as ko.Observable).peek();\n};\n\n/**\n * Use helper for simple boolean negation.\n */\nexport const not = (obs: Observable<any>|IKnockoutReadObservable<any>) => (use: UseCBOwner) => !use(obs);\n\n/**\n * Get a set of up to `count` distinct values of `values`.\n */\nexport function getDistinctValues<T>(values: readonly T[], count: number = Infinity): Set<T> {\n  const distinct = new Set<T>();\n  // Add values to the set until it reaches the desired size, or until there are no more values.\n  for (let i = 0; i < values.length && distinct.size < count; i++) {\n    distinct.add(values[i]);\n  }\n  return distinct;\n}\n\n/**\n * Asserts that variable `name` has a non-nullish `value`.\n */\nexport function assertIsDefined<T>(name: string, value: T): asserts value is NonNullable<T> {\n  if (value === undefined || value === null) {\n    throw new Error(`Expected '${name}' to be defined, but received ${value}`);\n  }\n}\n\n/**\n * Calls function `fn`, passes any thrown errors to function `recover`, and finally calls `fn`\n * once more if `recover` doesn't throw.\n */\nexport async function retryOnce<T>(fn: () => Promise<T>, recover: (e: unknown) => Promise<void>): Promise<T> {\n  try {\n    return await fn();\n  } catch (e) {\n    await recover(e);\n    return await fn();\n  }\n}\n\n/**\n * Checks if value is 'empty' (like null, undefined, empty string, empty array/set/map, empty object).\n * Values like 0, true, false are not empty.\n */\nexport function notSet(value: any) {\n  return value === undefined || value === null || value === ''\n         || (Array.isArray(value) && !value.length)\n         || (typeof value === 'object' && !Object.keys(value).length)\n         || (['[object Map]', '[object Set'].includes(value.toString()) && !value.size);\n}\n\n/**\n * Checks if value is 'empty', if it is, returns the default value (which is null).\n */\nexport function ifNotSet(value: any, def: any = null) {\n  return notSet(value) ? def : value;\n}\n","import constant = require('lodash/constant');\nimport times = require('lodash/times');\n\n/**\n * Returns a new array of length count, filled with the given value.\n */\nexport function arrayRepeat<T>(count: number, value: T): T[] {\n  return times(count, constant(value));\n}\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 9674;\nmodule.exports = webpackEmptyContext;","export default class Token {\n\n\tprivate _value: string;\n\tprivate _type: string;\n\tprivate _format: string;\n\n\t/**\n\t * Constructor.\n\t */\n\tconstructor(value: string, type: string) {\n\t\tthis._value = value;\n\t\tthis._type = type;\n\t\tthis._format = '';\n\t}\n\n\t/**\n\t * Gets token value.\n\t *\n\t * @returns String\n\t */\n\tget value() {\n\t\treturn this._value;\n\t}\n\n\t/**\n\t * Sets token value.\n\t *\n\t * @param String\n\t */\n\tset value(value: string) {\n\t\tthis._value = value;\n\t}\n\n\t/**\n\t * Gets token type.\n\t *\n\t * @returns String\n\t */\n\tget type() {\n\t\treturn this._type;\n\t}\n\n\t/**\n\t * Sets token type.\n\t *\n\t * @param String\n\t */\n\tset type(type: string) {\n\t\tthis._type = type;\n\t}\n\n\t/**\n\t * Gets token format.\n\t *\n\t * @returns String\n\t */\n\tget format() {\n\t\treturn this._format;\n\t}\n\n\t/**\n\t * Sets token format.\n\t *\n\t * @param String\n\t */\n\tset format(format: string) {\n\t\tthis._format = format;\n\t}\n}\n","import {\n\tIParser,\n\tDate,\n\tParsedResult,\n} from '../types';\n\nimport Token from './Token';\n\nclass Parser implements IParser {\n\tpublic readonly name: string;\n\tpublic readonly pattern: RegExp;\n\n\tconstructor(name: string, pattern: RegExp) {\n\t\tthis.name = name;\n\t\tthis.pattern = pattern;\n\t}\n\n\tparse(date: Date): ParsedResult | undefined {\n\t\tconst match = this.pattern.exec(date);\n\t\tif (!match || !match.groups) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet tokens: Array<Token> = [];\n\t\tfor (const [key, val] of Object.entries(match.groups)) {\n\t\t\tif (val) {\n\t\t\t\ttokens.push(new Token(\n\t\t\t\t\tval,\n\t\t\t\t\t/delim\\d+/.test(key) ? 'delimiter' : key,\n\t\t\t\t));\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\ttokens: tokens,\n\t\t\tindex: match.index,\n\t\t\tparser: this.name,\n\t\t};\n\t}\n}\n\nexport default Parser;\n","import Parser from './Parser';\n\nconst abbreviatedTimezones = 'UT|'\n\t// https://www.timeanddate.com/time/zones/africa\n\t+ 'CAT|CET|CVT|EAT|EET|GMT|MUT|RET|SAST|SCT|WAST|WAT|WEST|WET|WST|WT|'\n\n\t// https://www.timeanddate.com/time/zones/asia\n\t+ 'ADT|AFT|ALMT|AMST|AMT|ANAST|ANAT|AQTT|AST|AZST|AZT|BNT|BST|BTT|CHOST|CHOT|'\n\t+ 'CST|EEST|EET|GET|GST|HKT|HOVST|HOVT|ICT|IDT|IRDT|IRKST|IRKT|IST|JST|KGT|KRAST|'\n\t+ 'KRAT|KST|MAGST|MAGT|MMT|MSK|MVT|NOVST|NOVT|NPT|OMSST|OMST|ORAT|PETST|PETT|PHT|'\n\t+ 'PKT|PYT|QYZT|SAKT|SGT|SRET|TJT|TLT|TMT|TRT|ULAST|ULAT|UZT|VLAST|VLAT|WIB|WIT|'\n\t+ 'YAKST|YAKT|YEKST|YEKT|'\n\n\t// https://www.timeanddate.com/time/zones/antarctica\n\t+ 'ART|CAST|CEST|CLST|CLT|DAVT|DDUT|GMT|MAWT|NZDT|NZST|ROTT|SYOT|VOST|'\n\n\t// https://www.timeanddate.com/time/zones/atlantic\n\t+ 'ADT|AST|AT|AZOST|AZOT|'\n\n\t// https://www.timeanddate.com/time/zones/au\n\t+ 'ACDT|ACST|ACT|ACWST|AEDT|AEST|AET|AWDT|AWST|CXT|LHDT|LHST|NFDT|NFT|'\n\n\t// https://www.timeanddate.com/time/zones/caribbean\n\t+ 'AST|AT|CDT|CIDST|CIST|CST|EDT|EST|ET|'\n\n\t// https://www.timeanddate.com/time/zones/ca\n\t+ 'CST|CT|EST|ET|'\n\n\t// https://www.timeanddate.com/time/zones/eu\n\t+ 'BST|CEST|CET|EEST|EET|FET|GET|GMT|IST|KUYT|MSD|MSK|SAMT|TRT|WEST|WET|'\n\n\t// https://www.timeanddate.com/time/zones/indian-ocean\n\t+ 'CCT|EAT|IOT|TFT|'\n\n\t// https://www.timeanddate.com/time/zones/na\n\t+ 'ADT|AKDT|AKST|AST|AT|CDT|CST|CT|EDT|EGST|EGT|ET|GMT|HDT|HST|MDT|MST|MT|NDT|NST|PDT|PMDT|PMST|PST|PT|WGST|WGT|'\n\n\t// https://www.timeanddate.com/time/zones/pacific\n\t+ 'AoE|BST|CHADT|CHAST|CHUT|CKT|ChST|EASST|EAST|FJST|FJT|GALT|GAMT|GILT|HST|KOST|LINT|MART|'\n\t+ 'MHT|NCT|NRT|NUT|NZDT|NZST|PGT|PHOT|PONT|PST|PWT|SBT|SST|TAHT|TKT|TOST|TOT|TVT|VUT|WAKT|WFT|WST|YAPT|'\n\n\t// https://www.timeanddate.com/time/zones/sa\n\t+ 'ACT|AMST|AMT|ART|BOT|BRST|BRT|CLST|CLT|COT|ECT|FKST|FKT|FNT|GFT|GST|GYT|PET|PYST|PYT|SRT|UYST|UYT|VET|WARST';\n\n/**\n * Date only\n *\n * - 1 Jan\n * - 1 January\n * - 1st Jan\n * - 1st January\n * - 01 Jan\n * - 01 January\n *\n * Date with time\n *\n * - 1 Jan, 10:00 AM\n * - Sunday, 1st January, 23:00\n */\nconst dayOfMonthAndMonthNameDateFormatParser = new Parser(\n\t'DayOfMonthAndMonthNameDateFormatParser',\n\tnew RegExp('^'\n\t\t+ '(?<dayOfWeek>(?:Sun?|Mon?|Tu(?:es)?|We(?:dnes)?|Th(?:urs)?|Fri?|Sa(?:tur)?)(?:day)?)?'\n\t\t+ '(?<delim1>,)?'\n\t\t+ '(?<delim2>\\\\s)?'\n\t\t+ '(?<dayOfMonth>(?:3[0-1]|[1-2]\\\\d|0?[1-9])(?:st|nd|rd|th)?)'\n\t\t+ '(?<delim3>\\\\s)'\n\t\t+ '(?<month>Jan(?:uary)?|Feb(?:ruary)?|Mar(?:ch)?|Apr(?:il)?|May|June?'\n\t\t+ '|'\n\t\t+ 'July?|Aug(?:ust)?|Sep(?:tember)?|Oct(?:ober)?|Nov(?:ember)?|Dec(?:ember)?)'\n\t\t+ '(?<delim4>,)?'\n\t\t+ '(?<delim5>\\\\s)?'\n\t\t+ '(?<year>\\\\d{4}|\\\\d{2})?'\n\t\t+ '(?:'\n\t\t\t+ '(?<delim6>,)?'\n\t\t\t+ '(?<delim7>\\\\s)'\n\t\t\t+ '(?:(?<twentyFourHour>2[0-3]|0?\\\\d|1\\\\d)|(?<twelveHour>0?[1-9]|1[0-2]))'\n\t\t\t+ '(?:'\n\t\t\t\t+ '(?<delim8>[:.])'\n\t\t\t\t+ '(?<minute>[0-5]\\\\d)'\n\t\t\t+ ')?'\n\t\t\t+ '(?:'\n\t\t\t\t+ '(?<delim9>[:.])'\n\t\t\t\t+ '(?<second>[0-5]\\\\d)'\n\t\t\t+ ')?'\n\t\t\t+ '(?:'\n\t\t\t\t+ '(?<delim10>.)'\n\t\t\t\t+ '(?<millisecond>\\\\d{3})'\n\t\t\t+ ')?'\n\t\t\t+ '(?<delim11>\\\\s)?'\n\t\t\t+ '(?<meridiem>am|pm|AM|PM)?'\n\t\t\t+ '(?:'\n\t\t\t\t+ '(?<delim12>\\\\s)'\n\t\t\t\t+ `(?<timezone>[+-]\\\\d{2}(?::?\\\\d{2})?|Z|${abbreviatedTimezones})`\n\t\t\t+ ')?'\n\t\t+ ')?'\n\t\t+ '$'\n\t)\n);\n\n/**\n * ISO 8601\n * https://en.wikipedia.org/wiki/ISO_8601\n */\nconst iSO8601BasicDateTimeFormatParser = new Parser(\n\t'ISO8601BasicDateTimeFormatParser',\n\tnew RegExp('^'\n\t\t+ '(?<year>[+-]\\\\d{6}|\\\\d{4})'\n\t\t+ '(?:'\n\t\t\t+ '(?<month>\\\\d{2})(?:(?<dayOfMonth>\\\\d{2}))?'\n\t\t\t+ '|'\n\t\t\t+ '(?<escapeText>W)(?<isoWeekOfYear>\\\\d{2})(?:(?<isoDayOfWeek>\\\\d))?'\n\t\t\t+ '|'\n\t\t\t+ '(?<dayOfYear>\\\\d{3})'\n\t\t+ ')?'\n\t\t+ '(?:'\n\t\t\t+ '(?<delim1>T| )'\n\t\t\t+ '(?:(?<twentyFourHour>\\\\d{2})(?:(?<minute>\\\\d{2})(?:(?<second>\\\\d{2})(?:(?<delim2>[.,])(?<millisecond>\\\\d{1,9}))?)?)?)'\n\t\t\t+ '(?<timezone>[+-]\\\\d{2}(?::?\\\\d{2})?|Z)?'\n\t\t+ ')?'\n\t\t+ '$'\n\t)\n);\n\n/**\n * ISO 8601\n * https://en.wikipedia.org/wiki/ISO_8601\n */\nconst iSO8601ExtendedDateTimeFormatParser = new Parser(\n\t'ISO8601ExtendedDateTimeFormatParser',\n\tnew RegExp('^'\n\t\t+ '(?<year>[+-]\\\\d{6}|\\\\d{4})'\n\t\t+ '(?<delim1>\\\\-)'\n\t\t+ '(?:'\n\t\t\t+ '(?<month>\\\\d{2})(?:(?<delim2>\\\\-)(?<dayOfMonth>\\\\d{2}))?'\n\t\t\t+ '|'\n\t\t\t+ '(?<escapeText>W)(?<isoWeekOfYear>\\\\d{2})(?:(?<delim3>\\\\-)(?<isoDayOfWeek>\\\\d))?'\n\t\t\t+ '|'\n\t\t\t+ '(?<dayOfYear>\\\\d{3})'\n\t\t+ ')'\n\t\t+ '(?:'\n\t\t\t+ '(?<delim4>T| )'\n\t\t\t+ '(?:(?<twentyFourHour>\\\\d{2})(?:(?<delim5>:)(?<minute>\\\\d{2})(?:(?<delim6>:)(?<second>\\\\d{2})(?:(?<delim7>[.,])(?<millisecond>\\\\d{1,9}))?)?)?)'\n\t\t\t+ '(?<timezone>[+-]\\\\d{2}(?::?\\\\d{2})?|Z)?'\n\t\t+ ')?'\n\t\t+ '$'\n\t)\n);\n\n/**\n * Date only\n *\n * - Jan 1\n * - January 1\n * - Jan 1st\n * - January 1st\n * - Jan 01\n * - January 01\n *\n * Date with time\n *\n * - Jan 1, 10:00 AM\n * - Sunday, January 1st, 23:00\n * - Sunday, January 1st, 23:00 PDT\n */\nconst monthNameAndDayOfMonthDateFormatParser = new Parser(\n\t'MonthNameAndDayOfMonthDateFormatParser',\n\tnew RegExp('^'\n\t\t+ '(?<dayOfWeek>(?:Sun?|Mon?|Tu(?:es)?|We(?:dnes)?|Th(?:urs)?|Fri?|Sa(?:tur)?)(?:day)?)?'\n\t\t+ '(?<delim1>,)?'\n\t\t+ '(?<delim2>\\\\s)?'\n\t\t+ '(?<month>Jan(?:uary)?|Feb(?:ruary)?|Mar(?:ch)?|Apr(?:il)?|May|June?'\n\t\t+ '|'\n\t\t+ 'July?|Aug(?:ust)?|Sep(?:tember)?|Oct(?:ober)?|Nov(?:ember)?|Dec(?:ember)?)'\n\t\t+ '(?<delim3>\\\\s)'\n\t\t+ '(?<dayOfMonth>(?:3[0-1]|[1-2]\\\\d|0?[1-9])(?:st|nd|rd|th)?)'\n\t\t+ '(?<delim4>,)?'\n\t\t+ '(?<delim5>\\\\s)?'\n\t\t+ '(?<year>\\\\d{4}|\\\\d{2})?'\n\t\t+ '(?:'\n\t\t\t+ '(?:'\n\t\t\t\t+ '(?<delim6>,)?'\n\t\t\t\t+ '(?<delim7>\\\\s)'\n\t\t\t\t+ '(?:(?<twentyFourHour>2[0-3]|0?\\\\d|1\\\\d)|(?<twelveHour>0?[1-9]|1[0-2]))'\n\t\t\t\t+ '(?:'\n\t\t\t\t\t+ '(?<delim8>[:.])'\n\t\t\t\t\t+ '(?<minute>[0-5]\\\\d)'\n\t\t\t\t+ ')?'\n\t\t\t\t+ '(?:'\n\t\t\t\t\t+ '(?<delim9>[:.])'\n\t\t\t\t\t+ '(?<second>[0-5]\\\\d)'\n\t\t\t\t+ ')?'\n\t\t\t\t+ '(?:'\n\t\t\t\t\t+ '(?<delim10>.)'\n\t\t\t\t\t+ '(?<millisecond>\\\\d{3})'\n\t\t\t\t+ ')?'\n\t\t\t\t+ '(?<delim11>\\\\s)?'\n\t\t\t\t+ '(?<meridiem>am|pm|AM|PM)?'\n\t\t\t\t+ '(?:'\n\t\t\t\t\t+ '(?<delim12>\\\\s)'\n\t\t\t\t\t+ `(?<timezone>[+-]\\\\d{2}(?::?\\\\d{2})?|Z|${abbreviatedTimezones})`\n\t\t\t\t+ ')?'\n\t\t\t+ ')?'\n\t\t+ ')?'\n\t\t+ '$'\n\t)\n);\n\n/**\n * RFC 2822\n * https://tools.ietf.org/html/rfc2822#section-3.3\n */\nconst rFC2822DateTimeFormatParser = new Parser(\n\t'RFC2822DateTimeFormatParser',\n\tnew RegExp('^'\n\t\t+ '(?:(?<dayOfWeek>Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?<delim1>,)?(?<delim2>\\\\s))?'\n\t\t+ '(?<dayOfMonth>\\\\d{1,2})(?<delim3>\\\\s)(?<month>Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)(?<delim4>\\\\s)(?<year>\\\\d{2,4})'\n\t\t+ '(?<delim5>\\\\s)'\n\t\t+ '(?<twentyFourHour>\\\\d{2})(?<delim6>:)(?<minute>\\\\d{2})(?:(?<delim7>:)(?<second>\\\\d{2}))?'\n\t\t+ '(?<delim8>\\\\s)'\n\t\t+ '(?<timezone>(?:(?:UT|GMT|[ECMP][SD]T)|[Zz]|[+-]\\\\d{4}))'\n\t\t+ '$'\n\t)\n);\n\n/*\n * YYYY/MM/DD [hh:mm a|A [abbr-tz]]\n * YYYY/M/D\n * YYYY/MM\n * YYYY/M\n */\nconst slashDelimitedDateTimeFormatParser = new Parser(\n\t'SlashDelimitedDateFormatParser',\n\tnew RegExp('^'\n\t\t+ '(?<year>\\\\d{4}|\\\\d{2})'\n\t\t+ '(?<delim1>[/.-])'\n\t\t+ '(?<month>0?[1-9]|1[0-2])'\n\t\t+ '(?:'\n\t\t\t+ '(?<delim2>[/.-])'\n\t\t\t+ '(?<dayOfMonth>0?[1-9]|[1-2]\\\\d|3[0-1])'\n\t\t+ ')?'\n\t\t+ '(?:'\n\t\t\t+ '(?:'\n\t\t\t\t+ '(?<delim3>,)?'\n\t\t\t\t+ '(?<delim4>\\\\s)'\n\t\t\t\t+ '(?:(?<twentyFourHour>2[0-3]|0?\\\\d|1\\\\d)|(?<twelveHour>0?[1-9]|1[0-2]))'\n\t\t\t\t+ '(?:'\n\t\t\t\t\t+ '(?<delim5>[:.])'\n\t\t\t\t\t+ '(?<minute>[0-5]\\\\d)'\n\t\t\t\t+ ')?'\n\t\t\t\t+ '(?:'\n\t\t\t\t\t+ '(?<delim6>[:.])'\n\t\t\t\t\t+ '(?<second>[0-5]\\\\d)'\n\t\t\t\t+ ')?'\n\t\t\t\t+ '(?:'\n\t\t\t\t\t+ '(?<delim7>.)'\n\t\t\t\t\t+ '(?<millisecond>\\\\d{3})'\n\t\t\t\t+ ')?'\n\t\t\t\t+ '(?<delim8>\\\\s)?'\n\t\t\t\t+ '(?<meridiem>am|pm|AM|PM)?'\n\t\t\t\t+ '(?:'\n\t\t\t\t\t+ '(?<delim9>\\\\s)'\n\t\t\t\t\t+ `(?<timezone>[+-]\\\\d{2}(?::?\\\\d{2})?|Z|${abbreviatedTimezones})`\n\t\t\t\t+ ')?'\n\t\t\t+ ')?'\n\t\t+ ')?'\n\t\t+ '$'\n\t)\n);\n\n\n/**\n * hh:mm[AP]M\n * hh:mm[AP]M [abbr-tz]\n * hh[AP]M\n */\nconst twelveHourTimeFormatParser = new Parser(\n\t'TwelveHourTimeFormatParser',\n\tnew RegExp('^'\n\t\t+ '(?<twelveHour>0?[1-9]|1[0-2])'\n\t\t+ '(?:'\n\t\t\t+ '(?<delim1>[:.])'\n\t\t\t+ '(?<minute>[0-5]\\\\d)'\n\t\t+ ')?'\n\t\t+ '(?:'\n\t\t\t+ '(?<delim2>[:.])'\n\t\t\t+ '(?<second>[0-5]\\\\d)'\n\t\t+ ')?'\n\t\t+ '(?:'\n\t\t\t+ '(?<delim3>.)'\n\t\t\t+ '(?<millisecond>\\\\d{3})'\n\t\t+ ')?'\n\t\t+ '(?<delim4>\\\\s)?'\n\t\t+ '(?<meridiem>am|pm|AM|PM)'\n\t\t+ '(?:'\n\t\t\t+ '(?<delim5>\\\\s)'\n\t\t\t+ `(?<timezone>[+-]\\\\d{2}(?::?\\\\d{2})?|Z|${abbreviatedTimezones})`\n\t\t+ ')?'\n\t\t+ '$'\n\t)\n);\n\n/**\n * HH:mm:ss[.ddd]\n * HH:mm\n * HH.mm.ss Z\n */\nconst twentyFourHourTimeFormatParser = new Parser(\n\t'TwentyFourHourTimeFormatParser',\n\tnew RegExp('^'\n\t\t+ '(?<twentyFourHour>2[0-3]|0?\\\\d|1\\\\d)'\n\t\t+ '(?<delim1>[:.])'\n\t\t+ '(?<minute>[0-5]\\\\d)'\n\t\t+ '(?:'\n\t\t\t+ '(?<delim2>[:.])'\n\t\t\t+ '(?<second>[0-5]\\\\d)'\n\t\t+ ')?'\n\t\t+ '(?:'\n\t\t\t+ '(?<delim3>.)'\n\t\t\t+ '(?<millisecond>\\\\d{3})'\n\t\t+ ')?'\n\t\t+ '(?:'\n\t\t\t+ '(?<delim4>\\\\s)'\n\t\t\t+ `(?<timezone>[+-]\\\\d{2}(?::?\\\\d{2})?|Z|${abbreviatedTimezones})`\n\t\t+ ')?'\n\t\t+ '$'\n\t)\n);\n\n/*\n * UK style\n *\n * - DD/MM/YYYY\n * - D/M/YYYY\n * - DD/MM/YY\n * - DD/MM\n */\nconst uKStyleSlashDelimitedDateTimeFormatParser = new Parser(\n\t'UKStyleSlashDelimitedDateFormatParser',\n\tnew RegExp('^'\n\t\t+ '(?<dayOfMonth>0?[1-9]|[1-2]\\\\d|3[0-1])'\n\t\t+ '(?<delim1>[/.-])'\n\t\t+ '(?<month>0?[1-9]|1[0-2])'\n\t\t+ '(?:'\n\t\t\t+ '(?<delim2>[/.-])'\n\t\t\t+ '(?<year>\\\\d{4}|\\\\d{2})'\n\t\t+ ')?'\n\t\t+ '(?:'\n\t\t\t+ '(?:'\n\t\t\t\t+ '(?<delim3>,)?'\n\t\t\t\t+ '(?<delim4>\\\\s)'\n\t\t\t\t+ '(?:(?<twentyFourHour>2[0-3]|0?\\\\d|1\\\\d)|(?<twelveHour>0?[1-9]|1[0-2]))'\n\t\t\t\t+ '(?:'\n\t\t\t\t\t+ '(?<delim5>[:.])'\n\t\t\t\t\t+ '(?<minute>[0-5]\\\\d)'\n\t\t\t\t+ ')?'\n\t\t\t\t+ '(?:'\n\t\t\t\t\t+ '(?<delim6>[:.])'\n\t\t\t\t\t+ '(?<second>[0-5]\\\\d)'\n\t\t\t\t+ ')?'\n\t\t\t\t+ '(?:'\n\t\t\t\t\t+ '(?<delim7>.)'\n\t\t\t\t\t+ '(?<millisecond>\\\\d{3})'\n\t\t\t\t+ ')?'\n\t\t\t\t+ '(?<delim8>\\\\s)?'\n\t\t\t\t+ '(?<meridiem>am|pm|AM|PM)?'\n\t\t\t\t+ '(?:'\n\t\t\t\t\t+ '(?<delim9>\\\\s)'\n\t\t\t\t\t+ `(?<timezone>[+-]\\\\d{2}(?::?\\\\d{2})?|Z|${abbreviatedTimezones})`\n\t\t\t\t+ ')?'\n\t\t\t+ ')?'\n\t\t+ ')?'\n\t\t+ '$'\n\t)\n);\n\n/*\n * US style\n *\n * - MM/DD/YYYY\n * - M/D/YYYY\n *\n * - MM/DD/YY\n * - M/D/YY\n *\n * - MM/DD\n * - M/D\n */\nconst uSStyleSlashDelimitedDateTimeFormatParser = new Parser(\n\t'USStyleSlashDelimitedDateFormatParser',\n\tnew RegExp('^'\n\t\t+ '(?<month>0?[1-9]|1[0-2])'\n\t\t+ '(?<delim1>[/.-])'\n\t\t+ '(?<dayOfMonth>0?[1-9]|[1-2]\\\\d|3[0-1])'\n\t\t+ '(?:'\n\t\t\t+ '(?<delim2>[/.-])'\n\t\t\t+ '(?<year>\\\\d{4}|\\\\d{2})'\n\t\t+ ')?'\n\t\t+ '(?:'\n\t\t\t+ '(?:'\n\t\t\t\t+ '(?<delim3>,)?'\n\t\t\t\t+ '(?<delim4>\\\\s)'\n\t\t\t\t+ '(?:(?<twentyFourHour>2[0-3]|0?\\\\d|1\\\\d)|(?<twelveHour>0?[1-9]|1[0-2]))'\n\t\t\t\t+ '(?:'\n\t\t\t\t\t+ '(?<delim5>[:.])'\n\t\t\t\t\t+ '(?<minute>[0-5]\\\\d)'\n\t\t\t\t+ ')?'\n\t\t\t\t+ '(?:'\n\t\t\t\t\t+ '(?<delim6>[:.])'\n\t\t\t\t\t+ '(?<second>[0-5]\\\\d)'\n\t\t\t\t+ ')?'\n\t\t\t\t+ '(?:'\n\t\t\t\t\t+ '(?<delim7>.)'\n\t\t\t\t\t+ '(?<millisecond>\\\\d{3})'\n\t\t\t\t+ ')?'\n\t\t\t\t+ '(?<delim8>\\\\s)?'\n\t\t\t\t+ '(?<meridiem>am|pm|AM|PM)?'\n\t\t\t\t+ '(?:'\n\t\t\t\t\t+ '(?<delim9>\\\\s)'\n\t\t\t\t\t+ `(?<timezone>[+-]\\\\d{2}(?::?\\\\d{2})?|Z|${abbreviatedTimezones})`\n\t\t\t\t+ ')?'\n\t\t\t+ ')?'\n\t\t+ ')?'\n\t\t+ '$'\n\t)\n);\n\nconst dashDelimitedWithMonthNameDateTimeFormatParser = new Parser(\n\t'DashDelimitedWithMonthNameDateTimeFormatParser',\n\tnew RegExp('^'\n\t\t+ '(?<dayOfMonth>0?[1-9]|[1-2]\\\\d|3[0-1])'\n\t\t+ '(?<delim1>-)'\n\t\t+ '(?<month>Jan(?:uary)?|Feb(?:ruary)?|Mar(?:ch)?|Apr(?:il)?|May|June?'\n\t\t+ '|'\n\t\t+ 'July?|Aug(?:ust)?|Sep(?:tember)?|Oct(?:ober)?|Nov(?:ember)?|Dec(?:ember)?)'\n\t\t+ '(?<delim2>-)?'\n\t\t+ '(?<year>\\\\d{4}|\\\\d{2})?'\n\t\t+ '(?:'\n\t\t\t+ '(?:'\n\t\t\t\t+ '(?<delim3>,)?'\n\t\t\t\t+ '(?<delim4>\\\\s)'\n\t\t\t\t+ '(?:(?<twentyFourHour>2[0-3]|0?\\\\d|1\\\\d)|(?<twelveHour>0?[1-9]|1[0-2]))'\n\t\t\t\t+ '(?:'\n\t\t\t\t\t+ '(?<delim5>[:.])'\n\t\t\t\t\t+ '(?<minute>[0-5]\\\\d)'\n\t\t\t\t+ ')?'\n\t\t\t\t+ '(?:'\n\t\t\t\t\t+ '(?<delim6>[:.])'\n\t\t\t\t\t+ '(?<second>[0-5]\\\\d)'\n\t\t\t\t+ ')?'\n\t\t\t\t+ '(?:'\n\t\t\t\t\t+ '(?<delim7>.)'\n\t\t\t\t\t+ '(?<millisecond>\\\\d{3})'\n\t\t\t\t+ ')?'\n\t\t\t\t+ '(?<delim8>\\\\s)?'\n\t\t\t\t+ '(?<meridiem>am|pm|AM|PM)?'\n\t\t\t\t+ '(?:'\n\t\t\t\t\t+ '(?<delim9>\\\\s)'\n\t\t\t\t\t+ `(?<timezone>[+-]\\\\d{2}(?::?\\\\d{2})?|Z|${abbreviatedTimezones})`\n\t\t\t\t+ ')?'\n\t\t\t+ ')?'\n\t\t+ ')?'\n\t\t+ '$'\n\t)\n);\n\nconst parsers = [\n\tiSO8601ExtendedDateTimeFormatParser,\n\tiSO8601BasicDateTimeFormatParser,\n\trFC2822DateTimeFormatParser,\n\tslashDelimitedDateTimeFormatParser,\n\tuKStyleSlashDelimitedDateTimeFormatParser,\n\tuSStyleSlashDelimitedDateTimeFormatParser,\n\tmonthNameAndDayOfMonthDateFormatParser,\n\tdayOfMonthAndMonthNameDateFormatParser,\n\ttwentyFourHourTimeFormatParser,\n\ttwelveHourTimeFormatParser,\n\tdashDelimitedWithMonthNameDateTimeFormatParser,\n];\n\nexport default parsers;\n","import StandardFormatParsersRefiner from './StandardFormatParsersRefiner';\nimport TimeFormatRefiner from './TimeFormatRefiner';\n\nconst timeFormatRefiner = new TimeFormatRefiner('TimeFormatRefiner');\nconst standardFormatParsersRefiner = new StandardFormatParsersRefiner('StandardFormatParsersRefiner');\n\nconst refiners = [\n\tstandardFormatParsersRefiner,\n\ttimeFormatRefiner,\n];\n\nexport default refiners;\n","import {\n\tParsedResult,\n\tIRefiner,\n} from '../types';\n\nclass TimeFormatRefiner implements IRefiner {\n\tpublic readonly name: string;\n\n\tconstructor(name: string) {\n\t\tthis.name = name;\n\t}\n\n\trefine(parsedResults: Array<ParsedResult>): Array<ParsedResult> {\n\t\tparsedResults.forEach(r => {\n\t\t\tlet meridiemExists = false;\n\t\t\tr.tokens.forEach(t => {\n\t\t\t\tif (t.type === 'meridiem') {\n\t\t\t\t\tmeridiemExists = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (meridiemExists) {\n\t\t\t\tr.tokens.forEach(t => {\n\t\t\t\t\tif (t.type === 'twentyFourHour') {\n\t\t\t\t\t\tt.type = 'twelveHour';\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn parsedResults;\n\t}\n}\n\nexport default TimeFormatRefiner;\n","import {\n\tParsedResult,\n\tIRefiner,\n} from '../types';\n\nclass StandardFormatParsersRefiner implements IRefiner {\n\tpublic readonly name: string;\n\n\tconstructor(name: string) {\n\t\tthis.name = name;\n\t}\n\n\trefine(parsedResults: Array<ParsedResult>): Array<ParsedResult> {\n\t\tconst res = parsedResults.filter(r => {\n\t\t\treturn r.parser === 'ISO8601ExtendedDateTimeFormatParser' ||\n\t\t\t\tr.parser === 'ISO8601BasicDateTimeFormatParser' ||\n\t\t\t\tr.parser === 'RFC2822DateTimeFormatParser';\n\t\t});\n\t\tif (res.length === 0) {\n\t\t\treturn parsedResults;\n\t\t}\n\t\treturn res;\n\t}\n}\n\nexport default StandardFormatParsersRefiner;\n","import Token from '../parsers/Token';\nimport {\n\tIAssigner,\n} from '../types';\n\nclass YearFormatTokenAssigner implements IAssigner {\n\tpublic readonly name: string;\n\tpublic readonly type: string;\n\tpublic readonly format?: string;\n\n\tprivate _map: Map<RegExp, string>;\n\n\tconstructor(name: string, type: string, format?: string) {\n\t\tthis.name = name;\n\t\tthis.type = type;\n\t\tthis.format = format;\n\t\tthis._map = new Map();\n\n\t\tif (!format || format === 'default') {\n\t\t\tthis._map.set(/\\d{2}/, 'YY');\n\t\t\tthis._map.set(/\\d{4}/, 'YYYY');\n\t\t\tthis._map.set(/[+-]\\d{6}/, 'YYYYYY');\n\t\t} else {\n\t\t\tthis._map.set(/\\d{2}/, '%y');\n\t\t\tthis._map.set(/\\d{4}/, '%Y');\n\t\t\tthis._map.set(/[+-]\\d{6}/, 'NA');\n\t\t}\n\t}\n\n\tprivate _testTokenType(token: Token): boolean {\n\t\treturn token.type === this.type;\n\t}\n\n\tpublic assign(token: Token): void {\n\t\tthis._map.forEach((formatToken, pattern) => {\n\t\t\tif (this._testTokenType(token) && pattern.test(token.value)) {\n\t\t\t\ttoken.format = formatToken;\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport default YearFormatTokenAssigner;\n","import Token from '../parsers/Token';\nimport {\n\tIAssigner,\n} from '../types';\n\nclass MonthFormatTokenAssigner implements IAssigner {\n\tpublic readonly name: string;\n\tpublic readonly type: string;\n\tpublic readonly format?: string;\n\n\tprivate _map: Map<RegExp, string>;\n\n\tconstructor(name: string, type: string, format?: string) {\n\t\tthis.name = name;\n\t\tthis.type = type;\n\t\tthis.format = format;\n\t\tthis._map = new Map();\n\n\t\tif (!format || format === 'default') {\n\t\t\tthis._map.set(/\\d{1,2}/, 'M');\n\t\t\tthis._map.set(/\\d{2}/, 'MM');\n\t\t\tthis._map.set(/\\d{1,2}(?:st|nd|rd|th)/, 'Mo');\n\t\t\tthis._map.set(/^(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)$/, 'MMM');\n\t\t\tthis._map.set(/^(January|February|March|April|May|June|July|August|September|October|November|December)$/, 'MMMM');\n\t\t} else {\n\t\t\tthis._map.set(/\\d{1,2}/, 'NA');\n\t\t\tthis._map.set(/\\d{2}/, '%m');\n\t\t\tthis._map.set(/\\d{1,2}(?:st|nd|rd|th)/, 'NA');\n\t\t\tthis._map.set(/^(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)$/, '%b');\n\t\t\tthis._map.set(/^(January|February|March|April|May|June|July|August|September|October|November|December)$/, '%B');\n\t\t}\n\t}\n\n\tprivate _testTokenType(token: Token): boolean {\n\t\treturn token.type === this.type;\n\t}\n\n\tpublic assign(token: Token): void {\n\t\tthis._map.forEach((formatToken, pattern) => {\n\t\t\tif (this._testTokenType(token) && pattern.test(token.value)) {\n\t\t\t\ttoken.format = formatToken;\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport default MonthFormatTokenAssigner;\n","import Token from '../parsers/Token';\nimport {\n\tIAssigner,\n} from '../types';\n\nclass DayOfMonthFormatTokenAssigner implements IAssigner {\n\tpublic readonly name: string;\n\tpublic readonly type: string;\n\tpublic readonly format?: string;\n\n\tprivate _map: Map<RegExp, string>;\n\n\tconstructor(name: string, type: string, format?: string) {\n\t\tthis.name = name;\n\t\tthis.type = type;\n\t\tthis.format = format;\n\t\tthis._map = new Map();\n\n\t\tif (!format || format === 'default') {\n\t\t\tthis._map.set(/\\d{1,2}/, 'D');\n\t\t\tthis._map.set(/\\d{2}/, 'DD');\n\t\t\tthis._map.set(/\\d{1,2}(?:st|nd|rd|th)/, 'Do');\n\t\t} else {\n\t\t\tthis._map.set(/\\d{1,2}/, '%-e');\n\t\t\tthis._map.set(/\\d{2}/, '%d');\n\t\t\tthis._map.set(/\\d{1,2}(?:st|nd|rd|th)/, '%o');\n\t\t}\n\t}\n\n\tprivate _testTokenType(token: Token): boolean {\n\t\treturn token.type === this.type;\n\t}\n\n\tpublic assign(token: Token): void {\n\t\tthis._map.forEach((formatToken, pattern) => {\n\t\t\tif (this._testTokenType(token) && pattern.test(token.value)) {\n\t\t\t\ttoken.format = formatToken;\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport default DayOfMonthFormatTokenAssigner; \n","import Token from '../parsers/Token';\nimport {\n\tIAssigner,\n} from '../types';\n\nclass DelimiterFormatTokenAssigner implements IAssigner {\n\tpublic readonly name: string;\n\tpublic readonly type: string;\n\tpublic readonly format?: string;\n\n\tconstructor(name: string, type: string, format?: string) {\n\t\tthis.name = name;\n\t\tthis.format = format;\n\t\tthis.type = type;\n\t}\n\n\tpublic assign(token: Token): void { /* noop */ }\n}\n\nexport default DelimiterFormatTokenAssigner;\n","import Token from '../parsers/Token';\nimport {\n\tIAssigner,\n} from '../types';\n\nclass MinuteFormatTokenAssigner implements IAssigner {\n\tpublic readonly name: string;\n\tpublic readonly type: string;\n\tpublic readonly format?: string;\n\n\tprivate _map: Map<RegExp, string>;\n\n\tconstructor(name: string, type: string, format?: string) {\n\t\tthis.name = name;\n\t\tthis.type = type;\n\t\tthis.format = format;\n\t\tthis._map = new Map();\n\n\t\tif (!format || format === 'default') {\n\t\t\tthis._map.set(/\\d{1,2}/, 'm');\n\t\t\tthis._map.set(/\\d{2}/, 'mm');\n\t\t} else {\n\t\t\tthis._map.set(/\\d{1,2}/, 'NA');\n\t\t\tthis._map.set(/\\d{2}/, '%M');\n\t\t}\n\t}\n\n\tprivate _testTokenType(token: Token): boolean {\n\t\treturn token.type === this.type;\n\t}\n\n\tpublic assign(token: Token): void {\n\t\tthis._map.forEach((formatToken, pattern) => {\n\t\t\tif (this._testTokenType(token) && pattern.test(token.value)) {\n\t\t\t\ttoken.format = formatToken;\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport default MinuteFormatTokenAssigner;\n","import Token from '../parsers/Token';\nimport {\n\tIAssigner,\n} from '../types';\n\nclass SecondFormatTokenAssigner implements IAssigner {\n\tpublic readonly name: string;\n\tpublic readonly type: string;\n\tpublic readonly format?: string;\n\n\tprivate _map: Map<RegExp, string>;\n\n\tconstructor(name: string, type: string, format?: string) {\n\t\tthis.name = name;\n\t\tthis.type = type;\n\t\tthis.format = format;\n\t\tthis._map = new Map();\n\n\t\tif (!format || format === 'default') {\n\t\t\tthis._map.set(/\\d{1,2}/, 's');\n\t\t\tthis._map.set(/\\d{2}/, 'ss');\n\t\t} else {\n\t\t\tthis._map.set(/\\d{1,2}/, 'NA');\n\t\t\tthis._map.set(/\\d{2}/, '%S');\n\t\t}\n\t}\n\n\tprivate _testTokenType(token: Token): boolean {\n\t\treturn token.type === this.type;\n\t}\n\n\tpublic assign(token: Token): void {\n\t\tthis._map.forEach((formatToken, pattern) => {\n\t\t\tif (this._testTokenType(token) && pattern.test(token.value)) {\n\t\t\t\ttoken.format = formatToken;\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport default SecondFormatTokenAssigner;\n","import Token from '../parsers/Token';\nimport {\n\tIAssigner,\n} from '../types';\n\nclass MillisecondFormatTokenAssigner implements IAssigner {\n\tpublic readonly name: string;\n\tpublic readonly type: string;\n\tpublic readonly format?: string;\n\n\tprivate _map: Map<RegExp, string>;\n\n\tconstructor(name: string, type: string, format?: string) {\n\t\tthis.name = name;\n\t\tthis.type = type;\n\t\tthis.format = format;\n\t\tthis._map = new Map();\n\n\t\tif (!format || format === 'default') {\n\t\t\tthis._map.set(/\\d/, 'S');\n\t\t\tthis._map.set(/\\d{2}/, 'SS');\n\t\t\tthis._map.set(/\\d{3}/, 'SSS');\n\t\t} else {\n\t\t\tthis._map.set(/\\d/, 'NA');\n\t\t\tthis._map.set(/\\d{2}/, 'NA');\n\t\t\tthis._map.set(/\\d{3}/, '%L');\n\t\t}\n\t}\n\n\tprivate _testTokenType(token: Token): boolean {\n\t\treturn token.type === this.type;\n\t}\n\n\tpublic assign(token: Token): void {\n\t\tthis._map.forEach((formatToken, pattern) => {\n\t\t\tif (this._testTokenType(token) && pattern.test(token.value)) {\n\t\t\t\ttoken.format = formatToken;\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport default MillisecondFormatTokenAssigner;\n","import Token from '../parsers/Token';\nimport {\n\tIAssigner,\n} from '../types';\n\nclass TimezoneFormatTokenAssigner implements IAssigner {\n\tpublic readonly name: string;\n\tpublic readonly type: string;\n\tpublic readonly format?: string;\n\n\tprivate _map: Map<RegExp, string>;\n\n\tconstructor(name: string, type: string, format?: string) {\n\t\tthis.name = name;\n\t\tthis.type = type;\n\t\tthis.format = format;\n\t\tthis._map = new Map();\n\n\t\tconst abbreviatedTimezoneRegex = new RegExp(\n\t\t\t'UT|'\n\n\t\t\t// https://www.timeanddate.com/time/zones/africa\n\t\t\t+ 'CAT|CET|CVT|EAT|EET|GMT|MUT|RET|SAST|SCT|WAST|WAT|WEST|WET|WST|WT|'\n\n\t\t\t// https://www.timeanddate.com/time/zones/asia\n\t\t\t+ 'ADT|AFT|ALMT|AMST|AMT|ANAST|ANAT|AQTT|AST|AZST|AZT|BNT|BST|BTT|CHOST|CHOT|'\n\t\t\t+ 'CST|EEST|EET|GET|GST|HKT|HOVST|HOVT|ICT|IDT|IRDT|IRKST|IRKT|IST|JST|KGT|KRAST|'\n\t\t\t+ 'KRAT|KST|MAGST|MAGT|MMT|MSK|MVT|NOVST|NOVT|NPT|OMSST|OMST|ORAT|PETST|PETT|PHT|'\n\t\t\t+ 'PKT|PYT|QYZT|SAKT|SGT|SRET|TJT|TLT|TMT|TRT|ULAST|ULAT|UZT|VLAST|VLAT|WIB|WIT|'\n\t\t\t+ 'YAKST|YAKT|YEKST|YEKT|'\n\n\t\t\t// https://www.timeanddate.com/time/zones/antarctica\n\t\t\t+ 'ART|CAST|CEST|CLST|CLT|DAVT|DDUT|GMT|MAWT|NZDT|NZST|ROTT|SYOT|VOST|'\n\n\t\t\t// https://www.timeanddate.com/time/zones/atlantic\n\t\t\t+ 'ADT|AST|AT|AZOST|AZOT|'\n\n\t\t\t// https://www.timeanddate.com/time/zones/au\n\t\t\t+ 'ACDT|ACST|ACT|ACWST|AEDT|AEST|AET|AWDT|AWST|CXT|LHDT|LHST|NFDT|NFT|'\n\n\t\t\t// https://www.timeanddate.com/time/zones/caribbean\n\t\t\t+ 'AST|AT|CDT|CIDST|CIST|CST|EDT|EST|ET|'\n\n\t\t\t// https://www.timeanddate.com/time/zones/ca\n\t\t\t+ 'CST|CT|EST|ET|'\n\n\t\t\t// https://www.timeanddate.com/time/zones/eu\n\t\t\t+ 'BST|CEST|CET|EEST|EET|FET|GET|GMT|IST|KUYT|MSD|MSK|SAMT|TRT|WEST|WET|'\n\n\t\t\t// https://www.timeanddate.com/time/zones/indian-ocean\n\t\t\t+ 'CCT|EAT|IOT|TFT|'\n\n\t\t\t// https://www.timeanddate.com/time/zones/na\n\t\t\t+ 'ADT|AKDT|AKST|AST|AT|CDT|CST|CT|EDT|EGST|EGT|ET|GMT|HDT|HST|MDT|MST|MT|NDT|NST|PDT|PMDT|PMST|PST|PT|WGST|WGT|'\n\n\t\t\t// https://www.timeanddate.com/time/zones/pacific\n\t\t\t+ 'AoE|BST|CHADT|CHAST|CHUT|CKT|ChST|EASST|EAST|FJST|FJT|GALT|GAMT|GILT|HST|KOST|LINT|MART|'\n\t\t\t+ 'MHT|NCT|NRT|NUT|NZDT|NZST|PGT|PHOT|PONT|PST|PWT|SBT|SST|TAHT|TKT|TOST|TOT|TVT|VUT|WAKT|WFT|WST|YAPT|'\n\n\t\t\t// https://www.timeanddate.com/time/zones/sa\n\t\t\t+ 'ACT|AMST|AMT|ART|BOT|BRST|BRT|CLST|CLT|COT|ECT|FKST|FKT|FNT|GFT|GST|GYT|PET|PYST|PYT|SRT|UYST|UYT|VET|WARST'\n\t\t);\n\n\t\tif (!format || format === 'default') {\n\t\t\tthis._map.set(/[+-]\\d{2}(?::\\d{2})?/, 'Z');\n\t\t\tthis._map.set(/[+-]\\d{4}/, 'ZZ');\n\n\t\t\t// Treat these as escaped text\n\t\t\tthis._map.set(/Z/, '[Z]');\n\t\t\tthis._map.set(/z/, '[z]');\n\n\n\t\t\tthis._map.set(abbreviatedTimezoneRegex, 'z');\n\t\t} else {\n\t\t\tthis._map.set(/[+-]\\d{2}(?::\\d{2})?/, '%:z');\n\t\t\tthis._map.set(/[+-]\\d{4}/, '%z');\n\n\t\t\t// Treat these as escaped text\n\t\t\tthis._map.set(/Z/, 'Z');\n\t\t\tthis._map.set(/z/, 'z');\n\n\t\t\tthis._map.set(abbreviatedTimezoneRegex, '%Z');\n\t\t}\n\t}\n\n\tprivate _testTokenType(token: Token): boolean {\n\t\treturn token.type === this.type;\n\t}\n\n\tpublic assign(token: Token): void {\n\t\tthis._map.forEach((formatToken, pattern) => {\n\t\t\tif (this._testTokenType(token) && pattern.test(token.value)) {\n\t\t\t\ttoken.format = formatToken;\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport default TimezoneFormatTokenAssigner;\n","import Token from '../parsers/Token';\nimport {\n\tIAssigner,\n} from '../types';\n\nclass DayOfYearFormatTokenAssigner implements IAssigner {\n\tpublic readonly name: string;\n\tpublic readonly type: string;\n\tpublic readonly format?: string;\n\n\tprivate _map: Map<RegExp, string>;\n\n\tconstructor(name: string, type: string, format?: string) {\n\t\tthis.name = name;\n\t\tthis.type = type;\n\t\tthis.format = format;\n\t\tthis._map = new Map();\n\n\t\tif (!format || format === 'default') {\n\t\t\tthis._map.set(/\\d{1,3}/, 'DDD');\n\t\t\tthis._map.set(/\\d{3}/, 'DDDD');\n\t\t\tthis._map.set(/\\d{1,3}(?:st|nd|rd|th)/, 'DDDo');\n\t\t} else {\n\t\t\tthis._map.set(/\\d{1,3}/, 'NA');\n\t\t\tthis._map.set(/\\d{3}/, '%j');\n\t\t\tthis._map.set(/\\d{1,3}(?:st|nd|rd|th)/, 'NA');\n\t\t}\n\t}\n\n\tprivate _testTokenType(token: Token): boolean {\n\t\treturn token.type === this.type;\n\t}\n\n\tpublic assign(token: Token): void {\n\t\tthis._map.forEach((formatToken, pattern) => {\n\t\t\tif (this._testTokenType(token) && pattern.test(token.value)) {\n\t\t\t\ttoken.format = formatToken;\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport default DayOfYearFormatTokenAssigner;\n","import Token from '../parsers/Token';\nimport {\n\tIAssigner,\n} from '../types';\n\nclass EscapeTextFormatTokenAssigner implements IAssigner {\n\tpublic readonly name: string;\n\tpublic readonly type: string;\n\tpublic readonly format?: string;\n\n\tconstructor(name: string, type: string, format?: string) {\n\t\tthis.name = name;\n\t\tthis.type = type;\n\t\tthis.format = format;\n\t}\n\n\tprivate _testTokenType(token: Token): boolean {\n\t\treturn token.type === this.type;\n\t}\n\n\tpublic assign(token: Token): void {\n\t\tif (this._testTokenType(token)) {\n\t\t\ttoken.format = (!this.format || this.format === 'default') ? `[${token.value}]` : token.value;\n\t\t}\n\t}\n}\n\nexport default EscapeTextFormatTokenAssigner;\n","import Token from '../parsers/Token';\nimport {\n\tIAssigner,\n} from '../types';\n\nclass ISODayOfWeekFormatTokenAssigner implements IAssigner {\n\tpublic readonly name: string;\n\tpublic readonly type: string;\n\tpublic readonly format?: string;\n\n\tprivate _map: Map<RegExp, string>;\n\n\tconstructor(name: string, type: string, format?: string) {\n\t\tthis.name = name;\n\t\tthis.type = type;\n\t\tthis.format = format;\n\t\tthis._map = new Map();\n\n\t\tif (!format || format === 'default') {\n\t\t\tthis._map.set(/[1-7]/, 'E');\n\t\t} else {\n\t\t\tthis._map.set(/[1-7]/, '%u');\n\t\t}\n\t}\n\n\tprivate _testTokenType(token: Token): boolean {\n\t\treturn token.type === this.type;\n\t}\n\n\tpublic assign(token: Token): void {\n\t\tthis._map.forEach((formatToken, pattern) => {\n\t\t\tif (this._testTokenType(token) && pattern.test(token.value)) {\n\t\t\t\ttoken.format = formatToken;\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport default ISODayOfWeekFormatTokenAssigner;\n","import Token from '../parsers/Token';\nimport {\n\tIAssigner,\n} from '../types';\n\nclass ISOWeekOfYearFormatTokenAssigner implements IAssigner {\n\tpublic readonly name: string;\n\tpublic readonly type: string;\n\tpublic readonly format?: string;\n\n\tprivate _map: Map<RegExp, string>;\n\n\tconstructor(name: string, type: string, format?: string) {\n\t\tthis.name = name;\n\t\tthis.type = type;\n\t\tthis.format = format;\n\t\tthis._map = new Map();\n\n\t\tif (!format || format === 'default') {\n\t\t\tthis._map.set(/\\d{1,2}/, 'W');\n\t\t\tthis._map.set(/\\d{2}/, 'WW');\n\t\t\tthis._map.set(/\\d{1,2}(?:st|nd|rd|th)/, 'Wo');\n\t\t} else {\n\t\t\tthis._map.set(/\\d{1,2}/, 'NA');\n\t\t\tthis._map.set(/\\d{2}/, '%U');\n\t\t\tthis._map.set(/\\d{1,2}(?:st|nd|rd|th)/, 'NA');\n\t\t}\n\t}\n\n\tprivate _testTokenType(token: Token): boolean {\n\t\treturn token.type === this.type;\n\t}\n\n\tpublic assign(token: Token): void {\n\t\tthis._map.forEach((formatToken, pattern) => {\n\t\t\tif (this._testTokenType(token) && pattern.test(token.value)) {\n\t\t\t\ttoken.format = formatToken;\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport default ISOWeekOfYearFormatTokenAssigner;\n","import Token from '../parsers/Token';\nimport {\n\tIAssigner,\n} from '../types';\n\nclass TwentyFourHourFormatTokenAssigner implements IAssigner {\n\tpublic readonly name: string;\n\tpublic readonly type: string;\n\tpublic readonly format?: string;\n\n\tprivate _map: Map<RegExp, string>;\n\n\tconstructor(name: string, type: string, format?: string) {\n\t\tthis.name = name;\n\t\tthis.type = type;\n\t\tthis.format = format;\n\t\tthis._map = new Map();\n\n\t\tif (!format || format === 'default') {\n\t\t\tthis._map.set(/^(\\d|1\\d|2[0-3])$/, 'H');\n\t\t\tthis._map.set(/^([0-1]\\d|2[0-3])$/, 'HH');\n\t\t} else {\n\t\t\tthis._map.set(/^(\\d|1\\d|2[0-3])$/, '%-k');\n\t\t\tthis._map.set(/^([0-1]\\d|2[0-3])$/, '%H');\n\t\t}\n\t}\n\n\tprivate _testTokenType(token: Token): boolean {\n\t\treturn token.type === this.type;\n\t}\n\n\tpublic assign(token: Token): void {\n\t\tthis._map.forEach((formatToken, pattern) => {\n\t\t\tif (this._testTokenType(token) && pattern.test(token.value)) {\n\t\t\t\ttoken.format = formatToken;\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport default TwentyFourHourFormatTokenAssigner;\n","import Token from '../parsers/Token';\nimport {\n\tIAssigner,\n} from '../types';\n\nclass TwelveHourFormatTokenAssigner implements IAssigner {\n\tpublic readonly name: string;\n\tpublic readonly type: string;\n\tpublic readonly format?: string;\n\n\tprivate _map: Map<RegExp, string>;\n\n\tconstructor(name: string, type: string, format?: string) {\n\t\tthis.name = name;\n\t\tthis.type = type;\n\t\tthis.format = format;\n\t\tthis._map = new Map();\n\n\t\tif (!format || format === 'default') {\n\t\t\tthis._map.set(/^([1-9]|1[0-2])$/, 'h');\n\t\t\tthis._map.set(/^(0\\d|1[0-2])$/, 'hh');\n\t\t} else {\n\t\t\tthis._map.set(/^([1-9]|1[0-2])$/, '%-l');\n\t\t\tthis._map.set(/^(0\\d|1[0-2])$/, '%I');\n\t\t}\n\t}\n\n\tprivate _testTokenType(token: Token): boolean {\n\t\treturn token.type === this.type;\n\t}\n\n\tpublic assign(token: Token): void {\n\t\tthis._map.forEach((formatToken, pattern) => {\n\t\t\tif (this._testTokenType(token) && pattern.test(token.value)) {\n\t\t\t\ttoken.format = formatToken;\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport default TwelveHourFormatTokenAssigner;\n","import Token from '../parsers/Token';\nimport {\n\tIAssigner,\n} from '../types';\n\nclass DayOfWeekFormatTokenAssigner implements IAssigner {\n\tpublic readonly name: string;\n\tpublic readonly type: string;\n\tpublic readonly format?: string;\n\n\tprivate _map: Map<RegExp, string>;\n\n\tconstructor(name: string, type: string, format?: string) {\n\t\tthis.name = name;\n\t\tthis.type = type;\n\t\tthis.format = format;\n\t\tthis._map = new Map();\n\n\t\tif (!format || format === 'default') {\n\t\t\tthis._map.set(/[0-6]/, 'd');\n\t\t\tthis._map.set(/[0-6](?:st|nd|rd|th)/, 'do');\n\t\t\tthis._map.set(/(?:Su|Mo|Tu|We|Th|Fr|Sa)/, 'dd');\n\t\t\tthis._map.set(/(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)/, 'ddd');\n\t\t\tthis._map.set(/(?:Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)/, 'dddd');\n\t\t} else {\n\t\t\tthis._map.set(/[0-6]/, '%w');\n\t\t\tthis._map.set(/[0-6](?:st|nd|rd|th)/, 'NA');\n\t\t\tthis._map.set(/(?:Su|Mo|Tu|We|Th|Fr|Sa)/, 'NA');\n\t\t\tthis._map.set(/(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)/, '%a');\n\t\t\tthis._map.set(/(?:Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)/, '%A');\n\t\t}\n\t}\n\n\tprivate _testTokenType(token: Token): boolean {\n\t\treturn token.type === this.type;\n\t}\n\n\tpublic assign(token: Token): void {\n\t\tthis._map.forEach((formatToken, pattern) => {\n\t\t\tif (this._testTokenType(token) && pattern.test(token.value)) {\n\t\t\t\ttoken.format = formatToken;\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport default DayOfWeekFormatTokenAssigner; \n","import Token from '../parsers/Token';\nimport {\n\tIAssigner,\n} from '../types';\n\nclass MeridiemFormatTokenAssigner implements IAssigner {\n\tpublic readonly name: string;\n\tpublic readonly type: string;\n\tpublic readonly format?: string;\n\n\tprivate _map: Map<RegExp, string>;\n\n\tconstructor(name: string, type: string, format?: string) {\n\t\tthis.name = name;\n\t\tthis.type = type;\n\t\tthis.format = format;\n\t\tthis._map = new Map();\n\n\t\tif (!format || format === 'default') {\n\t\t\tthis._map.set(/am|pm/, 'a');\n\t\t\tthis._map.set(/AM|PM/, 'A');\n\t\t} else {\n\t\t\tthis._map.set(/am|pm/, '%P');\n\t\t\tthis._map.set(/AM|PM/, '%p');\n\t\t}\n\t}\n\n\tprivate _testTokenType(token: Token): boolean {\n\t\treturn token.type === this.type;\n\t}\n\n\tpublic assign(token: Token): void {\n\t\tthis._map.forEach((formatToken, pattern) => {\n\t\t\tif (this._testTokenType(token) && pattern.test(token.value)) {\n\t\t\t\ttoken.format = formatToken;\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport default MeridiemFormatTokenAssigner;\n","import YearFormatTokenAssigner from './YearFormatTokenAssigner';\nimport MonthFormatTokenAssigner from './MonthFormatTokenAssigner';\nimport DayOfMonthFormatTokenAssigner from './DayOfMonthFormatTokenAssigner';\nimport DelimiterFormatTokenAssigner from './DelimiterFormatTokenAssigner';\nimport MinuteFormatTokenAssigner from './MinuteFormatTokenAssigner';\nimport SecondFormatTokenAssigner from './SecondFormatTokenAssigner';\nimport MillisecondFormatTokenAssigner from './MillisecondFormatTokenAssigner';\nimport TimezoneFormatTokenAssigner from './TimezoneFormatTokenAssigner';\nimport DayOfYearFormatTokenAssigner from './DayOfYearFormatTokenAssigner';\nimport EscapeTextFormatTokenAssigner from './EscapeTextFormatTokenAssigner';\nimport ISODayOfWeekFormatTokenAssigner from './ISODayOfWeekFormatTokenAssigner';\nimport ISOWeekOfYearFormatTokenAssigner from './ISOWeekOfYearFormatTokenAssigner';\nimport TwentyFourHourFormatTokenAssigner from './TwentyFourHourFormatTokenAssigner';\nimport TwelveHourFormatTokenAssigner from './TwelveHourFormatTokenAssigner';\nimport DayOfWeekFormatTokenAssigner from './DayOfWeekFormatTokenAssigner';\nimport MeridiemFormatTokenAssigner from './MeridiemFormatTokenAssigner';\n\nconst dayOfMonthFormatTokenAssigner = new DayOfMonthFormatTokenAssigner('DelimiterFormatTokenAssigner', 'dayOfMonth');\nconst dayOfWeekFormatTokenAssigner = new DayOfWeekFormatTokenAssigner('DayOfWeekFormatTokenAssigner', 'dayOfWeek');\nconst dayOfYearFormatTokenAssigner  = new DayOfYearFormatTokenAssigner('DayOfYearFormatTokenAssigner', 'dayOfYear');\nconst delimiterFormatTokenAssigner = new DelimiterFormatTokenAssigner('DelimiterFormatTokenAssigner', 'delimiter');\nconst escapeTextFormatTokenAssigner = new EscapeTextFormatTokenAssigner('EscapeTextFormatTokenAssigner', 'escapeText');\nconst iSODayOfWeekFormatTokenAssigner = new ISODayOfWeekFormatTokenAssigner('ISODayOfWeekFormatTokenAssigner', 'isoDayOfWeek');\nconst iSOWeekOfYearFormatTokenAssigner = new ISOWeekOfYearFormatTokenAssigner('ISOWeekOfYearFormatTokenAssigner', 'isoWeekOfYear');\nconst meridiemFormatTokenAssigner = new MeridiemFormatTokenAssigner('MeridiemFormatTokenAssigner', 'meridiem');\nconst millisecondFormatTokenAssigner = new MillisecondFormatTokenAssigner('MillisecondFormatTokenAssigner', 'millisecond');\nconst minuteFormatTokenAssigner = new MinuteFormatTokenAssigner('MinuteFormatTokenAssigner', 'minute');\nconst monthFormatTokenAssigner = new MonthFormatTokenAssigner('MonthFormatTokenAssigner', 'month');\nconst secondFormatTokenAssigner = new SecondFormatTokenAssigner('SecondFormatTokenAssigner', 'second');\nconst timezoneFormatTokenAssigner = new TimezoneFormatTokenAssigner('TimezoneFormatTokenAssigner', 'timezone');\nconst twelveHourFormatTokenAssigner = new TwelveHourFormatTokenAssigner('TwelveHourFormatTokenAssigner', 'twelveHour');\nconst twentyFourHourFormatTokenAssigner = new TwentyFourHourFormatTokenAssigner('TwentyFourHourFormatTokenAssigner', 'twentyFourHour');\nconst yearFormatTokenAssigner = new YearFormatTokenAssigner('YearFormatTokenAssigner', 'year');\n\nconst strftimeDayOfMonthFormatTokenAssigner = new DayOfMonthFormatTokenAssigner('DelimiterFormatTokenAssigner', 'dayOfMonth', 'strftime');\nconst strftimeDayOfWeekFormatTokenAssigner = new DayOfWeekFormatTokenAssigner('DayOfWeekFormatTokenAssigner', 'dayOfWeek', 'strftime');\nconst strftimeDayOfYearFormatTokenAssigner  = new DayOfYearFormatTokenAssigner('DayOfYearFormatTokenAssigner', 'dayOfYear', 'strftime');\nconst strftimeDelimiterFormatTokenAssigner = new DelimiterFormatTokenAssigner('DelimiterFormatTokenAssigner', 'delimiter', 'strftime');\nconst strftimeEscapeTextFormatTokenAssigner = new EscapeTextFormatTokenAssigner('EscapeTextFormatTokenAssigner', 'escapeText', 'strftime');\nconst strftimeISODayOfWeekFormatTokenAssigner = new ISODayOfWeekFormatTokenAssigner('ISODayOfWeekFormatTokenAssigner', 'isoDayOfWeek', 'strftime');\nconst strftimeISOWeekOfYearFormatTokenAssigner = new ISOWeekOfYearFormatTokenAssigner('ISOWeekOfYearFormatTokenAssigner', 'isoWeekOfYear', 'strftime');\nconst strftimeMeridiemFormatTokenAssigner = new MeridiemFormatTokenAssigner('MeridiemFormatTokenAssigner', 'meridiem', 'strftime');\nconst strftimeMillisecondFormatTokenAssigner = new MillisecondFormatTokenAssigner('MillisecondFormatTokenAssigner', 'millisecond', 'strftime');\nconst strftimeMinuteFormatTokenAssigner = new MinuteFormatTokenAssigner('MinuteFormatTokenAssigner', 'minute', 'strftime');\nconst strftimeMonthFormatTokenAssigner = new MonthFormatTokenAssigner('MonthFormatTokenAssigner', 'month', 'strftime');\nconst strftimeSecondFormatTokenAssigner = new SecondFormatTokenAssigner('SecondFormatTokenAssigner', 'second', 'strftime');\nconst strftimeTimezoneFormatTokenAssigner = new TimezoneFormatTokenAssigner('TimezoneFormatTokenAssigner', 'timezone', 'strftime');\nconst strftimeTwelveHourFormatTokenAssigner = new TwelveHourFormatTokenAssigner('TwelveHourFormatTokenAssigner', 'twelveHour', 'strftime');\nconst strftimeTwentyFourHourFormatTokenAssigner = new TwentyFourHourFormatTokenAssigner('TwentyFourHourFormatTokenAssigner', 'twentyFourHour', 'strftime');\nconst strftimeYearFormatTokenAssigner = new YearFormatTokenAssigner('YearFormatTokenAssigner', 'year', 'strftime');\n\nexport const defaultAssigners = [\n\tyearFormatTokenAssigner,\n\tmonthFormatTokenAssigner,\n\tdayOfMonthFormatTokenAssigner,\n\tdelimiterFormatTokenAssigner,\n\tminuteFormatTokenAssigner,\n\tsecondFormatTokenAssigner,\n\tmillisecondFormatTokenAssigner,\n\ttimezoneFormatTokenAssigner,\n\tdayOfYearFormatTokenAssigner,\n\tescapeTextFormatTokenAssigner,\n\tiSODayOfWeekFormatTokenAssigner,\n\tiSOWeekOfYearFormatTokenAssigner,\n\ttwentyFourHourFormatTokenAssigner,\n\ttwelveHourFormatTokenAssigner,\n\tdayOfWeekFormatTokenAssigner,\n\tmeridiemFormatTokenAssigner,\n];\n\nexport const strftimeAssigners = [\n\tstrftimeDayOfMonthFormatTokenAssigner,\n\tstrftimeDayOfWeekFormatTokenAssigner,\n\tstrftimeDayOfYearFormatTokenAssigner,\n\tstrftimeDelimiterFormatTokenAssigner,\n\tstrftimeEscapeTextFormatTokenAssigner,\n\tstrftimeISODayOfWeekFormatTokenAssigner,\n\tstrftimeISOWeekOfYearFormatTokenAssigner,\n\tstrftimeMeridiemFormatTokenAssigner,\n\tstrftimeMillisecondFormatTokenAssigner,\n\tstrftimeMinuteFormatTokenAssigner,\n\tstrftimeMonthFormatTokenAssigner,\n\tstrftimeSecondFormatTokenAssigner,\n\tstrftimeTimezoneFormatTokenAssigner,\n\tstrftimeTwelveHourFormatTokenAssigner,\n\tstrftimeTwentyFourHourFormatTokenAssigner,\n\tstrftimeYearFormatTokenAssigner,\n];\n","import parsers from './parsers';\nimport refiners from './refiners';\nimport { strftimeAssigners, defaultAssigners } from './assigners';\nimport Token from './parsers/Token';\n\nimport {\n\tDate,\n\tFormat,\n\tParsedResult,\n} from './types';\n\nexport default class Guesser {\n\n\tconstructor() {}\n\n\tstatic parse(date: Date): Array<ParsedResult> {\n\t\tconst parsedResults: Array<ParsedResult> = [];\n\t\tparsers.forEach(parser => {\n\t\t\tconst parsedResult = parser.parse(date);\n\t\t\tif (parsedResult) {\n\t\t\t\tparsedResults.push({...parsedResult});\n\t\t\t}\n\t\t});\n\t\treturn parsedResults;\n\t}\n\n\tstatic refine(parsedResults: Array<ParsedResult>): Array<ParsedResult> {\n\t\tlet refinedParsedResults: Array<ParsedResult> = [...parsedResults];\n\t\trefiners.forEach(refiner => {\n\t\t\trefinedParsedResults = [\n\t\t\t\t...refiner.refine(refinedParsedResults)\n\t\t\t];\n\t\t});\n\t\treturn refinedParsedResults;\n\t}\n\n\tstatic assign(tokens: Array<Token>, format?: string): void {\n\t\tlet assigners = (!format || format === 'default') ? defaultAssigners : strftimeAssigners;\n\t\tassigners.forEach(assigner => {\n\t\t\ttokens.forEach(token => {\n\t\t\t\tassigner.assign(token);\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic getFormatString(tokens: Array<Token>): Format {\n\t\tlet formatString: Format = '';\n\t\ttokens.forEach(token => {\n\t\t\tif (token.format === 'NA') {\n\t\t\t\tthrow Error(`Couldn't find strftime modifier for \"${token.value}\"`);\n\t\t\t}\n\t\t\tformatString += token.format ? token.format : token.value;\n\t\t});\n\t\treturn formatString;\n\t}\n}\n","import Guesser from './Guesser';\nimport {\n\tDate,\n\tFormat,\n} from './types';\n\nexport default function guessFormat(date: Date, format?: string): Array<Format> | Format {\n\tconst parsedResults = Guesser.parse(date);\n\tconst refinedParsedResults = Guesser.refine(parsedResults);\n\tif (refinedParsedResults.length === 0) {\n\t    throw Error(\"Couldn't parse date\");\n\t}\n\trefinedParsedResults.forEach(r => Guesser.assign(r.tokens, format));\n\tlet matchedFormats: Array<Format> = [];\n\trefinedParsedResults.forEach(r => matchedFormats.push(Guesser.getFormatString(r.tokens)));\n\treturn (\n\t\tmatchedFormats.length === 1\n\t\t? matchedFormats[0]\n\t\t: matchedFormats\n\t);\n}\n","/**\n * emit.js implements an Emitter class which emits events to a list of listeners. Listeners are\n * simply functions to call, and \"emitting an event\" just calls those functions.\n *\n * This is similar to Backbone events, with more focus on efficiency. Both inserting and removing\n * listeners is constant time.\n *\n * To create an emitter:\n *    let emitter = new Emitter();\n *\n * To add a listener:\n *    let listener = fooEmitter.addListener(callback);\n * To remove a listener:\n *    listener.dispose();\n *\n * The only way to remove a listener is to dispose the Listener object returned by addListener().\n * You can often use autoDispose to do this automatically when subscribing in a constructor:\n *    this.autoDispose(fooEmitter.addListener(this.onFoo, this));\n *\n * To emit an event, call emit() with any number of arguments:\n *    emitter.emit(\"hello\", \"world\");\n */\n\n// Note about a possible alternative implementation.\n//\n// We could implement the same interface using an array of listeners. Certain issues apply, in\n// particular with removing listeners from inside emit(), and in ensuring that removals are\n// constant time on average. Such an implementation was attempted and timed. The result is that\n// compared to the linked-list implementation here, add/remove combination could be made nearly\n// twice faster (on average), while emit and add/remove/emit are consistently slightly slower.\n//\n// The implementation here was chosen based on those timings, and as the simpler one. For example,\n// on one setup (macbook, node4, 5-listener queue), add+remove take 0.1us, while add+remove+emit\n// take 3.82us. (In array-based implementation with same set up, add+remove is 0.06us, while\n// add+remove+emit is 4.80us.)\n\n// The private property name to hold next/prev pointers.\n\nfunction _noop() { /* noop */}\n\nexport type ListenerCB<T> = (this: T, ...args: any[]) => void;\nexport type ChangeCB = (hasListeners: boolean) => void;\n\n/**\n * This is an implementation of a doubly-linked list, with just the minimal functionality we need.\n */\nexport class LLink {\n  protected _next: LLink|null = null;\n  protected _prev: LLink|null = null;\n\n  constructor() {\n    // This immediate circular reference might be undesirable for GC, but might not matter, and\n    // makes the linked list implementation simpler and faster.\n    this._next = this;\n    this._prev = this;\n  }\n\n  public isDisposed(): boolean {\n    return !this._next;\n  }\n\n  protected _insertBefore(next: LLink, node: LLink): void {\n    const last = next._prev!;\n    last._next = node;\n    next._prev = node;\n    node._prev = last;\n    node._next = next;\n  }\n\n  protected _removeNode(node: LLink): void {\n    if (node._prev) {\n      node._prev._next = node._next;\n      node._next!._prev = node._prev;\n    }\n    node._prev = node._next = null;\n  }\n\n  protected _disposeList(): void {\n    let node: LLink = this;\n    let next = node._next;\n    while (next !== null) {\n      node._next = node._prev = null;\n      node = next;\n      next = node._next;\n    }\n  }\n}\n\nexport class Emitter extends LLink {\n  private _changeCB: ChangeCB = _noop;\n  private _changeCBContext: any = undefined;\n\n  /**\n   * Constructs an Emitter object.\n   */\n  constructor() { super(); }\n\n  /**\n   * Adds a listening callback to the list of functions to call on emit().\n   * @param {Function} callback: Function to call.\n   * @param {Object} optContext: Context for the function.\n   * @returns {Listener} Listener object. Its dispose() method removes the callback from the list.\n   */\n  public addListener<T>(callback: ListenerCB<T>, optContext?: T): Listener {\n    return new Listener(this, callback, optContext);\n  }\n\n  /**\n   * Calls all listener callbacks, passing all arguments to each of them.\n   */\n  public emit(...args: any[]): void {\n    Listener.callAll(this._next!, this, args);\n  }\n\n  /**\n   * Sets the single callback that would get called when a listener is added or removed.\n   * @param {Function} changeCB(hasListeners): Function to call after a listener is added or\n   *    removed. It's called with a boolean indicating whether this Emitter has any listeners.\n   *    Pass in `null` to unset the callback. Note that it can be called multiple times in a row\n   *    with hasListeners `true`.\n   */\n  public setChangeCB(changeCB: ChangeCB, optContext?: any): void {\n    this._changeCB = changeCB || _noop;\n    this._changeCBContext = optContext;\n  }\n\n  /**\n   * Helper used by Listener class, but not intended for public usage.\n   */\n  public _triggerChangeCB(): void {\n    this._changeCB.call(this._changeCBContext, this.hasListeners());\n  }\n\n  /**\n   * Returns whether this Emitter has any listeners.\n   */\n  public hasListeners(): boolean {\n    return this._next !== this;\n  }\n\n  /**\n   * Disposes the Emitter. It breaks references between the emitter and all the items, allowing\n   * for better garbage collection. It effectively disposes all current listeners.\n   */\n  public dispose(): void {\n    this._disposeList();\n    this._changeCB = _noop;\n    this._changeCBContext = undefined;\n  }\n}\n\n/**\n * Listener object wraps a callback added to an Emitter, allowing for O(1) removal when the\n * listener is disposed.\n */\nexport class Listener extends LLink {\n  public static callAll(begin: LLink, end: LLink, args: any[]): void {\n    while (begin !== end) {\n      const lis = begin as Listener;\n      lis.callback.call(lis.context, ...args);\n      begin = lis._next!;\n    }\n  }\n\n  constructor(private emitter: Emitter,\n              private callback: ListenerCB<any>,\n              private context?: any) {\n    super();\n    this._insertBefore(emitter, this);\n    emitter._triggerChangeCB();\n  }\n\n  public dispose(): void {\n    if (this.isDisposed()) { return; }\n    this._removeNode(this);\n    this.emitter._triggerChangeCB();\n  }\n}\n","/**\n * dispose.js provides tools to objects that needs to dispose resources, such as destroy DOM, and\n * unsubscribe from events. The motivation with examples is presented here:\n *\n *    https://phab.getgrist.com/w/disposal/\n *\n * Disposable is a class for components that need cleanup (e.g. maintain DOM, listen to events,\n * subscribe to anything). It provides a .dispose() method that should be called to destroy the\n * component, and .onDispose()/.autoDispose() methods that the component should use to take\n * responsibility for other pieces that require cleanup.\n *\n * To define a disposable class:\n *    class Foo extends Disposable { ... }\n *\n * To create Foo:\n *    const foo = Foo.create(owner, ...args);\n * This is better than `new Foo` for two reasons:\n *    1. If Foo's constructor throws an exception, any disposals registered in that constructor\n *       before the exception are honored.\n *    2. It ensures you specify the owner of the new instance (but you can use null to skip it).\n *\n * In Foo's constructor (or rarely methods), take ownership of other Disposable objects:\n *    this.bar = Bar.create(this, ...);\n *\n * For objects that are not instances of Disposable but have a .dispose() methods, use:\n *    this.bar = this.autoDispose(createSomethingDisposable());\n *\n * To call a function on disposal (e.g. to add custom disposal logic):\n *    this.onDispose(() => this.myUnsubscribeAllMethod());\n *    this.onDispose(this.myUnsubscribeAllMethod, this);    // slightly more efficient\n *\n * To mark this object to be wiped out on disposal (i.e. set all properties to null):\n *    this.wipeOnDispose();\n * See the documentation of that method for more info.\n *\n * To dispose Foo directly:\n *    foo.dispose();\n * To determine if an object has already been disposed:\n *    foo.isDisposed()\n *\n * If you need to replace an owned object, or release, or dispose it early, use a Holder:\n *    this._holder = Holder.create(this);\n *    Bar.create(this._holder, 1);      // creates new Bar(1)\n *    Bar.create(this._holder, 2);      // creates new Bar(2) and disposes previous object\n *    this._holder.clear();             // disposes contained object\n *    this._holder.release();           // releases contained object\n *\n * If you need a container for multiple objects and dispose them all together, use a MultiHolder:\n *    this._mholder = MultiHolder.create(null);\n *    Bar.create(this._mholder, 1);     // create new Bar(1)\n *    Bar.create(this._mholder, 2);     // create new Bar(2)\n *    this._mholder.dispose();          // disposes both objects\n *\n * If creating your own class with a dispose() method, do NOT throw exceptions from dispose().\n * These cannot be handled properly in all cases. Read here about the same issue in C++:\n *    http://bin-login.name/ftp/pub/docs/programming_languages/cpp/cffective_cpp/MAGAZINE/SU_FRAME.HTM#destruct\n *\n * Using a parametrized (generic) class as a Disposable is tricky. E.g.\n *    class Bar<T> extends Disposable { ... }\n *    // Bar<T>.create(...)   <-- doesn't work\n *    // Bar.create<T>(...)   <-- doesn't work\n *    // Bar.create(...)      <-- works, but with {} for Bar's type parameters\n *\n * The solution is to expose the constructor type using a helper method:\n *    class Bar<T> extends Disposable {\n *      // Note the tuple below which must match the constructor parameters of Bar<U>.\n *      public static ctor<U>(): IDisposableCtor<Bar<U>, [U, boolean]> { return this; }\n *      constructor(a: T, b: boolean) { ... }\n *    }\n *    Bar.ctor<T>().create(...)   // <-- works, creates Bar<T>, and does type-checking!\n */\n\nimport {LLink} from './emit';\n\n/**\n * Anything with a .dispose() method is a disposable object, and implements the IDisposable interface.\n */\nexport interface IDisposable {\n  dispose(): void;\n}\n\n/**\n * Anything with .autoDispose() can be the owner of a disposable object. This is a type-specific\n * class that can only own a disposable object of type T.\n */\nexport interface IDisposableOwnerT<T extends IDisposable> {\n  autoDispose(obj: T): void;\n}\n\n/**\n * Type that can own an object of any disposable type.\n */\nexport interface IDisposableOwner {\n  autoDispose(obj: IDisposable): void;\n}\n\n// Internal \"owner\" of disposable objects which doesn't actually dispose or keep track of them. It\n// is the effective owner when creating a Disposable with `new Foo()` rather than `Foo.create()`.\nconst _noopOwner: IDisposableOwner = {\n  autoDispose(obj: IDisposable): void { /* noop */ },\n};\n\n// Newly-created Disposable instances will have this as their owner. This is not a constant, it\n// is used by create() for the safe creation of Disposables.\nlet _defaultDisposableOwner = _noopOwner;\n\n/**\n * The static portion of class Disposable.\n */\nexport interface IDisposableCtor<Derived, CtorArgs extends any[]> {\n  new(...args: CtorArgs): Derived;\n  create<T extends new(...args: any[]) => any>(\n    this: T, owner: IDisposableOwnerT<InstanceType<T>>|null, ...args: ConstructorParameters<T>): InstanceType<T>;\n}\n\n/**\n * Base class for disposable objects that can own other objects. See the module documentation.\n */\nexport abstract class Disposable implements IDisposable, IDisposableOwner {\n  /**\n   * Create Disposable instances using `Class.create(owner, ...)` rather than `new Class(...)`.\n   *\n   * This reminds you to provide an owner, and ensures that if the constructor throws an\n   * exception, dispose() gets called to clean up the partially-constructed object.\n   *\n   * Owner may be null if intend to ensure disposal some other way.\n   */\n  public static create<T extends new (...args: any[]) => any>(\n    this: T, owner: IDisposableOwnerT<InstanceType<T>>|null, ...args: ConstructorParameters<T>): InstanceType<T> {\n\n    const origDefaultOwner = _defaultDisposableOwner;\n    const holder = new Holder();\n    try {\n      // The newly-created object will have holder as its owner.\n      _defaultDisposableOwner = holder;\n      return setDisposeOwner(owner, new this(...args));\n    } catch (e) {\n      try {\n        // This calls dispose on the partially-constructed object\n        holder.clear();\n      } catch (e2) {\n        // tslint:disable-next-line:no-console\n        console.error(\"Error disposing partially constructed %s:\", this.name, e2);\n      }\n      throw e;\n    } finally {\n      // On success, the new object has a new owner, and we release it from holder.\n      // On error, the holder has been cleared, and the release() is a no-op.\n      holder.release();\n      _defaultDisposableOwner = origDefaultOwner;\n    }\n  }\n\n  private _disposalList: DisposalList = new DisposalList();\n\n  constructor() {\n    // This registers with a temp Holder when using create(), and is a no-op when using `new Foo`.\n    _defaultDisposableOwner.autoDispose(this);\n    // Be sure to reset to no-op, so that a (non-recommended) direct call like 'new Bar()', from\n    // inside Foo's constructor doesn't use the same Holder that's temporarily holding Foo.\n    _defaultDisposableOwner = _noopOwner;\n  }\n\n  /** Take ownership of obj, and dispose it when this.dispose() is called. */\n  public autoDispose<T extends IDisposable>(obj: T): T {\n    this.onDispose(obj.dispose, obj);\n    return obj;\n  }\n\n  /** Call the given callback when this.dispose() is called. */\n  public onDispose<T>(callback: (this: T) => void, context?: T): DisposeListener {\n    return this._disposalList.addListener(callback, context);\n  }\n\n  /**\n   * Wipe out this object when it is disposed, i.e. set all its properties to null. It is\n   * recommended to call this early in the constructor.\n   *\n   * This makes disposal more costly, but has certain benefits:\n   * - If anything still refers to the object and uses it, we'll get an early error, rather than\n   *   silently keep going, potentially doing useless work (or worse) and wasting resources.\n   * - If anything still refers to the object (even without using it), the fields of the object\n   *   can still be garbage-collected.\n   * - If there are circular references involving this object, they get broken, making the job\n   *   easier for the garbage collector.\n   *\n   * The recommendation is to use it for complex, longer-lived objects, but to skip for objects\n   * which are numerous and short-lived (and less likely to be referenced from unexpected places).\n   */\n  public wipeOnDispose(): void {\n    this.onDispose(this._wipeOutObject, this);\n  }\n\n  /**\n   * Returns whether this object has already been disposed.\n   */\n  public isDisposed(): boolean {\n    return this._disposalList === null;\n  }\n\n  /**\n   * Clean up `this` by disposing all owned objects, and calling onDispose() callbacks, in reverse\n   * order to that in which they were added.\n   */\n  public dispose(): void {\n    const disposalList = this._disposalList;\n    if (!disposalList) {\n        // tslint:disable-next-line:no-console\n      console.error(\"Error disposing %s which is already disposed\", _describe(this));\n    } else {\n      this._disposalList = null!;\n      disposalList.callAndDispose(this);\n    }\n  }\n\n  /**\n   * Wipe out this object by setting each property to null. This is helpful for objects that are\n   * disposed and should be ready to be garbage-collected.\n   */\n  private _wipeOutObject(): void {\n    // The sentinel value doesn't have to be null, but some values cause more helpful errors than\n    // others. E.g. if a.x = \"disposed\", then a.x.foo() throws \"undefined is not a function\", but\n    // when a.x = null, a.x.foo() throws a more helpful \"Cannot read property 'foo' of null\".\n    for (const k of Object.keys(this)) {\n      (this as any)[k] = null;\n    }\n  }\n}\n\n/**\n * Holder keeps a single disposable object. If given responsibility for another object using\n * holder.autoDispose() or Foo.create(holder, ...), it automatically disposes the currently held\n * object. It also disposes it when the holder itself is disposed.\n *\n * If the object is an instance of Disposable, the holder will also notice when the object gets\n * disposed from outside of it, in which case the holder will become empty again.\n */\nexport class Holder<T extends IDisposable> implements IDisposable, IDisposableOwner {\n  public static create<T extends IDisposable>(owner: IDisposableOwnerT<Holder<T>>|null): Holder<T> {\n    return setDisposeOwner(owner, new Holder<T>());\n  }\n\n  protected _owned: T|null = null;\n  private _disposalListener: DisposeListener|undefined = undefined;\n\n  /** Take ownership of a new object, disposing the previously held one. */\n  public autoDispose(obj: T): T {\n    this.clear();\n    this._owned = obj;\n    if (obj instanceof Disposable) {\n      this._disposalListener = obj.onDispose(this._onOutsideDispose, this);\n    }\n    return obj;\n  }\n\n  /** Releases the held object without disposing it, emptying the holder. */\n  public release(): IDisposable|null {\n    this._unlisten();\n    const ret = this._owned;\n    this._owned = null;\n    return ret;\n  }\n\n  /** Disposes the held object and empties the holder. */\n  public clear(): void {\n    this._unlisten();\n    const owned = this._owned;\n    if (owned) {\n      this._owned = null;\n      owned.dispose();\n    }\n  }\n\n  /** Returns the held object, or null if the Holder is empty. */\n  public get(): T|null { return this._owned; }\n\n  /** Returns whether the Holder is empty. */\n  public isEmpty(): boolean { return !this._owned; }\n\n  /** When the holder is disposed, it disposes the held object if any. */\n  public dispose(): void { this.clear(); }\n\n  /** Stop listening for the disposal of this._owned. */\n  private _unlisten() {\n    const disposalListener = this._disposalListener;\n    if (disposalListener) {\n      this._disposalListener = undefined;\n      disposalListener.dispose();\n    }\n  }\n\n  private _onOutsideDispose() {\n    this._disposalListener = undefined;\n    this._owned = null;\n  }\n}\n\n/**\n * MultiHolder keeps multiple disposable object. It disposes all held object when the holder\n * itself is disposed. It's actually nothing more than the Disposable base class itself, just\n * exposed with a clearer name that describes its purpose.\n */\nexport class MultiHolder extends Disposable {}\n\n/**\n * Sets owner of obj (i.e. calls owner.autoDispose(obj)) unless owner is null. Returns obj.\n */\nexport function setDisposeOwner<T extends IDisposable>(owner: IDisposableOwnerT<T>|null, obj: T): T {\n  if (owner) { owner.autoDispose(obj); }\n  return obj;\n}\n\n/**\n * Helper for reporting errors during disposal. Try to report the type of the object.\n */\nfunction _describe(obj: any) {\n  return (obj && obj.constructor && obj.constructor.name ? obj.constructor.name : '' + obj);\n}\n\n/**\n * DisposalList is an internal class mimicking emit.Emitter. The difference is that callbacks are\n * called in reverse order, and exceptions in callbacks are reported and swallowed.\n */\nclass DisposalList extends LLink {\n  constructor() { super(); }\n\n  public addListener<T>(callback: (this: T) => void, optContext?: T): DisposeListener {\n    const lis = new DisposeListener(callback, optContext);\n    this._insertBefore(this._next!, lis);\n    return lis;\n  }\n\n  /**\n   * Call all callbacks and dispose this object. The owner is required for better reporting of\n   * errors if any callback throws.\n   */\n  public callAndDispose(owner: Disposable): void {\n    try {\n      DisposeListener.callAll(this._next!, this, owner);\n    } finally {\n      this._disposeList();\n    }\n  }\n}\n\n/**\n * Internal class that keeps track of one item of the DisposalList. It mimicks emit.Listener, but\n * reports and swallows erros when it calls the callbacks in the list.\n */\nclass DisposeListener extends LLink implements IDisposable {\n  public static callAll(begin: LLink, end: LLink, owner: Disposable): void {\n    while (begin !== end) {\n      const lis = begin as DisposeListener;\n      try {\n        lis.callback.call(lis.context);\n      } catch (e) {\n        // tslint:disable-next-line:no-console\n        console.error(\"While disposing %s, error disposing %s: %s\", _describe(owner), _describe(this), e);\n      }\n      begin = lis._next!;\n    }\n  }\n\n  constructor(private callback: () => void, private context?: any) { super(); }\n\n  public dispose(): void {\n    if (this.isDisposed()) { return; }\n    this._removeNode(this);\n  }\n}\n","/**\n * This module supports computed observables, organizing them into a priority queue, so that\n * computeds can be updated just once after multiple bundled changes.\n *\n * This module is for internal use only (hence the leading underscore in the name). The only\n * function useful outside is exposed via the `observable` module as `observable.bundleChanges()`.\n *\n * Changes may come together because multiple observables are changed synchronously, or because\n * multiple computeds depend on a single changed observable. In either case, if a computed depends\n * on multiple observables that are being changed, we want it to just get updated once when the\n * changes are complete.\n *\n * This is done by maintaining a _priority in each computed, where greater values get evaluated\n * later (computed with greater values depend on those with smaller values). When a computed needs\n * updating, it adds itself to the queue using enqueue() method. At the end of an observable.set()\n * call, or of bundleChanges() call, the queue gets processed in order of _priority.\n */\n\nimport {PriorityQueue} from './PriorityQueue';\n\n/**\n * DepItem is an item in a dependency relationship. It may depend on other DepItems. It is used\n * for subscriptions and computed observables.\n */\nexport class DepItem {\n  public static isPrioritySmaller(a: DepItem, b: DepItem): boolean {\n    return a._priority < b._priority || (a._priority === b._priority && a._creation < b._creation);\n  }\n\n  private _priority: number = 0;\n  private _enqueued: boolean = false;\n  private _callback: () => void;\n  private _context?: object;\n\n  // Order of creation, used for ordering items at same priority.\n  private _creation: number = ++_nextCreationNum;\n\n  /**\n   * Callback should call depItem.useDep(dep) for each DepInput it depends on.\n   */\n  constructor(callback: () => void, optContext?: object) {\n    this._callback = callback;\n    this._context = optContext;\n  }\n\n  /**\n   * Mark depItem as a dependency of this DepItem. The argument may be null to indicate a leaf (an\n   * item such as a plain observable, which does not itself depend on anything else).\n   */\n  public useDep(depItem: DepItem|null): void {\n    const p = depItem ? depItem._priority : 0;\n    if (p >= this._priority) {\n      this._priority = p + 1;\n    }\n  }\n\n  /**\n   * Recompute this DepItem, calling the callback given in the constructor.\n   */\n  public recompute(): void {\n    this._priority = 0;\n    this._callback.call(this._context);\n  }\n\n  /**\n   * Add this DepItem to the queue, to be recomputed when the time is right.\n   */\n  public enqueue(): void {\n    if (!this._enqueued) {\n      this._enqueued = true;\n      queue.push(this);\n    }\n  }\n}\n\n// The main compute queue.\nconst queue = new PriorityQueue<DepItem>(DepItem.isPrioritySmaller);\n\n// Counter for creation order, used to create a stable ordering of DepItems at same priority.\nlet _nextCreationNum = 0;\n\n// Array to keep track of items recomputed during this call to compute(). It could be a local\n// variable in compute(), but is made global to minimize allocations.\nconst _seen: any[] = [];\n\n// Counter used for bundling multiple calls to compute() into one.\nlet bundleDepth = 0;\n\n/**\n * Exposed for unittests. Returns the internal priority value of an observable.\n */\nexport function _getPriority(obs: any): number {\n  const depItem = obs._getDepItem();\n  return depItem ? depItem._priority : 0;\n}\n\n/**\n * Update any computed observables that need updating. The update is deferred if we are currently\n * in the middle of a bundle. This is called automatically whenever you set an observable, and\n * there should be no need to ever call this by users of the library.\n */\nexport function compute(): void {\n  if (bundleDepth === 0 && queue.size > 0) {\n    // Prevent nested compute() calls, which are unnecessary and can cause deep recursion stack.\n    bundleDepth++;\n    try {\n      // We reuse _seen array to minimize allocations, but always leave it empty.\n      do {\n        const item = queue.pop()!;\n        _seen.push(item);\n        item.recompute();\n      } while (queue.size > 0);\n    } finally {\n      // We delay the unsetting of _enqueued flag to here, to protect against infinite loops when\n      // a change to a computed causes it to get enqueued again.\n      for (const item of _seen) {\n        item._enqueued = false;\n      }\n      _seen.length = 0;\n      bundleDepth--;\n    }\n  }\n}\n\n/**\n * Defer recomputations of all computed observables and subscriptions until func() returns. This\n * is useful to avoid unnecessary recomputation if you are making several changes to observables\n * together. This function is exposed as `observable.bundleChanges()`.\n *\n * Note that this intentionally does not wait for promises to be resolved, since that would block\n * all updates to all computeds while waiting.\n */\nexport function bundleChanges<T>(func: () => T): T {\n  try {\n    bundleDepth++;\n    return func();\n  } finally {\n    bundleDepth--;\n    compute();\n  }\n}\n","/**\n * A simple and fast priority queue with a limited interface to push, pop, peek, and get size. It\n * is essentially equivalent to both npm modules 'fastpriorityqueue' and 'qheap', but is in\n * TypeScript and is a bit cleaner and simpler.\n *\n * It is constructed with a function that returns which of two items is \"prior\"; the pop() method\n * returns the most-prior element.\n */\n\nexport type IsPriorFunc<T> = (a: T, b: T) => boolean;\n\nexport class PriorityQueue<T> {\n  // Items form a binary tree packed into an array. Root is items[0]; children of items[i] are\n  // items[2*i+1] and items[2*i+2]; parent of items[i] is items[(i - 1) >> 1]. For all children,\n  // the invariant isPrior(parent, child) holds.\n  private _items: T[] = [];\n\n  constructor(private _isPrior: IsPriorFunc<T>) {}\n\n  public get size(): number { return this._items.length; }\n\n  public push(item: T): void {\n    const items = this._items;\n    const isPrior = this._isPrior;\n\n    let curIdx = this._items.length;\n    while (curIdx > 0) {\n      // While we have a parent that is not prior to us, bubble up the \"hole\" at items.length.\n      const parIdx = (curIdx - 1) >> 1;   // tslint:disable-line:no-bitwise\n      const parItem = items[parIdx];\n      if (isPrior(parItem, item)) {\n        break;\n      }\n      items[curIdx] = parItem;\n      curIdx = parIdx;\n    }\n    items[curIdx] = item;\n  }\n\n  public peek(): T|undefined {\n    return this._items[0];\n  }\n\n  public pop(): T|undefined {\n    if (this._items.length <= 1) { return this._items.pop(); }\n    const items = this._items;\n    const isPrior = this._isPrior;\n    const result = items[0];\n\n    // Bubble the last item downwards from the root.\n    const item = items.pop()!;\n    const size = this._items.length;\n    let curIdx = 0;\n    let leftIdx = 1;\n    while (leftIdx < size) {\n      const rightIdx = leftIdx + 1;\n      const bestIdx = (rightIdx < size && isPrior(items[rightIdx], items[leftIdx])) ?\n        rightIdx : leftIdx;\n      if (isPrior(item, items[bestIdx])) {\n        break;\n      }\n      items[curIdx] = items[bestIdx];\n      curIdx = bestIdx;\n      leftIdx = curIdx + curIdx + 1;\n    }\n    items[curIdx] = item;\n    return result;\n  }\n}\n","/**\n * observable.js implements an observable value, which lets other code subscribe to changes.\n *\n * E.g.\n *  let o = observable(17);\n *  o.get();          // 17\n *  o.addListener(foo);\n *  o.set(\"asdf\");    // foo(\"asdf\", 17) gets called.\n *  o.get();          // \"asdf\"\n *\n * To subscribe to changes, use obs.addListener(callback, context). The callback will get called\n * with (newValue, oldValue) as arguments.\n *\n * When you use observables within the body of a computed(), you can automatically create\n * subscriptions to them with the use(obs) function. E.g.\n *    let obs3 = computed(use => use(obs1) + use(obs2));\n * creates a computed observable `obs3` which is subscribed to changes to `obs1` and `obs2`.\n *\n * Note that unlike with knockout, use(obs) method requires an explicit `use` function, which is\n * always passed to a computed's read() callback for this purpose. This makes it explicit when a\n * dependency is created, and which observables the dependency connects.\n */\n\nimport {compute, DepItem} from './_computed_queue';\nimport {IDisposable, IDisposableOwnerT, setDisposeOwner} from './dispose';\nimport {Emitter, Listener} from './emit';\n\nexport {bundleChanges} from './_computed_queue';\n\nexport class BaseObservable<T> {\n  private _onChange: Emitter;\n  private _value: T;\n\n  /**\n   * Internal constructor for an Observable. You should use observable() function instead.\n   */\n  constructor(value: T) {\n    this._onChange = new Emitter();\n    this._value = value;\n  }\n\n  /**\n   * Returns the value of the observable. It is fast and does not create a subscription.\n   * (It is similar to knockout's peek()).\n   * @returns {Object} The current value of the observable.\n   */\n  public get(): T { return this._value; }\n\n  /**\n   * Sets the value of the observable. If the value differs from the previously set one, then\n   * listeners to this observable will get called with (newValue, oldValue) as arguments.\n   * @param {Object} value: The new value to set.\n   */\n  public set(value: T): void {\n    if (value !== this._value) {\n      this.setAndTrigger(value);\n    }\n  }\n\n  /**\n   * Sets the value of the observable AND calls listeners even if the value is unchanged.\n   */\n  public setAndTrigger(value: T) {\n    const prev = this._value;\n    this._value = value;\n    this._onChange.emit(value, prev);\n    this._disposeOwned();\n    compute();\n  }\n\n  /**\n   * Adds a callback to listen to changes in the observable.\n   * @param {Function} callback: Function, called on changes with (newValue, oldValue) arguments.\n   * @param {Object} optContext: Context for the function.\n   * @returns {Listener} Listener object. Its dispose() method removes the callback.\n   */\n  public addListener(callback: (val: T, prev: T) => void, optContext?: object): Listener {\n    return this._onChange.addListener(callback, optContext);\n  }\n\n  /**\n   * Returns whether this observable has any listeners.\n   */\n  public hasListeners(): boolean {\n    return this._onChange.hasListeners();\n  }\n\n  /**\n   * Sets a single callback to be called when a listener is added or removed. It overwrites any\n   * previously-set such callback.\n   * @param {Function} changeCB(hasListeners): Function to call after a listener is added or\n   *    removed. It's called with a boolean indicating whether this observable has any listeners.\n   *    Pass in `null` to unset the callback. Note that it can be called multiple times in a row\n   *    with hasListeners `true`.\n   */\n  public setListenerChangeCB(changeCB: (hasListeners: boolean) => void, optContext?: any): void {\n    this._onChange.setChangeCB(changeCB, optContext);\n  }\n\n  /**\n   * Used by subscriptions to keep track of dependencies. An observable that has dependnecies,\n   * such as a computed observable, would override this method.\n   */\n  public _getDepItem(): DepItem|null {\n    return null;\n  }\n\n  /**\n   * Disposes the observable.\n   */\n  public dispose(): void {\n    this._disposeOwned();\n    this._onChange.dispose();\n    (this._value as any) = undefined;\n  }\n\n  /**\n   * Returns whether this observable is disposed.\n   */\n  public isDisposed(): boolean {\n    return this._onChange.isDisposed();\n  }\n\n  protected _disposeOwned(arg?: any) { /* noop */ }\n\n  /**\n   * Allow derived classes to emit change events with an additional third argument describing the\n   * change. It always emits the event without checking for value equality.\n   */\n  protected _setWithArg(value: T, arg: any) {\n    const prev = this._value;\n    this._value = value;\n    this._onChange.emit(value, prev, arg);\n    this._disposeOwned(arg);\n    compute();\n  }\n}\n\nexport class Observable<T> extends BaseObservable<T> implements IDisposableOwnerT<T & IDisposable> {\n  // See module-level holder() function below for documentation.\n  public static holder<T>(value: T & IDisposable): Observable<T> {\n    const obs = new Observable<T>(value);\n    obs._owned = value;\n    return obs;\n  }\n\n  /**\n   * Creates a new Observable with the given initial value, and owned by owner.\n   */\n  public static create<T>(owner: IDisposableOwnerT<Observable<T>>|null, value: T): Observable<T> {\n    return setDisposeOwner(owner, new Observable<T>(value));\n  }\n\n  private _owned?: T & IDisposable = undefined;\n\n  /**\n   * The use an observable for a disposable object, use it a DisposableOwner:\n   *\n   *    D.create(obs, ...args)                      // Preferred\n   *    obs.autoDispose(D.create(null, ...args))    // Equivalent\n   *\n   * Either of these usages will set the observable to the newly created value. The observable\n   * will dispose the owned value when it's set to another value, or when it itself is disposed.\n   */\n  public autoDispose(value: T & IDisposable): T & IDisposable {\n    this.setAndTrigger(value);\n    this._owned = value;\n    return value;\n  }\n\n  protected _disposeOwned() {\n    if (this._owned) {\n      this._owned.dispose();\n      this._owned = undefined;\n    }\n  }\n}\n\n/**\n * Creates a new Observable with the initial value of optValue if given or undefined if omitted.\n * @param {Object} optValue: The initial value to set.\n * @returns {Observable} The newly created observable.\n */\nexport function observable<T>(value: T): Observable<T> {\n  return new Observable<T>(value);\n}\n\n/**\n * Creates a new Observable with an initial disposable value owned by this observable, e.g.\n *\n *    const obs = obsHolder<D>(D.create(null, ...args));\n *\n * This is needed because using simply observable<D>(value) would not cause the observable to take\n * ownership of value (i.e. to dispose it later). This function is a less hacky equivalent to:\n *\n *    const obs = observable<D>(null as any);\n *    D.create(obs, ...args);\n *\n * To allow nulls, use observable<D|null>(null); then the obsHolder() constructor is not needed.\n */\nexport function obsHolder<T>(value: T & IDisposable): Observable<T> {\n  return Observable.holder<T>(value);\n}\n","import {IDisposable} from './dispose';\n\n/**\n * Private global disposal map. It maintains the association between DOM nodes and cleanup\n * functions added with dom.onDispose(). To support multiple disposers on one element, we use a\n * WeakMap-based linked list:\n *\n *    _disposeMap[elem] = disposer2;\n *    _disposeMap[disposer2] = disposer1;\n *    etc.\n *\n * This avoids allocating arrays or using undeclared properties for a different linked list.\n */\nconst _disposeMap: WeakMap<Node|INodeFunc, INodeFunc> = new WeakMap();\n\nexport type INodeFunc = (node: Node) => void;\n\n// Internal helper to walk the DOM tree, calling visitFunc(elem) on all descendants of elem.\n// Descendants are processed first.\nfunction _walkDom(elem: Node, visitFunc: INodeFunc): void {\n  let c: Node|null = elem.firstChild;\n  while (c) {\n    // Note: this might be better done using an explicit stack, but in practice DOM trees aren't\n    // so deep as to cause problems.\n    _walkDom(c, visitFunc);\n    c = c.nextSibling;\n  }\n  visitFunc(elem);\n}\n\n// Internal helper to run all disposers for a single element.\nexport function _disposeNode(node: Node): void {\n  let disposer = _disposeMap.get(node);\n  if (disposer) {\n    let key: Node|INodeFunc = node;\n    do {\n      _disposeMap.delete(key);\n      disposer(node);\n      // Find the next disposer; these are chained when there are multiple.\n      key = disposer;\n      disposer = _disposeMap.get(key);\n    } while (disposer);\n  }\n}\n\nfunction _disposeNodeRecursive(node: Node): void {\n  _walkDom(node, domDisposeHooks.disposeNode);\n}\n\nexport interface IDomDisposeHooks {\n  disposeRecursive: (node: Node) => void;\n  disposeNode: (node: Node) => void;\n}\n\n/**\n * Support for extending dom disposal. This is very low-level, and needs utmost care. Any\n * disposers set should take care of calling the original versions of the disposers.\n */\nexport const domDisposeHooks: IDomDisposeHooks = {\n  disposeNode: _disposeNode,\n  disposeRecursive: _disposeNodeRecursive,\n};\n\n/**\n * Run disposers associated with any descendant of elem or with elem itself. Disposers get\n * associated with elements using dom.onDispose(). Descendants are processed first.\n *\n * It is automatically called if one of the function arguments to dom() throws an exception during\n * element creation. This way any onDispose() handlers set on the unfinished element get called.\n *\n * @param {Node} node: The element to run disposers on.\n */\nexport function domDispose(node: Node): void {\n  domDisposeHooks.disposeRecursive(node);\n}\n\n/**\n * Associate a disposerFunc with a DOM element. It will be called when the element is disposed\n * using domDispose() on it or any of its parents. If onDispose is called multiple times, all\n * disposerFuncs will be called in reverse order.\n * @param {Element} elem: The element to associate the disposer with.\n * @param {Function} disposerFunc(elem): Will be called when domDispose() is called on the\n *    element or its ancestor.\n * Note that it is not necessary usually to dispose event listeners attached to an element (e.g.\n * with dom.on()) since their lifetime is naturally limited to the lifetime of the element.\n */\nexport function onDisposeElem(elem: Node, disposerFunc: INodeFunc): void {\n  const prevDisposer = _disposeMap.get(elem);\n  _disposeMap.set(elem, disposerFunc);\n  if (prevDisposer) {\n    _disposeMap.set(disposerFunc, prevDisposer);\n  }\n}\nexport function onDispose(disposerFunc: INodeFunc) {\n  return (elem: Node) => onDisposeElem(elem, disposerFunc);\n}\n\n/**\n * Make the given element own the disposable, and call its dispose method when domDispose() is\n * called on the element or any of its parents.\n * @param {Element} elem: The element to own the disposable.\n * @param {Disposable} disposable: Anything with a .dispose() method.\n */\nexport function autoDisposeElem(elem: Node, disposable: IDisposable|null) {\n  if (disposable) {\n    onDisposeElem(elem, () => disposable.dispose());\n  }\n}\nexport function autoDispose(disposable: IDisposable|null) {\n  if (disposable) {\n    return (elem: Node) => autoDisposeElem(elem, disposable);\n  }\n}\n","/**\n * Grain.js observables and computeds are similar to (and mostly inspired by) those in\n * Knockout.js. In fact, they can work together.\n *\n *  import {fromKo} from 'kowrap'\n *\n *  fromKo(koObservable)\n *\n * returns a Grain.js observable that mirrors the passed-in Knockout observable (which may be a\n * computed as well). Similarly,\n *\n *  import {toKo} from 'kowrap';\n *  import * as ko from 'knockout';\n *\n *  toKo(ko, observable)\n *\n * returns a Knockout.js observable that mirrows the passed-in Grain observable or computed. Note\n * that toKo() mus tbe called with the knockout module as an argument. This is to avoid adding\n * knockout as a dependency of grainjs.\n *\n * In both cases, calling fromKo/toKo twice on the same observable will return the same wrapper,\n * and subscriptions and disposal are appropriately set up to make usage seamless. In particular,\n * the returned wrapper should not be disposed; it's tied to the lifetime of the wrapped object.\n */\n\nimport {domDisposeHooks} from './domDispose';\nimport {bundleChanges, Observable} from './observable';\n\n// Implementation note. Both wrappers are implemented in the same way.\n//\n// Regarding disposal: the wrapper is always subscribed to the underlying observable. The\n// underlying has a reference to the wrapper. So does any listener to the wrapper. The wrapper can\n// be garbage-collected once it has no listeners AND the underlying observable is disposed or\n// unreferenced.\n\nexport interface IKnockoutObservable<T> extends IKnockoutReadObservable<T> {\n  (val: T): void;\n}\n\nexport interface IKnockoutReadObservable<T> {\n  (): T;\n  peek(): T;\n  subscribe(callback: (newValue: T) => void, target?: any, event?: \"change\"): any;\n  getSubscriptionsCount(): number;\n}\n\n// Inference from Knockout observable gets very tricky because ko.Observable includes the function\n// signature `(val: T) => any` from which type `any` gets inferred. We can infer the correct type\n// with this helper.\nexport type InferKoType<KObs extends IKnockoutReadObservable<any>> =\n  KObs extends {peek(): infer T} ? T : never;\n\nconst fromKoWrappers: WeakMap<IKnockoutObservable<any>, Observable<any>> = new WeakMap();\nconst toKoWrappers: WeakMap<Observable<any>, IKnockoutObservable<any>> = new WeakMap();\n\n/**\n * Returns a Grain.js observable which mirrors a Knockout observable.\n *\n * Do not dispose this wrapper, as it is shared by all code using koObs, and its lifetime is tied\n * to the lifetime of koObs. If unused, it consumes minimal resources, and should get garbage\n * collected along with koObs.\n */\nexport function fromKo<KObs extends IKnockoutObservable<any>>(koObs: KObs): Observable<InferKoType<KObs>> {\n  return fromKoWrappers.get(koObs) || fromKoWrappers.set(koObs, new KoWrapObs(koObs)).get(koObs)!;\n}\n\n/**\n * An Observable that wraps a Knockout observable, created via fromKo(). It keeps minimal overhead\n * when unused by only subscribing to the wrapped observable while it itself has subscriptions.\n *\n * This way, when unused, the only reference is from the wrapper to the wrapped object. KoWrapObs\n * should not be disposed; its lifetime is tied to that of the wrapped object.\n */\nexport class KoWrapObs<T> extends Observable<T> {\n  private _koSub: any = null;\n\n  constructor(private _koObs: IKnockoutObservable<T>) {\n    super(_koObs.peek());\n    this.setListenerChangeCB((hasListeners) => {\n      if (!hasListeners) {\n        this._koSub.dispose();\n        this._koSub = null;\n      } else if (!this._koSub) {\n        // TODO this is a little hack, really, BaseObservable should expose a way to set the value\n        // directly by derived classes, i.e. a protected setter.\n        (this as any)._value = this._koObs.peek();\n        this._koSub = this._koObs.subscribe((val) => this.setAndTrigger(val));\n      }\n    });\n  }\n  public get(): T { return this._koObs.peek(); }\n  public set(value: T): void { bundleChanges(() => this._koObs(value)); }\n  public dispose(): void { throw new Error(\"KoWrapObs should not be disposed\"); }\n}\n\nexport interface IKnockoutModule {\n  observable<T>(value: T): IKnockoutObservable<T>;\n  cleanNode(node: Node): void;\n}\n\n/**\n * Returns a Knockout observable which mirrors a Grain.js observable.\n */\nexport function toKo<T>(knockout: IKnockoutModule, grainObs: Observable<T>): IKnockoutObservable<T> {\n  const prevKoObs = toKoWrappers.get(grainObs);\n  if (prevKoObs) {\n    return prevKoObs;\n  }\n  const newKoObs = knockout.observable(grainObs.get());\n  toKoWrappers.set(grainObs, newKoObs);\n  grainObs.addListener((val) => newKoObs(val));\n  return newKoObs;\n}\n\n// Marker for when knockout-disposal integration has already been setup.\nlet koDisposalIsSetup = false;\n\n/**\n * Set up integration between grainjs and knockout disposal. Knockout does cleanup using\n * ko.removeNode / ko.cleanNode (it also takes care of JQuery cleanup if needed). GrainJS does\n * cleanup using dom.domDispose(). By default these don't know about each other.\n *\n * If you mix the two libraries, however, disposing an element may need to trigger disposers\n * registered by either library.\n *\n * This method ensures that this happens.\n *\n * Note: grainjs disposes text nodes too, but nothing relies on it. When disposal is triggered via\n * knockout, we are forced to rely on knockout's node traversal which ignores text nodes.\n */\nexport function setupKoDisposal(ko: IKnockoutModule) {\n  // Ensure we don't do the setup more than once, or things will get called multiple times.\n  if (koDisposalIsSetup) { return; }\n  koDisposalIsSetup = true;\n\n  const koDomNodeDisposal = (ko as any).utils.domNodeDisposal;\n\n  // Knockout by default has an external-data-cleanup func set to cleanup JQuery. Whatever it is\n  // set to, we will continue calling it, and also will call grainjs domDisposeNode.\n  const origKoCleanExternalData = koDomNodeDisposal.cleanExternalData;\n\n  // The original function called by grainjs to clean nodes recursively. We'll override it.\n  const origGrainDisposeRecursive = domDisposeHooks.disposeRecursive;\n\n  // New function called by knockout to do extra cleanup. Now calls grainjs single-node cleanup.\n  // (In knockout, we can only override single-node cleanup.)\n  function newKoCleanExternalData(node: Node) {\n    origKoCleanExternalData(node);\n    domDisposeHooks.disposeNode(node);\n  }\n\n  // Function called by grainjs to clean nodes recursively. We override the recursive cleanup\n  // function to call the recursive knockout cleanup (letting knockout do the dom traversal it\n  // normally does).\n  function newGrainDisposeRecursive(node: Node) {\n    origGrainDisposeRecursive(node);\n\n    // While doing knockout cleanup, do NOT have it call grainjs cleanup too, as that would cause\n    // multiple unnecessary traversals of DOM.\n    koDomNodeDisposal.cleanExternalData = origKoCleanExternalData;\n    try {\n      ko.cleanNode(node);\n    } finally {\n      koDomNodeDisposal.cleanExternalData = newKoCleanExternalData;\n    }\n  }\n\n  // Use knockout and grainjs hooks to actually set the new cleanup functions.\n  koDomNodeDisposal.cleanExternalData = newKoCleanExternalData;\n  domDisposeHooks.disposeRecursive = newGrainDisposeRecursive;\n}\n","/**\n * subscribe.js implements subscriptions to several observables at once.\n *\n * E.g. if we have some existing observables (which may be instances of `computed`),\n * we can subscribe to them explicitly:\n *    let obs1 = observable(5), obs2 = observable(12);\n *    subscribe(obs1, obs2, (use, v1, v2) => console.log(v1, v2));\n *\n * or implicitly by using `use(obs)` function, which allows dynamic subscriptions:\n *    subscribe(use => console.log(use(obs1), use(obs2)));\n *\n * In either case, if obs1 or obs2 is changed, the callbacks will get called automatically.\n *\n * Creating a subscription allows any number of dependencies to be specified explicitly, and their\n * values will be passed to the callback(). These may be combined with automatic dependencies\n * detected using use(). Note that constructor dependencies have less overhead.\n *\n *    subscribe(...deps, ((use, ...depValues) => READ_CALLBACK));\n */\n\nimport {DepItem} from './_computed_queue';\nimport {IDisposableOwner} from './dispose';\nimport {Listener} from './emit';\nimport {fromKo, IKnockoutReadObservable} from './kowrap';\nimport {BaseObservable as Obs} from './observable';\n\nexport interface ISubscribableObs {\n  _getDepItem(): DepItem|null;\n  addListener(callback: (val: any, prev: any) => void, optContext?: object): Listener;\n  get(): any;\n}\n\nexport type ISubscribable = ISubscribableObs | IKnockoutReadObservable<any>;\n\n// Type inference from the simpler Obs<T>|IKnockoutReadObservable<T> does not always produce\n// correct T for ko.Observable. The formula below is a workaround. See also InferKoType in kowrap.\nexport type InferUseType<TObs extends Obs<any>|IKnockoutReadObservable<any>> =\n  TObs extends Obs<infer T> ? T :\n  TObs extends {peek(): infer U} ? U : never;\n\n// The generic type for the use() function that callbacks get.\nexport type UseCB = <TObs extends Obs<any>|IKnockoutReadObservable<any>>(obs: TObs) => InferUseType<TObs>;\n\nexport interface UseCBOwner extends UseCB {    // tslint:disable-line:interface-name\n  owner: IDisposableOwner;\n}\n\ninterface IListenerWithInUse extends Listener {\n  _inUse: boolean;\n}\n\n// Constant empty array, which we use to avoid allocating new read-only empty arrays.\nconst emptyArray: ReadonlyArray<any> = [];\n\nexport class Subscription {\n  private readonly _depItem: DepItem;\n  private readonly _dependencies: ReadonlyArray<ISubscribableObs>;\n  private readonly _depListeners: ReadonlyArray<Listener>;\n  private _dynDeps: Map<ISubscribableObs, IListenerWithInUse>;\n  private _callback: (use: UseCB, ...args: any[]) => void;\n  private _useFunc: UseCB;\n\n  /**\n   * Internal constructor for a Subscription. You should use subscribe() function instead.\n   * The last owner argument is used by computed() to make itself available as the .owner property\n   * of the 'use' function that gets passed to the callback.\n   */\n  constructor(callback: (use: UseCB, ...args: any[]) => void, dependencies: ReadonlyArray<ISubscribable>, owner?: any) {\n    this._depItem = new DepItem(this._evaluate, this);\n    this._dependencies = dependencies.length > 0 ? dependencies : emptyArray;\n    this._depListeners = dependencies.length > 0 ? dependencies.map((obs) => this._subscribeTo(obs)) : emptyArray;\n    this._dynDeps = new Map();   // Maps dependent observable to its Listener object.\n    this._callback = callback;\n    this._useFunc = this._useDependency.bind(this);\n    if (owner) {\n      (this._useFunc as UseCBOwner).owner = owner;\n    }\n\n    this._evaluate();\n  }\n\n  /**\n   * Disposes the computed, unsubscribing it from all observables it depends on.\n   */\n  public dispose() {\n    this._callback = null as any;\n    for (const lis of this._depListeners) { lis.dispose(); }\n    for (const lis of this._dynDeps.values()) { lis.dispose(); }\n  }\n\n  /**\n   * For use by computed(): returns this subscription's hook into the _computed_queue.\n   */\n  public _getDepItem(): DepItem { return this._depItem; }\n\n  /**\n   * @private\n   * Gets called when the callback calls `use(obs)` for an observable. It creates a\n   * subscription to `obs` if one doesn't yet exist.\n   * @param {Observable} obs: The observable being used as a dependency.\n   */\n  private _useDependency(_obs: ISubscribable) {\n    const obs = ('_getDepItem' in _obs) ? _obs : fromKo(_obs);\n    let listener = this._dynDeps.get(obs);\n    if (!listener) {\n      listener = this._subscribeTo(obs) as IListenerWithInUse;\n      this._dynDeps.set(obs, listener);\n    }\n    listener._inUse = true;\n    this._depItem.useDep(obs._getDepItem());\n    return obs.get();\n  }\n\n  /**\n   * @private\n   * Calls the callback() with appropriate args, and updates subscriptions when it is done.\n   * I.e. adds dynamic subscriptions created via `use(obs)`, and disposes those no longer used.\n   */\n  private _evaluate() {\n    if (this._callback === null) { return; }      // Means this Subscription has been disposed.\n    try {\n      // Note that this is faster than using .map().\n      const readArgs: [UseCB, ...any[]] = [this._useFunc];\n      for (let i = 0, len = this._dependencies.length; i < len; i++) {\n        readArgs[i + 1] = this._dependencies[i].get();\n        this._depItem.useDep(this._dependencies[i]._getDepItem());\n      }\n      return this._callback.apply(undefined, readArgs);\n\n    } finally {\n      this._dynDeps.forEach((listener, obs) => {\n        if (listener._inUse) {\n          listener._inUse = false;\n        } else {\n          this._dynDeps.delete(obs);\n          listener.dispose();\n        }\n      });\n    }\n  }\n\n  /**\n   * @private\n   * Subscribes this computed to another observable that it depends on.\n   * @param {Observable} obs: The observable to subscribe to.\n   * @returns {Listener} Listener object.\n   */\n  private _subscribeTo(_obs: ISubscribable) {\n    const obs = ('_getDepItem' in _obs) ? _obs : fromKo(_obs);\n    return obs.addListener(this._enqueue, this);\n  }\n\n  /**\n   * @private\n   * Adds this item to the recompute queue.\n   */\n  private _enqueue() {\n    this._depItem.enqueue();\n  }\n}\n\n/**\n * This is the type-checking interface for subscribe(), which allows TypeScript to do helpful\n * type-checking when using it. We can only support a fixed number of argumnets (explicit\n * dependencies), but 5 should almost always be enough.\n */\nexport function subscribe(cb: (use: UseCB) => void): Subscription;\n\nexport function subscribe<A>(\n    a: Obs<A>,\n    cb: (use: UseCB, a: A) => void): Subscription;\n\nexport function subscribe<A, B>(\n    a: Obs<A>, b: Obs<B>,\n    cb: (use: UseCB, a: A, b: B) => void): Subscription;\n\nexport function subscribe<A, B, C>(\n    a: Obs<A>, b: Obs<B>, c: Obs<C>,\n    cb: (use: UseCB, a: A, b: B, c: C) => void): Subscription;\n\nexport function subscribe<A, B, C, D>(\n    a: Obs<A>, b: Obs<B>, c: Obs<C>, d: Obs<D>,\n    cb: (use: UseCB, a: A, b: B, c: C, d: D) => void): Subscription;\n\nexport function subscribe<A, B, C, D, E>(\n    a: Obs<A>, b: Obs<B>, c: Obs<C>, d: Obs<D>, e: Obs<E>,\n    cb: (use: UseCB, a: A, b: B, c: C, d: D, e: E) => void): Subscription;\n\n/**\n * Creates a new Subscription.\n * @param {Observable} ...observables: The initial params, of which there may be zero or more, are\n *    observables on which this computed depends. When any of them change, the callback()\n *    will be called with the values of these observables as arguments.\n * @param {Function} callback: will be called with arguments (use, ...values), i.e. the\n *    `use` function and values for all of the ...observables that precede this argument.\n *    This callback is called immediately, and whenever any dependency changes.\n * @returns {Subscription} The new subscription which may be disposed to unsubscribe.\n */\nexport function subscribe(...args: any[]): Subscription {\n  const cb = args.pop();\n  // The cast helps ensure that Observable is compatible with ISubscribable abstraction that we use.\n  return new Subscription(cb, args as Array<Obs<any>>);\n}\n","/**\n * computed.js implements a computed observable, whose value depends on other observables and gets\n * recalculated automatically when they change.\n *\n * E.g. if we have some existing observables (which may themselves be instances of `computed`),\n * we can create a computed that subscribes to them explicitly:\n *  let obs1 = observable(5), obs2 = observable(12);\n *  let computed1 = computed(obs1, obs2, (use, v1, v2) => v1 + v2);\n *\n * or implicitly by using `use(obs)` function:\n *  let computed2 = computed(use => use(obs1) + use(obs2));\n *\n * In either case, computed1.get() and computed2.get() will have the value 17. If obs1 or obs2 is\n * changed, computed1 and computed2 will get recomputed automatically.\n *\n * Creating a computed allows any number of dependencies to be specified explicitly, and their\n * values will be passed to the read() callback. These may be combined with automatic dependencies\n * detected using use(). Note that constructor dependencies have less overhead.\n *\n *  let val = computed(...deps, ((use, ...depValues) => READ_CALLBACK));\n *\n * You may specify a `write` callback by calling `onWrite(WRITE_CALLBACK)`, which will be called\n * whenever set() is called on the computed by its user. If a `write` bacllback is not specified,\n * calling `set` on a computed observable will throw an exception.\n *\n * Note that pureComputed.js offers a variation of computed() with the same interface, but which\n * stays unsubscribed from dependencies while it itself has no subscribers.\n *\n * A computed may be used with a disposable value using `use.owner` as the value's owner. E.g.\n *    let val = computed((use) => Foo.create(use.owner, use(a), use(b)));\n *\n * When the computed() is re-evaluated, and when it itself is disposed, it disposes the previously\n * owned value. Note that only the pattern above works, i.e. use.owner may only be used to take\n * ownership of the same disposable that the callback returns.\n */\n\nimport {DepItem} from './_computed_queue';\nimport {IDisposableOwnerT, setDisposeOwner} from './dispose';\nimport {BaseObservable as Obs, Observable} from './observable';\nimport {ISubscribable, Subscription, UseCBOwner as UseCB} from './subscribe';\n\nfunction _noWrite(): never {\n  throw new Error(\"Can't write to non-writable computed\");\n}\n\ntype Owner<T> = IDisposableOwnerT<Computed<T>>|null;\n\nexport class Computed<T> extends Observable<T> {\n  // Still need repetitive declarations to support varargs that are not the final argument.\n  public static create<T>(\n    owner: Owner<T>, cb: (use: UseCB) => T): Computed<T>;\n  public static create<T, A>(\n    owner: Owner<T>, a: Obs<A>,\n    cb: (use: UseCB, a: A) => T): Computed<T>;\n  public static create<T, A, B>(\n    owner: Owner<T>, a: Obs<A>, b: Obs<B>,\n    cb: (use: UseCB, a: A, b: B) => T): Computed<T>;\n  public static create<T, A, B, C>(\n    owner: Owner<T>, a: Obs<A>, b: Obs<B>, c: Obs<C>,\n    cb: (use: UseCB, a: A, b: B, c: C) => T): Computed<T>;\n  public static create<T, A, B, C, D>(\n    owner: Owner<T>, a: Obs<A>, b: Obs<B>, c: Obs<C>, d: Obs<D>,\n    cb: (use: UseCB, a: A, b: B, c: C, d: D) => T): Computed<T>;\n  public static create<T, A, B, C, D, E>(\n    owner: Owner<T>, a: Obs<A>, b: Obs<B>, c: Obs<C>, d: Obs<D>, e: Obs<E>,\n    cb: (use: UseCB, a: A, b: B, c: C, d: D, e: E) => T): Computed<T>;\n\n  /**\n   * Creates a new Computed, owned by the given owner.\n   * @param owner: Object to own this Computed, or null to handle disposal manually.\n   * @param ...observables: Zero or more observables on which this computes depends. The callback\n   *        will get called when any of these changes.\n   * @param callback: Read callback that will be called with (use, ...values),\n   *    i.e. the `use` function and values for all of the ...observables. The callback is called\n   *    immediately and whenever any dependency changes.\n   * @returns {Computed} The newly created computed observable.\n   */\n  public static create<T>(owner: IDisposableOwnerT<Computed<T>>|null, ...args: any[]): Computed<T> {\n    const readCb = args.pop();\n    return setDisposeOwner(owner, new Computed<T>(readCb, args));\n  }\n\n  private _callback: (use: UseCB, ...args: any[]) => T;\n  private _write: (value: T) => void;\n  private _sub: Subscription;\n\n  /**\n   * Internal constructor for a Computed observable. You should use computed() function instead.\n   */\n  constructor(callback: (use: UseCB, ...args: any[]) => T, dependencies: ISubscribable[]) {\n    // At initialization we force an undefined value even though it's not of type T: it gets set\n    // to a proper value during the creation of new Subscription, which calls this._read.\n    super(undefined as any);\n    this._callback = callback;\n    this._write = _noWrite;\n    this._sub = new Subscription(this._read.bind(this), dependencies, this);\n  }\n\n  /**\n   * Used by subscriptions to keep track of dependencies.\n   */\n  public _getDepItem(): DepItem {\n    return this._sub._getDepItem();\n  }\n\n  /**\n   * \"Sets\" the value of the computed by calling the write() callback if one was provided in the\n   * constructor. Throws an error if there was no such callback (not a \"writable\" computed).\n   * @param {Object} value: The value to pass to the write() callback.\n   */\n  public set(value: T): void { this._write(value); }\n\n  /**\n   * Set callback to call when this.set(value) is called, to make it a writable computed. If not\n   * set, attempting to write to this computed will throw an exception.\n   */\n  public onWrite(writeFunc: (value: T) => void): Computed<T> {\n    this._write = writeFunc;\n    return this;\n  }\n\n  /**\n   * Disposes the computed, unsubscribing it from all observables it depends on.\n   */\n  public dispose() {\n    this._sub.dispose();\n    super.dispose();\n  }\n\n  private _read(use: any, ...args: any[]): void {\n    super.set(this._callback(use as UseCB, ...args));\n  }\n}\n\n/**\n * This is the type-checking interface for computed(), which allows TypeScript to do helpful\n * type-checking when using it. We can only support a fixed number of argumnets (explicit\n * dependencies), but 5 should almost always be enough.\n */\nexport function computed<T>(cb: (use: UseCB) => T): Computed<T>;\n\nexport function computed<T, A>(\n  a: Obs<A>,\n  cb: (use: UseCB, a: A) => T): Computed<T>;\n\nexport function computed<T, A, B>(\n  a: Obs<A>, b: Obs<B>,\n  cb: (use: UseCB, a: A, b: B) => T): Computed<T>;\n\nexport function computed<T, A, B, C>(\n  a: Obs<A>, b: Obs<B>, c: Obs<C>,\n  cb: (use: UseCB, a: A, b: B, c: C) => T): Computed<T>;\n\nexport function computed<T, A, B, C, D>(\n  a: Obs<A>, b: Obs<B>, c: Obs<C>, d: Obs<D>,\n  cb: (use: UseCB, a: A, b: B, c: C, d: D) => T): Computed<T>;\n\nexport function computed<T, A, B, C, D, E>(\n  a: Obs<A>, b: Obs<B>, c: Obs<C>, d: Obs<D>, e: Obs<E>,\n  cb: (use: UseCB, a: A, b: B, c: C, d: D, e: E) => T): Computed<T>;\n\n/**\n * Creates a new Computed.\n * @param {Observable} ...observables: The initial params, of which there may be zero or more, are\n *    observables on which this computed depends. When any of them change, the read() callback\n *    will be called with the values of these observables as arguments.\n * @param {Function} readCallback: Read callback that will be called with (use, ...values),\n *    i.e. the `use` function and values for all of the ...observables. The callback is called\n *    immediately and whenever any dependency changes.\n * @returns {Computed} The newly created computed observable.\n */\nexport function computed(...args: any[]): Computed<any> {\n  const readCb = args.pop();\n  return new Computed<any>(readCb, args);\n}\n\n// TODO Consider implementing .singleUse() method.\n// An open question is in how to pass e.g. kd.hide(computed(x, x => !x)) in such a way that\n// the temporary computed can be disposed when temporary, but not otherwise. A function-only\n// syntax is kd.hide(use => !use(x)), but prevents use of static subscriptions.\n//\n// (a) function-only use of computeds is fine and useful.\n// (b) pureComputed is another option, and doesn't technically require getting disposed.\n// (c) kd.hide(compObs), kd.autoDispose(compObs) is more general and\n//     can be replaced more concisely by kd.hide(compObs.singleUse())\n// .singleUse() automatically disposes a computed (or an observable?) once there are no\n// subscriptions to it. If there are no subscriptions at the time of this call, waits for the next\n// tick, and possibly disposes then.\n","/**\n * binding.ts offers a convenient subscribe() function that creates a binding to an observable, a\n * a plain value, or a function from which it builds a computed.\n */\n\nimport {computed} from './computed';\nimport {IDisposable} from './dispose';\nimport {autoDisposeElem} from './domDispose';\nimport {IKnockoutReadObservable, InferKoType} from './kowrap';\nimport {BaseObservable} from './observable';\nimport {subscribe, UseCBOwner} from './subscribe';\n\nexport type BindableValue<T> = BaseObservable<T> | ComputedCallback<T> | T | IKnockoutReadObservable<T>;\n\nexport type ComputedCallback<T> = (use: UseCBOwner, ...args: any[]) => T;\n\n/**\n * Subscribes a callback to valueObs, which may be one a plain value, an observable, a knockout\n * observable, or a function. If a function, it's used to create a computed() and will be called\n * with a context function `use`, allowing it to depend on other observable values (see\n * documentation for `computed`).\n *\n * In all cases, `callback(newValue, oldValue)` is called immediately and whenever the value\n * changes. On the initial call, oldValue is undefined.\n *\n * Returns an object which should be disposed to remove the created subscriptions, or null.\n */\n// The overload below is annoying, but needed for correct type inference; see test/types/kowrap.ts.\nexport function subscribeBindable<KObs extends IKnockoutReadObservable<any>>(\n    valueObs: KObs, callback: (val: InferKoType<KObs>) => void): IDisposable|null;\nexport function subscribeBindable<T>(\n    valueObs: BindableValue<T>, callback: (val: T) => void): IDisposable|null;\nexport function subscribeBindable<T>(\n    valueObs: BindableValue<T>, callback: (val: T) => void): IDisposable|null {\n  // A plain function (to make a computed from), or a knockout observable.\n  if (typeof valueObs === 'function') {\n    // Knockout observable.\n    const koValue = valueObs as IKnockoutReadObservable<T>;\n    if (typeof koValue.peek === 'function') {\n      const sub = koValue.subscribe((val) => callback(val));\n      callback(koValue.peek());\n      return sub;\n    }\n\n    // Function from which to make a computed. Note that this is also reasonable:\n    //    let sub = subscribe(use => callback(valueObs(use)));\n    // The difference is that when valueObs() evaluates to unchanged value, callback would be\n    // called in the version above, but not in the version below.\n    const comp = computed(valueObs as ComputedCallback<T>);\n    comp.addListener((val) => callback(val));\n    callback(comp.get());\n    return comp;      // Disposing this will dispose its one listener.\n  }\n\n  // An observable.\n  if (valueObs instanceof BaseObservable) {\n    // Use subscribe() rather than addListener(), so that bundling of changes (implicit and with\n    // bundleChanges()) is respected. This matters when callback also uses observables.\n    return subscribe(valueObs, (use, val) => callback(val));\n  }\n\n  callback(valueObs);\n  return null;\n}\n\n/**\n * Subscribes a callback to valueObs (which may be a value, observable, or function) using\n * subscribe(), and disposes the subscription with the passed-in element.\n */\nexport function subscribeElem<T>(elem: Node, valueObs: BindableValue<T>,\n                                 callback: (newVal: T, oldVal?: T) => void): void {\n  autoDisposeElem(elem, subscribeBindable(valueObs, callback));\n}\n","/**\n * Module that allows client-side code to use browser globals (such as `document` or `Node`) in a\n * way that allows those globals to be replaced by mocks in browser-less tests.\n *\n *    import {G} from 'browserGlobals';\n *    ... use G.document\n *    ... use G.Node\n *\n * Initially, the global `window` object, is the source of the global values.\n *\n * To use a mock of globals in a test, use:\n *\n *    import {pushGlobals, popGlobals} as G from 'browserGlobals';\n *    before(function() {\n *      pushGlobals(mockWindow);    // e.g. jsdom.jsdom(...).defaultView\n *    });\n *    after(function() {\n *      popGlobals();\n *    });\n */\n\nexport interface IBrowserGlobals {\n  DocumentFragment: typeof DocumentFragment;\n  Element: typeof Element;\n  Node: typeof Node;\n  document: typeof document;\n  window: typeof window;\n}\n\nexport interface IBrowserGlobalsLax extends IBrowserGlobals {window: any};\n\nfunction _updateGlobals(dest: IBrowserGlobals, source: IBrowserGlobals): void {\n  dest.DocumentFragment  = source.DocumentFragment;\n  dest.Element           = source.Element;\n  dest.Node              = source.Node;\n  dest.document          = source.document;\n  dest.window            = source.window;\n}\n\n// The initial IBrowserGlobals object.\nconst initial: IBrowserGlobals = {} as IBrowserGlobals;\n_updateGlobals(initial, (typeof window !== 'undefined' ? window as any : {}));\n\n// The globals G object strats out with a copy of `initial`.\nexport const G: IBrowserGlobals = { ...initial };\n\n// The stack of globals that always has the intial object, but which may be overridden.\nconst _globalsStack: IBrowserGlobals[] = [initial];\n\n/**\n * Replace globals with those from the given object. Use popGlobals() to restore previous values.\n */\nexport function pushGlobals(globals: IBrowserGlobalsLax): void {\n  _globalsStack.push(globals);\n  _updateGlobals(G, globals);\n}\n\n/**\n * Restore the values of globals to undo the preceding pushGlobals() call.\n */\nexport function popGlobals(): void {\n  if (_globalsStack.length > 1) {\n    _globalsStack.pop();\n  }\n  _updateGlobals(G, _globalsStack[_globalsStack.length - 1]);\n}\n","import {BindableValue, subscribeElem as _subscribe} from './binding';\nimport {onDisposeElem} from './domDispose';\nimport {DomElementMethod, DomMethod, IAttrObj} from './domImpl';\n\n// Use the browser globals in a way that allows replacing them with mocks in tests.\nimport {G} from './browserGlobals';\n\n/**\n * Private global map for associating arbitrary data with DOM. It's a WeakMap, so does not prevent\n * values from being garbage collected when the owning DOM elements are no longer used.\n */\nconst _dataMap: WeakMap<Node, {[key: string]: any}> = new WeakMap();\n\n/**\n * Sets multiple attributes of a DOM element. The `attrs()` variant takes no `elem` argument.\n * Null and undefined values are omitted, and booleans are either omitted or set to empty string.\n * @param {Object} attrsObj: Object mapping attribute names to attribute values.\n */\nexport function attrsElem(elem: Element, attrsObj: IAttrObj): void {\n  for (const key of Object.keys(attrsObj)) {\n    const val = attrsObj[key];\n    if (val != null && val !== false) {\n      elem.setAttribute(key, val === true ? '' : val);\n    }\n  }\n}\nexport function attrs(attrsObj: IAttrObj): DomElementMethod {\n  return (elem) => attrsElem(elem, attrsObj);\n}\n\n/**\n * Sets an attribute of a DOM element to the given value. Removes the attribute when the value is\n * null or undefined. The `attr()` variant takes no `elem` argument, and `attrValue` may be an\n * observable or function.\n * @param {Element} elem: The element to update.\n * @param {String} attrName: The name of the attribute to bind, e.g. 'href'.\n * @param {String|null} attrValue: The string value or null to remove the attribute.\n */\nexport function attrElem(elem: Element, attrName: string, attrValue: string|null): void {\n  if (attrValue === null || attrValue === undefined) {\n    elem.removeAttribute(attrName);\n  } else {\n    elem.setAttribute(attrName, attrValue);\n  }\n}\nexport function attr(attrName: string, attrValueObs: BindableValue<string>): DomElementMethod {\n  return (elem) => _subscribe(elem, attrValueObs, (val) => attrElem(elem, attrName, val));\n}\n\n/**\n * Sets or removes a boolean attribute of a DOM element. According to the spec, empty string is a\n * valid true value for the attribute, and the false value is indicated by the attribute's absence.\n * The `boolAttr()` variant takes no `elem`, and `boolValue` may be an observable or function.\n * @param {Element} elem: The element to update.\n * @param {String} attrName: The name of the attribute to bind, e.g. 'checked'.\n * @param {Boolean} boolValue: Boolean value whether to set or unset the attribute.\n */\nexport function boolAttrElem(elem: Element, attrName: string, boolValue: boolean): void {\n  attrElem(elem, attrName, boolValue ? '' : null);\n}\nexport function boolAttr(attrName: string, boolValueObs: BindableValue<boolean>): DomElementMethod {\n  return (elem) => _subscribe(elem, boolValueObs, (val) => boolAttrElem(elem, attrName, val));\n}\n\n/**\n * Adds a text node to the element. The `text()` variant takes no `elem`, and `value` may be an\n * observable or function.\n * @param {Element} elem: The element to update.\n * @param {String} value: The text value to add.\n */\nexport function textElem(elem: Node, value: string): void {\n  elem.appendChild(G.document.createTextNode(value));\n}\nexport function text(valueObs: BindableValue<string>): DomMethod {\n  return (elem) => {\n    const textNode = G.document.createTextNode('');\n    _subscribe(elem, valueObs, (val) => { textNode.nodeValue = val; });\n    elem.appendChild(textNode);\n  };\n}\n\n/**\n * Sets a style property of a DOM element to the given value. The `style()` variant takes no\n * `elem`, and `value` may be an observable or function.\n * @param {Element} elem: The element to update.\n * @param {String} property: The name of the style property to update, e.g. 'fontWeight'.\n * @param {String} value: The value for the property.\n */\nexport function styleElem(elem: Element, property: string, value: string): void {\n  (elem as any).style[property] = value;\n}\nexport function style(property: string, valueObs: BindableValue<string>): DomElementMethod {\n  return (elem) =>\n    _subscribe(elem, valueObs, (val) => styleElem(elem, property, val));\n}\n\n/**\n * Sets the property of a DOM element to the given value.\n * The `prop()` variant takes no `elem`, and `value` may be an observable or function.\n * @param {Element} elem: The element to update.\n * @param {String} property: The name of the property to update, e.g. 'disabled'.\n * @param {Object} value: The value for the property.\n */\nexport function propElem<T>(elem: Node, property: string, value: T): void {\n  (elem as any)[property] = value;\n}\nexport function prop<T>(property: string, valueObs: BindableValue<T>): DomMethod {\n  return (elem) => _subscribe(elem, valueObs, (val) => propElem(elem, property, val));\n}\n\n/**\n * Shows or hides the element depending on a boolean value. Note that the element must be visible\n * initially (i.e. unsetting style.display should show it).\n * The `show()` variant takes no `elem`, and `boolValue` may be an observable or function.\n * @param {Element} elem: The element to update.\n * @param {Boolean} boolValue: True to show the element, false to hide it.\n */\nexport function showElem(elem: HTMLElement, boolValue: boolean): void {\n  elem.style.display = boolValue ? '' : 'none';\n}\nexport function show(boolValueObs: BindableValue<boolean>): DomElementMethod {\n  return (elem) =>\n    _subscribe(elem, boolValueObs, (val) => showElem(elem, val));\n}\n\n/**\n * The opposite of show, hiding the element when boolValue is true.\n * The `hide()` variant takes no `elem`, and `boolValue` may be an observable or function.\n * @param {Element} elem: The element to update.\n * @param {Boolean} boolValue: True to hide the element, false to show it.\n */\nexport function hideElem(elem: HTMLElement, boolValue: boolean): void {\n  elem.style.display = boolValue ? 'none' : '';\n}\nexport function hide(boolValueObs: BindableValue<boolean>): DomElementMethod {\n  return (elem) =>\n    _subscribe(elem, boolValueObs, (val) => hideElem(elem, val));\n}\n\n/**\n * Sets or toggles the given css class className.\n */\nexport function clsElem(elem: Element, className: string, boolValue: boolean = true): void {\n  elem.classList.toggle(className, Boolean(boolValue));\n}\n\n/**\n * Sets or toggles a css class className. If className is an observable, it will be replaced when\n * the observable changes. If a plain string, then an optional second boolean observable may be\n * given, which will toggle it.\n *\n *    dom.cls('foo')                                // Sets className 'foo'\n *    dom.cls('foo', isFoo);                        // Toggles 'foo' className according to observable.\n *    dom.cls('foo', (use) => use(isFoo));          // Toggles 'foo' className according to observable.\n *    dom.cls(fooClass);                            // Sets className to the value of fooClass observable\n *    dom.cls((use) => `prefix-${use(fooClass)}`);  // Sets className to prefix- plus fooClass observable.\n */\nexport function cls(className: string, boolValue?: BindableValue<boolean>): DomElementMethod;\nexport function cls(className: BindableValue<string>): DomElementMethod;\nexport function cls(className: string|BindableValue<string>, boolValue?: BindableValue<boolean>): DomElementMethod {\n  if (typeof className !== 'string') {\n    return _clsDynamicPrefix('', className);\n  } else if (!boolValue || typeof boolValue === 'boolean') {\n    return (elem) => clsElem(elem, className, boolValue);\n  } else {\n    return (elem) => _subscribe(elem, boolValue, (val) => clsElem(elem, className, val));\n  }\n}\n\n/**\n * Just like cls() but prepends a prefix to className, including when it is an observable.\n */\nexport function clsPrefix(prefix: string, className: string, boolValue?: BindableValue<boolean>): DomElementMethod;\nexport function clsPrefix(prefix: string, className: BindableValue<string>): DomElementMethod;\nexport function clsPrefix(prefix: string, className: string|BindableValue<string>,\n                          boolValue?: BindableValue<boolean>): DomElementMethod {\n  if (typeof className !== 'string') {\n    return _clsDynamicPrefix(prefix, className);\n  } else {\n    return cls(prefix + className, boolValue);\n  }\n}\n\nfunction _clsDynamicPrefix(prefix: string, className: BindableValue<string>): DomElementMethod {\n  return (elem) => {\n    let prevClass: string|null = null;\n    _subscribe(elem, className, (name: string) => {\n      if (prevClass) { elem.classList.remove(prevClass); }\n      prevClass = name ? prefix + name : null;\n      if (prevClass) { elem.classList.add(prevClass); }\n    });\n  };\n}\n\n/**\n * Associate arbitrary data with a DOM element. The `data()` variant takes no `elem`, and `value`\n * may be an observable or function.\n * @param {Element} elem: The element with which to associate data.\n * @param {String} key: Key to identify this piece of data among others attached to elem.\n * @param {Object} value: Arbitrary value to associate with elem.\n */\nexport function dataElem(elem: Node, key: string, value: any): void {\n  const obj = _dataMap.get(elem);\n  if (obj) {\n    obj[key] = value;\n  } else {\n    onDisposeElem(elem, () => _dataMap.delete(elem));\n    _dataMap.set(elem, {[key]: value});\n  }\n}\nexport function data(key: string, valueObs: BindableValue<any>): DomMethod {\n  return (elem) => _subscribe(elem, valueObs, (val) => dataElem(elem, key, val));\n}\nexport function getData(elem: Node, key: string) {\n  const obj = _dataMap.get(elem);\n  return obj && obj[key];\n}\n\n/**\n * A very simple setup to identify DOM elements for testing purposes. Here's the recommended\n * usage.\n *\n *   // In the component to be tested.\n *   import {noTestId, TestId} from 'grainjs';\n *\n *   function myComponent(myArgs, testId: TestId = noTestId) {\n *     return dom(..., testId(\"some-name\"),\n *       dom(..., testId(\"another-name\"), ...),\n *     );\n *   }\n *\n * In the fixture code using this component:\n *\n *   import {makeTestId} from 'grainjs';\n *\n *   dom(..., myComponent(myArgs, makeTestId('test-mycomp-'), ...)\n *\n * In the webdriver test code:\n *\n *   driver.find('.test-my-comp-some-name')\n *   driver.find('.test-my-comp-another-name')\n *\n * When myComponent() is created with testId argument omitted, the testId() calls are no-ops. When\n * makeTestId('test-foo-') is passed in, testId() calls simply add a css class with that prefix.\n */\nexport type TestId = (name: string) => DomElementMethod|null;\n\n/**\n * See documentation for TestId above.\n */\nexport function makeTestId(prefix: string): TestId {\n  return clsPrefix.bind(null, prefix);\n}\n\n/**\n * See documentation for TestId above.\n */\nexport const noTestId: TestId = (name: string) => null;\n","import {domDispose} from './domDispose';\nimport {attrsElem} from './domMethods';\n\n// Use the browser globals in a way that allows replacing them with mocks in tests.\nimport {G} from './browserGlobals';\n\n// For inline modifications, some other options were considered:\n// (1) Chainable methods (to use e.g. `dom('div').attr('href', url).value()`). This approach is\n//     criticized here:\n//     https://medium.com/making-internets/why-using-chain-is-a-mistake-9bc1f80d51ba\n// (2) Adding methods to DOM (to use e.g. `dom('div').attr('href', url)`. This is criticized here:\n//     http://perfectionkills.com/whats-wrong-with-extending-the-dom/\n// The approach chosen (inline modifications using functions that are typically bound on the fly)\n// is more flexible and robust, and only suffers from slightly more verbosity. E.g.\n// `dom('div', dom.attr('href', url))`.\n\nexport type DomMethod<T = Node> = (elem: T) => DomArg<T>|void;\nexport type DomElementMethod = DomMethod<HTMLElement>;\n\nexport interface IAttrObj {\n  [attrName: string]: string|boolean|null|undefined;\n}\n\n// Type of argument to dom-building functions. Allows IAttrObj when applied to an Element.\n//\n// Note that DomArg<A> differs from DomArg<B> in what callbacks are accepted, so DomArg<Element>\n// can be assigned to DomArg<HTMLInputElement>, but not vice versa. When writing a function that\n// accepts DomArgs and applies them to an element, use the most specific DomArg type that works\n// for that element, e.g. DomArg<HTMLInputElement> if possible, then DomElementArg, then DomArg.\nexport type DomArg<T = Node> = Node | string | void | null | undefined |\n  IDomArgs<T> | DomMethod<T> | (T extends Element ? IAttrObj : never);\n\nexport interface IDomArgs<T = Node> extends Array<DomArg<T>> {}\n\n// Alias for backward compatibility.\nexport type DomElementArg = DomArg<HTMLElement>;\n\n// The goal of the above declarations is to get help from TypeScript in detecting incorrect usage:\n// (See test/types/dom.ts for a test of this.)\n//  import {text, hide} from './domMethods';\n//  dom('div', text('hello'));        // OK\n//  dom('div', hide(true));           // OK\n//  dom('div', {title: 'hello'});     // OK\n//  frag(text('hello'));              // OK\n//  frag(hide(true));                 // Bad: DocumentFragment is not an Element\n//  frag({title: 'hello'});           // Bad: DocumentFragment is not an Element\n\n/**\n * dom('tag#id.class1.class2', ...args)\n *   The first argument is a string consisting of a tag name, with optional #foo suffix\n *   to add the ID 'foo', and zero or more .bar suffixes to add a CSS class 'bar'.\n *\n *   NOTE that better typings are available when a tag is used directly, e.g.\n *      dom('input', {id: 'foo'}, (elem) => ...) --> elem has type HTMLInputElement\n *      dom('input#foo',          (elem) => ...) --> elem has type HTMLElement\n *\n * The rest of the arguments are optional and may be:\n *\n *   Nodes - which become children of the created element;\n *   strings - which become text node children;\n *   objects - of the form {attr: val} to set additional attributes on the element;\n *   Arrays - which are flattened with each item processed recursively;\n *   functions - which are called with elem as the argument, for a chance to modify the\n *       element as it's being created. Return values are processed recursively.\n *   \"dom methods\" - expressions such as `dom.attr('href', url)` or `dom.hide(obs)`, which\n *       are actually special cases of the \"functions\" category.\n */\nexport function dom<Tag extends TagName>(tagString: Tag, ...args: IDomArgs<TagElem<Tag>>): TagElem<Tag> {\n  return _updateWithArgsOrDispose(_createFromTagString(_createElementHtml, tagString) as TagElem<Tag>, args);\n}\n\nexport type TagName = keyof HTMLElementTagNameMap|string;\nexport type TagElem<T extends TagName> = T extends keyof HTMLElementTagNameMap ? HTMLElementTagNameMap[T] : HTMLElement;\n\n/**\n * svg('tag#id.class1.class2', ...args)\n *  Same as dom(...), but creates an SVG element.\n */\nexport function svg(tagString: string, ...args: IDomArgs<SVGElement>): SVGElement {\n  return _updateWithArgsOrDispose(_createFromTagString(_createElementSvg, tagString), args);\n}\n\n// Internal helper used to create HTML elements.\nfunction _createElementHtml(tag: string): HTMLElement {\n  return G.document.createElement(tag);\n}\n\n// Internal helper used to create SVG elements.\nfunction _createElementSvg(tag: string): SVGElement {\n  return G.document.createElementNS(\"http://www.w3.org/2000/svg\", tag);\n}\n\n/**\n * Internal helper to parse tagString, create an element using createFunc with the given tag, and\n * set its id and classes from the tagString.\n * @param {Funtion} createFunc(tag): Function that should create an element given a tag name.\n *    It is passed in to allow creating elements in different namespaces (e.g. plain HTML vs SVG).\n * @param {String} tagString: String of the form \"tag#id.class1.class2\" where id and classes are\n *    optional.\n * @return {Element} The result of createFunc(), possibly with id and class attributes also set.\n */\nfunction _createFromTagString<E extends Element>(createFunc: (tag: string) => E, tagString: string): E {\n  // We do careful hand-written parsing rather than use a regexp for speed. Using a regexp is\n  // significantly more expensive.\n  let tag: string;\n  let id: string|undefined;\n  let classes: string|undefined;\n  let dotPos: number = tagString.indexOf(\".\");\n  const hashPos: number = tagString.indexOf('#');\n  if (dotPos === -1) {\n    dotPos = tagString.length;\n  } else {\n    classes = tagString.substring(dotPos + 1).replace(/\\./g, ' ');\n  }\n  if (hashPos === -1) {\n    tag = tagString.substring(0, dotPos);\n  } else if (hashPos > dotPos) {\n    throw new Error(`ID must come before classes in dom(\"${tagString}\")`);\n  } else {\n    tag = tagString.substring(0, hashPos);\n    id = tagString.substring(hashPos + 1, dotPos);\n  }\n\n  const elem: E = createFunc(tag);\n  if (id) { elem.setAttribute('id', id); }\n  if (classes) { elem.setAttribute('class', classes); }\n  return elem;\n}\n\n/**\n * Update an element with any number of arguments, as documented in dom().\n */\nexport function update<T extends Node, Args extends IDomArgs<T>>(elem: T, ...args: Args): T {\n  return _updateWithArgs(elem, args);\n}\n\n/**\n * Update an element with an array of arguments.\n */\nfunction _updateWithArgs<T extends Node>(elem: T, args: IDomArgs<T>): T {\n  for (const arg of args) {\n    _updateWithArg(elem, arg);\n  }\n  return elem;\n}\n\n/**\n * Update an element with an array of arguments, calling disposers in case of an exception. It is\n * an internal helper to be used whenever elem is a newly-created element. If elem is an existing\n * element which the user already knows about, then _updateWithArgs should be called.\n */\nfunction _updateWithArgsOrDispose<T extends Node>(elem: T, args: IDomArgs<T>): T {\n  try {\n    return _updateWithArgs(elem, args);\n  } catch (e) {\n    domDispose(elem);\n    throw e;\n  }\n}\n\nfunction _updateWithArg<T extends Node>(elem: T, arg: DomArg<T>): void {\n  if (typeof arg === 'function') {\n    const value: DomArg<T> = arg(elem);\n    // Skip the recursive call in the common case when the function returns nothing.\n    if (value !== undefined && value !== null) {\n      _updateWithArg(elem, value);\n    }\n  } else if (Array.isArray(arg)) {\n    _updateWithArgs(elem, arg);\n  } else if (arg === undefined || arg === null) {\n    // Nothing to do.\n  } else if (arg instanceof G.Node) {\n    elem.appendChild(arg);\n  } else if (typeof arg === 'object') {\n    attrsElem(elem as any, arg);\n  } else {\n    elem.appendChild(G.document.createTextNode(arg));\n  }\n}\n\n/**\n * Creates a DocumentFragment processing arguments the same way as the dom() function.\n */\nexport function frag(...args: IDomArgs<DocumentFragment>): DocumentFragment {\n  const elem = G.document.createDocumentFragment();\n  return _updateWithArgsOrDispose<DocumentFragment>(elem, args);\n}\n\n/**\n * Find the first element matching a selector; just an abbreviation for document.querySelector().\n */\nexport function find(selector: string) { return G.document.querySelector(selector); }\n\n/**\n * Find all elements matching a selector; just an abbreviation for document.querySelectorAll().\n */\nexport function findAll(selector: string) { return G.document.querySelectorAll(selector); }\n","import {BindableValue, subscribeElem} from './binding';\nimport {Holder, MultiHolder} from './dispose';\nimport {autoDisposeElem, domDispose} from './domDispose';\nimport {DomArg, DomMethod, frag} from './domImpl';\n\n// Use the browser globals in a way that allows replacing them with mocks in tests.\nimport {G} from './browserGlobals';\n\n// The type returned by domComputed(). It's actually an example of DomArg, but is given its own\n// name for use in places where a DomComputed is suitable but a general DomArg is not.\nexport type DomComputed = [Node, Node, DomMethod];\n\nexport type DomContents = Node | string | DomComputed | void | null | undefined | IDomContentsArray;\nexport interface IDomContentsArray extends Array<DomContents> {}\n\n\n/**\n * Replaces the content between nodeBefore and nodeAfter, which should be two siblings within the\n * same parent node. New content may be anything allowed as an argument to dom(), including null\n * to insert nothing. Runs disposers, if any, on all removed content.\n */\nexport function replaceContent(nodeBefore: Node, nodeAfter: Node, content: DomContents): void {\n  const elem = nodeBefore.parentNode;\n  if (elem) {\n    let next;\n    for (let n = nodeBefore.nextSibling; n && n !== nodeAfter; n = next) {\n      next = n.nextSibling;\n      domDispose(n);\n      elem.removeChild(n);\n    }\n    if (content) {\n      elem.insertBefore(content instanceof G.Node ? content : frag(content), nodeAfter);\n    }\n  }\n}\n\n/**\n * Appends dynamic DOM content to an element. The value may be an observable or function (from\n * which a computed is created), whose value will be passed to `contentFunc` which should return\n * DOM content. If the contentFunc is omitted, it defaults to identity, i.e. it's OK for the\n * observable or function to return DOM directly.\n *\n * The DOM content returned may be an element, string, array, or null. Whenever the observable\n * changes, previous content is disposed and removed, and new content added in its place.\n *\n * The following are roughly equivalent:\n *  (A) domComputed(nlinesObs, nlines => nlines > 1 ? dom('textarea') : dom('input'));\n *  (B) domComputed(use => use(nlinesObs) > 1 ? dom('textarea') : dom('input'));\n *  (C) domComputed(use => use(nlinesObs) > 1, isTall => isTall ? dom('textarea') : dom('input'));\n *\n * Here, (C) is best. Both (A) and (B) would rebuild DOM for any change in nlinesObs, but (C)\n * encapsulates meaningful changes in the observable, and only recreates DOM when necessary.\n *\n * Syntax (B), without the second argument, may be useful in cases of DOM depending on several\n * observables, e.g.\n *\n *    domComputed(use => use(readonlyObs) ? dom('div') :\n *                          (use(nlinesObs) > 1 ? dom('textarea') : dom('input')));\n *\n * If the argument is not an observable, domComputed() may but should not be used. The following\n * are equivalent:\n *\n *    dom(..., domComputed(listValue, list => `Have ${list.length} items`), ...)\n *    dom(..., `Have ${listValue.length} items`, ...)\n *\n * In this case, the latter is preferred as the clearly simpler one.\n *\n * @param valueObs: Observable or function for a computed.\n * @param contentFunc: Function called with the result of valueObs as the input, and\n *    returning DOM as output. If omitted, defaults to the identity function.\n */\n// Note that DomMethod is excluded because it prevents typescript from inferring the type of\n// the first argument when it's a function (and it's not useful).\nexport function domComputed(valueObs: BindableValue<Exclude<DomArg, DomMethod>>): DomComputed;\nexport function domComputed<T>(valueObs: BindableValue<T>, contentFunc: (val: T) => DomContents): DomComputed;\nexport function domComputed<T>(\n  valueObs: BindableValue<T>, contentFunc: (val: T) => DomContents = identity as any,\n): DomComputed {\n  const markerPre = G.document.createComment('a');\n  const markerPost = G.document.createComment('b');\n\n  // Function is added after markerPre and markerPost, so that it runs once they have already been\n  // attached to elem (the parent element).\n  return [markerPre, markerPost, (elem: Node) => {\n    subscribeElem(markerPost, valueObs,\n      (value) => replaceContent(markerPre, markerPost, contentFunc(value)));\n  }];\n}\n\n/**\n * Like domComputed(), but the callback gets an additional first argument, owner, which may be\n * used to take ownership of objects created by the callback. These will be disposed before each\n * new call to the callback, and when the containing DOM is disposed.\n *\n *    domComputedOwned(valueObs, (owner, value) => Editor.create(owner, value).renderSomething());\n */\nexport function domComputedOwned<T>(\n  valueObs: BindableValue<T>, contentFunc: (owner: MultiHolder, val: T) => DomContents\n): DomComputed {\n  const holder = Holder.create(null);\n  const [markerPre, markerPost, func] = domComputed(valueObs,\n    (val: T) => contentFunc(MultiHolder.create(holder), val));\n  autoDisposeElem(markerPost, holder);\n  return [markerPre, markerPost, func];\n}\n\nfunction identity<T>(arg: T): T { return arg; }\n\n/**\n * Conditionally appends DOM to an element. The value may be an observable or function (from which\n * a computed is created), whose value -- if truthy -- will be passed to `contentFunc` which\n * should return DOM content. If the value is falsy, DOM content is removed.\n *\n * Note that if the observable changes between different truthy values, contentFunc gets called\n * for each value, and previous content gets destroyed. To consider all truthy values the same,\n * use an observable that returns a proper boolean, e.g.\n *\n *    dom.maybe(use => Boolean(use(fooObs)), () => dom(...));\n *\n * As with domComputed(), dom.maybe() may but should not be used when the argument is not an\n * observable or function. The following are equivalent:\n *\n *    dom(..., dom.maybe(myValue, () => dom(...)));\n *    dom(..., myValue ? dom(...) : null);\n *\n * The latter is preferred for being simpler.\n *\n * @param boolValueObs: Observable or function for a computed.\n * @param contentFunc: Called with the result of boolValueObs when it is truthy. Should return DOM.\n */\nexport function maybe<T>(boolValueObs: BindableValue<T>,\n    contentFunc: (val: NonNullable<T>) => DomContents): DomComputed {\n  return domComputed(boolValueObs, (value) => value ? contentFunc(value!) : null);\n}\n\n/**\n * Like maybe(), but the callback gets an additional first argument, owner, which may be used to\n * take ownership of objects created by the callback. These will be disposed before each new call\n * to the callback, and when the condition becomes false or the containing DOM gets disposed.\n *\n *    maybeOwned(showEditor, (owner) => Editor.create(owner).renderSomething());\n */\nexport function maybeOwned<T>(boolValueObs: BindableValue<T>,\n    contentFunc: (owner: MultiHolder, val: NonNullable<T>) => DomContents): DomComputed {\n  return domComputedOwned(boolValueObs, (owner, value) => value ? contentFunc(owner, value!) : null);\n}\n","/**\n * UI components that can be inserted into dom().\n *\n * Components are created and inserted using dom.create():\n *\n *    dom('div',\n *      dom.create(MyWidget, ...myArgs),        // Calls MyWidget.create(owner, ...myArgs)\n *      dom.create(createMyWidget, ...myArgs),  // Calls createMyWidget(owner, ...myArgs)\n *    )\n *\n * The first argument may be a function, which is called directly, or a class with a .create()\n * static method, in which case that's what gets called.\n *\n * In both cases, the call gets a first argument of `owner` followed by the rest of the arguments\n * to dom.create(). The `owner` is a MultiHolder that will own this component. This works\n * naturally with any class that derives from Disposable, since it then has a suitable static\n * create() method.\n *\n * Function-based components may use owner to easily handle disposal. For example:\n *\n *    dom.create(createMyWidget)\n *    function createMyWidget(owner) {\n *      const foo = Foo.create(owner);\n *      return dom('div', foo.getTitle());\n *    }\n *\n * The `owner` argument is the main benefit of dom.create(). Logically, the owner is the DOM where\n * the component is attached. When the parent DOM element is disposed, so is the component.\n *\n *    [Explanation] To understand why the syntax is such, consider a potential alternative such as:\n *\n *       dom('div', _insert_(new Comp1()), _insert_(new Comp2(...args)))\n *\n *    In both cases, the constructor for Comp1 runs before the constructor for Comp2. What happens\n *    when Comp2's constructor throws an exception? In the second case, nothing yet owns the\n *    created Comp1 component, and it will never get cleaned up. With dom.create(), the DOM\n *    gets ownership of Comp1 early enough and will dispose it.\n *\n * A function component may return DOM directly. A class component returns the class instance,\n * which must have a .buildDom() method which will be called right after the constructor to get\n * the DOM. Note that buildDom is only called once.\n *\n * A function component may also return an object with .buildDom(). So these are equivalent:\n *\n *    dom.create(MyWidget)\n *    dom.create((owner) => MyWidget.create(owner))\n *\n * Note that ownership should be handled using the `owner` argument. Don't do this:\n *\n *    // NON-EXAMPLE: Nothing will dispose the created object:\n *    // dom.create(() => new MyWidget());\n *\n * The returned DOM may includes Nodes, strings, and domComputed() values, as well as arrays of\n * any of these. In other words, any DomArg goes except DomMethods. All the DOM returned will be\n * disposed when the containing element is disposed, followed by the `owner` itself.\n */\nimport {MultiHolder} from './dispose';\nimport {domComputedOwned, DomContents} from './domComputed';\n\nexport interface IDomComponent {\n  buildDom(): DomContents;\n}\n\nexport type DomComponentReturn = DomContents | IDomComponent;\n\nexport type IDomCreateFunc<Args extends any[]> = (owner: MultiHolder, ...args: Args) => DomComponentReturn;\n\n// It's not that we must have a constructor matching create(), but specifying type of new allows\n// type checking of classes that derive from Disposable, whereas matching only create() does not\n// (presumably because of the too much magic that Disposable does for the type of create()).\nexport interface IDomCreateClass<Args extends any[]> {\n  create: IDomCreateFunc<Args>;\n  new (...args: Args): DomComponentReturn;\n}\nexport type IDomCreator<Args extends any[]> = IDomCreateFunc<Args> | IDomCreateClass<Args>;\n\ntype DomCreatorArgs<T> =\n  T extends (owner: MultiHolder, ...args: infer P) => any ? P :\n  (T extends new (...args: infer P) => any ? P : never);\n\nexport function create<Fn extends IDomCreator<any[]>>(fn: Fn, ...args: DomCreatorArgs<Fn>): DomContents {\n  return domComputedOwned(null, (owner) => {\n    const value: DomComponentReturn = ('create' in fn) ?\n      (fn as IDomCreateClass<any[]>).create(owner, ...args) :\n      (fn as IDomCreateFunc<any[]>)(owner, ...args);\n    return (value && typeof value === 'object' && 'buildDom' in value) ?\n      value.buildDom() : value;\n  });\n}\n","/**\n * ObsArray extends a plain Observable to allow for more efficient observation of array changes.\n *\n * As for any array-valued Observable, when the contents of the observed array changes, the\n * listeners get called with new and previous values which are the same array. For simple changes,\n * such as those made with .push() and .splice() methods, ObsArray allows for more efficient\n * handling of the change by calling listeners with splice info in the third argument.\n *\n * This module also provides computedArray(), which allows mapping each item of an ObsArray\n * through a function, passing through splice info for efficient handling of small changes. It\n * also allows mapping an observable or a computed whose value is an ObsArray.\n *\n * There is no need or benefit in using computedArray() if you have a computed() that returns a\n * plain array. It is specifically for the case when you want to preserve the efficiency of\n * ObsArray when you map its values.\n *\n * Both ObsArray and ComputedArray may be used with disposable elements as their owners. E.g.\n *\n *    const arr = obsArray<D>();\n *    arr.push(D.create(arr, \"x\"), D.create(arr, \"y\"));\n *    arr.pop();      // Element \"y\" gets disposed.\n *    arr.dispose();  // Element \"x\" gets disposed.\n *\n *    const values = obsArray<string>();\n *    const compArr = computedArray<D>(values, (val, i, compArr) => D.create(compArr, val));\n *    values.push(\"foo\", \"bar\");      // D(\"foo\") and D(\"bar\") get created\n *    values.pop();                   // D(\"bar\") gets disposed.\n *    compArr.dispose();              // D(\"foo\") gets disposed.\n *\n * Note that only the pattern above works: obsArray (or compArray) may only be used to take\n * ownership of those disposables that are added to it as array elements.\n */\n\nimport {IDisposable, IDisposableOwnerT, setDisposeOwner} from './dispose';\nimport {Listener} from './emit';\nimport {BaseObservable, Observable} from './observable';\nimport {subscribe, Subscription} from './subscribe';\n\n/**\n * Either an observable or a plain array of T. This is useful for functions like dom.forEach()\n * which are convenient to have available for both.\n */\nexport type MaybeObsArray<T> = BaseObservable<T[]> | T[];\n\n/**\n * Info about a modification to ObsArray contents. It is included as a third argument to change\n * listeners when available. When not available, listeners should assume that the array changed\n * completely.\n */\nexport interface IObsArraySplice<T> {\n  start: number;\n  numAdded: number;\n  deleted: T[];\n}\n\nexport type ISpliceListener<T, C>  = (this: C, val: T[], prev: T[], change?: IObsArraySplice<T>) => void;\n\n/**\n * ObsArray<T> is essentially an array-valued observable. The main difference is that it may be\n * used as an owner for disposable array elements.\n */\nexport class ObsArray<T> extends BaseObservable<T[]> {\n  private _ownedItems?: Set<T & IDisposable> = undefined;\n\n  public addListener(callback: ISpliceListener<T, void>): Listener;\n  public addListener<C>(callback: ISpliceListener<T, C>, context: C): Listener;\n  public addListener(callback: ISpliceListener<T, any>, optContext?: any): Listener {\n    return super.addListener(callback, optContext);\n  }\n\n  public autoDispose(value: T & IDisposable): T & IDisposable {\n    if (!this._ownedItems) { this._ownedItems = new Set<T & IDisposable>(); }\n    this._ownedItems.add(value);\n    return value;\n  }\n\n  public dispose(): void {\n    if (this._ownedItems) {\n      for (const item of this.get() as Array<T & IDisposable>) {\n        if (this._ownedItems.delete(item)) {\n          item.dispose();\n        }\n      }\n      this._ownedItems = undefined;\n    }\n    super.dispose();\n  }\n\n  protected _setWithSplice(value: T[], splice: IObsArraySplice<T>): void {\n    return this._setWithArg(value, splice);\n  }\n\n  protected _disposeOwned(splice?: IObsArraySplice<T>): void {\n    if (!this._ownedItems) { return; }\n    if (splice) {\n      for (const item of splice.deleted as Array<T & IDisposable>) {\n        if (this._ownedItems.delete(item)) {\n          item.dispose();\n        }\n      }\n    } else {\n      const oldOwnedItems = this._ownedItems;\n\n      // Rebuild the _ownedItems array to have only the current items that were owned from before.\n      this._ownedItems = new Set<T & IDisposable>();\n      for (const item of this.get() as Array<T & IDisposable>) {\n        if (oldOwnedItems.delete(item)) {\n          this._ownedItems.add(item);\n        }\n      }\n      // After removing current items, dispose any remaining owned items.\n      for (const item of oldOwnedItems) {\n        item.dispose();\n      }\n    }\n  }\n}\n\n/**\n * MutableObsArray<T> adds array-like mutation methods which emit events with splice info, to\n * allow more efficient processing of such changes. It is created with obsArray<T>().\n */\nexport class MutableObsArray<T> extends ObsArray<T> {\n  public push(...args: T[]): number {\n    const value = this.get();\n    const start = value.length;\n    const newLen = value.push(...args);\n    this._setWithSplice(value, {start, numAdded: args.length, deleted: []});\n    return newLen;\n  }\n\n  public pop(): T|undefined {\n    const value = this.get();\n    if (value.length === 0) { return undefined; }\n    const ret = value.pop()!;\n    this._setWithSplice(value, {start: value.length, numAdded: 0, deleted: [ret]});\n    return ret;\n  }\n\n  public unshift(...args: T[]) {\n    const value = this.get();\n    const newLen = value.unshift(...args);\n    this._setWithSplice(value, {start: 0, numAdded: args.length, deleted: []});\n    return newLen;\n  }\n\n  public shift(): T|undefined {\n    const value = this.get();\n    if (value.length === 0) { return undefined; }\n    const ret = value.shift()!;\n    this._setWithSplice(value, {start: 0, numAdded: 0, deleted: [ret]});\n    return ret;\n  }\n\n  public splice(start: number, deleteCount: number = Infinity, ...newValues: T[]) {\n    const value = this.get();\n    const len = value.length;\n    start = Math.min(len, Math.max(0, start < 0 ? len + start : start));\n    const deleted = value.splice(start, deleteCount, ...newValues);\n    this._setWithSplice(value, {start, numAdded: newValues.length, deleted});\n    return deleted;\n  }\n}\n\n/**\n * Creates a new MutableObsArray with an optional initial value, defaulting to the empty array.\n * It is essentially the same as observable<T[]>, but with array-like mutation methods.\n */\nexport function obsArray<T>(value: T[] = []): MutableObsArray<T> {\n  return new MutableObsArray<T>(value);\n}\n\n/**\n * Returns true if val is an array-valued observable.\n */\nfunction isObsArray(val: BaseObservable<any>): val is BaseObservable<any[]> {\n  return Array.isArray(val.get());\n}\n\n/**\n * See computedArray() below for documentation.\n */\nexport class ComputedArray<T, U> extends ObsArray<U> {\n  private _sub: Subscription;\n  private _source?: BaseObservable<T[]>;\n  private _listener?: Listener;\n  private _lastSplice?: IObsArraySplice<T>|false;     // false is a marker that full rebuild is needed\n\n  constructor(\n    obsArr: BaseObservable<T[]> | Observable<BaseObservable<T[]>>,\n    private _mapper: (item: T, index: number, arr: ComputedArray<T, U>) => U,\n  ) {\n    super([]);\n    this._sub = isObsArray(obsArr) ?\n      subscribe(obsArr, (use) => this._syncMap(obsArr)) :\n      subscribe(obsArr, (use, obsArrayValue) => { use(obsArrayValue); return this._syncMap(obsArrayValue); });\n  }\n\n  public dispose() {\n    this._unsync();\n    this._sub.dispose();\n    super.dispose();\n  }\n\n  private _syncMap(obsArr: BaseObservable<T[]>): void {\n    if (this._source !== obsArr) {\n      this._unsync();\n      this._listener = obsArr.addListener(this._recordChange, this);\n      this._source = obsArr;\n      this._rebuild(obsArr);\n    } else if (this._lastSplice) {\n      // If we are syncing to the same array as before and recorded a single splice, apply it now.\n      this._applySplice(obsArr, this._lastSplice);\n    } else {\n      // If the full array changed or we had multiple splices, give up and rebuild.\n      this._rebuild(obsArr);\n    }\n    this._lastSplice = undefined;\n  }\n\n  private _unsync() {\n    if (this._listener) {\n      this._listener.dispose();\n      this._listener = undefined;\n      this._source = undefined;\n    }\n  }\n\n  private _rebuild(obsArr: BaseObservable<T[]>) {\n    this.set(obsArr.get().map((item: T, i: number) => this._mapper.call(undefined, item, i, this)));\n  }\n\n  private _applySplice(obsArr: BaseObservable<T[]>, change: IObsArraySplice<T>) {\n    const sourceArray: T[] = obsArr.get();\n    const newItems: U[] = [];\n    for (let i = change.start, n = 0; n < change.numAdded; i++, n++) {\n      newItems.push(this._mapper.call(undefined, sourceArray[i], i, this));\n    }\n    const items: U[] = this.get();\n    const deleted = items.splice(change.start, change.deleted.length, ...newItems);\n    this._setWithSplice(items, {start: change.start, numAdded: newItems.length, deleted});\n  }\n\n  private _recordChange(newItems: T[], oldItems: T[], change?: IObsArraySplice<T>): void {\n    // We don't attempt to handle efficiency multiple splices (it's quite hard in general, and\n    // even harder to know that it's more efficient than rebuilding), so if _lastSplice is set, we\n    // set it to a marker to mark the array for rebuilding.\n    if (change && this._lastSplice === undefined) {\n      this._lastSplice = change;\n    } else {\n      this._lastSplice = false;     // This is a marker that a full rebuild is needed.\n    }\n  }\n}\n\n/**\n * Returns an ObsArray that maps all elements of the passed-in ObsArray through a mapper function.\n * Also accepts an observable (e.g. a computed) whose value is an ObsArray. Usage:\n *\n *    computedArray(obsArray, mapper)\n *\n * The result is entirely analogous to:\n *\n *     computed((use) => use(obsArray).map(mapper))       // for ObsArray\n *     computed((use) => use(use(obsArray)).map(mapper))  // for Observable<ObsArray>\n *\n * The benefit of computedArray() is that a small change to the source array (e.g. one item\n * added or removed), causes a small change to the mapped array, rather than a full rebuild.\n *\n * This is useful with an ObsArray or with an observable whose value is an ObsArray, and also\n * when the computed array owns its disposable items.\n *\n * Note that the mapper function is called with (item, index, array) as for a standard\n * array.map(), but that the index is only accurate at the time of the call, and will stop\n * reflecting the true index if more items are inserted into the array later.\n */\nexport function computedArray<T, U>(\n  obsArr: BaseObservable<T[]> | Observable<BaseObservable<T[]>>,\n  mapper: (item: T, index: number, arr: ComputedArray<T, U>) => U,\n): ObsArray<U> {\n  return new ComputedArray<T, U>(obsArr, mapper);\n}\n\n/**\n * Returns a new observable representing an index into this array. It can be read and written, and\n * its value is clamped to be a valid index. The index is only null if the array is empty.\n *\n * As the array changes, the index is adjusted to continue pointing to the same element. If the\n * pointed element is deleted, the index is adjusted to after the deletion point.\n *\n * The returned observable has an additional .setLive(bool) method. While set to false, the\n * observable will not be adjusted as the array changes, except to keep it valid.\n */\nexport function makeLiveIndex<T>(owner: IDisposableOwnerT<LiveIndex>|null, obsArr: ObsArray<T>,\n                                 initialIndex: number = 0): LiveIndex {\n  return setDisposeOwner(owner, new LiveIndex(obsArr, initialIndex));\n}\n\nexport class LiveIndex extends Observable<number|null> {\n  private _listener: Listener;\n  private _isLive: boolean = true;\n\n  constructor(private _obsArray: ObsArray<any>, initialIndex: number = 0) {\n    super(null);\n    this.set(initialIndex);\n    this._listener = _obsArray.addListener(this._onArrayChange, this);\n  }\n\n  public set(index: number|null) {\n    // Clamp to [0, len) range of the observable array.\n    const len = this._obsArray.get().length;\n    super.set(len === 0 ? null : Math.max(0, Math.min(len - 1, index || 0)));\n  }\n\n  // Note that this feature comes from a rather obscure need, and it would be better if something\n  // similar were possible without making it an explicit feature.\n  public setLive(value: boolean): void {\n    this._isLive = value;\n  }\n\n  public dispose() {\n    this._listener.dispose();\n    super.dispose();\n  }\n\n  private _onArrayChange<T>(newItems: T[], oldItems: T[], change?: IObsArraySplice<T>) {\n    const idx = this.get();\n    this.set(\n      idx === null || !change ? 0 :\n      // Adjust the index if it was beyond the deleted region.\n      this._isLive && idx >= change.start + change.deleted.length ? idx + change.numAdded - change.deleted.length :\n      // Adjust the index if it was inside the deleted region (and not replaced).\n      this._isLive && idx >= change.start + change.numAdded ? change.start + change.numAdded :\n      idx);\n  }\n}\n","import {DomContents, replaceContent} from './domComputed';\nimport {autoDisposeElem, domDispose} from './domDispose';\nimport {frag} from './domImpl';\nimport {computedArray, MaybeObsArray, ObsArray} from './obsArray';\n\n// Use the browser globals in a way that allows replacing them with mocks in tests.\nimport {G} from './browserGlobals';\n\n/**\n * Creates DOM elements for each element of an observable array. As the array is changed, children\n * are added or removed. This works for any array-valued observable, and for obsArray() and\n * computedArray() it works more efficiently for simple changes.\n *\n * The given itemCreateFunc() should return a single DOM node for each item, or null to skip that\n * item. It is called for new items whenever they are spliced in, or the array replaced. The\n * forEach() owns the created nodes, and runs domDispose() on them when they are spliced out.\n *\n * If the created nodes are removed from their parent externally, forEach() will cope with it, but\n * will consider these elements as no longer owned, and will not run domDispose() on them.\n *\n * Note that itemCreateFunc() does not receive an index: an index would only be correct at the\n * time the item is created, and would not reflect further changes to the array.\n *\n * If you'd like to map the DOM node back to its source item, use dom.data() and dom.getData() in\n * itemCreateFunc().\n */\nexport function forEach<T>(obsArray: MaybeObsArray<T>, itemCreateFunc: (item: T) => Node|null): DomContents {\n  const markerPre = G.document.createComment('a');\n  const markerPost = G.document.createComment('b');\n  return [markerPre, markerPost, (elem: Node) => {\n    if (Array.isArray(obsArray)) {\n      replaceContent(markerPre, markerPost, obsArray.map(itemCreateFunc));\n      return;\n    }\n\n    const nodes: ObsArray<Node|null> = computedArray(obsArray, itemCreateFunc);\n\n    // Be sure to dispose the newly-created array when the DOM it's associated with is gone.\n    autoDisposeElem(markerPost, nodes);\n\n    nodes.addListener((newArr: Array<Node|null>, oldArr: Array<Node|null>, splice?) => {\n      if (splice) {\n        // Remove the elements that are gone.\n        for (const node of splice.deleted) {\n          if (node && node.parentNode === elem) {\n            domDispose(node);\n            elem.removeChild(node);\n          }\n        }\n\n        if (splice.numAdded > 0) {\n          // Find a valid child immediately following the spliced out portion, for DOM insertion.\n          const endIndex: number = splice.start + splice.numAdded;\n          let nextElem: Node = markerPost;\n          for (let i = endIndex; i < newArr.length; i++) {\n            const node = newArr[i];\n            if (node && node.parentNode === elem) {\n              nextElem = node;\n              break;\n            }\n          }\n\n          // Insert the new elements.\n          const content = frag(newArr.slice(splice.start, endIndex));\n          elem.insertBefore(content, nextElem);\n        }\n      } else {\n        replaceContent(markerPre, markerPost, newArr);\n      }\n    });\n    replaceContent(markerPre, markerPost, nodes.get());\n  }];\n}\n","/**\n * domevent provides a way to listen to DOM events, similar to JQuery's `on()` function. Its\n * methods are also exposed via the dom.js module, as `dom.on()`, etc.\n *\n * It is typically used as an argument to the dom() function:\n *\n *    dom('div', dom.on('click', (event, elem) => { ... }));\n *\n * When the div is disposed, the listener is automatically removed.\n *\n * The underlying interface to listen to an event is this:\n *\n *    let listener = dom.onElem(elem, 'click', (event, elem) => { ... });\n *\n * The callback is called with the event and the element to which it was attached. Unlike in\n * JQuery, the callback's return value is ignored. Use event.stopPropagation() and\n * event.preventDefault() explicitly if needed.\n *\n * To stop listening:\n *\n *    listener.dispose();\n *\n * Disposing the listener returned by .onElem() is the only way to stop listening to an event. You\n * can use autoDispose to stop listening automatically when subscribing in a Disposable object:\n *\n *    this.autoDispose(domevent.onElem(document, 'mouseup', callback));\n *\n * To listen to descendants of an element matching the given selector (what JQuery calls\n * \"delegated events\", see http://api.jquery.com/on/):\n *\n *    dom('div', dom.onMatch('.selector', 'click', (event, elem) => { ... }));\n * or\n *    let lis = domevent.onMatchElem(elem, '.selector', 'click', (event, el) => { ... });\n *\n * In this usage, the element passed to the callback will be a DOM element matching the given\n * selector. If there are multiple matches, the callback is only called for the innermost one.\n *\n * If you need to remove the callback on first call, here's a useful pattern:\n *    let lis = domevent.onElem(elem, 'mouseup', e => { lis.dispose(); other_work(); });\n */\n\nimport {IDisposable} from './dispose';\nimport {DomElementMethod, DomMethod} from './domImpl';\n\nexport type EventName = keyof HTMLElementEventMap;\nexport type EventType<E extends EventName|string> = E extends EventName ? HTMLElementEventMap[E] : Event;\n\nexport type EventCB<E extends Event = Event, T extends EventTarget = EventTarget> =\n  (this: void, event: E, elem: T) => void;\n\nfunction _findMatch(inner: Element, outer: Element, selector: string): Element|null {\n  for (let el: Element|null = inner; el && el !== outer; el = el.parentElement) {\n    if (el.matches(selector)) {\n      return el;\n    }\n  }\n  return null;\n}\n\nclass DomEventListener<E extends Event, T extends EventTarget> implements EventListenerObject, IDisposable {\n  constructor(protected elem: T,\n              protected eventType: string,\n              protected callback: EventCB<E, T>,\n              protected useCapture: boolean,\n              protected selector?: string) {\n    this.elem.addEventListener(this.eventType, this, this.useCapture);\n  }\n\n  public handleEvent(event: E) {\n    const cb = this.callback;\n    cb(event, this.elem);\n  }\n\n  public dispose() {\n    this.elem.removeEventListener(this.eventType, this, this.useCapture);\n  }\n}\n\nclass DomEventMatchListener<E extends Event> extends DomEventListener<E, EventTarget> {\n  public handleEvent(event: E) {\n    const elem = _findMatch(event.target as Element, this.elem as Element, this.selector!);\n    if (elem) {\n      const cb = this.callback;\n      cb(event, elem);\n    }\n  }\n}\n\n/**\n * Listen to a DOM event. The `on()` variant takes no `elem` argument, and may be used as an\n * argument to dom() function.\n * @param {DOMElement} elem: DOM Element to listen to.\n * @param {String} eventType: Event type to listen for (e.g. 'click').\n * @param {Function} callback: Callback to call as `callback(event, elem)`, where elem is `elem`.\n * @param [Boolean] options.useCapture: Add the listener in the capture phase. This should very\n *    rarely be useful (e.g. JQuery doesn't even offer it as an option).\n * @returns {Object} Listener object whose .dispose() method will remove the event listener.\n */\nexport function onElem<E extends EventName|string, T extends EventTarget>(\n  elem: T, eventType: E, callback: EventCB<EventType<E>, T>, {useCapture = false} = {}): IDisposable {\n  return new DomEventListener(elem, eventType, callback, useCapture);\n}\n\nexport function on<E extends EventName|string, T extends EventTarget>(\n  eventType: E, callback: EventCB<EventType<E>, T>, {useCapture = false} = {}): DomMethod<T> {\n  // tslint:disable-next-line:no-unused-expression\n  return (elem) => { new DomEventListener(elem, eventType, callback, useCapture); };\n}\n\n/**\n * Listen to a DOM event on descendants of the given elem matching the given selector. The\n * `onMatch()` variant takes no `elem` argument, and may be used as an argument to dom().\n * @param {DOMElement} elem: DOM Element to whose descendants to listen.\n * @param {String} selector: CSS selector string to filter elements that trigger this event.\n *    JQuery calls it \"delegated events\" (http://api.jquery.com/on/). The callback will only be\n *    called when the event occurs for an element matching the given selector. If there are\n *    multiple elements matching the selector, the callback is only called for the innermost one.\n * @param {String} eventType: Event type to listen for (e.g. 'click').\n * @param {Function} callback: Callback to call as `callback(event, elem)`, where elem is a\n *    descendent of `elem` which matches `selector`.\n * @param [Boolean] options.useCapture: Add the listener in the capture phase. This should very\n *    rarely be useful (e.g. JQuery doesn't even offer it as an option).\n * @returns {Object} Listener object whose .dispose() method will remove the event listener.\n */\nexport function onMatchElem(elem: EventTarget, selector: string, eventType: string,\n                            callback: EventCB, {useCapture = false} = {}): IDisposable {\n  return new DomEventMatchListener(elem, eventType, callback, useCapture, selector);\n}\nexport function onMatch(selector: string, eventType: string, callback: EventCB,\n                        {useCapture = false} = {}): DomElementMethod {\n  // tslint:disable-next-line:no-unused-expression\n  return (elem) => { new DomEventMatchListener(elem, eventType, callback, useCapture, selector); };\n}\n\nexport type KeyEventType = 'keypress' | 'keyup' | 'keydown';\n\nexport interface IKeyHandlers<T extends HTMLElement = HTMLElement> {\n  [key: string]: (this: void, ev: KeyboardEvent, elem: T) => void;\n}\n\n/**\n * Listen to key events (typically 'keydown' or 'keypress'), with specified per-key callbacks.\n * Key names are listed at https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values\n *\n * Methods onKeyPress() and onKeyDown() are intended to be used as arguments to dom().\n *\n * By default, handled events are stopped from bubbling with stopPropagation() and\n * preventDefault(). If, however, you register a key with a \"$\" suffix (i.e. \"Enter$\" instead of\n * \"Enter\"), then the event is allowed to bubble normally.\n *\n * When this handler is set on an element, we automatically ensure that tabindex attribute is set,\n * to allow this element to receive keyboard events.\n *\n * For example:\n *\n *    dom('input', ...\n *      dom.onKeyDown({\n *        Enter: (e, elem) => console.log(\"Enter pressed\"),\n *        Escape: (e, elem) => console.log(\"Escape pressed\"),\n *        Delete$: (e, elem) => console.log(\"Delete pressed, will bubble\"),\n *      })\n *    )\n */\nexport function onKeyElem<T extends HTMLElement>(\n  elem: T, evType: KeyEventType, keyHandlers: IKeyHandlers<T>,\n): IDisposable {\n  if (!(elem.tabIndex >= 0)) {                    // If tabIndex property is undefined or -1,\n    elem.setAttribute('tabindex', '-1');          // Set tabIndex attribute to make the element focusable.\n  }\n  return onElem(elem, evType, (ev, _elem) => {\n    const plainHandler = keyHandlers[ev.key];\n    const handler = plainHandler || keyHandlers[ev.key + '$'];\n    if (handler) {\n      if (plainHandler!) {\n        ev.stopPropagation();\n        ev.preventDefault();\n      }\n      handler(ev, _elem);\n    }\n  });\n}\n\nexport function onKeyPress<T extends HTMLElement>(keyHandlers: IKeyHandlers<T>): DomMethod<T> {\n  return (elem) => { onKeyElem(elem, 'keypress', keyHandlers); };\n}\n\nexport function onKeyDown<T extends HTMLElement>(keyHandlers: IKeyHandlers<T>): DomMethod<T> {\n  return (elem) => { onKeyElem(elem, 'keydown', keyHandlers); };\n}\n","/**\n * dom.js provides a way to build a DOM tree easily.\n *\n * E.g.\n *  import {dom} from 'grainjs';\n *  dom('a#link.c1.c2', {'href': url}, 'Hello ', dom('span', 'world'));\n *    creates Node <a id=\"link\" class=\"c1 c2\" href={{url}}Hello <span>world</span></a>.\n *\n *  dom.frag(dom('span', 'Hello'), ['blah', dom('div', 'world')])\n *    creates document fragment with <span>Hello</span>blah<div>world</div>.\n *\n * DOM can also be created and modified inline during creation:\n *  dom('a#id.c1',\n *      dom.cls('c2'), dom.attr('href', url),\n *      dom.text('Hello '), dom('span', dom.text('world')))\n *    creates Node <a id=\"link\" class=\"c1 c2\" href={{url}}Hello <span>world</span></a>,\n *    identical to the first example above.\n */\n\n// We keep various dom-related functions organized in private modules, but they are exposed here.\nexport * from './domImpl';\nexport * from './domComponent';\nexport * from './domComputed';\nexport * from './domDispose';\nexport * from './domForEach';\nexport * from './domMethods';\nexport * from './domevent';\n\nimport * as _domComponent from './domComponent';\nimport * as _domComputed from './domComputed';\nimport * as _domDispose from './domDispose';\nimport * as _domForEach from './domForEach';\nimport * as _domImpl from './domImpl';\nimport * as _domMethods from './domMethods';\n\nimport * as domevent from './domevent';\n\nimport {dom as _dom, IDomArgs, TagElem, TagName} from './domImpl';\n\n// We just want to re-export _domImpl.dom, but to allow adding methods to it in a typesafe way,\n// TypeScript wants us to declare a real function in the same file.\nexport function dom<Tag extends TagName>(tagString: Tag, ...args: IDomArgs<TagElem<Tag>>): TagElem<Tag> {\n  return _dom(tagString, ...args);\n}\n\n// Additionally export all methods as properties of dom() function.\nexport namespace dom {      // tslint:disable-line:no-namespace\n  export const svg             = _domImpl.svg;\n  export const frag            = _domImpl.frag;\n  export const update          = _domImpl.update;\n  export const find            = _domImpl.find;\n  export const findAll         = _domImpl.findAll;\n\n  export const domDispose      = _domDispose.domDispose;\n  export const onDisposeElem   = _domDispose.onDisposeElem;\n  export const onDispose       = _domDispose.onDispose;\n  export const autoDisposeElem = _domDispose.autoDisposeElem;\n  export const autoDispose     = _domDispose.autoDispose;\n\n  export const attrsElem       = _domMethods.attrsElem;\n  export const attrs           = _domMethods.attrs;\n  export const attrElem        = _domMethods.attrElem;\n  export const attr            = _domMethods.attr;\n  export const boolAttrElem    = _domMethods.boolAttrElem;\n  export const boolAttr        = _domMethods.boolAttr;\n  export const textElem        = _domMethods.textElem;\n  export const text            = _domMethods.text;\n  export const styleElem       = _domMethods.styleElem;\n  export const style           = _domMethods.style;\n  export const propElem        = _domMethods.propElem;\n  export const prop            = _domMethods.prop;\n  export const showElem        = _domMethods.showElem;\n  export const show            = _domMethods.show;\n  export const hideElem        = _domMethods.hideElem;\n  export const hide            = _domMethods.hide;\n  export const clsElem         = _domMethods.clsElem;\n  export const cls             = _domMethods.cls;\n  export const clsPrefix       = _domMethods.clsPrefix;\n  export const dataElem        = _domMethods.dataElem;\n  export const data            = _domMethods.data;\n  export const getData         = _domMethods.getData;\n  export const replaceContent  = _domComputed.replaceContent;\n  export const domComputed     = _domComputed.domComputed;\n  export const domComputedOwned = _domComputed.domComputedOwned;\n  export const maybe           = _domComputed.maybe;\n  export const maybeOwned      = _domComputed.maybeOwned;\n\n  export const forEach         = _domForEach.forEach;\n\n  export const create          = _domComponent.create;\n\n  export const onElem          = domevent.onElem;\n  export const on              = domevent.on;\n  export const onMatchElem     = domevent.onMatchElem;\n  export const onMatch         = domevent.onMatch;\n  export const onKeyElem       = domevent.onKeyElem;\n  export const onKeyPress      = domevent.onKeyPress;\n  export const onKeyDown       = domevent.onKeyDown;\n}\n","/**\n * In-code styling for DOM components, inspired by Reacts Styled Components.\n *\n * Usage:\n *    const title = styled('h1', `\n *      font-size: 1.5em;\n *      text-align: center;\n *      color: palevioletred;\n *    `);\n *\n *    const wrapper = styled('section', `\n *      padding: 4em;\n *      background: papayawhip;\n *    `);\n *\n *    wrapper(title('Hello world'))\n *\n * This generates class names for title and wrapper, adds the styles to the document on first use,\n * and the result is equivalent to:\n *\n *    dom(`section.${wrapper.className}`, dom(`h1.${title.className}`, 'Hello world'));\n *\n * Calls to styled() should happen at the top level, at import time, in order to register all\n * styles upfront. Actual work happens the first time a style is needed to create an element.\n * Calling styled() elsewhere than at top level is wasteful and bad for performance.\n *\n * You may create a style that modifies an existing styled() or other component, e.g.\n *\n *    const title2 = styled(title, `font-size: 1rem; color: red;`);\n *\n * Calling title2('Foo') becomes equivalent to dom(`h1.${title.className}.${title2.className}`).\n *\n * Styles may incorporate other related styles by nesting them under the main one as follows:\n *\n *     const myButton = styled('button', `\n *       border-radius: 0.5rem;\n *       border: 1px solid grey;\n *       font-size: 1rem;\n *\n *       &:active {\n *         background: lightblue;\n *       }\n *       &-small {\n *         font-size: 0.6rem;\n *       }\n *     `);\n *\n * In nested styles, ampersand (&) gets replaced with the generated .className of the main element.\n *\n * The resulting styled component provides a .cls() helper to simplify using prefixed classes. It\n * behaves as dom.cls(), but prefixes the class names with the generated className of the main\n * element. E.g. for the example above,\n *\n *      myButton(myButton.cls('-small'), 'Test')\n *\n * creates a button with both the myButton style above, and the style specified under \"&-small\".\n *\n * Animations with @keyframes may be created with a unique name by using the keyframes() helper:\n *\n *    const rotate360 = keyframes(`\n *      from { transform: rotate(0deg); }\n *      to { transform: rotate(360deg); }\n *    `);\n *\n *    const Rotate = styled('div', `\n *      display: inline-block;\n *      animation: ${rotate360} 2s linear infinite;\n *    `);\n */\n\n// Use the browser globals in a way that allows replacing them with mocks in tests.\nimport {G} from './browserGlobals';\nimport {dom, IDomArgs, TagElem, TagName} from './domImpl';\nimport {cls, clsPrefix} from './domMethods';\n\n// The value returned by styled() matches the input (first argument), and also implements IClsName\n// interface.\nexport interface IClsName {\n  className: string;      // Name of the generated class.\n  cls: typeof cls;        // Helper like dom.cls(), but which prefixes classes by className.\n}\n\nexport type DomCreateFunc<R, Args extends IDomArgs<R> = IDomArgs<R>> = (...args: Args) => R;\n\n// See module documentation for details.\nexport function styled<Tag extends TagName>(tag: Tag, styles: string): DomCreateFunc<TagElem<Tag>> & IClsName;\nexport function styled<Args extends any[], R extends Element>(\n  creator: (...args: Args) => R, styles: string): typeof creator & IClsName;\nexport function styled(creator: any, styles: string): IClsName {\n  // Note that we intentionally minimize the work done when styled() is called; it's better to do\n  // any needed work on first use. That's when we will actually build the css rules.\n  const style = new StylePiece(styles);\n\n  // Creator function reflects the input, with only the addition of style.use() at the end. Note\n  // that it needs to be at the end because creator() might take special initial arguments.\n  const newCreator = (typeof creator === 'string') ?\n    (...args: any[]) => style.addToElem(dom(creator, ...args)) :\n    (...args: any[]) => style.addToElem(creator(...args));\n  return Object.assign(newCreator, {\n    className: style.className,\n    cls: clsPrefix.bind(null, style.className),\n  });\n}\n\n// Keyframes produces simply a string with the generated name. Note that these does not support\n// nesting or ampersand (&) handling, since these would be difficult and are entirely unneeded.\nexport function keyframes(styles: string): string {\n  return (new KeyframePiece(styles)).className;\n}\n\nfunction createCssRules(className: string, styles: string) {\n  // The first time we encounter a nested section, we know which are the \"main\" rules, and can\n  // wrap them appropriately.\n  const nestedStart = styles.search(/[^;]*\\{/);\n  const mainRules = nestedStart < 0 ? styles : styles.slice(0, nestedStart);\n  const nestedRules = nestedStart < 0 ? \"\" : styles.slice(nestedStart);\n\n  // At the end, replace all occurrences of & with \".className\".\n  return `& {${mainRules}\\n}\\n${nestedRules}`.replace(/&/g, className);\n}\n\n// Used by getNextStyleNum when running without a global window object (e.g. in tests).\nconst _global = {};\n\n// Keep the counter for next class attached to the global window object rather than be a library\n// global. This way if by some chance multiple instance of grainjs are loaded into the page, it\n// still works without overwriting class names (which would be extremely confusing).\nfunction getNextStyleNum() {\n  const g: any = G.window || _global;\n  return g._grainNextStyleNum = (g._grainNextStyleNum || 0) + 1;\n}\n\nclass StylePiece {\n  // Set of all StylePieces created but not yet mounted.\n  private static _unmounted = new Set<StylePiece>();\n\n  // Generate a new css class name. The suffix ensures that names like \"&2\" can't cause a conflict.\n  private static _nextClassName() { return `_grain${getNextStyleNum()}_`; }\n\n  // Mount all unmounted StylePieces, and clear the _unmounted map.\n  private static _mountAll(): void {\n    const sheet: string = Array.from(this._unmounted, (p) => p._createRules()).join(\"\\n\\n\");\n\n    G.document.head!.appendChild(dom('style', sheet));\n    for (const piece of this._unmounted) {\n      piece._mounted = true;\n    }\n    this._unmounted.clear();\n  }\n\n  public readonly className: string;\n  private _mounted: boolean = false;\n\n  constructor(protected _styles: string) {\n    this.className = StylePiece._nextClassName();\n    StylePiece._unmounted.add(this);\n  }\n\n  public addToElem<T extends Element>(elem: T): T {\n    if (!this._mounted) { StylePiece._mountAll(); }\n    elem.classList.add(this.className);\n    return elem;\n  }\n\n  protected _createRules(): string {\n    return createCssRules('.' + this.className, this._styles);\n  }\n}\n\nclass KeyframePiece extends StylePiece {\n  protected _createRules(): string {\n    return `@keyframes ${this.className} {${this._styles}}`;\n  }\n}\n","var map = require(\"./map\");\n\nvar getCountryCode = function(localeString) {\n    var components = localeString.split(\"_\");\n    if (components.length == 2) {\n        return components.pop();\n    }\n    components = localeString.split(\"-\");\n    if (components.length == 2) {\n        return components.pop();\n    }\n    return localeString;\n}\n\nexports.getCurrency = function(locale) {\n    var countryCode = getCountryCode(locale).toUpperCase();\n    if (countryCode in map) {\n        return map[countryCode];\n    }\n    return null;\n}\n\nexports.getLocales = function(currencyCode) {\n    currencyCode = currencyCode.toUpperCase();\n    var locales = [];\n    for (countryCode in map) {\n        if (map[countryCode] === currencyCode) {\n            locales.push(countryCode);\n        }\n    }\n    return locales;\n}","// Generated using ShowCurrencies.java\nvar map = {\nAD: 'EUR',\nAE: 'AED',\nAF: 'AFN',\nAG: 'XCD',\nAI: 'XCD',\nAL: 'ALL',\nAM: 'AMD',\nAN: 'ANG',\nAO: 'AOA',\nAR: 'ARS',\nAS: 'USD',\nAT: 'EUR',\nAU: 'AUD',\nAW: 'AWG',\nAX: 'EUR',\nAZ: 'AZN',\nBA: 'BAM',\nBB: 'BBD',\nBD: 'BDT',\nBE: 'EUR',\nBF: 'XOF',\nBG: 'BGN',\nBH: 'BHD',\nBI: 'BIF',\nBJ: 'XOF',\nBL: 'EUR',\nBM: 'BMD',\nBN: 'BND',\nBO: 'BOB',\nBQ: 'USD',\nBR: 'BRL',\nBS: 'BSD',\nBT: 'BTN',\nBV: 'NOK',\nBW: 'BWP',\nBY: 'BYR',\nBZ: 'BZD',\nCA: 'CAD',\nCC: 'AUD',\nCD: 'CDF',\nCF: 'XAF',\nCG: 'XAF',\nCH: 'CHF',\nCI: 'XOF',\nCK: 'NZD',\nCL: 'CLP',\nCM: 'XAF',\nCN: 'CNY',\nCO: 'COP',\nCR: 'CRC',\nCU: 'CUP',\nCV: 'CVE',\nCW: 'ANG',\nCX: 'AUD',\nCY: 'EUR',\nCZ: 'CZK',\nDE: 'EUR',\nDJ: 'DJF',\nDK: 'DKK',\nDM: 'XCD',\nDO: 'DOP',\nDZ: 'DZD',\nEC: 'USD',\nEE: 'EUR',\nEG: 'EGP',\nEH: 'MAD',\nER: 'ERN',\nES: 'EUR',\nET: 'ETB',\nFI: 'EUR',\nFJ: 'FJD',\nFK: 'FKP',\nFM: 'USD',\nFO: 'DKK',\nFR: 'EUR',\nGA: 'XAF',\nGB: 'GBP',\nGD: 'XCD',\nGE: 'GEL',\nGF: 'EUR',\nGG: 'GBP',\nGH: 'GHS',\nGI: 'GIP',\nGL: 'DKK',\nGM: 'GMD',\nGN: 'GNF',\nGP: 'EUR',\nGQ: 'XAF',\nGR: 'EUR',\nGS: 'GBP',\nGT: 'GTQ',\nGU: 'USD',\nGW: 'XOF',\nGY: 'GYD',\nHK: 'HKD',\nHM: 'AUD',\nHN: 'HNL',\nHR: 'HRK',\nHT: 'HTG',\nHU: 'HUF',\nID: 'IDR',\nIE: 'EUR',\nIL: 'ILS',\nIM: 'GBP',\nIN: 'INR',\nIO: 'USD',\nIQ: 'IQD',\nIR: 'IRR',\nIS: 'ISK',\nIT: 'EUR',\nJE: 'GBP',\nJM: 'JMD',\nJO: 'JOD',\nJP: 'JPY',\nKE: 'KES',\nKG: 'KGS',\nKH: 'KHR',\nKI: 'AUD',\nKM: 'KMF',\nKN: 'XCD',\nKP: 'KPW',\nKR: 'KRW',\nKW: 'KWD',\nKY: 'KYD',\nKZ: 'KZT',\nLA: 'LAK',\nLB: 'LBP',\nLC: 'XCD',\nLI: 'CHF',\nLK: 'LKR',\nLR: 'LRD',\nLS: 'LSL',\nLT: 'LTL',\nLU: 'EUR',\nLV: 'LVL',\nLY: 'LYD',\nMA: 'MAD',\nMC: 'EUR',\nMD: 'MDL',\nME: 'EUR',\nMF: 'EUR',\nMG: 'MGA',\nMH: 'USD',\nMK: 'MKD',\nML: 'XOF',\nMM: 'MMK',\nMN: 'MNT',\nMO: 'MOP',\nMP: 'USD',\nMQ: 'EUR',\nMR: 'MRO',\nMS: 'XCD',\nMT: 'EUR',\nMU: 'MUR',\nMV: 'MVR',\nMW: 'MWK',\nMX: 'MXN',\nMY: 'MYR',\nMZ: 'MZN',\nNA: 'NAD',\nNC: 'XPF',\nNE: 'XOF',\nNF: 'AUD',\nNG: 'NGN',\nNI: 'NIO',\nNL: 'EUR',\nNO: 'NOK',\nNP: 'NPR',\nNR: 'AUD',\nNU: 'NZD',\nNZ: 'NZD',\nOM: 'OMR',\nPA: 'PAB',\nPE: 'PEN',\nPF: 'XPF',\nPG: 'PGK',\nPH: 'PHP',\nPK: 'PKR',\nPL: 'PLN',\nPM: 'EUR',\nPN: 'NZD',\nPR: 'USD',\nPS: 'ILS',\nPT: 'EUR',\nPW: 'USD',\nPY: 'PYG',\nQA: 'QAR',\nRE: 'EUR',\nRO: 'RON',\nRS: 'RSD',\nRU: 'RUB',\nRW: 'RWF',\nSA: 'SAR',\nSB: 'SBD',\nSC: 'SCR',\nSD: 'SDG',\nSE: 'SEK',\nSG: 'SGD',\nSH: 'SHP',\nSI: 'EUR',\nSJ: 'NOK',\nSK: 'EUR',\nSL: 'SLL',\nSM: 'EUR',\nSN: 'XOF',\nSO: 'SOS',\nSR: 'SRD',\nST: 'STD',\nSV: 'SVC',\nSX: 'ANG',\nSY: 'SYP',\nSZ: 'SZL',\nTC: 'USD',\nTD: 'XAF',\nTF: 'EUR',\nTG: 'XOF',\nTH: 'THB',\nTJ: 'TJS',\nTK: 'NZD',\nTL: 'USD',\nTM: 'TMT',\nTN: 'TND',\nTO: 'TOP',\nTR: 'TRY',\nTT: 'TTD',\nTV: 'AUD',\nTW: 'TWD',\nTZ: 'TZS',\nUA: 'UAH',\nUG: 'UGX',\nUM: 'USD',\nUS: 'USD',\nUY: 'UYU',\nUZ: 'UZS',\nVA: 'EUR',\nVC: 'XCD',\nVE: 'VEF',\nVG: 'USD',\nVI: 'USD',\nVN: 'VND',\nVU: 'VUV',\nWF: 'XPF',\nWS: 'WST',\nYE: 'YER',\nYT: 'EUR',\nZA: 'ZAR',\nZM: 'ZMK',\nZW: 'ZWL'\n};\n\nmodule.exports = map;","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","var MapCache = require('./_MapCache'),\n    setCacheAdd = require('./_setCacheAdd'),\n    setCacheHas = require('./_setCacheHas');\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nmodule.exports = SetCache;\n","var ListCache = require('./_ListCache'),\n    stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","/**\n * A specialized version of `baseAggregator` for arrays.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    setter(accumulator, value, iteratee(value), array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayAggregator;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var baseEach = require('./_baseEach');\n\n/**\n * Aggregates elements of `collection` on `accumulator` with keys transformed\n * by `iteratee` and values set by `setter`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\n  baseEach(collection, function(value, key, collection) {\n    setter(accumulator, value, iteratee(value), collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseAggregator;\n","var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n","var baseForOwn = require('./_baseForOwn'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n","var arrayPush = require('./_arrayPush'),\n    isFlattenable = require('./_isFlattenable');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","var createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n","var baseFor = require('./_baseFor'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n","var castPath = require('./_castPath'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n","var arrayPush = require('./_arrayPush'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nmodule.exports = baseGetAllKeys;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nmodule.exports = baseHasIn;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","var baseIsEqualDeep = require('./_baseIsEqualDeep'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nmodule.exports = baseIsEqual;\n","var Stack = require('./_Stack'),\n    equalArrays = require('./_equalArrays'),\n    equalByTag = require('./_equalByTag'),\n    equalObjects = require('./_equalObjects'),\n    getTag = require('./_getTag'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nmodule.exports = baseIsEqualDeep;\n","var Stack = require('./_Stack'),\n    baseIsEqual = require('./_baseIsEqual');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nmodule.exports = baseIsMatch;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","var baseMatches = require('./_baseMatches'),\n    baseMatchesProperty = require('./_baseMatchesProperty'),\n    identity = require('./identity'),\n    isArray = require('./isArray'),\n    property = require('./property');\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nmodule.exports = baseIteratee;\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","var baseEach = require('./_baseEach'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nmodule.exports = baseMap;\n","var baseIsMatch = require('./_baseIsMatch'),\n    getMatchData = require('./_getMatchData'),\n    matchesStrictComparable = require('./_matchesStrictComparable');\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nmodule.exports = baseMatches;\n","var baseIsEqual = require('./_baseIsEqual'),\n    get = require('./get'),\n    hasIn = require('./hasIn'),\n    isKey = require('./_isKey'),\n    isStrictComparable = require('./_isStrictComparable'),\n    matchesStrictComparable = require('./_matchesStrictComparable'),\n    toKey = require('./_toKey');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nmodule.exports = baseMatchesProperty;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n","var baseGet = require('./_baseGet');\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nmodule.exports = basePropertyDeep;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nmodule.exports = cacheHas;\n","var identity = require('./identity');\n\n/**\n * Casts `value` to `identity` if it's not a function.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Function} Returns cast function.\n */\nfunction castFunction(value) {\n  return typeof value == 'function' ? value : identity;\n}\n\nmodule.exports = castFunction;\n","var isArray = require('./isArray'),\n    isKey = require('./_isKey'),\n    stringToPath = require('./_stringToPath'),\n    toString = require('./toString');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nmodule.exports = castPath;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","var arrayAggregator = require('./_arrayAggregator'),\n    baseAggregator = require('./_baseAggregator'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Creates a function like `_.groupBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} [initializer] The accumulator object initializer.\n * @returns {Function} Returns the new aggregator function.\n */\nfunction createAggregator(setter, initializer) {\n  return function(collection, iteratee) {\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\n        accumulator = initializer ? initializer() : {};\n\n    return func(collection, setter, baseIteratee(iteratee, 2), accumulator);\n  };\n}\n\nmodule.exports = createAggregator;\n","var isArrayLike = require('./isArrayLike');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","var SetCache = require('./_SetCache'),\n    arraySome = require('./_arraySome'),\n    cacheHas = require('./_cacheHas');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalArrays;\n","var Symbol = require('./_Symbol'),\n    Uint8Array = require('./_Uint8Array'),\n    eq = require('./eq'),\n    equalArrays = require('./_equalArrays'),\n    mapToArray = require('./_mapToArray'),\n    setToArray = require('./_setToArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nmodule.exports = equalByTag;\n","var getAllKeys = require('./_getAllKeys');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalObjects;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbols = require('./_getSymbols'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nmodule.exports = getAllKeys;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","var isStrictComparable = require('./_isStrictComparable'),\n    keys = require('./keys');\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nmodule.exports = getMatchData;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var overArg = require('./_overArg');\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nmodule.exports = getPrototype;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","var arrayFilter = require('./_arrayFilter'),\n    stubArray = require('./stubArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nmodule.exports = getSymbols;\n","var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var castPath = require('./_castPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isLength = require('./isLength'),\n    toKey = require('./_toKey');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nmodule.exports = hasPath;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","var Symbol = require('./_Symbol'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray');\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","var isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nmodule.exports = isKey;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","var isObject = require('./isObject');\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nmodule.exports = isStrictComparable;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nmodule.exports = mapToArray;\n","/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nmodule.exports = matchesStrictComparable;\n","var memoize = require('./memoize');\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nmodule.exports = memoizeCapped;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nmodule.exports = setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nmodule.exports = setCacheHas;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nmodule.exports = setToArray;\n","var ListCache = require('./_ListCache');\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nmodule.exports = stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nmodule.exports = stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nmodule.exports = stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nmodule.exports = stackHas;\n","var ListCache = require('./_ListCache'),\n    Map = require('./_Map'),\n    MapCache = require('./_MapCache');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nmodule.exports = stackSet;\n","var memoizeCapped = require('./_memoizeCapped');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nmodule.exports = stringToPath;\n","var isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toKey;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var toString = require('./toString');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g,\n    reHasRegExpChar = RegExp(reRegExpChar.source);\n\n/**\n * Escapes the `RegExp` special characters \"^\", \"$\", \"\\\", \".\", \"*\", \"+\",\n * \"?\", \"(\", \")\", \"[\", \"]\", \"{\", \"}\", and \"|\" in `string`.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to escape.\n * @returns {string} Returns the escaped string.\n * @example\n *\n * _.escapeRegExp('[lodash](https://lodash.com/)');\n * // => '\\[lodash\\]\\(https://lodash\\.com/\\)'\n */\nfunction escapeRegExp(string) {\n  string = toString(string);\n  return (string && reHasRegExpChar.test(string))\n    ? string.replace(reRegExpChar, '\\\\$&')\n    : string;\n}\n\nmodule.exports = escapeRegExp;\n","var baseFlatten = require('./_baseFlatten'),\n    map = require('./map');\n\n/**\n * Creates a flattened array of values by running each element in `collection`\n * thru `iteratee` and flattening the mapped results. The iteratee is invoked\n * with three arguments: (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * function duplicate(n) {\n *   return [n, n];\n * }\n *\n * _.flatMap([1, 2], duplicate);\n * // => [1, 1, 2, 2]\n */\nfunction flatMap(collection, iteratee) {\n  return baseFlatten(map(collection, iteratee), 1);\n}\n\nmodule.exports = flatMap;\n","/**\n * The inverse of `_.toPairs`; this method returns an object composed\n * from key-value `pairs`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} pairs The key-value pairs.\n * @returns {Object} Returns the new object.\n * @example\n *\n * _.fromPairs([['a', 1], ['b', 2]]);\n * // => { 'a': 1, 'b': 2 }\n */\nfunction fromPairs(pairs) {\n  var index = -1,\n      length = pairs == null ? 0 : pairs.length,\n      result = {};\n\n  while (++index < length) {\n    var pair = pairs[index];\n    result[pair[0]] = pair[1];\n  }\n  return result;\n}\n\nmodule.exports = fromPairs;\n","var baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","var baseAssignValue = require('./_baseAssignValue'),\n    createAggregator = require('./_createAggregator');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The order of grouped values\n * is determined by the order they occur in `collection`. The corresponding\n * value of each key is an array of elements responsible for generating the\n * key. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n * // => { '4': [4.2], '6': [6.1, 6.3] }\n *\n * // The `_.property` iteratee shorthand.\n * _.groupBy(['one', 'two', 'three'], 'length');\n * // => { '3': ['one', 'two'], '5': ['three'] }\n */\nvar groupBy = createAggregator(function(result, value, key) {\n  if (hasOwnProperty.call(result, key)) {\n    result[key].push(value);\n  } else {\n    baseAssignValue(result, key, [value]);\n  }\n});\n\nmodule.exports = groupBy;\n","var baseHasIn = require('./_baseHasIn'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nmodule.exports = hasIn;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","var baseIsEqual = require('./_baseIsEqual');\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nmodule.exports = isEqual;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    getPrototype = require('./_getPrototype'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nmodule.exports = isPlainObject;\n","var baseGetTag = require('./_baseGetTag'),\n    isArray = require('./isArray'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n}\n\nmodule.exports = isString;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? array[length - 1] : undefined;\n}\n\nmodule.exports = last;\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    isArray = require('./isArray');\n\n/**\n * Creates an array of values by running each element in `collection` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * _.map([4, 8], square);\n * // => [16, 64]\n *\n * _.map({ 'a': 4, 'b': 8 }, square);\n * // => [16, 64] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // The `_.property` iteratee shorthand.\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  return func(collection, baseIteratee(iteratee, 3));\n}\n\nmodule.exports = map;\n","var baseAssignValue = require('./_baseAssignValue'),\n    baseForOwn = require('./_baseForOwn'),\n    baseIteratee = require('./_baseIteratee');\n\n/**\n * Creates an object with the same keys as `object` and values generated\n * by running each own enumerable string keyed property of `object` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, key, object).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Object} Returns the new mapped object.\n * @see _.mapKeys\n * @example\n *\n * var users = {\n *   'fred':    { 'user': 'fred',    'age': 40 },\n *   'pebbles': { 'user': 'pebbles', 'age': 1 }\n * };\n *\n * _.mapValues(users, function(o) { return o.age; });\n * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n *\n * // The `_.property` iteratee shorthand.\n * _.mapValues(users, 'age');\n * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n */\nfunction mapValues(object, iteratee) {\n  var result = {};\n  iteratee = baseIteratee(iteratee, 3);\n\n  baseForOwn(object, function(value, key, object) {\n    baseAssignValue(result, key, iteratee(value, key, object));\n  });\n  return result;\n}\n\nmodule.exports = mapValues;\n","var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n","var baseProperty = require('./_baseProperty'),\n    basePropertyDeep = require('./_basePropertyDeep'),\n    isKey = require('./_isKey'),\n    toKey = require('./_toKey');\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nmodule.exports = property;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","var baseTimes = require('./_baseTimes'),\n    castFunction = require('./_castFunction'),\n    toInteger = require('./toInteger');\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * Invokes the iteratee `n` times, returning an array of the results of\n * each invocation. The iteratee is invoked with one argument; (index).\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n * @example\n *\n * _.times(3, String);\n * // => ['0', '1', '2']\n *\n *  _.times(4, _.constant(0));\n * // => [0, 0, 0, 0]\n */\nfunction times(n, iteratee) {\n  n = toInteger(n);\n  if (n < 1 || n > MAX_SAFE_INTEGER) {\n    return [];\n  }\n  var index = MAX_ARRAY_LENGTH,\n      length = nativeMin(n, MAX_ARRAY_LENGTH);\n\n  iteratee = castFunction(iteratee);\n  n -= MAX_ARRAY_LENGTH;\n\n  var result = baseTimes(length, iteratee);\n  while (++index < n) {\n    iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = times;\n","var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nmodule.exports = toFinite;\n","var toFinite = require('./toFinite');\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nmodule.exports = toInteger;\n","var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","var moment = module.exports = require(\"./moment-timezone\");\nmoment.tz.load(require('./data/packed/latest.json'));\n","//! moment-timezone.js\n//! version : 0.5.35\n//! Copyright (c) JS Foundation and other contributors\n//! license : MIT\n//! github.com/moment/moment-timezone\n\n(function (root, factory) {\n\t\"use strict\";\n\n\t/*global define*/\n\tif (typeof module === 'object' && module.exports) {\n\t\tmodule.exports = factory(require('moment')); // Node\n\t} else if (typeof define === 'function' && define.amd) {\n\t\tdefine(['moment'], factory);                 // AMD\n\t} else {\n\t\tfactory(root.moment);                        // Browser\n\t}\n}(this, function (moment) {\n\t\"use strict\";\n\n\t// Resolves es6 module loading issue\n\tif (moment.version === undefined && moment.default) {\n\t\tmoment = moment.default;\n\t}\n\n\t// Do not load moment-timezone a second time.\n\t// if (moment.tz !== undefined) {\n\t// \tlogError('Moment Timezone ' + moment.tz.version + ' was already loaded ' + (moment.tz.dataVersion ? 'with data from ' : 'without any data') + moment.tz.dataVersion);\n\t// \treturn moment;\n\t// }\n\n\tvar VERSION = \"0.5.35\",\n\t\tzones = {},\n\t\tlinks = {},\n\t\tcountries = {},\n\t\tnames = {},\n\t\tguesses = {},\n\t\tcachedGuess;\n\n\tif (!moment || typeof moment.version !== 'string') {\n\t\tlogError('Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/');\n\t}\n\n\tvar momentVersion = moment.version.split('.'),\n\t\tmajor = +momentVersion[0],\n\t\tminor = +momentVersion[1];\n\n\t// Moment.js version check\n\tif (major < 2 || (major === 2 && minor < 6)) {\n\t\tlogError('Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js ' + moment.version + '. See momentjs.com');\n\t}\n\n\t/************************************\n\t\tUnpacking\n\t************************************/\n\n\tfunction charCodeToInt(charCode) {\n\t\tif (charCode > 96) {\n\t\t\treturn charCode - 87;\n\t\t} else if (charCode > 64) {\n\t\t\treturn charCode - 29;\n\t\t}\n\t\treturn charCode - 48;\n\t}\n\n\tfunction unpackBase60(string) {\n\t\tvar i = 0,\n\t\t\tparts = string.split('.'),\n\t\t\twhole = parts[0],\n\t\t\tfractional = parts[1] || '',\n\t\t\tmultiplier = 1,\n\t\t\tnum,\n\t\t\tout = 0,\n\t\t\tsign = 1;\n\n\t\t// handle negative numbers\n\t\tif (string.charCodeAt(0) === 45) {\n\t\t\ti = 1;\n\t\t\tsign = -1;\n\t\t}\n\n\t\t// handle digits before the decimal\n\t\tfor (i; i < whole.length; i++) {\n\t\t\tnum = charCodeToInt(whole.charCodeAt(i));\n\t\t\tout = 60 * out + num;\n\t\t}\n\n\t\t// handle digits after the decimal\n\t\tfor (i = 0; i < fractional.length; i++) {\n\t\t\tmultiplier = multiplier / 60;\n\t\t\tnum = charCodeToInt(fractional.charCodeAt(i));\n\t\t\tout += num * multiplier;\n\t\t}\n\n\t\treturn out * sign;\n\t}\n\n\tfunction arrayToInt (array) {\n\t\tfor (var i = 0; i < array.length; i++) {\n\t\t\tarray[i] = unpackBase60(array[i]);\n\t\t}\n\t}\n\n\tfunction intToUntil (array, length) {\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\tarray[i] = Math.round((array[i - 1] || 0) + (array[i] * 60000)); // minutes to milliseconds\n\t\t}\n\n\t\tarray[length - 1] = Infinity;\n\t}\n\n\tfunction mapIndices (source, indices) {\n\t\tvar out = [], i;\n\n\t\tfor (i = 0; i < indices.length; i++) {\n\t\t\tout[i] = source[indices[i]];\n\t\t}\n\n\t\treturn out;\n\t}\n\n\tfunction unpack (string) {\n\t\tvar data = string.split('|'),\n\t\t\toffsets = data[2].split(' '),\n\t\t\tindices = data[3].split(''),\n\t\t\tuntils  = data[4].split(' ');\n\n\t\tarrayToInt(offsets);\n\t\tarrayToInt(indices);\n\t\tarrayToInt(untils);\n\n\t\tintToUntil(untils, indices.length);\n\n\t\treturn {\n\t\t\tname       : data[0],\n\t\t\tabbrs      : mapIndices(data[1].split(' '), indices),\n\t\t\toffsets    : mapIndices(offsets, indices),\n\t\t\tuntils     : untils,\n\t\t\tpopulation : data[5] | 0\n\t\t};\n\t}\n\n\t/************************************\n\t\tZone object\n\t************************************/\n\n\tfunction Zone (packedString) {\n\t\tif (packedString) {\n\t\t\tthis._set(unpack(packedString));\n\t\t}\n\t}\n\n\tZone.prototype = {\n\t\t_set : function (unpacked) {\n\t\t\tthis.name       = unpacked.name;\n\t\t\tthis.abbrs      = unpacked.abbrs;\n\t\t\tthis.untils     = unpacked.untils;\n\t\t\tthis.offsets    = unpacked.offsets;\n\t\t\tthis.population = unpacked.population;\n\t\t},\n\n\t\t_index : function (timestamp) {\n\t\t\tvar target = +timestamp,\n\t\t\t\tuntils = this.untils,\n\t\t\t\ti;\n\n\t\t\tfor (i = 0; i < untils.length; i++) {\n\t\t\t\tif (target < untils[i]) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tcountries : function () {\n\t\t\tvar zone_name = this.name;\n\t\t\treturn Object.keys(countries).filter(function (country_code) {\n\t\t\t\treturn countries[country_code].zones.indexOf(zone_name) !== -1;\n\t\t\t});\n\t\t},\n\n\t\tparse : function (timestamp) {\n\t\t\tvar target  = +timestamp,\n\t\t\t\toffsets = this.offsets,\n\t\t\t\tuntils  = this.untils,\n\t\t\t\tmax     = untils.length - 1,\n\t\t\t\toffset, offsetNext, offsetPrev, i;\n\n\t\t\tfor (i = 0; i < max; i++) {\n\t\t\t\toffset     = offsets[i];\n\t\t\t\toffsetNext = offsets[i + 1];\n\t\t\t\toffsetPrev = offsets[i ? i - 1 : i];\n\n\t\t\t\tif (offset < offsetNext && tz.moveAmbiguousForward) {\n\t\t\t\t\toffset = offsetNext;\n\t\t\t\t} else if (offset > offsetPrev && tz.moveInvalidForward) {\n\t\t\t\t\toffset = offsetPrev;\n\t\t\t\t}\n\n\t\t\t\tif (target < untils[i] - (offset * 60000)) {\n\t\t\t\t\treturn offsets[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn offsets[max];\n\t\t},\n\n\t\tabbr : function (mom) {\n\t\t\treturn this.abbrs[this._index(mom)];\n\t\t},\n\n\t\toffset : function (mom) {\n\t\t\tlogError(\"zone.offset has been deprecated in favor of zone.utcOffset\");\n\t\t\treturn this.offsets[this._index(mom)];\n\t\t},\n\n\t\tutcOffset : function (mom) {\n\t\t\treturn this.offsets[this._index(mom)];\n\t\t}\n\t};\n\n\t/************************************\n\t\tCountry object\n\t************************************/\n\n\tfunction Country (country_name, zone_names) {\n\t\tthis.name = country_name;\n\t\tthis.zones = zone_names;\n\t}\n\n\t/************************************\n\t\tCurrent Timezone\n\t************************************/\n\n\tfunction OffsetAt(at) {\n\t\tvar timeString = at.toTimeString();\n\t\tvar abbr = timeString.match(/\\([a-z ]+\\)/i);\n\t\tif (abbr && abbr[0]) {\n\t\t\t// 17:56:31 GMT-0600 (CST)\n\t\t\t// 17:56:31 GMT-0600 (Central Standard Time)\n\t\t\tabbr = abbr[0].match(/[A-Z]/g);\n\t\t\tabbr = abbr ? abbr.join('') : undefined;\n\t\t} else {\n\t\t\t// 17:56:31 CST\n\t\t\t// 17:56:31 GMT+0800 ()\n\t\t\tabbr = timeString.match(/[A-Z]{3,5}/g);\n\t\t\tabbr = abbr ? abbr[0] : undefined;\n\t\t}\n\n\t\tif (abbr === 'GMT') {\n\t\t\tabbr = undefined;\n\t\t}\n\n\t\tthis.at = +at;\n\t\tthis.abbr = abbr;\n\t\tthis.offset = at.getTimezoneOffset();\n\t}\n\n\tfunction ZoneScore(zone) {\n\t\tthis.zone = zone;\n\t\tthis.offsetScore = 0;\n\t\tthis.abbrScore = 0;\n\t}\n\n\tZoneScore.prototype.scoreOffsetAt = function (offsetAt) {\n\t\tthis.offsetScore += Math.abs(this.zone.utcOffset(offsetAt.at) - offsetAt.offset);\n\t\tif (this.zone.abbr(offsetAt.at).replace(/[^A-Z]/g, '') !== offsetAt.abbr) {\n\t\t\tthis.abbrScore++;\n\t\t}\n\t};\n\n\tfunction findChange(low, high) {\n\t\tvar mid, diff;\n\n\t\twhile ((diff = ((high.at - low.at) / 12e4 | 0) * 6e4)) {\n\t\t\tmid = new OffsetAt(new Date(low.at + diff));\n\t\t\tif (mid.offset === low.offset) {\n\t\t\t\tlow = mid;\n\t\t\t} else {\n\t\t\t\thigh = mid;\n\t\t\t}\n\t\t}\n\n\t\treturn low;\n\t}\n\n\tfunction userOffsets() {\n\t\tvar startYear = new Date().getFullYear() - 2,\n\t\t\tlast = new OffsetAt(new Date(startYear, 0, 1)),\n\t\t\toffsets = [last],\n\t\t\tchange, next, i;\n\n\t\tfor (i = 1; i < 48; i++) {\n\t\t\tnext = new OffsetAt(new Date(startYear, i, 1));\n\t\t\tif (next.offset !== last.offset) {\n\t\t\t\tchange = findChange(last, next);\n\t\t\t\toffsets.push(change);\n\t\t\t\toffsets.push(new OffsetAt(new Date(change.at + 6e4)));\n\t\t\t}\n\t\t\tlast = next;\n\t\t}\n\n\t\tfor (i = 0; i < 4; i++) {\n\t\t\toffsets.push(new OffsetAt(new Date(startYear + i, 0, 1)));\n\t\t\toffsets.push(new OffsetAt(new Date(startYear + i, 6, 1)));\n\t\t}\n\n\t\treturn offsets;\n\t}\n\n\tfunction sortZoneScores (a, b) {\n\t\tif (a.offsetScore !== b.offsetScore) {\n\t\t\treturn a.offsetScore - b.offsetScore;\n\t\t}\n\t\tif (a.abbrScore !== b.abbrScore) {\n\t\t\treturn a.abbrScore - b.abbrScore;\n\t\t}\n\t\tif (a.zone.population !== b.zone.population) {\n\t\t\treturn b.zone.population - a.zone.population;\n\t\t}\n\t\treturn b.zone.name.localeCompare(a.zone.name);\n\t}\n\n\tfunction addToGuesses (name, offsets) {\n\t\tvar i, offset;\n\t\tarrayToInt(offsets);\n\t\tfor (i = 0; i < offsets.length; i++) {\n\t\t\toffset = offsets[i];\n\t\t\tguesses[offset] = guesses[offset] || {};\n\t\t\tguesses[offset][name] = true;\n\t\t}\n\t}\n\n\tfunction guessesForUserOffsets (offsets) {\n\t\tvar offsetsLength = offsets.length,\n\t\t\tfilteredGuesses = {},\n\t\t\tout = [],\n\t\t\ti, j, guessesOffset;\n\n\t\tfor (i = 0; i < offsetsLength; i++) {\n\t\t\tguessesOffset = guesses[offsets[i].offset] || {};\n\t\t\tfor (j in guessesOffset) {\n\t\t\t\tif (guessesOffset.hasOwnProperty(j)) {\n\t\t\t\t\tfilteredGuesses[j] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (i in filteredGuesses) {\n\t\t\tif (filteredGuesses.hasOwnProperty(i)) {\n\t\t\t\tout.push(names[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn out;\n\t}\n\n\tfunction rebuildGuess () {\n\n\t\t// use Intl API when available and returning valid time zone\n\t\ttry {\n\t\t\tvar intlName = Intl.DateTimeFormat().resolvedOptions().timeZone;\n\t\t\tif (intlName && intlName.length > 3) {\n\t\t\t\tvar name = names[normalizeName(intlName)];\n\t\t\t\tif (name) {\n\t\t\t\t\treturn name;\n\t\t\t\t}\n\t\t\t\tlogError(\"Moment Timezone found \" + intlName + \" from the Intl api, but did not have that data loaded.\");\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// Intl unavailable, fall back to manual guessing.\n\t\t}\n\n\t\tvar offsets = userOffsets(),\n\t\t\toffsetsLength = offsets.length,\n\t\t\tguesses = guessesForUserOffsets(offsets),\n\t\t\tzoneScores = [],\n\t\t\tzoneScore, i, j;\n\n\t\tfor (i = 0; i < guesses.length; i++) {\n\t\t\tzoneScore = new ZoneScore(getZone(guesses[i]), offsetsLength);\n\t\t\tfor (j = 0; j < offsetsLength; j++) {\n\t\t\t\tzoneScore.scoreOffsetAt(offsets[j]);\n\t\t\t}\n\t\t\tzoneScores.push(zoneScore);\n\t\t}\n\n\t\tzoneScores.sort(sortZoneScores);\n\n\t\treturn zoneScores.length > 0 ? zoneScores[0].zone.name : undefined;\n\t}\n\n\tfunction guess (ignoreCache) {\n\t\tif (!cachedGuess || ignoreCache) {\n\t\t\tcachedGuess = rebuildGuess();\n\t\t}\n\t\treturn cachedGuess;\n\t}\n\n\t/************************************\n\t\tGlobal Methods\n\t************************************/\n\n\tfunction normalizeName (name) {\n\t\treturn (name || '').toLowerCase().replace(/\\//g, '_');\n\t}\n\n\tfunction addZone (packed) {\n\t\tvar i, name, split, normalized;\n\n\t\tif (typeof packed === \"string\") {\n\t\t\tpacked = [packed];\n\t\t}\n\n\t\tfor (i = 0; i < packed.length; i++) {\n\t\t\tsplit = packed[i].split('|');\n\t\t\tname = split[0];\n\t\t\tnormalized = normalizeName(name);\n\t\t\tzones[normalized] = packed[i];\n\t\t\tnames[normalized] = name;\n\t\t\taddToGuesses(normalized, split[2].split(' '));\n\t\t}\n\t}\n\n\tfunction getZone (name, caller) {\n\n\t\tname = normalizeName(name);\n\n\t\tvar zone = zones[name];\n\t\tvar link;\n\n\t\tif (zone instanceof Zone) {\n\t\t\treturn zone;\n\t\t}\n\n\t\tif (typeof zone === 'string') {\n\t\t\tzone = new Zone(zone);\n\t\t\tzones[name] = zone;\n\t\t\treturn zone;\n\t\t}\n\n\t\t// Pass getZone to prevent recursion more than 1 level deep\n\t\tif (links[name] && caller !== getZone && (link = getZone(links[name], getZone))) {\n\t\t\tzone = zones[name] = new Zone();\n\t\t\tzone._set(link);\n\t\t\tzone.name = names[name];\n\t\t\treturn zone;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tfunction getNames () {\n\t\tvar i, out = [];\n\n\t\tfor (i in names) {\n\t\t\tif (names.hasOwnProperty(i) && (zones[i] || zones[links[i]]) && names[i]) {\n\t\t\t\tout.push(names[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn out.sort();\n\t}\n\n\tfunction getCountryNames () {\n\t\treturn Object.keys(countries);\n\t}\n\n\tfunction addLink (aliases) {\n\t\tvar i, alias, normal0, normal1;\n\n\t\tif (typeof aliases === \"string\") {\n\t\t\taliases = [aliases];\n\t\t}\n\n\t\tfor (i = 0; i < aliases.length; i++) {\n\t\t\talias = aliases[i].split('|');\n\n\t\t\tnormal0 = normalizeName(alias[0]);\n\t\t\tnormal1 = normalizeName(alias[1]);\n\n\t\t\tlinks[normal0] = normal1;\n\t\t\tnames[normal0] = alias[0];\n\n\t\t\tlinks[normal1] = normal0;\n\t\t\tnames[normal1] = alias[1];\n\t\t}\n\t}\n\n\tfunction addCountries (data) {\n\t\tvar i, country_code, country_zones, split;\n\t\tif (!data || !data.length) return;\n\t\tfor (i = 0; i < data.length; i++) {\n\t\t\tsplit = data[i].split('|');\n\t\t\tcountry_code = split[0].toUpperCase();\n\t\t\tcountry_zones = split[1].split(' ');\n\t\t\tcountries[country_code] = new Country(\n\t\t\t\tcountry_code,\n\t\t\t\tcountry_zones\n\t\t\t);\n\t\t}\n\t}\n\n\tfunction getCountry (name) {\n\t\tname = name.toUpperCase();\n\t\treturn countries[name] || null;\n\t}\n\n\tfunction zonesForCountry(country, with_offset) {\n\t\tcountry = getCountry(country);\n\n\t\tif (!country) return null;\n\n\t\tvar zones = country.zones.sort();\n\n\t\tif (with_offset) {\n\t\t\treturn zones.map(function (zone_name) {\n\t\t\t\tvar zone = getZone(zone_name);\n\t\t\t\treturn {\n\t\t\t\t\tname: zone_name,\n\t\t\t\t\toffset: zone.utcOffset(new Date())\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\n\t\treturn zones;\n\t}\n\n\tfunction loadData (data) {\n\t\taddZone(data.zones);\n\t\taddLink(data.links);\n\t\taddCountries(data.countries);\n\t\ttz.dataVersion = data.version;\n\t}\n\n\tfunction zoneExists (name) {\n\t\tif (!zoneExists.didShowError) {\n\t\t\tzoneExists.didShowError = true;\n\t\t\t\tlogError(\"moment.tz.zoneExists('\" + name + \"') has been deprecated in favor of !moment.tz.zone('\" + name + \"')\");\n\t\t}\n\t\treturn !!getZone(name);\n\t}\n\n\tfunction needsOffset (m) {\n\t\tvar isUnixTimestamp = (m._f === 'X' || m._f === 'x');\n\t\treturn !!(m._a && (m._tzm === undefined) && !isUnixTimestamp);\n\t}\n\n\tfunction logError (message) {\n\t\tif (typeof console !== 'undefined' && typeof console.error === 'function') {\n\t\t\tconsole.error(message);\n\t\t}\n\t}\n\n\t/************************************\n\t\tmoment.tz namespace\n\t************************************/\n\n\tfunction tz (input) {\n\t\tvar args = Array.prototype.slice.call(arguments, 0, -1),\n\t\t\tname = arguments[arguments.length - 1],\n\t\t\tzone = getZone(name),\n\t\t\tout  = moment.utc.apply(null, args);\n\n\t\tif (zone && !moment.isMoment(input) && needsOffset(out)) {\n\t\t\tout.add(zone.parse(out), 'minutes');\n\t\t}\n\n\t\tout.tz(name);\n\n\t\treturn out;\n\t}\n\n\ttz.version      = VERSION;\n\ttz.dataVersion  = '';\n\ttz._zones       = zones;\n\ttz._links       = links;\n\ttz._names       = names;\n\ttz._countries\t= countries;\n\ttz.add          = addZone;\n\ttz.link         = addLink;\n\ttz.load         = loadData;\n\ttz.zone         = getZone;\n\ttz.zoneExists   = zoneExists; // deprecated in 0.1.0\n\ttz.guess        = guess;\n\ttz.names        = getNames;\n\ttz.Zone         = Zone;\n\ttz.unpack       = unpack;\n\ttz.unpackBase60 = unpackBase60;\n\ttz.needsOffset  = needsOffset;\n\ttz.moveInvalidForward   = true;\n\ttz.moveAmbiguousForward = false;\n\ttz.countries    = getCountryNames;\n\ttz.zonesForCountry = zonesForCountry;\n\n\t/************************************\n\t\tInterface with Moment.js\n\t************************************/\n\n\tvar fn = moment.fn;\n\n\tmoment.tz = tz;\n\n\tmoment.defaultZone = null;\n\n\tmoment.updateOffset = function (mom, keepTime) {\n\t\tvar zone = moment.defaultZone,\n\t\t\toffset;\n\n\t\tif (mom._z === undefined) {\n\t\t\tif (zone && needsOffset(mom) && !mom._isUTC) {\n\t\t\t\tmom._d = moment.utc(mom._a)._d;\n\t\t\t\tmom.utc().add(zone.parse(mom), 'minutes');\n\t\t\t}\n\t\t\tmom._z = zone;\n\t\t}\n\t\tif (mom._z) {\n\t\t\toffset = mom._z.utcOffset(mom);\n\t\t\tif (Math.abs(offset) < 16) {\n\t\t\t\toffset = offset / 60;\n\t\t\t}\n\t\t\tif (mom.utcOffset !== undefined) {\n\t\t\t\tvar z = mom._z;\n\t\t\t\tmom.utcOffset(-offset, keepTime);\n\t\t\t\tmom._z = z;\n\t\t\t} else {\n\t\t\t\tmom.zone(offset, keepTime);\n\t\t\t}\n\t\t}\n\t};\n\n\tfn.tz = function (name, keepTime) {\n\t\tif (name) {\n\t\t\tif (typeof name !== 'string') {\n\t\t\t\tthrow new Error('Time zone name must be a string, got ' + name + ' [' + typeof name + ']');\n\t\t\t}\n\t\t\tthis._z = getZone(name);\n\t\t\tif (this._z) {\n\t\t\t\tmoment.updateOffset(this, keepTime);\n\t\t\t} else {\n\t\t\t\tlogError(\"Moment Timezone has no data for \" + name + \". See http://momentjs.com/timezone/docs/#/data-loading/.\");\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t\tif (this._z) { return this._z.name; }\n\t};\n\n\tfunction abbrWrap (old) {\n\t\treturn function () {\n\t\t\tif (this._z) { return this._z.abbr(this); }\n\t\t\treturn old.call(this);\n\t\t};\n\t}\n\n\tfunction resetZoneWrap (old) {\n\t\treturn function () {\n\t\t\tthis._z = null;\n\t\t\treturn old.apply(this, arguments);\n\t\t};\n\t}\n\n\tfunction resetZoneWrap2 (old) {\n\t\treturn function () {\n\t\t\tif (arguments.length > 0) this._z = null;\n\t\t\treturn old.apply(this, arguments);\n\t\t};\n\t}\n\n\tfn.zoneName  = abbrWrap(fn.zoneName);\n\tfn.zoneAbbr  = abbrWrap(fn.zoneAbbr);\n\tfn.utc       = resetZoneWrap(fn.utc);\n\tfn.local     = resetZoneWrap(fn.local);\n\tfn.utcOffset = resetZoneWrap2(fn.utcOffset);\n\n\tmoment.tz.setDefault = function(name) {\n\t\tif (major < 2 || (major === 2 && minor < 9)) {\n\t\t\tlogError('Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js ' + moment.version + '.');\n\t\t}\n\t\tmoment.defaultZone = name ? getZone(name) : null;\n\t\treturn moment;\n\t};\n\n\t// Cloning a moment should include the _z property.\n\tvar momentProperties = moment.momentProperties;\n\tif (Object.prototype.toString.call(momentProperties) === '[object Array]') {\n\t\t// moment 2.8.1+\n\t\tmomentProperties.push('_z');\n\t\tmomentProperties.push('_a');\n\t} else if (momentProperties) {\n\t\t// moment 2.7.0\n\t\tmomentProperties._z = null;\n\t}\n\n\t// INJECT DATA\n\n\treturn moment;\n}));\n","//! moment.js\n//! version : 2.29.4\n//! authors : Tim Wood, Iskren Chernev, Moment.js contributors\n//! license : MIT\n//! momentjs.com\n\n;(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    global.moment = factory()\n}(this, (function () { 'use strict';\n\n    var hookCallback;\n\n    function hooks() {\n        return hookCallback.apply(null, arguments);\n    }\n\n    // This is done to register the method called with moment()\n    // without creating circular dependencies.\n    function setHookCallback(callback) {\n        hookCallback = callback;\n    }\n\n    function isArray(input) {\n        return (\n            input instanceof Array ||\n            Object.prototype.toString.call(input) === '[object Array]'\n        );\n    }\n\n    function isObject(input) {\n        // IE8 will treat undefined and null as object if it wasn't for\n        // input != null\n        return (\n            input != null &&\n            Object.prototype.toString.call(input) === '[object Object]'\n        );\n    }\n\n    function hasOwnProp(a, b) {\n        return Object.prototype.hasOwnProperty.call(a, b);\n    }\n\n    function isObjectEmpty(obj) {\n        if (Object.getOwnPropertyNames) {\n            return Object.getOwnPropertyNames(obj).length === 0;\n        } else {\n            var k;\n            for (k in obj) {\n                if (hasOwnProp(obj, k)) {\n                    return false;\n                }\n            }\n            return true;\n        }\n    }\n\n    function isUndefined(input) {\n        return input === void 0;\n    }\n\n    function isNumber(input) {\n        return (\n            typeof input === 'number' ||\n            Object.prototype.toString.call(input) === '[object Number]'\n        );\n    }\n\n    function isDate(input) {\n        return (\n            input instanceof Date ||\n            Object.prototype.toString.call(input) === '[object Date]'\n        );\n    }\n\n    function map(arr, fn) {\n        var res = [],\n            i,\n            arrLen = arr.length;\n        for (i = 0; i < arrLen; ++i) {\n            res.push(fn(arr[i], i));\n        }\n        return res;\n    }\n\n    function extend(a, b) {\n        for (var i in b) {\n            if (hasOwnProp(b, i)) {\n                a[i] = b[i];\n            }\n        }\n\n        if (hasOwnProp(b, 'toString')) {\n            a.toString = b.toString;\n        }\n\n        if (hasOwnProp(b, 'valueOf')) {\n            a.valueOf = b.valueOf;\n        }\n\n        return a;\n    }\n\n    function createUTC(input, format, locale, strict) {\n        return createLocalOrUTC(input, format, locale, strict, true).utc();\n    }\n\n    function defaultParsingFlags() {\n        // We need to deep clone this object.\n        return {\n            empty: false,\n            unusedTokens: [],\n            unusedInput: [],\n            overflow: -2,\n            charsLeftOver: 0,\n            nullInput: false,\n            invalidEra: null,\n            invalidMonth: null,\n            invalidFormat: false,\n            userInvalidated: false,\n            iso: false,\n            parsedDateParts: [],\n            era: null,\n            meridiem: null,\n            rfc2822: false,\n            weekdayMismatch: false,\n        };\n    }\n\n    function getParsingFlags(m) {\n        if (m._pf == null) {\n            m._pf = defaultParsingFlags();\n        }\n        return m._pf;\n    }\n\n    var some;\n    if (Array.prototype.some) {\n        some = Array.prototype.some;\n    } else {\n        some = function (fun) {\n            var t = Object(this),\n                len = t.length >>> 0,\n                i;\n\n            for (i = 0; i < len; i++) {\n                if (i in t && fun.call(this, t[i], i, t)) {\n                    return true;\n                }\n            }\n\n            return false;\n        };\n    }\n\n    function isValid(m) {\n        if (m._isValid == null) {\n            var flags = getParsingFlags(m),\n                parsedParts = some.call(flags.parsedDateParts, function (i) {\n                    return i != null;\n                }),\n                isNowValid =\n                    !isNaN(m._d.getTime()) &&\n                    flags.overflow < 0 &&\n                    !flags.empty &&\n                    !flags.invalidEra &&\n                    !flags.invalidMonth &&\n                    !flags.invalidWeekday &&\n                    !flags.weekdayMismatch &&\n                    !flags.nullInput &&\n                    !flags.invalidFormat &&\n                    !flags.userInvalidated &&\n                    (!flags.meridiem || (flags.meridiem && parsedParts));\n\n            if (m._strict) {\n                isNowValid =\n                    isNowValid &&\n                    flags.charsLeftOver === 0 &&\n                    flags.unusedTokens.length === 0 &&\n                    flags.bigHour === undefined;\n            }\n\n            if (Object.isFrozen == null || !Object.isFrozen(m)) {\n                m._isValid = isNowValid;\n            } else {\n                return isNowValid;\n            }\n        }\n        return m._isValid;\n    }\n\n    function createInvalid(flags) {\n        var m = createUTC(NaN);\n        if (flags != null) {\n            extend(getParsingFlags(m), flags);\n        } else {\n            getParsingFlags(m).userInvalidated = true;\n        }\n\n        return m;\n    }\n\n    // Plugins that add properties should also add the key here (null value),\n    // so we can properly clone ourselves.\n    var momentProperties = (hooks.momentProperties = []),\n        updateInProgress = false;\n\n    function copyConfig(to, from) {\n        var i,\n            prop,\n            val,\n            momentPropertiesLen = momentProperties.length;\n\n        if (!isUndefined(from._isAMomentObject)) {\n            to._isAMomentObject = from._isAMomentObject;\n        }\n        if (!isUndefined(from._i)) {\n            to._i = from._i;\n        }\n        if (!isUndefined(from._f)) {\n            to._f = from._f;\n        }\n        if (!isUndefined(from._l)) {\n            to._l = from._l;\n        }\n        if (!isUndefined(from._strict)) {\n            to._strict = from._strict;\n        }\n        if (!isUndefined(from._tzm)) {\n            to._tzm = from._tzm;\n        }\n        if (!isUndefined(from._isUTC)) {\n            to._isUTC = from._isUTC;\n        }\n        if (!isUndefined(from._offset)) {\n            to._offset = from._offset;\n        }\n        if (!isUndefined(from._pf)) {\n            to._pf = getParsingFlags(from);\n        }\n        if (!isUndefined(from._locale)) {\n            to._locale = from._locale;\n        }\n\n        if (momentPropertiesLen > 0) {\n            for (i = 0; i < momentPropertiesLen; i++) {\n                prop = momentProperties[i];\n                val = from[prop];\n                if (!isUndefined(val)) {\n                    to[prop] = val;\n                }\n            }\n        }\n\n        return to;\n    }\n\n    // Moment prototype object\n    function Moment(config) {\n        copyConfig(this, config);\n        this._d = new Date(config._d != null ? config._d.getTime() : NaN);\n        if (!this.isValid()) {\n            this._d = new Date(NaN);\n        }\n        // Prevent infinite loop in case updateOffset creates new moment\n        // objects.\n        if (updateInProgress === false) {\n            updateInProgress = true;\n            hooks.updateOffset(this);\n            updateInProgress = false;\n        }\n    }\n\n    function isMoment(obj) {\n        return (\n            obj instanceof Moment || (obj != null && obj._isAMomentObject != null)\n        );\n    }\n\n    function warn(msg) {\n        if (\n            hooks.suppressDeprecationWarnings === false &&\n            typeof console !== 'undefined' &&\n            console.warn\n        ) {\n            console.warn('Deprecation warning: ' + msg);\n        }\n    }\n\n    function deprecate(msg, fn) {\n        var firstTime = true;\n\n        return extend(function () {\n            if (hooks.deprecationHandler != null) {\n                hooks.deprecationHandler(null, msg);\n            }\n            if (firstTime) {\n                var args = [],\n                    arg,\n                    i,\n                    key,\n                    argLen = arguments.length;\n                for (i = 0; i < argLen; i++) {\n                    arg = '';\n                    if (typeof arguments[i] === 'object') {\n                        arg += '\\n[' + i + '] ';\n                        for (key in arguments[0]) {\n                            if (hasOwnProp(arguments[0], key)) {\n                                arg += key + ': ' + arguments[0][key] + ', ';\n                            }\n                        }\n                        arg = arg.slice(0, -2); // Remove trailing comma and space\n                    } else {\n                        arg = arguments[i];\n                    }\n                    args.push(arg);\n                }\n                warn(\n                    msg +\n                        '\\nArguments: ' +\n                        Array.prototype.slice.call(args).join('') +\n                        '\\n' +\n                        new Error().stack\n                );\n                firstTime = false;\n            }\n            return fn.apply(this, arguments);\n        }, fn);\n    }\n\n    var deprecations = {};\n\n    function deprecateSimple(name, msg) {\n        if (hooks.deprecationHandler != null) {\n            hooks.deprecationHandler(name, msg);\n        }\n        if (!deprecations[name]) {\n            warn(msg);\n            deprecations[name] = true;\n        }\n    }\n\n    hooks.suppressDeprecationWarnings = false;\n    hooks.deprecationHandler = null;\n\n    function isFunction(input) {\n        return (\n            (typeof Function !== 'undefined' && input instanceof Function) ||\n            Object.prototype.toString.call(input) === '[object Function]'\n        );\n    }\n\n    function set(config) {\n        var prop, i;\n        for (i in config) {\n            if (hasOwnProp(config, i)) {\n                prop = config[i];\n                if (isFunction(prop)) {\n                    this[i] = prop;\n                } else {\n                    this['_' + i] = prop;\n                }\n            }\n        }\n        this._config = config;\n        // Lenient ordinal parsing accepts just a number in addition to\n        // number + (possibly) stuff coming from _dayOfMonthOrdinalParse.\n        // TODO: Remove \"ordinalParse\" fallback in next major release.\n        this._dayOfMonthOrdinalParseLenient = new RegExp(\n            (this._dayOfMonthOrdinalParse.source || this._ordinalParse.source) +\n                '|' +\n                /\\d{1,2}/.source\n        );\n    }\n\n    function mergeConfigs(parentConfig, childConfig) {\n        var res = extend({}, parentConfig),\n            prop;\n        for (prop in childConfig) {\n            if (hasOwnProp(childConfig, prop)) {\n                if (isObject(parentConfig[prop]) && isObject(childConfig[prop])) {\n                    res[prop] = {};\n                    extend(res[prop], parentConfig[prop]);\n                    extend(res[prop], childConfig[prop]);\n                } else if (childConfig[prop] != null) {\n                    res[prop] = childConfig[prop];\n                } else {\n                    delete res[prop];\n                }\n            }\n        }\n        for (prop in parentConfig) {\n            if (\n                hasOwnProp(parentConfig, prop) &&\n                !hasOwnProp(childConfig, prop) &&\n                isObject(parentConfig[prop])\n            ) {\n                // make sure changes to properties don't modify parent config\n                res[prop] = extend({}, res[prop]);\n            }\n        }\n        return res;\n    }\n\n    function Locale(config) {\n        if (config != null) {\n            this.set(config);\n        }\n    }\n\n    var keys;\n\n    if (Object.keys) {\n        keys = Object.keys;\n    } else {\n        keys = function (obj) {\n            var i,\n                res = [];\n            for (i in obj) {\n                if (hasOwnProp(obj, i)) {\n                    res.push(i);\n                }\n            }\n            return res;\n        };\n    }\n\n    var defaultCalendar = {\n        sameDay: '[Today at] LT',\n        nextDay: '[Tomorrow at] LT',\n        nextWeek: 'dddd [at] LT',\n        lastDay: '[Yesterday at] LT',\n        lastWeek: '[Last] dddd [at] LT',\n        sameElse: 'L',\n    };\n\n    function calendar(key, mom, now) {\n        var output = this._calendar[key] || this._calendar['sameElse'];\n        return isFunction(output) ? output.call(mom, now) : output;\n    }\n\n    function zeroFill(number, targetLength, forceSign) {\n        var absNumber = '' + Math.abs(number),\n            zerosToFill = targetLength - absNumber.length,\n            sign = number >= 0;\n        return (\n            (sign ? (forceSign ? '+' : '') : '-') +\n            Math.pow(10, Math.max(0, zerosToFill)).toString().substr(1) +\n            absNumber\n        );\n    }\n\n    var formattingTokens =\n            /(\\[[^\\[]*\\])|(\\\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,\n        localFormattingTokens = /(\\[[^\\[]*\\])|(\\\\)?(LTS|LT|LL?L?L?|l{1,4})/g,\n        formatFunctions = {},\n        formatTokenFunctions = {};\n\n    // token:    'M'\n    // padded:   ['MM', 2]\n    // ordinal:  'Mo'\n    // callback: function () { this.month() + 1 }\n    function addFormatToken(token, padded, ordinal, callback) {\n        var func = callback;\n        if (typeof callback === 'string') {\n            func = function () {\n                return this[callback]();\n            };\n        }\n        if (token) {\n            formatTokenFunctions[token] = func;\n        }\n        if (padded) {\n            formatTokenFunctions[padded[0]] = function () {\n                return zeroFill(func.apply(this, arguments), padded[1], padded[2]);\n            };\n        }\n        if (ordinal) {\n            formatTokenFunctions[ordinal] = function () {\n                return this.localeData().ordinal(\n                    func.apply(this, arguments),\n                    token\n                );\n            };\n        }\n    }\n\n    function removeFormattingTokens(input) {\n        if (input.match(/\\[[\\s\\S]/)) {\n            return input.replace(/^\\[|\\]$/g, '');\n        }\n        return input.replace(/\\\\/g, '');\n    }\n\n    function makeFormatFunction(format) {\n        var array = format.match(formattingTokens),\n            i,\n            length;\n\n        for (i = 0, length = array.length; i < length; i++) {\n            if (formatTokenFunctions[array[i]]) {\n                array[i] = formatTokenFunctions[array[i]];\n            } else {\n                array[i] = removeFormattingTokens(array[i]);\n            }\n        }\n\n        return function (mom) {\n            var output = '',\n                i;\n            for (i = 0; i < length; i++) {\n                output += isFunction(array[i])\n                    ? array[i].call(mom, format)\n                    : array[i];\n            }\n            return output;\n        };\n    }\n\n    // format date using native date object\n    function formatMoment(m, format) {\n        if (!m.isValid()) {\n            return m.localeData().invalidDate();\n        }\n\n        format = expandFormat(format, m.localeData());\n        formatFunctions[format] =\n            formatFunctions[format] || makeFormatFunction(format);\n\n        return formatFunctions[format](m);\n    }\n\n    function expandFormat(format, locale) {\n        var i = 5;\n\n        function replaceLongDateFormatTokens(input) {\n            return locale.longDateFormat(input) || input;\n        }\n\n        localFormattingTokens.lastIndex = 0;\n        while (i >= 0 && localFormattingTokens.test(format)) {\n            format = format.replace(\n                localFormattingTokens,\n                replaceLongDateFormatTokens\n            );\n            localFormattingTokens.lastIndex = 0;\n            i -= 1;\n        }\n\n        return format;\n    }\n\n    var defaultLongDateFormat = {\n        LTS: 'h:mm:ss A',\n        LT: 'h:mm A',\n        L: 'MM/DD/YYYY',\n        LL: 'MMMM D, YYYY',\n        LLL: 'MMMM D, YYYY h:mm A',\n        LLLL: 'dddd, MMMM D, YYYY h:mm A',\n    };\n\n    function longDateFormat(key) {\n        var format = this._longDateFormat[key],\n            formatUpper = this._longDateFormat[key.toUpperCase()];\n\n        if (format || !formatUpper) {\n            return format;\n        }\n\n        this._longDateFormat[key] = formatUpper\n            .match(formattingTokens)\n            .map(function (tok) {\n                if (\n                    tok === 'MMMM' ||\n                    tok === 'MM' ||\n                    tok === 'DD' ||\n                    tok === 'dddd'\n                ) {\n                    return tok.slice(1);\n                }\n                return tok;\n            })\n            .join('');\n\n        return this._longDateFormat[key];\n    }\n\n    var defaultInvalidDate = 'Invalid date';\n\n    function invalidDate() {\n        return this._invalidDate;\n    }\n\n    var defaultOrdinal = '%d',\n        defaultDayOfMonthOrdinalParse = /\\d{1,2}/;\n\n    function ordinal(number) {\n        return this._ordinal.replace('%d', number);\n    }\n\n    var defaultRelativeTime = {\n        future: 'in %s',\n        past: '%s ago',\n        s: 'a few seconds',\n        ss: '%d seconds',\n        m: 'a minute',\n        mm: '%d minutes',\n        h: 'an hour',\n        hh: '%d hours',\n        d: 'a day',\n        dd: '%d days',\n        w: 'a week',\n        ww: '%d weeks',\n        M: 'a month',\n        MM: '%d months',\n        y: 'a year',\n        yy: '%d years',\n    };\n\n    function relativeTime(number, withoutSuffix, string, isFuture) {\n        var output = this._relativeTime[string];\n        return isFunction(output)\n            ? output(number, withoutSuffix, string, isFuture)\n            : output.replace(/%d/i, number);\n    }\n\n    function pastFuture(diff, output) {\n        var format = this._relativeTime[diff > 0 ? 'future' : 'past'];\n        return isFunction(format) ? format(output) : format.replace(/%s/i, output);\n    }\n\n    var aliases = {};\n\n    function addUnitAlias(unit, shorthand) {\n        var lowerCase = unit.toLowerCase();\n        aliases[lowerCase] = aliases[lowerCase + 's'] = aliases[shorthand] = unit;\n    }\n\n    function normalizeUnits(units) {\n        return typeof units === 'string'\n            ? aliases[units] || aliases[units.toLowerCase()]\n            : undefined;\n    }\n\n    function normalizeObjectUnits(inputObject) {\n        var normalizedInput = {},\n            normalizedProp,\n            prop;\n\n        for (prop in inputObject) {\n            if (hasOwnProp(inputObject, prop)) {\n                normalizedProp = normalizeUnits(prop);\n                if (normalizedProp) {\n                    normalizedInput[normalizedProp] = inputObject[prop];\n                }\n            }\n        }\n\n        return normalizedInput;\n    }\n\n    var priorities = {};\n\n    function addUnitPriority(unit, priority) {\n        priorities[unit] = priority;\n    }\n\n    function getPrioritizedUnits(unitsObj) {\n        var units = [],\n            u;\n        for (u in unitsObj) {\n            if (hasOwnProp(unitsObj, u)) {\n                units.push({ unit: u, priority: priorities[u] });\n            }\n        }\n        units.sort(function (a, b) {\n            return a.priority - b.priority;\n        });\n        return units;\n    }\n\n    function isLeapYear(year) {\n        return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;\n    }\n\n    function absFloor(number) {\n        if (number < 0) {\n            // -0 -> 0\n            return Math.ceil(number) || 0;\n        } else {\n            return Math.floor(number);\n        }\n    }\n\n    function toInt(argumentForCoercion) {\n        var coercedNumber = +argumentForCoercion,\n            value = 0;\n\n        if (coercedNumber !== 0 && isFinite(coercedNumber)) {\n            value = absFloor(coercedNumber);\n        }\n\n        return value;\n    }\n\n    function makeGetSet(unit, keepTime) {\n        return function (value) {\n            if (value != null) {\n                set$1(this, unit, value);\n                hooks.updateOffset(this, keepTime);\n                return this;\n            } else {\n                return get(this, unit);\n            }\n        };\n    }\n\n    function get(mom, unit) {\n        return mom.isValid()\n            ? mom._d['get' + (mom._isUTC ? 'UTC' : '') + unit]()\n            : NaN;\n    }\n\n    function set$1(mom, unit, value) {\n        if (mom.isValid() && !isNaN(value)) {\n            if (\n                unit === 'FullYear' &&\n                isLeapYear(mom.year()) &&\n                mom.month() === 1 &&\n                mom.date() === 29\n            ) {\n                value = toInt(value);\n                mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](\n                    value,\n                    mom.month(),\n                    daysInMonth(value, mom.month())\n                );\n            } else {\n                mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value);\n            }\n        }\n    }\n\n    // MOMENTS\n\n    function stringGet(units) {\n        units = normalizeUnits(units);\n        if (isFunction(this[units])) {\n            return this[units]();\n        }\n        return this;\n    }\n\n    function stringSet(units, value) {\n        if (typeof units === 'object') {\n            units = normalizeObjectUnits(units);\n            var prioritized = getPrioritizedUnits(units),\n                i,\n                prioritizedLen = prioritized.length;\n            for (i = 0; i < prioritizedLen; i++) {\n                this[prioritized[i].unit](units[prioritized[i].unit]);\n            }\n        } else {\n            units = normalizeUnits(units);\n            if (isFunction(this[units])) {\n                return this[units](value);\n            }\n        }\n        return this;\n    }\n\n    var match1 = /\\d/, //       0 - 9\n        match2 = /\\d\\d/, //      00 - 99\n        match3 = /\\d{3}/, //     000 - 999\n        match4 = /\\d{4}/, //    0000 - 9999\n        match6 = /[+-]?\\d{6}/, // -999999 - 999999\n        match1to2 = /\\d\\d?/, //       0 - 99\n        match3to4 = /\\d\\d\\d\\d?/, //     999 - 9999\n        match5to6 = /\\d\\d\\d\\d\\d\\d?/, //   99999 - 999999\n        match1to3 = /\\d{1,3}/, //       0 - 999\n        match1to4 = /\\d{1,4}/, //       0 - 9999\n        match1to6 = /[+-]?\\d{1,6}/, // -999999 - 999999\n        matchUnsigned = /\\d+/, //       0 - inf\n        matchSigned = /[+-]?\\d+/, //    -inf - inf\n        matchOffset = /Z|[+-]\\d\\d:?\\d\\d/gi, // +00:00 -00:00 +0000 -0000 or Z\n        matchShortOffset = /Z|[+-]\\d\\d(?::?\\d\\d)?/gi, // +00 -00 +00:00 -00:00 +0000 -0000 or Z\n        matchTimestamp = /[+-]?\\d+(\\.\\d{1,3})?/, // 123456789 123456789.123\n        // any word (or two) characters or numbers including two/three word month in arabic.\n        // includes scottish gaelic two word and hyphenated months\n        matchWord =\n            /[0-9]{0,256}['a-z\\u00A0-\\u05FF\\u0700-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFF07\\uFF10-\\uFFEF]{1,256}|[\\u0600-\\u06FF\\/]{1,256}(\\s*?[\\u0600-\\u06FF]{1,256}){1,2}/i,\n        regexes;\n\n    regexes = {};\n\n    function addRegexToken(token, regex, strictRegex) {\n        regexes[token] = isFunction(regex)\n            ? regex\n            : function (isStrict, localeData) {\n                  return isStrict && strictRegex ? strictRegex : regex;\n              };\n    }\n\n    function getParseRegexForToken(token, config) {\n        if (!hasOwnProp(regexes, token)) {\n            return new RegExp(unescapeFormat(token));\n        }\n\n        return regexes[token](config._strict, config._locale);\n    }\n\n    // Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript\n    function unescapeFormat(s) {\n        return regexEscape(\n            s\n                .replace('\\\\', '')\n                .replace(\n                    /\\\\(\\[)|\\\\(\\])|\\[([^\\]\\[]*)\\]|\\\\(.)/g,\n                    function (matched, p1, p2, p3, p4) {\n                        return p1 || p2 || p3 || p4;\n                    }\n                )\n        );\n    }\n\n    function regexEscape(s) {\n        return s.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n    }\n\n    var tokens = {};\n\n    function addParseToken(token, callback) {\n        var i,\n            func = callback,\n            tokenLen;\n        if (typeof token === 'string') {\n            token = [token];\n        }\n        if (isNumber(callback)) {\n            func = function (input, array) {\n                array[callback] = toInt(input);\n            };\n        }\n        tokenLen = token.length;\n        for (i = 0; i < tokenLen; i++) {\n            tokens[token[i]] = func;\n        }\n    }\n\n    function addWeekParseToken(token, callback) {\n        addParseToken(token, function (input, array, config, token) {\n            config._w = config._w || {};\n            callback(input, config._w, config, token);\n        });\n    }\n\n    function addTimeToArrayFromToken(token, input, config) {\n        if (input != null && hasOwnProp(tokens, token)) {\n            tokens[token](input, config._a, config, token);\n        }\n    }\n\n    var YEAR = 0,\n        MONTH = 1,\n        DATE = 2,\n        HOUR = 3,\n        MINUTE = 4,\n        SECOND = 5,\n        MILLISECOND = 6,\n        WEEK = 7,\n        WEEKDAY = 8;\n\n    function mod(n, x) {\n        return ((n % x) + x) % x;\n    }\n\n    var indexOf;\n\n    if (Array.prototype.indexOf) {\n        indexOf = Array.prototype.indexOf;\n    } else {\n        indexOf = function (o) {\n            // I know\n            var i;\n            for (i = 0; i < this.length; ++i) {\n                if (this[i] === o) {\n                    return i;\n                }\n            }\n            return -1;\n        };\n    }\n\n    function daysInMonth(year, month) {\n        if (isNaN(year) || isNaN(month)) {\n            return NaN;\n        }\n        var modMonth = mod(month, 12);\n        year += (month - modMonth) / 12;\n        return modMonth === 1\n            ? isLeapYear(year)\n                ? 29\n                : 28\n            : 31 - ((modMonth % 7) % 2);\n    }\n\n    // FORMATTING\n\n    addFormatToken('M', ['MM', 2], 'Mo', function () {\n        return this.month() + 1;\n    });\n\n    addFormatToken('MMM', 0, 0, function (format) {\n        return this.localeData().monthsShort(this, format);\n    });\n\n    addFormatToken('MMMM', 0, 0, function (format) {\n        return this.localeData().months(this, format);\n    });\n\n    // ALIASES\n\n    addUnitAlias('month', 'M');\n\n    // PRIORITY\n\n    addUnitPriority('month', 8);\n\n    // PARSING\n\n    addRegexToken('M', match1to2);\n    addRegexToken('MM', match1to2, match2);\n    addRegexToken('MMM', function (isStrict, locale) {\n        return locale.monthsShortRegex(isStrict);\n    });\n    addRegexToken('MMMM', function (isStrict, locale) {\n        return locale.monthsRegex(isStrict);\n    });\n\n    addParseToken(['M', 'MM'], function (input, array) {\n        array[MONTH] = toInt(input) - 1;\n    });\n\n    addParseToken(['MMM', 'MMMM'], function (input, array, config, token) {\n        var month = config._locale.monthsParse(input, token, config._strict);\n        // if we didn't find a month name, mark the date as invalid.\n        if (month != null) {\n            array[MONTH] = month;\n        } else {\n            getParsingFlags(config).invalidMonth = input;\n        }\n    });\n\n    // LOCALES\n\n    var defaultLocaleMonths =\n            'January_February_March_April_May_June_July_August_September_October_November_December'.split(\n                '_'\n            ),\n        defaultLocaleMonthsShort =\n            'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),\n        MONTHS_IN_FORMAT = /D[oD]?(\\[[^\\[\\]]*\\]|\\s)+MMMM?/,\n        defaultMonthsShortRegex = matchWord,\n        defaultMonthsRegex = matchWord;\n\n    function localeMonths(m, format) {\n        if (!m) {\n            return isArray(this._months)\n                ? this._months\n                : this._months['standalone'];\n        }\n        return isArray(this._months)\n            ? this._months[m.month()]\n            : this._months[\n                  (this._months.isFormat || MONTHS_IN_FORMAT).test(format)\n                      ? 'format'\n                      : 'standalone'\n              ][m.month()];\n    }\n\n    function localeMonthsShort(m, format) {\n        if (!m) {\n            return isArray(this._monthsShort)\n                ? this._monthsShort\n                : this._monthsShort['standalone'];\n        }\n        return isArray(this._monthsShort)\n            ? this._monthsShort[m.month()]\n            : this._monthsShort[\n                  MONTHS_IN_FORMAT.test(format) ? 'format' : 'standalone'\n              ][m.month()];\n    }\n\n    function handleStrictParse(monthName, format, strict) {\n        var i,\n            ii,\n            mom,\n            llc = monthName.toLocaleLowerCase();\n        if (!this._monthsParse) {\n            // this is not used\n            this._monthsParse = [];\n            this._longMonthsParse = [];\n            this._shortMonthsParse = [];\n            for (i = 0; i < 12; ++i) {\n                mom = createUTC([2000, i]);\n                this._shortMonthsParse[i] = this.monthsShort(\n                    mom,\n                    ''\n                ).toLocaleLowerCase();\n                this._longMonthsParse[i] = this.months(mom, '').toLocaleLowerCase();\n            }\n        }\n\n        if (strict) {\n            if (format === 'MMM') {\n                ii = indexOf.call(this._shortMonthsParse, llc);\n                return ii !== -1 ? ii : null;\n            } else {\n                ii = indexOf.call(this._longMonthsParse, llc);\n                return ii !== -1 ? ii : null;\n            }\n        } else {\n            if (format === 'MMM') {\n                ii = indexOf.call(this._shortMonthsParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._longMonthsParse, llc);\n                return ii !== -1 ? ii : null;\n            } else {\n                ii = indexOf.call(this._longMonthsParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._shortMonthsParse, llc);\n                return ii !== -1 ? ii : null;\n            }\n        }\n    }\n\n    function localeMonthsParse(monthName, format, strict) {\n        var i, mom, regex;\n\n        if (this._monthsParseExact) {\n            return handleStrictParse.call(this, monthName, format, strict);\n        }\n\n        if (!this._monthsParse) {\n            this._monthsParse = [];\n            this._longMonthsParse = [];\n            this._shortMonthsParse = [];\n        }\n\n        // TODO: add sorting\n        // Sorting makes sure if one month (or abbr) is a prefix of another\n        // see sorting in computeMonthsParse\n        for (i = 0; i < 12; i++) {\n            // make the regex if we don't have it already\n            mom = createUTC([2000, i]);\n            if (strict && !this._longMonthsParse[i]) {\n                this._longMonthsParse[i] = new RegExp(\n                    '^' + this.months(mom, '').replace('.', '') + '$',\n                    'i'\n                );\n                this._shortMonthsParse[i] = new RegExp(\n                    '^' + this.monthsShort(mom, '').replace('.', '') + '$',\n                    'i'\n                );\n            }\n            if (!strict && !this._monthsParse[i]) {\n                regex =\n                    '^' + this.months(mom, '') + '|^' + this.monthsShort(mom, '');\n                this._monthsParse[i] = new RegExp(regex.replace('.', ''), 'i');\n            }\n            // test the regex\n            if (\n                strict &&\n                format === 'MMMM' &&\n                this._longMonthsParse[i].test(monthName)\n            ) {\n                return i;\n            } else if (\n                strict &&\n                format === 'MMM' &&\n                this._shortMonthsParse[i].test(monthName)\n            ) {\n                return i;\n            } else if (!strict && this._monthsParse[i].test(monthName)) {\n                return i;\n            }\n        }\n    }\n\n    // MOMENTS\n\n    function setMonth(mom, value) {\n        var dayOfMonth;\n\n        if (!mom.isValid()) {\n            // No op\n            return mom;\n        }\n\n        if (typeof value === 'string') {\n            if (/^\\d+$/.test(value)) {\n                value = toInt(value);\n            } else {\n                value = mom.localeData().monthsParse(value);\n                // TODO: Another silent failure?\n                if (!isNumber(value)) {\n                    return mom;\n                }\n            }\n        }\n\n        dayOfMonth = Math.min(mom.date(), daysInMonth(mom.year(), value));\n        mom._d['set' + (mom._isUTC ? 'UTC' : '') + 'Month'](value, dayOfMonth);\n        return mom;\n    }\n\n    function getSetMonth(value) {\n        if (value != null) {\n            setMonth(this, value);\n            hooks.updateOffset(this, true);\n            return this;\n        } else {\n            return get(this, 'Month');\n        }\n    }\n\n    function getDaysInMonth() {\n        return daysInMonth(this.year(), this.month());\n    }\n\n    function monthsShortRegex(isStrict) {\n        if (this._monthsParseExact) {\n            if (!hasOwnProp(this, '_monthsRegex')) {\n                computeMonthsParse.call(this);\n            }\n            if (isStrict) {\n                return this._monthsShortStrictRegex;\n            } else {\n                return this._monthsShortRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_monthsShortRegex')) {\n                this._monthsShortRegex = defaultMonthsShortRegex;\n            }\n            return this._monthsShortStrictRegex && isStrict\n                ? this._monthsShortStrictRegex\n                : this._monthsShortRegex;\n        }\n    }\n\n    function monthsRegex(isStrict) {\n        if (this._monthsParseExact) {\n            if (!hasOwnProp(this, '_monthsRegex')) {\n                computeMonthsParse.call(this);\n            }\n            if (isStrict) {\n                return this._monthsStrictRegex;\n            } else {\n                return this._monthsRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_monthsRegex')) {\n                this._monthsRegex = defaultMonthsRegex;\n            }\n            return this._monthsStrictRegex && isStrict\n                ? this._monthsStrictRegex\n                : this._monthsRegex;\n        }\n    }\n\n    function computeMonthsParse() {\n        function cmpLenRev(a, b) {\n            return b.length - a.length;\n        }\n\n        var shortPieces = [],\n            longPieces = [],\n            mixedPieces = [],\n            i,\n            mom;\n        for (i = 0; i < 12; i++) {\n            // make the regex if we don't have it already\n            mom = createUTC([2000, i]);\n            shortPieces.push(this.monthsShort(mom, ''));\n            longPieces.push(this.months(mom, ''));\n            mixedPieces.push(this.months(mom, ''));\n            mixedPieces.push(this.monthsShort(mom, ''));\n        }\n        // Sorting makes sure if one month (or abbr) is a prefix of another it\n        // will match the longer piece.\n        shortPieces.sort(cmpLenRev);\n        longPieces.sort(cmpLenRev);\n        mixedPieces.sort(cmpLenRev);\n        for (i = 0; i < 12; i++) {\n            shortPieces[i] = regexEscape(shortPieces[i]);\n            longPieces[i] = regexEscape(longPieces[i]);\n        }\n        for (i = 0; i < 24; i++) {\n            mixedPieces[i] = regexEscape(mixedPieces[i]);\n        }\n\n        this._monthsRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');\n        this._monthsShortRegex = this._monthsRegex;\n        this._monthsStrictRegex = new RegExp(\n            '^(' + longPieces.join('|') + ')',\n            'i'\n        );\n        this._monthsShortStrictRegex = new RegExp(\n            '^(' + shortPieces.join('|') + ')',\n            'i'\n        );\n    }\n\n    // FORMATTING\n\n    addFormatToken('Y', 0, 0, function () {\n        var y = this.year();\n        return y <= 9999 ? zeroFill(y, 4) : '+' + y;\n    });\n\n    addFormatToken(0, ['YY', 2], 0, function () {\n        return this.year() % 100;\n    });\n\n    addFormatToken(0, ['YYYY', 4], 0, 'year');\n    addFormatToken(0, ['YYYYY', 5], 0, 'year');\n    addFormatToken(0, ['YYYYYY', 6, true], 0, 'year');\n\n    // ALIASES\n\n    addUnitAlias('year', 'y');\n\n    // PRIORITIES\n\n    addUnitPriority('year', 1);\n\n    // PARSING\n\n    addRegexToken('Y', matchSigned);\n    addRegexToken('YY', match1to2, match2);\n    addRegexToken('YYYY', match1to4, match4);\n    addRegexToken('YYYYY', match1to6, match6);\n    addRegexToken('YYYYYY', match1to6, match6);\n\n    addParseToken(['YYYYY', 'YYYYYY'], YEAR);\n    addParseToken('YYYY', function (input, array) {\n        array[YEAR] =\n            input.length === 2 ? hooks.parseTwoDigitYear(input) : toInt(input);\n    });\n    addParseToken('YY', function (input, array) {\n        array[YEAR] = hooks.parseTwoDigitYear(input);\n    });\n    addParseToken('Y', function (input, array) {\n        array[YEAR] = parseInt(input, 10);\n    });\n\n    // HELPERS\n\n    function daysInYear(year) {\n        return isLeapYear(year) ? 366 : 365;\n    }\n\n    // HOOKS\n\n    hooks.parseTwoDigitYear = function (input) {\n        return toInt(input) + (toInt(input) > 68 ? 1900 : 2000);\n    };\n\n    // MOMENTS\n\n    var getSetYear = makeGetSet('FullYear', true);\n\n    function getIsLeapYear() {\n        return isLeapYear(this.year());\n    }\n\n    function createDate(y, m, d, h, M, s, ms) {\n        // can't just apply() to create a date:\n        // https://stackoverflow.com/q/181348\n        var date;\n        // the date constructor remaps years 0-99 to 1900-1999\n        if (y < 100 && y >= 0) {\n            // preserve leap years using a full 400 year cycle, then reset\n            date = new Date(y + 400, m, d, h, M, s, ms);\n            if (isFinite(date.getFullYear())) {\n                date.setFullYear(y);\n            }\n        } else {\n            date = new Date(y, m, d, h, M, s, ms);\n        }\n\n        return date;\n    }\n\n    function createUTCDate(y) {\n        var date, args;\n        // the Date.UTC function remaps years 0-99 to 1900-1999\n        if (y < 100 && y >= 0) {\n            args = Array.prototype.slice.call(arguments);\n            // preserve leap years using a full 400 year cycle, then reset\n            args[0] = y + 400;\n            date = new Date(Date.UTC.apply(null, args));\n            if (isFinite(date.getUTCFullYear())) {\n                date.setUTCFullYear(y);\n            }\n        } else {\n            date = new Date(Date.UTC.apply(null, arguments));\n        }\n\n        return date;\n    }\n\n    // start-of-first-week - start-of-year\n    function firstWeekOffset(year, dow, doy) {\n        var // first-week day -- which january is always in the first week (4 for iso, 1 for other)\n            fwd = 7 + dow - doy,\n            // first-week day local weekday -- which local weekday is fwd\n            fwdlw = (7 + createUTCDate(year, 0, fwd).getUTCDay() - dow) % 7;\n\n        return -fwdlw + fwd - 1;\n    }\n\n    // https://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday\n    function dayOfYearFromWeeks(year, week, weekday, dow, doy) {\n        var localWeekday = (7 + weekday - dow) % 7,\n            weekOffset = firstWeekOffset(year, dow, doy),\n            dayOfYear = 1 + 7 * (week - 1) + localWeekday + weekOffset,\n            resYear,\n            resDayOfYear;\n\n        if (dayOfYear <= 0) {\n            resYear = year - 1;\n            resDayOfYear = daysInYear(resYear) + dayOfYear;\n        } else if (dayOfYear > daysInYear(year)) {\n            resYear = year + 1;\n            resDayOfYear = dayOfYear - daysInYear(year);\n        } else {\n            resYear = year;\n            resDayOfYear = dayOfYear;\n        }\n\n        return {\n            year: resYear,\n            dayOfYear: resDayOfYear,\n        };\n    }\n\n    function weekOfYear(mom, dow, doy) {\n        var weekOffset = firstWeekOffset(mom.year(), dow, doy),\n            week = Math.floor((mom.dayOfYear() - weekOffset - 1) / 7) + 1,\n            resWeek,\n            resYear;\n\n        if (week < 1) {\n            resYear = mom.year() - 1;\n            resWeek = week + weeksInYear(resYear, dow, doy);\n        } else if (week > weeksInYear(mom.year(), dow, doy)) {\n            resWeek = week - weeksInYear(mom.year(), dow, doy);\n            resYear = mom.year() + 1;\n        } else {\n            resYear = mom.year();\n            resWeek = week;\n        }\n\n        return {\n            week: resWeek,\n            year: resYear,\n        };\n    }\n\n    function weeksInYear(year, dow, doy) {\n        var weekOffset = firstWeekOffset(year, dow, doy),\n            weekOffsetNext = firstWeekOffset(year + 1, dow, doy);\n        return (daysInYear(year) - weekOffset + weekOffsetNext) / 7;\n    }\n\n    // FORMATTING\n\n    addFormatToken('w', ['ww', 2], 'wo', 'week');\n    addFormatToken('W', ['WW', 2], 'Wo', 'isoWeek');\n\n    // ALIASES\n\n    addUnitAlias('week', 'w');\n    addUnitAlias('isoWeek', 'W');\n\n    // PRIORITIES\n\n    addUnitPriority('week', 5);\n    addUnitPriority('isoWeek', 5);\n\n    // PARSING\n\n    addRegexToken('w', match1to2);\n    addRegexToken('ww', match1to2, match2);\n    addRegexToken('W', match1to2);\n    addRegexToken('WW', match1to2, match2);\n\n    addWeekParseToken(\n        ['w', 'ww', 'W', 'WW'],\n        function (input, week, config, token) {\n            week[token.substr(0, 1)] = toInt(input);\n        }\n    );\n\n    // HELPERS\n\n    // LOCALES\n\n    function localeWeek(mom) {\n        return weekOfYear(mom, this._week.dow, this._week.doy).week;\n    }\n\n    var defaultLocaleWeek = {\n        dow: 0, // Sunday is the first day of the week.\n        doy: 6, // The week that contains Jan 6th is the first week of the year.\n    };\n\n    function localeFirstDayOfWeek() {\n        return this._week.dow;\n    }\n\n    function localeFirstDayOfYear() {\n        return this._week.doy;\n    }\n\n    // MOMENTS\n\n    function getSetWeek(input) {\n        var week = this.localeData().week(this);\n        return input == null ? week : this.add((input - week) * 7, 'd');\n    }\n\n    function getSetISOWeek(input) {\n        var week = weekOfYear(this, 1, 4).week;\n        return input == null ? week : this.add((input - week) * 7, 'd');\n    }\n\n    // FORMATTING\n\n    addFormatToken('d', 0, 'do', 'day');\n\n    addFormatToken('dd', 0, 0, function (format) {\n        return this.localeData().weekdaysMin(this, format);\n    });\n\n    addFormatToken('ddd', 0, 0, function (format) {\n        return this.localeData().weekdaysShort(this, format);\n    });\n\n    addFormatToken('dddd', 0, 0, function (format) {\n        return this.localeData().weekdays(this, format);\n    });\n\n    addFormatToken('e', 0, 0, 'weekday');\n    addFormatToken('E', 0, 0, 'isoWeekday');\n\n    // ALIASES\n\n    addUnitAlias('day', 'd');\n    addUnitAlias('weekday', 'e');\n    addUnitAlias('isoWeekday', 'E');\n\n    // PRIORITY\n    addUnitPriority('day', 11);\n    addUnitPriority('weekday', 11);\n    addUnitPriority('isoWeekday', 11);\n\n    // PARSING\n\n    addRegexToken('d', match1to2);\n    addRegexToken('e', match1to2);\n    addRegexToken('E', match1to2);\n    addRegexToken('dd', function (isStrict, locale) {\n        return locale.weekdaysMinRegex(isStrict);\n    });\n    addRegexToken('ddd', function (isStrict, locale) {\n        return locale.weekdaysShortRegex(isStrict);\n    });\n    addRegexToken('dddd', function (isStrict, locale) {\n        return locale.weekdaysRegex(isStrict);\n    });\n\n    addWeekParseToken(['dd', 'ddd', 'dddd'], function (input, week, config, token) {\n        var weekday = config._locale.weekdaysParse(input, token, config._strict);\n        // if we didn't get a weekday name, mark the date as invalid\n        if (weekday != null) {\n            week.d = weekday;\n        } else {\n            getParsingFlags(config).invalidWeekday = input;\n        }\n    });\n\n    addWeekParseToken(['d', 'e', 'E'], function (input, week, config, token) {\n        week[token] = toInt(input);\n    });\n\n    // HELPERS\n\n    function parseWeekday(input, locale) {\n        if (typeof input !== 'string') {\n            return input;\n        }\n\n        if (!isNaN(input)) {\n            return parseInt(input, 10);\n        }\n\n        input = locale.weekdaysParse(input);\n        if (typeof input === 'number') {\n            return input;\n        }\n\n        return null;\n    }\n\n    function parseIsoWeekday(input, locale) {\n        if (typeof input === 'string') {\n            return locale.weekdaysParse(input) % 7 || 7;\n        }\n        return isNaN(input) ? null : input;\n    }\n\n    // LOCALES\n    function shiftWeekdays(ws, n) {\n        return ws.slice(n, 7).concat(ws.slice(0, n));\n    }\n\n    var defaultLocaleWeekdays =\n            'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),\n        defaultLocaleWeekdaysShort = 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),\n        defaultLocaleWeekdaysMin = 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),\n        defaultWeekdaysRegex = matchWord,\n        defaultWeekdaysShortRegex = matchWord,\n        defaultWeekdaysMinRegex = matchWord;\n\n    function localeWeekdays(m, format) {\n        var weekdays = isArray(this._weekdays)\n            ? this._weekdays\n            : this._weekdays[\n                  m && m !== true && this._weekdays.isFormat.test(format)\n                      ? 'format'\n                      : 'standalone'\n              ];\n        return m === true\n            ? shiftWeekdays(weekdays, this._week.dow)\n            : m\n            ? weekdays[m.day()]\n            : weekdays;\n    }\n\n    function localeWeekdaysShort(m) {\n        return m === true\n            ? shiftWeekdays(this._weekdaysShort, this._week.dow)\n            : m\n            ? this._weekdaysShort[m.day()]\n            : this._weekdaysShort;\n    }\n\n    function localeWeekdaysMin(m) {\n        return m === true\n            ? shiftWeekdays(this._weekdaysMin, this._week.dow)\n            : m\n            ? this._weekdaysMin[m.day()]\n            : this._weekdaysMin;\n    }\n\n    function handleStrictParse$1(weekdayName, format, strict) {\n        var i,\n            ii,\n            mom,\n            llc = weekdayName.toLocaleLowerCase();\n        if (!this._weekdaysParse) {\n            this._weekdaysParse = [];\n            this._shortWeekdaysParse = [];\n            this._minWeekdaysParse = [];\n\n            for (i = 0; i < 7; ++i) {\n                mom = createUTC([2000, 1]).day(i);\n                this._minWeekdaysParse[i] = this.weekdaysMin(\n                    mom,\n                    ''\n                ).toLocaleLowerCase();\n                this._shortWeekdaysParse[i] = this.weekdaysShort(\n                    mom,\n                    ''\n                ).toLocaleLowerCase();\n                this._weekdaysParse[i] = this.weekdays(mom, '').toLocaleLowerCase();\n            }\n        }\n\n        if (strict) {\n            if (format === 'dddd') {\n                ii = indexOf.call(this._weekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            } else if (format === 'ddd') {\n                ii = indexOf.call(this._shortWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            } else {\n                ii = indexOf.call(this._minWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            }\n        } else {\n            if (format === 'dddd') {\n                ii = indexOf.call(this._weekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._shortWeekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._minWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            } else if (format === 'ddd') {\n                ii = indexOf.call(this._shortWeekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._weekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._minWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            } else {\n                ii = indexOf.call(this._minWeekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._weekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._shortWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            }\n        }\n    }\n\n    function localeWeekdaysParse(weekdayName, format, strict) {\n        var i, mom, regex;\n\n        if (this._weekdaysParseExact) {\n            return handleStrictParse$1.call(this, weekdayName, format, strict);\n        }\n\n        if (!this._weekdaysParse) {\n            this._weekdaysParse = [];\n            this._minWeekdaysParse = [];\n            this._shortWeekdaysParse = [];\n            this._fullWeekdaysParse = [];\n        }\n\n        for (i = 0; i < 7; i++) {\n            // make the regex if we don't have it already\n\n            mom = createUTC([2000, 1]).day(i);\n            if (strict && !this._fullWeekdaysParse[i]) {\n                this._fullWeekdaysParse[i] = new RegExp(\n                    '^' + this.weekdays(mom, '').replace('.', '\\\\.?') + '$',\n                    'i'\n                );\n                this._shortWeekdaysParse[i] = new RegExp(\n                    '^' + this.weekdaysShort(mom, '').replace('.', '\\\\.?') + '$',\n                    'i'\n                );\n                this._minWeekdaysParse[i] = new RegExp(\n                    '^' + this.weekdaysMin(mom, '').replace('.', '\\\\.?') + '$',\n                    'i'\n                );\n            }\n            if (!this._weekdaysParse[i]) {\n                regex =\n                    '^' +\n                    this.weekdays(mom, '') +\n                    '|^' +\n                    this.weekdaysShort(mom, '') +\n                    '|^' +\n                    this.weekdaysMin(mom, '');\n                this._weekdaysParse[i] = new RegExp(regex.replace('.', ''), 'i');\n            }\n            // test the regex\n            if (\n                strict &&\n                format === 'dddd' &&\n                this._fullWeekdaysParse[i].test(weekdayName)\n            ) {\n                return i;\n            } else if (\n                strict &&\n                format === 'ddd' &&\n                this._shortWeekdaysParse[i].test(weekdayName)\n            ) {\n                return i;\n            } else if (\n                strict &&\n                format === 'dd' &&\n                this._minWeekdaysParse[i].test(weekdayName)\n            ) {\n                return i;\n            } else if (!strict && this._weekdaysParse[i].test(weekdayName)) {\n                return i;\n            }\n        }\n    }\n\n    // MOMENTS\n\n    function getSetDayOfWeek(input) {\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n        var day = this._isUTC ? this._d.getUTCDay() : this._d.getDay();\n        if (input != null) {\n            input = parseWeekday(input, this.localeData());\n            return this.add(input - day, 'd');\n        } else {\n            return day;\n        }\n    }\n\n    function getSetLocaleDayOfWeek(input) {\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n        var weekday = (this.day() + 7 - this.localeData()._week.dow) % 7;\n        return input == null ? weekday : this.add(input - weekday, 'd');\n    }\n\n    function getSetISODayOfWeek(input) {\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n\n        // behaves the same as moment#day except\n        // as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)\n        // as a setter, sunday should belong to the previous week.\n\n        if (input != null) {\n            var weekday = parseIsoWeekday(input, this.localeData());\n            return this.day(this.day() % 7 ? weekday : weekday - 7);\n        } else {\n            return this.day() || 7;\n        }\n    }\n\n    function weekdaysRegex(isStrict) {\n        if (this._weekdaysParseExact) {\n            if (!hasOwnProp(this, '_weekdaysRegex')) {\n                computeWeekdaysParse.call(this);\n            }\n            if (isStrict) {\n                return this._weekdaysStrictRegex;\n            } else {\n                return this._weekdaysRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_weekdaysRegex')) {\n                this._weekdaysRegex = defaultWeekdaysRegex;\n            }\n            return this._weekdaysStrictRegex && isStrict\n                ? this._weekdaysStrictRegex\n                : this._weekdaysRegex;\n        }\n    }\n\n    function weekdaysShortRegex(isStrict) {\n        if (this._weekdaysParseExact) {\n            if (!hasOwnProp(this, '_weekdaysRegex')) {\n                computeWeekdaysParse.call(this);\n            }\n            if (isStrict) {\n                return this._weekdaysShortStrictRegex;\n            } else {\n                return this._weekdaysShortRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_weekdaysShortRegex')) {\n                this._weekdaysShortRegex = defaultWeekdaysShortRegex;\n            }\n            return this._weekdaysShortStrictRegex && isStrict\n                ? this._weekdaysShortStrictRegex\n                : this._weekdaysShortRegex;\n        }\n    }\n\n    function weekdaysMinRegex(isStrict) {\n        if (this._weekdaysParseExact) {\n            if (!hasOwnProp(this, '_weekdaysRegex')) {\n                computeWeekdaysParse.call(this);\n            }\n            if (isStrict) {\n                return this._weekdaysMinStrictRegex;\n            } else {\n                return this._weekdaysMinRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_weekdaysMinRegex')) {\n                this._weekdaysMinRegex = defaultWeekdaysMinRegex;\n            }\n            return this._weekdaysMinStrictRegex && isStrict\n                ? this._weekdaysMinStrictRegex\n                : this._weekdaysMinRegex;\n        }\n    }\n\n    function computeWeekdaysParse() {\n        function cmpLenRev(a, b) {\n            return b.length - a.length;\n        }\n\n        var minPieces = [],\n            shortPieces = [],\n            longPieces = [],\n            mixedPieces = [],\n            i,\n            mom,\n            minp,\n            shortp,\n            longp;\n        for (i = 0; i < 7; i++) {\n            // make the regex if we don't have it already\n            mom = createUTC([2000, 1]).day(i);\n            minp = regexEscape(this.weekdaysMin(mom, ''));\n            shortp = regexEscape(this.weekdaysShort(mom, ''));\n            longp = regexEscape(this.weekdays(mom, ''));\n            minPieces.push(minp);\n            shortPieces.push(shortp);\n            longPieces.push(longp);\n            mixedPieces.push(minp);\n            mixedPieces.push(shortp);\n            mixedPieces.push(longp);\n        }\n        // Sorting makes sure if one weekday (or abbr) is a prefix of another it\n        // will match the longer piece.\n        minPieces.sort(cmpLenRev);\n        shortPieces.sort(cmpLenRev);\n        longPieces.sort(cmpLenRev);\n        mixedPieces.sort(cmpLenRev);\n\n        this._weekdaysRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');\n        this._weekdaysShortRegex = this._weekdaysRegex;\n        this._weekdaysMinRegex = this._weekdaysRegex;\n\n        this._weekdaysStrictRegex = new RegExp(\n            '^(' + longPieces.join('|') + ')',\n            'i'\n        );\n        this._weekdaysShortStrictRegex = new RegExp(\n            '^(' + shortPieces.join('|') + ')',\n            'i'\n        );\n        this._weekdaysMinStrictRegex = new RegExp(\n            '^(' + minPieces.join('|') + ')',\n            'i'\n        );\n    }\n\n    // FORMATTING\n\n    function hFormat() {\n        return this.hours() % 12 || 12;\n    }\n\n    function kFormat() {\n        return this.hours() || 24;\n    }\n\n    addFormatToken('H', ['HH', 2], 0, 'hour');\n    addFormatToken('h', ['hh', 2], 0, hFormat);\n    addFormatToken('k', ['kk', 2], 0, kFormat);\n\n    addFormatToken('hmm', 0, 0, function () {\n        return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2);\n    });\n\n    addFormatToken('hmmss', 0, 0, function () {\n        return (\n            '' +\n            hFormat.apply(this) +\n            zeroFill(this.minutes(), 2) +\n            zeroFill(this.seconds(), 2)\n        );\n    });\n\n    addFormatToken('Hmm', 0, 0, function () {\n        return '' + this.hours() + zeroFill(this.minutes(), 2);\n    });\n\n    addFormatToken('Hmmss', 0, 0, function () {\n        return (\n            '' +\n            this.hours() +\n            zeroFill(this.minutes(), 2) +\n            zeroFill(this.seconds(), 2)\n        );\n    });\n\n    function meridiem(token, lowercase) {\n        addFormatToken(token, 0, 0, function () {\n            return this.localeData().meridiem(\n                this.hours(),\n                this.minutes(),\n                lowercase\n            );\n        });\n    }\n\n    meridiem('a', true);\n    meridiem('A', false);\n\n    // ALIASES\n\n    addUnitAlias('hour', 'h');\n\n    // PRIORITY\n    addUnitPriority('hour', 13);\n\n    // PARSING\n\n    function matchMeridiem(isStrict, locale) {\n        return locale._meridiemParse;\n    }\n\n    addRegexToken('a', matchMeridiem);\n    addRegexToken('A', matchMeridiem);\n    addRegexToken('H', match1to2);\n    addRegexToken('h', match1to2);\n    addRegexToken('k', match1to2);\n    addRegexToken('HH', match1to2, match2);\n    addRegexToken('hh', match1to2, match2);\n    addRegexToken('kk', match1to2, match2);\n\n    addRegexToken('hmm', match3to4);\n    addRegexToken('hmmss', match5to6);\n    addRegexToken('Hmm', match3to4);\n    addRegexToken('Hmmss', match5to6);\n\n    addParseToken(['H', 'HH'], HOUR);\n    addParseToken(['k', 'kk'], function (input, array, config) {\n        var kInput = toInt(input);\n        array[HOUR] = kInput === 24 ? 0 : kInput;\n    });\n    addParseToken(['a', 'A'], function (input, array, config) {\n        config._isPm = config._locale.isPM(input);\n        config._meridiem = input;\n    });\n    addParseToken(['h', 'hh'], function (input, array, config) {\n        array[HOUR] = toInt(input);\n        getParsingFlags(config).bigHour = true;\n    });\n    addParseToken('hmm', function (input, array, config) {\n        var pos = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos));\n        array[MINUTE] = toInt(input.substr(pos));\n        getParsingFlags(config).bigHour = true;\n    });\n    addParseToken('hmmss', function (input, array, config) {\n        var pos1 = input.length - 4,\n            pos2 = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos1));\n        array[MINUTE] = toInt(input.substr(pos1, 2));\n        array[SECOND] = toInt(input.substr(pos2));\n        getParsingFlags(config).bigHour = true;\n    });\n    addParseToken('Hmm', function (input, array, config) {\n        var pos = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos));\n        array[MINUTE] = toInt(input.substr(pos));\n    });\n    addParseToken('Hmmss', function (input, array, config) {\n        var pos1 = input.length - 4,\n            pos2 = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos1));\n        array[MINUTE] = toInt(input.substr(pos1, 2));\n        array[SECOND] = toInt(input.substr(pos2));\n    });\n\n    // LOCALES\n\n    function localeIsPM(input) {\n        // IE8 Quirks Mode & IE7 Standards Mode do not allow accessing strings like arrays\n        // Using charAt should be more compatible.\n        return (input + '').toLowerCase().charAt(0) === 'p';\n    }\n\n    var defaultLocaleMeridiemParse = /[ap]\\.?m?\\.?/i,\n        // Setting the hour should keep the time, because the user explicitly\n        // specified which hour they want. So trying to maintain the same hour (in\n        // a new timezone) makes sense. Adding/subtracting hours does not follow\n        // this rule.\n        getSetHour = makeGetSet('Hours', true);\n\n    function localeMeridiem(hours, minutes, isLower) {\n        if (hours > 11) {\n            return isLower ? 'pm' : 'PM';\n        } else {\n            return isLower ? 'am' : 'AM';\n        }\n    }\n\n    var baseConfig = {\n        calendar: defaultCalendar,\n        longDateFormat: defaultLongDateFormat,\n        invalidDate: defaultInvalidDate,\n        ordinal: defaultOrdinal,\n        dayOfMonthOrdinalParse: defaultDayOfMonthOrdinalParse,\n        relativeTime: defaultRelativeTime,\n\n        months: defaultLocaleMonths,\n        monthsShort: defaultLocaleMonthsShort,\n\n        week: defaultLocaleWeek,\n\n        weekdays: defaultLocaleWeekdays,\n        weekdaysMin: defaultLocaleWeekdaysMin,\n        weekdaysShort: defaultLocaleWeekdaysShort,\n\n        meridiemParse: defaultLocaleMeridiemParse,\n    };\n\n    // internal storage for locale config files\n    var locales = {},\n        localeFamilies = {},\n        globalLocale;\n\n    function commonPrefix(arr1, arr2) {\n        var i,\n            minl = Math.min(arr1.length, arr2.length);\n        for (i = 0; i < minl; i += 1) {\n            if (arr1[i] !== arr2[i]) {\n                return i;\n            }\n        }\n        return minl;\n    }\n\n    function normalizeLocale(key) {\n        return key ? key.toLowerCase().replace('_', '-') : key;\n    }\n\n    // pick the locale from the array\n    // try ['en-au', 'en-gb'] as 'en-au', 'en-gb', 'en', as in move through the list trying each\n    // substring from most specific to least, but move to the next array item if it's a more specific variant than the current root\n    function chooseLocale(names) {\n        var i = 0,\n            j,\n            next,\n            locale,\n            split;\n\n        while (i < names.length) {\n            split = normalizeLocale(names[i]).split('-');\n            j = split.length;\n            next = normalizeLocale(names[i + 1]);\n            next = next ? next.split('-') : null;\n            while (j > 0) {\n                locale = loadLocale(split.slice(0, j).join('-'));\n                if (locale) {\n                    return locale;\n                }\n                if (\n                    next &&\n                    next.length >= j &&\n                    commonPrefix(split, next) >= j - 1\n                ) {\n                    //the next array item is better than a shallower substring of this one\n                    break;\n                }\n                j--;\n            }\n            i++;\n        }\n        return globalLocale;\n    }\n\n    function isLocaleNameSane(name) {\n        // Prevent names that look like filesystem paths, i.e contain '/' or '\\'\n        return name.match('^[^/\\\\\\\\]*$') != null;\n    }\n\n    function loadLocale(name) {\n        var oldLocale = null,\n            aliasedRequire;\n        // TODO: Find a better way to register and load all the locales in Node\n        if (\n            locales[name] === undefined &&\n            typeof module !== 'undefined' &&\n            module &&\n            module.exports &&\n            isLocaleNameSane(name)\n        ) {\n            try {\n                oldLocale = globalLocale._abbr;\n                aliasedRequire = require;\n                aliasedRequire('./locale/' + name);\n                getSetGlobalLocale(oldLocale);\n            } catch (e) {\n                // mark as not found to avoid repeating expensive file require call causing high CPU\n                // when trying to find en-US, en_US, en-us for every format call\n                locales[name] = null; // null means not found\n            }\n        }\n        return locales[name];\n    }\n\n    // This function will load locale and then set the global locale.  If\n    // no arguments are passed in, it will simply return the current global\n    // locale key.\n    function getSetGlobalLocale(key, values) {\n        var data;\n        if (key) {\n            if (isUndefined(values)) {\n                data = getLocale(key);\n            } else {\n                data = defineLocale(key, values);\n            }\n\n            if (data) {\n                // moment.duration._locale = moment._locale = data;\n                globalLocale = data;\n            } else {\n                if (typeof console !== 'undefined' && console.warn) {\n                    //warn user if arguments are passed but the locale could not be set\n                    console.warn(\n                        'Locale ' + key + ' not found. Did you forget to load it?'\n                    );\n                }\n            }\n        }\n\n        return globalLocale._abbr;\n    }\n\n    function defineLocale(name, config) {\n        if (config !== null) {\n            var locale,\n                parentConfig = baseConfig;\n            config.abbr = name;\n            if (locales[name] != null) {\n                deprecateSimple(\n                    'defineLocaleOverride',\n                    'use moment.updateLocale(localeName, config) to change ' +\n                        'an existing locale. moment.defineLocale(localeName, ' +\n                        'config) should only be used for creating a new locale ' +\n                        'See http://momentjs.com/guides/#/warnings/define-locale/ for more info.'\n                );\n                parentConfig = locales[name]._config;\n            } else if (config.parentLocale != null) {\n                if (locales[config.parentLocale] != null) {\n                    parentConfig = locales[config.parentLocale]._config;\n                } else {\n                    locale = loadLocale(config.parentLocale);\n                    if (locale != null) {\n                        parentConfig = locale._config;\n                    } else {\n                        if (!localeFamilies[config.parentLocale]) {\n                            localeFamilies[config.parentLocale] = [];\n                        }\n                        localeFamilies[config.parentLocale].push({\n                            name: name,\n                            config: config,\n                        });\n                        return null;\n                    }\n                }\n            }\n            locales[name] = new Locale(mergeConfigs(parentConfig, config));\n\n            if (localeFamilies[name]) {\n                localeFamilies[name].forEach(function (x) {\n                    defineLocale(x.name, x.config);\n                });\n            }\n\n            // backwards compat for now: also set the locale\n            // make sure we set the locale AFTER all child locales have been\n            // created, so we won't end up with the child locale set.\n            getSetGlobalLocale(name);\n\n            return locales[name];\n        } else {\n            // useful for testing\n            delete locales[name];\n            return null;\n        }\n    }\n\n    function updateLocale(name, config) {\n        if (config != null) {\n            var locale,\n                tmpLocale,\n                parentConfig = baseConfig;\n\n            if (locales[name] != null && locales[name].parentLocale != null) {\n                // Update existing child locale in-place to avoid memory-leaks\n                locales[name].set(mergeConfigs(locales[name]._config, config));\n            } else {\n                // MERGE\n                tmpLocale = loadLocale(name);\n                if (tmpLocale != null) {\n                    parentConfig = tmpLocale._config;\n                }\n                config = mergeConfigs(parentConfig, config);\n                if (tmpLocale == null) {\n                    // updateLocale is called for creating a new locale\n                    // Set abbr so it will have a name (getters return\n                    // undefined otherwise).\n                    config.abbr = name;\n                }\n                locale = new Locale(config);\n                locale.parentLocale = locales[name];\n                locales[name] = locale;\n            }\n\n            // backwards compat for now: also set the locale\n            getSetGlobalLocale(name);\n        } else {\n            // pass null for config to unupdate, useful for tests\n            if (locales[name] != null) {\n                if (locales[name].parentLocale != null) {\n                    locales[name] = locales[name].parentLocale;\n                    if (name === getSetGlobalLocale()) {\n                        getSetGlobalLocale(name);\n                    }\n                } else if (locales[name] != null) {\n                    delete locales[name];\n                }\n            }\n        }\n        return locales[name];\n    }\n\n    // returns locale data\n    function getLocale(key) {\n        var locale;\n\n        if (key && key._locale && key._locale._abbr) {\n            key = key._locale._abbr;\n        }\n\n        if (!key) {\n            return globalLocale;\n        }\n\n        if (!isArray(key)) {\n            //short-circuit everything else\n            locale = loadLocale(key);\n            if (locale) {\n                return locale;\n            }\n            key = [key];\n        }\n\n        return chooseLocale(key);\n    }\n\n    function listLocales() {\n        return keys(locales);\n    }\n\n    function checkOverflow(m) {\n        var overflow,\n            a = m._a;\n\n        if (a && getParsingFlags(m).overflow === -2) {\n            overflow =\n                a[MONTH] < 0 || a[MONTH] > 11\n                    ? MONTH\n                    : a[DATE] < 1 || a[DATE] > daysInMonth(a[YEAR], a[MONTH])\n                    ? DATE\n                    : a[HOUR] < 0 ||\n                      a[HOUR] > 24 ||\n                      (a[HOUR] === 24 &&\n                          (a[MINUTE] !== 0 ||\n                              a[SECOND] !== 0 ||\n                              a[MILLISECOND] !== 0))\n                    ? HOUR\n                    : a[MINUTE] < 0 || a[MINUTE] > 59\n                    ? MINUTE\n                    : a[SECOND] < 0 || a[SECOND] > 59\n                    ? SECOND\n                    : a[MILLISECOND] < 0 || a[MILLISECOND] > 999\n                    ? MILLISECOND\n                    : -1;\n\n            if (\n                getParsingFlags(m)._overflowDayOfYear &&\n                (overflow < YEAR || overflow > DATE)\n            ) {\n                overflow = DATE;\n            }\n            if (getParsingFlags(m)._overflowWeeks && overflow === -1) {\n                overflow = WEEK;\n            }\n            if (getParsingFlags(m)._overflowWeekday && overflow === -1) {\n                overflow = WEEKDAY;\n            }\n\n            getParsingFlags(m).overflow = overflow;\n        }\n\n        return m;\n    }\n\n    // iso 8601 regex\n    // 0000-00-00 0000-W00 or 0000-W00-0 + T + 00 or 00:00 or 00:00:00 or 00:00:00.000 + +00:00 or +0000 or +00)\n    var extendedIsoRegex =\n            /^\\s*((?:[+-]\\d{6}|\\d{4})-(?:\\d\\d-\\d\\d|W\\d\\d-\\d|W\\d\\d|\\d\\d\\d|\\d\\d))(?:(T| )(\\d\\d(?::\\d\\d(?::\\d\\d(?:[.,]\\d+)?)?)?)([+-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/,\n        basicIsoRegex =\n            /^\\s*((?:[+-]\\d{6}|\\d{4})(?:\\d\\d\\d\\d|W\\d\\d\\d|W\\d\\d|\\d\\d\\d|\\d\\d|))(?:(T| )(\\d\\d(?:\\d\\d(?:\\d\\d(?:[.,]\\d+)?)?)?)([+-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/,\n        tzRegex = /Z|[+-]\\d\\d(?::?\\d\\d)?/,\n        isoDates = [\n            ['YYYYYY-MM-DD', /[+-]\\d{6}-\\d\\d-\\d\\d/],\n            ['YYYY-MM-DD', /\\d{4}-\\d\\d-\\d\\d/],\n            ['GGGG-[W]WW-E', /\\d{4}-W\\d\\d-\\d/],\n            ['GGGG-[W]WW', /\\d{4}-W\\d\\d/, false],\n            ['YYYY-DDD', /\\d{4}-\\d{3}/],\n            ['YYYY-MM', /\\d{4}-\\d\\d/, false],\n            ['YYYYYYMMDD', /[+-]\\d{10}/],\n            ['YYYYMMDD', /\\d{8}/],\n            ['GGGG[W]WWE', /\\d{4}W\\d{3}/],\n            ['GGGG[W]WW', /\\d{4}W\\d{2}/, false],\n            ['YYYYDDD', /\\d{7}/],\n            ['YYYYMM', /\\d{6}/, false],\n            ['YYYY', /\\d{4}/, false],\n        ],\n        // iso time formats and regexes\n        isoTimes = [\n            ['HH:mm:ss.SSSS', /\\d\\d:\\d\\d:\\d\\d\\.\\d+/],\n            ['HH:mm:ss,SSSS', /\\d\\d:\\d\\d:\\d\\d,\\d+/],\n            ['HH:mm:ss', /\\d\\d:\\d\\d:\\d\\d/],\n            ['HH:mm', /\\d\\d:\\d\\d/],\n            ['HHmmss.SSSS', /\\d\\d\\d\\d\\d\\d\\.\\d+/],\n            ['HHmmss,SSSS', /\\d\\d\\d\\d\\d\\d,\\d+/],\n            ['HHmmss', /\\d\\d\\d\\d\\d\\d/],\n            ['HHmm', /\\d\\d\\d\\d/],\n            ['HH', /\\d\\d/],\n        ],\n        aspNetJsonRegex = /^\\/?Date\\((-?\\d+)/i,\n        // RFC 2822 regex: For details see https://tools.ietf.org/html/rfc2822#section-3.3\n        rfc2822 =\n            /^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\\s)?(\\d{1,2})\\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\\s(\\d{2,4})\\s(\\d\\d):(\\d\\d)(?::(\\d\\d))?\\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\\d{4}))$/,\n        obsOffsets = {\n            UT: 0,\n            GMT: 0,\n            EDT: -4 * 60,\n            EST: -5 * 60,\n            CDT: -5 * 60,\n            CST: -6 * 60,\n            MDT: -6 * 60,\n            MST: -7 * 60,\n            PDT: -7 * 60,\n            PST: -8 * 60,\n        };\n\n    // date from iso format\n    function configFromISO(config) {\n        var i,\n            l,\n            string = config._i,\n            match = extendedIsoRegex.exec(string) || basicIsoRegex.exec(string),\n            allowTime,\n            dateFormat,\n            timeFormat,\n            tzFormat,\n            isoDatesLen = isoDates.length,\n            isoTimesLen = isoTimes.length;\n\n        if (match) {\n            getParsingFlags(config).iso = true;\n            for (i = 0, l = isoDatesLen; i < l; i++) {\n                if (isoDates[i][1].exec(match[1])) {\n                    dateFormat = isoDates[i][0];\n                    allowTime = isoDates[i][2] !== false;\n                    break;\n                }\n            }\n            if (dateFormat == null) {\n                config._isValid = false;\n                return;\n            }\n            if (match[3]) {\n                for (i = 0, l = isoTimesLen; i < l; i++) {\n                    if (isoTimes[i][1].exec(match[3])) {\n                        // match[2] should be 'T' or space\n                        timeFormat = (match[2] || ' ') + isoTimes[i][0];\n                        break;\n                    }\n                }\n                if (timeFormat == null) {\n                    config._isValid = false;\n                    return;\n                }\n            }\n            if (!allowTime && timeFormat != null) {\n                config._isValid = false;\n                return;\n            }\n            if (match[4]) {\n                if (tzRegex.exec(match[4])) {\n                    tzFormat = 'Z';\n                } else {\n                    config._isValid = false;\n                    return;\n                }\n            }\n            config._f = dateFormat + (timeFormat || '') + (tzFormat || '');\n            configFromStringAndFormat(config);\n        } else {\n            config._isValid = false;\n        }\n    }\n\n    function extractFromRFC2822Strings(\n        yearStr,\n        monthStr,\n        dayStr,\n        hourStr,\n        minuteStr,\n        secondStr\n    ) {\n        var result = [\n            untruncateYear(yearStr),\n            defaultLocaleMonthsShort.indexOf(monthStr),\n            parseInt(dayStr, 10),\n            parseInt(hourStr, 10),\n            parseInt(minuteStr, 10),\n        ];\n\n        if (secondStr) {\n            result.push(parseInt(secondStr, 10));\n        }\n\n        return result;\n    }\n\n    function untruncateYear(yearStr) {\n        var year = parseInt(yearStr, 10);\n        if (year <= 49) {\n            return 2000 + year;\n        } else if (year <= 999) {\n            return 1900 + year;\n        }\n        return year;\n    }\n\n    function preprocessRFC2822(s) {\n        // Remove comments and folding whitespace and replace multiple-spaces with a single space\n        return s\n            .replace(/\\([^()]*\\)|[\\n\\t]/g, ' ')\n            .replace(/(\\s\\s+)/g, ' ')\n            .replace(/^\\s\\s*/, '')\n            .replace(/\\s\\s*$/, '');\n    }\n\n    function checkWeekday(weekdayStr, parsedInput, config) {\n        if (weekdayStr) {\n            // TODO: Replace the vanilla JS Date object with an independent day-of-week check.\n            var weekdayProvided = defaultLocaleWeekdaysShort.indexOf(weekdayStr),\n                weekdayActual = new Date(\n                    parsedInput[0],\n                    parsedInput[1],\n                    parsedInput[2]\n                ).getDay();\n            if (weekdayProvided !== weekdayActual) {\n                getParsingFlags(config).weekdayMismatch = true;\n                config._isValid = false;\n                return false;\n            }\n        }\n        return true;\n    }\n\n    function calculateOffset(obsOffset, militaryOffset, numOffset) {\n        if (obsOffset) {\n            return obsOffsets[obsOffset];\n        } else if (militaryOffset) {\n            // the only allowed military tz is Z\n            return 0;\n        } else {\n            var hm = parseInt(numOffset, 10),\n                m = hm % 100,\n                h = (hm - m) / 100;\n            return h * 60 + m;\n        }\n    }\n\n    // date and time from ref 2822 format\n    function configFromRFC2822(config) {\n        var match = rfc2822.exec(preprocessRFC2822(config._i)),\n            parsedArray;\n        if (match) {\n            parsedArray = extractFromRFC2822Strings(\n                match[4],\n                match[3],\n                match[2],\n                match[5],\n                match[6],\n                match[7]\n            );\n            if (!checkWeekday(match[1], parsedArray, config)) {\n                return;\n            }\n\n            config._a = parsedArray;\n            config._tzm = calculateOffset(match[8], match[9], match[10]);\n\n            config._d = createUTCDate.apply(null, config._a);\n            config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);\n\n            getParsingFlags(config).rfc2822 = true;\n        } else {\n            config._isValid = false;\n        }\n    }\n\n    // date from 1) ASP.NET, 2) ISO, 3) RFC 2822 formats, or 4) optional fallback if parsing isn't strict\n    function configFromString(config) {\n        var matched = aspNetJsonRegex.exec(config._i);\n        if (matched !== null) {\n            config._d = new Date(+matched[1]);\n            return;\n        }\n\n        configFromISO(config);\n        if (config._isValid === false) {\n            delete config._isValid;\n        } else {\n            return;\n        }\n\n        configFromRFC2822(config);\n        if (config._isValid === false) {\n            delete config._isValid;\n        } else {\n            return;\n        }\n\n        if (config._strict) {\n            config._isValid = false;\n        } else {\n            // Final attempt, use Input Fallback\n            hooks.createFromInputFallback(config);\n        }\n    }\n\n    hooks.createFromInputFallback = deprecate(\n        'value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), ' +\n            'which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are ' +\n            'discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.',\n        function (config) {\n            config._d = new Date(config._i + (config._useUTC ? ' UTC' : ''));\n        }\n    );\n\n    // Pick the first defined of two or three arguments.\n    function defaults(a, b, c) {\n        if (a != null) {\n            return a;\n        }\n        if (b != null) {\n            return b;\n        }\n        return c;\n    }\n\n    function currentDateArray(config) {\n        // hooks is actually the exported moment object\n        var nowValue = new Date(hooks.now());\n        if (config._useUTC) {\n            return [\n                nowValue.getUTCFullYear(),\n                nowValue.getUTCMonth(),\n                nowValue.getUTCDate(),\n            ];\n        }\n        return [nowValue.getFullYear(), nowValue.getMonth(), nowValue.getDate()];\n    }\n\n    // convert an array to a date.\n    // the array should mirror the parameters below\n    // note: all values past the year are optional and will default to the lowest possible value.\n    // [year, month, day , hour, minute, second, millisecond]\n    function configFromArray(config) {\n        var i,\n            date,\n            input = [],\n            currentDate,\n            expectedWeekday,\n            yearToUse;\n\n        if (config._d) {\n            return;\n        }\n\n        currentDate = currentDateArray(config);\n\n        //compute day of the year from weeks and weekdays\n        if (config._w && config._a[DATE] == null && config._a[MONTH] == null) {\n            dayOfYearFromWeekInfo(config);\n        }\n\n        //if the day of the year is set, figure out what it is\n        if (config._dayOfYear != null) {\n            yearToUse = defaults(config._a[YEAR], currentDate[YEAR]);\n\n            if (\n                config._dayOfYear > daysInYear(yearToUse) ||\n                config._dayOfYear === 0\n            ) {\n                getParsingFlags(config)._overflowDayOfYear = true;\n            }\n\n            date = createUTCDate(yearToUse, 0, config._dayOfYear);\n            config._a[MONTH] = date.getUTCMonth();\n            config._a[DATE] = date.getUTCDate();\n        }\n\n        // Default to current date.\n        // * if no year, month, day of month are given, default to today\n        // * if day of month is given, default month and year\n        // * if month is given, default only year\n        // * if year is given, don't default anything\n        for (i = 0; i < 3 && config._a[i] == null; ++i) {\n            config._a[i] = input[i] = currentDate[i];\n        }\n\n        // Zero out whatever was not defaulted, including time\n        for (; i < 7; i++) {\n            config._a[i] = input[i] =\n                config._a[i] == null ? (i === 2 ? 1 : 0) : config._a[i];\n        }\n\n        // Check for 24:00:00.000\n        if (\n            config._a[HOUR] === 24 &&\n            config._a[MINUTE] === 0 &&\n            config._a[SECOND] === 0 &&\n            config._a[MILLISECOND] === 0\n        ) {\n            config._nextDay = true;\n            config._a[HOUR] = 0;\n        }\n\n        config._d = (config._useUTC ? createUTCDate : createDate).apply(\n            null,\n            input\n        );\n        expectedWeekday = config._useUTC\n            ? config._d.getUTCDay()\n            : config._d.getDay();\n\n        // Apply timezone offset from input. The actual utcOffset can be changed\n        // with parseZone.\n        if (config._tzm != null) {\n            config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);\n        }\n\n        if (config._nextDay) {\n            config._a[HOUR] = 24;\n        }\n\n        // check for mismatching day of week\n        if (\n            config._w &&\n            typeof config._w.d !== 'undefined' &&\n            config._w.d !== expectedWeekday\n        ) {\n            getParsingFlags(config).weekdayMismatch = true;\n        }\n    }\n\n    function dayOfYearFromWeekInfo(config) {\n        var w, weekYear, week, weekday, dow, doy, temp, weekdayOverflow, curWeek;\n\n        w = config._w;\n        if (w.GG != null || w.W != null || w.E != null) {\n            dow = 1;\n            doy = 4;\n\n            // TODO: We need to take the current isoWeekYear, but that depends on\n            // how we interpret now (local, utc, fixed offset). So create\n            // a now version of current config (take local/utc/offset flags, and\n            // create now).\n            weekYear = defaults(\n                w.GG,\n                config._a[YEAR],\n                weekOfYear(createLocal(), 1, 4).year\n            );\n            week = defaults(w.W, 1);\n            weekday = defaults(w.E, 1);\n            if (weekday < 1 || weekday > 7) {\n                weekdayOverflow = true;\n            }\n        } else {\n            dow = config._locale._week.dow;\n            doy = config._locale._week.doy;\n\n            curWeek = weekOfYear(createLocal(), dow, doy);\n\n            weekYear = defaults(w.gg, config._a[YEAR], curWeek.year);\n\n            // Default to current week.\n            week = defaults(w.w, curWeek.week);\n\n            if (w.d != null) {\n                // weekday -- low day numbers are considered next week\n                weekday = w.d;\n                if (weekday < 0 || weekday > 6) {\n                    weekdayOverflow = true;\n                }\n            } else if (w.e != null) {\n                // local weekday -- counting starts from beginning of week\n                weekday = w.e + dow;\n                if (w.e < 0 || w.e > 6) {\n                    weekdayOverflow = true;\n                }\n            } else {\n                // default to beginning of week\n                weekday = dow;\n            }\n        }\n        if (week < 1 || week > weeksInYear(weekYear, dow, doy)) {\n            getParsingFlags(config)._overflowWeeks = true;\n        } else if (weekdayOverflow != null) {\n            getParsingFlags(config)._overflowWeekday = true;\n        } else {\n            temp = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy);\n            config._a[YEAR] = temp.year;\n            config._dayOfYear = temp.dayOfYear;\n        }\n    }\n\n    // constant that refers to the ISO standard\n    hooks.ISO_8601 = function () {};\n\n    // constant that refers to the RFC 2822 form\n    hooks.RFC_2822 = function () {};\n\n    // date from string and format string\n    function configFromStringAndFormat(config) {\n        // TODO: Move this to another part of the creation flow to prevent circular deps\n        if (config._f === hooks.ISO_8601) {\n            configFromISO(config);\n            return;\n        }\n        if (config._f === hooks.RFC_2822) {\n            configFromRFC2822(config);\n            return;\n        }\n        config._a = [];\n        getParsingFlags(config).empty = true;\n\n        // This array is used to make a Date, either with `new Date` or `Date.UTC`\n        var string = '' + config._i,\n            i,\n            parsedInput,\n            tokens,\n            token,\n            skipped,\n            stringLength = string.length,\n            totalParsedInputLength = 0,\n            era,\n            tokenLen;\n\n        tokens =\n            expandFormat(config._f, config._locale).match(formattingTokens) || [];\n        tokenLen = tokens.length;\n        for (i = 0; i < tokenLen; i++) {\n            token = tokens[i];\n            parsedInput = (string.match(getParseRegexForToken(token, config)) ||\n                [])[0];\n            if (parsedInput) {\n                skipped = string.substr(0, string.indexOf(parsedInput));\n                if (skipped.length > 0) {\n                    getParsingFlags(config).unusedInput.push(skipped);\n                }\n                string = string.slice(\n                    string.indexOf(parsedInput) + parsedInput.length\n                );\n                totalParsedInputLength += parsedInput.length;\n            }\n            // don't parse if it's not a known token\n            if (formatTokenFunctions[token]) {\n                if (parsedInput) {\n                    getParsingFlags(config).empty = false;\n                } else {\n                    getParsingFlags(config).unusedTokens.push(token);\n                }\n                addTimeToArrayFromToken(token, parsedInput, config);\n            } else if (config._strict && !parsedInput) {\n                getParsingFlags(config).unusedTokens.push(token);\n            }\n        }\n\n        // add remaining unparsed input length to the string\n        getParsingFlags(config).charsLeftOver =\n            stringLength - totalParsedInputLength;\n        if (string.length > 0) {\n            getParsingFlags(config).unusedInput.push(string);\n        }\n\n        // clear _12h flag if hour is <= 12\n        if (\n            config._a[HOUR] <= 12 &&\n            getParsingFlags(config).bigHour === true &&\n            config._a[HOUR] > 0\n        ) {\n            getParsingFlags(config).bigHour = undefined;\n        }\n\n        getParsingFlags(config).parsedDateParts = config._a.slice(0);\n        getParsingFlags(config).meridiem = config._meridiem;\n        // handle meridiem\n        config._a[HOUR] = meridiemFixWrap(\n            config._locale,\n            config._a[HOUR],\n            config._meridiem\n        );\n\n        // handle era\n        era = getParsingFlags(config).era;\n        if (era !== null) {\n            config._a[YEAR] = config._locale.erasConvertYear(era, config._a[YEAR]);\n        }\n\n        configFromArray(config);\n        checkOverflow(config);\n    }\n\n    function meridiemFixWrap(locale, hour, meridiem) {\n        var isPm;\n\n        if (meridiem == null) {\n            // nothing to do\n            return hour;\n        }\n        if (locale.meridiemHour != null) {\n            return locale.meridiemHour(hour, meridiem);\n        } else if (locale.isPM != null) {\n            // Fallback\n            isPm = locale.isPM(meridiem);\n            if (isPm && hour < 12) {\n                hour += 12;\n            }\n            if (!isPm && hour === 12) {\n                hour = 0;\n            }\n            return hour;\n        } else {\n            // this is not supposed to happen\n            return hour;\n        }\n    }\n\n    // date from string and array of format strings\n    function configFromStringAndArray(config) {\n        var tempConfig,\n            bestMoment,\n            scoreToBeat,\n            i,\n            currentScore,\n            validFormatFound,\n            bestFormatIsValid = false,\n            configfLen = config._f.length;\n\n        if (configfLen === 0) {\n            getParsingFlags(config).invalidFormat = true;\n            config._d = new Date(NaN);\n            return;\n        }\n\n        for (i = 0; i < configfLen; i++) {\n            currentScore = 0;\n            validFormatFound = false;\n            tempConfig = copyConfig({}, config);\n            if (config._useUTC != null) {\n                tempConfig._useUTC = config._useUTC;\n            }\n            tempConfig._f = config._f[i];\n            configFromStringAndFormat(tempConfig);\n\n            if (isValid(tempConfig)) {\n                validFormatFound = true;\n            }\n\n            // if there is any input that was not parsed add a penalty for that format\n            currentScore += getParsingFlags(tempConfig).charsLeftOver;\n\n            //or tokens\n            currentScore += getParsingFlags(tempConfig).unusedTokens.length * 10;\n\n            getParsingFlags(tempConfig).score = currentScore;\n\n            if (!bestFormatIsValid) {\n                if (\n                    scoreToBeat == null ||\n                    currentScore < scoreToBeat ||\n                    validFormatFound\n                ) {\n                    scoreToBeat = currentScore;\n                    bestMoment = tempConfig;\n                    if (validFormatFound) {\n                        bestFormatIsValid = true;\n                    }\n                }\n            } else {\n                if (currentScore < scoreToBeat) {\n                    scoreToBeat = currentScore;\n                    bestMoment = tempConfig;\n                }\n            }\n        }\n\n        extend(config, bestMoment || tempConfig);\n    }\n\n    function configFromObject(config) {\n        if (config._d) {\n            return;\n        }\n\n        var i = normalizeObjectUnits(config._i),\n            dayOrDate = i.day === undefined ? i.date : i.day;\n        config._a = map(\n            [i.year, i.month, dayOrDate, i.hour, i.minute, i.second, i.millisecond],\n            function (obj) {\n                return obj && parseInt(obj, 10);\n            }\n        );\n\n        configFromArray(config);\n    }\n\n    function createFromConfig(config) {\n        var res = new Moment(checkOverflow(prepareConfig(config)));\n        if (res._nextDay) {\n            // Adding is smart enough around DST\n            res.add(1, 'd');\n            res._nextDay = undefined;\n        }\n\n        return res;\n    }\n\n    function prepareConfig(config) {\n        var input = config._i,\n            format = config._f;\n\n        config._locale = config._locale || getLocale(config._l);\n\n        if (input === null || (format === undefined && input === '')) {\n            return createInvalid({ nullInput: true });\n        }\n\n        if (typeof input === 'string') {\n            config._i = input = config._locale.preparse(input);\n        }\n\n        if (isMoment(input)) {\n            return new Moment(checkOverflow(input));\n        } else if (isDate(input)) {\n            config._d = input;\n        } else if (isArray(format)) {\n            configFromStringAndArray(config);\n        } else if (format) {\n            configFromStringAndFormat(config);\n        } else {\n            configFromInput(config);\n        }\n\n        if (!isValid(config)) {\n            config._d = null;\n        }\n\n        return config;\n    }\n\n    function configFromInput(config) {\n        var input = config._i;\n        if (isUndefined(input)) {\n            config._d = new Date(hooks.now());\n        } else if (isDate(input)) {\n            config._d = new Date(input.valueOf());\n        } else if (typeof input === 'string') {\n            configFromString(config);\n        } else if (isArray(input)) {\n            config._a = map(input.slice(0), function (obj) {\n                return parseInt(obj, 10);\n            });\n            configFromArray(config);\n        } else if (isObject(input)) {\n            configFromObject(config);\n        } else if (isNumber(input)) {\n            // from milliseconds\n            config._d = new Date(input);\n        } else {\n            hooks.createFromInputFallback(config);\n        }\n    }\n\n    function createLocalOrUTC(input, format, locale, strict, isUTC) {\n        var c = {};\n\n        if (format === true || format === false) {\n            strict = format;\n            format = undefined;\n        }\n\n        if (locale === true || locale === false) {\n            strict = locale;\n            locale = undefined;\n        }\n\n        if (\n            (isObject(input) && isObjectEmpty(input)) ||\n            (isArray(input) && input.length === 0)\n        ) {\n            input = undefined;\n        }\n        // object construction must be done this way.\n        // https://github.com/moment/moment/issues/1423\n        c._isAMomentObject = true;\n        c._useUTC = c._isUTC = isUTC;\n        c._l = locale;\n        c._i = input;\n        c._f = format;\n        c._strict = strict;\n\n        return createFromConfig(c);\n    }\n\n    function createLocal(input, format, locale, strict) {\n        return createLocalOrUTC(input, format, locale, strict, false);\n    }\n\n    var prototypeMin = deprecate(\n            'moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/',\n            function () {\n                var other = createLocal.apply(null, arguments);\n                if (this.isValid() && other.isValid()) {\n                    return other < this ? this : other;\n                } else {\n                    return createInvalid();\n                }\n            }\n        ),\n        prototypeMax = deprecate(\n            'moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/',\n            function () {\n                var other = createLocal.apply(null, arguments);\n                if (this.isValid() && other.isValid()) {\n                    return other > this ? this : other;\n                } else {\n                    return createInvalid();\n                }\n            }\n        );\n\n    // Pick a moment m from moments so that m[fn](other) is true for all\n    // other. This relies on the function fn to be transitive.\n    //\n    // moments should either be an array of moment objects or an array, whose\n    // first element is an array of moment objects.\n    function pickBy(fn, moments) {\n        var res, i;\n        if (moments.length === 1 && isArray(moments[0])) {\n            moments = moments[0];\n        }\n        if (!moments.length) {\n            return createLocal();\n        }\n        res = moments[0];\n        for (i = 1; i < moments.length; ++i) {\n            if (!moments[i].isValid() || moments[i][fn](res)) {\n                res = moments[i];\n            }\n        }\n        return res;\n    }\n\n    // TODO: Use [].sort instead?\n    function min() {\n        var args = [].slice.call(arguments, 0);\n\n        return pickBy('isBefore', args);\n    }\n\n    function max() {\n        var args = [].slice.call(arguments, 0);\n\n        return pickBy('isAfter', args);\n    }\n\n    var now = function () {\n        return Date.now ? Date.now() : +new Date();\n    };\n\n    var ordering = [\n        'year',\n        'quarter',\n        'month',\n        'week',\n        'day',\n        'hour',\n        'minute',\n        'second',\n        'millisecond',\n    ];\n\n    function isDurationValid(m) {\n        var key,\n            unitHasDecimal = false,\n            i,\n            orderLen = ordering.length;\n        for (key in m) {\n            if (\n                hasOwnProp(m, key) &&\n                !(\n                    indexOf.call(ordering, key) !== -1 &&\n                    (m[key] == null || !isNaN(m[key]))\n                )\n            ) {\n                return false;\n            }\n        }\n\n        for (i = 0; i < orderLen; ++i) {\n            if (m[ordering[i]]) {\n                if (unitHasDecimal) {\n                    return false; // only allow non-integers for smallest unit\n                }\n                if (parseFloat(m[ordering[i]]) !== toInt(m[ordering[i]])) {\n                    unitHasDecimal = true;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    function isValid$1() {\n        return this._isValid;\n    }\n\n    function createInvalid$1() {\n        return createDuration(NaN);\n    }\n\n    function Duration(duration) {\n        var normalizedInput = normalizeObjectUnits(duration),\n            years = normalizedInput.year || 0,\n            quarters = normalizedInput.quarter || 0,\n            months = normalizedInput.month || 0,\n            weeks = normalizedInput.week || normalizedInput.isoWeek || 0,\n            days = normalizedInput.day || 0,\n            hours = normalizedInput.hour || 0,\n            minutes = normalizedInput.minute || 0,\n            seconds = normalizedInput.second || 0,\n            milliseconds = normalizedInput.millisecond || 0;\n\n        this._isValid = isDurationValid(normalizedInput);\n\n        // representation for dateAddRemove\n        this._milliseconds =\n            +milliseconds +\n            seconds * 1e3 + // 1000\n            minutes * 6e4 + // 1000 * 60\n            hours * 1000 * 60 * 60; //using 1000 * 60 * 60 instead of 36e5 to avoid floating point rounding errors https://github.com/moment/moment/issues/2978\n        // Because of dateAddRemove treats 24 hours as different from a\n        // day when working around DST, we need to store them separately\n        this._days = +days + weeks * 7;\n        // It is impossible to translate months into days without knowing\n        // which months you are are talking about, so we have to store\n        // it separately.\n        this._months = +months + quarters * 3 + years * 12;\n\n        this._data = {};\n\n        this._locale = getLocale();\n\n        this._bubble();\n    }\n\n    function isDuration(obj) {\n        return obj instanceof Duration;\n    }\n\n    function absRound(number) {\n        if (number < 0) {\n            return Math.round(-1 * number) * -1;\n        } else {\n            return Math.round(number);\n        }\n    }\n\n    // compare two arrays, return the number of differences\n    function compareArrays(array1, array2, dontConvert) {\n        var len = Math.min(array1.length, array2.length),\n            lengthDiff = Math.abs(array1.length - array2.length),\n            diffs = 0,\n            i;\n        for (i = 0; i < len; i++) {\n            if (\n                (dontConvert && array1[i] !== array2[i]) ||\n                (!dontConvert && toInt(array1[i]) !== toInt(array2[i]))\n            ) {\n                diffs++;\n            }\n        }\n        return diffs + lengthDiff;\n    }\n\n    // FORMATTING\n\n    function offset(token, separator) {\n        addFormatToken(token, 0, 0, function () {\n            var offset = this.utcOffset(),\n                sign = '+';\n            if (offset < 0) {\n                offset = -offset;\n                sign = '-';\n            }\n            return (\n                sign +\n                zeroFill(~~(offset / 60), 2) +\n                separator +\n                zeroFill(~~offset % 60, 2)\n            );\n        });\n    }\n\n    offset('Z', ':');\n    offset('ZZ', '');\n\n    // PARSING\n\n    addRegexToken('Z', matchShortOffset);\n    addRegexToken('ZZ', matchShortOffset);\n    addParseToken(['Z', 'ZZ'], function (input, array, config) {\n        config._useUTC = true;\n        config._tzm = offsetFromString(matchShortOffset, input);\n    });\n\n    // HELPERS\n\n    // timezone chunker\n    // '+10:00' > ['10',  '00']\n    // '-1530'  > ['-15', '30']\n    var chunkOffset = /([\\+\\-]|\\d\\d)/gi;\n\n    function offsetFromString(matcher, string) {\n        var matches = (string || '').match(matcher),\n            chunk,\n            parts,\n            minutes;\n\n        if (matches === null) {\n            return null;\n        }\n\n        chunk = matches[matches.length - 1] || [];\n        parts = (chunk + '').match(chunkOffset) || ['-', 0, 0];\n        minutes = +(parts[1] * 60) + toInt(parts[2]);\n\n        return minutes === 0 ? 0 : parts[0] === '+' ? minutes : -minutes;\n    }\n\n    // Return a moment from input, that is local/utc/zone equivalent to model.\n    function cloneWithOffset(input, model) {\n        var res, diff;\n        if (model._isUTC) {\n            res = model.clone();\n            diff =\n                (isMoment(input) || isDate(input)\n                    ? input.valueOf()\n                    : createLocal(input).valueOf()) - res.valueOf();\n            // Use low-level api, because this fn is low-level api.\n            res._d.setTime(res._d.valueOf() + diff);\n            hooks.updateOffset(res, false);\n            return res;\n        } else {\n            return createLocal(input).local();\n        }\n    }\n\n    function getDateOffset(m) {\n        // On Firefox.24 Date#getTimezoneOffset returns a floating point.\n        // https://github.com/moment/moment/pull/1871\n        return -Math.round(m._d.getTimezoneOffset());\n    }\n\n    // HOOKS\n\n    // This function will be called whenever a moment is mutated.\n    // It is intended to keep the offset in sync with the timezone.\n    hooks.updateOffset = function () {};\n\n    // MOMENTS\n\n    // keepLocalTime = true means only change the timezone, without\n    // affecting the local hour. So 5:31:26 +0300 --[utcOffset(2, true)]-->\n    // 5:31:26 +0200 It is possible that 5:31:26 doesn't exist with offset\n    // +0200, so we adjust the time as needed, to be valid.\n    //\n    // Keeping the time actually adds/subtracts (one hour)\n    // from the actual represented time. That is why we call updateOffset\n    // a second time. In case it wants us to change the offset again\n    // _changeInProgress == true case, then we have to adjust, because\n    // there is no such time in the given timezone.\n    function getSetOffset(input, keepLocalTime, keepMinutes) {\n        var offset = this._offset || 0,\n            localAdjust;\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n        if (input != null) {\n            if (typeof input === 'string') {\n                input = offsetFromString(matchShortOffset, input);\n                if (input === null) {\n                    return this;\n                }\n            } else if (Math.abs(input) < 16 && !keepMinutes) {\n                input = input * 60;\n            }\n            if (!this._isUTC && keepLocalTime) {\n                localAdjust = getDateOffset(this);\n            }\n            this._offset = input;\n            this._isUTC = true;\n            if (localAdjust != null) {\n                this.add(localAdjust, 'm');\n            }\n            if (offset !== input) {\n                if (!keepLocalTime || this._changeInProgress) {\n                    addSubtract(\n                        this,\n                        createDuration(input - offset, 'm'),\n                        1,\n                        false\n                    );\n                } else if (!this._changeInProgress) {\n                    this._changeInProgress = true;\n                    hooks.updateOffset(this, true);\n                    this._changeInProgress = null;\n                }\n            }\n            return this;\n        } else {\n            return this._isUTC ? offset : getDateOffset(this);\n        }\n    }\n\n    function getSetZone(input, keepLocalTime) {\n        if (input != null) {\n            if (typeof input !== 'string') {\n                input = -input;\n            }\n\n            this.utcOffset(input, keepLocalTime);\n\n            return this;\n        } else {\n            return -this.utcOffset();\n        }\n    }\n\n    function setOffsetToUTC(keepLocalTime) {\n        return this.utcOffset(0, keepLocalTime);\n    }\n\n    function setOffsetToLocal(keepLocalTime) {\n        if (this._isUTC) {\n            this.utcOffset(0, keepLocalTime);\n            this._isUTC = false;\n\n            if (keepLocalTime) {\n                this.subtract(getDateOffset(this), 'm');\n            }\n        }\n        return this;\n    }\n\n    function setOffsetToParsedOffset() {\n        if (this._tzm != null) {\n            this.utcOffset(this._tzm, false, true);\n        } else if (typeof this._i === 'string') {\n            var tZone = offsetFromString(matchOffset, this._i);\n            if (tZone != null) {\n                this.utcOffset(tZone);\n            } else {\n                this.utcOffset(0, true);\n            }\n        }\n        return this;\n    }\n\n    function hasAlignedHourOffset(input) {\n        if (!this.isValid()) {\n            return false;\n        }\n        input = input ? createLocal(input).utcOffset() : 0;\n\n        return (this.utcOffset() - input) % 60 === 0;\n    }\n\n    function isDaylightSavingTime() {\n        return (\n            this.utcOffset() > this.clone().month(0).utcOffset() ||\n            this.utcOffset() > this.clone().month(5).utcOffset()\n        );\n    }\n\n    function isDaylightSavingTimeShifted() {\n        if (!isUndefined(this._isDSTShifted)) {\n            return this._isDSTShifted;\n        }\n\n        var c = {},\n            other;\n\n        copyConfig(c, this);\n        c = prepareConfig(c);\n\n        if (c._a) {\n            other = c._isUTC ? createUTC(c._a) : createLocal(c._a);\n            this._isDSTShifted =\n                this.isValid() && compareArrays(c._a, other.toArray()) > 0;\n        } else {\n            this._isDSTShifted = false;\n        }\n\n        return this._isDSTShifted;\n    }\n\n    function isLocal() {\n        return this.isValid() ? !this._isUTC : false;\n    }\n\n    function isUtcOffset() {\n        return this.isValid() ? this._isUTC : false;\n    }\n\n    function isUtc() {\n        return this.isValid() ? this._isUTC && this._offset === 0 : false;\n    }\n\n    // ASP.NET json date format regex\n    var aspNetRegex = /^(-|\\+)?(?:(\\d*)[. ])?(\\d+):(\\d+)(?::(\\d+)(\\.\\d*)?)?$/,\n        // from http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html\n        // somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere\n        // and further modified to allow for strings containing both week and day\n        isoRegex =\n            /^(-|\\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;\n\n    function createDuration(input, key) {\n        var duration = input,\n            // matching against regexp is expensive, do it on demand\n            match = null,\n            sign,\n            ret,\n            diffRes;\n\n        if (isDuration(input)) {\n            duration = {\n                ms: input._milliseconds,\n                d: input._days,\n                M: input._months,\n            };\n        } else if (isNumber(input) || !isNaN(+input)) {\n            duration = {};\n            if (key) {\n                duration[key] = +input;\n            } else {\n                duration.milliseconds = +input;\n            }\n        } else if ((match = aspNetRegex.exec(input))) {\n            sign = match[1] === '-' ? -1 : 1;\n            duration = {\n                y: 0,\n                d: toInt(match[DATE]) * sign,\n                h: toInt(match[HOUR]) * sign,\n                m: toInt(match[MINUTE]) * sign,\n                s: toInt(match[SECOND]) * sign,\n                ms: toInt(absRound(match[MILLISECOND] * 1000)) * sign, // the millisecond decimal point is included in the match\n            };\n        } else if ((match = isoRegex.exec(input))) {\n            sign = match[1] === '-' ? -1 : 1;\n            duration = {\n                y: parseIso(match[2], sign),\n                M: parseIso(match[3], sign),\n                w: parseIso(match[4], sign),\n                d: parseIso(match[5], sign),\n                h: parseIso(match[6], sign),\n                m: parseIso(match[7], sign),\n                s: parseIso(match[8], sign),\n            };\n        } else if (duration == null) {\n            // checks for null or undefined\n            duration = {};\n        } else if (\n            typeof duration === 'object' &&\n            ('from' in duration || 'to' in duration)\n        ) {\n            diffRes = momentsDifference(\n                createLocal(duration.from),\n                createLocal(duration.to)\n            );\n\n            duration = {};\n            duration.ms = diffRes.milliseconds;\n            duration.M = diffRes.months;\n        }\n\n        ret = new Duration(duration);\n\n        if (isDuration(input) && hasOwnProp(input, '_locale')) {\n            ret._locale = input._locale;\n        }\n\n        if (isDuration(input) && hasOwnProp(input, '_isValid')) {\n            ret._isValid = input._isValid;\n        }\n\n        return ret;\n    }\n\n    createDuration.fn = Duration.prototype;\n    createDuration.invalid = createInvalid$1;\n\n    function parseIso(inp, sign) {\n        // We'd normally use ~~inp for this, but unfortunately it also\n        // converts floats to ints.\n        // inp may be undefined, so careful calling replace on it.\n        var res = inp && parseFloat(inp.replace(',', '.'));\n        // apply sign while we're at it\n        return (isNaN(res) ? 0 : res) * sign;\n    }\n\n    function positiveMomentsDifference(base, other) {\n        var res = {};\n\n        res.months =\n            other.month() - base.month() + (other.year() - base.year()) * 12;\n        if (base.clone().add(res.months, 'M').isAfter(other)) {\n            --res.months;\n        }\n\n        res.milliseconds = +other - +base.clone().add(res.months, 'M');\n\n        return res;\n    }\n\n    function momentsDifference(base, other) {\n        var res;\n        if (!(base.isValid() && other.isValid())) {\n            return { milliseconds: 0, months: 0 };\n        }\n\n        other = cloneWithOffset(other, base);\n        if (base.isBefore(other)) {\n            res = positiveMomentsDifference(base, other);\n        } else {\n            res = positiveMomentsDifference(other, base);\n            res.milliseconds = -res.milliseconds;\n            res.months = -res.months;\n        }\n\n        return res;\n    }\n\n    // TODO: remove 'name' arg after deprecation is removed\n    function createAdder(direction, name) {\n        return function (val, period) {\n            var dur, tmp;\n            //invert the arguments, but complain about it\n            if (period !== null && !isNaN(+period)) {\n                deprecateSimple(\n                    name,\n                    'moment().' +\n                        name +\n                        '(period, number) is deprecated. Please use moment().' +\n                        name +\n                        '(number, period). ' +\n                        'See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.'\n                );\n                tmp = val;\n                val = period;\n                period = tmp;\n            }\n\n            dur = createDuration(val, period);\n            addSubtract(this, dur, direction);\n            return this;\n        };\n    }\n\n    function addSubtract(mom, duration, isAdding, updateOffset) {\n        var milliseconds = duration._milliseconds,\n            days = absRound(duration._days),\n            months = absRound(duration._months);\n\n        if (!mom.isValid()) {\n            // No op\n            return;\n        }\n\n        updateOffset = updateOffset == null ? true : updateOffset;\n\n        if (months) {\n            setMonth(mom, get(mom, 'Month') + months * isAdding);\n        }\n        if (days) {\n            set$1(mom, 'Date', get(mom, 'Date') + days * isAdding);\n        }\n        if (milliseconds) {\n            mom._d.setTime(mom._d.valueOf() + milliseconds * isAdding);\n        }\n        if (updateOffset) {\n            hooks.updateOffset(mom, days || months);\n        }\n    }\n\n    var add = createAdder(1, 'add'),\n        subtract = createAdder(-1, 'subtract');\n\n    function isString(input) {\n        return typeof input === 'string' || input instanceof String;\n    }\n\n    // type MomentInput = Moment | Date | string | number | (number | string)[] | MomentInputObject | void; // null | undefined\n    function isMomentInput(input) {\n        return (\n            isMoment(input) ||\n            isDate(input) ||\n            isString(input) ||\n            isNumber(input) ||\n            isNumberOrStringArray(input) ||\n            isMomentInputObject(input) ||\n            input === null ||\n            input === undefined\n        );\n    }\n\n    function isMomentInputObject(input) {\n        var objectTest = isObject(input) && !isObjectEmpty(input),\n            propertyTest = false,\n            properties = [\n                'years',\n                'year',\n                'y',\n                'months',\n                'month',\n                'M',\n                'days',\n                'day',\n                'd',\n                'dates',\n                'date',\n                'D',\n                'hours',\n                'hour',\n                'h',\n                'minutes',\n                'minute',\n                'm',\n                'seconds',\n                'second',\n                's',\n                'milliseconds',\n                'millisecond',\n                'ms',\n            ],\n            i,\n            property,\n            propertyLen = properties.length;\n\n        for (i = 0; i < propertyLen; i += 1) {\n            property = properties[i];\n            propertyTest = propertyTest || hasOwnProp(input, property);\n        }\n\n        return objectTest && propertyTest;\n    }\n\n    function isNumberOrStringArray(input) {\n        var arrayTest = isArray(input),\n            dataTypeTest = false;\n        if (arrayTest) {\n            dataTypeTest =\n                input.filter(function (item) {\n                    return !isNumber(item) && isString(input);\n                }).length === 0;\n        }\n        return arrayTest && dataTypeTest;\n    }\n\n    function isCalendarSpec(input) {\n        var objectTest = isObject(input) && !isObjectEmpty(input),\n            propertyTest = false,\n            properties = [\n                'sameDay',\n                'nextDay',\n                'lastDay',\n                'nextWeek',\n                'lastWeek',\n                'sameElse',\n            ],\n            i,\n            property;\n\n        for (i = 0; i < properties.length; i += 1) {\n            property = properties[i];\n            propertyTest = propertyTest || hasOwnProp(input, property);\n        }\n\n        return objectTest && propertyTest;\n    }\n\n    function getCalendarFormat(myMoment, now) {\n        var diff = myMoment.diff(now, 'days', true);\n        return diff < -6\n            ? 'sameElse'\n            : diff < -1\n            ? 'lastWeek'\n            : diff < 0\n            ? 'lastDay'\n            : diff < 1\n            ? 'sameDay'\n            : diff < 2\n            ? 'nextDay'\n            : diff < 7\n            ? 'nextWeek'\n            : 'sameElse';\n    }\n\n    function calendar$1(time, formats) {\n        // Support for single parameter, formats only overload to the calendar function\n        if (arguments.length === 1) {\n            if (!arguments[0]) {\n                time = undefined;\n                formats = undefined;\n            } else if (isMomentInput(arguments[0])) {\n                time = arguments[0];\n                formats = undefined;\n            } else if (isCalendarSpec(arguments[0])) {\n                formats = arguments[0];\n                time = undefined;\n            }\n        }\n        // We want to compare the start of today, vs this.\n        // Getting start-of-today depends on whether we're local/utc/offset or not.\n        var now = time || createLocal(),\n            sod = cloneWithOffset(now, this).startOf('day'),\n            format = hooks.calendarFormat(this, sod) || 'sameElse',\n            output =\n                formats &&\n                (isFunction(formats[format])\n                    ? formats[format].call(this, now)\n                    : formats[format]);\n\n        return this.format(\n            output || this.localeData().calendar(format, this, createLocal(now))\n        );\n    }\n\n    function clone() {\n        return new Moment(this);\n    }\n\n    function isAfter(input, units) {\n        var localInput = isMoment(input) ? input : createLocal(input);\n        if (!(this.isValid() && localInput.isValid())) {\n            return false;\n        }\n        units = normalizeUnits(units) || 'millisecond';\n        if (units === 'millisecond') {\n            return this.valueOf() > localInput.valueOf();\n        } else {\n            return localInput.valueOf() < this.clone().startOf(units).valueOf();\n        }\n    }\n\n    function isBefore(input, units) {\n        var localInput = isMoment(input) ? input : createLocal(input);\n        if (!(this.isValid() && localInput.isValid())) {\n            return false;\n        }\n        units = normalizeUnits(units) || 'millisecond';\n        if (units === 'millisecond') {\n            return this.valueOf() < localInput.valueOf();\n        } else {\n            return this.clone().endOf(units).valueOf() < localInput.valueOf();\n        }\n    }\n\n    function isBetween(from, to, units, inclusivity) {\n        var localFrom = isMoment(from) ? from : createLocal(from),\n            localTo = isMoment(to) ? to : createLocal(to);\n        if (!(this.isValid() && localFrom.isValid() && localTo.isValid())) {\n            return false;\n        }\n        inclusivity = inclusivity || '()';\n        return (\n            (inclusivity[0] === '('\n                ? this.isAfter(localFrom, units)\n                : !this.isBefore(localFrom, units)) &&\n            (inclusivity[1] === ')'\n                ? this.isBefore(localTo, units)\n                : !this.isAfter(localTo, units))\n        );\n    }\n\n    function isSame(input, units) {\n        var localInput = isMoment(input) ? input : createLocal(input),\n            inputMs;\n        if (!(this.isValid() && localInput.isValid())) {\n            return false;\n        }\n        units = normalizeUnits(units) || 'millisecond';\n        if (units === 'millisecond') {\n            return this.valueOf() === localInput.valueOf();\n        } else {\n            inputMs = localInput.valueOf();\n            return (\n                this.clone().startOf(units).valueOf() <= inputMs &&\n                inputMs <= this.clone().endOf(units).valueOf()\n            );\n        }\n    }\n\n    function isSameOrAfter(input, units) {\n        return this.isSame(input, units) || this.isAfter(input, units);\n    }\n\n    function isSameOrBefore(input, units) {\n        return this.isSame(input, units) || this.isBefore(input, units);\n    }\n\n    function diff(input, units, asFloat) {\n        var that, zoneDelta, output;\n\n        if (!this.isValid()) {\n            return NaN;\n        }\n\n        that = cloneWithOffset(input, this);\n\n        if (!that.isValid()) {\n            return NaN;\n        }\n\n        zoneDelta = (that.utcOffset() - this.utcOffset()) * 6e4;\n\n        units = normalizeUnits(units);\n\n        switch (units) {\n            case 'year':\n                output = monthDiff(this, that) / 12;\n                break;\n            case 'month':\n                output = monthDiff(this, that);\n                break;\n            case 'quarter':\n                output = monthDiff(this, that) / 3;\n                break;\n            case 'second':\n                output = (this - that) / 1e3;\n                break; // 1000\n            case 'minute':\n                output = (this - that) / 6e4;\n                break; // 1000 * 60\n            case 'hour':\n                output = (this - that) / 36e5;\n                break; // 1000 * 60 * 60\n            case 'day':\n                output = (this - that - zoneDelta) / 864e5;\n                break; // 1000 * 60 * 60 * 24, negate dst\n            case 'week':\n                output = (this - that - zoneDelta) / 6048e5;\n                break; // 1000 * 60 * 60 * 24 * 7, negate dst\n            default:\n                output = this - that;\n        }\n\n        return asFloat ? output : absFloor(output);\n    }\n\n    function monthDiff(a, b) {\n        if (a.date() < b.date()) {\n            // end-of-month calculations work correct when the start month has more\n            // days than the end month.\n            return -monthDiff(b, a);\n        }\n        // difference in months\n        var wholeMonthDiff = (b.year() - a.year()) * 12 + (b.month() - a.month()),\n            // b is in (anchor - 1 month, anchor + 1 month)\n            anchor = a.clone().add(wholeMonthDiff, 'months'),\n            anchor2,\n            adjust;\n\n        if (b - anchor < 0) {\n            anchor2 = a.clone().add(wholeMonthDiff - 1, 'months');\n            // linear across the month\n            adjust = (b - anchor) / (anchor - anchor2);\n        } else {\n            anchor2 = a.clone().add(wholeMonthDiff + 1, 'months');\n            // linear across the month\n            adjust = (b - anchor) / (anchor2 - anchor);\n        }\n\n        //check for negative zero, return zero if negative zero\n        return -(wholeMonthDiff + adjust) || 0;\n    }\n\n    hooks.defaultFormat = 'YYYY-MM-DDTHH:mm:ssZ';\n    hooks.defaultFormatUtc = 'YYYY-MM-DDTHH:mm:ss[Z]';\n\n    function toString() {\n        return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');\n    }\n\n    function toISOString(keepOffset) {\n        if (!this.isValid()) {\n            return null;\n        }\n        var utc = keepOffset !== true,\n            m = utc ? this.clone().utc() : this;\n        if (m.year() < 0 || m.year() > 9999) {\n            return formatMoment(\n                m,\n                utc\n                    ? 'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]'\n                    : 'YYYYYY-MM-DD[T]HH:mm:ss.SSSZ'\n            );\n        }\n        if (isFunction(Date.prototype.toISOString)) {\n            // native implementation is ~50x faster, use it when we can\n            if (utc) {\n                return this.toDate().toISOString();\n            } else {\n                return new Date(this.valueOf() + this.utcOffset() * 60 * 1000)\n                    .toISOString()\n                    .replace('Z', formatMoment(m, 'Z'));\n            }\n        }\n        return formatMoment(\n            m,\n            utc ? 'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]' : 'YYYY-MM-DD[T]HH:mm:ss.SSSZ'\n        );\n    }\n\n    /**\n     * Return a human readable representation of a moment that can\n     * also be evaluated to get a new moment which is the same\n     *\n     * @link https://nodejs.org/dist/latest/docs/api/util.html#util_custom_inspect_function_on_objects\n     */\n    function inspect() {\n        if (!this.isValid()) {\n            return 'moment.invalid(/* ' + this._i + ' */)';\n        }\n        var func = 'moment',\n            zone = '',\n            prefix,\n            year,\n            datetime,\n            suffix;\n        if (!this.isLocal()) {\n            func = this.utcOffset() === 0 ? 'moment.utc' : 'moment.parseZone';\n            zone = 'Z';\n        }\n        prefix = '[' + func + '(\"]';\n        year = 0 <= this.year() && this.year() <= 9999 ? 'YYYY' : 'YYYYYY';\n        datetime = '-MM-DD[T]HH:mm:ss.SSS';\n        suffix = zone + '[\")]';\n\n        return this.format(prefix + year + datetime + suffix);\n    }\n\n    function format(inputString) {\n        if (!inputString) {\n            inputString = this.isUtc()\n                ? hooks.defaultFormatUtc\n                : hooks.defaultFormat;\n        }\n        var output = formatMoment(this, inputString);\n        return this.localeData().postformat(output);\n    }\n\n    function from(time, withoutSuffix) {\n        if (\n            this.isValid() &&\n            ((isMoment(time) && time.isValid()) || createLocal(time).isValid())\n        ) {\n            return createDuration({ to: this, from: time })\n                .locale(this.locale())\n                .humanize(!withoutSuffix);\n        } else {\n            return this.localeData().invalidDate();\n        }\n    }\n\n    function fromNow(withoutSuffix) {\n        return this.from(createLocal(), withoutSuffix);\n    }\n\n    function to(time, withoutSuffix) {\n        if (\n            this.isValid() &&\n            ((isMoment(time) && time.isValid()) || createLocal(time).isValid())\n        ) {\n            return createDuration({ from: this, to: time })\n                .locale(this.locale())\n                .humanize(!withoutSuffix);\n        } else {\n            return this.localeData().invalidDate();\n        }\n    }\n\n    function toNow(withoutSuffix) {\n        return this.to(createLocal(), withoutSuffix);\n    }\n\n    // If passed a locale key, it will set the locale for this\n    // instance.  Otherwise, it will return the locale configuration\n    // variables for this instance.\n    function locale(key) {\n        var newLocaleData;\n\n        if (key === undefined) {\n            return this._locale._abbr;\n        } else {\n            newLocaleData = getLocale(key);\n            if (newLocaleData != null) {\n                this._locale = newLocaleData;\n            }\n            return this;\n        }\n    }\n\n    var lang = deprecate(\n        'moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',\n        function (key) {\n            if (key === undefined) {\n                return this.localeData();\n            } else {\n                return this.locale(key);\n            }\n        }\n    );\n\n    function localeData() {\n        return this._locale;\n    }\n\n    var MS_PER_SECOND = 1000,\n        MS_PER_MINUTE = 60 * MS_PER_SECOND,\n        MS_PER_HOUR = 60 * MS_PER_MINUTE,\n        MS_PER_400_YEARS = (365 * 400 + 97) * 24 * MS_PER_HOUR;\n\n    // actual modulo - handles negative numbers (for dates before 1970):\n    function mod$1(dividend, divisor) {\n        return ((dividend % divisor) + divisor) % divisor;\n    }\n\n    function localStartOfDate(y, m, d) {\n        // the date constructor remaps years 0-99 to 1900-1999\n        if (y < 100 && y >= 0) {\n            // preserve leap years using a full 400 year cycle, then reset\n            return new Date(y + 400, m, d) - MS_PER_400_YEARS;\n        } else {\n            return new Date(y, m, d).valueOf();\n        }\n    }\n\n    function utcStartOfDate(y, m, d) {\n        // Date.UTC remaps years 0-99 to 1900-1999\n        if (y < 100 && y >= 0) {\n            // preserve leap years using a full 400 year cycle, then reset\n            return Date.UTC(y + 400, m, d) - MS_PER_400_YEARS;\n        } else {\n            return Date.UTC(y, m, d);\n        }\n    }\n\n    function startOf(units) {\n        var time, startOfDate;\n        units = normalizeUnits(units);\n        if (units === undefined || units === 'millisecond' || !this.isValid()) {\n            return this;\n        }\n\n        startOfDate = this._isUTC ? utcStartOfDate : localStartOfDate;\n\n        switch (units) {\n            case 'year':\n                time = startOfDate(this.year(), 0, 1);\n                break;\n            case 'quarter':\n                time = startOfDate(\n                    this.year(),\n                    this.month() - (this.month() % 3),\n                    1\n                );\n                break;\n            case 'month':\n                time = startOfDate(this.year(), this.month(), 1);\n                break;\n            case 'week':\n                time = startOfDate(\n                    this.year(),\n                    this.month(),\n                    this.date() - this.weekday()\n                );\n                break;\n            case 'isoWeek':\n                time = startOfDate(\n                    this.year(),\n                    this.month(),\n                    this.date() - (this.isoWeekday() - 1)\n                );\n                break;\n            case 'day':\n            case 'date':\n                time = startOfDate(this.year(), this.month(), this.date());\n                break;\n            case 'hour':\n                time = this._d.valueOf();\n                time -= mod$1(\n                    time + (this._isUTC ? 0 : this.utcOffset() * MS_PER_MINUTE),\n                    MS_PER_HOUR\n                );\n                break;\n            case 'minute':\n                time = this._d.valueOf();\n                time -= mod$1(time, MS_PER_MINUTE);\n                break;\n            case 'second':\n                time = this._d.valueOf();\n                time -= mod$1(time, MS_PER_SECOND);\n                break;\n        }\n\n        this._d.setTime(time);\n        hooks.updateOffset(this, true);\n        return this;\n    }\n\n    function endOf(units) {\n        var time, startOfDate;\n        units = normalizeUnits(units);\n        if (units === undefined || units === 'millisecond' || !this.isValid()) {\n            return this;\n        }\n\n        startOfDate = this._isUTC ? utcStartOfDate : localStartOfDate;\n\n        switch (units) {\n            case 'year':\n                time = startOfDate(this.year() + 1, 0, 1) - 1;\n                break;\n            case 'quarter':\n                time =\n                    startOfDate(\n                        this.year(),\n                        this.month() - (this.month() % 3) + 3,\n                        1\n                    ) - 1;\n                break;\n            case 'month':\n                time = startOfDate(this.year(), this.month() + 1, 1) - 1;\n                break;\n            case 'week':\n                time =\n                    startOfDate(\n                        this.year(),\n                        this.month(),\n                        this.date() - this.weekday() + 7\n                    ) - 1;\n                break;\n            case 'isoWeek':\n                time =\n                    startOfDate(\n                        this.year(),\n                        this.month(),\n                        this.date() - (this.isoWeekday() - 1) + 7\n                    ) - 1;\n                break;\n            case 'day':\n            case 'date':\n                time = startOfDate(this.year(), this.month(), this.date() + 1) - 1;\n                break;\n            case 'hour':\n                time = this._d.valueOf();\n                time +=\n                    MS_PER_HOUR -\n                    mod$1(\n                        time + (this._isUTC ? 0 : this.utcOffset() * MS_PER_MINUTE),\n                        MS_PER_HOUR\n                    ) -\n                    1;\n                break;\n            case 'minute':\n                time = this._d.valueOf();\n                time += MS_PER_MINUTE - mod$1(time, MS_PER_MINUTE) - 1;\n                break;\n            case 'second':\n                time = this._d.valueOf();\n                time += MS_PER_SECOND - mod$1(time, MS_PER_SECOND) - 1;\n                break;\n        }\n\n        this._d.setTime(time);\n        hooks.updateOffset(this, true);\n        return this;\n    }\n\n    function valueOf() {\n        return this._d.valueOf() - (this._offset || 0) * 60000;\n    }\n\n    function unix() {\n        return Math.floor(this.valueOf() / 1000);\n    }\n\n    function toDate() {\n        return new Date(this.valueOf());\n    }\n\n    function toArray() {\n        var m = this;\n        return [\n            m.year(),\n            m.month(),\n            m.date(),\n            m.hour(),\n            m.minute(),\n            m.second(),\n            m.millisecond(),\n        ];\n    }\n\n    function toObject() {\n        var m = this;\n        return {\n            years: m.year(),\n            months: m.month(),\n            date: m.date(),\n            hours: m.hours(),\n            minutes: m.minutes(),\n            seconds: m.seconds(),\n            milliseconds: m.milliseconds(),\n        };\n    }\n\n    function toJSON() {\n        // new Date(NaN).toJSON() === null\n        return this.isValid() ? this.toISOString() : null;\n    }\n\n    function isValid$2() {\n        return isValid(this);\n    }\n\n    function parsingFlags() {\n        return extend({}, getParsingFlags(this));\n    }\n\n    function invalidAt() {\n        return getParsingFlags(this).overflow;\n    }\n\n    function creationData() {\n        return {\n            input: this._i,\n            format: this._f,\n            locale: this._locale,\n            isUTC: this._isUTC,\n            strict: this._strict,\n        };\n    }\n\n    addFormatToken('N', 0, 0, 'eraAbbr');\n    addFormatToken('NN', 0, 0, 'eraAbbr');\n    addFormatToken('NNN', 0, 0, 'eraAbbr');\n    addFormatToken('NNNN', 0, 0, 'eraName');\n    addFormatToken('NNNNN', 0, 0, 'eraNarrow');\n\n    addFormatToken('y', ['y', 1], 'yo', 'eraYear');\n    addFormatToken('y', ['yy', 2], 0, 'eraYear');\n    addFormatToken('y', ['yyy', 3], 0, 'eraYear');\n    addFormatToken('y', ['yyyy', 4], 0, 'eraYear');\n\n    addRegexToken('N', matchEraAbbr);\n    addRegexToken('NN', matchEraAbbr);\n    addRegexToken('NNN', matchEraAbbr);\n    addRegexToken('NNNN', matchEraName);\n    addRegexToken('NNNNN', matchEraNarrow);\n\n    addParseToken(\n        ['N', 'NN', 'NNN', 'NNNN', 'NNNNN'],\n        function (input, array, config, token) {\n            var era = config._locale.erasParse(input, token, config._strict);\n            if (era) {\n                getParsingFlags(config).era = era;\n            } else {\n                getParsingFlags(config).invalidEra = input;\n            }\n        }\n    );\n\n    addRegexToken('y', matchUnsigned);\n    addRegexToken('yy', matchUnsigned);\n    addRegexToken('yyy', matchUnsigned);\n    addRegexToken('yyyy', matchUnsigned);\n    addRegexToken('yo', matchEraYearOrdinal);\n\n    addParseToken(['y', 'yy', 'yyy', 'yyyy'], YEAR);\n    addParseToken(['yo'], function (input, array, config, token) {\n        var match;\n        if (config._locale._eraYearOrdinalRegex) {\n            match = input.match(config._locale._eraYearOrdinalRegex);\n        }\n\n        if (config._locale.eraYearOrdinalParse) {\n            array[YEAR] = config._locale.eraYearOrdinalParse(input, match);\n        } else {\n            array[YEAR] = parseInt(input, 10);\n        }\n    });\n\n    function localeEras(m, format) {\n        var i,\n            l,\n            date,\n            eras = this._eras || getLocale('en')._eras;\n        for (i = 0, l = eras.length; i < l; ++i) {\n            switch (typeof eras[i].since) {\n                case 'string':\n                    // truncate time\n                    date = hooks(eras[i].since).startOf('day');\n                    eras[i].since = date.valueOf();\n                    break;\n            }\n\n            switch (typeof eras[i].until) {\n                case 'undefined':\n                    eras[i].until = +Infinity;\n                    break;\n                case 'string':\n                    // truncate time\n                    date = hooks(eras[i].until).startOf('day').valueOf();\n                    eras[i].until = date.valueOf();\n                    break;\n            }\n        }\n        return eras;\n    }\n\n    function localeErasParse(eraName, format, strict) {\n        var i,\n            l,\n            eras = this.eras(),\n            name,\n            abbr,\n            narrow;\n        eraName = eraName.toUpperCase();\n\n        for (i = 0, l = eras.length; i < l; ++i) {\n            name = eras[i].name.toUpperCase();\n            abbr = eras[i].abbr.toUpperCase();\n            narrow = eras[i].narrow.toUpperCase();\n\n            if (strict) {\n                switch (format) {\n                    case 'N':\n                    case 'NN':\n                    case 'NNN':\n                        if (abbr === eraName) {\n                            return eras[i];\n                        }\n                        break;\n\n                    case 'NNNN':\n                        if (name === eraName) {\n                            return eras[i];\n                        }\n                        break;\n\n                    case 'NNNNN':\n                        if (narrow === eraName) {\n                            return eras[i];\n                        }\n                        break;\n                }\n            } else if ([name, abbr, narrow].indexOf(eraName) >= 0) {\n                return eras[i];\n            }\n        }\n    }\n\n    function localeErasConvertYear(era, year) {\n        var dir = era.since <= era.until ? +1 : -1;\n        if (year === undefined) {\n            return hooks(era.since).year();\n        } else {\n            return hooks(era.since).year() + (year - era.offset) * dir;\n        }\n    }\n\n    function getEraName() {\n        var i,\n            l,\n            val,\n            eras = this.localeData().eras();\n        for (i = 0, l = eras.length; i < l; ++i) {\n            // truncate time\n            val = this.clone().startOf('day').valueOf();\n\n            if (eras[i].since <= val && val <= eras[i].until) {\n                return eras[i].name;\n            }\n            if (eras[i].until <= val && val <= eras[i].since) {\n                return eras[i].name;\n            }\n        }\n\n        return '';\n    }\n\n    function getEraNarrow() {\n        var i,\n            l,\n            val,\n            eras = this.localeData().eras();\n        for (i = 0, l = eras.length; i < l; ++i) {\n            // truncate time\n            val = this.clone().startOf('day').valueOf();\n\n            if (eras[i].since <= val && val <= eras[i].until) {\n                return eras[i].narrow;\n            }\n            if (eras[i].until <= val && val <= eras[i].since) {\n                return eras[i].narrow;\n            }\n        }\n\n        return '';\n    }\n\n    function getEraAbbr() {\n        var i,\n            l,\n            val,\n            eras = this.localeData().eras();\n        for (i = 0, l = eras.length; i < l; ++i) {\n            // truncate time\n            val = this.clone().startOf('day').valueOf();\n\n            if (eras[i].since <= val && val <= eras[i].until) {\n                return eras[i].abbr;\n            }\n            if (eras[i].until <= val && val <= eras[i].since) {\n                return eras[i].abbr;\n            }\n        }\n\n        return '';\n    }\n\n    function getEraYear() {\n        var i,\n            l,\n            dir,\n            val,\n            eras = this.localeData().eras();\n        for (i = 0, l = eras.length; i < l; ++i) {\n            dir = eras[i].since <= eras[i].until ? +1 : -1;\n\n            // truncate time\n            val = this.clone().startOf('day').valueOf();\n\n            if (\n                (eras[i].since <= val && val <= eras[i].until) ||\n                (eras[i].until <= val && val <= eras[i].since)\n            ) {\n                return (\n                    (this.year() - hooks(eras[i].since).year()) * dir +\n                    eras[i].offset\n                );\n            }\n        }\n\n        return this.year();\n    }\n\n    function erasNameRegex(isStrict) {\n        if (!hasOwnProp(this, '_erasNameRegex')) {\n            computeErasParse.call(this);\n        }\n        return isStrict ? this._erasNameRegex : this._erasRegex;\n    }\n\n    function erasAbbrRegex(isStrict) {\n        if (!hasOwnProp(this, '_erasAbbrRegex')) {\n            computeErasParse.call(this);\n        }\n        return isStrict ? this._erasAbbrRegex : this._erasRegex;\n    }\n\n    function erasNarrowRegex(isStrict) {\n        if (!hasOwnProp(this, '_erasNarrowRegex')) {\n            computeErasParse.call(this);\n        }\n        return isStrict ? this._erasNarrowRegex : this._erasRegex;\n    }\n\n    function matchEraAbbr(isStrict, locale) {\n        return locale.erasAbbrRegex(isStrict);\n    }\n\n    function matchEraName(isStrict, locale) {\n        return locale.erasNameRegex(isStrict);\n    }\n\n    function matchEraNarrow(isStrict, locale) {\n        return locale.erasNarrowRegex(isStrict);\n    }\n\n    function matchEraYearOrdinal(isStrict, locale) {\n        return locale._eraYearOrdinalRegex || matchUnsigned;\n    }\n\n    function computeErasParse() {\n        var abbrPieces = [],\n            namePieces = [],\n            narrowPieces = [],\n            mixedPieces = [],\n            i,\n            l,\n            eras = this.eras();\n\n        for (i = 0, l = eras.length; i < l; ++i) {\n            namePieces.push(regexEscape(eras[i].name));\n            abbrPieces.push(regexEscape(eras[i].abbr));\n            narrowPieces.push(regexEscape(eras[i].narrow));\n\n            mixedPieces.push(regexEscape(eras[i].name));\n            mixedPieces.push(regexEscape(eras[i].abbr));\n            mixedPieces.push(regexEscape(eras[i].narrow));\n        }\n\n        this._erasRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');\n        this._erasNameRegex = new RegExp('^(' + namePieces.join('|') + ')', 'i');\n        this._erasAbbrRegex = new RegExp('^(' + abbrPieces.join('|') + ')', 'i');\n        this._erasNarrowRegex = new RegExp(\n            '^(' + narrowPieces.join('|') + ')',\n            'i'\n        );\n    }\n\n    // FORMATTING\n\n    addFormatToken(0, ['gg', 2], 0, function () {\n        return this.weekYear() % 100;\n    });\n\n    addFormatToken(0, ['GG', 2], 0, function () {\n        return this.isoWeekYear() % 100;\n    });\n\n    function addWeekYearFormatToken(token, getter) {\n        addFormatToken(0, [token, token.length], 0, getter);\n    }\n\n    addWeekYearFormatToken('gggg', 'weekYear');\n    addWeekYearFormatToken('ggggg', 'weekYear');\n    addWeekYearFormatToken('GGGG', 'isoWeekYear');\n    addWeekYearFormatToken('GGGGG', 'isoWeekYear');\n\n    // ALIASES\n\n    addUnitAlias('weekYear', 'gg');\n    addUnitAlias('isoWeekYear', 'GG');\n\n    // PRIORITY\n\n    addUnitPriority('weekYear', 1);\n    addUnitPriority('isoWeekYear', 1);\n\n    // PARSING\n\n    addRegexToken('G', matchSigned);\n    addRegexToken('g', matchSigned);\n    addRegexToken('GG', match1to2, match2);\n    addRegexToken('gg', match1to2, match2);\n    addRegexToken('GGGG', match1to4, match4);\n    addRegexToken('gggg', match1to4, match4);\n    addRegexToken('GGGGG', match1to6, match6);\n    addRegexToken('ggggg', match1to6, match6);\n\n    addWeekParseToken(\n        ['gggg', 'ggggg', 'GGGG', 'GGGGG'],\n        function (input, week, config, token) {\n            week[token.substr(0, 2)] = toInt(input);\n        }\n    );\n\n    addWeekParseToken(['gg', 'GG'], function (input, week, config, token) {\n        week[token] = hooks.parseTwoDigitYear(input);\n    });\n\n    // MOMENTS\n\n    function getSetWeekYear(input) {\n        return getSetWeekYearHelper.call(\n            this,\n            input,\n            this.week(),\n            this.weekday(),\n            this.localeData()._week.dow,\n            this.localeData()._week.doy\n        );\n    }\n\n    function getSetISOWeekYear(input) {\n        return getSetWeekYearHelper.call(\n            this,\n            input,\n            this.isoWeek(),\n            this.isoWeekday(),\n            1,\n            4\n        );\n    }\n\n    function getISOWeeksInYear() {\n        return weeksInYear(this.year(), 1, 4);\n    }\n\n    function getISOWeeksInISOWeekYear() {\n        return weeksInYear(this.isoWeekYear(), 1, 4);\n    }\n\n    function getWeeksInYear() {\n        var weekInfo = this.localeData()._week;\n        return weeksInYear(this.year(), weekInfo.dow, weekInfo.doy);\n    }\n\n    function getWeeksInWeekYear() {\n        var weekInfo = this.localeData()._week;\n        return weeksInYear(this.weekYear(), weekInfo.dow, weekInfo.doy);\n    }\n\n    function getSetWeekYearHelper(input, week, weekday, dow, doy) {\n        var weeksTarget;\n        if (input == null) {\n            return weekOfYear(this, dow, doy).year;\n        } else {\n            weeksTarget = weeksInYear(input, dow, doy);\n            if (week > weeksTarget) {\n                week = weeksTarget;\n            }\n            return setWeekAll.call(this, input, week, weekday, dow, doy);\n        }\n    }\n\n    function setWeekAll(weekYear, week, weekday, dow, doy) {\n        var dayOfYearData = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy),\n            date = createUTCDate(dayOfYearData.year, 0, dayOfYearData.dayOfYear);\n\n        this.year(date.getUTCFullYear());\n        this.month(date.getUTCMonth());\n        this.date(date.getUTCDate());\n        return this;\n    }\n\n    // FORMATTING\n\n    addFormatToken('Q', 0, 'Qo', 'quarter');\n\n    // ALIASES\n\n    addUnitAlias('quarter', 'Q');\n\n    // PRIORITY\n\n    addUnitPriority('quarter', 7);\n\n    // PARSING\n\n    addRegexToken('Q', match1);\n    addParseToken('Q', function (input, array) {\n        array[MONTH] = (toInt(input) - 1) * 3;\n    });\n\n    // MOMENTS\n\n    function getSetQuarter(input) {\n        return input == null\n            ? Math.ceil((this.month() + 1) / 3)\n            : this.month((input - 1) * 3 + (this.month() % 3));\n    }\n\n    // FORMATTING\n\n    addFormatToken('D', ['DD', 2], 'Do', 'date');\n\n    // ALIASES\n\n    addUnitAlias('date', 'D');\n\n    // PRIORITY\n    addUnitPriority('date', 9);\n\n    // PARSING\n\n    addRegexToken('D', match1to2);\n    addRegexToken('DD', match1to2, match2);\n    addRegexToken('Do', function (isStrict, locale) {\n        // TODO: Remove \"ordinalParse\" fallback in next major release.\n        return isStrict\n            ? locale._dayOfMonthOrdinalParse || locale._ordinalParse\n            : locale._dayOfMonthOrdinalParseLenient;\n    });\n\n    addParseToken(['D', 'DD'], DATE);\n    addParseToken('Do', function (input, array) {\n        array[DATE] = toInt(input.match(match1to2)[0]);\n    });\n\n    // MOMENTS\n\n    var getSetDayOfMonth = makeGetSet('Date', true);\n\n    // FORMATTING\n\n    addFormatToken('DDD', ['DDDD', 3], 'DDDo', 'dayOfYear');\n\n    // ALIASES\n\n    addUnitAlias('dayOfYear', 'DDD');\n\n    // PRIORITY\n    addUnitPriority('dayOfYear', 4);\n\n    // PARSING\n\n    addRegexToken('DDD', match1to3);\n    addRegexToken('DDDD', match3);\n    addParseToken(['DDD', 'DDDD'], function (input, array, config) {\n        config._dayOfYear = toInt(input);\n    });\n\n    // HELPERS\n\n    // MOMENTS\n\n    function getSetDayOfYear(input) {\n        var dayOfYear =\n            Math.round(\n                (this.clone().startOf('day') - this.clone().startOf('year')) / 864e5\n            ) + 1;\n        return input == null ? dayOfYear : this.add(input - dayOfYear, 'd');\n    }\n\n    // FORMATTING\n\n    addFormatToken('m', ['mm', 2], 0, 'minute');\n\n    // ALIASES\n\n    addUnitAlias('minute', 'm');\n\n    // PRIORITY\n\n    addUnitPriority('minute', 14);\n\n    // PARSING\n\n    addRegexToken('m', match1to2);\n    addRegexToken('mm', match1to2, match2);\n    addParseToken(['m', 'mm'], MINUTE);\n\n    // MOMENTS\n\n    var getSetMinute = makeGetSet('Minutes', false);\n\n    // FORMATTING\n\n    addFormatToken('s', ['ss', 2], 0, 'second');\n\n    // ALIASES\n\n    addUnitAlias('second', 's');\n\n    // PRIORITY\n\n    addUnitPriority('second', 15);\n\n    // PARSING\n\n    addRegexToken('s', match1to2);\n    addRegexToken('ss', match1to2, match2);\n    addParseToken(['s', 'ss'], SECOND);\n\n    // MOMENTS\n\n    var getSetSecond = makeGetSet('Seconds', false);\n\n    // FORMATTING\n\n    addFormatToken('S', 0, 0, function () {\n        return ~~(this.millisecond() / 100);\n    });\n\n    addFormatToken(0, ['SS', 2], 0, function () {\n        return ~~(this.millisecond() / 10);\n    });\n\n    addFormatToken(0, ['SSS', 3], 0, 'millisecond');\n    addFormatToken(0, ['SSSS', 4], 0, function () {\n        return this.millisecond() * 10;\n    });\n    addFormatToken(0, ['SSSSS', 5], 0, function () {\n        return this.millisecond() * 100;\n    });\n    addFormatToken(0, ['SSSSSS', 6], 0, function () {\n        return this.millisecond() * 1000;\n    });\n    addFormatToken(0, ['SSSSSSS', 7], 0, function () {\n        return this.millisecond() * 10000;\n    });\n    addFormatToken(0, ['SSSSSSSS', 8], 0, function () {\n        return this.millisecond() * 100000;\n    });\n    addFormatToken(0, ['SSSSSSSSS', 9], 0, function () {\n        return this.millisecond() * 1000000;\n    });\n\n    // ALIASES\n\n    addUnitAlias('millisecond', 'ms');\n\n    // PRIORITY\n\n    addUnitPriority('millisecond', 16);\n\n    // PARSING\n\n    addRegexToken('S', match1to3, match1);\n    addRegexToken('SS', match1to3, match2);\n    addRegexToken('SSS', match1to3, match3);\n\n    var token, getSetMillisecond;\n    for (token = 'SSSS'; token.length <= 9; token += 'S') {\n        addRegexToken(token, matchUnsigned);\n    }\n\n    function parseMs(input, array) {\n        array[MILLISECOND] = toInt(('0.' + input) * 1000);\n    }\n\n    for (token = 'S'; token.length <= 9; token += 'S') {\n        addParseToken(token, parseMs);\n    }\n\n    getSetMillisecond = makeGetSet('Milliseconds', false);\n\n    // FORMATTING\n\n    addFormatToken('z', 0, 0, 'zoneAbbr');\n    addFormatToken('zz', 0, 0, 'zoneName');\n\n    // MOMENTS\n\n    function getZoneAbbr() {\n        return this._isUTC ? 'UTC' : '';\n    }\n\n    function getZoneName() {\n        return this._isUTC ? 'Coordinated Universal Time' : '';\n    }\n\n    var proto = Moment.prototype;\n\n    proto.add = add;\n    proto.calendar = calendar$1;\n    proto.clone = clone;\n    proto.diff = diff;\n    proto.endOf = endOf;\n    proto.format = format;\n    proto.from = from;\n    proto.fromNow = fromNow;\n    proto.to = to;\n    proto.toNow = toNow;\n    proto.get = stringGet;\n    proto.invalidAt = invalidAt;\n    proto.isAfter = isAfter;\n    proto.isBefore = isBefore;\n    proto.isBetween = isBetween;\n    proto.isSame = isSame;\n    proto.isSameOrAfter = isSameOrAfter;\n    proto.isSameOrBefore = isSameOrBefore;\n    proto.isValid = isValid$2;\n    proto.lang = lang;\n    proto.locale = locale;\n    proto.localeData = localeData;\n    proto.max = prototypeMax;\n    proto.min = prototypeMin;\n    proto.parsingFlags = parsingFlags;\n    proto.set = stringSet;\n    proto.startOf = startOf;\n    proto.subtract = subtract;\n    proto.toArray = toArray;\n    proto.toObject = toObject;\n    proto.toDate = toDate;\n    proto.toISOString = toISOString;\n    proto.inspect = inspect;\n    if (typeof Symbol !== 'undefined' && Symbol.for != null) {\n        proto[Symbol.for('nodejs.util.inspect.custom')] = function () {\n            return 'Moment<' + this.format() + '>';\n        };\n    }\n    proto.toJSON = toJSON;\n    proto.toString = toString;\n    proto.unix = unix;\n    proto.valueOf = valueOf;\n    proto.creationData = creationData;\n    proto.eraName = getEraName;\n    proto.eraNarrow = getEraNarrow;\n    proto.eraAbbr = getEraAbbr;\n    proto.eraYear = getEraYear;\n    proto.year = getSetYear;\n    proto.isLeapYear = getIsLeapYear;\n    proto.weekYear = getSetWeekYear;\n    proto.isoWeekYear = getSetISOWeekYear;\n    proto.quarter = proto.quarters = getSetQuarter;\n    proto.month = getSetMonth;\n    proto.daysInMonth = getDaysInMonth;\n    proto.week = proto.weeks = getSetWeek;\n    proto.isoWeek = proto.isoWeeks = getSetISOWeek;\n    proto.weeksInYear = getWeeksInYear;\n    proto.weeksInWeekYear = getWeeksInWeekYear;\n    proto.isoWeeksInYear = getISOWeeksInYear;\n    proto.isoWeeksInISOWeekYear = getISOWeeksInISOWeekYear;\n    proto.date = getSetDayOfMonth;\n    proto.day = proto.days = getSetDayOfWeek;\n    proto.weekday = getSetLocaleDayOfWeek;\n    proto.isoWeekday = getSetISODayOfWeek;\n    proto.dayOfYear = getSetDayOfYear;\n    proto.hour = proto.hours = getSetHour;\n    proto.minute = proto.minutes = getSetMinute;\n    proto.second = proto.seconds = getSetSecond;\n    proto.millisecond = proto.milliseconds = getSetMillisecond;\n    proto.utcOffset = getSetOffset;\n    proto.utc = setOffsetToUTC;\n    proto.local = setOffsetToLocal;\n    proto.parseZone = setOffsetToParsedOffset;\n    proto.hasAlignedHourOffset = hasAlignedHourOffset;\n    proto.isDST = isDaylightSavingTime;\n    proto.isLocal = isLocal;\n    proto.isUtcOffset = isUtcOffset;\n    proto.isUtc = isUtc;\n    proto.isUTC = isUtc;\n    proto.zoneAbbr = getZoneAbbr;\n    proto.zoneName = getZoneName;\n    proto.dates = deprecate(\n        'dates accessor is deprecated. Use date instead.',\n        getSetDayOfMonth\n    );\n    proto.months = deprecate(\n        'months accessor is deprecated. Use month instead',\n        getSetMonth\n    );\n    proto.years = deprecate(\n        'years accessor is deprecated. Use year instead',\n        getSetYear\n    );\n    proto.zone = deprecate(\n        'moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/',\n        getSetZone\n    );\n    proto.isDSTShifted = deprecate(\n        'isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information',\n        isDaylightSavingTimeShifted\n    );\n\n    function createUnix(input) {\n        return createLocal(input * 1000);\n    }\n\n    function createInZone() {\n        return createLocal.apply(null, arguments).parseZone();\n    }\n\n    function preParsePostFormat(string) {\n        return string;\n    }\n\n    var proto$1 = Locale.prototype;\n\n    proto$1.calendar = calendar;\n    proto$1.longDateFormat = longDateFormat;\n    proto$1.invalidDate = invalidDate;\n    proto$1.ordinal = ordinal;\n    proto$1.preparse = preParsePostFormat;\n    proto$1.postformat = preParsePostFormat;\n    proto$1.relativeTime = relativeTime;\n    proto$1.pastFuture = pastFuture;\n    proto$1.set = set;\n    proto$1.eras = localeEras;\n    proto$1.erasParse = localeErasParse;\n    proto$1.erasConvertYear = localeErasConvertYear;\n    proto$1.erasAbbrRegex = erasAbbrRegex;\n    proto$1.erasNameRegex = erasNameRegex;\n    proto$1.erasNarrowRegex = erasNarrowRegex;\n\n    proto$1.months = localeMonths;\n    proto$1.monthsShort = localeMonthsShort;\n    proto$1.monthsParse = localeMonthsParse;\n    proto$1.monthsRegex = monthsRegex;\n    proto$1.monthsShortRegex = monthsShortRegex;\n    proto$1.week = localeWeek;\n    proto$1.firstDayOfYear = localeFirstDayOfYear;\n    proto$1.firstDayOfWeek = localeFirstDayOfWeek;\n\n    proto$1.weekdays = localeWeekdays;\n    proto$1.weekdaysMin = localeWeekdaysMin;\n    proto$1.weekdaysShort = localeWeekdaysShort;\n    proto$1.weekdaysParse = localeWeekdaysParse;\n\n    proto$1.weekdaysRegex = weekdaysRegex;\n    proto$1.weekdaysShortRegex = weekdaysShortRegex;\n    proto$1.weekdaysMinRegex = weekdaysMinRegex;\n\n    proto$1.isPM = localeIsPM;\n    proto$1.meridiem = localeMeridiem;\n\n    function get$1(format, index, field, setter) {\n        var locale = getLocale(),\n            utc = createUTC().set(setter, index);\n        return locale[field](utc, format);\n    }\n\n    function listMonthsImpl(format, index, field) {\n        if (isNumber(format)) {\n            index = format;\n            format = undefined;\n        }\n\n        format = format || '';\n\n        if (index != null) {\n            return get$1(format, index, field, 'month');\n        }\n\n        var i,\n            out = [];\n        for (i = 0; i < 12; i++) {\n            out[i] = get$1(format, i, field, 'month');\n        }\n        return out;\n    }\n\n    // ()\n    // (5)\n    // (fmt, 5)\n    // (fmt)\n    // (true)\n    // (true, 5)\n    // (true, fmt, 5)\n    // (true, fmt)\n    function listWeekdaysImpl(localeSorted, format, index, field) {\n        if (typeof localeSorted === 'boolean') {\n            if (isNumber(format)) {\n                index = format;\n                format = undefined;\n            }\n\n            format = format || '';\n        } else {\n            format = localeSorted;\n            index = format;\n            localeSorted = false;\n\n            if (isNumber(format)) {\n                index = format;\n                format = undefined;\n            }\n\n            format = format || '';\n        }\n\n        var locale = getLocale(),\n            shift = localeSorted ? locale._week.dow : 0,\n            i,\n            out = [];\n\n        if (index != null) {\n            return get$1(format, (index + shift) % 7, field, 'day');\n        }\n\n        for (i = 0; i < 7; i++) {\n            out[i] = get$1(format, (i + shift) % 7, field, 'day');\n        }\n        return out;\n    }\n\n    function listMonths(format, index) {\n        return listMonthsImpl(format, index, 'months');\n    }\n\n    function listMonthsShort(format, index) {\n        return listMonthsImpl(format, index, 'monthsShort');\n    }\n\n    function listWeekdays(localeSorted, format, index) {\n        return listWeekdaysImpl(localeSorted, format, index, 'weekdays');\n    }\n\n    function listWeekdaysShort(localeSorted, format, index) {\n        return listWeekdaysImpl(localeSorted, format, index, 'weekdaysShort');\n    }\n\n    function listWeekdaysMin(localeSorted, format, index) {\n        return listWeekdaysImpl(localeSorted, format, index, 'weekdaysMin');\n    }\n\n    getSetGlobalLocale('en', {\n        eras: [\n            {\n                since: '0001-01-01',\n                until: +Infinity,\n                offset: 1,\n                name: 'Anno Domini',\n                narrow: 'AD',\n                abbr: 'AD',\n            },\n            {\n                since: '0000-12-31',\n                until: -Infinity,\n                offset: 1,\n                name: 'Before Christ',\n                narrow: 'BC',\n                abbr: 'BC',\n            },\n        ],\n        dayOfMonthOrdinalParse: /\\d{1,2}(th|st|nd|rd)/,\n        ordinal: function (number) {\n            var b = number % 10,\n                output =\n                    toInt((number % 100) / 10) === 1\n                        ? 'th'\n                        : b === 1\n                        ? 'st'\n                        : b === 2\n                        ? 'nd'\n                        : b === 3\n                        ? 'rd'\n                        : 'th';\n            return number + output;\n        },\n    });\n\n    // Side effect imports\n\n    hooks.lang = deprecate(\n        'moment.lang is deprecated. Use moment.locale instead.',\n        getSetGlobalLocale\n    );\n    hooks.langData = deprecate(\n        'moment.langData is deprecated. Use moment.localeData instead.',\n        getLocale\n    );\n\n    var mathAbs = Math.abs;\n\n    function abs() {\n        var data = this._data;\n\n        this._milliseconds = mathAbs(this._milliseconds);\n        this._days = mathAbs(this._days);\n        this._months = mathAbs(this._months);\n\n        data.milliseconds = mathAbs(data.milliseconds);\n        data.seconds = mathAbs(data.seconds);\n        data.minutes = mathAbs(data.minutes);\n        data.hours = mathAbs(data.hours);\n        data.months = mathAbs(data.months);\n        data.years = mathAbs(data.years);\n\n        return this;\n    }\n\n    function addSubtract$1(duration, input, value, direction) {\n        var other = createDuration(input, value);\n\n        duration._milliseconds += direction * other._milliseconds;\n        duration._days += direction * other._days;\n        duration._months += direction * other._months;\n\n        return duration._bubble();\n    }\n\n    // supports only 2.0-style add(1, 's') or add(duration)\n    function add$1(input, value) {\n        return addSubtract$1(this, input, value, 1);\n    }\n\n    // supports only 2.0-style subtract(1, 's') or subtract(duration)\n    function subtract$1(input, value) {\n        return addSubtract$1(this, input, value, -1);\n    }\n\n    function absCeil(number) {\n        if (number < 0) {\n            return Math.floor(number);\n        } else {\n            return Math.ceil(number);\n        }\n    }\n\n    function bubble() {\n        var milliseconds = this._milliseconds,\n            days = this._days,\n            months = this._months,\n            data = this._data,\n            seconds,\n            minutes,\n            hours,\n            years,\n            monthsFromDays;\n\n        // if we have a mix of positive and negative values, bubble down first\n        // check: https://github.com/moment/moment/issues/2166\n        if (\n            !(\n                (milliseconds >= 0 && days >= 0 && months >= 0) ||\n                (milliseconds <= 0 && days <= 0 && months <= 0)\n            )\n        ) {\n            milliseconds += absCeil(monthsToDays(months) + days) * 864e5;\n            days = 0;\n            months = 0;\n        }\n\n        // The following code bubbles up values, see the tests for\n        // examples of what that means.\n        data.milliseconds = milliseconds % 1000;\n\n        seconds = absFloor(milliseconds / 1000);\n        data.seconds = seconds % 60;\n\n        minutes = absFloor(seconds / 60);\n        data.minutes = minutes % 60;\n\n        hours = absFloor(minutes / 60);\n        data.hours = hours % 24;\n\n        days += absFloor(hours / 24);\n\n        // convert days to months\n        monthsFromDays = absFloor(daysToMonths(days));\n        months += monthsFromDays;\n        days -= absCeil(monthsToDays(monthsFromDays));\n\n        // 12 months -> 1 year\n        years = absFloor(months / 12);\n        months %= 12;\n\n        data.days = days;\n        data.months = months;\n        data.years = years;\n\n        return this;\n    }\n\n    function daysToMonths(days) {\n        // 400 years have 146097 days (taking into account leap year rules)\n        // 400 years have 12 months === 4800\n        return (days * 4800) / 146097;\n    }\n\n    function monthsToDays(months) {\n        // the reverse of daysToMonths\n        return (months * 146097) / 4800;\n    }\n\n    function as(units) {\n        if (!this.isValid()) {\n            return NaN;\n        }\n        var days,\n            months,\n            milliseconds = this._milliseconds;\n\n        units = normalizeUnits(units);\n\n        if (units === 'month' || units === 'quarter' || units === 'year') {\n            days = this._days + milliseconds / 864e5;\n            months = this._months + daysToMonths(days);\n            switch (units) {\n                case 'month':\n                    return months;\n                case 'quarter':\n                    return months / 3;\n                case 'year':\n                    return months / 12;\n            }\n        } else {\n            // handle milliseconds separately because of floating point math errors (issue #1867)\n            days = this._days + Math.round(monthsToDays(this._months));\n            switch (units) {\n                case 'week':\n                    return days / 7 + milliseconds / 6048e5;\n                case 'day':\n                    return days + milliseconds / 864e5;\n                case 'hour':\n                    return days * 24 + milliseconds / 36e5;\n                case 'minute':\n                    return days * 1440 + milliseconds / 6e4;\n                case 'second':\n                    return days * 86400 + milliseconds / 1000;\n                // Math.floor prevents floating point math errors here\n                case 'millisecond':\n                    return Math.floor(days * 864e5) + milliseconds;\n                default:\n                    throw new Error('Unknown unit ' + units);\n            }\n        }\n    }\n\n    // TODO: Use this.as('ms')?\n    function valueOf$1() {\n        if (!this.isValid()) {\n            return NaN;\n        }\n        return (\n            this._milliseconds +\n            this._days * 864e5 +\n            (this._months % 12) * 2592e6 +\n            toInt(this._months / 12) * 31536e6\n        );\n    }\n\n    function makeAs(alias) {\n        return function () {\n            return this.as(alias);\n        };\n    }\n\n    var asMilliseconds = makeAs('ms'),\n        asSeconds = makeAs('s'),\n        asMinutes = makeAs('m'),\n        asHours = makeAs('h'),\n        asDays = makeAs('d'),\n        asWeeks = makeAs('w'),\n        asMonths = makeAs('M'),\n        asQuarters = makeAs('Q'),\n        asYears = makeAs('y');\n\n    function clone$1() {\n        return createDuration(this);\n    }\n\n    function get$2(units) {\n        units = normalizeUnits(units);\n        return this.isValid() ? this[units + 's']() : NaN;\n    }\n\n    function makeGetter(name) {\n        return function () {\n            return this.isValid() ? this._data[name] : NaN;\n        };\n    }\n\n    var milliseconds = makeGetter('milliseconds'),\n        seconds = makeGetter('seconds'),\n        minutes = makeGetter('minutes'),\n        hours = makeGetter('hours'),\n        days = makeGetter('days'),\n        months = makeGetter('months'),\n        years = makeGetter('years');\n\n    function weeks() {\n        return absFloor(this.days() / 7);\n    }\n\n    var round = Math.round,\n        thresholds = {\n            ss: 44, // a few seconds to seconds\n            s: 45, // seconds to minute\n            m: 45, // minutes to hour\n            h: 22, // hours to day\n            d: 26, // days to month/week\n            w: null, // weeks to month\n            M: 11, // months to year\n        };\n\n    // helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize\n    function substituteTimeAgo(string, number, withoutSuffix, isFuture, locale) {\n        return locale.relativeTime(number || 1, !!withoutSuffix, string, isFuture);\n    }\n\n    function relativeTime$1(posNegDuration, withoutSuffix, thresholds, locale) {\n        var duration = createDuration(posNegDuration).abs(),\n            seconds = round(duration.as('s')),\n            minutes = round(duration.as('m')),\n            hours = round(duration.as('h')),\n            days = round(duration.as('d')),\n            months = round(duration.as('M')),\n            weeks = round(duration.as('w')),\n            years = round(duration.as('y')),\n            a =\n                (seconds <= thresholds.ss && ['s', seconds]) ||\n                (seconds < thresholds.s && ['ss', seconds]) ||\n                (minutes <= 1 && ['m']) ||\n                (minutes < thresholds.m && ['mm', minutes]) ||\n                (hours <= 1 && ['h']) ||\n                (hours < thresholds.h && ['hh', hours]) ||\n                (days <= 1 && ['d']) ||\n                (days < thresholds.d && ['dd', days]);\n\n        if (thresholds.w != null) {\n            a =\n                a ||\n                (weeks <= 1 && ['w']) ||\n                (weeks < thresholds.w && ['ww', weeks]);\n        }\n        a = a ||\n            (months <= 1 && ['M']) ||\n            (months < thresholds.M && ['MM', months]) ||\n            (years <= 1 && ['y']) || ['yy', years];\n\n        a[2] = withoutSuffix;\n        a[3] = +posNegDuration > 0;\n        a[4] = locale;\n        return substituteTimeAgo.apply(null, a);\n    }\n\n    // This function allows you to set the rounding function for relative time strings\n    function getSetRelativeTimeRounding(roundingFunction) {\n        if (roundingFunction === undefined) {\n            return round;\n        }\n        if (typeof roundingFunction === 'function') {\n            round = roundingFunction;\n            return true;\n        }\n        return false;\n    }\n\n    // This function allows you to set a threshold for relative time strings\n    function getSetRelativeTimeThreshold(threshold, limit) {\n        if (thresholds[threshold] === undefined) {\n            return false;\n        }\n        if (limit === undefined) {\n            return thresholds[threshold];\n        }\n        thresholds[threshold] = limit;\n        if (threshold === 's') {\n            thresholds.ss = limit - 1;\n        }\n        return true;\n    }\n\n    function humanize(argWithSuffix, argThresholds) {\n        if (!this.isValid()) {\n            return this.localeData().invalidDate();\n        }\n\n        var withSuffix = false,\n            th = thresholds,\n            locale,\n            output;\n\n        if (typeof argWithSuffix === 'object') {\n            argThresholds = argWithSuffix;\n            argWithSuffix = false;\n        }\n        if (typeof argWithSuffix === 'boolean') {\n            withSuffix = argWithSuffix;\n        }\n        if (typeof argThresholds === 'object') {\n            th = Object.assign({}, thresholds, argThresholds);\n            if (argThresholds.s != null && argThresholds.ss == null) {\n                th.ss = argThresholds.s - 1;\n            }\n        }\n\n        locale = this.localeData();\n        output = relativeTime$1(this, !withSuffix, th, locale);\n\n        if (withSuffix) {\n            output = locale.pastFuture(+this, output);\n        }\n\n        return locale.postformat(output);\n    }\n\n    var abs$1 = Math.abs;\n\n    function sign(x) {\n        return (x > 0) - (x < 0) || +x;\n    }\n\n    function toISOString$1() {\n        // for ISO strings we do not use the normal bubbling rules:\n        //  * milliseconds bubble up until they become hours\n        //  * days do not bubble at all\n        //  * months bubble up until they become years\n        // This is because there is no context-free conversion between hours and days\n        // (think of clock changes)\n        // and also not between days and months (28-31 days per month)\n        if (!this.isValid()) {\n            return this.localeData().invalidDate();\n        }\n\n        var seconds = abs$1(this._milliseconds) / 1000,\n            days = abs$1(this._days),\n            months = abs$1(this._months),\n            minutes,\n            hours,\n            years,\n            s,\n            total = this.asSeconds(),\n            totalSign,\n            ymSign,\n            daysSign,\n            hmsSign;\n\n        if (!total) {\n            // this is the same as C#'s (Noda) and python (isodate)...\n            // but not other JS (goog.date)\n            return 'P0D';\n        }\n\n        // 3600 seconds -> 60 minutes -> 1 hour\n        minutes = absFloor(seconds / 60);\n        hours = absFloor(minutes / 60);\n        seconds %= 60;\n        minutes %= 60;\n\n        // 12 months -> 1 year\n        years = absFloor(months / 12);\n        months %= 12;\n\n        // inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js\n        s = seconds ? seconds.toFixed(3).replace(/\\.?0+$/, '') : '';\n\n        totalSign = total < 0 ? '-' : '';\n        ymSign = sign(this._months) !== sign(total) ? '-' : '';\n        daysSign = sign(this._days) !== sign(total) ? '-' : '';\n        hmsSign = sign(this._milliseconds) !== sign(total) ? '-' : '';\n\n        return (\n            totalSign +\n            'P' +\n            (years ? ymSign + years + 'Y' : '') +\n            (months ? ymSign + months + 'M' : '') +\n            (days ? daysSign + days + 'D' : '') +\n            (hours || minutes || seconds ? 'T' : '') +\n            (hours ? hmsSign + hours + 'H' : '') +\n            (minutes ? hmsSign + minutes + 'M' : '') +\n            (seconds ? hmsSign + s + 'S' : '')\n        );\n    }\n\n    var proto$2 = Duration.prototype;\n\n    proto$2.isValid = isValid$1;\n    proto$2.abs = abs;\n    proto$2.add = add$1;\n    proto$2.subtract = subtract$1;\n    proto$2.as = as;\n    proto$2.asMilliseconds = asMilliseconds;\n    proto$2.asSeconds = asSeconds;\n    proto$2.asMinutes = asMinutes;\n    proto$2.asHours = asHours;\n    proto$2.asDays = asDays;\n    proto$2.asWeeks = asWeeks;\n    proto$2.asMonths = asMonths;\n    proto$2.asQuarters = asQuarters;\n    proto$2.asYears = asYears;\n    proto$2.valueOf = valueOf$1;\n    proto$2._bubble = bubble;\n    proto$2.clone = clone$1;\n    proto$2.get = get$2;\n    proto$2.milliseconds = milliseconds;\n    proto$2.seconds = seconds;\n    proto$2.minutes = minutes;\n    proto$2.hours = hours;\n    proto$2.days = days;\n    proto$2.weeks = weeks;\n    proto$2.months = months;\n    proto$2.years = years;\n    proto$2.humanize = humanize;\n    proto$2.toISOString = toISOString$1;\n    proto$2.toString = toISOString$1;\n    proto$2.toJSON = toISOString$1;\n    proto$2.locale = locale;\n    proto$2.localeData = localeData;\n\n    proto$2.toIsoString = deprecate(\n        'toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)',\n        toISOString$1\n    );\n    proto$2.lang = lang;\n\n    // FORMATTING\n\n    addFormatToken('X', 0, 0, 'unix');\n    addFormatToken('x', 0, 0, 'valueOf');\n\n    // PARSING\n\n    addRegexToken('x', matchSigned);\n    addRegexToken('X', matchTimestamp);\n    addParseToken('X', function (input, array, config) {\n        config._d = new Date(parseFloat(input) * 1000);\n    });\n    addParseToken('x', function (input, array, config) {\n        config._d = new Date(toInt(input));\n    });\n\n    //! moment.js\n\n    hooks.version = '2.29.4';\n\n    setHookCallback(createLocal);\n\n    hooks.fn = proto;\n    hooks.min = min;\n    hooks.max = max;\n    hooks.now = now;\n    hooks.utc = createUTC;\n    hooks.unix = createUnix;\n    hooks.months = listMonths;\n    hooks.isDate = isDate;\n    hooks.locale = getSetGlobalLocale;\n    hooks.invalid = createInvalid;\n    hooks.duration = createDuration;\n    hooks.isMoment = isMoment;\n    hooks.weekdays = listWeekdays;\n    hooks.parseZone = createInZone;\n    hooks.localeData = getLocale;\n    hooks.isDuration = isDuration;\n    hooks.monthsShort = listMonthsShort;\n    hooks.weekdaysMin = listWeekdaysMin;\n    hooks.defineLocale = defineLocale;\n    hooks.updateLocale = updateLocale;\n    hooks.locales = listLocales;\n    hooks.weekdaysShort = listWeekdaysShort;\n    hooks.normalizeUnits = normalizeUnits;\n    hooks.relativeTimeRounding = getSetRelativeTimeRounding;\n    hooks.relativeTimeThreshold = getSetRelativeTimeThreshold;\n    hooks.calendarFormat = getCalendarFormat;\n    hooks.prototype = proto;\n\n    // currently HTML5 input type only supports 24-hour formats\n    hooks.HTML5_FMT = {\n        DATETIME_LOCAL: 'YYYY-MM-DDTHH:mm', // <input type=\"datetime-local\" />\n        DATETIME_LOCAL_SECONDS: 'YYYY-MM-DDTHH:mm:ss', // <input type=\"datetime-local\" step=\"1\" />\n        DATETIME_LOCAL_MS: 'YYYY-MM-DDTHH:mm:ss.SSS', // <input type=\"datetime-local\" step=\"0.001\" />\n        DATE: 'YYYY-MM-DD', // <input type=\"date\" />\n        TIME: 'HH:mm', // <input type=\"time\" />\n        TIME_SECONDS: 'HH:mm:ss', // <input type=\"time\" step=\"1\" />\n        TIME_MS: 'HH:mm:ss.SSS', // <input type=\"time\" step=\"0.001\" />\n        WEEK: 'GGGG-[W]WW', // <input type=\"week\" />\n        MONTH: 'YYYY-MM', // <input type=\"month\" />\n    };\n\n    return hooks;\n\n})));\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","(function(root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof define === 'function' && define.amd) {\n        define('error-stack-parser', ['stackframe'], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory(require('stackframe'));\n    } else {\n        root.ErrorStackParser = factory(root.StackFrame);\n    }\n}(this, function ErrorStackParser(StackFrame) {\n    'use strict';\n\n    var FIREFOX_SAFARI_STACK_REGEXP = /(^|@)\\S+:\\d+/;\n    var CHROME_IE_STACK_REGEXP = /^\\s*at .*(\\S+:\\d+|\\(native\\))/m;\n    var SAFARI_NATIVE_CODE_REGEXP = /^(eval@)?(\\[native code])?$/;\n\n    return {\n        /**\n         * Given an Error object, extract the most information from it.\n         *\n         * @param {Error} error object\n         * @return {Array} of StackFrames\n         */\n        parse: function ErrorStackParser$$parse(error) {\n            if (typeof error.stacktrace !== 'undefined' || typeof error['opera#sourceloc'] !== 'undefined') {\n                return this.parseOpera(error);\n            } else if (error.stack && error.stack.match(CHROME_IE_STACK_REGEXP)) {\n                return this.parseV8OrIE(error);\n            } else if (error.stack) {\n                return this.parseFFOrSafari(error);\n            } else {\n                throw new Error('Cannot parse given Error object');\n            }\n        },\n\n        // Separate line and column numbers from a string of the form: (URI:Line:Column)\n        extractLocation: function ErrorStackParser$$extractLocation(urlLike) {\n            // Fail-fast but return locations like \"(native)\"\n            if (urlLike.indexOf(':') === -1) {\n                return [urlLike];\n            }\n\n            var regExp = /(.+?)(?::(\\d+))?(?::(\\d+))?$/;\n            var parts = regExp.exec(urlLike.replace(/[()]/g, ''));\n            return [parts[1], parts[2] || undefined, parts[3] || undefined];\n        },\n\n        parseV8OrIE: function ErrorStackParser$$parseV8OrIE(error) {\n            var filtered = error.stack.split('\\n').filter(function(line) {\n                return !!line.match(CHROME_IE_STACK_REGEXP);\n            }, this);\n\n            return filtered.map(function(line) {\n                if (line.indexOf('(eval ') > -1) {\n                    // Throw away eval information until we implement stacktrace.js/stackframe#8\n                    line = line.replace(/eval code/g, 'eval').replace(/(\\(eval at [^()]*)|(,.*$)/g, '');\n                }\n                var sanitizedLine = line.replace(/^\\s+/, '').replace(/\\(eval code/g, '(').replace(/^.*?\\s+/, '');\n\n                // capture and preseve the parenthesized location \"(/foo/my bar.js:12:87)\" in\n                // case it has spaces in it, as the string is split on \\s+ later on\n                var location = sanitizedLine.match(/ (\\(.+\\)$)/);\n\n                // remove the parenthesized location from the line, if it was matched\n                sanitizedLine = location ? sanitizedLine.replace(location[0], '') : sanitizedLine;\n\n                // if a location was matched, pass it to extractLocation() otherwise pass all sanitizedLine\n                // because this line doesn't have function name\n                var locationParts = this.extractLocation(location ? location[1] : sanitizedLine);\n                var functionName = location && sanitizedLine || undefined;\n                var fileName = ['eval', '<anonymous>'].indexOf(locationParts[0]) > -1 ? undefined : locationParts[0];\n\n                return new StackFrame({\n                    functionName: functionName,\n                    fileName: fileName,\n                    lineNumber: locationParts[1],\n                    columnNumber: locationParts[2],\n                    source: line\n                });\n            }, this);\n        },\n\n        parseFFOrSafari: function ErrorStackParser$$parseFFOrSafari(error) {\n            var filtered = error.stack.split('\\n').filter(function(line) {\n                return !line.match(SAFARI_NATIVE_CODE_REGEXP);\n            }, this);\n\n            return filtered.map(function(line) {\n                // Throw away eval information until we implement stacktrace.js/stackframe#8\n                if (line.indexOf(' > eval') > -1) {\n                    line = line.replace(/ line (\\d+)(?: > eval line \\d+)* > eval:\\d+:\\d+/g, ':$1');\n                }\n\n                if (line.indexOf('@') === -1 && line.indexOf(':') === -1) {\n                    // Safari eval frames only have function names and nothing else\n                    return new StackFrame({\n                        functionName: line\n                    });\n                } else {\n                    var functionNameRegex = /((.*\".+\"[^@]*)?[^@]*)(?:@)/;\n                    var matches = line.match(functionNameRegex);\n                    var functionName = matches && matches[1] ? matches[1] : undefined;\n                    var locationParts = this.extractLocation(line.replace(functionNameRegex, ''));\n\n                    return new StackFrame({\n                        functionName: functionName,\n                        fileName: locationParts[0],\n                        lineNumber: locationParts[1],\n                        columnNumber: locationParts[2],\n                        source: line\n                    });\n                }\n            }, this);\n        },\n\n        parseOpera: function ErrorStackParser$$parseOpera(e) {\n            if (!e.stacktrace || (e.message.indexOf('\\n') > -1 &&\n                e.message.split('\\n').length > e.stacktrace.split('\\n').length)) {\n                return this.parseOpera9(e);\n            } else if (!e.stack) {\n                return this.parseOpera10(e);\n            } else {\n                return this.parseOpera11(e);\n            }\n        },\n\n        parseOpera9: function ErrorStackParser$$parseOpera9(e) {\n            var lineRE = /Line (\\d+).*script (?:in )?(\\S+)/i;\n            var lines = e.message.split('\\n');\n            var result = [];\n\n            for (var i = 2, len = lines.length; i < len; i += 2) {\n                var match = lineRE.exec(lines[i]);\n                if (match) {\n                    result.push(new StackFrame({\n                        fileName: match[2],\n                        lineNumber: match[1],\n                        source: lines[i]\n                    }));\n                }\n            }\n\n            return result;\n        },\n\n        parseOpera10: function ErrorStackParser$$parseOpera10(e) {\n            var lineRE = /Line (\\d+).*script (?:in )?(\\S+)(?:: In function (\\S+))?$/i;\n            var lines = e.stacktrace.split('\\n');\n            var result = [];\n\n            for (var i = 0, len = lines.length; i < len; i += 2) {\n                var match = lineRE.exec(lines[i]);\n                if (match) {\n                    result.push(\n                        new StackFrame({\n                            functionName: match[3] || undefined,\n                            fileName: match[2],\n                            lineNumber: match[1],\n                            source: lines[i]\n                        })\n                    );\n                }\n            }\n\n            return result;\n        },\n\n        // Opera 10.65+ Error.stack very similar to FF/Safari\n        parseOpera11: function ErrorStackParser$$parseOpera11(error) {\n            var filtered = error.stack.split('\\n').filter(function(line) {\n                return !!line.match(FIREFOX_SAFARI_STACK_REGEXP) && !line.match(/^Error created at/);\n            }, this);\n\n            return filtered.map(function(line) {\n                var tokens = line.split('@');\n                var locationParts = this.extractLocation(tokens.pop());\n                var functionCall = (tokens.shift() || '');\n                var functionName = functionCall\n                    .replace(/<anonymous function(: (\\w+))?>/, '$2')\n                    .replace(/\\([^)]*\\)/g, '') || undefined;\n                var argsRaw;\n                if (functionCall.match(/\\(([^)]*)\\)/)) {\n                    argsRaw = functionCall.replace(/^[^(]+\\(([^)]*)\\)$/, '$1');\n                }\n                var args = (argsRaw === undefined || argsRaw === '[arguments not available]') ?\n                    undefined : argsRaw.split(',');\n\n                return new StackFrame({\n                    functionName: functionName,\n                    args: args,\n                    fileName: locationParts[0],\n                    lineNumber: locationParts[1],\n                    columnNumber: locationParts[2],\n                    source: line\n                });\n            }, this);\n        }\n    };\n}));\n","(function(root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof define === 'function' && define.amd) {\n        define('stackframe', [], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory();\n    } else {\n        root.StackFrame = factory();\n    }\n}(this, function() {\n    'use strict';\n    function _isNumber(n) {\n        return !isNaN(parseFloat(n)) && isFinite(n);\n    }\n\n    function _capitalize(str) {\n        return str.charAt(0).toUpperCase() + str.substring(1);\n    }\n\n    function _getter(p) {\n        return function() {\n            return this[p];\n        };\n    }\n\n    var booleanProps = ['isConstructor', 'isEval', 'isNative', 'isToplevel'];\n    var numericProps = ['columnNumber', 'lineNumber'];\n    var stringProps = ['fileName', 'functionName', 'source'];\n    var arrayProps = ['args'];\n    var objectProps = ['evalOrigin'];\n\n    var props = booleanProps.concat(numericProps, stringProps, arrayProps, objectProps);\n\n    function StackFrame(obj) {\n        if (!obj) return;\n        for (var i = 0; i < props.length; i++) {\n            if (obj[props[i]] !== undefined) {\n                this['set' + _capitalize(props[i])](obj[props[i]]);\n            }\n        }\n    }\n\n    StackFrame.prototype = {\n        getArgs: function() {\n            return this.args;\n        },\n        setArgs: function(v) {\n            if (Object.prototype.toString.call(v) !== '[object Array]') {\n                throw new TypeError('Args must be an Array');\n            }\n            this.args = v;\n        },\n\n        getEvalOrigin: function() {\n            return this.evalOrigin;\n        },\n        setEvalOrigin: function(v) {\n            if (v instanceof StackFrame) {\n                this.evalOrigin = v;\n            } else if (v instanceof Object) {\n                this.evalOrigin = new StackFrame(v);\n            } else {\n                throw new TypeError('Eval Origin must be an Object or StackFrame');\n            }\n        },\n\n        toString: function() {\n            var fileName = this.getFileName() || '';\n            var lineNumber = this.getLineNumber() || '';\n            var columnNumber = this.getColumnNumber() || '';\n            var functionName = this.getFunctionName() || '';\n            if (this.getIsEval()) {\n                if (fileName) {\n                    return '[eval] (' + fileName + ':' + lineNumber + ':' + columnNumber + ')';\n                }\n                return '[eval]:' + lineNumber + ':' + columnNumber;\n            }\n            if (functionName) {\n                return functionName + ' (' + fileName + ':' + lineNumber + ':' + columnNumber + ')';\n            }\n            return fileName + ':' + lineNumber + ':' + columnNumber;\n        }\n    };\n\n    StackFrame.fromString = function StackFrame$$fromString(str) {\n        var argsStartIndex = str.indexOf('(');\n        var argsEndIndex = str.lastIndexOf(')');\n\n        var functionName = str.substring(0, argsStartIndex);\n        var args = str.substring(argsStartIndex + 1, argsEndIndex).split(',');\n        var locationString = str.substring(argsEndIndex + 1);\n\n        if (locationString.indexOf('@') === 0) {\n            var parts = /@(.+?)(?::(\\d+))?(?::(\\d+))?$/.exec(locationString, '');\n            var fileName = parts[1];\n            var lineNumber = parts[2];\n            var columnNumber = parts[3];\n        }\n\n        return new StackFrame({\n            functionName: functionName,\n            args: args || undefined,\n            fileName: fileName,\n            lineNumber: lineNumber || undefined,\n            columnNumber: columnNumber || undefined\n        });\n    };\n\n    for (var i = 0; i < booleanProps.length; i++) {\n        StackFrame.prototype['get' + _capitalize(booleanProps[i])] = _getter(booleanProps[i]);\n        StackFrame.prototype['set' + _capitalize(booleanProps[i])] = (function(p) {\n            return function(v) {\n                this[p] = Boolean(v);\n            };\n        })(booleanProps[i]);\n    }\n\n    for (var j = 0; j < numericProps.length; j++) {\n        StackFrame.prototype['get' + _capitalize(numericProps[j])] = _getter(numericProps[j]);\n        StackFrame.prototype['set' + _capitalize(numericProps[j])] = (function(p) {\n            return function(v) {\n                if (!_isNumber(v)) {\n                    throw new TypeError(p + ' must be a Number');\n                }\n                this[p] = Number(v);\n            };\n        })(numericProps[j]);\n    }\n\n    for (var k = 0; k < stringProps.length; k++) {\n        StackFrame.prototype['get' + _capitalize(stringProps[k])] = _getter(stringProps[k]);\n        StackFrame.prototype['set' + _capitalize(stringProps[k])] = (function(p) {\n            return function(v) {\n                this[p] = String(v);\n            };\n        })(stringProps[k]);\n    }\n\n    return StackFrame;\n}));\n","// Detect if we're in node\ndeclare var process: any;\n\nexport const IN_NODE =\n  typeof process === \"object\" &&\n  typeof process.versions === \"object\" &&\n  typeof process.versions.node === \"string\" &&\n  typeof process.browser ===\n    \"undefined\"; /* This last condition checks if we run the browser shim of process */\n\nlet nodeUrlMod: any;\nlet nodeFetch: any;\nlet nodePath: any;\nlet nodeVmMod: any;\n/** @private */\nexport let nodeFsPromisesMod: any;\n\ndeclare var globalThis: {\n  importScripts: (url: string) => void;\n  document?: any;\n  fetch?: any;\n};\n\n/**\n * If we're in node, it's most convenient to import various node modules on\n * initialization. Otherwise, this does nothing.\n * @private\n */\nexport async function initNodeModules() {\n  if (!IN_NODE) {\n    return;\n  }\n  // @ts-ignore\n  nodeUrlMod = (await import(\"url\")).default;\n  nodeFsPromisesMod = await import(\"fs/promises\");\n  if (globalThis.fetch) {\n    nodeFetch = fetch;\n  } else {\n    // @ts-ignore\n    nodeFetch = (await import(\"node-fetch\")).default;\n  }\n  // @ts-ignore\n  nodeVmMod = (await import(\"vm\")).default;\n  nodePath = await import(\"path\");\n  pathSep = nodePath.sep;\n\n  // Emscripten uses `require`, so if it's missing (because we were imported as\n  // an ES6 module) we need to polyfill `require` with `import`. `import` is\n  // async and `require` is synchronous, so we import all packages that might be\n  // required up front and define require to look them up in this table.\n\n  if (typeof require !== \"undefined\") {\n    return;\n  }\n  // These are all the packages required in pyodide.asm.js. You can get this\n  // list with:\n  // $ grep -o 'require(\"[a-z]*\")' pyodide.asm.js  | sort -u\n  const fs = await import(\"fs\");\n  const crypto = await import(\"crypto\");\n  const ws = await import(\"ws\");\n  const child_process = await import(\"child_process\");\n  const node_modules: { [mode: string]: any } = {\n    fs,\n    crypto,\n    ws,\n    child_process,\n  };\n  // Since we're in an ES6 module, this is only modifying the module namespace,\n  // it's still private to Pyodide.\n  (globalThis as any).require = function (mod: string): any {\n    return node_modules[mod];\n  };\n}\n\nfunction node_resolvePath(path: string, base?: string): string {\n  return nodePath.resolve(base || \".\", path);\n}\n\nfunction browser_resolvePath(path: string, base?: string): string {\n  if (base === undefined) {\n    // @ts-ignore\n    base = location;\n  }\n  return new URL(path, base).toString();\n}\n\nexport let resolvePath: (rest: string, base?: string) => string;\nif (IN_NODE) {\n  resolvePath = node_resolvePath;\n} else {\n  resolvePath = browser_resolvePath;\n}\n\n/**\n * Get the path separator. If we are on Linux or in the browser, it's /.\n * In Windows, it's \\.\n * @private\n */\nexport let pathSep: string;\n\nif (!IN_NODE) {\n  pathSep = \"/\";\n}\n\n/**\n * Load a binary file, only for use in Node. If the path explicitly is a URL,\n * then fetch from a URL, else load from the file system.\n * @param indexURL base path to resolve relative paths\n * @param path the path to load\n * @param checksum sha-256 checksum of the package\n * @returns An ArrayBuffer containing the binary data\n * @private\n */\nasync function node_loadBinaryFile(\n  path: string,\n  _file_sub_resource_hash?: string | undefined, // Ignoring sub resource hash. See issue-2431.\n): Promise<Uint8Array> {\n  if (path.startsWith(\"file://\")) {\n    // handle file:// with filesystem operations rather than with fetch.\n    path = path.slice(\"file://\".length);\n  }\n  if (path.includes(\"://\")) {\n    // If it has a protocol, make a fetch request\n    let response = await nodeFetch(path);\n    if (!response.ok) {\n      throw new Error(`Failed to load '${path}': request failed.`);\n    }\n    return new Uint8Array(await response.arrayBuffer());\n  } else {\n    // Otherwise get it from the file system\n    const data = await nodeFsPromisesMod.readFile(path);\n    return new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n  }\n}\n\n/**\n * Load a binary file, only for use in browser. Resolves relative paths against\n * indexURL.\n *\n * @param path the path to load\n * @param subResourceHash the sub resource hash for fetch() integrity check\n * @returns A Uint8Array containing the binary data\n * @private\n */\nasync function browser_loadBinaryFile(\n  path: string,\n  subResourceHash: string | undefined,\n): Promise<Uint8Array> {\n  // @ts-ignore\n  const url = new URL(path, location);\n  let options = subResourceHash ? { integrity: subResourceHash } : {};\n  // @ts-ignore\n  let response = await fetch(url, options);\n  if (!response.ok) {\n    throw new Error(`Failed to load '${url}': request failed.`);\n  }\n  return new Uint8Array(await response.arrayBuffer());\n}\n\n/** @private */\nexport let loadBinaryFile: (\n  path: string,\n  file_sub_resource_hash?: string | undefined,\n) => Promise<Uint8Array>;\nif (IN_NODE) {\n  loadBinaryFile = node_loadBinaryFile;\n} else {\n  loadBinaryFile = browser_loadBinaryFile;\n}\n\n/**\n * Currently loadScript is only used once to load `pyodide.asm.js`.\n * @param url\n * @async\n * @private\n */\nexport let loadScript: (url: string) => Promise<void>;\n\nif (globalThis.document) {\n  // browser\n  loadScript = async (url) => await import(/* webpackIgnore: true */ url);\n} else if (globalThis.importScripts) {\n  // webworker\n  loadScript = async (url) => {\n    try {\n      // use importScripts in classic web worker\n      globalThis.importScripts(url);\n    } catch (e) {\n      // importScripts throws TypeError in a module type web worker, use import instead\n      if (e instanceof TypeError) {\n        await import(/* webpackIgnore: true */ url);\n      } else {\n        throw e;\n      }\n    }\n  };\n} else if (IN_NODE) {\n  loadScript = nodeLoadScript;\n} else {\n  throw new Error(\"Cannot determine runtime environment\");\n}\n\n/**\n * Load a text file and executes it as Javascript\n * @param url The path to load. May be a url or a relative file system path.\n * @private\n */\nasync function nodeLoadScript(url: string) {\n  if (url.startsWith(\"file://\")) {\n    // handle file:// with filesystem operations rather than with fetch.\n    url = url.slice(\"file://\".length);\n  }\n  if (url.includes(\"://\")) {\n    // If it's a url, load it with fetch then eval it.\n    nodeVmMod.runInThisContext(await (await nodeFetch(url)).text());\n  } else {\n    // Otherwise, hopefully it is a relative path we can load from the file\n    // system.\n    await import(/* webpackIgnore: true */ nodeUrlMod.pathToFileURL(url).href);\n  }\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","import { Module } from \"./module\";\n\n/**\n * @private\n */\nexport function initializeNativeFS(module: Module) {\n  const FS = module.FS;\n  const MEMFS = module.FS.filesystems.MEMFS;\n  const PATH = module.PATH;\n\n  const nativeFSAsync = {\n    // DIR_MODE: {{{ cDefine('S_IFDIR') }}} | 511 /* 0777 */,\n    // FILE_MODE: {{{ cDefine('S_IFREG') }}} | 511 /* 0777 */,\n    DIR_MODE: 16384 | 511,\n    FILE_MODE: 32768 | 511,\n    mount: function (mount: any) {\n      if (!mount.opts.fileSystemHandle) {\n        throw new Error(\"opts.fileSystemHandle is required\");\n      }\n\n      // reuse all of the core MEMFS functionality\n      return MEMFS.mount.apply(null, arguments);\n    },\n    syncfs: async (mount: any, populate: Boolean, callback: Function) => {\n      try {\n        const local = nativeFSAsync.getLocalSet(mount);\n        const remote = await nativeFSAsync.getRemoteSet(mount);\n        const src = populate ? remote : local;\n        const dst = populate ? local : remote;\n        await nativeFSAsync.reconcile(mount, src, dst);\n        callback(null);\n      } catch (e) {\n        callback(e);\n      }\n    },\n    // Returns file set of emscripten's filesystem at the mountpoint.\n    getLocalSet: (mount: any) => {\n      let entries = Object.create(null);\n\n      function isRealDir(p: string) {\n        return p !== \".\" && p !== \"..\";\n      }\n\n      function toAbsolute(root: string) {\n        return (p: string) => {\n          return PATH.join2(root, p);\n        };\n      }\n\n      let check = FS.readdir(mount.mountpoint)\n        .filter(isRealDir)\n        .map(toAbsolute(mount.mountpoint));\n\n      while (check.length) {\n        let path = check.pop();\n        let stat = FS.stat(path);\n\n        if (FS.isDir(stat.mode)) {\n          check.push.apply(\n            check,\n            FS.readdir(path).filter(isRealDir).map(toAbsolute(path)),\n          );\n        }\n\n        entries[path] = { timestamp: stat.mtime, mode: stat.mode };\n      }\n\n      return { type: \"local\", entries: entries };\n    },\n    // Returns file set of the real, on-disk filesystem at the mountpoint.\n    getRemoteSet: async (mount: any) => {\n      // TODO: this should be a map.\n      const entries = Object.create(null);\n\n      const handles = await getFsHandles(mount.opts.fileSystemHandle);\n      for (const [path, handle] of handles) {\n        if (path === \".\") continue;\n\n        entries[PATH.join2(mount.mountpoint, path)] = {\n          timestamp:\n            handle.kind === \"file\"\n              ? (await handle.getFile()).lastModifiedDate\n              : new Date(),\n          mode:\n            handle.kind === \"file\"\n              ? nativeFSAsync.FILE_MODE\n              : nativeFSAsync.DIR_MODE,\n        };\n      }\n\n      return { type: \"remote\", entries, handles };\n    },\n    loadLocalEntry: (path: string) => {\n      const lookup = FS.lookupPath(path);\n      const node = lookup.node;\n      const stat = FS.stat(path);\n\n      if (FS.isDir(stat.mode)) {\n        return { timestamp: stat.mtime, mode: stat.mode };\n      } else if (FS.isFile(stat.mode)) {\n        node.contents = MEMFS.getFileDataAsTypedArray(node);\n        return {\n          timestamp: stat.mtime,\n          mode: stat.mode,\n          contents: node.contents,\n        };\n      } else {\n        throw new Error(\"node type not supported\");\n      }\n    },\n    storeLocalEntry: (path: string, entry: any) => {\n      if (FS.isDir(entry[\"mode\"])) {\n        FS.mkdirTree(path, entry[\"mode\"]);\n      } else if (FS.isFile(entry[\"mode\"])) {\n        FS.writeFile(path, entry[\"contents\"], { canOwn: true });\n      } else {\n        throw new Error(\"node type not supported\");\n      }\n\n      FS.chmod(path, entry[\"mode\"]);\n      FS.utime(path, entry[\"timestamp\"], entry[\"timestamp\"]);\n    },\n    removeLocalEntry: (path: string) => {\n      var stat = FS.stat(path);\n\n      if (FS.isDir(stat.mode)) {\n        FS.rmdir(path);\n      } else if (FS.isFile(stat.mode)) {\n        FS.unlink(path);\n      }\n    },\n    loadRemoteEntry: async (handle: any) => {\n      if (handle.kind === \"file\") {\n        const file = await handle.getFile();\n        return {\n          contents: new Uint8Array(await file.arrayBuffer()),\n          mode: nativeFSAsync.FILE_MODE,\n          timestamp: file.lastModifiedDate,\n        };\n      } else if (handle.kind === \"directory\") {\n        return {\n          mode: nativeFSAsync.DIR_MODE,\n          timestamp: new Date(),\n        };\n      } else {\n        throw new Error(\"unknown kind: \" + handle.kind);\n      }\n    },\n    storeRemoteEntry: async (handles: any, path: string, entry: any) => {\n      const parentDirHandle = handles.get(PATH.dirname(path));\n      const handle = FS.isFile(entry.mode)\n        ? await parentDirHandle.getFileHandle(PATH.basename(path), {\n            create: true,\n          })\n        : await parentDirHandle.getDirectoryHandle(PATH.basename(path), {\n            create: true,\n          });\n      if (handle.kind === \"file\") {\n        const writable = await handle.createWritable();\n        await writable.write(entry.contents);\n        await writable.close();\n      }\n      handles.set(path, handle);\n    },\n    removeRemoteEntry: async (handles: any, path: string) => {\n      const parentDirHandle = handles.get(PATH.dirname(path));\n      await parentDirHandle.removeEntry(PATH.basename(path));\n      handles.delete(path);\n    },\n    reconcile: async (mount: any, src: any, dst: any) => {\n      let total = 0;\n\n      const create: Array<string> = [];\n      Object.keys(src.entries).forEach(function (key) {\n        const e = src.entries[key];\n        const e2 = dst.entries[key];\n        if (\n          !e2 ||\n          (FS.isFile(e.mode) &&\n            e[\"timestamp\"].getTime() > e2[\"timestamp\"].getTime())\n        ) {\n          create.push(key);\n          total++;\n        }\n      });\n      // sort paths in ascending order so directory entries are created\n      // before the files inside them\n      create.sort();\n\n      const remove: Array<string> = [];\n      Object.keys(dst.entries).forEach(function (key) {\n        if (!src.entries[key]) {\n          remove.push(key);\n          total++;\n        }\n      });\n      // sort paths in descending order so files are deleted before their\n      // parent directories\n      remove.sort().reverse();\n\n      if (!total) {\n        return;\n      }\n\n      const handles = src.type === \"remote\" ? src.handles : dst.handles;\n\n      for (const path of create) {\n        const relPath = PATH.normalize(\n          path.replace(mount.mountpoint, \"/\"),\n        ).substring(1);\n        if (dst.type === \"local\") {\n          const handle = handles.get(relPath);\n          const entry = await nativeFSAsync.loadRemoteEntry(handle);\n          nativeFSAsync.storeLocalEntry(path, entry);\n        } else {\n          const entry = nativeFSAsync.loadLocalEntry(path);\n          await nativeFSAsync.storeRemoteEntry(handles, relPath, entry);\n        }\n      }\n\n      for (const path of remove) {\n        if (dst.type === \"local\") {\n          nativeFSAsync.removeLocalEntry(path);\n        } else {\n          const relPath = PATH.normalize(\n            path.replace(mount.mountpoint, \"/\"),\n          ).substring(1);\n          await nativeFSAsync.removeRemoteEntry(handles, relPath);\n        }\n      }\n    },\n  };\n\n  module.FS.filesystems.NATIVEFS_ASYNC = nativeFSAsync;\n}\n\nconst getFsHandles = async (dirHandle: any) => {\n  const handles: any = [];\n\n  async function collect(curDirHandle: any) {\n    for await (const entry of curDirHandle.values()) {\n      handles.push(entry);\n      if (entry.kind === \"directory\") {\n        await collect(entry);\n      }\n    }\n  }\n\n  await collect(dirHandle);\n\n  const result = new Map();\n  result.set(\".\", dirHandle);\n  for (const handle of handles) {\n    const relativePath = (await dirHandle.resolve(handle)).join(\"/\");\n    result.set(relativePath, handle);\n  }\n  return result;\n};\n","/** @private */\n\nimport { ConfigType } from \"./pyodide\";\nimport { initializeNativeFS } from \"./nativefs\";\nimport { loadBinaryFile } from \"./compat\";\n\ntype FSNode = any;\ntype FSStream = any;\n\nexport interface FS {\n  unlink: (path: string) => void;\n  mkdirTree: (path: string, mode?: number) => void;\n  chdir: (path: string) => void;\n  symlink: (target: string, src: string) => FSNode;\n  createDevice: (\n    parent: string,\n    name: string,\n    input?: (() => number | null) | null,\n    output?: ((code: number) => void) | null,\n  ) => FSNode;\n  closeStream: (fd: number) => void;\n  open: (path: string, flags: string | number, mode?: number) => FSStream;\n  makedev: (major: number, minor: number) => number;\n  mkdev: (path: string, dev: number) => FSNode;\n  filesystems: any;\n  stat: (path: string, dontFollow?: boolean) => any;\n  readdir: (node: FSNode) => string[];\n  isDir: (mode: number) => boolean;\n  lookupPath: (path: string) => FSNode;\n  isFile: (mode: number) => boolean;\n  writeFile: (path: string, contents: any, o?: { canOwn?: boolean }) => void;\n  chmod: (path: string, mode: number) => void;\n  utime: (path: string, atime: number, mtime: number) => void;\n  rmdir: (path: string) => void;\n  mount: (type: any, opts: any, mountpoint: string) => any;\n  write: (\n    stream: FSStream,\n    buffer: any,\n    offset: number,\n    length: number,\n    position?: number,\n  ) => number;\n  close: (stream: FSStream) => void;\n}\n\nexport interface Module {\n  noImageDecoding: boolean;\n  noAudioDecoding: boolean;\n  noWasmDecoding: boolean;\n  quit: (status: number, toThrow: Error) => void;\n  preRun: { (): void }[];\n  print: (a: string) => void;\n  printErr: (a: string) => void;\n  ENV: { [key: string]: string };\n  PATH: any;\n  TTY: any;\n  FS: FS;\n  canvas?: HTMLCanvasElement;\n  addRunDependency: (id: string) => void;\n  removeRunDependency: (id: string) => void;\n}\n\n/**\n * The Emscripten Module.\n *\n * @private\n */\nexport function createModule(): any {\n  let Module: any = {};\n  Module.noImageDecoding = true;\n  Module.noAudioDecoding = true;\n  Module.noWasmDecoding = false; // we preload wasm using the built in plugin now\n  Module.preRun = [];\n  Module.quit = (status: number, toThrow: Error) => {\n    Module.exited = { status, toThrow };\n    throw toThrow;\n  };\n  return Module;\n}\n\n/**\n * Make the home directory inside the virtual file system,\n * then change the working directory to it.\n *\n * @param Module The Emscripten Module.\n * @param path The path to the home directory.\n * @private\n */\nfunction setHomeDirectory(Module: Module, path: string) {\n  Module.preRun.push(function () {\n    const fallbackPath = \"/\";\n    try {\n      Module.FS.mkdirTree(path);\n    } catch (e) {\n      console.error(`Error occurred while making a home directory '${path}':`);\n      console.error(e);\n      console.error(`Using '${fallbackPath}' for a home directory instead`);\n      path = fallbackPath;\n    }\n    Module.ENV.HOME = path;\n    Module.FS.chdir(path);\n  });\n}\n\n/**\n * Mount local directories to the virtual file system. Only for Node.js.\n * @param module The Emscripten Module.\n * @param mounts The list of paths to mount.\n */\nfunction mountLocalDirectories(Module: Module, mounts: string[]) {\n  Module.preRun.push(() => {\n    for (const mount of mounts) {\n      Module.FS.mkdirTree(mount);\n      Module.FS.mount(Module.FS.filesystems.NODEFS, { root: mount }, mount);\n    }\n  });\n}\n\n/**\n * Install the Python standard library to the virtual file system.\n *\n * Previously, this was handled by Emscripten's file packager (pyodide.asm.data).\n * However, using the file packager means that we have only one version\n * of the standard library available. We want to be able to use different\n * versions of the standard library, for example:\n *\n * - Use compiled(.pyc) or uncompiled(.py) standard library.\n * - Remove unused modules or add additional modules using bundlers like pyodide-pack.\n *\n * @param Module The Emscripten Module.\n * @param stdlibPromise A promise that resolves to the standard library.\n */\nfunction installStdlib(Module: Module, stdlibURL: string) {\n  const stdlibPromise: Promise<Uint8Array> = loadBinaryFile(stdlibURL);\n\n  Module.preRun.push(() => {\n    /* @ts-ignore */\n    const pymajor = Module._py_version_major();\n    /* @ts-ignore */\n    const pyminor = Module._py_version_minor();\n\n    Module.FS.mkdirTree(\"/lib\");\n    Module.FS.mkdirTree(`/lib/python${pymajor}.${pyminor}/site-packages`);\n\n    Module.addRunDependency(\"install-stdlib\");\n\n    stdlibPromise\n      .then((stdlib: Uint8Array) => {\n        Module.FS.writeFile(`/lib/python${pymajor}${pyminor}.zip`, stdlib);\n      })\n      .catch((e) => {\n        console.error(\"Error occurred while installing the standard library:\");\n        console.error(e);\n      })\n      .finally(() => {\n        Module.removeRunDependency(\"install-stdlib\");\n      });\n  });\n}\n\n/**\n * Initialize the virtual file system, before loading Python interpreter.\n * @private\n */\nexport function initializeFileSystem(Module: Module, config: ConfigType) {\n  let stdLibURL;\n  if (config.stdLibURL != undefined) {\n    stdLibURL = config.stdLibURL;\n  } else {\n    stdLibURL = config.indexURL + \"python_stdlib.zip\";\n  }\n\n  installStdlib(Module, stdLibURL);\n  setHomeDirectory(Module, config.homedir);\n  mountLocalDirectories(Module, config._node_mounts);\n  Module.preRun.push(() => initializeNativeFS(Module));\n}\n","/**\n * The main bootstrap code for loading pyodide.\n */\nimport ErrorStackParser from \"error-stack-parser\";\nimport { loadScript, initNodeModules, pathSep, resolvePath } from \"./compat\";\n\nimport { createModule, initializeFileSystem } from \"./module\";\nimport { version } from \"./version\";\n\nimport type { PyodideInterface } from \"./api.js\";\nimport type { PyProxy, PyDict } from \"./pyproxy.gen\";\nexport type { PyodideInterface };\n\nexport type {\n  PyProxy,\n  PyProxyWithLength,\n  PyProxyWithGet,\n  PyProxyWithSet,\n  PyProxyWithHas,\n  PyProxyDict,\n  PyProxyIterable,\n  PyProxyIterator,\n  PyProxyAwaitable,\n  PyProxyCallable,\n  TypedArray,\n  PyBuffer as PyProxyBuffer,\n  PyBufferView as PyBuffer,\n} from \"./pyproxy.gen\";\n\nexport type Py2JsResult = any;\n\nexport { version };\n\n/**\n * A proxy around globals that falls back to checking for a builtin if has or\n * get fails to find a global with the given key. Note that this proxy is\n * transparent to js2python: it won't notice that this wrapper exists at all and\n * will translate this proxy to the globals dictionary.\n * @private\n */\nfunction wrapPythonGlobals(globals_dict: PyDict, builtins_dict: PyDict) {\n  return new Proxy(globals_dict, {\n    get(target, symbol) {\n      if (symbol === \"get\") {\n        return (key: any) => {\n          let result = target.get(key);\n          if (result === undefined) {\n            result = builtins_dict.get(key);\n          }\n          return result;\n        };\n      }\n      if (symbol === \"has\") {\n        return (key: any) => target.has(key) || builtins_dict.has(key);\n      }\n      return Reflect.get(target, symbol);\n    },\n  });\n}\n\n/**\n * This function is called after the emscripten module is finished initializing,\n * so eval_code is newly available.\n * It finishes the bootstrap so that once it is complete, it is possible to use\n * the core `pyodide` apis. (But package loading is not ready quite yet.)\n * @private\n */\nfunction finalizeBootstrap(API: any, config: ConfigType) {\n  // First make internal dict so that we can use runPythonInternal.\n  // runPythonInternal uses a separate namespace, so we don't pollute the main\n  // environment with variables from our setup.\n  API.runPythonInternal_dict = API._pyodide._base.eval_code(\"{}\") as PyProxy;\n  API.importlib = API.runPythonInternal(\"import importlib; importlib\");\n  let import_module = API.importlib.import_module;\n\n  API.sys = import_module(\"sys\");\n  API.sys.path.insert(0, config.homedir);\n  API.os = import_module(\"os\");\n\n  // Set up globals\n  let globals = API.runPythonInternal(\n    \"import __main__; __main__.__dict__\",\n  ) as PyDict;\n  let builtins = API.runPythonInternal(\n    \"import builtins; builtins.__dict__\",\n  ) as PyDict;\n  API.globals = wrapPythonGlobals(globals, builtins);\n\n  // Set up key Javascript modules.\n  let importhook = API._pyodide._importhook;\n  function jsFinderHook(o: object) {\n    if (\"__all__\" in o) {\n      return;\n    }\n    Object.defineProperty(o, \"__all__\", {\n      get: () =>\n        pyodide.toPy(\n          Object.getOwnPropertyNames(o).filter((name) => name !== \"__all__\"),\n        ),\n      enumerable: false,\n      configurable: true,\n    });\n  }\n  importhook.register_js_finder.callKwargs({ hook: jsFinderHook });\n  importhook.register_js_module(\"js\", config.jsglobals);\n\n  let pyodide = API.makePublicAPI();\n  importhook.register_js_module(\"pyodide_js\", pyodide);\n\n  // import pyodide_py. We want to ensure that as much stuff as possible is\n  // already set up before importing pyodide_py to simplify development of\n  // pyodide_py code (Otherwise it's very hard to keep track of which things\n  // aren't set up yet.)\n  API.pyodide_py = import_module(\"pyodide\");\n  API.pyodide_code = import_module(\"pyodide.code\");\n  API.pyodide_ffi = import_module(\"pyodide.ffi\");\n  API.package_loader = import_module(\"pyodide._package_loader\");\n\n  API.sitepackages = API.package_loader.SITE_PACKAGES.__str__();\n  API.dsodir = API.package_loader.DSO_DIR.__str__();\n  API.defaultLdLibraryPath = [API.dsodir, API.sitepackages];\n\n  API.os.environ.__setitem__(\n    \"LD_LIBRARY_PATH\",\n    API.defaultLdLibraryPath.join(\":\"),\n  );\n\n  // copy some last constants onto public API.\n  pyodide.pyodide_py = API.pyodide_py;\n  pyodide.globals = API.globals;\n  return pyodide;\n}\n\ndeclare function _createPyodideModule(Module: any): Promise<void>;\n\n/**\n *  If indexURL isn't provided, throw an error and catch it and then parse our\n *  file name out from the stack trace.\n *\n *  Question: But getting the URL from error stack trace is well... really\n *  hacky. Can't we use\n *  [`document.currentScript`](https://developer.mozilla.org/en-US/docs/Web/API/Document/currentScript)\n *  or\n *  [`import.meta.url`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import.meta)\n *  instead?\n *\n *  Answer: `document.currentScript` works for the browser main thread.\n *  `import.meta` works for es6 modules. In a classic webworker, I think there\n *  is no approach that works. Also we would need some third approach for node\n *  when loading a commonjs module using `require`. On the other hand, this\n *  stack trace approach works for every case without any feature detection\n *  code.\n */\nfunction calculateIndexURL(): string {\n  if (typeof __dirname === \"string\") {\n    return __dirname;\n  }\n  let err: Error;\n  try {\n    throw new Error();\n  } catch (e) {\n    err = e as Error;\n  }\n  let fileName = ErrorStackParser.parse(err)[0].fileName!;\n  const indexOfLastSlash = fileName.lastIndexOf(pathSep);\n  if (indexOfLastSlash === -1) {\n    throw new Error(\n      \"Could not extract indexURL path from pyodide module location\",\n    );\n  }\n  return fileName.slice(0, indexOfLastSlash);\n}\n\n/**\n * See documentation for loadPyodide.\n * @private\n */\nexport type ConfigType = {\n  indexURL: string;\n  packageCacheDir: string;\n  lockFileURL: string;\n  homedir: string;\n  fullStdLib?: boolean;\n  stdLibURL?: string;\n  stdin?: () => string;\n  stdout?: (msg: string) => void;\n  stderr?: (msg: string) => void;\n  jsglobals?: object;\n  args: string[];\n  _node_mounts: string[];\n};\n\n/**\n * Load the main Pyodide wasm module and initialize it.\n *\n * @returns The :ref:`js-api-pyodide` module.\n * @memberof globalThis\n * @async\n */\nexport async function loadPyodide(\n  options: {\n    /**\n     * The URL from which Pyodide will load the main Pyodide runtime and\n     * packages. It is recommended that you leave this unchanged, providing an\n     * incorrect value can cause broken behavior.\n     *\n     * Default: The url that Pyodide is loaded from with the file name\n     * (``pyodide.js`` or ``pyodide.mjs``) removed.\n     */\n    indexURL?: string;\n\n    /**\n     * file. You can produce custom lock files with :py:func:`micropip.freeze`.\n     * Default: ```${indexURL}/repodata.json```\n     */\n    lockFileURL?: string;\n\n    /**\n     * The home directory which Pyodide will use inside virtual file system.\n     * Default: ``\"/home/pyodide\"``\n     */\n    homedir?: string;\n    /**\n     * Load the full Python standard library. Setting this to false excludes\n     * unvendored modules from the standard library.\n     * Default: ``false``\n     */\n    fullStdLib?: boolean;\n    /**\n     * The URL from which to load the standard library ``python_stdlib.zip``\n     * file. This URL includes the most of the Python stadard library. Some\n     * stdlib modules were unvendored, and can be loaded separately\n     * with ``fullStdLib=true`` option or by their package name.\n     * Default: ```${indexURL}/python_stdlib.zip```\n     */\n    stdLibURL?: string;\n    /**\n     * Override the standard input callback. Should ask the user for one line of\n     * input.\n     */\n    stdin?: () => string;\n    /**\n     * Override the standard output callback.\n     */\n    stdout?: (msg: string) => void;\n    /**\n     * Override the standard error output callback.\n     */\n    stderr?: (msg: string) => void;\n    /**\n     * The object that Pyodide will use for the ``js`` module.\n     * Default: ``globalThis``\n     */\n    jsglobals?: object;\n    /**\n     * Command line arguments to pass to Python on startup. See `Python command\n     * line interface options\n     * <https://docs.python.org/3.10/using/cmdline.html#interface-options>`_ for\n     * more details. Default: ``[]``\n     */\n    args?: string[];\n    /**\n     * @ignore\n     */\n    _node_mounts?: string[];\n  } = {},\n): Promise<PyodideInterface> {\n  await initNodeModules();\n  let indexURL = options.indexURL || calculateIndexURL();\n  indexURL = resolvePath(indexURL); // A relative indexURL causes havoc.\n  if (!indexURL.endsWith(\"/\")) {\n    indexURL += \"/\";\n  }\n  options.indexURL = indexURL;\n\n  const default_config = {\n    fullStdLib: false,\n    jsglobals: globalThis,\n    stdin: globalThis.prompt ? globalThis.prompt : undefined,\n    homedir: \"/home/pyodide\",\n    lockFileURL: indexURL! + \"repodata.json\",\n    args: [],\n    _node_mounts: [],\n    packageCacheDir: indexURL,\n  };\n  const config = Object.assign(default_config, options) as ConfigType;\n\n  const Module = createModule();\n  Module.print = config.stdout;\n  Module.printErr = config.stderr;\n  Module.arguments = config.args;\n  const API: any = { config };\n  Module.API = API;\n\n  initializeFileSystem(Module, config);\n\n  const moduleLoaded = new Promise((r) => (Module.postRun = r));\n\n  // locateFile tells Emscripten where to find the data files that initialize\n  // the file system.\n  Module.locateFile = (path: string) => config.indexURL + path;\n\n  // If the pyodide.asm.js script has been imported, we can skip the dynamic import\n  // Users can then do a static import of the script in environments where\n  // dynamic importing is not allowed or not desirable, like module-type service workers\n  if (typeof _createPyodideModule !== \"function\") {\n    const scriptSrc = `${config.indexURL}pyodide.asm.js`;\n    await loadScript(scriptSrc);\n  }\n\n  // _createPyodideModule is specified in the Makefile by the linker flag:\n  // `-s EXPORT_NAME=\"'_createPyodideModule'\"`\n  await _createPyodideModule(Module);\n\n  // There is some work to be done between the module being \"ready\" and postRun\n  // being called.\n  await moduleLoaded;\n  // Handle early exit\n  if (Module.exited) {\n    throw Module.exited.toThrow;\n  }\n\n  if (API.version !== version) {\n    throw new Error(\n      `\\\nPyodide version does not match: '${version}' <==> '${API.version}'. \\\nIf you updated the Pyodide version, make sure you also updated the 'indexURL' parameter passed to loadPyodide.\\\n`,\n    );\n  }\n  // Disable further loading of Emscripten file_packager stuff.\n  Module.locateFile = (path: string) => {\n    throw new Error(\"Didn't expect to load any more file_packager files!\");\n  };\n\n  let [err, captured_stderr] = API.rawRun(\"import _pyodide_core\");\n  if (err) {\n    Module.API.fatal_loading_error(\n      \"Failed to import _pyodide_core\\n\",\n      captured_stderr,\n    );\n  }\n\n  const pyodide = finalizeBootstrap(API, config);\n\n  // runPython works starting here.\n  if (!pyodide.version.includes(\"dev\")) {\n    // Currently only used in Node to download packages the first time they are\n    // loaded. But in other cases it's harmless.\n    API.setCdnUrl(`https://cdn.jsdelivr.net/pyodide/v${pyodide.version}/full/`);\n  }\n  await API.packageIndexReady;\n\n  let importhook = API._pyodide._importhook;\n  importhook.register_module_not_found_hook(\n    API._import_name_to_package_name,\n    API.repodata_unvendored_stdlibs_and_test,\n  );\n\n  if (API.repodata_info.version !== version) {\n    throw new Error(\"Lock file version doesn't match Pyodide version\");\n  }\n  API.package_loader.init_loaded_packages();\n  if (config.fullStdLib) {\n    await pyodide.loadPackage(API.repodata_unvendored_stdlibs);\n  }\n  API.initializeStreams(config.stdin, config.stdout, config.stderr);\n  return pyodide;\n}\n","/**\n *\n * The Pyodide version.\n *\n * The version here is a Python version, following :pep:`440`. This is different\n * from the version in ``package.json`` which follows the node package manager\n * version convention.\n */\nexport const version: string = \"0.23.4\";\n","import { loadPyodide, version } from \"./pyodide\";\nexport { loadPyodide, version };\n(globalThis as any).loadPyodide = loadPyodide;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".bundle.js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t46: 1\n};\n\n// importScripts chunk loading\nvar installChunk = (data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = (chunkId, promises) => {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunkgrist_core\"] = self[\"webpackChunkgrist_core\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","/**\n * Letter codes for CellValue types encoded as [code, args...] tuples.\n */\nexport enum GristObjCode {\n  List            = 'L',\n  LookUp          = 'l',\n  Dict            = 'O',\n  DateTime        = 'D',\n  Date            = 'd',\n  Skip            = 'S',\n  Censored        = 'C',\n  Reference       = 'R',\n  ReferenceList   = 'r',\n  Exception       = 'E',\n  Pending         = 'P',\n  Unmarshallable  = 'U',\n  Versions        = 'V',\n}\n\n/**\n * Possible types of cell content.\n */\nexport type CellValue = number|string|boolean|null|[GristObjCode, ...unknown[]];\nexport interface BulkColValues { [colId: string]: CellValue[]; }\n\n/**\n * Map of column ids to `CellValue`s.\n *\n * ### CellValue\n *\n * Each `CellValue` may either be a primitive (e.g. `true`, `123`, `\"hello\"`, `null`)\n * or a tuple (JavaScript Array) representing a Grist object. The first element of the tuple\n * is a string character representing the object code. For example, `[\"L\", \"foo\", \"bar\"]`\n * is a `CellValue` of a Choice List column, where `\"L\"` is the type, and `\"foo\"` and\n * `\"bar\"` are the choices.\n *\n * ### Grist Object Types\n *\n * | Code | Type           |\n * | ---- | -------------- |\n * | L    | List           |\n * | l    | LookUp         |\n * | O    | Dict           |\n * | D    | DateTime       |\n * | d    | Date           |\n * | C    | Censored       |\n * | R    | Reference      |\n * | r    | ReferenceList  |\n * | E    | Exception      |\n * | P    | Pending        |\n * | U    | Unmarshallable |\n * | V    | Version        |\n */\nexport interface RowRecord {\n  id: number;\n  [colId: string]: CellValue;\n}\n\n/**\n * Map of column ids to `CellValue` arrays, where array indexes correspond to\n * rows.\n *\n * ### CellValue\n *\n * Each `CellValue` may either be a primitive (e.g. `true`, `123`, `\"hello\"`, `null`)\n * or a tuple (JavaScript Array) representing a Grist object. The first element of the tuple\n * is a string character representing the object code. For example, `[\"L\", \"foo\", \"bar\"]`\n * is a `CellValue` of a Choice List column, where `\"L\"` is the type, and `\"foo\"` and\n * `\"bar\"` are the choices.\n *\n * ### Grist Object Types\n *\n * | Code | Type           |\n * | ---- | -------------- |\n * | L    | List           |\n * | l    | LookUp         |\n * | O    | Dict           |\n * | D    | DateTime       |\n * | d    | Date           |\n * | C    | Censored       |\n * | R    | Reference      |\n * | r    | ReferenceList  |\n * | E    | Exception      |\n * | P    | Pending        |\n * | U    | Unmarshallable |\n * | V    | Version        |\n */\nexport interface RowRecords {\n  id: number[];\n  [colId: string]: CellValue[];\n}\n\nexport type GristType = 'Any' | 'Attachments' | 'Blob' | 'Bool' | 'Choice' | 'ChoiceList' |\n  'Date' | 'DateTime' |\n  'Id' | 'Int' | 'ManualSortPos' | 'Numeric' | 'PositionNumber' | 'Ref' | 'RefList' | 'Text';\n","import { CellValue, CellVersions } from 'app/common/DocActions';\nimport { GristObjCode, GristType } from 'app/plugin/GristData';\nimport isString = require('lodash/isString');\nimport { removePrefix } from \"./gutil\";\n\n// tslint:disable:object-literal-key-quotes\n\nexport type GristTypeInfo =\n  {type: 'DateTime', timezone: string} |\n  {type: 'Ref', tableId: string} |\n  {type: 'RefList', tableId: string} |\n  {type: Exclude<GristType, 'DateTime'|'Ref'|'RefList'>};\n\nexport const MANUALSORT = 'manualSort';\n\n// Whether a column is internal and should be hidden.\nexport function isHiddenCol(colId: string): boolean {\n  return colId.startsWith('gristHelper_') || colId === MANUALSORT;\n}\n\n// This mapping includes both the default value, and its representation for SQLite.\nconst _defaultValues: {[key in GristType]: [CellValue, string]} = {\n  'Any':              [ null,  \"NULL\"  ],\n  'Attachments':      [ null,  \"NULL\"  ],\n  'Blob':             [ null,  \"NULL\"  ],\n  // Bool is only supported by SQLite as 0 and 1 values.\n  'Bool':             [ false, \"0\" ],\n  'Choice':           [ '',    \"''\"    ],\n  'ChoiceList':       [ null,  \"NULL\"  ],\n  'Date':             [ null,  \"NULL\"  ],\n  'DateTime':         [ null,  \"NULL\"  ],\n  'Id':               [ 0,     \"0\"     ],\n  'Int':              [ 0,     \"0\"     ],\n  // Note that \"1e999\" is a way to store Infinity into SQLite. This is verified by \"Defaults\"\n  // tests in DocStorage.js. See also http://sqlite.1065341.n5.nabble.com/Infinity-td55327.html.\n  'ManualSortPos':    [ Number.POSITIVE_INFINITY, \"1e999\" ],\n  'Numeric':          [ 0,     \"0\"     ],\n  'PositionNumber':   [ Number.POSITIVE_INFINITY, \"1e999\" ],\n  'Ref':              [ 0,     \"0\"     ],\n  'RefList':          [ null,  \"NULL\"  ],\n  'Text':             [ '',    \"''\"    ],\n};\n\n\n/**\n * Given a grist column type (e.g Text, Numeric, ...) returns the default value for that type.\n * If options.sqlFormatted is true, returns the representation of the value for SQLite.\n */\nexport function getDefaultForType(colType: string, options: {sqlFormatted?: boolean} = {}) {\n  const type = extractTypeFromColType(colType);\n  return (_defaultValues[type as GristType] || _defaultValues.Any)[options.sqlFormatted ? 1 : 0];\n}\n\n/**\n * Convert a type like 'Numeric', 'DateTime:America/New_York', or 'Ref:Table1' to a GristTypeInfo\n * object.\n */\nexport function extractInfoFromColType(colType: string): GristTypeInfo {\n  if (colType === \"Attachments\") {\n    return {type: \"RefList\", tableId: \"_grist_Attachments\"};\n  }\n  const colon = colType.indexOf(':');\n  const [type, arg] = (colon === -1) ? [colType] : [colType.slice(0, colon), colType.slice(colon + 1)];\n  return (type === 'Ref') ? {type, tableId: String(arg)} :\n    (type === 'RefList')  ? {type, tableId: String(arg)} :\n    (type === 'DateTime') ? {type, timezone: String(arg)} :\n    {type} as GristTypeInfo;\n}\n\n/**\n * Re-encodes a CellValue of a given Grist type as a value suitable to use in an Any column. E.g.\n *    reencodeAsAny(123, 'Numeric') -> 123\n *    reencodeAsAny(123, 'Date') -> ['d', 123]\n *    reencodeAsAny(123, 'Reference', 'Table1') -> ['R', 'Table1', 123]\n */\nexport function reencodeAsAny(value: CellValue, typeInfo: GristTypeInfo): CellValue {\n  if (typeof value === 'number') {\n    switch (typeInfo.type) {\n      case 'Date': return [GristObjCode.Date, value];\n      case 'DateTime': return [GristObjCode.DateTime, value, typeInfo.timezone];\n      case 'Ref': return [GristObjCode.Reference, typeInfo.tableId, value];\n    }\n  }\n  return value;\n}\n\n\n/**\n * Returns whether a value (as received in a DocAction) represents a custom object.\n */\nexport function isObject(value: CellValue): value is [GristObjCode, any?] {\n  return Array.isArray(value);\n}\n\n/**\n * Returns GristObjCode of the value if the value is an object, or null otherwise.\n * The return type includes any string, since we should not assume we can only get valid codes.\n */\nexport function getObjCode(value: CellValue): GristObjCode|string|null {\n  return Array.isArray(value) ? value[0] : null;\n}\n\n/**\n * Returns whether a value (as received in a DocAction) represents a raised exception.\n */\nexport function isRaisedException(value: CellValue): boolean {\n  return getObjCode(value) === GristObjCode.Exception;\n}\n\n/**\n * Returns whether a value (as received in a DocAction) represents a group of versions for\n * a comparison or conflict.\n */\nexport function isVersions(value: CellValue): value is [GristObjCode.Versions, CellVersions] {\n  return getObjCode(value) === GristObjCode.Versions;\n}\n\nexport function isSkip(value: CellValue): value is [GristObjCode.Skip] {\n  return getObjCode(value) === GristObjCode.Skip;\n}\n\nexport function isCensored(value: CellValue): value is [GristObjCode.Censored] {\n  return getObjCode(value) === GristObjCode.Censored;\n}\n\n/**\n * Returns whether a value (as received in a DocAction) represents a list.\n */\nexport function isList(value: CellValue): value is [GristObjCode.List, ...CellValue[]] {\n  return Array.isArray(value) && value[0] === GristObjCode.List;\n}\n\n/**\n * Returns whether a value (as received in a DocAction) represents a reference to a record.\n */\nexport function isReference(value: CellValue): value is [GristObjCode.Reference, string, number] {\n  return Array.isArray(value) && value[0] === GristObjCode.Reference;\n}\n\n/**\n * Returns whether a value (as received in a DocAction) represents a reference list (RecordSet).\n */\nexport function isReferenceList(value: CellValue): value is [GristObjCode.ReferenceList, string, number[]] {\n  return Array.isArray(value) && value[0] === GristObjCode.ReferenceList;\n}\n\n/**\n * Returns whether a value (as received in a DocAction) represents a reference or reference list.\n */\nexport function isReferencing(value: CellValue):\n  value is [GristObjCode.ReferenceList|GristObjCode.Reference, string, number[]|number]\n{\n  return Array.isArray(value) &&\n    (value[0] === GristObjCode.ReferenceList || value[0] === GristObjCode.Reference);\n}\n\n/**\n * Returns whether a value (as received in a DocAction) represents a list or is null,\n * which is a valid value for list types in grist.\n */\nexport function isListOrNull(value: CellValue): boolean {\n  return value === null || isList(value);\n}\n\n/**\n * Returns whether a value (as received in a DocAction) represents an empty list.\n */\nexport function isEmptyList(value: CellValue): boolean {\n  return Array.isArray(value) && value.length === 1 && value[0] === GristObjCode.List;\n}\n\nfunction isNumber(v: CellValue) { return typeof v === 'number' || typeof v === 'boolean'; }\nfunction isNumberOrNull(v: CellValue) { return isNumber(v) || v === null; }\nfunction isBoolean(v: CellValue) { return typeof v === 'boolean' || v === 1 || v === 0; }\n\n// These values are not regular cell values, even in a column of type Any.\nconst abnormalValueTypes: string[] = [GristObjCode.Exception, GristObjCode.Pending, GristObjCode.Skip,\n                                      GristObjCode.Unmarshallable, GristObjCode.Versions];\n\nfunction isNormalValue(value: CellValue) {\n  return !abnormalValueTypes.includes(getObjCode(value)!);\n}\n\n/**\n * Map of Grist type to an \"isRightType\" checker function, which determines if a given values type\n * matches the declared type of the column.\n */\nconst rightType: {[key in GristType]: (value: CellValue) => boolean} = {\n  Any:            isNormalValue,\n  Attachments:    isListOrNull,\n  Text:           isString,\n  Blob:           isString,\n  Int:            isNumberOrNull,\n  Bool:           isBoolean,\n  Date:           isNumberOrNull,\n  DateTime:       isNumberOrNull,\n  Numeric:        isNumberOrNull,\n  Id:             isNumber,\n  PositionNumber: isNumber,\n  ManualSortPos:  isNumber,\n  Ref:            isNumber,\n  RefList:        isListOrNull,\n  Choice:         isString,\n  ChoiceList:     isListOrNull,\n};\n\nexport function isRightType(type: string): undefined | ((value: CellValue, options?: any) => boolean) {\n  return rightType[type as GristType];\n}\n\nexport function extractTypeFromColType(type: string): string {\n  if (!type) { return type; }\n  const colon = type.indexOf(':');\n  return (colon === -1 ? type : type.slice(0, colon));\n}\n\n/**\n * Enum for values of columns' recalcWhen property, corresponding to Python definitions in\n * schema.py.\n */\nexport enum RecalcWhen {\n  DEFAULT = 0,         // Calculate on new records or when any field in recalcDeps changes.\n  NEVER = 1,           // Don't calculate automatically (but user can trigger manually)\n  MANUAL_UPDATES = 2,  // Calculate on new records and on manual updates to any data field.\n}\n\n\n/**\n * Converts SQL type strings produced by the Sequelize library into its corresponding\n * Grist type. The list of types is based on an analysis of SQL type string outputs\n * produced by the Sequelize library (mostly covered in lib/data-types.js). Some\n * additional engine/dialect specific types are detailed in dialect directories.\n *\n * TODO: A handful of exotic SQL types (mostly from PostgreSQL) will currently throw an\n * Error, rather than returning a type. Further testing is required to determine\n * whether Grist can manage those data types.\n *\n * @param  {String} sqlType A string produced by Sequelize's describeTable query\n * @return {String}         The corresponding Grist type string\n * @throws {Error}          If the sqlType is unrecognized or unsupported\n */\nexport function sequelizeToGristType(sqlType: string): GristType {\n  // Sequelize type strings can include parens (e.g., `CHAR(10)`). This function\n  // ignores those additional details when determining the Grist type.\n  let endMarker = sqlType.length;\n  const parensMarker = sqlType.indexOf('(');\n  endMarker = parensMarker > 0 ? parensMarker : endMarker;\n\n  // Type strings might also include a space after the basic type description.\n  // The type `DOUBLE PRECISION` is one such example, but modifiers or attributes\n  // relevant to the type might also appear after the type itself (e.g., UNSIGNED,\n  // NONZERO). These are ignored when determining the Grist type.\n  const spaceMarker = sqlType.indexOf(' ');\n  endMarker = spaceMarker > 0 && spaceMarker < endMarker ? spaceMarker : endMarker;\n\n  switch (sqlType.substring(0, endMarker)) {\n    case 'INTEGER':\n    case 'BIGINT':\n    case 'SMALLINT':\n    case 'INT':\n      return 'Int';\n    case 'NUMBER':\n    case 'FLOAT':\n    case 'DECIMAL':\n    case 'NUMERIC':\n    case 'REAL':\n    case 'DOUBLE':\n    case 'DOUBLE PRECISION':\n      return 'Numeric';\n    case 'BOOLEAN':\n    case 'TINYINT':\n      return 'Bool';\n    case 'STRING':\n    case 'CHAR':\n    case 'TEXT':\n    case 'UUID':\n    case 'UUIDV1':\n    case 'UUIDV4':\n    case 'VARCHAR':\n    case 'NVARCHAR':\n    case 'TINYTEXT':\n    case 'MEDIUMTEXT':\n    case 'LONGTEXT':\n    case 'ENUM':\n      return 'Text';\n    case 'TIME':\n    case 'DATE':\n    case 'DATEONLY':\n    case 'DATETIME':\n    case 'NOW':\n      return 'Text';\n    case 'BLOB':\n    case 'TINYBLOB':\n    case 'MEDIUMBLOB':\n    case 'LONGBLOB':\n      // TODO: Passing binary data to the Sandbox is throwing Errors. Proper support\n      // for these Blob data types requires some more investigation.\n      throw new Error('SQL type: `' + sqlType + '` is currently unsupported');\n    case 'NONE':\n    case 'HSTORE':\n    case 'JSON':\n    case 'JSONB':\n    case 'VIRTUAL':\n    case 'ARRAY':\n    case 'RANGE':\n    case 'GEOMETRY':\n      throw new Error('SQL type: `' + sqlType + '` is currently untested');\n    default:\n      throw new Error('Unrecognized datatype: `' + sqlType + '`');\n  }\n}\n\nexport function getReferencedTableId(type: string) {\n  if (type === \"Attachments\") {\n    return \"_grist_Attachments\";\n  }\n  return removePrefix(type, \"Ref:\") || removePrefix(type, \"RefList:\");\n}\n\nexport function isRefListType(type: string) {\n  return type === \"Attachments\" || type?.startsWith('RefList:');\n}\n\nexport function isListType(type: string) {\n  return type === \"ChoiceList\" || isRefListType(type);\n}\n\nexport function isNumberType(type: string|undefined) {\n  return ['Numeric', 'Int'].includes(type || '');\n}\n\nexport function isDateLikeType(type: string) {\n  return type === 'Date' || type.startsWith('DateTime');\n}\n\nexport function isFullReferencingType(type: string) {\n  return type.startsWith('Ref:') || isRefListType(type);\n}\n\nexport function isValidRuleValue(value: CellValue|undefined) {\n  // We want to strictly test if a value is boolean, when the value is 0 or 1 it might\n  // indicate other number in the future.\n  return value === null || typeof value === 'boolean';\n}\n\nexport type RefListValue = [GristObjCode.List, ...number[]]|null;\n\n/**\n * Type of cell metadata information.\n */\nexport enum CellInfoType {\n  COMMENT = 1,\n}\n","/**\n * Here are the most relevant formats we want to support.\n *   -1234.56     Plain\n *   -1,234.56    Number (with separators)\n *   12.34%       Percent\n *   1.23E3       Scientific\n *   $(1,234.56)  Accounting\n *   (1,234.56)   Financial\n *   -$1,234.56   Currency\n *\n * We implement a button-based UI, using one selector button to choose mode:\n *    none  = NumMode undefined (plain number, no thousand separators)\n *    `$`   = NumMode 'currency'\n *    `,`   = NumMode 'decimal' (plain number, with thousand separators)\n *    `%`   = NumMode 'percent'\n *    `Exp` = NumMode 'scientific'\n * A second toggle button is `(-)` for Sign, to use parentheses rather than \"-\" for negative\n * numbers. It is Ignored and disabled when mode is 'scientific'.\n */\n\nimport {clamp} from 'app/common/gutil';\nimport {StringUnion} from 'app/common/StringUnion';\nimport * as LocaleCurrency from \"locale-currency\";\nimport {FormatOptions} from 'app/common/ValueFormatter';\nimport {DocumentSettings} from 'app/common/DocumentSettings';\n\n// Options for number formatting.\nexport const NumMode = StringUnion('currency', 'decimal', 'percent', 'scientific');\nexport type NumMode = typeof NumMode.type;\nexport type NumSign = 'parens';\n\nexport interface NumberFormatOptions extends FormatOptions {\n  numMode?: NumMode|null;\n  numSign?: NumSign|null;\n  decimals?: number|null;      // aka minimum fraction digits\n  maxDecimals?: number|null;\n  currency?: string|null;\n}\n\nexport function getCurrency(options: NumberFormatOptions, docSettings: DocumentSettings): string {\n  return options.currency || docSettings.currency || LocaleCurrency.getCurrency(docSettings.locale ?? 'en-US');\n}\n\nexport function buildNumberFormat(options: NumberFormatOptions, docSettings: DocumentSettings): Intl.NumberFormat {\n  const currency = getCurrency(options, docSettings);\n  const nfOptions: Intl.NumberFormatOptions = parseNumMode(options.numMode, currency);\n  // numSign is implemented outside of Intl.NumberFormat since the latter's similar 'currencySign'\n  // option is not well-supported, and doesn't apply to non-currency formats.\n\n  if (options.decimals !== undefined && options.decimals !== null) {\n    // Should be at least 0\n    nfOptions.minimumFractionDigits = clamp(Number(options.decimals), 0, 20);\n  }\n\n  // maximumFractionDigits must not be less than the minimum, so we need to know the minimum\n  // implied by numMode.\n  const tmp = new Intl.NumberFormat(docSettings.locale, nfOptions).resolvedOptions();\n\n  if (options.maxDecimals !== undefined && options.maxDecimals !== null) {\n    // Should be at least 0 and at least minimumFractionDigits.\n    nfOptions.maximumFractionDigits = clamp(Number(options.maxDecimals), tmp.minimumFractionDigits || 0, 20);\n  } else if (!options.numMode) {\n    // For the default format, keep max digits at 10 as we had before.\n    nfOptions.maximumFractionDigits = clamp(10, tmp.minimumFractionDigits || 0, 20);\n  }\n\n  return new Intl.NumberFormat(docSettings.locale, nfOptions);\n}\n\n// Safari 13 and some other browsers don't support narrowSymbol option:\n// https://github.com/mdn/browser-compat-data/issues/8985\n// https://caniuse.com/?search=currencyDisplay\nconst currencyDisplay = (function(){\n  try {\n    new Intl.NumberFormat('en-US', {style: 'currency', currency: 'USD', currencyDisplay: 'narrowSymbol'});\n    return 'narrowSymbol';\n  } catch(err) {\n    return 'symbol';\n  }\n})();\n\nexport function parseNumMode(numMode?: NumMode|null, currency?: string): Intl.NumberFormatOptions {\n  switch (numMode) {\n    case 'currency': return {style: 'currency', currency, currencyDisplay};\n    case 'decimal': return {useGrouping: true};\n    case 'percent': return {style: 'percent'};\n    // TODO 'notation' option (and therefore numMode 'scientific') works on recent Firefox and\n    // Chrome, not on Safari or Node 10.\n    case 'scientific': return {notation: 'scientific'} as Intl.NumberFormatOptions;\n    default: return {useGrouping: false};\n  }\n}\n","/**\n * TypeScript will infer a string union type from the literal values passed to\n * this function. Without `extends string`, it would instead generalize them\n * to the common string type.\n *\n * Example definition:\n * const Race = StringUnion(\n *   \"orc\",\n *   \"human\",\n *   \"night elf\",\n *   \"undead\",\n * );\n * type Race = typeof Race.type;\n *\n * For more details, see:\n * https://stackoverflow.com/questions/36836011/checking-validity-of-string\n *   -literal-union-type-at-runtime?answertab=active#tab-top\n */\nexport const StringUnion = <UnionType extends string>(...values: UnionType[]) => {\n  Object.freeze(values);\n  const valueSet: Set<string> = new Set(values);\n\n  const guard = (value: string): value is UnionType => {\n    return valueSet.has(value);\n  };\n\n  const check = (value: string): UnionType => {\n    if (!guard(value)) {\n      const actual = JSON.stringify(value);\n      const expected = values.map(s => JSON.stringify(s)).join(' | ');\n      throw new TypeError(`Value '${actual}' is not assignable to type '${expected}'.`);\n    }\n    return value;\n  };\n\n  const checkAll = (arr: string[]): UnionType[] => {\n    return arr.map(check);\n  };\n\n  /**\n   * StringUnion.parse(value) returns value when it's valid, and undefined otherwise.\n   */\n  const parse = (value: string|null|undefined): UnionType|undefined => {\n    return value != null && guard(value) ? value : undefined;\n  };\n\n  const unionNamespace = {guard, check, parse, values, checkAll};\n  return Object.freeze(unionNamespace as typeof unionNamespace & {type: UnionType});\n};\n","/**\n * Counterpart of NumberFormat.ts.\n * Generic functionality for parsing numbers formatted by Intl.NumberFormat,\n * not tied to documents or anything.\n */\n\nimport {DocumentSettings} from 'app/common/DocumentSettings';\nimport {getDistinctValues} from 'app/common/gutil';\nimport {getCurrency, NumberFormatOptions, NumMode, parseNumMode} from 'app/common/NumberFormat';\nimport escapeRegExp = require('lodash/escapeRegExp');\nimport last = require('lodash/last');\n\n// Possible values of Intl.NumberFormat.formatToParts[i].type\n// Seems Intl.NumberFormatPartTypes is not quite complete\ntype NumberFormatPartTypes = Intl.NumberFormatPartTypes | 'exponentSeparator';\n\n/**\n * Returns a map converting the decimal digits used in the given formatter\n * to the digits 0123456789.\n * Excludes digits which don't need conversion, so for many locales this is empty.\n */\nfunction getDigitsMap(locale: string) {\n  const formatter = Intl.NumberFormat(locale);\n  const result = new Map<string, string>();\n  for (let i = 0; i < 10; i++) {\n    const digit = String(i);\n    const localeDigit = formatter.format(i);\n    if (localeDigit !== digit) {\n      result.set(localeDigit, digit);\n    }\n  }\n  return result;\n}\n\ninterface ParsedOptions {\n  isPercent: boolean;\n  isCurrency: boolean;\n  isParenthesised: boolean;\n  hasDigitGroupSeparator: boolean;\n  isScientific: boolean;\n}\n\nexport default class NumberParse {\n  // Regex for whitespace and some control characters we need to remove\n  // 200e = Left-to-right mark\n  // 200f = Right-to-left mark\n  // 061c = Arabic letter mark\n  public static readonly removeCharsRegex = /[\\s\\u200e\\u200f\\u061c]/g;\n\n  public static fromSettings(docSettings: DocumentSettings, options: NumberFormatOptions = {}) {\n    return new NumberParse(docSettings.locale, getCurrency(options, docSettings));\n  }\n\n  // Many attributes are public for easy testing.\n  public readonly currencySymbol: string;\n  public readonly percentageSymbol: string;\n  public readonly digitGroupSeparator: string;\n  public readonly digitGroupSeparatorCurrency: string;\n  public readonly exponentSeparator: string;\n  public readonly decimalSeparator: string;\n  public readonly minusSign: string;\n  public readonly defaultNumDecimalsCurrency: number;\n\n  public readonly digitsMap: Map<string, string>;\n\n  public readonly currencyEndsInMinusSign: boolean;\n\n  private readonly _exponentSeparatorRegex: RegExp;\n  private readonly _digitGroupSeparatorRegex: RegExp;\n\n  // Function which replaces keys of digitsMap (i.e. locale-specific digits)\n  // with corresponding digits from 0123456789.\n  private readonly _replaceDigits: (s: string) => string;\n\n  constructor(locale: string, currency: string) {\n    const parts = new Map<NumMode, Intl.NumberFormatPart[]>();\n    for (const numMode of NumMode.values) {\n      const formatter = Intl.NumberFormat(locale, parseNumMode(numMode, currency));\n      const formatParts = formatter.formatToParts(-1234567.5678);\n      parts.set(numMode, formatParts);\n    }\n\n    function getPart(partType: NumberFormatPartTypes, numMode: NumMode = \"decimal\"): string {\n      const part = parts.get(numMode)!.find(p => p.type === partType);\n      // Only time we expect `part` to be undefined is for digitGroupSeparatorCurrency\n      return part?.value || '';\n    }\n\n    this.currencySymbol = getPart('currency', 'currency');\n    this.percentageSymbol = getPart('percentSign', 'percent');\n    this.exponentSeparator = getPart('exponentSeparator', 'scientific');\n    this.minusSign = getPart('minusSign');\n    this.decimalSeparator = getPart('decimal');\n\n    // Separators for groups of digits, typically groups of 3, i.e. 'thousands separators'.\n    // A few locales have different separators for currency and non-currency.\n    // We check for both but don't check which one is used, currency or not.\n    this.digitGroupSeparator = getPart('group');\n    this.digitGroupSeparatorCurrency = getPart('group', 'currency');\n\n    // A few locales format negative currency amounts ending in '-', e.g. ' 1,00-'\n    this.currencyEndsInMinusSign = last(parts.get('currency'))!.type === 'minusSign';\n\n    // Default number of fractional digits for currency,\n    // e.g. this is 2 for USD because 1 is formatted as $1.00\n    this.defaultNumDecimalsCurrency = getPart(\"fraction\", \"currency\")?.length || 0;\n\n    // Since JS and Python allow both e and E for scientific notation, it seems fair that other\n    // locales should be case insensitive for this.\n    this._exponentSeparatorRegex = new RegExp(escapeRegExp(this.exponentSeparator), 'i');\n\n    // Overall the parser is quite lax about digit separators.\n    // We only require that the separator is followed by at least 2 digits,\n    // because India groups digits in pairs after the first 3.\n    // More careful checking is probably more complicated than is worth it.\n    this._digitGroupSeparatorRegex = new RegExp(\n      `[${escapeRegExp(\n        this.digitGroupSeparator +\n        this.digitGroupSeparatorCurrency\n      )}](\\\\d\\\\d)`,\n      'g'\n    );\n\n    const digitsMap = this.digitsMap = getDigitsMap(locale);\n    if (digitsMap.size === 0) {\n      this._replaceDigits = (s: string) => s;\n    } else {\n      const digitsRegex = new RegExp([...digitsMap.keys()].join(\"|\"), \"g\");\n      this._replaceDigits = (s: string) => s.replace(digitsRegex, d => digitsMap.get(d) || d);\n    }\n  }\n\n  /**\n   * If the string looks like a number formatted by Grist using this parser's locale and currency (or at least close)\n   * then returns an object where:\n   *   - `result` is that number, the only thing most callers need\n   *   - `cleaned` is a string derived from `value` which can be parsed directly by Number, although `result`\n   *      is still processed a bit further than that, e.g. dividing by 100 for percentages.\n   *   - `options` describes how the number was apparently formatted.\n   *\n   * Returns null otherwise.\n   */\n  public parse(value: string): { result: number, cleaned: string, options: ParsedOptions } | null {\n    // Remove characters before checking for parentheses on the ends of the string.\n    const [value2, isCurrency] = removeSymbol(value, this.currencySymbol);\n    const [value3, isPercent] = removeSymbol(value2, this.percentageSymbol);\n\n    // Remove whitespace and special characters, after currency because some currencies contain spaces.\n    value = value3.replace(NumberParse.removeCharsRegex, \"\");\n\n    const isParenthesised = value[0] === \"(\" && value[value.length - 1] === \")\";\n    if (isParenthesised) {\n      value = value.substring(1, value.length - 1);\n    }\n\n    // Must check for empty string directly because Number('') is 0 :facepalm:\n    // Check early so we can return early for performance.\n    // Nothing after this should potentially produce an empty string.\n    if (value === '') {\n      return null;\n    }\n\n    // Replace various symbols with the standard versions recognised by JS Number.\n    // Note that this also allows the 'standard' symbols ('e', '.', '-', and '0123456789')\n    // even if the locale doesn't use them when formatting,\n    // although '.' will still be removed if it's a digit separator.\n\n    // Check for exponent separator before replacing digits\n    // because it can contain locale-specific digits representing '10' as in 'x10^'.\n    const withExponent = value;\n    value = value.replace(this._exponentSeparatorRegex, \"e\");\n    const isScientific = withExponent !== value;\n\n    value = this._replaceDigits(value);\n\n    // Must come after replacing digits because the regex uses \\d\n    // which doesn't work for locale-specific digits.\n    // This simply removes the separators, $1 is a captured group of digits which we keep.\n    const withSeparators = value;\n    value = value.replace(this._digitGroupSeparatorRegex, \"$1\");\n    const hasDigitGroupSeparator = withSeparators !== value;\n\n    // Must come after the digit separator replacement\n    // because the digit separator might be '.'\n    value = value.replace(this.decimalSeparator, '.');\n\n    // .replace with a string only replaces once,\n    // and a number can contain two minus signs when using scientific notation\n    value = value.replace(this.minusSign, \"-\");\n    value = value.replace(this.minusSign, \"-\");\n\n    // Move '-' from the end to the beginning when appropriate (which is rare)\n    if (isCurrency && this.currencyEndsInMinusSign && value.endsWith(\"-\")) {\n      value = \"-\" + value.substring(0, value.length - 1);\n    }\n\n    // Number is more strict than parseFloat which allows extra trailing characters.\n    let result = Number(value);\n    if (isNaN(result)) {\n      return null;\n    }\n\n    // Parentheses represent a negative number, e.g. (123) -> -123\n    // (-123) is treated as an error\n    if (isParenthesised) {\n      if (result <= 0) {\n        return null;\n      }\n      result = -result;\n    }\n\n    if (isPercent) {\n      result *= 0.01;\n    }\n\n    return {\n      result,\n      cleaned: value,\n      options: {isCurrency, isPercent, isParenthesised, hasDigitGroupSeparator, isScientific}\n    };\n  }\n\n  public guessOptions(values: Array<string | null>): NumberFormatOptions {\n    // null: undecided\n    // true: negative numbers should be parenthesised\n    // false: they should not\n    let parens: boolean | null = null;\n\n    // If any of the numbers have thousands separators, that's enough to guess that option\n    let anyHasDigitGroupSeparator = false;\n\n    // Minimum number of decimal places, guessed by looking for trailing 0s after the decimal point\n    let decimals = 0;\n    const decimalsRegex = /\\.\\d+/;\n    // Maximum number of decimal places. We never actually guess a value for this option,\n    // but for currencies we need to check if there are fewer decimal places than the default.\n    let maxDecimals = 0;\n\n    // Keep track of the number of modes seen to pick the most common\n    const modes = {} as Record<NumMode, number>;\n    for (const mode of NumMode.values) {\n      modes[mode] = 0;\n    }\n\n    for (const value of getDistinctValues(values)) {\n      if (!value) {\n        continue;\n      }\n      const parsed = this.parse(value);\n      if (!parsed) {\n        continue;\n      }\n      const {\n        result,\n        cleaned,\n        options: {isCurrency, isPercent, isParenthesised, hasDigitGroupSeparator, isScientific}\n      } = parsed;\n\n      if (result < 0 && !isParenthesised) {\n        // If we see a negative number not surrounded by parens, assume that any other parens mean something else\n        parens = false;\n      } else if (parens === null && isParenthesised) {\n        // If we're still unsure about parens (i.e. the above case hasn't been encountered)\n        // then one parenthesised number is enough to guess that the parens option should be used.\n        parens = true;\n      }\n\n      // If any of the numbers have thousands separators, that's enough to guess that option\n      anyHasDigitGroupSeparator = anyHasDigitGroupSeparator || hasDigitGroupSeparator;\n\n      let mode: NumMode = \"decimal\";\n      if (isCurrency) {\n        mode = \"currency\";\n      } else if (isPercent) {\n        mode = \"percent\";\n      } else if (isScientific) {\n        mode = \"scientific\";\n      }\n      modes[mode] += 1;\n\n      const decimalsMatch = decimalsRegex.exec(cleaned);\n      if (decimalsMatch) {\n        // Number of digits after the '.' (which is part of the match, hence the -1)\n        const numDecimals = decimalsMatch[0].length - 1;\n        maxDecimals = Math.max(maxDecimals, numDecimals);\n        if (decimalsMatch[0].endsWith(\"0\")) {\n          decimals = Math.max(decimals, numDecimals);\n        }\n      }\n    }\n\n    const maxCount = Math.max(...Object.values(modes));\n    if (maxCount === 0) {\n      // No numbers parsed at all, so don't guess any options\n      return {};\n    }\n\n    const result: NumberFormatOptions = {};\n\n    // Find the most common mode.\n    const maxMode: NumMode = NumMode.values.find((k) => modes[k] === maxCount)!;\n\n    // 'decimal' is the default mode above when counting,\n    // but only guess it as an actual option if digit separators were used at least once.\n    if (maxMode !== \"decimal\" || anyHasDigitGroupSeparator) {\n      result.numMode = maxMode;\n    }\n\n    if (parens) {\n      result.numSign = \"parens\";\n    }\n\n    // Specify minimum number of decimal places if we saw any trailing 0s after '.'\n    // Otherwise explicitly set it to 0 if needed to suppress the default for that currency.\n    if (decimals > 0 || maxMode === \"currency\" && maxDecimals < this.defaultNumDecimalsCurrency) {\n      result.decimals = decimals;\n    }\n\n    return result;\n  }\n}\n\n/**\n * Returns a tuple [removed, wasPresent]\n * - `removed` is the given string `value` with `symbol` removed at most once.\n * - `wasPresent` is `true` if `symbol` was present in `value` and was thus removed.\n */\nfunction removeSymbol(value: string, symbol: string): [string, boolean] {\n  const removed = value.replace(symbol, \"\");\n  const wasPresent = removed.length < value.length;\n  return [removed, wasPresent];\n}\n","import escapeRegExp = require('lodash/escapeRegExp');\nimport last = require('lodash/last');\nimport memoize = require('lodash/memoize');\nimport {getDistinctValues, isNonNullish} from 'app/common/gutil';\n// Simply importing 'moment-guess' inconsistently imports bundle.js or bundle.esm.js depending on environment\nimport guessFormat from '@gristlabs/moment-guess/dist/bundle.js';\nimport moment from 'moment-timezone';\n\n// When using YY format, use a consistent interpretation in datepicker and in moment parsing: add\n// 2000 if the result is at most 10 years greater than the current year; otherwise add 1900. See\n// https://bootstrap-datepicker.readthedocs.io/en/latest/options.html#assumenearbyyear and\n// \"Parsing two digit years\" in https://momentjs.com/docs/#/parsing/string-format/.\nexport const TWO_DIGIT_YEAR_THRESHOLD = 10;\nconst MAX_TWO_DIGIT_YEAR = new Date().getFullYear() + TWO_DIGIT_YEAR_THRESHOLD - 2000;\n\n// Moment suggests that overriding this is fine, but we need to force TypeScript to allow it.\n(moment as any).parseTwoDigitYear = function(yearString: string): number {\n  const year = parseInt(yearString, 10);\n  return year + (year > MAX_TWO_DIGIT_YEAR ? 1900 : 2000);\n};\n\n\n// Order of formats to try if the date cannot be parsed as the currently set format.\n// Formats are parsed in momentjs strict mode, but separator matching and the MM/DD\n// two digit requirement are ignored. Also, partial completion is permitted, so formats\n// may match even if only beginning elements are provided.\n// TODO: These should be affected by the user's locale/settings.\n// TODO: We may want to consider adding default time formats as well to support more\n//  time formats.\nconst PARSER_FORMATS: string[] = [\n  'M D YYYY',\n  'M D YY',\n  'M D',\n  'M',\n  'MMMM D YYYY',\n  'MMMM D',\n  'MMMM Do YYYY',\n  'MMMM Do',\n  'D MMMM YYYY',\n  'D MMMM',\n  'Do MMMM YYYY',\n  'Do MMMM',\n  'MMMM',\n  'MMM D YYYY',\n  'MMM D',\n  'MMM Do YYYY',\n  'MMM Do',\n  'D MMM YYYY',\n  'D MMM',\n  'Do MMM YYYY',\n  'Do MMM',\n  'MMM',\n  'YYYY M D',\n  'YYYY M',\n  'YYYY',\n  'D M YYYY',\n  'D M YY',\n  'D M',\n  'D'\n];\n\nconst UNAMBIGUOUS_FORMATS = [\n  'YYYY M D',\n  ...PARSER_FORMATS.filter(f => f.includes(\"MMM\")),\n];\n\nconst TIME_REGEX = /(?:^|\\s+|T)(?:(\\d\\d?)(?::(\\d\\d?)(?::(\\d\\d?))?)?|(\\d\\d?)(\\d\\d))\\s*([ap]m?)?$/i;\n// [^a-zA-Z] because no letters are allowed directly before the abbreviation\nconst UTC_REGEX = /[^a-zA-Z](UTC?|GMT|Z)$/i;\nconst NUMERIC_TZ_REGEX = /([+-]\\d\\d?)(?::?(\\d\\d))?$/i;\n\n// Not picky about separators, so replace them in the date and format strings to be spaces.\nconst SEPARATORS = /[\\W_]+/g;\n\nconst tzAbbreviations = memoize((tzName: string): RegExp => {\n  // Some abbreviations are just e.g. +05\n  // and escaping the + seems better than filtering\n  const abbreviations = new Set(moment.tz.zone(tzName)!.abbrs.map(escapeRegExp));\n\n  const union = [...abbreviations].join('|');\n\n  // [^a-zA-Z] because no letters are allowed directly before the abbreviation\n  // so for example CEST won't match even if EST does\n  return new RegExp(`[^a-zA-Z](${union})$`, 'i');\n});\n\ninterface ParseOptions {\n  time?: string;\n  dateFormat?: string;\n  timeFormat?: string;\n  timezone?: string;\n}\n\n/**\n * parseDate - Attempts to parse a date string using several common formats. Returns the\n *  timestamp of the parsed date in seconds since epoch, or returns null on failure.\n * @param {String} date - The date string to parse.\n * @param {String} options.dateFormat - The preferred momentjs format to use to parse the\n *  date. This is attempted before the default formats.\n * @param {String} options.time - The time string to parse.\n * @param {String} options.timeFormat - The momentjs format to use to parse the time. This\n *  must be given if options.time is given.\n * @param {String} options.timezone - The timezone string for the date/time, which affects\n *  the resulting timestamp.\n */\nexport function parseDate(date: string, options: ParseOptions = {}): number | null {\n  // If no date, return null.\n  if (!date) {\n    return null;\n  }\n  const dateFormat = options.dateFormat || \"YYYY-MM-DD\";\n  const dateFormats = [..._buildVariations(dateFormat, date), ...PARSER_FORMATS];\n  const cleanDate = date.replace(SEPARATORS, ' ');\n  let datetime = cleanDate.trim();\n  let timeformat = '';\n  let time = options.time;\n  if (time) {\n    const parsedTimeZone = parseTimeZone(time, options.timezone!);\n    const parsedTime = standardizeTime(parsedTimeZone.remaining);\n    if (!parsedTime || parsedTime.remaining) {\n      return null;\n    }\n    time = parsedTime.time;\n    const {tzOffset} = parsedTimeZone;\n    datetime += ' ' + time + tzOffset;\n    timeformat = ' HH:mm:ss' + (tzOffset ? 'Z' : '');\n  }\n  for (const f of dateFormats) {\n    const fullFormat = f + timeformat;\n    const m = moment.tz(datetime, fullFormat, true, options.timezone || 'UTC');\n    if (m.isValid()) {\n      return m.valueOf() / 1000;\n    }\n  }\n  return null;\n}\n\n/**\n * Similar to parseDate, with these differences:\n * - Only for a date (no time part)\n * - Only falls back to UNAMBIGUOUS_FORMATS, not the full PARSER_FORMATS\n * - Optionally adds all dates which match some format to `results`, otherwise returns first match.\n * This is safer so it can be used for parsing when pasting a large number of dates\n * and won't silently swap around day and month.\n */\nexport function parseDateStrict(\n  date: string, dateFormat: string | null, results?: Set<number>, timezone: string = 'UTC'\n): number | undefined {\n  if (!date) {\n    return;\n  }\n  dateFormat = dateFormat || \"YYYY-MM-DD\";\n  const dateFormats = [..._buildVariations(dateFormat, date), ...UNAMBIGUOUS_FORMATS];\n  const cleanDate = date.replace(SEPARATORS, ' ').trim();\n  for (const format of dateFormats) {\n    const m = moment.tz(cleanDate, format, true, timezone);\n    if (m.isValid()) {\n      const value = m.valueOf() / 1000;\n      if (results) {\n        results.add(value);\n      } else {\n        return value;\n      }\n    }\n  }\n}\n\nexport function parseDateTime(dateTime: string, options: ParseOptions): number | undefined {\n  dateTime = dateTime.trim();\n  if (!dateTime) {\n    return;\n  }\n\n  const dateFormat = options.dateFormat || \"YYYY-MM-DD\";\n  const timezone = options.timezone || \"UTC\";\n\n  const dateOnly = parseDateStrict(dateTime, dateFormat, undefined, timezone);\n  if (dateOnly) {\n    return dateOnly;\n  }\n\n  const parsedTimeZone = parseTimeZone(dateTime, timezone);\n  let tzOffset = '';\n  if (parsedTimeZone) {\n    tzOffset = parsedTimeZone.tzOffset;\n    dateTime = parsedTimeZone.remaining;\n  }\n\n  const parsedTime = standardizeTime(dateTime);\n  if (!parsedTime) {\n    return;\n  }\n\n  dateTime = parsedTime.remaining;\n  const date = parseDateStrict(dateTime, dateFormat);\n\n  if (!date) {\n    return;\n  }\n\n  // date is a timestamp of midnight in UTC, so to get a formatted representation (for parsing\n  // together with time), take care to interpret it in UTC.\n  const dateString = moment.unix(date).utc().format(\"YYYY-MM-DD\");\n  dateTime = dateString + ' ' + parsedTime.time + tzOffset;\n  const fullFormat = \"YYYY-MM-DD HH:mm:ss\" + (tzOffset ? 'Z' : '');\n  return moment.tz(dateTime, fullFormat, true, timezone).valueOf() / 1000;\n}\n\n\n// Helper function to get the partial format string based on the input. Momentjs has a feature\n// which allows defaulting to the current year, month and/or day if not accounted for in the\n// parser. We remove any parts of the parser not given in the input to take advantage of this\n// feature.\nfunction _getPartialFormat(input: string, format: string): string {\n  // Define a regular expression to match contiguous non-separators.\n  const re = /Y+|M+o?|D+o?|[a-zA-Z0-9]+/ig;\n  // Count the number of meaningful parts in the input.\n  const numInputParts = input.match(re)?.length || 0;\n\n  // Count the number of parts in the format string.\n  let numFormatParts = format.match(re)?.length || 0;\n\n  if (numFormatParts > numInputParts) {\n    // Remove year from format first, to default to current year.\n    if (/Y+/.test(format)) {\n      format = format.replace(/Y+/, ' ').trim();\n      numFormatParts -= 1;\n    }\n    if (numFormatParts > numInputParts) {\n      // Remove month from format next.\n      format = format.replace(/M+/, ' ').trim();\n    }\n  }\n  return format;\n}\n\n// Moment non-strict mode is considered bad, as it's far too lax. But moment's strict mode is too\n// strict. We want to allow YY|YYYY for either year specifier, as well as M for MMM or MMMM month\n// specifiers. It's silly that we need to create multiple format variations to support this.\nfunction _buildVariations(dateFormat: string, date: string) {\n  // Momentjs has an undesirable feature in strict mode where MM and DD\n  // matches require two digit numbers. Change MM, DD to M, D.\n  let format = dateFormat.replace(/MM+/g, m => (m === 'MM' ? 'M' : m))\n    .replace(/DD+/g, m => (m === 'DD' ? 'D' : m))\n    .replace(SEPARATORS, ' ')\n    .trim();\n\n  // Allow the input date to end with a 4-digit year even if the format doesn't mention the year\n  if (\n    format.includes(\"M\") &&\n    format.includes(\"D\") &&\n    !format.includes(\"Y\")\n  ) {\n    format += \" YYYY\";\n  }\n\n  format = _getPartialFormat(date, format);\n\n  // Consider some alternatives to the preferred format.\n  const variations = new Set<string>([format]);\n  const otherYear = format.replace(/Y{2,4}/, (m) => (m === 'YY' ? 'YYYY' : (m === 'YYYY' ? 'YY' : m)));\n  variations.add(otherYear);\n  variations.add(format.replace(/MMM+/, 'M'));\n  if (otherYear !== format) {\n    variations.add(otherYear.replace(/MMM+/, 'M'));\n  }\n  return variations;\n}\n\n\n// Based on private calculateOffset in moment source code.\nfunction calculateOffset(tzMatch: string[]): string {\n  const [, hhOffset, mmOffset] = tzMatch;\n  const sign = hhOffset.slice(0, 1);\n  return sign + hhOffset.slice(1).padStart(2, '0') + ':' + (mmOffset || '0').padStart(2, '0');\n}\n\nfunction parseTimeZone(str: string, timezone: string): { remaining: string, tzOffset: string } {\n  str = str.trim();\n\n  let tzMatch = UTC_REGEX.exec(str);\n  let matchStart = 0;\n  let tzOffset = '';\n  if (tzMatch) {\n    tzOffset = '+00:00';\n    matchStart = tzMatch.index + 1;  // skip [^a-zA-Z] at regex start\n  } else {\n    tzMatch = NUMERIC_TZ_REGEX.exec(str);\n    if (tzMatch) {\n      tzOffset = calculateOffset(tzMatch);\n      matchStart = tzMatch.index;\n    } else if (timezone) {\n      // Abbreviations are simply stripped and ignored, so tzOffset is not set in this case\n      tzMatch = tzAbbreviations(timezone).exec(str);\n      if (tzMatch) {\n        matchStart = tzMatch.index + 1;  // skip [^a-zA-Z] at regex start\n      }\n    }\n  }\n\n  if (tzMatch) {\n    str = str.slice(0, matchStart).trim();\n  }\n\n  return {remaining: str, tzOffset};\n}\n\n// Parses time of the form, roughly, HH[:MM[:SS]][am|pm]. Returns the time in the\n// standardized HH:mm:ss format.\n// This turns out easier than coaxing moment to parse time sensibly and flexibly.\nfunction standardizeTime(timeString: string): { remaining: string, time: string } | undefined {\n  const match = TIME_REGEX.exec(timeString);\n  if (!match) {\n    return;\n  }\n  let hours = parseInt(match[1] || match[4], 10);\n  const mm = (match[2] || match[5] || '0').padStart(2, '0');\n  const ss = (match[3] || '0').padStart(2, '0');\n  const ampm = (match[6] || '').toLowerCase();\n  if (hours < 12 && hours > 0 && ampm.startsWith('p')) {\n    hours += 12;\n  } else if (hours === 12 && ampm.startsWith('a')) {\n    hours = 0;\n  }\n  const hh = String(hours).padStart(2, '0');\n  return {remaining: timeString.slice(0, match.index).trim(), time: `${hh}:${mm}:${ss}`};\n}\n\n/**\n * Guesses a full date[time] format that best matches the given strings.\n * If several formats match equally well, picks the last one lexicographically to match the old date guessing.\n * This means formats with an early Y and/or M are favoured.\n * If no formats match, returns the default YYYY-MM-DD.\n */\nexport function guessDateFormat(values: Array<string | null>, timezone: string = 'UTC'): string {\n  const formats = guessDateFormats(values, timezone);\n  if (!formats) {\n    return \"YYYY-MM-DD\";\n  }\n  return last(formats)!;\n}\n\n/**\n * Returns all full date[time] formats that best match the given strings.\n * If several formats match equally well, returns them all.\n * May return null if there are no matching formats or choosing one is too expensive.\n */\nexport function guessDateFormats(values: Array<string | null>, timezone: string = 'UTC'): string[] | null {\n  const dateStrings: string[] = values.filter(isNonNullish);\n  const sample = getDistinctValues(dateStrings, 100);\n  const formats: Record<string, number> = {};\n  for (const dateString of sample) {\n    let guessed: string | string[];\n    try {\n      guessed = guessFormat(dateString);\n    } catch {\n      continue;\n    }\n    if (typeof guessed === \"string\") {\n      guessed = [guessed];\n    }\n    for (const guess of guessed) {\n      formats[guess] = 0;\n    }\n  }\n  const formatKeys = Object.keys(formats);\n  if (!formatKeys.length || formatKeys.length > 10) {\n    return null;\n  }\n\n  for (const format of formatKeys) {\n    for (const dateString of dateStrings) {\n      const m = moment.tz(dateString, format, true, timezone);\n      if (m.isValid()) {\n        formats[format] += 1;\n      }\n    }\n  }\n\n  const maxCount = Math.max(...Object.values(formats));\n  // Return all formats that tied for first place.\n  // Sort lexicographically for consistency in tests and with the old dateguess.py.\n  return formatKeys.filter(format => formats[format] === maxCount).sort();\n}\n\nexport const dateFormatOptions = [\n  'YYYY-MM-DD',\n  'MM-DD-YYYY',\n  'MM/DD/YYYY',\n  'MM-DD-YY',\n  'MM/DD/YY',\n  'DD MMM YYYY',\n  'MMMM Do, YYYY',\n  'DD-MM-YYYY',\n];\n\nexport const timeFormatOptions = [\n  'h:mma',\n  'h:mma z',\n  'HH:mm',\n  'HH:mm z',\n  'HH:mm:ss',\n  'HH:mm:ss z',\n];\n\n/**\n * Construct widget options for a Date or DateTime column based on a single moment string\n * which may or may not contain both date and time parts.\n * If defaultTimeFormat is true, fallback to a non-empty default time format when none is found in fullFormat.\n */\nexport function dateTimeWidgetOptions(fullFormat: string, defaultTimeFormat: boolean) {\n  const index = fullFormat.match(/[hHkaAmsSzZT]|$/)!.index!;\n  const dateFormat = fullFormat.substr(0, index).trim();\n  const timeFormat = fullFormat.substr(index).trim() || (defaultTimeFormat ? timeFormatOptions[0] : \"\");\n  return {\n    dateFormat,\n    timeFormat,\n    isCustomDateFormat: !dateFormatOptions.includes(dateFormat),\n    isCustomTimeFormat: !timeFormatOptions.includes(timeFormat),\n  };\n}\n","/**\n * Simple utilities for escaping/quoting/parsing CSV data.\n *\n * This only supports the default Excel-like encoding, in which fields containing any separators\n * or quotes get quoted (using '\"'), and quotes get doubled.\n *\n * Quoting is also applied when values contain leading or trailing whitespace, and on parsing,\n * leading or trailing whitespace in unquoted values is trimmed, so that \",\" or \", \" may be used\n * as a separator.\n *\n * This is intended for copy-pasting multi-choice values, where plain comma-separated text is the\n * most user-friendly, and CSV encoding is used to ensure we can handle arbitrary values.\n */\n\n// Encode a row. If {prettier: true} is set, separate output with \", \". Leading whitespace gets\n// encoded in any case.\nexport function csvEncodeRow(values: string[], options: {prettier?: boolean} = {}): string {\n  return values.map(csvEncodeCell).join(options.prettier ? \", \" : \",\");\n}\n\nexport function csvDecodeRow(text: string): string[] {\n  // Clever regexp from https://github.com/micnews/csv-line\n  const parts = text.split(/((?:(?:\"[^\"]*\")|[^,])*)/);\n  const main = parts.filter((v, idx) => idx % 2).map(csvDecodeCell);\n  // The \"delimiter\" (odd-numbered parts) is our content. If it's not at the start/end, it means\n  // we have commas, and should include empty fields at those ends.\n  if (parts[0]) { main.unshift(\"\"); }\n  if (parts[parts.length - 1]) { main.push(\"\"); }\n  return main;\n}\n\nexport function csvEncodeCell(value: string): string {\n  return /[,\\r\\n\"]|^\\s|\\s$/.test(value) ? '\"' + value.replace(/\"/g, '\"\"') + '\"' : value;\n}\n\nexport function csvDecodeCell(value: string): string {\n  return value.trim().replace(/^\"|\"$/g, '').replace(/\"\"/g, '\"');\n}\n","/**\n * Encodes and decodes Grist encoding of values, mirroring similar Python functions in\n * sandbox/grist/objtypes.py.\n */\n// tslint:disable:max-classes-per-file\n\nimport { CellValue, GristObjCode } from './GristData';\nimport isPlainObject = require('lodash/isPlainObject');\n\n// The text to show on cells whose values are pending.\nexport const PENDING_DATA_PLACEHOLDER = \"Loading...\";\n\n/**\n * A GristDate is just a JS Date object whose toString() method returns YYYY-MM-DD.\n */\nexport class GristDate extends Date {\n  public static fromGristValue(epochSec: number): GristDate {\n    return new GristDate(epochSec * 1000);\n  }\n\n  public toString() {\n    return this.toISOString().slice(0, 10);\n  }\n}\n\n/**\n * A GristDateTime is a JS Date with an added timezone field. Its toString() returns the date in\n * ISO format. To create a timezone-aware momentjs object, use:\n *\n *    moment(d).tz(d.timezone)\n */\nexport class GristDateTime extends Date {\n  public static fromGristValue(epochSec: number, timezone: string): GristDateTime {\n    return Object.assign(new GristDateTime(epochSec * 1000), {timezone});\n  }\n\n  public timezone: string;\n  public toString() { return this.toISOString(); }\n}\n\n/**\n * A Reference represents a reference to a row in a table. It is simply a pair of a string tableId\n * and a numeric rowId.\n */\nexport class Reference {\n  constructor(public tableId: string, public rowId: number) {}\n\n  public toString(): string {\n    return `${this.tableId}[${this.rowId}]`;\n  }\n}\n\n/**\n * A ReferenceList represents a reference to a number of rows in a table. It is simply a pair of a string tableId\n * and a numeric array rowIds.\n */\nexport class ReferenceList {\n  constructor(public tableId: string, public rowIds: number[]) {}\n\n  public toString(): string {\n    return `${this.tableId}[[${this.rowIds}]]`;\n  }\n}\n\n/**\n * A RaisedException represents a formula error. It includes the exception name, message, and\n * optional details.\n */\nexport class RaisedException {\n  public name: string;\n  public details?: string;\n  public message?: string;\n  public user_input?: CellValue;\n\n  constructor(list: any[]) {\n    if (!list.length) {\n      throw new Error(\"RaisedException requires a name as first element\");\n    }\n    list = [...list];\n    this.name = list.shift();\n    this.message = list.shift();\n    this.details = list.shift();\n    this.user_input = list.shift()?.u;\n  }\n\n  /**\n   * This is designed to look somewhat similar to Excel, e.g. #VALUE or #DIV/0!\"\n   */\n  public toString() {\n    switch (this.name) {\n      case 'ZeroDivisionError': return '#DIV/0!';\n      case 'UnmarshallableError': return this.details || ('#' + this.name);\n      case 'InvalidTypedValue': return `#Invalid ${this.message}: ${this.details}`;\n    }\n    return '#' + this.name;\n  }\n}\n\n/**\n * An UnknownValue is a fallback for values that we don't handle otherwise, e.g. of a Python\n * formula returned a function object, or a value we fail to decode.\n * It is typically the Python repr() string of the value.\n */\nexport class UnknownValue {\n  // When encoding an unknown value, get a best-effort string form of it.\n  public static safeRepr(value: unknown): string {\n    try {\n      return String(value);\n    } catch (e) {\n      return `<${typeof value}>`;\n    }\n  }\n\n  constructor(public value: unknown) {}\n  public toString() {\n    return String(this.value);\n  }\n}\n\n/**\n * A trivial placeholder for a value that's not yet available.\n */\nexport class PendingValue {\n  public toString() {\n    return PENDING_DATA_PLACEHOLDER;\n  }\n}\n\n/**\n * A trivial placeholder for a value that won't be shown.\n */\nexport class SkipValue {\n  public toString() {\n    return '...';\n  }\n}\n\n/**\n * A placeholder for a value hidden by access control rules.\n * Depending on the types of the columns involved, copying\n * a censored value and pasting elsewhere will either use\n * CensoredValue.__repr__ (python) or CensoredValue.toString (typescript)\n * so they should match\n */\nexport class CensoredValue {\n  public toString() {\n    return 'CENSORED';\n  }\n}\n\n/**\n * Produces a Grist-encoded version of the value, e.g. turning a Date into ['d', timestamp].\n * Returns ['U', repr(value)] if it fails to encode otherwise.\n *\n * TODO Add tests. This is not yet used for anything.\n */\nexport function encodeObject(value: unknown): CellValue {\n  try {\n    switch (typeof value) {\n      case 'string':\n      case 'number':\n      case 'boolean':\n        return value;\n    }\n    if (value == null) {\n      return null;\n    } else if (value instanceof Reference) {\n      return [GristObjCode.Reference, value.tableId, value.rowId];\n    } else if (value instanceof ReferenceList) {\n      return [GristObjCode.ReferenceList, value.tableId, value.rowIds];\n    } else if (value instanceof Date) {\n      const timestamp = value.valueOf() / 1000;\n      if ('timezone' in value) {\n        return [GristObjCode.DateTime, timestamp, (value as GristDateTime).timezone];\n      } else {\n        // TODO Depending on how it's used, may want to return ['d', timestamp] for UTC midnight.\n        return [GristObjCode.DateTime, timestamp, 'UTC'];\n      }\n    } else if (value instanceof CensoredValue) {\n      return [GristObjCode.Censored];\n    } else if (value instanceof RaisedException) {\n      return [GristObjCode.Exception, value.name, value.message, value.details];\n    } else if (Array.isArray(value)) {\n      return [GristObjCode.List, ...value.map(encodeObject)];\n    } else if (isPlainObject(value)) {\n      return [GristObjCode.Dict, mapValues(value as any, encodeObject, {sort: true})];\n    }\n  } catch (e) {\n    // Fall through to return a best-effort representation.\n  }\n  // We either don't know how to convert the value, or failed during the conversion. Instead we\n  // return an \"UnmarshallableValue\" object, with repr() of the value to show to the user.\n  return [GristObjCode.Unmarshallable, UnknownValue.safeRepr(value)];\n}\n\n\n/**\n * Given a Grist-encoded value, returns an object represented by it.\n * If the type code is unknown, or construction fails for any reason, returns an UnknownValue.\n */\nexport function decodeObject(value: CellValue): unknown {\n  if (!Array.isArray(value)) {\n    return value;\n  }\n  const code: string = value[0];\n  const args: any[] = value.slice(1);\n  let err: Error|undefined;\n  try {\n    switch (code) {\n      case 'D': return GristDateTime.fromGristValue(args[0], String(args[1]));\n      case 'd': return GristDate.fromGristValue(args[0]);\n      case 'E': return new RaisedException(args);\n      case 'L': return (args as CellValue[]).map(decodeObject);\n      case 'O': return mapValues(args[0] as {[key: string]: CellValue}, decodeObject, {sort: true});\n      case 'P': return new PendingValue();\n      case 'r': return new ReferenceList(String(args[0]), args[1]);\n      case 'R': return new Reference(String(args[0]), args[1]);\n      case 'S': return new SkipValue();\n      case 'C': return new CensoredValue();\n      case 'U': return new UnknownValue(args[0]);\n    }\n  } catch (e) {\n    err = e;\n  }\n  // If we can't decode, return an UnknownValue with some attempt to represent what we couldn't\n  // decode as long as some info about the error if any.\n  return new UnknownValue(`${code}(${JSON.stringify(args).slice(1, -1)})` +\n    (err ? `#${err.name}(${err.message})` : ''));\n}\n\n// Like lodash's mapValues, with support for sorting keys, for friendlier output.\nexport function mapValues<A, B>(\n  sourceObj: {[key: string]: A}, mapper: (value: A) => B, options: {sort?: boolean} = {}\n): {[key: string]: B} {\n  const result: {[key: string]: B} = {};\n  const keys = Object.keys(sourceObj);\n  if (options.sort) {\n    keys.sort();\n  }\n  for (const key of keys) {\n    result[key] = mapper(sourceObj[key]);\n  }\n  return result;\n}\n","import {csvDecodeRow} from 'app/common/csvFormat';\nimport {BulkColValues, CellValue, ColValues, UserAction} from 'app/common/DocActions';\nimport {DocData} from 'app/common/DocData';\nimport {DocumentSettings} from 'app/common/DocumentSettings';\nimport * as gristTypes from 'app/common/gristTypes';\nimport {getReferencedTableId, isFullReferencingType} from 'app/common/gristTypes';\nimport * as gutil from 'app/common/gutil';\nimport {safeJsonParse} from 'app/common/gutil';\nimport {NumberFormatOptions} from 'app/common/NumberFormat';\nimport NumberParse from 'app/common/NumberParse';\nimport {parseDateStrict, parseDateTime} from 'app/common/parseDate';\nimport {MetaRowRecord, TableData} from 'app/common/TableData';\nimport {DateFormatOptions, DateTimeFormatOptions, formatDecoded, FormatOptions} from 'app/common/ValueFormatter';\nimport {encodeObject} from 'app/plugin/objtypes';\nimport flatMap = require('lodash/flatMap');\nimport mapValues = require('lodash/mapValues');\n\n\nexport class ValueParser {\n  constructor(public type: string, public widgetOpts: FormatOptions, public docSettings: DocumentSettings) {\n  }\n\n  public cleanParse(value: string): any {\n    if (!value) {\n      return value;\n    }\n    return this.parse(value) ?? value;\n  }\n\n  public parse(value: string): any {\n    return value;\n  }\n\n}\n\nclass IdentityParser extends ValueParser {\n}\n\nexport class NumericParser extends ValueParser {\n  private _parse: NumberParse;\n\n  constructor(type: string, options: NumberFormatOptions, docSettings: DocumentSettings) {\n    super(type, options, docSettings);\n    this._parse = NumberParse.fromSettings(docSettings, options);\n  }\n\n  public parse(value: string): number | null {\n    return this._parse.parse(value)?.result ?? null;\n  }\n}\n\nclass DateParser extends ValueParser {\n  public parse(value: string): any {\n    return parseDateStrict(value, (this.widgetOpts as DateFormatOptions).dateFormat!);\n  }\n}\n\nclass DateTimeParser extends ValueParser {\n  constructor(type: string, widgetOpts: DateTimeFormatOptions, docSettings: DocumentSettings) {\n    super(type, widgetOpts, docSettings);\n    const timezone = gutil.removePrefix(type, \"DateTime:\") || '';\n    this.widgetOpts = {...widgetOpts, timezone};\n  }\n\n  public parse(value: string): any {\n    return parseDateTime(value, this.widgetOpts);\n  }\n}\n\n\nclass ChoiceListParser extends ValueParser {\n  public cleanParse(value: string): string[] | null {\n    value = value.trim();\n    const result = (\n      this._parseJson(value) ||\n      this._parseCsv(value)\n    ).map(v => v.trim())\n      .filter(v => v);\n    if (!result.length) {\n      return null;\n    }\n    return [\"L\", ...result];\n  }\n\n  private _parseJson(value: string): string[] | undefined {\n    // Don't parse JSON non-arrays\n    if (value[0] === \"[\") {\n      const arr: unknown[] | null = safeJsonParse(value, null);\n      return arr\n        // Remove nulls and empty strings\n        ?.filter(v => v || v === 0)\n        // Convert values to strings, formatting nested JSON objects/arrays as JSON\n        .map(v => formatDecoded(v));\n    }\n  }\n\n  private _parseCsv(value: string): string[] {\n    // Split everything on newlines which are not allowed by the choice editor.\n    return flatMap(value.split(/[\\n\\r]+/), row => {\n      return csvDecodeRow(row)\n        .map(v => v.trim());\n    });\n  }\n}\n\n/**\n * This is different from other widget options which are simple JSON\n * stored on the field. These have to be specially derived\n * for referencing columns. See createParser.\n */\nexport interface ReferenceParsingOptions {\n  visibleColId: string;\n  visibleColType: string;\n  visibleColWidgetOpts: FormatOptions;\n\n  // If this is provided and loaded, the ValueParser will look up values directly.\n  // Otherwise an encoded lookup will be produced for the data engine to handle.\n  tableData?: TableData;\n}\n\nexport class ReferenceParser extends ValueParser {\n  public widgetOpts: ReferenceParsingOptions;\n  public tableData = this.widgetOpts.tableData;\n  public visibleColParser = createParserRaw(\n    this.widgetOpts.visibleColType,\n    this.widgetOpts.visibleColWidgetOpts,\n    this.docSettings,\n  );\n\n  protected _visibleColId = this.widgetOpts.visibleColId;\n\n  public parse(raw: string): any {\n    const value = this.visibleColParser.cleanParse(raw);\n    return this.lookup(value, raw);\n  }\n\n  public lookup(value: any, raw: string): any {\n    if (value == null || value === \"\" || !raw) {\n      return 0;  // default value for a reference column\n    }\n\n    if (this._visibleColId === 'id') {\n      const n = Number(value);\n      if (Number.isInteger(n)) {\n        value = n;\n        // Don't return yet because we need to check that this row ID exists\n      } else {\n        return raw;\n      }\n    }\n\n    if (!this.tableData?.isLoaded) {\n      const options: { column: string, raw?: string } = {column: this._visibleColId};\n      if (value !== raw) {\n        options.raw = raw;\n      }\n      return ['l', value, options];\n    }\n\n    return this.tableData.findMatchingRowId({[this._visibleColId]: value}) || raw;\n  }\n}\n\nexport class ReferenceListParser extends ReferenceParser {\n  public parse(raw: string): any {\n    let values: any[] | null;\n    try {\n      values = JSON.parse(raw);\n    } catch {\n      values = null;\n    }\n    if (!Array.isArray(values)) {\n      // csvDecodeRow should never raise an exception\n      values = csvDecodeRow(raw);\n    }\n    values = values.map(v => typeof v === \"string\" ? this.visibleColParser.cleanParse(v) : encodeObject(v));\n\n    if (!values.length || !raw) {\n      return null;  // null is the default value for a reference list column\n    }\n\n    if (this._visibleColId === 'id') {\n      const numbers = values.map(Number);\n      if (numbers.every(Number.isInteger)) {\n        values = numbers;\n        // Don't return yet because we need to check that these row IDs exist\n      } else {\n        return raw;\n      }\n    }\n\n    if (!this.tableData?.isLoaded) {\n      const options: { column: string, raw?: string } = {column: this._visibleColId};\n      if (!(values.length === 1 && values[0] === raw)) {\n        options.raw = raw;\n      }\n      return ['l', values, options];\n    }\n\n    const rowIds: number[] = [];\n    for (const value of values) {\n      const rowId = this.tableData.findMatchingRowId({[this._visibleColId]: value});\n      if (rowId) {\n        rowIds.push(rowId);\n      } else {\n        // There's no matching value in the visible column, i.e. this is not a valid reference.\n        // We need to return a string which will become AltText.\n        return raw;\n      }\n    }\n    return ['L', ...rowIds];\n  }\n}\n\nexport const valueParserClasses: { [type: string]: typeof ValueParser } = {\n  Numeric: NumericParser,\n  Int: NumericParser,\n  Date: DateParser,\n  DateTime: DateTimeParser,\n  ChoiceList: ChoiceListParser,\n  Ref: ReferenceParser,\n  RefList: ReferenceListParser,\n  Attachments: ReferenceListParser,\n};\n\n/**\n * Returns a ValueParser which can parse strings into values appropriate for\n * a specific widget field or table column.\n * widgetOpts is usually the field/column's widgetOptions JSON\n * but referencing columns need more than that, see ReferenceParsingOptions above.\n */\nexport function createParserRaw(\n  type: string, widgetOpts: FormatOptions, docSettings: DocumentSettings\n): ValueParser {\n  const cls = valueParserClasses[gristTypes.extractTypeFromColType(type)] || IdentityParser;\n  return new cls(type, widgetOpts, docSettings);\n}\n\n/**\n * Returns a ValueParser which can parse strings into values appropriate for\n * a specific widget field or table column.\n *\n * Pass fieldRef (a row ID of _grist_Views_section_field) to use the settings of that view field\n * instead of the table column.\n */\nexport function createParser(\n  docData: DocData,\n  colRef: number,\n  fieldRef?: number,\n): ValueParser {\n  return createParserRaw(...createParserOrFormatterArguments(docData, colRef, fieldRef));\n}\n\n/**\n * Returns arguments suitable for createParserRaw or createFormatter. Only for internal use.\n *\n * Pass fieldRef (a row ID of _grist_Views_section_field) to use the settings of that view field\n * instead of the table column.\n */\nexport function createParserOrFormatterArguments(\n  docData: DocData,\n  colRef: number,\n  fieldRef?: number,\n): [string, object, DocumentSettings] {\n  const columnsTable = docData.getMetaTable('_grist_Tables_column');\n  const fieldsTable = docData.getMetaTable('_grist_Views_section_field');\n\n  const col = columnsTable.getRecord(colRef)!;\n  let fieldOrCol: MetaRowRecord<'_grist_Tables_column' | '_grist_Views_section_field'> = col;\n  if (fieldRef) {\n    const field = fieldsTable.getRecord(fieldRef);\n    fieldOrCol = field?.widgetOptions ? field : col;\n  }\n\n  return createParserOrFormatterArgumentsRaw(docData, col.type, fieldOrCol.widgetOptions, fieldOrCol.visibleCol);\n}\n\nexport function createParserOrFormatterArgumentsRaw(\n  docData: DocData,\n  type: string,\n  widgetOptions: string,\n  visibleColRef: number,\n): [string, object, DocumentSettings] {\n  const columnsTable = docData.getMetaTable('_grist_Tables_column');\n  const widgetOpts = safeJsonParse(widgetOptions, {});\n\n  if (isFullReferencingType(type)) {\n    const vcol = columnsTable.getRecord(visibleColRef);\n    widgetOpts.visibleColId = vcol?.colId || 'id';\n    widgetOpts.visibleColType = vcol?.type;\n    widgetOpts.visibleColWidgetOpts = safeJsonParse(vcol?.widgetOptions || '', {});\n    widgetOpts.tableData = docData.getTable(getReferencedTableId(type)!);\n  }\n\n  return [type, widgetOpts, docData.docSettings()];\n}\n\n/**\n * Returns a copy of `colValues` with string values parsed according to the type and options of each column.\n * `bulk` should be `true` if `colValues` is of type `BulkColValues`.\n */\nfunction parseColValues<T extends ColValues | BulkColValues>(\n  tableId: string, colValues: T, docData: DocData, bulk: boolean\n): T {\n  const columnsTable = docData.getMetaTable('_grist_Tables_column');\n  const tablesTable = docData.getMetaTable('_grist_Tables');\n  const tableRef = tablesTable.findRow('tableId', tableId);\n  if (!tableRef) {\n    return colValues;\n  }\n\n  return mapValues(colValues, (values, colId) => {\n    const colRef = columnsTable.findMatchingRowId({colId, parentId: tableRef});\n    if (!colRef) {\n      // Column not found - let something else deal with that\n      return values;\n    }\n\n    const parser = createParser(docData, colRef);\n\n    // Optimisation: If there's no special parser for this column type, do nothing\n    if (parser instanceof IdentityParser) {\n      return values;\n    }\n\n    function parseIfString(val: any) {\n      return typeof val === \"string\" ? parser.cleanParse(val) : val;\n    }\n\n    if (bulk) {\n      if (!Array.isArray(values)) {  // in case of bad input\n        return values;\n      }\n      // `colValues` is of type `BulkColValues`\n      return (values as CellValue[]).map(parseIfString);\n    } else {\n      // `colValues` is of type `ColValues`, `values` is just one value\n      return parseIfString(values);\n    }\n  });\n}\n\nexport function parseUserAction(ua: UserAction, docData: DocData): UserAction {\n  switch (ua[0]) {\n    case 'AddRecord':\n    case 'UpdateRecord':\n      return _parseUserActionColValues(ua, docData, false);\n    case 'BulkAddRecord':\n    case 'BulkUpdateRecord':\n    case 'ReplaceTableData':\n      return _parseUserActionColValues(ua, docData, true);\n    case 'AddOrUpdateRecord':\n      // Parse `require` (2) and `col_values` (3). The action looks like:\n      // ['AddOrUpdateRecord', table_id, require, col_values, options]\n      // (`col_values` is called `fields` in the API)\n      ua = _parseUserActionColValues(ua, docData, false, 2);\n      ua = _parseUserActionColValues(ua, docData, false, 3);\n      return ua;\n    case 'BulkAddOrUpdateRecord':\n      ua = _parseUserActionColValues(ua, docData, true, 2);\n      ua = _parseUserActionColValues(ua, docData, true, 3);\n      return ua;\n    default:\n      return ua;\n  }\n}\n\n// Returns a copy of the user action with one element parsed, by default the last one\nfunction _parseUserActionColValues(ua: UserAction, docData: DocData, parseBulk: boolean, index?: number\n): UserAction {\n  ua = ua.slice();\n  const tableId = ua[1] as string;\n  if (index === undefined) {\n    index = ua.length - 1;\n  }\n  const colValues = ua[index] as ColValues | BulkColValues;\n  ua[index] = parseColValues(tableId, colValues, docData, parseBulk);\n  return ua;\n}\n","// tslint:disable:max-classes-per-file\n\nimport {csvEncodeRow} from 'app/common/csvFormat';\nimport {CellValue} from 'app/common/DocActions';\nimport {DocData} from 'app/common/DocData';\nimport {DocumentSettings} from 'app/common/DocumentSettings';\nimport * as gristTypes from 'app/common/gristTypes';\nimport {getReferencedTableId, isList} from 'app/common/gristTypes';\nimport * as gutil from 'app/common/gutil';\nimport {isHiddenTable} from 'app/common/isHiddenTable';\nimport {buildNumberFormat, NumberFormatOptions} from 'app/common/NumberFormat';\nimport {createParserOrFormatterArguments, ReferenceParsingOptions} from 'app/common/ValueParser';\nimport {GristObjCode} from 'app/plugin/GristData';\nimport {decodeObject, GristDateTime} from 'app/plugin/objtypes';\nimport moment from 'moment-timezone';\nimport isPlainObject = require('lodash/isPlainObject');\n\nexport {PENDING_DATA_PLACEHOLDER} from 'app/plugin/objtypes';\n\nexport interface FormatOptions {\n  [option: string]: any;\n}\n\n/**\n * Formats a value of any type generically (with no type-specific options).\n */\nexport function formatUnknown(value: CellValue): string {\n  return formatDecoded(decodeObject(value));\n}\n\n/**\n * Returns true if the array contains other arrays or structured objects,\n * indicating that the list should be formatted like JSON rather than CSV.\n */\nfunction hasNestedObjects(value: any[]) {\n  return value.some(v => typeof v === 'object' && v && (Array.isArray(v) || isPlainObject(v)));\n}\n\n/**\n * Formats a decoded Grist value for displaying it. For top-level values, formats them the way we\n * like to see them in a cell or in, say, CSV export.\n * For top-level lists containing only simple values like strings and dates, formats them as a CSV row.\n * Nested lists and objects are formatted slightly differently, with quoted strings and ISO format for dates.\n */\nexport function formatDecoded(value: unknown, isTopLevel: boolean = true): string {\n  if (typeof value === 'object' && value) {\n    if (Array.isArray(value)) {\n      if (!isTopLevel || hasNestedObjects(value)) {\n        return '[' + value.map(v => formatDecoded(v, false)).join(', ') + ']';\n      } else {\n        return csvEncodeRow(value.map(v => formatDecoded(v, true)), {prettier: true});\n      }\n    } else if (isPlainObject(value)) {\n      const obj: any = value;\n      const items = Object.keys(obj).map(k => `${JSON.stringify(k)}: ${formatDecoded(obj[k], false)}`);\n      return '{' + items.join(', ') + '}';\n    } else if (isTopLevel && value instanceof GristDateTime) {\n      return moment(value).tz(value.timezone).format(\"YYYY-MM-DD HH:mm:ssZ\");\n    }\n    return String(value);\n  }\n  if (isTopLevel) {\n    return (value == null ? \"\" : String(value));\n  }\n  return JSON.stringify(value);\n}\n\nexport type IsRightTypeFunc = (value: CellValue) => boolean;\n\nexport class BaseFormatter {\n  protected isRightType: IsRightTypeFunc;\n\n  constructor(public type: string, public widgetOpts: FormatOptions, public docSettings: DocumentSettings) {\n    this.isRightType = gristTypes.isRightType(gristTypes.extractTypeFromColType(type)) ||\n      gristTypes.isRightType('Any')!;\n  }\n\n  /**\n   * Formats using this.format() if a value is of the right type for this formatter, or using\n   * AnyFormatter otherwise. This method the recommended API. There is no need to override it.\n   */\n  public formatAny(value: any, translate?: (val: string) => string): string {\n    return this.isRightType(value) ? this.format(value, translate) : formatUnknown(value);\n  }\n\n  /**\n   * Formats a value that matches the type of this formatter. This should be overridden by derived\n   * classes to handle values in formatter-specific ways.\n   */\n  protected format(value: any, _translate?: (val: string) => string): string {\n    return String(value);\n  }\n}\n\nexport class BoolFormatter extends BaseFormatter {\n  public format(value: boolean | 0 | 1, translate?: (val: string) => string): string {\n    if (typeof value === 'boolean' && translate) {\n      return translate(String(value));\n    }\n    return super.format(value, translate);\n  }\n}\n\nclass AnyFormatter extends BaseFormatter {\n  public format(value: any): string {\n    return formatUnknown(value);\n  }\n}\n\nexport class NumericFormatter extends BaseFormatter {\n  private _numFormat: Intl.NumberFormat;\n  private _formatter: (val: number) => string;\n\n  constructor(type: string, options: NumberFormatOptions, docSettings: DocumentSettings) {\n    super(type, options, docSettings);\n    this._numFormat = buildNumberFormat(options, docSettings);\n    this._formatter = (options.numSign === 'parens') ? this._formatParens : this._formatPlain;\n  }\n\n  public format(value: any): string {\n    return value === null ? '' : this._formatter(value);\n  }\n\n  public _formatPlain(value: number): string {\n    return this._numFormat.format(value);\n  }\n\n  public _formatParens(value: number): string {\n    // Surround positive numbers with spaces to align them visually to parenthesized numbers.\n    return (value >= 0) ?\n      ` ${this._numFormat.format(value)} ` :\n      `(${this._numFormat.format(-value)})`;\n  }\n}\n\nclass IntFormatter extends NumericFormatter {\n  constructor(type: string, opts: FormatOptions, docSettings: DocumentSettings) {\n    super(type, {decimals: 0, ...opts}, docSettings);\n  }\n}\n\nexport interface DateFormatOptions {\n  dateFormat?: string;\n}\n\nclass DateFormatter extends BaseFormatter {\n  protected _dateTimeFormat: string;\n  private _timezone: string;\n\n  constructor(type: string, widgetOpts: DateFormatOptions, docSettings: DocumentSettings, timezone: string = 'UTC') {\n    super(type, widgetOpts, docSettings);\n    // Allow encoded dates/datetimes ([d, number] or [D, number, timezone])\n    // which are found in formula columns of type Any,\n    // particularly reference display columns which are formatted here according to the visible column\n    // which will have the correct column type and options.\n    // Since these encoded objects are not expected in a Date/Datetime column and require\n    // being handled differently from just a number,\n    // we don't change `gristTypes.isRightType` which is used elsewhere.\n    this.isRightType = (value: any) => (\n      value === null ||\n      typeof value === \"number\" ||\n      Array.isArray(value) && (\n        value[0] === GristObjCode.Date ||\n        value[0] === GristObjCode.DateTime\n      )\n    );\n    this._dateTimeFormat = widgetOpts.dateFormat || 'YYYY-MM-DD';\n    this._timezone = timezone;\n  }\n\n  public format(value: any): string {\n    if (value === null) {\n      return '';\n    }\n\n    // For a DateTime object in an Any column, use the provided timezone (`value[2]`)\n    // Otherwise use the timezone configured for a DateTime column.\n    let timezone = this._timezone;\n    if (Array.isArray(value)) {\n      timezone = value[2] || timezone;\n      value = value[1];\n    }\n    // Now `value` is a number\n\n    const time = moment.tz(value * 1000, timezone);\n    return time.format(this._dateTimeFormat);\n  }\n}\n\nexport interface DateTimeFormatOptions extends DateFormatOptions {\n  timeFormat?: string;\n}\n\nclass DateTimeFormatter extends DateFormatter {\n  constructor(type: string, widgetOpts: DateTimeFormatOptions, docSettings: DocumentSettings) {\n    const timezone = gutil.removePrefix(type, \"DateTime:\") || '';\n    // Pass up the original widgetOpts. It's helpful to have them available; e.g. ExcelFormatter\n    // takes options from an initialized ValueFormatter.\n    super(type, widgetOpts, docSettings, timezone);\n    const timeFormat = widgetOpts.timeFormat === undefined ? 'h:mma' : widgetOpts.timeFormat;\n    this._dateTimeFormat = (widgetOpts.dateFormat || 'YYYY-MM-DD') + \" \" + timeFormat;\n  }\n}\n\nclass RowIdFormatter extends BaseFormatter {\n  public widgetOpts: { tableId: string };\n\n  public format(value: number): string {\n    return value > 0 ? `${this.widgetOpts.tableId}[${value}]` : \"\";\n  }\n}\n\ninterface ReferenceFormatOptions {\n  visibleColFormatter?: BaseFormatter;\n}\n\nclass ReferenceFormatter extends BaseFormatter {\n  public widgetOpts: ReferenceFormatOptions;\n  protected visibleColFormatter: BaseFormatter;\n\n  constructor(type: string, widgetOpts: ReferenceFormatOptions, docSettings: DocumentSettings) {\n    super(type, widgetOpts, docSettings);\n    // widgetOpts.visibleColFormatter shouldn't be undefined, but it can be if a referencing column\n    // is displaying another referencing column, which is partially prohibited in the UI but still possible.\n    this.visibleColFormatter = widgetOpts.visibleColFormatter ||\n      createFormatter('Id', {tableId: getReferencedTableId(type)}, docSettings);\n  }\n\n  public formatAny(value: any): string {\n    /*\n    An invalid value in a referencing column is saved as a string and becomes AltText in the data engine.\n    Then the display column formula (e.g. $person.first_name) raises an InvalidTypedValue trying to access\n    an attribute of that AltText.\n    This would normally lead to the formatter displaying `#Invalid Ref[List]: ` before the string value.\n    That's inconsistent with how the cell is displayed (just the string value in pink)\n    and with how invalid values in other columns are formatted (just the string).\n    It's just a result of the formatter receiving a value from the display column, not the actual column.\n    It's also likely to inconvenience users trying to import/migrate/convert data.\n    So we suppress the error here and just show the text.\n    It's still technically possible for the column to display an actual InvalidTypedValue exception from a formula\n    and this will suppress that too, but this is unlikely and seems worth it.\n    */\n    if (\n      Array.isArray(value)\n      && value[0] === GristObjCode.Exception\n      && value[1] === \"InvalidTypedValue\"\n      && value[2]?.startsWith?.(\"Ref\")\n    ) {\n      return value[3];\n    }\n    return this.formatNotInvalidRef(value);\n  }\n\n  protected formatNotInvalidRef(value: any) {\n    return this.visibleColFormatter.formatAny(value);\n  }\n}\n\nclass ReferenceListFormatter extends ReferenceFormatter {\n  protected formatNotInvalidRef(value: any): string {\n    // Part of this repeats the logic in BaseFormatter.formatAny which is overridden in ReferenceFormatter\n    // It also ensures that complex lists (e.g. if this RefList is displaying a ChoiceList)\n    // are formatted as JSON instead of CSV.\n    if (!isList(value) || hasNestedObjects(decodeObject(value) as CellValue[])) {\n      return formatUnknown(value);\n    }\n    // In the most common case, lists of simple objects like strings or dates\n    // are formatted like a CSV.\n    // This is similar to formatUnknown except the inner values are\n    // formatted according to the visible column options.\n    const formattedValues = value.slice(1).map(v => super.formatNotInvalidRef(v));\n    return csvEncodeRow(formattedValues, {prettier: true});\n  }\n}\n\nconst formatters: { [name: string]: typeof BaseFormatter } = {\n  Numeric: NumericFormatter,\n  Int: IntFormatter,\n  Bool: BoolFormatter,\n  Date: DateFormatter,\n  DateTime: DateTimeFormatter,\n  Ref: ReferenceFormatter,\n  RefList: ReferenceListFormatter,\n  Id: RowIdFormatter,\n  // We don't list anything that maps to AnyFormatter, since that's the default.\n};\n\n/**\n * Takes column type, widget options and document settings, and returns a constructor\n * with a format function that can properly convert a value passed to it into the\n * right format for that column.\n */\nexport function createFormatter(type: string, widgetOpts: FormatOptions, docSettings: DocumentSettings): BaseFormatter {\n  const ctor = formatters[gristTypes.extractTypeFromColType(type)] || AnyFormatter;\n  return new ctor(type, widgetOpts, docSettings);\n}\n\nexport interface FullFormatterArgs {\n  docData: DocData;\n  type: string;\n  widgetOpts: FormatOptions;\n  visibleColType: string;\n  visibleColWidgetOpts: FormatOptions;\n  docSettings: DocumentSettings;\n}\n\n/**\n * Returns a constructor\n * with a format function that can properly convert a value passed to it into the\n * right format for that column.\n *\n * Pass fieldRef (a row ID of _grist_Views_section_field) to use the settings of that view field\n * instead of the table column.\n */\nexport function createFullFormatterFromDocData(\n  docData: DocData,\n  colRef: number,\n  fieldRef?: number,\n): BaseFormatter {\n  const [type, widgetOpts, docSettings] = createParserOrFormatterArguments(docData, colRef, fieldRef);\n  const {visibleColType, visibleColWidgetOpts} = widgetOpts as ReferenceParsingOptions;\n  return createFullFormatterRaw({\n    docData,\n    type,\n    widgetOpts,\n    visibleColType,\n    visibleColWidgetOpts,\n    docSettings,\n  });\n}\n\nexport function createFullFormatterRaw(args: FullFormatterArgs) {\n  const {type, widgetOpts, docSettings} = args;\n  const visibleColFormatter = createVisibleColFormatterRaw(args);\n  return createFormatter(type, {...widgetOpts, visibleColFormatter}, docSettings);\n}\n\nexport function createVisibleColFormatterRaw(\n  {\n    docData,\n    docSettings,\n    type,\n    visibleColType,\n    visibleColWidgetOpts,\n    widgetOpts\n  }: FullFormatterArgs\n): BaseFormatter {\n  let referencedTableId = gristTypes.getReferencedTableId(type);\n  if (!referencedTableId) {\n    return createFormatter(type, widgetOpts, docSettings);\n  } else if (visibleColType) {\n    return createFormatter(visibleColType, visibleColWidgetOpts, docSettings);\n  } else {\n    // This column displays the Row ID, e.g. Table1[2]\n    // Make referencedTableId empty if the table is hidden\n    const tablesData = docData.getMetaTable(\"_grist_Tables\");\n    const tableRef = tablesData.findRow(\"tableId\", referencedTableId);\n    if (isHiddenTable(tablesData, tableRef)) {\n      referencedTableId = \"\";\n    }\n    return createFormatter('Id', {tableId: referencedTableId}, docSettings);\n  }\n}\n","import {TableData} from 'app/common/TableData';\nimport {UIRowId} from 'app/plugin/GristAPI';\n\n/**\n * Return whether a table (identified by the rowId of its metadata record) should\n * normally be hidden from the user (e.g. as an option in the page-widget picker).\n */\nexport function isHiddenTable(tablesData: TableData, tableRef: UIRowId): boolean {\n  const tableId = tablesData.getValue(tableRef, 'tableId') as string|undefined;\n  // The `!tableId` check covers the case of censored tables (see isTableCensored() below).\n  return !tableId || isSummaryTable(tablesData, tableRef) || tableId.startsWith('GristHidden_');\n}\n\n/**\n * Return whether a table (identified by the rowId of its metadata record) is a\n * summary table.\n */\nexport function isSummaryTable(tablesData: TableData, tableRef: UIRowId): boolean {\n  return tablesData.getValue(tableRef, 'summarySourceTable') !== 0;\n}\n\n// Check if a table record (from _grist_Tables) is censored.\n// Metadata records get censored by clearing certain of their fields, so it's expected that a\n// record may exist even though various code should consider it as hidden.\nexport function isTableCensored(tablesData: TableData, tableRef: UIRowId): boolean {\n  const tableId = tablesData.getValue(tableRef, 'tableId');\n  return !tableId;\n}\n","import {CellValue} from 'app/common/DocActions';\nimport {DocData} from 'app/common/DocData';\nimport {DocumentSettings} from 'app/common/DocumentSettings';\nimport {isObject} from 'app/common/gristTypes';\nimport {countIf} from 'app/common/gutil';\nimport {NumberFormatOptions} from 'app/common/NumberFormat';\nimport NumberParse from 'app/common/NumberParse';\nimport {dateTimeWidgetOptions, guessDateFormat} from 'app/common/parseDate';\nimport {MetaRowRecord} from 'app/common/TableData';\nimport {createFormatter} from 'app/common/ValueFormatter';\nimport {createParserRaw, ValueParser} from 'app/common/ValueParser';\nimport * as moment from 'moment-timezone';\n\ninterface GuessedColInfo {\n  type: string;\n  widgetOptions?: object;\n}\n\nexport interface GuessResult {\n  values?: CellValue[];\n  colInfo: GuessedColInfo;\n}\n\ntype ColMetadata = Partial<MetaRowRecord<'_grist_Tables_column'>>;\n\nexport interface GuessColMetadata {\n  values: CellValue[];\n  colMetadata?: ColMetadata;    // omitted if no changes are proposed.\n}\n\n/**\n * Class for guessing if an array of values should be interpreted as a specific column type.\n * T is the type of values that strings should be parsed to and is stored in the column.\n */\nabstract class ValueGuesser<T> {\n  /**\n   * Guessed column type and maybe widget options.\n   */\n  public abstract colInfo(): GuessedColInfo;\n\n  /**\n   * Parse a single string to a typed value in such a way that formatting the value returns the original string.\n   * If the string cannot be parsed, return the original string.\n   */\n  public abstract parse(value: string): T | string;\n\n  /**\n   * Attempt to parse at least 90% the string values losslessly according to the guessed colInfo.\n   * Return null if this cannot be done.\n   */\n  public guess(values: Array<string | null>, docSettings: DocumentSettings): GuessResult | null {\n    const colInfo = this.colInfo();\n    const {type, widgetOptions} = colInfo;\n    const formatter = createFormatter(type, widgetOptions || {}, docSettings);\n    const result: any[] = [];\n    // max number of non-parsed strings to allow before giving up\n    const maxUnparsed = countIf(values, v => Boolean(v)) * 0.1;\n    let unparsed = 0;\n\n    for (const value of values) {\n      if (!value) {\n        if (this.allowBlank()) {\n          result.push(null);\n          continue;\n        } else {\n          return null;\n        }\n      }\n\n      const parsed = this.parse(value);\n      // Give up if too many strings failed to parse or if the parsed value changes when converted back to text\n      if (typeof parsed === \"string\" && ++unparsed > maxUnparsed || formatter.formatAny(parsed) !== value) {\n        return null;\n      }\n      result.push(parsed);\n    }\n    return {values: result, colInfo};\n  }\n\n  /**\n   * Whether this type of column can store nulls directly.\n   */\n  protected allowBlank(): boolean {\n    return true;\n  }\n}\n\nclass BoolGuesser extends ValueGuesser<boolean> {\n  public colInfo(): GuessedColInfo {\n    return {type: 'Bool'};\n  }\n\n  public parse(value: string): boolean | string {\n    if (value === \"true\") {\n      return true;\n    } else if (value === \"false\") {\n      return false;\n    } else {\n      return value;\n    }\n  }\n\n  /**\n   * This is the only type that can't store nulls, it converts them to false.\n   */\n  protected allowBlank(): boolean {\n    return false;\n  }\n}\n\nclass NumericGuesser extends ValueGuesser<number> {\n  private _parser: ValueParser;\n  constructor(docSettings: DocumentSettings, private _options: NumberFormatOptions) {\n    super();\n    this._parser = createParserRaw('Numeric', _options, docSettings);\n  }\n\n  public colInfo(): GuessedColInfo {\n    const result: GuessedColInfo = {type: 'Numeric'};\n    if (Object.keys(this._options).length) {\n      result.widgetOptions = this._options;\n    }\n    return result;\n  }\n\n  public parse(value: string): number | string {\n    return this._parser.cleanParse(value);\n  }\n}\n\nclass DateGuesser extends ValueGuesser<number> {\n  // _format should be a full moment format string\n  // _tz should be the document's default timezone\n  constructor(private _format: string, private _tz: string) {\n    super();\n  }\n\n  public colInfo(): GuessedColInfo {\n    const widgetOptions = dateTimeWidgetOptions(this._format, false);\n    let type;\n    if (widgetOptions.timeFormat) {\n      type = 'DateTime:' + this._tz;\n    } else {\n      type = 'Date';\n      this._tz = \"UTC\";\n    }\n    return {widgetOptions, type};\n  }\n\n  // Note that this parsing is much stricter than parseDate to prevent loss of information.\n  // Dates which can be parsed by parseDate based on the guessed widget options may not be parsed here.\n  public parse(value: string): number | string {\n    const m = moment.tz(value, this._format, true, this._tz);\n    return m.isValid() ? m.valueOf() / 1000 : value;\n  }\n}\n\nexport function guessColInfoWithDocData(values: Array<string | null>, docData: DocData) {\n  return guessColInfo(values, docData.docSettings(), docData.docInfo().timezone);\n}\n\nexport function guessColInfo(\n  values: Array<string | null>, docSettings: DocumentSettings, timezone: string\n): GuessResult {\n  // Use short-circuiting of || to only do as much work as needed,\n  // in particular not guessing date formats before trying other types.\n  return (\n    new BoolGuesser()\n      .guess(values, docSettings) ||\n    new NumericGuesser(\n      docSettings,\n      NumberParse.fromSettings(docSettings).guessOptions(values)\n    )\n      .guess(values, docSettings) ||\n    new DateGuesser(guessDateFormat(values, timezone), timezone)\n      .guess(values, docSettings) ||\n    // Don't return the same values back if there's no conversion to be done,\n    // as they have to be serialized and transferred over a pipe to Python.\n    {colInfo: {type: 'Text'}}\n  );\n}\n\n/**\n * Guess column info for a new column, returning the metadata suitable for using with AddTable or\n * AddColumn user actions. In particular, widgetOptions, if any, are returned as a JSON string.\n * Will suggest turning the column to an empty one if all the values are empty (null or \"\").\n */\nexport function guessColInfoForImports(values: CellValue[], docData: DocData): GuessColMetadata {\n  if (values.every(v => (v === null || v === ''))) {\n    // Suggest empty column.\n    return {values, colMetadata: {type: 'Any', isFormula: true, formula: ''}};\n  }\n  if (values.some(isObject)) {\n    // Suggest no changes.\n    return {values};\n  }\n  const strValues = values.map(v => (v === null || typeof v === 'string' ? v : String(v)));\n  const guessed = guessColInfoWithDocData(strValues, docData);\n  values = guessed.values || values;\n\n  const opts = guessed.colInfo.widgetOptions;\n  const colMetadata: ColMetadata = {...guessed.colInfo, widgetOptions: opts && JSON.stringify(opts)};\n  if (!colMetadata.widgetOptions) {\n    delete colMetadata.widgetOptions;     // Omit widgetOptions unless it is actually valid JSON.\n  }\n  return {values, colMetadata};\n}\n","/*** THIS FILE IS AUTO-GENERATED BY core/sandbox/gen_js_schema.py ***/\n\nimport { GristObjCode } from \"app/plugin/GristData\";\n\n// tslint:disable:object-literal-key-quotes\n\nexport const SCHEMA_VERSION = 39;\n\nexport const schema = {\n\n  \"_grist_DocInfo\": {\n    docId               : \"Text\",\n    peers               : \"Text\",\n    basketId            : \"Text\",\n    schemaVersion       : \"Int\",\n    timezone            : \"Text\",\n    documentSettings    : \"Text\",\n  },\n\n  \"_grist_Tables\": {\n    tableId             : \"Text\",\n    primaryViewId       : \"Ref:_grist_Views\",\n    summarySourceTable  : \"Ref:_grist_Tables\",\n    onDemand            : \"Bool\",\n    rawViewSectionRef   : \"Ref:_grist_Views_section\",\n  },\n\n  \"_grist_Tables_column\": {\n    parentId            : \"Ref:_grist_Tables\",\n    parentPos           : \"PositionNumber\",\n    colId               : \"Text\",\n    type                : \"Text\",\n    widgetOptions       : \"Text\",\n    isFormula           : \"Bool\",\n    formula             : \"Text\",\n    label               : \"Text\",\n    description         : \"Text\",\n    untieColIdFromLabel : \"Bool\",\n    summarySourceCol    : \"Ref:_grist_Tables_column\",\n    displayCol          : \"Ref:_grist_Tables_column\",\n    visibleCol          : \"Ref:_grist_Tables_column\",\n    rules               : \"RefList:_grist_Tables_column\",\n    recalcWhen          : \"Int\",\n    recalcDeps          : \"RefList:_grist_Tables_column\",\n  },\n\n  \"_grist_Imports\": {\n    tableRef            : \"Ref:_grist_Tables\",\n    origFileName        : \"Text\",\n    parseFormula        : \"Text\",\n    delimiter           : \"Text\",\n    doublequote         : \"Bool\",\n    escapechar          : \"Text\",\n    quotechar           : \"Text\",\n    skipinitialspace    : \"Bool\",\n    encoding            : \"Text\",\n    hasHeaders          : \"Bool\",\n  },\n\n  \"_grist_External_database\": {\n    host                : \"Text\",\n    port                : \"Int\",\n    username            : \"Text\",\n    dialect             : \"Text\",\n    database            : \"Text\",\n    storage             : \"Text\",\n  },\n\n  \"_grist_External_table\": {\n    tableRef            : \"Ref:_grist_Tables\",\n    databaseRef         : \"Ref:_grist_External_database\",\n    tableName           : \"Text\",\n  },\n\n  \"_grist_TableViews\": {\n    tableRef            : \"Ref:_grist_Tables\",\n    viewRef             : \"Ref:_grist_Views\",\n  },\n\n  \"_grist_TabItems\": {\n    tableRef            : \"Ref:_grist_Tables\",\n    viewRef             : \"Ref:_grist_Views\",\n  },\n\n  \"_grist_TabBar\": {\n    viewRef             : \"Ref:_grist_Views\",\n    tabPos              : \"PositionNumber\",\n  },\n\n  \"_grist_Pages\": {\n    viewRef             : \"Ref:_grist_Views\",\n    indentation         : \"Int\",\n    pagePos             : \"PositionNumber\",\n  },\n\n  \"_grist_Views\": {\n    name                : \"Text\",\n    type                : \"Text\",\n    layoutSpec          : \"Text\",\n  },\n\n  \"_grist_Views_section\": {\n    tableRef            : \"Ref:_grist_Tables\",\n    parentId            : \"Ref:_grist_Views\",\n    parentKey           : \"Text\",\n    title               : \"Text\",\n    description         : \"Text\",\n    defaultWidth        : \"Int\",\n    borderWidth         : \"Int\",\n    theme               : \"Text\",\n    options             : \"Text\",\n    chartType           : \"Text\",\n    layoutSpec          : \"Text\",\n    filterSpec          : \"Text\",\n    sortColRefs         : \"Text\",\n    linkSrcSectionRef   : \"Ref:_grist_Views_section\",\n    linkSrcColRef       : \"Ref:_grist_Tables_column\",\n    linkTargetColRef    : \"Ref:_grist_Tables_column\",\n    embedId             : \"Text\",\n    rules               : \"RefList:_grist_Tables_column\",\n  },\n\n  \"_grist_Views_section_field\": {\n    parentId            : \"Ref:_grist_Views_section\",\n    parentPos           : \"PositionNumber\",\n    colRef              : \"Ref:_grist_Tables_column\",\n    width               : \"Int\",\n    widgetOptions       : \"Text\",\n    displayCol          : \"Ref:_grist_Tables_column\",\n    visibleCol          : \"Ref:_grist_Tables_column\",\n    filter              : \"Text\",\n    rules               : \"RefList:_grist_Tables_column\",\n  },\n\n  \"_grist_Validations\": {\n    formula             : \"Text\",\n    name                : \"Text\",\n    tableRef            : \"Int\",\n  },\n\n  \"_grist_REPL_Hist\": {\n    code                : \"Text\",\n    outputText          : \"Text\",\n    errorText           : \"Text\",\n  },\n\n  \"_grist_Attachments\": {\n    fileIdent           : \"Text\",\n    fileName            : \"Text\",\n    fileType            : \"Text\",\n    fileSize            : \"Int\",\n    fileExt             : \"Text\",\n    imageHeight         : \"Int\",\n    imageWidth          : \"Int\",\n    timeDeleted         : \"DateTime\",\n    timeUploaded        : \"DateTime\",\n  },\n\n  \"_grist_Triggers\": {\n    tableRef            : \"Ref:_grist_Tables\",\n    eventTypes          : \"ChoiceList\",\n    isReadyColRef       : \"Ref:_grist_Tables_column\",\n    actions             : \"Text\",\n    label               : \"Text\",\n    memo                : \"Text\",\n    enabled             : \"Bool\",\n  },\n\n  \"_grist_ACLRules\": {\n    resource            : \"Ref:_grist_ACLResources\",\n    permissions         : \"Int\",\n    principals          : \"Text\",\n    aclFormula          : \"Text\",\n    aclColumn           : \"Ref:_grist_Tables_column\",\n    aclFormulaParsed    : \"Text\",\n    permissionsText     : \"Text\",\n    rulePos             : \"PositionNumber\",\n    userAttributes      : \"Text\",\n    memo                : \"Text\",\n  },\n\n  \"_grist_ACLResources\": {\n    tableId             : \"Text\",\n    colIds              : \"Text\",\n  },\n\n  \"_grist_ACLPrincipals\": {\n    type                : \"Text\",\n    userEmail           : \"Text\",\n    userName            : \"Text\",\n    groupName           : \"Text\",\n    instanceId          : \"Text\",\n  },\n\n  \"_grist_ACLMemberships\": {\n    parent              : \"Ref:_grist_ACLPrincipals\",\n    child               : \"Ref:_grist_ACLPrincipals\",\n  },\n\n  \"_grist_Filters\": {\n    viewSectionRef      : \"Ref:_grist_Views_section\",\n    colRef              : \"Ref:_grist_Tables_column\",\n    filter              : \"Text\",\n    pinned              : \"Bool\",\n  },\n\n  \"_grist_Cells\": {\n    tableRef            : \"Ref:_grist_Tables\",\n    colRef              : \"Ref:_grist_Tables_column\",\n    rowId               : \"Int\",\n    root                : \"Bool\",\n    parentId            : \"Ref:_grist_Cells\",\n    type                : \"Int\",\n    content             : \"Text\",\n    userRef             : \"Text\",\n  },\n\n};\n\nexport interface SchemaTypes {\n\n  \"_grist_DocInfo\": {\n    docId: string;\n    peers: string;\n    basketId: string;\n    schemaVersion: number;\n    timezone: string;\n    documentSettings: string;\n  };\n\n  \"_grist_Tables\": {\n    tableId: string;\n    primaryViewId: number;\n    summarySourceTable: number;\n    onDemand: boolean;\n    rawViewSectionRef: number;\n  };\n\n  \"_grist_Tables_column\": {\n    parentId: number;\n    parentPos: number;\n    colId: string;\n    type: string;\n    widgetOptions: string;\n    isFormula: boolean;\n    formula: string;\n    label: string;\n    description: string;\n    untieColIdFromLabel: boolean;\n    summarySourceCol: number;\n    displayCol: number;\n    visibleCol: number;\n    rules: [GristObjCode.List, ...number[]]|null;\n    recalcWhen: number;\n    recalcDeps: [GristObjCode.List, ...number[]]|null;\n  };\n\n  \"_grist_Imports\": {\n    tableRef: number;\n    origFileName: string;\n    parseFormula: string;\n    delimiter: string;\n    doublequote: boolean;\n    escapechar: string;\n    quotechar: string;\n    skipinitialspace: boolean;\n    encoding: string;\n    hasHeaders: boolean;\n  };\n\n  \"_grist_External_database\": {\n    host: string;\n    port: number;\n    username: string;\n    dialect: string;\n    database: string;\n    storage: string;\n  };\n\n  \"_grist_External_table\": {\n    tableRef: number;\n    databaseRef: number;\n    tableName: string;\n  };\n\n  \"_grist_TableViews\": {\n    tableRef: number;\n    viewRef: number;\n  };\n\n  \"_grist_TabItems\": {\n    tableRef: number;\n    viewRef: number;\n  };\n\n  \"_grist_TabBar\": {\n    viewRef: number;\n    tabPos: number;\n  };\n\n  \"_grist_Pages\": {\n    viewRef: number;\n    indentation: number;\n    pagePos: number;\n  };\n\n  \"_grist_Views\": {\n    name: string;\n    type: string;\n    layoutSpec: string;\n  };\n\n  \"_grist_Views_section\": {\n    tableRef: number;\n    parentId: number;\n    parentKey: string;\n    title: string;\n    description: string;\n    defaultWidth: number;\n    borderWidth: number;\n    theme: string;\n    options: string;\n    chartType: string;\n    layoutSpec: string;\n    filterSpec: string;\n    sortColRefs: string;\n    linkSrcSectionRef: number;\n    linkSrcColRef: number;\n    linkTargetColRef: number;\n    embedId: string;\n    rules: [GristObjCode.List, ...number[]]|null;\n  };\n\n  \"_grist_Views_section_field\": {\n    parentId: number;\n    parentPos: number;\n    colRef: number;\n    width: number;\n    widgetOptions: string;\n    displayCol: number;\n    visibleCol: number;\n    filter: string;\n    rules: [GristObjCode.List, ...number[]]|null;\n  };\n\n  \"_grist_Validations\": {\n    formula: string;\n    name: string;\n    tableRef: number;\n  };\n\n  \"_grist_REPL_Hist\": {\n    code: string;\n    outputText: string;\n    errorText: string;\n  };\n\n  \"_grist_Attachments\": {\n    fileIdent: string;\n    fileName: string;\n    fileType: string;\n    fileSize: number;\n    fileExt: string;\n    imageHeight: number;\n    imageWidth: number;\n    timeDeleted: number;\n    timeUploaded: number;\n  };\n\n  \"_grist_Triggers\": {\n    tableRef: number;\n    eventTypes: [GristObjCode.List, ...string[]]|null;\n    isReadyColRef: number;\n    actions: string;\n    label: string;\n    memo: string;\n    enabled: boolean;\n  };\n\n  \"_grist_ACLRules\": {\n    resource: number;\n    permissions: number;\n    principals: string;\n    aclFormula: string;\n    aclColumn: number;\n    aclFormulaParsed: string;\n    permissionsText: string;\n    rulePos: number;\n    userAttributes: string;\n    memo: string;\n  };\n\n  \"_grist_ACLResources\": {\n    tableId: string;\n    colIds: string;\n  };\n\n  \"_grist_ACLPrincipals\": {\n    type: string;\n    userEmail: string;\n    userName: string;\n    groupName: string;\n    instanceId: string;\n  };\n\n  \"_grist_ACLMemberships\": {\n    parent: number;\n    child: number;\n  };\n\n  \"_grist_Filters\": {\n    viewSectionRef: number;\n    colRef: number;\n    filter: string;\n    pinned: boolean;\n  };\n\n  \"_grist_Cells\": {\n    tableRef: number;\n    colRef: number;\n    rowId: number;\n    root: boolean;\n    parentId: number;\n    type: number;\n    content: string;\n    userRef: string;\n  };\n\n}\n","import mapValues = require('lodash/mapValues');\nimport {BulkColValues, ColInfo, ColInfoWithId, ColValues, DocAction} from \"./DocActions\";\n\n// TODO this replaces modelUtil's ActionDispatcher and bulkActionExpand. Those should be removed.\n\n/**\n * Helper class which provides a `dispatchAction` method that dispatches DocActions received from\n * the server to methods `this.on{ActionType}`, e.g. `this.onUpdateRecord`.\n *\n * Implementation methods `on*` are called with the action as the first argument, and with\n * the action arguments as additional method arguments, for convenience.\n *\n * Methods for bulk actions may be implemented directly, or will iterate through each record in\n * the action, and call the single-record methods for each one.\n */\nexport abstract class ActionDispatcher {\n  public dispatchAction(action: DocAction): void {\n    // In node 6 testing, this switch is 5+ times faster than looking up \"on\"+action[0].\n    const a: any[] = action;\n    switch (action[0]) {\n      case \"AddRecord\":        return this.onAddRecord       (action, a[1], a[2], a[3]);\n      case \"UpdateRecord\":     return this.onUpdateRecord    (action, a[1], a[2], a[3]);\n      case \"RemoveRecord\":     return this.onRemoveRecord    (action, a[1], a[2]);\n      case \"BulkAddRecord\":    return this.onBulkAddRecord   (action, a[1], a[2], a[3]);\n      case \"BulkUpdateRecord\": return this.onBulkUpdateRecord(action, a[1], a[2], a[3]);\n      case \"BulkRemoveRecord\": return this.onBulkRemoveRecord(action, a[1], a[2]);\n      case \"ReplaceTableData\": return this.onReplaceTableData(action, a[1], a[2], a[3]);\n      case \"AddColumn\":        return this.onAddColumn       (action, a[1], a[2], a[3]);\n      case \"RemoveColumn\":     return this.onRemoveColumn    (action, a[1], a[2]);\n      case \"RenameColumn\":     return this.onRenameColumn    (action, a[1], a[2], a[3]);\n      case \"ModifyColumn\":     return this.onModifyColumn    (action, a[1], a[2], a[3]);\n      case \"AddTable\":         return this.onAddTable        (action, a[1], a[2]);\n      case \"RemoveTable\":      return this.onRemoveTable     (action, a[1]);\n      case \"RenameTable\":      return this.onRenameTable     (action, a[1], a[2]);\n      default: throw new Error(`Received unknown action ${action[0]}`);\n    }\n  }\n\n  protected abstract onAddRecord(action: DocAction, tableId: string, rowId: number, colValues: ColValues): void;\n  protected abstract onUpdateRecord(action: DocAction, tableId: string, rowId: number, colValues: ColValues): void;\n  protected abstract onRemoveRecord(action: DocAction, tableId: string, rowId: number): void;\n\n  // If not overridden, these will make multiple calls to single-record action methods.\n  protected onBulkAddRecord(action: DocAction, tableId: string, rowIds: number[], colValues: BulkColValues): void {\n    for (let i = 0; i < rowIds.length; i++) {\n      this.onAddRecord(action, tableId, rowIds[i], mapValues(colValues, (values) => values[i]));\n    }\n  }\n  protected onBulkUpdateRecord(action: DocAction, tableId: string, rowIds: number[], colValues: BulkColValues): void {\n    for (let i = 0; i < rowIds.length; i++) {\n      this.onUpdateRecord(action, tableId, rowIds[i], mapValues(colValues, (values) => values[i]));\n    }\n  }\n  protected onBulkRemoveRecord(action: DocAction, tableId: string, rowIds: number[]) {\n    for (const r of rowIds) {\n      this.onRemoveRecord(action, tableId, r);\n    }\n  }\n\n  protected abstract onReplaceTableData(\n    action: DocAction, tableId: string, rowIds: number[], colValues: BulkColValues): void;\n\n  protected abstract onAddColumn(action: DocAction, tableId: string, colId: string, colInfo: ColInfo): void;\n  protected abstract onRemoveColumn(action: DocAction, tableId: string, colId: string): void;\n  protected abstract onRenameColumn(action: DocAction, tableId: string, oldColId: string, newColId: string): void;\n  protected abstract onModifyColumn(action: DocAction, tableId: string, colId: string, colInfo: ColInfo): void;\n\n  protected abstract onAddTable(action: DocAction, tableId: string, columns: ColInfoWithId[]): void;\n  protected abstract onRemoveTable(action: DocAction, tableId: string): void;\n  protected abstract onRenameTable(action: DocAction, oldTableId: string, newTableId: string): void;\n}\n","/**\n * This mirrors action definitions from sandbox/grist/actions.py\n */\n\n// Some definitions have moved to be part of plugin API.\nimport { BulkColValues, CellValue, RowRecord } from 'app/plugin/GristData';\nexport type { BulkColValues, CellValue, RowRecord };\n\n// Part of a special CellValue used for comparisons, embedding several versions of a CellValue.\nexport interface AllCellVersions {\n  parent: CellValue;\n  remote: CellValue;\n  local: CellValue;\n}\nexport type CellVersions = Partial<AllCellVersions>;\n\nexport type AddRecord = ['AddRecord', string, number, ColValues];\nexport type BulkAddRecord = ['BulkAddRecord', string, number[], BulkColValues];\nexport type RemoveRecord = ['RemoveRecord', string, number];\nexport type BulkRemoveRecord = ['BulkRemoveRecord', string, number[]];\nexport type UpdateRecord = ['UpdateRecord', string, number, ColValues];\nexport type BulkUpdateRecord = ['BulkUpdateRecord', string, number[], BulkColValues];\n\nexport type ReplaceTableData = ['ReplaceTableData', string, number[], BulkColValues];\n\n// This is the format in which data comes when we fetch a table from the sandbox.\nexport type TableDataAction = ['TableData', string, number[], BulkColValues];\n\nexport type AddColumn = ['AddColumn', string, string, ColInfo];\nexport type RemoveColumn = ['RemoveColumn', string, string];\nexport type RenameColumn = ['RenameColumn', string, string, string];\nexport type ModifyColumn = ['ModifyColumn', string, string, Partial<ColInfo>];\n\nexport type AddTable = ['AddTable', string, ColInfoWithId[]];\nexport type RemoveTable = ['RemoveTable', string];\nexport type RenameTable = ['RenameTable', string, string];\n\nexport type DocAction = (\n  AddRecord |\n  BulkAddRecord |\n  RemoveRecord |\n  BulkRemoveRecord |\n  UpdateRecord |\n  BulkUpdateRecord |\n  ReplaceTableData |\n  TableDataAction |\n  AddColumn |\n  RemoveColumn |\n  RenameColumn |\n  ModifyColumn |\n  AddTable |\n  RemoveTable |\n  RenameTable\n);\n\n// type guards for convenience - see:\n//   https://www.typescriptlang.org/docs/handbook/advanced-types.html#user-defined-type-guards\nexport function isAddRecord(act: DocAction): act is AddRecord { return act[0] === 'AddRecord'; }\nexport function isBulkAddRecord(act: DocAction): act is BulkAddRecord { return act[0] === 'BulkAddRecord'; }\nexport function isRemoveRecord(act: DocAction): act is RemoveRecord { return act[0] === 'RemoveRecord'; }\nexport function isBulkRemoveRecord(act: DocAction): act is BulkRemoveRecord { return act[0] === 'BulkRemoveRecord'; }\nexport function isUpdateRecord(act: DocAction): act is UpdateRecord { return act[0] === 'UpdateRecord'; }\nexport function isBulkUpdateRecord(act: DocAction): act is BulkUpdateRecord { return act[0] === 'BulkUpdateRecord'; }\n\nexport function isReplaceTableData(act: DocAction): act is ReplaceTableData { return act[0] === 'ReplaceTableData'; }\n\nexport function isAddColumn(act: DocAction): act is AddColumn { return act[0] === 'AddColumn'; }\nexport function isRemoveColumn(act: DocAction): act is RemoveColumn { return act[0] === 'RemoveColumn'; }\nexport function isRenameColumn(act: DocAction): act is RenameColumn { return act[0] === 'RenameColumn'; }\nexport function isModifyColumn(act: DocAction): act is ModifyColumn { return act[0] === 'ModifyColumn'; }\n\nexport function isAddTable(act: DocAction): act is AddTable { return act[0] === 'AddTable'; }\nexport function isRemoveTable(act: DocAction): act is RemoveTable { return act[0] === 'RemoveTable'; }\nexport function isRenameTable(act: DocAction): act is RenameTable { return act[0] === 'RenameTable'; }\n\n\nconst SCHEMA_ACTIONS = new Set(['AddTable', 'RemoveTable', 'RenameTable', 'AddColumn',\n  'RemoveColumn', 'RenameColumn', 'ModifyColumn']);\n\nconst DATA_ACTIONS = new Set(['AddRecord', 'RemoveRecord', 'UpdateRecord', 'BulkAddRecord',\n  'BulkRemoveRecord', 'BulkUpdateRecord', 'ReplaceTableData', 'TableData']);\n\n/**\n * Determines whether a given action is a schema action or not.\n */\nexport function isSchemaAction(action: DocAction):\n    action is AddTable | RemoveTable | RenameTable | AddColumn | RemoveColumn | RenameColumn | ModifyColumn {\n  return SCHEMA_ACTIONS.has(action[0]);\n}\n\nexport function isDataAction(action: DocAction|UserAction):\n    action is AddRecord | RemoveRecord | UpdateRecord |\n              BulkAddRecord | BulkRemoveRecord | BulkUpdateRecord |\n              ReplaceTableData | TableDataAction {\n  return DATA_ACTIONS.has(String(action[0]));\n}\n\n/**\n * Returns the tableId from the action.\n */\nexport function getTableId(action: DocAction): string {\n  return action[1];   // It happens to always be in the same position in the action tuple.\n}\n\nexport interface TableDataActionSet {\n  [tableId: string]: TableDataAction;\n}\n\n// Helper types used in the definitions above.\n\nexport interface ColValues { [colId: string]: CellValue; }\nexport interface ColInfoMap { [colId: string]: ColInfo; }\n\nexport interface ColInfo {\n  type: string;\n  isFormula: boolean;\n  formula: string;\n}\n\nexport interface ColInfoWithId extends ColInfo {\n  id: string;\n}\n\n// Multiple records in column-oriented format, i.e. same as BulkColValues but with a mandatory\n// 'id' column. This is preferred over TableDataAction in external APIs.\nexport interface TableColValues {\n  id: number[];\n  [colId: string]: CellValue[];\n}\n\n// Multiple records in record-oriented format\nexport interface TableRecordValues {\n  records: TableRecordValue[];\n}\n\nexport interface TableRecordValue {\n  id: number | string;\n  fields: {\n    [colId: string]: CellValue\n  };\n}\n\n// Both UserActions and DocActions are represented as [ActionName, ...actionArgs].\n// TODO I think it's better to represent DocAction as a Buffer containing the marshalled action.\n\nexport type UserAction = Array<string|number|object|boolean|null|undefined>;\n\n// Actions that trigger formula calculations in the data engine\nexport const CALCULATING_USER_ACTIONS = new Set(['Calculate', 'UpdateCurrentTime', 'RespondToRequests']);\n\nexport function getNumRows(action: DocAction): number {\n  return !isDataAction(action) ? 0\n    : Array.isArray(action[2]) ? action[2].length\n    : 1;\n}\n\n// Convert from TableColValues (used by DocStorage and external APIs) to TableDataAction (used\n// mainly by the sandbox).\nexport function toTableDataAction(tableId: string, colValues: TableColValues): TableDataAction {\n  const colData = {...colValues};   // Make a copy to avoid changing passed-in arguments.\n  const rowIds: number[] = colData.id;\n  delete (colData as BulkColValues).id;\n  return ['TableData', tableId, rowIds, colData];\n}\n\n// Convert from TableDataAction (used mainly by the sandbox) to TableColValues (used by DocStorage\n// and external APIs).\n// Also accepts a TableDataAction nested as a tableData member of a larger structure,\n// for convenience in dealing with the result of fetches.\nexport function fromTableDataAction(tableData: TableDataAction|{tableData: TableDataAction}): TableColValues {\n  const data = ('tableData' in tableData) ? tableData.tableData : tableData;\n  const rowIds: number[] = data[2];\n  const colValues: BulkColValues = data[3];\n  return {id: rowIds, ...colValues};\n}\n\n/**\n * Convert a list of rows into an object with columns of values, used for\n * BulkAddRecord/BulkUpdateRecord actions.\n */\nexport function getColValues(records: Partial<RowRecord>[]): BulkColValues {\n  const colIdSet = new Set<string>();\n  for (const r of records) {\n    for (const c of Object.keys(r)) {\n      if (c !== 'id') {\n        colIdSet.add(c);\n      }\n    }\n  }\n  const result: BulkColValues = {};\n  for (const colId of colIdSet) {\n    result[colId] = records.map(r => r[colId]!);\n  }\n  return result;\n}\n\n/**\n * Extract the col ids mentioned in a record-related DocAction as a list\n * (even if the action is not a bulk action). Returns undefined if no col ids\n * mentioned.\n */\nexport function getColIdsFromDocAction(docActions: RemoveRecord | BulkRemoveRecord | AddRecord |\n  BulkAddRecord | UpdateRecord | BulkUpdateRecord | ReplaceTableData |\n  TableDataAction): string[] | undefined {\n  if (docActions[3]) { return Object.keys(docActions[3]); }\n  return undefined;\n}\n\n/**\n * Extract column values for a particular column as CellValue[] from a\n * record-related DocAction. Undefined if absent.\n */\nexport function getColValuesFromDocAction(docAction: RemoveRecord | BulkRemoveRecord | AddRecord |\n  BulkAddRecord | UpdateRecord | BulkUpdateRecord | ReplaceTableData |\n  TableDataAction, colId: string): CellValue[]|undefined {\n  const colValues = docAction[3];\n  if (!colValues) { return undefined; }\n  const cellValues = colValues[colId];\n  if (!cellValues) { return undefined; }\n  if (Array.isArray(docAction[2])) {\n    return cellValues as CellValue[];\n  } else {\n    return [cellValues as CellValue];\n  }\n}\n","/**\n * TableData maintains a single table's data.\n */\nimport {ActionDispatcher} from 'app/common/ActionDispatcher';\nimport {BulkAddRecord, BulkColValues, CellValue, ColInfo, ColInfoWithId, ColValues, DocAction,\n        isSchemaAction, ReplaceTableData, RowRecord, TableDataAction} from 'app/common/DocActions';\nimport {getDefaultForType} from 'app/common/gristTypes';\nimport {arrayRemove, arraySplice, getDistinctValues} from 'app/common/gutil';\nimport {SchemaTypes} from 'app/common/schema';\nimport {UIRowId} from 'app/plugin/GristAPI';\nimport isEqual = require('lodash/isEqual');\nimport fromPairs = require('lodash/fromPairs');\n\nexport interface ColTypeMap { [colId: string]: string; }\n\n\n\ntype UIRowFunc<T> = (rowId: UIRowId) => T;\n\ninterface ColData {\n  colId: string;\n  type: string;\n  defl: any;\n  values: CellValue[];\n}\n\nexport interface SingleCell {\n  tableId: string;\n  colId: string;\n  rowId: number;\n}\n\n/**\n * An interface for a table with rows that may be skipped.\n */\nexport interface SkippableRows {\n  // If there may be skippable rows, return a function to test rowIds for keeping.\n  getKeepFunc(): undefined | UIRowFunc<boolean>;\n  // Get a special row id which represents a skipped sequence of rows.\n  getSkipRowId(): number;\n}\n\n/**\n * TableData class to maintain a single table's data.\n *\n * In the browser's memory, table data needs a representation that's reasonably compact. We\n * represent it as column-wise arrays. (An early hope was to allow use of TypedArrays, but since\n * types can be mixed, those are not used.)\n */\nexport class TableData extends ActionDispatcher implements SkippableRows {\n  private _tableId: string;\n  private _isLoaded: boolean = false;\n  private _fetchPromise?: Promise<void>;\n\n  // Storage of the underlying data. Each column is an array, all of the same length. Includes\n  // 'id' column, containing a reference to _rowIdCol.\n  private _columns: Map<string, ColData> = new Map();\n\n  // Array of all ColData objects, omitting 'id'.\n  private _colArray: ColData[] = [];\n\n  // The `id` column is direct reference to the 'id' column, and contains row ids.\n  private _rowIdCol: number[] = [];\n\n  // Maps row id to index in the arrays in _columns. I.e. it's the inverse of _rowIdCol.\n  private _rowMap: Map<number, number> = new Map();\n\n  constructor(tableId: string, tableData: TableDataAction|null, colTypes: ColTypeMap) {\n    super();\n    this._tableId = tableId;\n\n    // Initialize all columns to empty arrays, while nothing is yet loaded.\n    for (const colId in colTypes) {\n      if (colTypes.hasOwnProperty(colId)) {\n        const type = colTypes[colId];\n        const defl = getDefaultForType(type);\n        const colData: ColData = { colId, type, defl, values: [] };\n        this._columns.set(colId, colData);\n        this._colArray.push(colData);\n      }\n    }\n    this._columns.set('id', {colId: 'id', type: 'Id', defl: 0, values: this._rowIdCol});\n\n    if (tableData) {\n      this.loadData(tableData);\n    }\n    // TODO: We should probably unload big sets of data when no longer needed. This can be left for\n    // when we support loading only parts of a table.\n  }\n\n  /**\n   * Fetch data (as long as a fetch is not in progress), and load it in memory when done.\n   * Returns a promise that's resolved when data finishes loading, and isLoaded becomes true.\n   */\n  public fetchData(fetchFunc: (tableId: string) => Promise<TableDataAction>): Promise<void> {\n    if (!this._fetchPromise) {\n      this._fetchPromise = fetchFunc(this._tableId).then(data => {\n        this._fetchPromise = undefined;\n        this.loadData(data);\n      });\n    }\n    return this._fetchPromise;\n  }\n\n  /**\n   * Populates the data for this table. Returns the array of old rowIds that were loaded before.\n   */\n  public loadData(tableData: TableDataAction|ReplaceTableData): number[] {\n    const rowIds: number[] = tableData[2];\n    const colValues: BulkColValues = tableData[3];\n    const oldRowIds: number[] = this._rowIdCol.slice(0);\n\n    reassignArray(this._rowIdCol, rowIds);\n    for (const colData of this._colArray) {\n      const values = colData.colId === 'id' ? rowIds : colValues[colData.colId];\n      // If colId is missing from tableData, use an array of default values. Note that reusing\n      // default value like this is only OK because all default values we use are primitive.\n      reassignArray(colData.values, values || this._rowIdCol.map(() => colData.defl));\n    }\n\n    this._rowMap.clear();\n    for (let i = 0; i < rowIds.length; i++) {\n      this._rowMap.set(rowIds[i], i);\n    }\n\n    this._isLoaded = true;\n    return oldRowIds;\n  }\n\n  // Used by QuerySet to load new rows for onDemand tables.\n  public loadPartial(data: TableDataAction): void {\n    // Add the new rows, reusing BulkAddData code.\n    const rowIds: number[] = data[2];\n    this.onBulkAddRecord(data, data[1], rowIds, data[3]);\n\n    // Mark the table as loaded.\n    this._isLoaded = true;\n  }\n\n  // Used by QuerySet to remove unused rows for onDemand tables when a QuerySet is disposed.\n  public unloadPartial(rowIds: number[]): void {\n    // Remove the unneeded rows, reusing BulkRemoveRecord code.\n    this.onBulkRemoveRecord(['BulkRemoveRecord', this.tableId, rowIds], this.tableId, rowIds);\n  }\n\n  /**\n   * Read-only tableId.\n   */\n  public get tableId(): string { return this._tableId; }\n\n  /**\n   * Boolean flag for whether the data for this table is already loaded.\n   */\n  public get isLoaded(): boolean { return this._isLoaded; }\n\n  /**\n   * The number of records loaded in this table.\n   */\n  public numRecords(): number { return this._rowIdCol.length; }\n\n  /**\n   * Returns the specified value from this table.\n   */\n  public getValue(rowId: UIRowId, colId: string): CellValue|undefined {\n    const colData = this._columns.get(colId);\n    const index = this._rowMap.get(rowId as number);    // rowId of 'new' will not be found.\n    return colData && index !== undefined ? colData.values[index] : undefined;\n  }\n\n  public hasRowId(rowId: number): boolean {\n    return this._rowMap.has(rowId);\n  }\n\n  /**\n   * Returns the index of the given rowId, if it exists, in the same unstable order that's\n   * returned by getRowIds() and getColValues().\n   */\n  public getRowIdIndex(rowId: UIRowId): number|undefined {\n    return this._rowMap.get(rowId as number);\n  }\n\n  /**\n   * Given a column name, returns a function that takes a rowId and returns the value for that\n   * column of that row. The returned function is faster than getValue() calls.\n   */\n  public getRowPropFunc(colId: string): UIRowFunc<CellValue|undefined> {\n    const colData = this._columns.get(colId);\n    if (!colData) { return () => undefined; }\n    const values = colData.values;\n    const rowMap = this._rowMap;\n    return (rowId: UIRowId) => values[rowMap.get(rowId as number)!];\n  }\n\n  // By default, no rows are skippable, all are kept.\n  public getKeepFunc(): undefined | UIRowFunc<boolean> {\n    return undefined;\n  }\n\n  // By default, no special row id for skip rows is needed.\n  public getSkipRowId(): number {\n    throw new Error('no skip row id defined');\n  }\n\n  /**\n   * Returns the list of all rowIds in this table, in unspecified and unstable order. Equivalent\n   * to getColValues('id').\n   */\n  public getRowIds(): ReadonlyArray<number> {\n    return this._rowIdCol;\n  }\n\n  /**\n   * Sort and returns the list of all rowIds in this table.\n   */\n  public getSortedRowIds(): number[] {\n    return this._rowIdCol.slice(0).sort((a, b) => a - b);\n  }\n\n  /**\n   * Returns true if cells may contain multiple versions (e.g. in diffs).\n   */\n  public mayHaveVersions() {\n    return false;\n  }\n\n  /**\n   * Returns the list of colIds in this table, including 'id'.\n   */\n  public getColIds(): string[] {\n    return Array.from(this._columns.keys());\n  }\n\n  /**\n   * Returns an unsorted list of all values in the given column. With no intervening actions,\n   * all arrays returned by getColValues() and getRowIds() are parallel to each other, i.e. the\n   * values at the same index correspond to the same record.\n   */\n  public getColValues(colId: string): ReadonlyArray<CellValue>|undefined {\n    const colData = this._columns.get(colId);\n    return colData ? colData.values : undefined;\n  }\n\n  /**\n   * Returns a limited-sized set of distinct values from a column. If count is given, limits how many\n   * distinct values are returned.\n   */\n  public getDistinctValues(colId: string, count: number = Infinity): Set<CellValue>|undefined {\n    const valColumn = this.getColValues(colId);\n    if (!valColumn) { return undefined; }\n    return getDistinctValues(valColumn, count);\n  }\n\n  /**\n   * Return data in TableDataAction form ['TableData', tableId, [...rowIds], {...}]\n   * Optionally takes a list of row ids to return data from. If a row id is\n   * not actually present in the table, a row of nulls will be returned for it.\n   */\n  public getTableDataAction(desiredRowIds?: number[],\n                            colIds?: string[]): TableDataAction {\n    colIds = colIds || this.getColIds();\n    const colIdSet = new Set<string>(colIds);\n    const rowIds = desiredRowIds || this.getRowIds();\n    let bulkColValues: {[colId: string]: CellValue[]};\n    const colArray = this._colArray.filter(({colId}) => colIdSet.has(colId));\n    if (desiredRowIds) {\n      const len = rowIds.length;\n      bulkColValues = {};\n      for (const colId of colIds) { bulkColValues[colId] = Array(len); }\n      for (let i = 0; i < len; i++) {\n        const index = this._rowMap.get(rowIds[i]);\n        for (const {colId, values} of colArray) {\n          const value = (index === undefined) ? null : values[index];\n          bulkColValues[colId][i] = value;\n        }\n      }\n    } else {\n      bulkColValues = fromPairs(\n        colIds\n          .filter(colId => colId !== 'id')\n          .map(colId => [colId, this.getColValues(colId)! as CellValue[]]));\n    }\n    return ['TableData',\n            this.tableId,\n            rowIds as number[],\n            bulkColValues];\n  }\n\n  public getBulkAddRecord(desiredRowIds?: number[]): BulkAddRecord {\n    const tableData = this.getTableDataAction(desiredRowIds?.sort((a, b) => a - b));\n    return [\n      'BulkAddRecord', tableData[1], tableData[2], tableData[3],\n    ];\n  }\n\n  /**\n   * Returns the given columns type, if the column exists, or undefined otherwise.\n   */\n  public getColType(colId: string): string|undefined {\n    const colData = this._columns.get(colId);\n    return colData ? colData.type : undefined;\n  }\n\n  /**\n   * Builds and returns a record object for the given rowId.\n   */\n  public getRecord(rowId: number): undefined | RowRecord {\n    const index = this._rowMap.get(rowId);\n    if (index === undefined) { return undefined; }\n    const ret: RowRecord = { id: this._rowIdCol[index] };\n    for (const colData of this._colArray) {\n      ret[colData.colId] = colData.values[index];\n    }\n    return ret;\n  }\n\n  /**\n   * Builds and returns the list of all records on this table, in unspecified and unstable order.\n   */\n  public getRecords(): RowRecord[] {\n    const records: RowRecord[] = this._rowIdCol.map((id) => ({ id }));\n    for (const {colId, values} of this._colArray) {\n      for (let i = 0; i < records.length; i++) {\n        records[i][colId] = values[i];\n      }\n    }\n    return records;\n  }\n\n  public filterRowIds(properties: {[key: string]: any}): number[] {\n    return this._filterRowIndices(properties).map(i => this._rowIdCol[i]);\n  }\n\n  /**\n   * Builds and returns the list of records in this table that match the given properties object.\n   * Properties may include 'id' and any table columns. Returned records are not sorted.\n   */\n  public filterRecords(properties: {[key: string]: any}): RowRecord[] {\n    const rowIndices: number[] = this._filterRowIndices(properties);\n\n    // Convert the array of indices to an array of RowRecords.\n    const records: RowRecord[] = rowIndices.map(i => ({id: this._rowIdCol[i]}));\n    for (const {colId, values} of this._colArray) {\n      for (let i = 0; i < records.length; i++) {\n        records[i][colId] = values[rowIndices[i]];\n      }\n    }\n    return records;\n  }\n\n  /**\n   * Returns the rowId in the table where colValue is found in the column with the given colId.\n   */\n  public findRow(colId: string, colValue: any): number {\n    const colData = this._columns.get(colId);\n    if (!colData) {\n      return 0;\n    }\n    const index = colData.values.indexOf(colValue);\n    return index < 0 ? 0 : this._rowIdCol[index];\n  }\n\n  /**\n   * Returns the first rowId matching the given filters, or 0 if no match. If there are multiple\n   * matches, it is unspecified which will be returned.\n   */\n  public findMatchingRowId(properties: {[key: string]: CellValue | undefined}): number {\n    const props = Object.keys(properties).map(p => ({col: this._columns.get(p)!, value: properties[p]}));\n    if (!props.every((p) => p.col)) {\n      return 0;\n    }\n    return this._rowIdCol.find((id, i) =>\n      props.every((p) => isEqual(p.col.values[i], p.value))\n    ) || 0;\n  }\n\n  /**\n   * Applies a DocAction received from the server; returns true, or false if it was skipped.\n   */\n  public receiveAction(action: DocAction): boolean {\n    if (this._isLoaded || isSchemaAction(action)) {\n      this.dispatchAction(action);\n      return true;\n    }\n    return false;\n  }\n\n  // ---- The following methods implement ActionDispatcher interface ----\n\n  protected onAddRecord(action: DocAction, tableId: string, rowId: number, colValues: ColValues): void {\n    if (this._rowMap.get(rowId) !== undefined) {\n      // If adding a record that already exists, act like an update.\n      // We rely on this behavior for distributing attachment\n      // metadata.\n      this.onUpdateRecord(action, tableId, rowId, colValues);\n      return;\n    }\n    const index: number = this._rowIdCol.length;\n    this._rowMap.set(rowId, index);\n    this._rowIdCol[index] = rowId;\n    for (const {colId, defl, values} of this._colArray) {\n      values[index] = colValues.hasOwnProperty(colId) ? colValues[colId] : defl;\n    }\n  }\n\n  protected onBulkAddRecord(action: DocAction, tableId: string, rowIds: number[], colValues: BulkColValues): void {\n    let destIndex: number = this._rowIdCol.length;\n    for (let i = 0; i < rowIds.length; i++) {\n      const srcIndex = this._rowMap.get(rowIds[i]);\n      if (srcIndex !== undefined) {\n        // If adding a record that already exists, act like an update.\n        // We rely on this behavior for distributing attachment\n        // metadata.\n        for (const colId in colValues) {\n          if (colValues.hasOwnProperty(colId)) {\n            const colData = this._columns.get(colId);\n            if (colData) {\n              colData.values[srcIndex] = colValues[colId][i];\n            }\n          }\n        }\n      } else {\n        this._rowMap.set(rowIds[i], destIndex);\n        this._rowIdCol[destIndex] = rowIds[i];\n        for (const {colId, defl, values} of this._colArray) {\n          values[destIndex] = colValues.hasOwnProperty(colId) ? colValues[colId][i] : defl;\n        }\n        destIndex++;\n      }\n    }\n  }\n\n  protected onRemoveRecord(action: DocAction, tableId: string, rowId: number): void {\n    // Note that in this implementation, delete + undo will reorder the storage and the ordering\n    // of rows returned getRowIds() and similar methods.\n    const index = this._rowMap.get(rowId);\n    if (index !== undefined) {\n      const last: number = this._rowIdCol.length - 1;\n      // We keep the column-wise arrays dense by moving the last element into the freed-up spot.\n      for (const {values} of this._columns.values()) {    // This adjusts _rowIdCol too.\n        values[index] = values[last];\n        values.pop();\n      }\n      this._rowMap.set(this._rowIdCol[index], index);\n      this._rowMap.delete(rowId);\n    }\n  }\n\n  protected onUpdateRecord(action: DocAction, tableId: string, rowId: number, colValues: ColValues): void {\n    const index = this._rowMap.get(rowId);\n    if (index !== undefined) {\n      for (const colId in colValues) {\n        if (colValues.hasOwnProperty(colId)) {\n          const colData = this._columns.get(colId);\n          if (colData) {\n            colData.values[index] = colValues[colId];\n          }\n        }\n      }\n    }\n  }\n\n  protected onBulkUpdateRecord(action: DocAction, tableId: string, rowIds: number[], colValues: BulkColValues): void {\n    for (let i = 0; i < rowIds.length; i++) {\n      const index = this._rowMap.get(rowIds[i]);\n      if (index !== undefined) {\n        for (const colId in colValues) {\n          if (colValues.hasOwnProperty(colId)) {\n            const colData = this._columns.get(colId);\n            if (colData) {\n              colData.values[index] = colValues[colId][i];\n            }\n          }\n        }\n      }\n    }\n  }\n\n  protected onReplaceTableData(action: DocAction, tableId: string, rowIds: number[], colValues: BulkColValues): void {\n    this.loadData(action as ReplaceTableData);\n  }\n\n  protected onAddColumn(action: DocAction, tableId: string, colId: string, colInfo: ColInfo): void {\n    if (this._columns.has(colId)) { return; }\n    const type = colInfo.type;\n    const defl = getDefaultForType(type);\n    const colData: ColData = { colId, type, defl, values: this._rowIdCol.map(() => defl) };\n    this._columns.set(colId, colData);\n    this._colArray.push(colData);\n  }\n\n  protected onRemoveColumn(action: DocAction, tableId: string, colId: string): void {\n    const colData = this._columns.get(colId);\n    if (!colData) { return; }\n    this._columns.delete(colId);\n    arrayRemove(this._colArray, colData);\n  }\n\n  protected onRenameColumn(action: DocAction, tableId: string, oldColId: string, newColId: string): void {\n    const colData = this._columns.get(oldColId);\n    if (colData) {\n      colData.colId = newColId;\n      this._columns.set(newColId, colData);\n      this._columns.delete(oldColId);\n    }\n  }\n\n  protected onModifyColumn(action: DocAction, tableId: string, oldColId: string, colInfo: ColInfo): void {\n    const colData = this._columns.get(oldColId);\n    if (colData && colInfo.hasOwnProperty('type')) {\n      colData.type = colInfo.type;\n      colData.defl = getDefaultForType(colInfo.type);\n    }\n  }\n\n  protected onRenameTable(action: DocAction, oldTableId: string, newTableId: string): void {\n    this._tableId = newTableId;\n  }\n\n  protected onAddTable(action: DocAction, tableId: string, columns: ColInfoWithId[]): void {\n    // A table processing its own addition is a noop\n  }\n\n  protected onRemoveTable(action: DocAction, tableId: string): void {\n    // Stop dispatching actions if we've been deleted. We might also want to clean up in the future.\n    this._isLoaded = false;\n  }\n\n  private _filterRowIndices(properties: {[key: string]: any}): number[] {\n    const rowIndices: number[] = [];\n    // Array of {col: arrayOfColValues, value: valueToMatch}\n    const props = Object.keys(properties).map(p => ({col: this._columns.get(p)!, value: properties[p]}));\n    this._rowIdCol.forEach((id, i) => {\n      // Collect the indices of the matching rows.\n      if (props.every((p) => isEqual(p.col.values[i], p.value))) {\n        rowIndices.push(i);\n      }\n    });\n    return rowIndices;\n  }\n}\n\n// A type safe record of a meta table with types as defined in schema.ts\n// '&' is used because declaring the id field and the index signature in one block gives a syntax error.\n// The second part is basically equivalent to SchemaTypes[TableId]\n// but TS sees that as incompatible with RowRecord and doesn't allow simple overrides in MetaTableData.\nexport type MetaRowRecord<TableId extends keyof SchemaTypes> =\n  { id: number } &\n  { [ColId in keyof SchemaTypes[TableId]]: SchemaTypes[TableId][ColId] & CellValue };\n\ntype MetaColId<TableId extends keyof SchemaTypes> = keyof MetaRowRecord<TableId> & string;\n\n/**\n * Behaves the same as TableData, but uses SchemaTypes for type safety of its columns.\n */\nexport class MetaTableData<TableId extends keyof SchemaTypes> extends TableData {\n  constructor(tableId: TableId, tableData: TableDataAction | null, colTypes: ColTypeMap) {\n    super(tableId, tableData, colTypes);\n  }\n\n  public getValue<ColId extends MetaColId<TableId>>(rowId: number, colId: ColId):\n    MetaRowRecord<TableId>[ColId] | undefined {\n    return super.getValue(rowId, colId) as any;\n  }\n\n  public getRecords(): Array<MetaRowRecord<TableId>> {\n    return super.getRecords() as any;\n  }\n\n  public getRecord(rowId: number): MetaRowRecord<TableId> | undefined {\n    return super.getRecord(rowId) as any;\n  }\n\n  public filterRecords(properties: Partial<MetaRowRecord<TableId>>): Array<MetaRowRecord<TableId>> {\n    return super.filterRecords(properties) as any;\n  }\n\n  public findMatchingRowId(properties: Partial<MetaRowRecord<TableId>>): number {\n    return super.findMatchingRowId(properties);\n  }\n\n  public getRowPropFunc<ColId extends MetaColId<TableId>>(\n    colId: ColId\n  ): UIRowFunc<MetaRowRecord<TableId>[ColId]> {\n    return super.getRowPropFunc(colId as any) as any;\n  }\n\n  public getColValues<ColId extends MetaColId<TableId>>(\n    colId: ColId\n  ): ReadonlyArray<MetaRowRecord<TableId>[ColId]> {\n    return super.getColValues(colId) as any;\n  }\n\n  public findRow<ColId extends MetaColId<TableId>>(\n    colId: ColId, colValue: MetaRowRecord<TableId>[ColId]\n  ): number {\n    return super.findRow(colId, colValue);\n  }\n}\n\nfunction reassignArray<T>(targetArray: T[], sourceArray: T[]): void {\n  targetArray.length = 0;\n  arraySplice(targetArray, 0, sourceArray);\n}\n","/**\n * DocData maintains all underlying data for a Grist document, knows how to load it,\n * subscribes to actions which change it, and forwards those actions to individual tables.\n * It also provides the interface to apply actions to data.\n */\nimport {DocumentSettings} from 'app/common/DocumentSettings';\nimport {safeJsonParse} from 'app/common/gutil';\nimport {schema, SchemaTypes} from 'app/common/schema';\nimport fromPairs = require('lodash/fromPairs');\nimport groupBy = require('lodash/groupBy');\nimport {ActionDispatcher} from './ActionDispatcher';\nimport {TableFetchResult} from './ActiveDocAPI';\nimport {\n  BulkColValues, ColInfo, ColInfoWithId, ColValues, DocAction,\n  RowRecord, TableDataAction\n} from './DocActions';\nimport {ColTypeMap, MetaRowRecord, MetaTableData, TableData} from './TableData';\n\ntype FetchTableFunc = (tableId: string) => Promise<TableFetchResult>;\n\nexport class DocData extends ActionDispatcher {\n  private _tables: Map<string, TableData> = new Map();\n\n  private _fetchTableFunc: (tableId: string) => Promise<TableDataAction>;\n\n  /**\n   * If metaTableData is not supplied, then any tables needed should be loaded manually,\n   * using syncTable(). All column types will be set to Any, which will affect default\n   * values.\n   */\n  constructor(fetchTableFunc: FetchTableFunc, metaTableData: {[tableId: string]: TableDataAction} | null) {\n    super();\n    // Wrap fetchTableFunc slightly to handle any extra attachment data that\n    // may come along for the ride.\n    this._fetchTableFunc = async (tableId: string) => {\n      const {tableData, attachments} = await fetchTableFunc(tableId);\n      if (attachments) {\n        // Back-end doesn't keep track of which attachments we already have,\n        // so there may be duplicates of rows we already have - but happily\n        // BulkAddRecord overwrites duplicates now.\n        this.receiveAction(attachments);\n      }\n      return tableData;\n    };\n    if (metaTableData === null) { return; }\n    // Create all meta tables, and populate data we already have.\n    for (const tableId in schema) {\n      if (schema.hasOwnProperty(tableId)) {\n        const colTypes: ColTypeMap = (schema as any)[tableId];\n        this._tables.set(tableId, this.createTableData(tableId, metaTableData[tableId], colTypes));\n      }\n    }\n\n    // Build a map from tableRef to [columnRecords]\n    const colsByTable = groupBy(this._tables.get('_grist_Tables_column')!.getRecords(), 'parentId');\n    for (const t of this._tables.get('_grist_Tables')!.getRecords()) {\n      const tableId = t.tableId as string;\n      const colRecords: RowRecord[] = colsByTable[t.id] || [];\n      const colTypes = fromPairs(colRecords.map(c => [c.colId, c.type]));\n      this._tables.set(tableId, this.createTableData(tableId, null, colTypes));\n    }\n  }\n\n  /**\n   * Creates a new TableData object. A derived class may override to return an object derived from TableData.\n   */\n  public createTableData(tableId: string, tableData: TableDataAction|null, colTypes: ColTypeMap): TableData {\n    return new (tableId in schema ? MetaTableData : TableData)(tableId, tableData, colTypes);\n  }\n\n  /**\n   * Returns the TableData object for the requested table.\n   */\n  public getTable(tableId: string): TableData|undefined {\n    return this._tables.get(tableId);\n  }\n\n  public async requireTable(tableId: string): Promise<TableData> {\n    await this.fetchTable(tableId);\n    const td = this._tables.get(tableId);\n    if (!td) {\n      throw new Error(`could not fetch table: ${tableId}`);\n    }\n    return td;\n  }\n\n  /**\n   * Like getTable, but the result knows about the types of its records\n   */\n  public getMetaTable<TableId extends keyof SchemaTypes>(tableId: TableId): MetaTableData<TableId> {\n    return this.getTable(tableId) as any;\n  }\n\n  /**\n   * Returns an unsorted list of all tableIds in this doc, including both metadata and user tables.\n   */\n  public getTables(): ReadonlyMap<string, TableData> {\n    return this._tables;\n  }\n\n  /**\n   * Fetches the data for tableId if needed, and returns a promise that is fulfilled when the data\n   * is loaded.\n   */\n  public fetchTable(tableId: string, force?: boolean): Promise<void> {\n    const table = this._tables.get(tableId);\n    if (!table) { throw new Error(`DocData.fetchTable: unknown table ${tableId}`); }\n    return (!table.isLoaded || force) ? table.fetchData(this._fetchTableFunc) : Promise.resolve();\n  }\n\n  /**\n   * Fetches the data for tableId unconditionally, and without knowledge of its metadata.\n   * Columns will be assumed to have type 'Any'.\n   */\n  public async syncTable(tableId: string): Promise<void> {\n    const tableData = await this._fetchTableFunc(tableId);\n    const colTypes = fromPairs(Object.keys(tableData[3]).map(c => [c, 'Any']));\n    colTypes.id = 'Any';\n    this._tables.set(tableId, this.createTableData(tableId, tableData, colTypes));\n  }\n\n  /**\n   * Handles an action received from the server, by forwarding it to the appropriate TableData\n   * object.\n   */\n  public receiveAction(action: DocAction): void {\n    // Look up TableData before processing the action in case we rename or remove it.\n    const tableId: string = action[1];\n    const table = this._tables.get(tableId);\n\n    this.dispatchAction(action);\n\n    // Forward all actions to per-table TableData objects.\n    if (table) {\n      table.receiveAction(action);\n    }\n  }\n\n  public docInfo(): MetaRowRecord<'_grist_DocInfo'> {\n    const docInfoTable = this.getMetaTable('_grist_DocInfo');\n    return docInfoTable.getRecord(1)!;\n  }\n\n  public docSettings(): DocumentSettings {\n    return safeJsonParse(this.docInfo().documentSettings, {});\n  }\n\n  // ---- The following methods implement ActionDispatcher interface ----\n\n  protected onAddTable(action: DocAction, tableId: string, columns: ColInfoWithId[]): void {\n    const colTypes = fromPairs(columns.map(c => [c.id, c.type]));\n    this._tables.set(tableId, this.createTableData(tableId, null, colTypes));\n  }\n\n  protected onRemoveTable(action: DocAction, tableId: string): void {\n    this._tables.delete(tableId);\n  }\n\n  protected onRenameTable(action: DocAction, oldTableId: string, newTableId: string): void {\n    const table = this._tables.get(oldTableId);\n    if (table) {\n      this._tables.set(newTableId, table);\n      this._tables.delete(oldTableId);\n    }\n  }\n\n  // tslint:disable:no-empty\n  protected onAddRecord(action: DocAction, tableId: string, rowId: number, colValues: ColValues): void {}\n  protected onUpdateRecord(action: DocAction, tableId: string, rowId: number, colValues: ColValues): void {}\n  protected onRemoveRecord(action: DocAction, tableId: string, rowId: number): void {}\n\n  protected onBulkAddRecord(action: DocAction, tableId: string, rowIds: number[], colValues: BulkColValues): void {}\n  protected onBulkUpdateRecord(action: DocAction, tableId: string, rowIds: number[], colValues: BulkColValues): void {}\n  protected onBulkRemoveRecord(action: DocAction, tableId: string, rowIds: number[]) {}\n\n  protected onReplaceTableData(action: DocAction, tableId: string, rowIds: number[], colValues: BulkColValues): void {}\n\n  protected onAddColumn(action: DocAction, tableId: string, colId: string, colInfo: ColInfo): void {}\n  protected onRemoveColumn(action: DocAction, tableId: string, colId: string): void {}\n  protected onRenameColumn(action: DocAction, tableId: string, oldColId: string, newColId: string): void {}\n  protected onModifyColumn(action: DocAction, tableId: string, colId: string, colInfo: ColInfo): void {}\n}\n","import {DocData} from 'app/common/DocData';\nimport * as gristTypes from 'app/common/gristTypes';\nimport {isList} from 'app/common/gristTypes';\nimport {BaseFormatter, createFullFormatterFromDocData} from 'app/common/ValueFormatter';\nimport {\n  createParserOrFormatterArgumentsRaw,\n  createParserRaw,\n  ReferenceListParser,\n  ReferenceParser,\n  ValueParser\n} from 'app/common/ValueParser';\nimport {CellValue, GristObjCode} from 'app/plugin/GristData';\nimport { TableDataActionSet } from \"./DocActions\";\n\n\n/**\n * Base class for converting values from one type to another with the convert() method.\n * Has a formatter for the source column\n * and a parser for the destination column.\n *\n * The default convert() is for non-list destination types, so if the source value\n * is a list it only converts nicely if the list contains exactly one element.\n */\nexport class ValueConverter {\n  private _isTargetText: boolean = [\"Text\", \"Choice\"].includes(this.parser.type);\n\n  constructor(public formatter: BaseFormatter, public parser: ValueParser) {\n  }\n\n  public convert(value: any): any {\n    if (isList(value)) {\n      if (value.length === 1) {\n        // Empty list: ['L']\n        return null;\n      } else if (value.length > 2 || this._isTargetText) {\n        // List with multiple values, or the target type is text.\n        // Since we're converting to just one value,\n        // format the whole thing as text, which is an error for most types.\n        return this.formatter.formatAny(value);\n      } else {\n        // Singleton list: ['L', value]\n        // Convert just that one value.\n        value = value[1];\n      }\n    }\n    return this.convertInner(value);\n  }\n\n  protected convertInner(value: any): any {\n    const formatted = this.formatter.formatAny(value);\n    return this.parser.cleanParse(formatted);\n  }\n}\n\n/**\n * Base class for converting to a list type (Reference List or Choice List).\n *\n * Wraps single values in a list, and converts lists elementwise.\n */\nclass ListConverter extends ValueConverter {\n  // Don't parse strings like \"Smith, John\" which may look like lists but represent a single choice.\n  // TODO this works when the source is a Choice column, but not when it's a Reference to a Choice column.\n  //   But the guessed choices are also broken in that case.\n  private _choices: Set<string> = new Set((this.formatter.widgetOpts as any).choices || []);\n\n  public convert(value: any): any {\n    if (typeof value === \"string\" && !this._choices.has(value)) {\n      // Parse CSV/JSON\n      return this.parser.cleanParse(value);\n    }\n    const values = isList(value) ? value.slice(1) : [value];\n    if (!values.length || value == null) {\n      return null;\n    }\n    return this.handleValues(value, values.map(v => this.convertInner(v)));\n  }\n\n  protected handleValues(originalValue: any, values: any[]) {\n    return ['L', ...values];\n  }\n}\n\nclass ChoiceListConverter extends ListConverter {\n  /**\n   * Convert each source value to a 'Choice'\n   */\n  protected convertInner(value: any): any {\n    return this.formatter.formatAny(value);\n  }\n}\n\nclass ReferenceListConverter extends ListConverter {\n  private _innerConverter = new ReferenceConverter(\n    this.formatter,\n    new ReferenceParser(\"Ref\", this.parser.widgetOpts, this.parser.docSettings),\n  );\n\n  constructor(public formatter: BaseFormatter, public parser: ReferenceListParser) {\n    super(formatter, parser);\n    // Prevent the parser from looking up reference values in the frontend.\n    // Leave it to the data engine which has a much more efficient algorithm for long lists of values.\n    delete parser.tableData;\n  }\n\n  public handleValues(originalValue: any, values: any[]): any {\n    const result = [];\n    let lookupColumn: string = \"\";\n    const raw = this.formatter.formatAny(originalValue);  // AltText if the reference lookup fails\n    for (const value of values) {\n      if (typeof value === \"string\") {\n        // Failed to parse one of the references, so return a raw string for the whole thing\n        return raw;\n      } else {\n        // value is a lookup tuple: ['l', value, options]\n        result.push(value[1]);\n        lookupColumn = value[2].column;\n      }\n    }\n    return ['l', result, {column: lookupColumn, raw}];\n  }\n\n  /**\n   * Convert each source value to a 'Reference'\n   */\n  protected convertInner(value: any): any {\n    return this._innerConverter.convert(value);\n  }\n}\n\nclass ReferenceConverter extends ValueConverter {\n  private _innerConverter: ValueConverter = createConverter(this.formatter, this.parser.visibleColParser);\n\n  constructor(public formatter: BaseFormatter, public parser: ReferenceParser) {\n    super(formatter, parser);\n    // Prevent the parser from looking up reference values in the frontend.\n    // Leave it to the data engine which has a much more efficient algorithm for long lists of values.\n    delete parser.tableData;\n  }\n\n  protected convertInner(value: any): any {\n    // Convert to the type of the visible column.\n    const converted = this._innerConverter.convert(value);\n    return this.parser.lookup(converted, this.formatter.formatAny(value));\n  }\n}\n\nclass NumericConverter extends ValueConverter {\n  protected convertInner(value: any): any {\n    if (typeof value === \"boolean\") {\n      return value ? 1 : 0;\n    }\n    return super.convertInner(value);\n  }\n}\n\nclass DateConverter extends ValueConverter {\n  private _sourceType = gristTypes.extractInfoFromColType(this.formatter.type);\n\n  protected convertInner(value: any): any {\n    // When converting Date->DateTime, DateTime->Date, or between DateTime timezones,\n    // it's important to send an encoded Date/DateTime object rather than just a timestamp number\n    // so that the data engine knows what to do in do_convert, especially regarding timezones.\n    // If the source column is a Reference to a Date/DateTime then `value` is already\n    // an encoded object from the display column which has type Any.\n    value = gristTypes.reencodeAsAny(value, this._sourceType);\n    if (Array.isArray(value) && (\n      value[0] === GristObjCode.Date ||\n      value[0] === GristObjCode.DateTime\n    )) {\n      return value;\n    }\n    return super.convertInner(value);\n  }\n}\n\nexport const valueConverterClasses: { [type: string]: typeof ValueConverter } = {\n  Date: DateConverter,\n  DateTime: DateConverter,\n  ChoiceList: ChoiceListConverter,\n  Ref: ReferenceConverter,\n  RefList: ReferenceListConverter,\n  Numeric: NumericConverter,\n  Int: NumericConverter,\n};\n\nexport function createConverter(formatter: BaseFormatter, parser: ValueParser) {\n  const cls = valueConverterClasses[gristTypes.extractTypeFromColType(parser.type)] || ValueConverter;\n  return new cls(formatter, parser);\n}\n\n/**\n * Used by the ConvertFromColumn user action in the data engine.\n * The higher order function separates docData (passed by ActiveDoc)\n * from the arguments passed to call_external in Python.\n */\nexport function convertFromColumn(\n  metaTables: TableDataActionSet,\n  sourceColRef: number,\n  type: string,\n  widgetOpts: string,\n  visibleColRef: number,\n  values: ReadonlyArray<CellValue>,\n  displayColValues?: ReadonlyArray<CellValue>,\n): CellValue[] {\n  const docData = new DocData(\n    (_tableId) => { throw new Error(\"Unexpected DocData fetch\"); },\n    metaTables,\n  );\n\n  const formatter = createFullFormatterFromDocData(docData, sourceColRef);\n  const parser = createParserRaw(\n    ...createParserOrFormatterArgumentsRaw(docData, type, widgetOpts, visibleColRef)\n  );\n  const converter = createConverter(formatter, parser);\n  return convertValues(converter, values, displayColValues || values);\n}\n\nexport function convertValues(\n  converter: ValueConverter,\n  // Raw values from the actual column, e.g. row IDs for reference columns\n  values: ReadonlyArray<CellValue>,\n  // Values from the display column, which is the same as the raw values for non-referencing columns.\n  // In almost all cases these are the values that actually matter and get converted.\n  displayColValues: ReadonlyArray<CellValue>,\n): CellValue[] {\n  // Converting Ref <-> RefList without changing the target table is a special case - see prepTransformColInfo.\n  // In this case we deal with the actual row IDs stored in the real column,\n  // whereas in all other cases we use display column values.\n  const sourceType = gristTypes.extractInfoFromColType(converter.formatter.type);\n  const targetType = gristTypes.extractInfoFromColType(converter.parser.type);\n  const refToRefList = (\n    sourceType.type === \"Ref\" &&\n    targetType.type === \"RefList\" &&\n    sourceType.tableId === targetType.tableId\n  );\n  const refListToRef = (\n    sourceType.type === \"RefList\" &&\n    targetType.type === \"Ref\" &&\n    sourceType.tableId === targetType.tableId\n  );\n\n  return displayColValues.map((displayVal, i) => {\n    const actualValue = values[i];\n\n    if (refToRefList && typeof actualValue === \"number\") {\n      if (actualValue === 0) {\n        return null;\n      } else {\n        return [\"L\", actualValue];\n      }\n    } else if (refListToRef && isList(actualValue)) {\n      if (actualValue.length === 1) {\n        // Empty list: ['L']\n        return 0;\n      } else if (actualValue.length === 2) {\n        // Singleton list: ['L', rowId]\n        return actualValue[1];\n      }\n    }\n\n    return converter.convert(displayVal);\n  });\n}\n","/***\n * This is web worker code for running the Grist data engine.\n */\nimport {guessColInfo} from 'app/common/ValueGuesser';\nimport {convertFromColumn} from 'app/common/ValueConverter';\nconst {loadPyodide} = require(\"pyodide\");  // importing causes weird webpack errors\n\n// This file is copied from core/sandbox/pyodide/ where it's built by packages.js.\n// Remember to update it when packages are rebuilt.\n// TODO automate the copying or make symlinking work.\nimport packages from './package_filenames.json';\n\n// Add to self to make this accessible within Python as js.callExternal\nself.callExternal = (name, args) => {\n  const func = {\n    guessColInfo,\n    convertFromColumn\n  }[name];\n  args = args.toJs({ dict_converter: Object.fromEntries });\n  return func(...args);\n}\n\nasync function initPyodide() {\n  const pyodide = await loadPyodide({indexURL: self.urlPrefix + \"pyodide/\"});\n  console.log(pyodide.runPython(`\nimport sys\nsys.version\n`));\n  await pyodide.loadPackage(\n    [...packages, \"grist-1.0-py3-none-any.whl\"].map(l => self.urlPrefix + \"packages/\" + l)\n  );\n  pyodide.runPython(`\nimport sys\nsys.path.append('/lib/python3.11/site-packages/grist/')\nimport main\nimport sandbox as sandbox_mod\nimport os\nimport js\n\nos.environ['IMPORTDIR'] = '/import'\nsandbox = sandbox_mod.default_sandbox = sandbox_mod.Sandbox(None, None)\nsandbox.run = lambda: print(\"Sandbox is running\")\n\ndef save_file(path, content):\n  with open(path, 'w') as f:\n    f.write(content)\n\nsandbox.register('save_file', save_file)\n\n\ndef call_external(name, *args):\n  result = js.callExternal(name, args)\n  return result.to_py()\n\nsandbox.call_external = call_external\n\ndef call(name, args):\n  return sandbox._functions[name](*args.to_py())\n\nmain.main()\n`);\n  return pyodide;\n}\n\nfunction start(pyodidePromise) {\n  addEventListener('message', async (e) => {\n    if (e.data.type === 'call') {\n      const { name, args } = e.data;\n      let data = (await pyodidePromise).globals.get(\"call\")(name, args);\n      if (data?.toJs) {\n        data = data.toJs({ dict_converter: Object.fromEntries });\n      }\n      postMessage({ type: 'data', data });\n    }\n  });\n}\n\nasync function main() {\n  const pyodidePromise = initPyodide();\n  start(pyodidePromise);\n}\n\nmain().catch(e => console.error(e));\n"],"names":["identity","UP_TRIANGLE","DOWN_TRIANGLE","EMAIL_RE","RegExp","startsWith","str","prefix","lastIndexOf","endsWith","suffix","indexOf","length","removePrefix","slice","removeSuffix","removeTrailingSlash","result","padStart","targetLength","padString","capitalize","replace","c","toUpperCase","capitalizeFirstWord","isNumber","n","isNaN","parseFloat","isFinite","clamp","value","min","max","Math","between","bound1","bound2","lower","upper","mod","x","roundDownToMultiple","m","floor","undefDefault","y","undef","list","async","firstDefined","op","safeJsonParse","json","defaultVal","JSON","parse","e","encodeQueryParam","encodeURIComponent","String","encodeQueryParams","obj","Object","keys","map","k","join","maxsplit","sep","maxNumSplits","pos","start","i","push","arraysEqual","a","b","setDifference","Set","ai","has","add","arrayLike","item","Array","prototype","call","arrayRemove","array","index","splice","arrayInsertBefore","nextValue","arrayExtend","anotherArray","len","arrayCopyForward","toArray","toStart","fromArray","fromStart","count","end","xend","arrayCopyBackward","j","xStart","arrayAppend","arraySplice","target","arrToInsert","origLen","tailLen","insLen","sortedIndex","elem","compareFunc","mid","lo","hi","hasDuplicates","prevVals","create","countIf","callback","forEach","map2","array1","array2","mapFunc","growMatrix","dataMatrix","r","colArr","colVals","from","_v","multiCompareFunc","sortKeyFuncs","compareFuncs","optAscending","Error","ascending","compareOutcome","keyA","keyB","nativeCompare","propertyCompare","property","defaultLocale","defaultCollator","Intl","Collator","localeCompare","compare","setDefault","mapInst","key","val","set","get","getSetMapValue","buildValue","popFromMap","delete","addCountsToMap","valueCounts","values","v","mappedValue","isSubset","smaller","larger","deepExtend","_varArgObjects","arguments","object","name","hasOwnProperty","src","tgt","isArray","byteString","bytes","toFixed","mapToObject","keysArray","optThisArg","pruneArray","arr","indexes","arrAt","indexesAt","_kwlist","sanitizeIdent","ident","includes","cloneFunc","fn","eval","toString","genRandomId","optPrefix","chars","ret","random","sortedScan","arrA","arrB","optKeyFunc","keyFunc","getReconnectTimeout","attemptNumber","intervals","timeout","isEmail","email","test","toLowerCase","waitObs","observable","predicate","Boolean","Promise","resolve","_reject","peek","sub","subscribe","dispose","waitGrainObs","res","addListener","inlineStyle","valueObs","subscribeElem","style","setProperty","PromiseChain","_last","nextCB","next","this","catch","then","isColorDark","hexColor","isDarkBelow","substring","rgb","parseInt","isValidHex","isLongerThan","promise","timeoutMsec","isPending","done","race","delay","isAffirmative","parameter","isNonNullish","unwrap","obs","not","use","getDistinctValues","Infinity","distinct","size","assertIsDefined","retryOnce","recover","notSet","ifNotSet","def","webpackEmptyContext","req","code","id","module","exports","Token","constructor","type","_value","_type","_format","format","Parser","pattern","date","match","exec","groups","tokens","entries","parser","abbreviatedTimezones","dayOfMonthAndMonthNameDateFormatParser","iSO8601BasicDateTimeFormatParser","iSO8601ExtendedDateTimeFormatParser","monthNameAndDayOfMonthDateFormatParser","rFC2822DateTimeFormatParser","slashDelimitedDateTimeFormatParser","twelveHourTimeFormatParser","twentyFourHourTimeFormatParser","parsers","timeFormatRefiner","refine","parsedResults","meridiemExists","t","refiners","filter","YearFormatTokenAssigner","_map","Map","_testTokenType","token","assign","formatToken","MonthFormatTokenAssigner","DayOfMonthFormatTokenAssigner","DelimiterFormatTokenAssigner","MinuteFormatTokenAssigner","SecondFormatTokenAssigner","MillisecondFormatTokenAssigner","TimezoneFormatTokenAssigner","abbreviatedTimezoneRegex","DayOfYearFormatTokenAssigner","EscapeTextFormatTokenAssigner","ISODayOfWeekFormatTokenAssigner","ISOWeekOfYearFormatTokenAssigner","TwentyFourHourFormatTokenAssigner","TwelveHourFormatTokenAssigner","DayOfWeekFormatTokenAssigner","MeridiemFormatTokenAssigner","dayOfMonthFormatTokenAssigner","dayOfWeekFormatTokenAssigner","dayOfYearFormatTokenAssigner","delimiterFormatTokenAssigner","escapeTextFormatTokenAssigner","iSODayOfWeekFormatTokenAssigner","iSOWeekOfYearFormatTokenAssigner","meridiemFormatTokenAssigner","millisecondFormatTokenAssigner","minuteFormatTokenAssigner","monthFormatTokenAssigner","secondFormatTokenAssigner","timezoneFormatTokenAssigner","twelveHourFormatTokenAssigner","twentyFourHourFormatTokenAssigner","yearFormatTokenAssigner","strftimeDayOfMonthFormatTokenAssigner","strftimeDayOfWeekFormatTokenAssigner","strftimeDayOfYearFormatTokenAssigner","strftimeDelimiterFormatTokenAssigner","strftimeEscapeTextFormatTokenAssigner","strftimeISODayOfWeekFormatTokenAssigner","strftimeISOWeekOfYearFormatTokenAssigner","strftimeMeridiemFormatTokenAssigner","strftimeMillisecondFormatTokenAssigner","strftimeMinuteFormatTokenAssigner","strftimeMonthFormatTokenAssigner","strftimeSecondFormatTokenAssigner","strftimeTimezoneFormatTokenAssigner","strftimeTwelveHourFormatTokenAssigner","strftimeTwentyFourHourFormatTokenAssigner","strftimeYearFormatTokenAssigner","defaultAssigners","strftimeAssigners","Guesser","static","parsedResult","refinedParsedResults","refiner","assigner","formatString","matchedFormats","getFormatString","_noop","LLink","_next","_prev","isDisposed","_insertBefore","node","last","_removeNode","_disposeList","Emitter","super","_changeCB","_changeCBContext","undefined","optContext","Listener","emit","args","callAll","setChangeCB","changeCB","_triggerChangeCB","hasListeners","emitter","context","begin","lis","_noopOwner","autoDispose","_defaultDisposableOwner","Disposable","_disposalList","DisposalList","owner","origDefaultOwner","holder","Holder","clear","e2","console","error","release","onDispose","wipeOnDispose","_wipeOutObject","disposalList","callAndDispose","_describe","_owned","_disposalListener","_onOutsideDispose","_unlisten","owned","isEmpty","disposalListener","MultiHolder","DisposeListener","DepItem","_priority","_enqueued","_creation","_nextCreationNum","_callback","_context","useDep","depItem","p","recompute","enqueue","queue","_isPrior","_items","items","isPrior","curIdx","parIdx","parItem","pop","leftIdx","rightIdx","bestIdx","isPrioritySmaller","_seen","bundleDepth","compute","BaseObservable","_onChange","setAndTrigger","prev","_disposeOwned","setListenerChangeCB","_getDepItem","arg","_setWithArg","_disposeMap","WeakMap","_walkDom","visitFunc","firstChild","nextSibling","disposeNode","disposer","disposeRecursive","domDispose","onDisposeElem","disposerFunc","prevDisposer","autoDisposeElem","disposable","fromKoWrappers","fromKo","koObs","KoWrapObs","_koObs","_koSub","func","emptyArray","dependencies","_depItem","_evaluate","_dependencies","_depListeners","_subscribeTo","_dynDeps","_useFunc","_useDependency","bind","_obs","listener","_inUse","readArgs","apply","_enqueue","cb","_noWrite","Computed","_write","_sub","_read","readCb","onWrite","writeFunc","koValue","comp","computed","subscribeBindable","initial","dest","source","window","DocumentFragment","Element","Node","document","G","_dataMap","attrsElem","attrsObj","setAttribute","attrs","attrElem","attrName","attrValue","removeAttribute","attr","attrValueObs","boolAttrElem","boolValue","boolAttr","boolValueObs","textElem","appendChild","createTextNode","textNode","nodeValue","styleElem","propElem","prop","showElem","display","show","hideElem","hide","clsElem","className","classList","toggle","cls","_clsDynamicPrefix","prevClass","remove","dataElem","data","getData","tagString","_updateWithArgsOrDispose","_createFromTagString","_createElementHtml","svg","_createElementSvg","tag","createElement","createElementNS","createFunc","classes","dotPos","hashPos","update","_updateWithArgs","_updateWithArg","frag","createDocumentFragment","find","selector","querySelector","findAll","querySelectorAll","replaceContent","nodeBefore","nodeAfter","content","parentNode","removeChild","insertBefore","domComputed","contentFunc","markerPre","createComment","markerPost","domComputedOwned","maybe","maybeOwned","buildDom","ObsArray","_ownedItems","_setWithSplice","deleted","oldOwnedItems","ComputedArray","obsArr","_mapper","_syncMap","obsArrayValue","_unsync","_source","_listener","_recordChange","_rebuild","_lastSplice","_applySplice","change","sourceArray","newItems","numAdded","oldItems","obsArray","itemCreateFunc","nodes","newArr","oldArr","endIndex","nextElem","DomEventListener","eventType","useCapture","addEventListener","handleEvent","event","removeEventListener","DomEventMatchListener","inner","outer","el","parentElement","matches","_findMatch","onElem","on","onMatchElem","onMatch","onKeyElem","evType","keyHandlers","tabIndex","ev","_elem","plainHandler","handler","stopPropagation","preventDefault","onKeyPress","onKeyDown","dom","text","clsPrefix","_global","StylePiece","_styles","_mounted","_nextClassName","_unmounted","g","_grainNextStyleNum","getNextStyleNum","sheet","_createRules","head","piece","addToElem","_mountAll","styles","nestedStart","search","createCssRules","locale","localeString","components","countryCode","split","AD","AE","AF","AG","AI","AL","AM","AN","AO","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","ST","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW","DataView","getNative","hashClear","hashDelete","hashGet","hashHas","hashSet","Hash","entry","listCacheClear","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","ListCache","mapCacheClear","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","MapCache","setCacheAdd","setCacheHas","SetCache","__data__","stackClear","stackDelete","stackGet","stackHas","stackSet","Stack","Symbol","Uint8Array","setter","iteratee","accumulator","resIndex","baseTimes","isArguments","isBuffer","isIndex","isTypedArray","inherited","isArr","isArg","isBuff","isType","skipIndexes","offset","eq","baseEach","collection","defineProperty","baseForOwn","createBaseEach","arrayPush","isFlattenable","baseFlatten","depth","isStrict","baseFor","createBaseFor","castPath","toKey","path","keysFunc","symbolsFunc","getRawTag","objectToString","symToStringTag","toStringTag","baseGetTag","isObjectLike","baseIsEqualDeep","baseIsEqual","other","bitmask","customizer","stack","equalArrays","equalByTag","equalObjects","getTag","argsTag","arrayTag","objectTag","equalFunc","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","matchData","noCustomizer","objValue","srcValue","COMPARE_PARTIAL_FLAG","isFunction","isMasked","isObject","toSource","reIsHostCtor","funcProto","Function","objectProto","funcToString","reIsNative","isLength","typedArrayTags","baseMatches","baseMatchesProperty","isPrototype","nativeKeys","isArrayLike","baseIsMatch","getMatchData","matchesStrictComparable","hasIn","isKey","isStrictComparable","baseGet","arrayMap","isSymbol","symbolProto","symbolToString","baseToString","trimmedEndIndex","reTrimStart","string","cache","stringToPath","coreJsData","arrayAggregator","baseAggregator","baseIteratee","initializer","eachFunc","fromRight","iterable","props","arraySome","cacheHas","isPartial","arrLength","othLength","arrStacked","othStacked","seen","arrValue","othValue","compared","othIndex","mapToArray","setToArray","symbolValueOf","valueOf","byteLength","byteOffset","buffer","message","convert","stacked","getAllKeys","objProps","objLength","objStacked","skipCtor","objCtor","othCtor","freeGlobal","baseGetAllKeys","getSymbols","isKeyable","baseIsNative","getValue","getPrototype","overArg","getPrototypeOf","nativeObjectToString","isOwn","unmasked","arrayFilter","stubArray","propertyIsEnumerable","nativeGetSymbols","getOwnPropertySymbols","symbol","mapTag","promiseTag","setTag","weakMapTag","dataViewTag","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","ArrayBuffer","Ctor","ctorString","hasFunc","nativeCreate","spreadableSymbol","isConcatSpreadable","reIsUint","reIsDeepProp","reIsPlainProp","uid","maskSrcKey","IE_PROTO","assocIndexOf","getMapData","memoize","freeExports","nodeType","freeModule","freeProcess","process","nodeUtil","require","types","binding","transform","freeSelf","self","root","pairs","LARGE_ARRAY_SIZE","memoizeCapped","rePropName","reEscapeChar","charCodeAt","number","quote","subString","reWhitespace","charAt","reRegExpChar","reHasRegExpChar","pair","defaultValue","baseAssignValue","createAggregator","groupBy","baseHasIn","hasPath","baseIsArguments","stubFalse","Buffer","objectCtorString","proto","baseIsTypedArray","baseUnary","nodeIsTypedArray","arrayLikeKeys","baseKeys","baseMap","resolver","TypeError","memoized","Cache","baseProperty","basePropertyDeep","castFunction","toInteger","MAX_ARRAY_LENGTH","nativeMin","toNumber","toFinite","remainder","baseTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","isBinary","tz","load","factory","moment","version","default","cachedGuess","zones","links","countries","names","guesses","logError","momentVersion","major","minor","charCodeToInt","charCode","unpackBase60","parts","whole","fractional","multiplier","out","sign","arrayToInt","mapIndices","indices","unpack","offsets","untils","round","intToUntil","abbrs","population","Zone","packedString","_set","Country","country_name","zone_names","OffsetAt","at","timeString","toTimeString","abbr","getTimezoneOffset","ZoneScore","zone","offsetScore","abbrScore","findChange","low","high","diff","Date","sortZoneScores","addToGuesses","guessesForUserOffsets","guessesOffset","offsetsLength","filteredGuesses","normalizeName","addZone","packed","normalized","getZone","caller","link","addLink","aliases","alias","normal0","normal1","needsOffset","isUnixTimestamp","_f","_a","_tzm","input","utc","isMoment","unpacked","_index","timestamp","zone_name","country_code","offsetNext","offsetPrev","moveAmbiguousForward","moveInvalidForward","mom","utcOffset","scoreOffsetAt","offsetAt","abs","dataVersion","_zones","_links","_names","_countries","country_zones","addCountries","zoneExists","didShowError","guess","ignoreCache","intlName","DateTimeFormat","resolvedOptions","timeZone","zoneScore","startYear","getFullYear","userOffsets","zoneScores","sort","rebuildGuess","zonesForCountry","country","with_offset","old","abbrWrap","_z","resetZoneWrap","defaultZone","updateOffset","keepTime","_isUTC","_d","z","zoneName","zoneAbbr","local","momentProperties","hookCallback","some","hooks","hasOwnProp","isObjectEmpty","getOwnPropertyNames","isUndefined","isDate","arrLen","extend","createUTC","strict","createLocalOrUTC","getParsingFlags","_pf","empty","unusedTokens","unusedInput","overflow","charsLeftOver","nullInput","invalidEra","invalidMonth","invalidFormat","userInvalidated","iso","parsedDateParts","era","meridiem","rfc2822","weekdayMismatch","isValid","_isValid","flags","parsedParts","isNowValid","getTime","invalidWeekday","_strict","bigHour","isFrozen","createInvalid","NaN","fun","updateInProgress","copyConfig","to","momentPropertiesLen","_isAMomentObject","_i","_l","_offset","_locale","Moment","config","warn","msg","suppressDeprecationWarnings","deprecate","firstTime","deprecationHandler","argLen","deprecations","deprecateSimple","mergeConfigs","parentConfig","childConfig","Locale","zeroFill","forceSign","absNumber","zerosToFill","pow","substr","formattingTokens","localFormattingTokens","formatFunctions","formatTokenFunctions","addFormatToken","padded","ordinal","localeData","formatMoment","expandFormat","output","makeFormatFunction","invalidDate","replaceLongDateFormatTokens","longDateFormat","lastIndex","addUnitAlias","unit","shorthand","lowerCase","normalizeUnits","units","normalizeObjectUnits","inputObject","normalizedProp","normalizedInput","priorities","addUnitPriority","priority","isLeapYear","year","absFloor","ceil","toInt","argumentForCoercion","coercedNumber","makeGetSet","set$1","month","daysInMonth","regexes","match1","match2","match3","match4","match6","match1to2","match3to4","match5to6","match1to3","match1to4","match1to6","matchUnsigned","matchSigned","matchOffset","matchShortOffset","matchWord","addRegexToken","regex","strictRegex","getParseRegexForToken","regexEscape","matched","p1","p2","p3","p4","s","addParseToken","tokenLen","addWeekParseToken","_w","addTimeToArrayFromToken","modMonth","o","monthsShort","months","monthsShortRegex","monthsRegex","monthsParse","defaultLocaleMonths","defaultLocaleMonthsShort","MONTHS_IN_FORMAT","defaultMonthsShortRegex","defaultMonthsRegex","handleStrictParse","monthName","ii","llc","toLocaleLowerCase","_monthsParse","_longMonthsParse","_shortMonthsParse","setMonth","dayOfMonth","getSetMonth","computeMonthsParse","cmpLenRev","shortPieces","longPieces","mixedPieces","_monthsRegex","_monthsShortRegex","_monthsStrictRegex","_monthsShortStrictRegex","daysInYear","parseTwoDigitYear","getSetYear","createDate","d","h","M","ms","setFullYear","createUTCDate","UTC","getUTCFullYear","setUTCFullYear","firstWeekOffset","dow","doy","fwd","getUTCDay","dayOfYearFromWeeks","week","weekday","resYear","resDayOfYear","dayOfYear","weekOfYear","resWeek","weekOffset","weeksInYear","weekOffsetNext","shiftWeekdays","ws","concat","weekdaysMin","weekdaysShort","weekdays","weekdaysMinRegex","weekdaysShortRegex","weekdaysRegex","weekdaysParse","defaultLocaleWeekdays","defaultLocaleWeekdaysShort","defaultLocaleWeekdaysMin","defaultWeekdaysRegex","defaultWeekdaysShortRegex","defaultWeekdaysMinRegex","handleStrictParse$1","weekdayName","_weekdaysParse","_shortWeekdaysParse","_minWeekdaysParse","day","computeWeekdaysParse","minp","shortp","longp","minPieces","_weekdaysRegex","_weekdaysShortRegex","_weekdaysMinRegex","_weekdaysStrictRegex","_weekdaysShortStrictRegex","_weekdaysMinStrictRegex","hFormat","hours","lowercase","minutes","matchMeridiem","_meridiemParse","seconds","kInput","_isPm","isPM","_meridiem","pos1","pos2","getSetHour","globalLocale","baseConfig","calendar","sameDay","nextDay","nextWeek","lastDay","lastWeek","sameElse","LTS","L","LL","LLL","LLLL","dayOfMonthOrdinalParse","relativeTime","future","past","ss","mm","hh","dd","w","ww","yy","meridiemParse","locales","localeFamilies","commonPrefix","arr1","arr2","minl","normalizeLocale","loadLocale","oldLocale","isLocaleNameSane","_abbr","getSetGlobalLocale","getLocale","defineLocale","_config","parentLocale","chooseLocale","checkOverflow","_overflowDayOfYear","_overflowWeeks","_overflowWeekday","extendedIsoRegex","basicIsoRegex","tzRegex","isoDates","isoTimes","aspNetJsonRegex","obsOffsets","UT","GMT","EDT","EST","CDT","CST","MDT","MST","PDT","PST","configFromISO","l","allowTime","dateFormat","timeFormat","tzFormat","isoDatesLen","isoTimesLen","configFromStringAndFormat","untruncateYear","yearStr","configFromRFC2822","parsedArray","monthStr","dayStr","hourStr","minuteStr","secondStr","weekdayStr","parsedInput","getDay","checkWeekday","obsOffset","militaryOffset","numOffset","hm","calculateOffset","setUTCMinutes","getUTCMinutes","defaults","configFromArray","currentDate","expectedWeekday","yearToUse","nowValue","now","_useUTC","getUTCMonth","getUTCDate","getMonth","getDate","currentDateArray","weekYear","temp","weekdayOverflow","curWeek","W","E","createLocal","_week","gg","_dayOfYear","dayOfYearFromWeekInfo","_nextDay","ISO_8601","RFC_2822","skipped","stringLength","totalParsedInputLength","hour","isPm","meridiemHour","meridiemFixWrap","erasConvertYear","prepareConfig","preparse","tempConfig","bestMoment","scoreToBeat","currentScore","validFormatFound","bestFormatIsValid","configfLen","score","configFromStringAndArray","createFromInputFallback","configFromString","dayOrDate","minute","second","millisecond","configFromObject","configFromInput","isUTC","prototypeMin","prototypeMax","pickBy","moments","ordering","Duration","duration","years","quarters","quarter","weeks","isoWeek","days","milliseconds","unitHasDecimal","orderLen","isDurationValid","_milliseconds","_days","_months","_data","_bubble","isDuration","absRound","separator","offsetFromString","chunkOffset","matcher","cloneWithOffset","model","clone","setTime","getDateOffset","isUtc","aspNetRegex","isoRegex","createDuration","diffRes","base","parseIso","isBefore","positiveMomentsDifference","inp","isAfter","createAdder","direction","period","tmp","addSubtract","isAdding","invalid","subtract","isString","isMomentInput","arrayTest","dataTypeTest","isNumberOrStringArray","objectTest","propertyTest","properties","propertyLen","isMomentInputObject","isCalendarSpec","monthDiff","wholeMonthDiff","anchor","newLocaleData","defaultFormat","defaultFormatUtc","lang","MS_PER_SECOND","MS_PER_MINUTE","MS_PER_HOUR","MS_PER_400_YEARS","mod$1","dividend","divisor","localStartOfDate","utcStartOfDate","matchEraAbbr","erasAbbrRegex","computeErasParse","abbrPieces","namePieces","narrowPieces","eras","narrow","_erasRegex","_erasNameRegex","_erasAbbrRegex","_erasNarrowRegex","addWeekYearFormatToken","getter","getSetWeekYearHelper","weeksTarget","setWeekAll","dayOfYearData","erasNameRegex","erasNarrowRegex","erasParse","_eraYearOrdinalRegex","eraYearOrdinalParse","isoWeekYear","_dayOfMonthOrdinalParse","_ordinalParse","_dayOfMonthOrdinalParseLenient","getSetDayOfMonth","getSetMinute","getSetMillisecond","getSetSecond","parseMs","preParsePostFormat","time","formats","sod","startOf","calendarFormat","asFloat","that","zoneDelta","endOf","startOfDate","isoWeekday","inputString","postformat","withoutSuffix","humanize","fromNow","toNow","invalidAt","localInput","isBetween","inclusivity","localFrom","localTo","isSame","inputMs","isSameOrAfter","isSameOrBefore","parsingFlags","prioritized","unitsObj","u","getPrioritizedUnits","prioritizedLen","toObject","toDate","toISOString","keepOffset","inspect","isLocal","for","toJSON","unix","creationData","eraName","since","until","eraNarrow","eraAbbr","eraYear","dir","isoWeeks","weekInfo","weeksInWeekYear","isoWeeksInYear","isoWeeksInISOWeekYear","parseWeekday","parseIsoWeekday","keepLocalTime","keepMinutes","localAdjust","_changeInProgress","parseZone","tZone","hasAlignedHourOffset","isDST","isUtcOffset","dates","isDSTShifted","_isDSTShifted","dontConvert","lengthDiff","diffs","compareArrays","proto$1","get$1","field","listMonthsImpl","listWeekdaysImpl","localeSorted","shift","_calendar","_longDateFormat","formatUpper","tok","_invalidDate","_ordinal","isFuture","_relativeTime","pastFuture","_eras","isFormat","_monthsShort","_monthsParseExact","firstDayOfYear","firstDayOfWeek","_weekdays","_weekdaysMin","_weekdaysShort","_weekdaysParseExact","_fullWeekdaysParse","isLower","langData","mathAbs","addSubtract$1","absCeil","daysToMonths","monthsToDays","makeAs","as","asMilliseconds","asSeconds","asMinutes","asHours","asDays","asWeeks","asMonths","asQuarters","asYears","makeGetter","thresholds","substituteTimeAgo","abs$1","toISOString$1","totalSign","ymSign","daysSign","hmsSign","total","proto$2","monthsFromDays","argWithSuffix","argThresholds","withSuffix","th","posNegDuration","relativeTime$1","toIsoString","updateLocale","tmpLocale","relativeTimeRounding","roundingFunction","relativeTimeThreshold","threshold","limit","myMoment","HTML5_FMT","DATETIME_LOCAL","DATETIME_LOCAL_SECONDS","DATETIME_LOCAL_MS","DATE","TIME","TIME_SECONDS","TIME_MS","WEEK","MONTH","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","setTimeout","clearTimeout","currentQueue","draining","queueIndex","cleanUpNextTick","drainQueue","run","marker","runClearTimeout","Item","noop","nextTick","title","browser","env","argv","versions","once","off","removeListener","removeAllListeners","prependListener","prependOnceListener","listeners","cwd","chdir","umask","StackFrame","FIREFOX_SAFARI_STACK_REGEXP","CHROME_IE_STACK_REGEXP","SAFARI_NATIVE_CODE_REGEXP","_capitalize","_getter","booleanProps","numericProps","stringProps","getArgs","setArgs","getEvalOrigin","evalOrigin","setEvalOrigin","fileName","getFileName","lineNumber","getLineNumber","columnNumber","getColumnNumber","functionName","getFunctionName","getIsEval","fromString","argsStartIndex","argsEndIndex","locationString","Number","require$$0","stacktrace","parseOpera","parseV8OrIE","parseFFOrSafari","extractLocation","urlLike","line","sanitizedLine","location","locationParts","functionNameRegex","parseOpera9","parseOpera11","parseOpera10","lineRE","lines","argsRaw","functionCall","IN_NODE","nodeUrlMod","nodeFetch","nodePath","nodeVmMod","nodeFsPromisesMod","resolvePath","pathSep","loadBinaryFile","loadScript","URL","_file_sub_resource_hash","response","ok","arrayBuffer","readFile","subResourceHash","url","options","integrity","fetch","globalThis","import","importScripts","runInThisContext","pathToFileURL","href","__asyncValues","asyncIterator","iterator","__values","verb","reject","initializeFileSystem","Module","stdLibURL","indexURL","stdlibURL","stdlibPromise","preRun","pymajor","_py_version_major","pyminor","_py_version_minor","FS","mkdirTree","addRunDependency","stdlib","writeFile","finally","removeRunDependency","ENV","HOME","homedir","mounts","mount","filesystems","NODEFS","_node_mounts","MEMFS","PATH","nativeFSAsync","DIR_MODE","FILE_MODE","opts","fileSystemHandle","syncfs","populate","getLocalSet","remote","getRemoteSet","dst","reconcile","isRealDir","toAbsolute","join2","check","readdir","mountpoint","stat","isDir","mode","mtime","handles","collect","curDirHandle","_b","kind","dirHandle","handle","relativePath","getFsHandles","getFile","lastModifiedDate","loadLocalEntry","lookupPath","isFile","contents","getFileDataAsTypedArray","storeLocalEntry","canOwn","chmod","utime","removeLocalEntry","rmdir","unlink","loadRemoteEntry","file","storeRemoteEntry","parentDirHandle","dirname","getFileHandle","basename","getDirectoryHandle","writable","createWritable","write","close","removeRemoteEntry","removeEntry","reverse","relPath","normalize","NATIVEFS_ASYNC","loadPyodide","default_config","fullStdLib","jsglobals","stdin","prompt","lockFileURL","packageCacheDir","status","toThrow","exited","print","stdout","printErr","stderr","API","moduleLoaded","postRun","locateFile","_createPyodideModule","scriptSrc","err","captured_stderr","rawRun","fatal_loading_error","pyodide","runPythonInternal_dict","_pyodide","_base","eval_code","importlib","runPythonInternal","import_module","sys","insert","os","globals","builtins","builtins_dict","Proxy","Reflect","importhook","_importhook","register_js_finder","callKwargs","hook","toPy","enumerable","configurable","register_js_module","makePublicAPI","pyodide_py","pyodide_code","pyodide_ffi","package_loader","sitepackages","SITE_PACKAGES","__str__","dsodir","DSO_DIR","defaultLdLibraryPath","environ","__setitem__","finalizeBootstrap","setCdnUrl","packageIndexReady","register_module_not_found_hook","_import_name_to_package_name","repodata_unvendored_stdlibs_and_test","repodata_info","init_loaded_packages","loadPackage","repodata_unvendored_stdlibs","initializeStreams","__webpack_module_cache__","leafPrototypes","getProto","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","__esModule","ns","current","definition","f","chunkId","all","reduce","promises","nmd","paths","children","scriptUrl","currentScript","scripts","getElementsByTagName","installedChunks","chunkLoadingGlobal","parentChunkLoadingFunction","chunkIds","moreModules","runtime","_defaultValues","POSITIVE_INFINITY","getDefaultForType","colType","extractTypeFromColType","Any","sqlFormatted","extractInfoFromColType","tableId","colon","timezone","isList","isListOrNull","isNumberOrNull","abnormalValueTypes","rightType","getObjCode","Attachments","Text","Blob","Int","Bool","DateTime","Numeric","Id","PositionNumber","ManualSortPos","Ref","RefList","Choice","ChoiceList","isRightType","getReferencedTableId","NumMode","freeze","valueSet","guard","actual","stringify","expected","unionNamespace","checkAll","StringUnion","getCurrency","docSettings","currency","currencyDisplay","NumberFormat","parseNumMode","numMode","useGrouping","notation","escapeRegExp","formatParts","formatToParts","partType","part","currencySymbol","getPart","percentageSymbol","exponentSeparator","minusSign","decimalSeparator","digitGroupSeparator","digitGroupSeparatorCurrency","currencyEndsInMinusSign","defaultNumDecimalsCurrency","_exponentSeparatorRegex","_digitGroupSeparatorRegex","digitsMap","formatter","digit","localeDigit","getDigitsMap","_replaceDigits","digitsRegex","value2","isCurrency","removeSymbol","value3","isPercent","isParenthesised","removeCharsRegex","isScientific","hasDigitGroupSeparator","cleaned","parens","anyHasDigitGroupSeparator","decimals","decimalsRegex","maxDecimals","modes","parsed","decimalsMatch","numDecimals","maxCount","maxMode","numSign","NumberParse","removed","MAX_TWO_DIGIT_YEAR","yearString","UNAMBIGUOUS_FORMATS","TIME_REGEX","UTC_REGEX","NUMERIC_TZ_REGEX","SEPARATORS","tzAbbreviations","tzName","union","parseDateStrict","results","dateFormats","_buildVariations","cleanDate","trim","re","numInputParts","numFormatParts","_getPartialFormat","variations","otherYear","dateFormatOptions","timeFormatOptions","csvEncodeRow","csvEncodeCell","prettier","csvDecodeRow","main","idx","csvDecodeCell","unshift","isPlainObject","GristDate","epochSec","GristDateTime","Reference","rowId","ReferenceList","rowIds","RaisedException","details","user_input","UnknownValue","PendingValue","SkipValue","CensoredValue","encodeObject","mapValues","safeRepr","decodeObject","fromGristValue","sourceObj","mapper","flatMap","ValueParser","widgetOpts","IdentityParser","NumericParser","_parse","fromSettings","ReferenceParser","tableData","visibleColParser","createParserRaw","visibleColType","visibleColWidgetOpts","_visibleColId","visibleColId","raw","cleanParse","lookup","isInteger","isLoaded","column","findMatchingRowId","ReferenceListParser","numbers","every","valueParserClasses","gutil","dateTime","dateOnly","parsedTimeZone","tzMatch","matchStart","tzOffset","hhOffset","mmOffset","remaining","parseTimeZone","parsedTime","ampm","standardizeTime","fullFormat","parseDateTime","_parseJson","_parseCsv","formatDecoded","row","createParserOrFormatterArgumentsRaw","docData","widgetOptions","visibleColRef","columnsTable","getMetaTable","isRefListType","isFullReferencingType","vcol","getRecord","colId","getTable","formatUnknown","hasNestedObjects","isTopLevel","BaseFormatter","translate","_translate","AnyFormatter","NumericFormatter","_numFormat","nfOptions","minimumFractionDigits","maximumFractionDigits","buildNumberFormat","_formatter","_formatParens","_formatPlain","DateFormatter","_dateTimeFormat","_timezone","ReferenceFormatter","visibleColFormatter","createFormatter","formatNotInvalidRef","formatAny","formatters","createFullFormatterFromDocData","colRef","fieldRef","fieldsTable","col","fieldOrCol","visibleCol","createParserOrFormatterArguments","referencedTableId","tablesData","tableRef","findRow","isSummaryTable","isHiddenTable","createVisibleColFormatterRaw","createFullFormatterRaw","ValueGuesser","colInfo","maxUnparsed","unparsed","allowBlank","BoolGuesser","NumericGuesser","_options","_parser","DateGuesser","_tz","defaultTimeFormat","isCustomDateFormat","isCustomTimeFormat","dateTimeWidgetOptions","guessColInfo","guessOptions","dateStrings","sample","dateString","guessed","formatKeys","guessDateFormats","guessDateFormat","schema","docId","peers","basketId","schemaVersion","documentSettings","primaryViewId","summarySourceTable","onDemand","rawViewSectionRef","parentId","parentPos","isFormula","formula","label","description","untieColIdFromLabel","summarySourceCol","displayCol","rules","recalcWhen","recalcDeps","origFileName","parseFormula","delimiter","doublequote","escapechar","quotechar","skipinitialspace","encoding","hasHeaders","host","port","username","dialect","database","storage","databaseRef","tableName","viewRef","tabPos","indentation","pagePos","layoutSpec","parentKey","defaultWidth","borderWidth","theme","chartType","filterSpec","sortColRefs","linkSrcSectionRef","linkSrcColRef","linkTargetColRef","embedId","width","outputText","errorText","fileIdent","fileType","fileSize","fileExt","imageHeight","imageWidth","timeDeleted","timeUploaded","eventTypes","isReadyColRef","actions","memo","enabled","resource","permissions","principals","aclFormula","aclColumn","aclFormulaParsed","permissionsText","rulePos","userAttributes","colIds","userEmail","userName","groupName","instanceId","parent","child","viewSectionRef","pinned","userRef","ActionDispatcher","action","onAddRecord","onUpdateRecord","onRemoveRecord","onBulkAddRecord","onBulkUpdateRecord","onBulkRemoveRecord","onReplaceTableData","onAddColumn","onRemoveColumn","onRenameColumn","onModifyColumn","onAddTable","onRemoveTable","onRenameTable","colValues","SCHEMA_ACTIONS","isEqual","fromPairs","TableData","colTypes","_isLoaded","_columns","_colArray","_rowIdCol","_rowMap","_tableId","colData","defl","loadData","fetchFunc","_fetchPromise","oldRowIds","reassignArray","rowMap","valColumn","getColValues","desiredRowIds","getColIds","colIdSet","getRowIds","bulkColValues","colArray","getTableDataAction","records","_filterRowIndices","rowIndices","colValue","isSchemaAction","dispatchAction","destIndex","srcIndex","oldColId","newColId","oldTableId","newTableId","columns","MetaTableData","getRecords","filterRecords","getRowPropFunc","targetArray","DocData","fetchTableFunc","metaTableData","_tables","_fetchTableFunc","attachments","receiveAction","createTableData","colsByTable","colRecords","fetchTable","td","force","table","fetchData","docInfo","ValueConverter","_isTargetText","convertInner","formatted","ListConverter","_choices","choices","handleValues","originalValue","ReferenceConverter","_innerConverter","createConverter","converted","NumericConverter","DateConverter","_sourceType","typeInfo","valueConverterClasses","lookupColumn","convertFromColumn","metaTables","sourceColRef","displayColValues","converter","sourceType","targetType","refToRefList","refListToRef","displayVal","actualValue","convertValues","callExternal","toJs","dict_converter","fromEntries","pyodidePromise","urlPrefix","log","runPython","initPyodide","postMessage"],"sourceRoot":""}